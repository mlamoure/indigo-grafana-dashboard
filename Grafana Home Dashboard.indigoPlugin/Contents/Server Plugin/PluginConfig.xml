<?xml version="1.0"?>
<PluginConfig>
		<!-- You can add a SupportURL element inside here if you want a context
				 sensitive help link on the config UI - otherwise it will just link
				 to the URL specified in the AboutInformation element. -->
		<SupportURL>https://github.com/mlamoure/indigo-grafana-dashboard/wiki/Indigo-Grafana-Dashboard-Documentation</SupportURL>

		<Field type="menu" id="listConfigurationSelector" defaultValue="connection">
			<Label>Configure:</Label>
			<List>
				<Option value="connection">InfluxDB Connection</Option>
				<Option value="device">Inclusion / Exclusion Criteria</Option>
			</List>
		</Field>


	<Field id="ConnectionInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>Configure the connection to your InfluxDB server. This plugin supports InfluxDB 1.7 and 1.8 only (not 2.x).
		</Label>
	</Field>


		<Field id="InfluxHost" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="textfield" defaultValue="localhost" tooltip="Host address">
					 <Label>InfluxDB Server Host:</Label>
		</Field>

		<Field id="InfluxSSL" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="checkbox">
				<Label>Use SSL</Label>
				<Description>Enable</Description>
		</Field>

	<Field id="httpPortInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>The HTTP port that the plugin will use to connect to your InfluxDB server (default: 8086)</Label>
	</Field>


		<Field id="InfluxHTTPPort" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="textfield" defaultValue="8086" tooltip="HTTP Port, default 8086">
				<Label>InfluxDB HTTP Port:</Label>
		</Field>

	<Field id="InfluxUserInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>The username and password that the plugin will use to connect to your InfluxDB server</Label>
	</Field>

		<Field id="InfluxUser" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="textfield" defaultValue="indigo" tooltip="user name for indigo posting">
				<Label>InfluxDB User:</Label>
		</Field>


		<Field id="InfluxPassword" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="textfield" defaultValue="indigo" tooltip="password for indigo posting user" secure="true">
				<Label>InfluxDB Password:</Label>
		</Field>

	<Field id="InfluxUseDBInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>The database name that will be created/used on your InfluxDB server</Label>
	</Field>

		<Field id="InfluxDB" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="textfield" defaultValue="indigo" tooltip="database name in influx">
				<Label>InfluxDB Database:</Label>
		</Field>

	<Field id="simpleSeparator3" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="separator"/>

	<Field id="InfluxRetentionInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>Configure how long InfluxDB will retain data. Older data beyond this period will be automatically deleted by InfluxDB. This policy will be created on your InfluxDB server if it doesn't exist.
		</Label>
	</Field>

		<Field type="menu" id="InfluxRetention" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" defaultValue="24">
			<Label>InfluxDB Retention Policy:</Label>
			<List>
				<Option value="6">6 months</Option>
				<Option value="12">1 year</Option>
				<Option value="24">2 years</Option>
				<Option value="60">5 years</Option>
				<Option value="-1">Disabled (keep forever)</Option>
			</List>
		</Field>

	<Field id="simpleSeparator4" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="separator"/>

		<Field id="ServerDebug" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="checkbox">
				<Label>Plugin debug</Label>
				<Description>Enable</Description>
		</Field>

		<Field id="ConfigDebug" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="checkbox">
				<Label>Configuration debug</Label>
				<Description>Enable</Description>
		</Field>

		<Field id="TransportDebug" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="checkbox">
				<Label>InfluxDB update decisions debug</Label>
				<Description>Enable</Description>
		</Field>

		<Field id="TransportDebugL2" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="checkbox">
				<Label>InfluxDB update decisions L2 debug (not recommended)</Label>
				<Description>Enable</Description>
		</Field>

		<Field id="JSONDebug" visibleBindingId="listConfigurationSelector" visibleBindingValue="connection" type="checkbox">
				<Label>InfluxDB update full JSON debug (not recommended)</Label>
				<Description>Enable</Description>
		</Field>

<!-- THIS IS THE START TO THE INCLUSION CRITERIA CONFIGURATION -->

	<Field id="IncCriteriaInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>How this works (Inclusion / Exclusion Critiera):</Label>
	</Field>

	<Field id="IncCriteriaInstruction2" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>1) A excluded device will never have any information sent to Influx/Grafana.</Label>
	</Field>

	<Field id="IncCriteriaInstruction3" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>2) Included devices will have all of the device states sent to Influx/Grafana.</Label>
	</Field>

	<Field id="IncCriteriaInstruction4" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>3) All other devices will have only the global include states sent to Influx/Grafana.</Label>
	</Field>

	<Field id="simpleSeparator2-5" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="separator"/>

<Field id="section2-1" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label">
	<Label>Include specific states (for any device)</Label>
</Field>

	<Field id="IncStatesInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>States from this list will be sent to Influx/Grafana for all devices in your Indigo database, unless the device is excluded in the section below.  The device does not need to be added to the "Include specific device" section in order to be sent.
		</Label>
	</Field>

	<Field id="IncStatesInstruction2" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>INSTRUCTIONS: State highlighting / selection in this box are ignored when you leave and enter the configuration dialog.  Any state listed in this box will be included as a "included state".  The selection ability is used only for removing of states, which can be done one at a time, or in bulk holding Shift or the Command key.  To add a state, select a state from the "Available States" drop down.  The number in parens indicates the number of devices that share this state, for informational purposes only.  To remove the selected state(s), click the "remove selected state(s)" button.
		</Label>
	</Field>

		<Field type="list" id="listIncStates" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" defaultValue="" rows="12" alwaysUseInDialogHeightCalc="true">
			<Label>Global include States:</Label>
			<List class="self" method="IncludedStatesListGenerator" dynamicReload="true" />
		</Field>

<Field id="removeStateButton" type="button" tooltip="Remove one or more states from the state list" visibleBindingId="listConfigurationSelector" visibleBindingValue="device">
	<Label></Label>
	<Title>remove selected state(s)</Title>
	<CallbackMethod>RemoveStateFromIncludedDeviceList</CallbackMethod>
</Field>

		<Field type="menu" id="menuAvailableStates" visibleBindingId="listConfigurationSelector" visibleBindingValue="device">
			<Label>Available states:</Label>
			<List class="self" method="AvailableStatesGenerator" dynamicReload="true" />
		</Field>

<Field id="addStateButton" type="button" tooltip="Add the state from the menu above to the included state list" visibleBindingId="listConfigurationSelector" visibleBindingValue="device">
	<Label></Label>
	<Title>add state</Title>
	<CallbackMethod>AddStateToIncludedStateList</CallbackMethod>
</Field>

<Field id="resetStateButton" type="button" tooltip="Reset to default the states from the menu above to the included state list" visibleBindingId="listConfigurationSelector" visibleBindingValue="device">
	<Label></Label>
	<Title>reset to default states</Title>
	<CallbackMethod>ResetStatesIncludedStateList</CallbackMethod>
</Field>

	<Field id="simpleSeparator2-2" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="separator"/>

<Field id="section2-2" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label">
	<Label>Include specific devices</Label>
</Field>

	<Field id="IncDevsInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>Included devices will send ALL states for that device to the Influx database and Grafana.  It's good to include devices that have multiple, unique states that you want to be included in Influx/Grafana without adding each state individually.</Label>
	</Field>

	<Field id="IncDevsInstruction2" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>INSTRUCTIONS: Add devices one by one using the "Available devices" drop down, and the "add device" button.  To remove a device, select it (or multiple using shift or command), and click the "remove selected device(s)" button.</Label>
	</Field>

		<Field type="list" id="listIncDevices" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" defaultValue="*" rows="12" alwaysUseInDialogHeightCalc="true">
			<Label>Include Devices:</Label>
			<List class="self" method="IncludedDeviceListGenerator" dynamicReload="true" />
		</Field>

<Field id="removeDeviceButton" type="button" tooltip="Remove one or more states from teh state list" visibleBindingId="listConfigurationSelector" visibleBindingValue="device">
	<Label></Label>
	<Title>remove selected device(s)</Title>
	<CallbackMethod>RemoveDeviceFromIncludedDeviceList</CallbackMethod>
</Field>

		<Field type="menu" id="menuAvailableDevices" visibleBindingId="listConfigurationSelector" visibleBindingValue="device">
			<Label>Available devices:</Label>
			<List class="self" method="AvailableDevicesGenerator" dynamicReload="true" />
		</Field>

<Field id="addDeviceButton" type="button" tooltip="Add the device from the menu above to the included device list" visibleBindingId="listConfigurationSelector" visibleBindingValue="device">
	<Label></Label>
	<Title>add device</Title>
	<CallbackMethod>AddDeviceToIncludedDeviceList</CallbackMethod>
</Field>

	<Field id="simpleSeparator2-3" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="separator"/>

<Field id="section2-3" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label">
	<Label>Exclude specific devices</Label>
</Field>

	<Field id="ExcDevsInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>This section contains Devices to exclude.  Good to exclude any devices that you will not analyize and that have frequently changing states that match the previous criteria.</Label>
	</Field>

	<Field id="ExcDevsInstruction2" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>INSTRUCTIONS: This section does not have a "button" like the Include Devices section.  Hilighted devices will be excluded.  This was done to make it easier to rapidly select a group of devices.  Hold the Command or Shift keys to quickly highlight multiple devices.</Label>
	</Field>

		<Field type="list" id="listExclDevices" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" defaultValue="" rows="12" alwaysUseInDialogHeightCalc="true">
			<Label>Exclude specific Devices:</Label>
			<List class="self" method="ExcludedDeviceListGenerator" dynamicReload="true" />
		</Field>

	<Field id="simpleSeparator2-4" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="separator"/>

<Field id="section4" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" type="label">
	<Label>Other configuration properties</Label>
</Field>

	<Field id="MinumumUpdateInstruction" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" alignText="left" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>This field configures the minimum frequency of updates.  For each device that is sent to InfluxDB, if the device has not had a change in Indigo in the time period configured, the plugin will send an update to InfluxDB.
		</Label>
	</Field>

	<Field id="MinumumUpdateInstruction2" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" alignText="left" type="label" fontColor="darkgray" fontSize="small" alignWithControl="false">
		<Label>This avoids the problem of missing data on the left side (especially for discrete graphs) for devices / variables that are updated infrequently. For example, if your HVAC turned on yesterday at 11:50pm and turns off at 11:59pm. Then it turns on today at 10am until 10:10:am. If you graph today only, Grafana doesn't know what the HVAC state was from midnight to 10am.
		</Label>
	</Field>

		<Field type="menu" id="MinimumUpdateFrequency" visibleBindingId="listConfigurationSelector" visibleBindingValue="device" defaultValue="5">
			<Label>Minimum InfluxDB update frequency:</Label>
			<List>
				<Option value="5">5 Minutes</Option>
				<Option value="10">10 Minutes</Option>
				<Option value="15">15 Minutes</Option>
				<Option value="30">30 Minutes</Option>
				<Option value="60">60 Minutes</Option>
<!--				<Option value="smart">Smart (at the beginning / end of each day)</Option>-->
				<Option value="-1">Disabled</Option>
			</List>
		</Field>
</PluginConfig>

