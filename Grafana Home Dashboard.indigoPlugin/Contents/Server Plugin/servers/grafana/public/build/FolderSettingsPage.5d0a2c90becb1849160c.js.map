{"version":3,"sources":["webpack:///./public/app/features/folders/FolderSettingsPage.tsx"],"names":["FolderSettingsPage","_super","props","_this","call","this","onTitleChange","evt","setFolderTitle","target","value","onSave","Object","tslib__WEBPACK_IMPORTED_MODULE_0__","preventDefault","stopPropagation","setState","isLoading","saveFolder","folder","_a","sent","onDelete","app_core_app_events__WEBPACK_IMPORTED_MODULE_6__","emit","app_types__WEBPACK_IMPORTED_MODULE_8__","showConfirmModal","title","text","icon","yesText","onConfirm","deleteFolder","uid","state","prototype","componentDidMount","getFolderByUid","folderUid","render","navModel","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","app_core_components_Page_Page__WEBPACK_IMPORTED_MODULE_5__","Contents","className","name","onSubmit","_grafana_ui__WEBPACK_IMPORTED_MODULE_4__","type","onChange","disabled","canSave","hasChanged","onClick","react__WEBPACK_IMPORTED_MODULE_1__","mapDispatchToProps","_state_actions__WEBPACK_IMPORTED_MODULE_9__","__webpack_exports__","react_hot_loader__WEBPACK_IMPORTED_MODULE_2__","module","react_redux__WEBPACK_IMPORTED_MODULE_3__","location","routeParams","app_core_selectors_navModel__WEBPACK_IMPORTED_MODULE_7__","navIndex","_state_navModel__WEBPACK_IMPORTED_MODULE_10__"],"mappings":"iTA0BAA,EAAA,SAAAC,GACE,SAAAD,EAAYE,GAAZ,IAAAC,EACEF,EAAAG,KAAAC,KAAMH,IAAMG,YAUdF,EAAAG,cAAgB,SAACC,GACfJ,EAAKD,MAAMM,eAAeD,EAAIE,OAAOC,QAGvCP,EAAAQ,OAAS,SAAOJ,GAAqC,OAAAK,OAAAC,EAAA,UAAAD,CAAAT,OAAA,yFAInD,OAHAI,EAAIO,iBACJP,EAAIQ,kBACJV,KAAKW,SAAS,CAAEC,WAAW,IAC3B,GAAMZ,KAAKH,MAAMgB,WAAWb,KAAKH,MAAMiB,uBAAvCC,EAAAC,OACAhB,KAAKW,SAAS,CAAEC,WAAW,cAG7Bd,EAAAmB,SAAW,SAACf,GACVA,EAAIQ,kBACJR,EAAIO,iBAEJS,EAAA,EAAUC,KAAKC,EAAA,WAAWC,iBAAkB,CAC1CC,MAAO,SACPC,KAAM,4DACNC,KAAM,WACNC,QAAS,SACTC,UAAW,WACT5B,EAAKD,MAAM8B,aAAa7B,EAAKD,MAAMiB,OAAOc,SA/B9C9B,EAAK+B,MAAQ,CACXjB,WAAW,KAoEjB,OAxEwCL,OAAAC,EAAA,UAAAD,CAAAZ,EAAAC,GAQtCD,EAAAmC,UAAAC,kBAAA,WACE/B,KAAKH,MAAMmC,eAAehC,KAAKH,MAAMoC,YA8BvCtC,EAAAmC,UAAAI,OAAA,WACQ,IAAAnB,EAAAf,KAAAH,MAAEsC,EAAApB,EAAAoB,SAAUrB,EAAAC,EAAAD,OAElB,OACEsB,EAAAC,EAAAC,cAACC,EAAA,EAAI,CAACJ,SAAUA,GACdC,EAAAC,EAAAC,cAACC,EAAA,EAAKC,SAAQ,CAAC5B,UAAWZ,KAAK6B,MAAMjB,WACnCwB,EAAAC,EAAAC,cAAA,MAAIG,UAAU,oBAAkB,mBAEhCL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,yBACbL,EAAAC,EAAAC,cAAA,QAAMI,KAAK,qBAAqBC,SAAU3C,KAAKM,QAC7C8B,EAAAC,EAAAC,cAAA,OAAKG,UAAU,WACbL,EAAAC,EAAAC,cAAA,SAAOG,UAAU,yBAAuB,QACxCL,EAAAC,EAAAC,cAACM,EAAA,MAAK,CACJC,KAAK,OACLJ,UAAU,yBACVpC,MAAOS,EAAOQ,MACdwB,SAAU9C,KAAKC,iBAGnBmC,EAAAC,EAAAC,cAAA,OAAKG,UAAU,sBACbL,EAAAC,EAAAC,cAAA,UAAQO,KAAK,SAASJ,UAAU,kBAAkBM,UAAWjC,EAAOkC,UAAYlC,EAAOmC,YAAU,QAGjGb,EAAAC,EAAAC,cAAA,UAAQG,UAAU,iBAAiBS,QAASlD,KAAKiB,SAAU8B,UAAWjC,EAAOkC,SAAO,gBAUpGrD,EAxEA,CAAwCwD,EAAA,eAoFlCC,EAAqB,CACzBpB,eAAcqB,EAAA,EACdxC,WAAUwC,EAAA,EACVlD,eAAckD,EAAA,EACd1B,aAAY0B,EAAA,GAGCC,EAAA,QAAA/C,OAAAgD,EAAA,IAAAhD,CAAIiD,EAAJ,CACbjD,OAAAkD,EAAA,QAAAlD,CAlBsB,SAACsB,GACvB,IAAMD,EAAMC,EAAM6B,SAASC,YAAY/B,IAEvC,MAAO,CACLO,SAAU5B,OAAAqD,EAAA,EAAArD,CAAYsB,EAAMgC,SAAU,mBAAmBjC,EAAOrB,OAAAuD,EAAA,EAAAvD,CAAc,IAC9E0B,UAAWL,EACXd,OAAQe,EAAMf,SAcdsC,EAFF7C,CAGEZ","file":"FolderSettingsPage.5d0a2c90becb1849160c.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { NavModel } from '@grafana/data';\nimport { Input } from '@grafana/ui';\nimport Page from 'app/core/components/Page/Page';\nimport appEvents from 'app/core/app_events';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { StoreState, FolderState, CoreEvents } from 'app/types';\nimport { getFolderByUid, setFolderTitle, saveFolder, deleteFolder } from './state/actions';\nimport { getLoadingNav } from './state/navModel';\n\nexport interface Props {\n  navModel: NavModel;\n  folderUid: string;\n  folder: FolderState;\n  getFolderByUid: typeof getFolderByUid;\n  setFolderTitle: typeof setFolderTitle;\n  saveFolder: typeof saveFolder;\n  deleteFolder: typeof deleteFolder;\n}\n\nexport interface State {\n  isLoading: boolean;\n}\n\nexport class FolderSettingsPage extends PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n    };\n  }\n\n  componentDidMount() {\n    this.props.getFolderByUid(this.props.folderUid);\n  }\n\n  onTitleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    this.props.setFolderTitle(evt.target.value);\n  };\n\n  onSave = async (evt: React.FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n    this.setState({ isLoading: true });\n    await this.props.saveFolder(this.props.folder);\n    this.setState({ isLoading: false });\n  };\n\n  onDelete = (evt: React.MouseEvent<HTMLButtonElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n\n    appEvents.emit(CoreEvents.showConfirmModal, {\n      title: 'Delete',\n      text: `Do you want to delete this folder and all its dashboards?`,\n      icon: 'fa-trash',\n      yesText: 'Delete',\n      onConfirm: () => {\n        this.props.deleteFolder(this.props.folder.uid);\n      },\n    });\n  };\n\n  render() {\n    const { navModel, folder } = this.props;\n\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents isLoading={this.state.isLoading}>\n          <h3 className=\"page-sub-heading\">Folder Settings</h3>\n\n          <div className=\"section gf-form-group\">\n            <form name=\"folderSettingsForm\" onSubmit={this.onSave}>\n              <div className=\"gf-form\">\n                <label className=\"gf-form-label width-7\">Name</label>\n                <Input\n                  type=\"text\"\n                  className=\"gf-form-input width-30\"\n                  value={folder.title}\n                  onChange={this.onTitleChange}\n                />\n              </div>\n              <div className=\"gf-form-button-row\">\n                <button type=\"submit\" className=\"btn btn-primary\" disabled={!folder.canSave || !folder.hasChanged}>\n                  Save\n                </button>\n                <button className=\"btn btn-danger\" onClick={this.onDelete} disabled={!folder.canSave}>\n                  Delete\n                </button>\n              </div>\n            </form>\n          </div>\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nconst mapStateToProps = (state: StoreState) => {\n  const uid = state.location.routeParams.uid;\n\n  return {\n    navModel: getNavModel(state.navIndex, `folder-settings-${uid}`, getLoadingNav(2)),\n    folderUid: uid,\n    folder: state.folder,\n  };\n};\n\nconst mapDispatchToProps = {\n  getFolderByUid,\n  saveFolder,\n  setFolderTitle,\n  deleteFolder,\n};\n\nexport default hot(module)(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(FolderSettingsPage)\n);\n"],"sourceRoot":""}