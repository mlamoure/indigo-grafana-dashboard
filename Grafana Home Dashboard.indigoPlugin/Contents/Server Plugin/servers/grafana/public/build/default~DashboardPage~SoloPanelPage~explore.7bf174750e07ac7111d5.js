(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1LJY":function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var n=function(e){return e.timeZone}},"5BoW":function(e,r,t){"use strict";t.d(r,"a",(function(){return u})),t.d(r,"b",(function(){return i}));var n=t("G4qV"),o=t("QJHg"),a=t("WnbS"),u=Object(n.a)((function(e){return e.logsResult&&e.logsResult.rows}),(function(e){return e.hiddenLogLevels}),(function(e){return e.dedupStrategy}),(function(e,r,t){if(!e||!e.length)return e;var n=Object(o.c)(e,new Set(r));return Object(o.b)(n,t)})),i=function(){return Object(a.a)().getExternal().map((function(e){return{value:e.name,name:e.name,meta:e.meta}}))}},Efza:function(e,r,t){"use strict";t.d(r,"a",(function(){return D})),t.d(r,"c",(function(){return R})),t.d(r,"e",(function(){return T})),t.d(r,"g",(function(){return P})),t.d(r,"w",(function(){return A})),t.d(r,"f",(function(){return E})),t.d(r,"h",(function(){return N})),t.d(r,"b",(function(){return H})),t.d(r,"j",(function(){return G})),t.d(r,"k",(function(){return U})),t.d(r,"n",(function(){return W})),t.d(r,"v",(function(){return Z})),t.d(r,"i",(function(){return Q})),t.d(r,"o",(function(){return V})),t.d(r,"p",(function(){return z})),t.d(r,"q",(function(){return Y})),t.d(r,"r",(function(){return K})),t.d(r,"s",(function(){return $})),t.d(r,"t",(function(){return ee})),t.d(r,"u",(function(){return re})),t.d(r,"d",(function(){return te})),t.d(r,"m",(function(){return ne})),t.d(r,"l",(function(){return oe}));var n=t("AJqF"),o=t("67Y/"),a=t("mChF"),u=t("kDLi"),i=t("Obii"),c=t("SMGL"),s=t("WnbS"),f=t("m257"),l=t("w9yp"),d=t("sBLX"),p=t("OTXG"),b=t("1LJY"),g=t("LCjV"),m=t("3SGO"),v=t("NPB1"),O=t("kHZm"),j=t("5BoW"),h=t("ASqX");function y(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e,r,t,n,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,o)}function w(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var a=e.apply(r,t);function u(e){x(a,n,o,u,i,"next",e)}function i(e){x(a,n,o,u,i,"throw",e)}u(void 0)}))}}function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?I(Object(t),!0).forEach((function(r){q(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function q(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var k=function(e,r){return function(t){t(Object(p.H)(S({exploreId:e},r))),t(M())}};function D(e,r){return function(t,n){var o=n().explore[e].queries,a=Object(f.i)(o,r);t(Object(p.a)({exploreId:e,index:r,query:a}))}}function R(e,r,t){return function(){var n=w(regeneratorRuntime.mark((function n(o,a){var i,c,f,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=6;break}return n.next=3,Object(s.a)().get();case 3:i=n.sent,n.next=9;break;case 6:return n.next=8,Object(s.a)().get(r);case 8:i=n.sent;case 9:if(c=a().explore[e].datasourceInstance,f=a().explore[e].queries,l=a().user.orgId,n.t0=i.getVersion,!n.t0){n.next=17;break}return n.next=16,i.getVersion();case 16:n.t0=n.sent;case 17:if(d=n.t0,o(Object(p.G)({exploreId:e,datasourceInstance:i,version:d})),!(null==t?void 0:t.importQueries)){n.next=22;break}return n.next=22,o(B(e,f,c,i));case 22:return a().explore[e].isLive&&o(E(e,u.RefreshPicker.offOption.value)),n.next=25,o(J(e,i,l));case 25:o(W(e));case 26:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}()}function T(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(o,a){if(null===r){var u=a().explore[e].queries,i=u[t],c=i.refId,s=i.key;r=Object(f.j)({refId:c,key:s},u,t)}o(Object(p.d)({exploreId:e,query:r,index:t,override:n})),n&&o(W(e))}}function P(e,r){var t=r.height,n=r.width;return Object(p.g)({exploreId:e,height:t,width:n})}var A=function(e){return function(r,t){t().explore.syncedTimes?(r(X(S({},e,{exploreId:d.a.left}))),r(W(d.a.left)),r(X(S({},e,{exploreId:d.a.right}))),r(W(d.a.right))):(r(X(S({},e))),r(W(e.exploreId)))}};function E(e,r){return Object(p.f)({exploreId:e,refreshInterval:r})}function N(e){return function(r){r(Object(p.w)({exploreId:e})),r(Object(p.h)({exploreId:e})),r(M())}}function H(e){return function(r){r(Object(p.w)({exploreId:e})),r(Object(p.b)({exploreId:e})),r(M())}}function L(e,r){return function(t){Object(j.b)().length>=1?t(R(e,r,{importQueries:!0})):t(Object(p.l)({exploreId:e}))}}function G(e,r,t,n,o,a,u,i){return function(){var c=w(regeneratorRuntime.mark((function c(s,f){var d;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:s(L(e,r)),s(Object(p.k)({exploreId:e,containerWidth:o,eventBridge:a,queries:t,range:n,ui:u,originPanelId:i})),s(X({exploreId:e})),d=Object(l.j)(),s(Object(p.u)({richHistory:d}));case 5:case"end":return c.stop()}}),c)})));return function(e,r){return c.apply(this,arguments)}}()}var F=function(e,r,t){var n,o="grafana.explore.history.".concat(null===(n=r.meta)||void 0===n?void 0:n.id),a=c.a.getObject(o,[]);return c.a.set(Object(f.q)(t),r.name),Object(p.n)({exploreId:e,history:a})},B=function(e,r,t,n){return function(){var o=w(regeneratorRuntime.mark((function o(a){var u,i,c,s;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=3;break}return a(Object(p.p)({exploreId:e,queries:r})),o.abrupt("return");case 3:if(c=r,(null===(u=t.meta)||void 0===u?void 0:u.id)!==(null===(i=n.meta)||void 0===i?void 0:i.id)){o.next=8;break}c=y(r),o.next=15;break;case 8:if(!n.importQueries){o.next=14;break}return o.next=11,n.importQueries(r,t.meta);case 11:c=o.sent,o.next=15;break;case 14:c=Object(f.h)();case 15:s=Object(f.h)(c),a(Object(p.p)({exploreId:e,queries:s}));case 17:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},J=function(e,r,t){return function(){var n=w(regeneratorRuntime.mark((function n(o,a){var u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=r.name,o(Object(p.m)({exploreId:e,requestedDatasourceName:u})),r.init)try{r.init()}catch(e){console.log(e)}if(u===a().explore[e].requestedDatasourceName){n.next=5;break}return n.abrupt("return");case 5:o(F(e,r,t));case 6:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}()};function U(e,r,t,n){return function(o){o(Object(p.o)({exploreId:e,modification:r,index:n,modifier:t})),r.preventSubmit||o(W(e))}}var W=function e(r){return function(t,u){t(X({exploreId:r}));var c=u().explore.richHistory,s=u().explore[r],d=s.datasourceInstance,m=s.queries,v=s.containerWidth,j=s.isLive,h=s.range,y=s.scanning,x=s.queryResponse,w=s.querySubscription,I=s.history,S=s.showingGraph,q=s.showingTable;if(!Object(f.p)(m))return t(Object(p.h)({exploreId:r})),void t(M());var k=null==d?void 0:d.interval;Object(f.w)(w);var D=null==d?void 0:d.meta.id,R={minInterval:k,maxDataPoints:v,liveStreaming:j,showingGraph:S,showingTable:q},T=s.requestedDatasourceName,P=Object(b.a)(u().user),A=Object(f.d)(m,R,h,y,P),E=!0;t(Object(p.c)({exploreId:r,loadingState:i.LoadingState.Loading}));var N=Object(O.c)(d,A.request).pipe(j?Object(n.a)(500):a.a,Object(o.a)((function(e){return Object(O.b)(e,x)}))).subscribe((function(n){if(!n.error&&E){var o=Object(f.x)(I,D,m),a=Object(l.b)(c||[],D,T,m,!1,"","");t(Object(p.j)({exploreId:r,history:o})),t(Object(p.u)({richHistory:a})),t(M())}if(E=!1,t(Object(p.r)({exploreId:r,response:n})),u().explore[r].scanning)if(n.state===i.LoadingState.Done&&0===n.series.length){var s=Object(g.a)(-1,u().explore[r].range);t(X({exploreId:r,absoluteRange:s})),t(e(r))}else t(Object(p.w)({exploreId:r}))}));t(Object(p.q)({exploreId:r,querySubscription:N}))}},Z=function(e,r,t){return function(n,o){var a;"starred"===r&&(a=Object(l.n)(o().explore.richHistory,e)),"comment"===r&&(a=Object(l.m)(o().explore.richHistory,e,t)),"delete"===r&&(a=Object(l.h)(o().explore.richHistory,e)),n(Object(p.u)({richHistory:a}))}},Q=function(){return function(e){Object(l.g)(),e(Object(p.u)({richHistory:[]}))}},C=function(e){var r=e.raw.from;Object(i.isDateTime)(r)&&(r=r.valueOf().toString(10));var t=e.raw.to;return Object(i.isDateTime)(t)&&(t=t.valueOf().toString(10)),{from:r,to:t}},M=function(){return function(e,r){var t=r().explore,n=t.left,o=t.right,a=t.split,u=r().user.orgId.toString(),i=n&&!1===n.urlReplaced,c={orgId:u},s={datasource:n.datasourceInstance.name,queries:n.queries.map(f.e),range:C(n.range),ui:{showingGraph:n.showingGraph,showingLogs:!0,showingTable:n.showingTable,dedupStrategy:n.dedupStrategy}};if(c.left=Object(h.c)(s,!0),a){var l={datasource:o.datasourceInstance.name,queries:o.queries.map(f.e),range:C(o.range),ui:{showingGraph:o.showingGraph,showingLogs:!0,showingTable:o.showingTable,dedupStrategy:o.dedupStrategy}};c.right=Object(h.c)(l,!0)}e(Object(m.c)({query:c,replace:i})),i&&e(Object(p.z)({exploreId:d.a.left}))}},X=function(e){return function(r,t){var n=e.exploreId,o=e.absoluteRange,a=e.rawRange,u=t().explore[n],c=Object(b.a)(t().user),s=u.range.raw;o&&(s={from:Object(i.dateTimeForTimeZone)(c,o.from),to:Object(i.dateTimeForTimeZone)(c,o.to)}),a&&(s=a);var l=Object(f.n)(c,s),d={from:l.from.valueOf(),to:l.to.valueOf()};Object(v.a)().init({time:l.raw,refresh:!1,getTimezone:function(){return c},timeRangeUpdated:function(){}}),r(Object(p.e)({exploreId:n,range:l,absoluteRange:d}))}};function V(e){return function(r,t){r(Object(p.v)({exploreId:e}));var n=Object(g.a)(-1,t().explore[e].range);r(X({exploreId:e,absoluteRange:n})),r(W(e))}}function z(e,r){return function(t,n){var o=n().explore[e].queries,a=r.map((function(e,r){return Object(f.j)(e,o,r)}));t(Object(p.y)({exploreId:e,queries:a})),t(W(e))}}function Y(e){return function(r){r(Object(p.A)({itemId:e})),r(M())}}function K(e){return function(){var r=w(regeneratorRuntime.mark((function r(t,n){var o,a,u,i,c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=n().explore[d.a.left],a=S({},o),u=n().location.query[d.a.left],i=Object(f.r)(u),!e){r.next=23;break}return a.queries=[],a.graphResult=void 0,a.logsResult=void 0,a.tableResult=void 0,a.queryKeys=[],i.queries=[],a.urlState=i,t(Object(p.B)({itemState:a})),c=[S({},e.query,{refId:"A"})],l=Object(s.a)().getDataSourceSettingsByUid(e.datasourceUid),r.next=17,t(R(d.a.right,l.name));case 17:return r.next=19,t(Object(p.y)({exploreId:d.a.right,queries:c}));case 19:return r.next=21,t(W(d.a.right));case 21:r.next=26;break;case 23:a.queries=o.queries.slice(),a.urlState=i,t(Object(p.B)({itemState:a}));case 26:t(M());case 27:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}function $(e){return function(r,t){if(e===d.a.left){var n=t().explore.left;r(A({exploreId:d.a.right,rawRange:n.range.raw}))}else{var o=t().explore.right;r(A({exploreId:d.a.left,rawRange:o.range.raw}))}var a=t().explore.syncedTimes;r(Object(p.C)({syncedTimes:!a})),r(M())}}var _=function(e){return function(r,t){return function(n){var o,a=!t;switch(e.type){case p.D.type:o={showingGraph:!t};break;case p.F.type:o={showingTable:!t}}n(e({exploreId:r})),n(k(r,o)),a&&n(W(r))}}},ee=_(p.D),re=_(p.F),te=function(e,r){return function(t){t(k(e,{dedupStrategy:r}))}};function ne(e){return function(r,t){var n=t().explore[e];if(n.initialized){for(var o=n.urlState,a=n.update,u=n.containerWidth,i=n.eventBridge,c=o.datasource,s=o.queries,l=o.range,d=o.ui,g=o.originPanelId,m=[],v=0;v<s.length;v++){var O=s[v];m.push(Object(f.j)(O,m,v))}var j=Object(b.a)(t().user),h=Object(f.o)(l,j);if(a.datasource){var y=Object(f.h)(s);r(G(e,c,y,h,u,i,d,g))}else a.range&&r(X({exploreId:e,rawRange:h.raw})),a.ui&&r(Object(p.H)(S({},d,{exploreId:e}))),a.queries&&r(Object(p.y)({exploreId:e,queries:m})),(a.queries||a.ui||a.range)&&r(W(e))}}}var oe=function(e,r){return function(){var t=w(regeneratorRuntime.mark((function t(n){var o,a,u,i,c,s,f,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getDataSourceSrv,a=r.getTimeSrv,u=r.getExploreUrl,i=r.openInNewWindow,c=o(),t.next=4,c.get(e.datasource);case 4:return s=t.sent,t.next=7,u({panel:e,panelTargets:e.targets,panelDatasource:s,datasourceSrv:c,timeSrv:a()});case 7:if(f=t.sent,!i){t.next=11;break}return i(f),t.abrupt("return");case 11:l={},n(Object(m.c)({path:f,query:l}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},w9yp:function(e,r,t){"use strict";t.d(r,"a",(function(){return m})),t.d(r,"b",(function(){return v})),t.d(r,"j",(function(){return O})),t.d(r,"g",(function(){return j})),t.d(r,"n",(function(){return h})),t.d(r,"m",(function(){return y})),t.d(r,"h",(function(){return x})),t.d(r,"c",(function(){return w})),t.d(r,"f",(function(){return I})),t.d(r,"k",(function(){return S})),t.d(r,"e",(function(){return D})),t.d(r,"l",(function(){return R})),t.d(r,"d",(function(){return T})),t.d(r,"i",(function(){return P}));var n=t("LvDl"),o=t.n(n),a=t("Obii"),u=t("Xmxp"),i=t("SMGL"),c=t("m257"),s=t("5BoW"),f=t("ASqX");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function b(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g="grafana.explore.richHistory",m={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"};function v(e,r,t,n,c,s,f){var l=Date.now(),d=n&&n.filter((function(e){return function(e){var r=o.a.omit(e,["key","refId","datasource"]);if(Object.keys(r).length>0)return!0;return!1}(e)})),p=i.a.getObject(m.retentionPeriod,7),v=q(p,!1),O=e.filter((function(e){return e.ts>v||!0===e.starred}))||[];if(d.length>0){var j=d.map((function(e){return o.a.omit(e,["key","refId"])})),h=O.length>0&&O[0].queries.map((function(e){return o.a.omit(e,["key","refId"])}));if(o.a.isEqual(j,h))return e;var y=[{queries:d,ts:l,datasourceId:r,datasourceName:t,starred:c,comment:s,sessionName:f}].concat(b(O));try{return i.a.setObject(g,y),y}catch(r){return u.b.emit(a.AppEvents.alertError,[r]),e}}return e}function O(){return function(e){return e.map((function(e){var r=e.queries.map((function(e,r){return function(e,r,t){if("object"===l(r))return r;if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(r))return JSON.parse(r);return{expr:r,refId:"ABCDEFGHIJKLMNOPQRSTUVXYZ"[t]}}(0,e,r)}));return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){p(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{queries:r})}))}(i.a.getObject(g,[]))}function j(){return i.a.delete(g)}function h(e,r){var t=e.map((function(e){if(e.ts===r){var t=e.starred;return Object.assign({},e,{starred:!t})}return e}));try{return i.a.setObject(g,t),t}catch(r){return u.b.emit(a.AppEvents.alertError,[r]),e}}function y(e,r,t){var n=e.map((function(e){return e.ts===r?Object.assign({},e,{comment:t}):e}));try{return i.a.setObject(g,n),n}catch(r){return u.b.emit(a.AppEvents.alertError,[r]),e}}function x(e,r){var t=e.filter((function(e){return e.ts!==r}));try{return i.a.setObject(g,t),t}catch(r){return u.b.emit(a.AppEvents.alertError,[r]),e}}var w=function(e){var r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)},I=function(e){var r={range:{from:"now-1h",to:"now"},datasource:e.datasourceName,queries:e.queries,ui:{showingGraph:!0,showingLogs:!0,showingTable:!0},context:"explore"},t=Object(f.c)(r,!0),n=/.*(?=\/explore)/.exec("".concat(window.location.href))[0];return a.urlUtil.renderUrl("".concat(n,"/explore"),{left:t})},S=function(e){var r;switch(e){case 0:r="today";break;case 1:r="yesterday";break;case 7:r="a week ago";break;case 14:r="two weeks ago";break;default:r="".concat(e," days ago")}return r},q=function(e,r){var t=new Date,n=new Date(t.setDate(t.getDate()-e));return r?n.setHours(24,0,0,0):n.setHours(0,0,0,0)};function k(e,r){var t,n="";return r===c.c.DatasourceAZ||r===c.c.DatasourceZA?n=e.datasourceName:(t=e.ts,n=Object(a.dateTimeFormat)(t,{format:"MMMM D"})),n}function D(e,r){return(null==r?void 0:r.getQueryDisplayText)?r.getQueryDisplayText(e):function(e){var r=o.a.omit(e,["key","refId","datasource"]);return JSON.stringify(r)}(e)}function R(e,r){var t={};return e.forEach((function(e){var n=k(e,r);t[n]=n in t?[].concat(b(t[n]),[e]):[e]})),t}function T(e){var r=Object(s.b)(),t=[];return e.forEach((function(e){var n=r.findIndex((function(r){return r.name===e}));-1!==n?t.push({label:e,value:e,imgUrl:r[n].meta.info.logos.small,isRemoved:!1}):t.push({label:e,value:e,imgUrl:"public/img/icn-datasource.svg",isRemoved:!0})})),t}function P(e,r,t,n,a){var u=function(e,r){return e.filter((function(e){return!!e.comment.includes(r)||e.queries.filter((function(e){return Object.values(o.a.omit(e,["datasource","key","refId","hide","queryType"])).some((function(e){return e.toString().includes(r)}))})).length>0}))}(function(e,r){return r&&r.length>0?e.filter((function(e){return r.includes(e.datasourceName)})):e}(e,t),n);return function(e,r){var t;return r===c.c.Ascending&&(t=function(e,r){return e.ts<r.ts?-1:e.ts>r.ts?1:0}),r===c.c.Descending&&(t=function(e,r){return e.ts<r.ts?1:e.ts>r.ts?-1:0}),r===c.c.DatasourceZA&&(t=function(e,r){return e.datasourceName<r.datasourceName?-1:e.datasourceName>r.datasourceName?1:0}),r===c.c.DatasourceAZ&&(t=function(e,r){return e.datasourceName<r.datasourceName?1:e.datasourceName>r.datasourceName?-1:0}),e.sort(t)}(a?function(e,r){return e.filter((function(e){return e.ts<q(r[0],!0)&&e.ts>q(r[1],!1)}))}(u,a):u,r)}}}]);
//# sourceMappingURL=default~DashboardPage~SoloPanelPage~explore.7bf174750e07ac7111d5.js.map