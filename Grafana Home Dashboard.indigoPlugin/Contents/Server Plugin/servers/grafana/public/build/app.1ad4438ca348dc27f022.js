!function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],r[o]&&p.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={1:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=r[e]=[t,a]});t.push(n[2]=a);var i,s=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(e){return o.p+""+({4:"explore"}[e]||e)+".1ad4438ca348dc27f022.js"}(e),i=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+a+": "+i+")");o.type=a,o.request=i,n[1](o)}r[e]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,s.appendChild(l)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="public/build/",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([1447,0]),n()}([,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a=n(8),r=n.n(a),i=r.a.module("grafana.core",["ngRoute"]),o=[i,r.a.module("grafana.controllers",[]),r.a.module("grafana.directives",[]),r.a.module("grafana.factories",[]),r.a.module("grafana.services",[]),r.a.module("grafana.filters",[]),r.a.module("grafana.routes",[])];t.c=i},function(e,t,n){"use strict";n.r(t);var a=n(667);n.d(t,"DeleteButton",function(){return a.d}),n.d(t,"Tooltip",function(){return a.x}),n.d(t,"PopperController",function(){return a.o}),n.d(t,"Popper",function(){return a.n}),n.d(t,"Portal",function(){return a.p}),n.d(t,"CustomScrollbar",function(){return a.c}),n.d(t,"Select",function(){return a.q}),n.d(t,"AsyncSelect",function(){return a.a}),n.d(t,"SelectOptionItem",function(){return a.r}),n.d(t,"IndicatorsContainer",function(){return a.i}),n.d(t,"NoOptionsMessage",function(){return a.k}),n.d(t,"resetSelectStyles",function(){return a.z}),n.d(t,"FormLabel",function(){return a.f}),n.d(t,"FormField",function(){return a.e}),n.d(t,"LoadingPlaceholder",function(){return a.j}),n.d(t,"ColorPicker",function(){return a.b}),n.d(t,"SeriesColorPicker",function(){return a.s}),n.d(t,"SeriesColorPickerPopover",function(){return a.t}),n.d(t,"SeriesColorPickerPopoverWithTheme",function(){return a.u}),n.d(t,"ThresholdsEditor",function(){return a.w}),n.d(t,"Graph",function(){return a.h}),n.d(t,"PanelOptionsGroup",function(){return a.m}),n.d(t,"PanelOptionsGrid",function(){return a.l}),n.d(t,"ValueMappingsEditor",function(){return a.y}),n.d(t,"Gauge",function(){return a.g}),n.d(t,"Switch",function(){return a.v});var r=n(51);for(var i in r)["DeleteButton","Tooltip","PopperController","Popper","Portal","CustomScrollbar","Select","AsyncSelect","SelectOptionItem","IndicatorsContainer","NoOptionsMessage","resetSelectStyles","FormLabel","FormField","LoadingPlaceholder","ColorPicker","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","ThresholdsEditor","Graph","PanelOptionsGroup","PanelOptionsGrid","ValueMappingsEditor","Gauge","Switch","default"].indexOf(i)<0&&function(e){n.d(t,e,function(){return r[e]})}(i);var o=n(85);n.d(t,"processTimeSeries",function(){return o.u}),n.d(t,"toFixed",function(){return o.y}),n.d(t,"toFixedScaled",function(){return o.z}),n.d(t,"toFixedUnit",function(){return o.A}),n.d(t,"scaledUnits",function(){return o.v}),n.d(t,"locale",function(){return o.t}),n.d(t,"simpleCountUnit",function(){return o.w}),n.d(t,"getValueFormat",function(){return o.q}),n.d(t,"getValueFormatterIndex",function(){return o.s}),n.d(t,"getValueFormats",function(){return o.r}),n.d(t,"PALETTE_ROWS",function(){return o.f}),n.d(t,"PALETTE_COLUMNS",function(){return o.e}),n.d(t,"DEFAULT_ANNOTATION_COLOR",function(){return o.b}),n.d(t,"OK_COLOR",function(){return o.d}),n.d(t,"ALERTING_COLOR",function(){return o.a}),n.d(t,"NO_DATA_COLOR",function(){return o.c}),n.d(t,"PENDING_COLOR",function(){return o.g}),n.d(t,"REGION_FILL_ALPHA",function(){return o.h}),n.d(t,"colors",function(){return o.i}),n.d(t,"sortedColors",function(){return o.x}),n.d(t,"getColorDefinitionByName",function(){return o.l}),n.d(t,"getColorDefinition",function(){return o.k}),n.d(t,"getColorName",function(){return o.o}),n.d(t,"getColorByName",function(){return o.j}),n.d(t,"getColorFromHexRgbOrName",function(){return o.n}),n.d(t,"getColorForTheme",function(){return o.m}),n.d(t,"getNamedColorPalette",function(){return o.p});var s=n(271);n.d(t,"getTheme",function(){return s.a}),n.d(t,"mockTheme",function(){return s.b});var l=n(139);n.d(t,"ThemeContext",function(){return l.a}),n.d(t,"withTheme",function(){return l.b})},function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(6),o=function(){return function(e){this.theme=e.bootData.user.lightTheme?Object(i.getTheme)(i.GrafanaThemeType.Light):Object(i.getTheme)(i.GrafanaThemeType.Dark),r.a.extend(this,{datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appSubUrl:"",buildInfo:{version:"v1.0",commit:"1",env:"production",isEnterprise:!1},viewersCanEdit:!1,disableSanitizeHtml:!1},e)}}(),s=window.grafanaBootData||{settings:{},user:{}},l=s.settings;l.bootData=s;var c=new o(l);t.a=c},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=new(n(150).a);t.b=a},,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var a,r=n(1),i=n.n(r),o=n(5),s=n(9),l=n(7),c=n(133),u=function(){function e(e,t,n,a){this.$http=e,this.$q=t,this.$timeout=n,this.contextSrv=a,this.inFlightRequests={},this.HTTP_REQUEST_CANCELED=-1}return e.$inject=["$http","$q","$timeout","contextSrv"],e.prototype.get=function(e,t){return this.request({method:"GET",url:e,params:t})},e.prototype.delete=function(e){return this.request({method:"DELETE",url:e})},e.prototype.post=function(e,t){return this.request({method:"POST",url:e,data:t})},e.prototype.patch=function(e,t){return this.request({method:"PATCH",url:e,data:t})},e.prototype.put=function(e,t){return this.request({method:"PUT",url:e,data:t})},e.prototype.withNoBackendCache=function(e){var t=this;return this.noBackendCache=!0,e().finally(function(){t.noBackendCache=!1})},e.prototype.requestErrorHandler=function(e){if(!e.isHandled){var t=e.data||{message:"Unexpected error"};if(i.a.isString(t)&&(t={message:t}),422===e.status)throw s.b.emit("alert-warning",["Validation failed",t.message]),t;var n="error";if(e.status<500&&(n="warning"),t.message){var a="",r=t.message;r.length>80&&(a=r,r="Error"),s.b.emit("alert-"+n,[r,a])}throw t}},e.prototype.request=function(e){var t=this;e.retry=e.retry||0;var n=!e.url.match(/^http/),a=0===e.retry;return n&&(this.contextSrv.user&&this.contextSrv.user.orgId&&(e.headers=e.headers||{},e.headers["X-Grafana-Org-Id"]=this.contextSrv.user.orgId),0===e.url.indexOf("/")&&(e.url=e.url.substring(1))),this.$http(e).then(function(t){return"GET"!==e.method&&t&&t.data.message&&!1!==e.showSuccessAlert&&s.b.emit("alert-success",[t.data.message]),t.data},function(n){if(401===n.status&&t.contextSrv.user.isSignedIn&&a)return t.loginPing().then(function(){return e.retry=1,t.request(e)}).catch(function(e){if(401===e.status)throw window.location.href=l.a.appSubUrl+"/logout",e});throw t.$timeout(t.requestErrorHandler.bind(t,n),50),n})},e.prototype.addCanceler=function(e,t){e in this.inFlightRequests?this.inFlightRequests[e].push(t):this.inFlightRequests[e]=[t]},e.prototype.resolveCancelerIfExists=function(e){var t=this.inFlightRequests[e];!i.a.isUndefined(t)&&t.length&&t[0].resolve()},e.prototype.datasourceRequest=function(e){var t=this,n=null;e.retry=e.retry||0;var a=e.requestId;a&&(this.resolveCancelerIfExists(a),n=this.$q.defer(),e.timeout=n.promise,this.addCanceler(a,n));var r=!e.url.match(/^http/),o=0===e.retry;return r&&(this.contextSrv.user&&this.contextSrv.user.orgId&&(e.headers=e.headers||{},e.headers["X-Grafana-Org-Id"]=this.contextSrv.user.orgId),0===e.url.indexOf("/")&&(e.url=e.url.substring(1)),e.headers&&e.headers.Authorization&&(e.headers["X-DS-Authorization"]=e.headers.Authorization,delete e.headers.Authorization),this.noBackendCache&&(e.headers["X-Grafana-NoCache"]="true")),this.$http(e).then(function(t){return e.silent||s.b.emit("ds-request-response",t),t}).catch(function(a){if(a.status===t.HTTP_REQUEST_CANCELED)throw{err:a,cancelled:!0};if(r&&o&&401===a.status)return t.loginPing().then(function(){return e.retry=1,n&&n.resolve(),t.datasourceRequest(e)}).catch(function(e){if(401===e.status)throw window.location.href=l.a.appSubUrl+"/logout",e});throw i.a.isString(a.data)&&500===a.status&&(a.data={error:a.statusText,response:a.data}),a.data&&!a.data.message&&i.a.isString(a.data.error)&&(a.data.message=a.data.error),e.silent||s.b.emit("ds-request-error",a),a}).finally(function(){e.requestId&&t.inFlightRequests[e.requestId].shift()})},e.prototype.loginPing=function(){return this.request({url:"/api/login/ping",method:"GET",retry:1})},e.prototype.search=function(e){return this.get("/api/search",e)},e.prototype.getDashboardBySlug=function(e){return this.get("/api/dashboards/db/"+e)},e.prototype.getDashboardByUid=function(e){return this.get("/api/dashboards/uid/"+e)},e.prototype.getFolderByUid=function(e){return this.get("/api/folders/"+e)},e.prototype.saveDashboard=function(e,t){return t=t||{},this.post("/api/dashboards/db/",{dashboard:e,folderId:t.folderId,overwrite:!0===t.overwrite,message:t.message||""})},e.prototype.createFolder=function(e){return this.post("/api/folders",e)},e.prototype.deleteFolder=function(e,t){return this.request({method:"DELETE",url:"/api/folders/"+e,showSuccessAlert:!0===t})},e.prototype.deleteDashboard=function(e,t){return this.request({method:"DELETE",url:"/api/dashboards/uid/"+e,showSuccessAlert:!0===t})},e.prototype.deleteFoldersAndDashboards=function(e,t){for(var n=[],a=0,r=e;a<r.length;a++){var i=r[a];n.push(this.createTask(this.deleteFolder.bind(this),!0,i,!0))}for(var o=0,s=t;o<s.length;o++){var l=s[o];n.push(this.createTask(this.deleteDashboard.bind(this),!0,l,!0))}return this.executeInOrder(n,[])},e.prototype.moveDashboards=function(e,t){for(var n=[],a=0,r=e;a<r.length;a++){var o=r[a];n.push(this.createTask(this.moveDashboard.bind(this),!0,o,t))}return this.executeInOrder(n,[]).then(function(e){return{totalCount:e.length,successCount:i.a.filter(e,{succeeded:!0}).length,alreadyInFolderCount:i.a.filter(e,{alreadyInFolder:!0}).length}})},e.prototype.moveDashboard=function(e,t){var n=this,a=this.$q.defer();return this.getDashboardByUid(e).then(function(e){var r=new c.a(e.dashboard,e.meta);if(!e.meta.folderId&&0===t.id||e.meta.folderId===t.id)a.resolve({alreadyInFolder:!0});else{var i=r.getSaveModelClone(),o={folderId:t.id,overwrite:!1};n.saveDashboard(i,o).then(function(){a.resolve({succeeded:!0})}).catch(function(e){e.data&&"plugin-dashboard"===e.data.status?(e.isHandled=!0,o.overwrite=!0,n.saveDashboard(i,o).then(function(){a.resolve({succeeded:!0})}).catch(function(e){a.resolve({succeeded:!1})})):a.resolve({succeeded:!1})})}}),a.promise},e.prototype.createTask=function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return function(a){return e.apply(null,n).then(function(e){return Array.prototype.concat(a,[e])}).catch(function(e){if(t)return a;throw e})}},e.prototype.executeInOrder=function(e,t){return e.reduce(this.$q.when,t)},e}();function d(e){a=e}function p(){return a}o.c.service("backendSrv",u)},,,function(e,t,n){"use strict";l.$inject=["$compile"],c.$inject=["$compile"],u.$inject=["$compile"],d.$inject=["$compile","$sce","templateSrv"],p.$inject=["uiSegmentSrv","$q"],b.$inject=["$compile"],y.$inject=["$compile"],w.$inject=["$compile"],x.$inject=["$compile","$interpolate"],S.$inject=["$parse","$compile","$timeout"],M.$inject=["$compile","$window","$timeout","$rootScope"],_.$inject=["$animate"],Me.$inject=["$rootScope"],Ie.$inject=["$compile","templateSrv"],Fe.$inject=["$compile","templateSrv"],Ke.$inject=["googleAnalyticsSrv"],Xe.$inject=["$compile","$rootScope","$timeout"],Je.$inject=["$sce","templateSrv"],ot.$inject=["templateSrv"];var a=n(1),r=n.n(a),i=n(10),o=n.n(i),s=n(5);function l(e){return{scope:{menuItems:"=dropdownTypeahead",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel"},link:function(t,n,a){var i=o()('<input type="text" class="gf-form-input input-medium tight-form-input" spellcheck="false" style="display:none"></input>'),s=o()('<a class="gf-form-label tight-form-func dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>');i.appendTo(n),s.appendTo(n),a.linkText&&s.html(a.linkText),a.ngModel&&t.$watch("model",function(e){r.a.each(t.menuItems,function(t){r.a.each(t.submenu,function(t){t.value===e&&s.html(t.text)})})});var l=r.a.reduce(t.menuItems,function(e,t,n){return t.submenu?r.a.each(t.submenu,function(a,r){a.click="menuItemSelected("+n+","+r+")",e.push(t.text+" "+a.text)}):(t.click="menuItemSelected("+n+")",e.push(t.text)),e},[]);t.menuItemSelected=function(e,n){var a=t.menuItems[e],r={$item:a};a.submenu&&void 0!==n&&(r.$subItem=a.submenu[n]),t.dropdownTypeaheadOnSelect(r)},i.attr("data-provide","typeahead"),i.typeahead({source:l,minLength:1,items:10,updater:function(e){var n={};return r.a.each(t.menuItems,function(t){r.a.each(t.submenu,function(a){e===t.text+" "+a.text&&(n.$subItem=a,n.$item=t)})}),n.$item&&t.$apply(function(){t.dropdownTypeaheadOnSelect(n)}),i.trigger("blur"),""}}),s.click(function(){s.hide(),i.show(),i.focus()}),i.keyup(function(){n.toggleClass("open",""===i.val())}),i.blur(function(){i.hide(),i.val(""),s.show(),s.focus(),setTimeout(function(){n.removeClass("open")},200)}),e(n.contents())(t)}}}function c(e){return{scope:{menuItems:"=dropdownTypeahead2",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel",buttonTemplateClass:"@"},link:function(t,n,a){var i=o()('<input type="text" class="gf-form-input" spellcheck="false" style="display:none"></input>');t.buttonTemplateClass||(t.buttonTemplateClass="gf-form-input");var s=o()('<a class="{{buttonTemplateClass}} dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>'),l={blur:null};i.appendTo(n),s.appendTo(n),a.linkText&&s.html(a.linkText),a.ngModel&&t.$watch("model",function(e){r.a.each(t.menuItems,function(t){r.a.each(t.submenu,function(t){t.value===e&&s.html(t.text)})})});var c=r.a.reduce(t.menuItems,function(e,t,n){return t.submenu?r.a.each(t.submenu,function(a,r){a.click="menuItemSelected("+n+","+r+")",e.push(t.text+" "+a.text)}):(t.click="menuItemSelected("+n+")",e.push(t.text)),e},[]),u=function(){i.hide(),i.val(""),s.show(),s.focus(),n.removeClass("open")};t.menuItemSelected=function(e,n){var a=t.menuItems[e],r={$item:a};a.submenu&&void 0!==n&&(r.$subItem=a.submenu[n]),t.dropdownTypeaheadOnSelect(r),u()},i.attr("data-provide","typeahead"),i.typeahead({source:c,minLength:1,items:10,updater:function(e){var n={};return r.a.each(t.menuItems,function(t){r.a.each(t.submenu,function(a){e===t.text+" "+a.text&&(n.$subItem=a,n.$item=t)})}),n.$item&&t.$apply(function(){t.dropdownTypeaheadOnSelect(n)}),i.trigger("blur"),""}}),s.click(function(){s.hide(),i.show(),i.focus()}),i.keyup(function(){n.toggleClass("open",""===i.val())}),n.mousedown(function(e){e.preventDefault(),l.blur=null}),i.blur(function(){l.blur=setTimeout(function(){u()},1)}),e(n.contents())(t)}}}function u(e){return{link:function(e,t){var n=t[0],a=function(){var e=new Event("change");return n.dispatchEvent(e)},r=function(e){switch(e.animationName){case"onAutoFillStart":case"onAutoFillCancel":return a()}return null};n.addEventListener("animationstart",r),e.$on("$destroy",function(){n.removeEventListener("animationstart",r)})}}}function d(e,t,n){return{scope:{segment:"=",getOptions:"&",onChange:"&",debounce:"@"},link:function(a,i){var s=o()('<input type="text" data-provide="typeahead"  class="gf-form-input input-medium" spellcheck="false" style="display:none"></input>'),l=a.segment,c=o()(l.selectMode?'<a class="gf-form-input gf-form-input--dropdown" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>':'<a class="gf-form-label" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>'),u=null,d=null,p=!0,h=a.debounce;s.appendTo(i),c.appendTo(i),a.updateVariableValue=function(e){""!==e&&l.value!==e&&a.$apply(function(){var i=r.a.find(a.altSegments,{value:e});i?(l.value=i.value,l.html=i.html||t.trustAsHtml(n.highlightVariablesAsHtml(i.value)),l.fake=!1,l.expandable=i.expandable,i.type&&(l.type=i.type)):"false"!==l.custom&&(l.value=e,l.html=t.trustAsHtml(n.highlightVariablesAsHtml(e)),l.expandable=!0,l.fake=!1),a.onChange()})},a.switchToLink=function(e){p&&!e||(clearTimeout(d),d=null,p=!0,s.hide(),c.show(),a.updateVariableValue(s.val()))},a.inputBlur=function(){d=setTimeout(a.switchToLink,200)},a.source=function(e,t){a.$apply(function(){a.getOptions({$query:e}).then(function(e){a.altSegments=e,u=r.a.map(a.altSegments,function(e){return r.a.escape(e.value)}),"false"!==l.custom&&(l.fake||-1!==r.a.indexOf(u,l.value)||u.unshift(r.a.escape(l.value))),t(u)})})},a.updater=function(e){return(e=r.a.unescape(e))===l.value?(clearTimeout(d),s.focus(),e):(s.val(e),a.switchToLink(!0),e)},a.matcher=function(e){if(p)return!1;var t=this.query;"/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1));try{return e.toLowerCase().match(t.toLowerCase())}catch(e){return!1}},s.attr("data-provide","typeahead"),s.typeahead({source:a.source,minLength:0,items:1e4,updater:a.updater,matcher:a.matcher});var f=s.data("typeahead");f.lookup=function(){this.query=this.$element.val()||"";var e=this.source(this.query,o.a.proxy(this.process,this));return e?this.process(e):e},h&&(f.lookup=r.a.debounce(f.lookup,500,{leading:!0})),c.keydown(function(e){40!==e.keyCode&&13!==e.keyCode||c.click()}),c.click(function(){u=null,s.css("width",Math.max(c.width(),80)+16+"px"),c.hide(),s.show(),s.focus(),p=!1;var e=s.data("typeahead");e&&(s.val(""),e.lookup())}),s.blur(a.inputBlur),e(i.contents())(a)}}}function p(e,t){return{template:'<metric-segment segment="segment" get-options="getOptionsInternal()" on-change="onSegmentChange()"></metric-segment>',restrict:"E",scope:{property:"=",options:"=",getOptions:"&",onChange:"&"},link:{pre:function(n,a,i){var o;n.valueToSegment=function(t){var a=r.a.find(n.options,{value:t}),o={cssClass:i.cssClass,custom:i.custom,value:a?a.text:t,selectMode:i.selectMode};return e.newSegment(o)},n.getOptionsInternal=function(){return n.options?(o=n.options,t.when(r.a.map(n.options,function(e){return{value:e.text}}))):n.getOptions().then(function(e){return o=e,r.a.map(e,function(e){return e.html?e:{value:e.text}})})},n.onSegmentChange=function(){if(o){var e=r.a.find(o,{text:n.segment.value});e&&e.value!==n.property?n.property=e.value:"false"!==i.custom&&(n.property=n.segment.value)}else n.property=n.segment.value;n.$$postDigest(function(){n.$apply(function(){n.onChange()})})},n.segment=n.valueToSegment(n.property)}}}}s.c.directive("dropdownTypeahead",l),s.c.directive("dropdownTypeahead2",c),s.c.directive("autofillEventFix",u),s.c.directive("metricSegment",d),s.c.directive("metricSegmentModel",p);var h=n(8),f=n.n(h),m=n(275),g=n.n(m),v=n(19);function b(e){return{restrict:"E",link:function(t,n,a){var r='<i class="grafana-tip fa fa-'+(a.icon||"question-circle")+'" bs-tooltip="\''+v.a.addslashes(n.text())+"'\"></i>";r=r.replace(/{/g,"\\{").replace(/}/g,"\\}"),n.replaceWith(e(f.a.element(r))(t))}}}function y(e){return{restrict:"A",link:function(t,n,a){t.$watch(function(e){return e.$eval(a.compile)},function(a){n.html(a),e(n.contents())(t)})}}}function w(e){return{restrict:"E",link:function(t,n,a){var r=a.change?' ng-change="'+a.change+'"':"",i=a.tip?" <tip>"+a.tip+"</tip>":"",o='<div class="editor-option gf-form-checkbox text-center"'+(a.showIf?' ng-show="'+a.showIf+'" ':"")+'> <label for="'+a.model+'" class="small">'+a.text+i+'</label><input class="cr1" id="'+a.model+'" type="checkbox"        ng-model="'+a.model+'"'+r+'       ng-checked="'+a.model+'"></input> <label for="'+a.model+'" class="cr1"></label>';n.replaceWith(e(f.a.element(o))(t))}}}function x(e,t){return{restrict:"E",link:function(n,a,r){var i=t(r.text)(n),o=t(r.model)(n),s=r.change?' ng-change="'+r.change+'"':"",l=r.tip?" <tip>"+r.tip+"</tip>":"",c='<label for="'+n.$id+o+'" class="checkbox-label">'+i+l+"</label>",u='<input class="cr1" id="'+n.$id+o+'" type="checkbox"        ng-model="'+o+'"'+s+'       ng-checked="'+o+'"></input> <label for="'+n.$id+o+'" class="cr1"></label>';u+=c,a.addClass("gf-form-checkbox"),a.html(e(f.a.element(u))(n))}}}function S(e,t,n){return{restrict:"EA",scope:!0,link:function(a,r,i){var o=e(i.gfDropdown)(a);n(function(){var e=r.data("placement");f.a.element(function e(t,n){for(var a=['<ul class="dropdown-menu '+("top"===n?"dropup":"")+'" role="menu" aria-labelledby="drop1">',"</ul>"],r=0;r<t.length;r++){var i=t[r];if(i.divider)a.splice(r+1,0,'<li class="divider"></li>');else{var o="<li"+(i.submenu&&i.submenu.length?' class="dropdown-submenu"':"")+'><a tabindex="-1" ng-href="'+(i.href||"")+'"'+(i.click?' ng-click="'+i.click+'"':"")+(i.target?' target="'+i.target+'"':"")+(i.method?' data-method="'+i.method+'"':"")+">"+(i.text||"")+"</a>";i.submenu&&i.submenu.length&&(o+=e(i.submenu).join("\n")),o+="</li>",a.splice(r+1,0,o)}}return a}(o,e).join("")).insertAfter(r),t(r.next("ul.dropdown-menu"))(a)}),r.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}s.c.directive("tip",b),s.c.directive("clipboardButton",function(){return{scope:{getText:"&clipboardButton"},link:function(e,t){e.clipboard=new g.a(t[0],{text:function(){return e.getText()}}),e.clipboard.on("success",function(){ye.b.emit("alert-success",["Content copied to clipboard"])}),e.$on("$destroy",function(){e.clipboard&&e.clipboard.destroy()})}}}),s.c.directive("compile",y),s.c.directive("watchChange",function(){return{scope:{onchange:"&watchChange"},link:function(e,t){t.on("input",function(){e.$apply(function(){e.onchange({inputValue:t.val()})})})}}}),s.c.directive("editorOptBool",w),s.c.directive("editorCheckbox",x),s.c.directive("gfDropdown",S);var k=n(130);s.c.directive("ngModelOnblur",function(){return{restrict:"A",priority:1,require:"ngModel",link:function(e,t,n,a){"radio"!==n.type&&"checkbox"!==n.type&&(t.off("input keydown change"),t.bind("blur",function(){e.$apply(function(){a.$setViewValue(t.val())})}))}}}),s.c.directive("emptyToNull",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){a.$parsers.push(function(e){return""===e?null:e})}}}),s.c.directive("validTimeSpan",function(){return{require:"ngModel",link:function(e,t,n,a){a.$validators.integer=function(e,t){return!!a.$isEmpty(e)||0===t.indexOf("$")||0===t.indexOf("+$")||!0!==k.a(t).invalid}}}});var C=n(276);n(1108);function E(e,t){var n=C.a.getTagColorsFromName(e),a=n.color,r=n.borderColor;t.css("background-color",a),t.css("border-color",r)}s.c.directive("tagColorFromName",function(){return{scope:{tagColorFromName:"="},link:function(e,t){E(e.tagColorFromName,t)}}}),s.c.directive("bootstrapTagsinput",function(){function e(e,t){if(t)return f.a.isFunction(e.$parent[t])?e.$parent[t]:function(e){return e[t]}}return{restrict:"EA",scope:{model:"=ngModel",onTagsUpdated:"&"},template:"<select multiple></select>",replace:!1,link:function(t,n,a){var r=this;f.a.isArray(t.model)||(t.model=[]);var i=o()("select",n);a.placeholder&&i.attr("placeholder",a.placeholder),i.tagsinput({typeahead:{source:f.a.isFunction(t.$parent[a.typeaheadSource])?t.$parent[a.typeaheadSource]:null},widthClass:a.widthClass,itemValue:e(t,a.itemvalue),itemText:e(t,a.itemtext),tagClass:f.a.isFunction(t.$parent[a.tagclass])?t.$parent[a.tagclass]:function(){return a.tagclass}}),i.on("itemAdded",function(e){-1===t.model.indexOf(e.item)&&(t.model.push(e.item),t.onTagsUpdated&&t.onTagsUpdated());var n=i.next().children("span").filter(function(){return o()(r).text()===e.item});E(e.item,n)}),i.on("itemRemoved",function(e){var n=t.model.indexOf(e.item);-1!==n&&(t.model.splice(n,1),t.onTagsUpdated&&t.onTagsUpdated())}),t.$watch("model",function(){f.a.isArray(t.model)||(t.model=[]),i.tagsinput("removeAll");for(var e=0;e<t.model.length;e++)i.tagsinput("add",t.model[e])},!0)}}});var T=function(){function e(e){this.$q=e}return e.$inject=["$q"],e.prototype.show=function(){var e=this;this.oldVariableText=this.variable.current.text,this.highlightIndex=-1,this.options=this.variable.options,this.selectedValues=r.a.filter(this.options,{selected:!0}),this.tags=r.a.map(this.variable.tags,function(t){var n={text:t,selected:!1};return r.a.each(e.variable.current.tags,function(e){e.text===t&&(n=e)}),n}),this.search={query:"",options:this.options.slice(0,Math.min(this.options.length,1e3))},this.dropdownVisible=!0},e.prototype.updateLinkText=function(){var e=this.variable.current;if(e.tags&&e.tags.length){var t=r.a.filter(this.variable.options,function(t){if(!t.selected)return!1;for(var n=0;n<e.tags.length;n++){var a=e.tags[n];if(-1!==r.a.indexOf(a.values,t.value))return!1}return!0}),n=r.a.map(t,"text");this.linkText=n.join(" + "),this.linkText.length>0&&(this.linkText+=" + ")}else this.linkText=this.variable.current.text},e.prototype.clearSelections=function(){r.a.each(this.options,function(e){e.selected=!1}),this.selectionsChanged(!1)},e.prototype.selectTag=function(e){var t=this;return e.selected=!e.selected,(e.values?this.$q.when(e.values):this.variable.getValuesForTag(e.text)).then(function(n){e.values=n,e.valuesText=n.join(" + "),r.a.each(t.options,function(t){-1!==r.a.indexOf(e.values,t.value)&&(t.selected=e.selected)}),t.selectionsChanged(!1)})},e.prototype.keyDown=function(e){27===e.keyCode&&this.hide(),40===e.keyCode&&this.moveHighlight(1),38===e.keyCode&&this.moveHighlight(-1),13===e.keyCode&&(0===this.search.options.length?this.commitChanges():this.selectValue(this.search.options[this.highlightIndex],{},!0,!1)),32===e.keyCode&&this.selectValue(this.search.options[this.highlightIndex],{},!1,!1)},e.prototype.moveHighlight=function(e){this.highlightIndex=(this.highlightIndex+e)%this.search.options.length},e.prototype.selectValue=function(e,t,n,a){var i=this;if(e){e.selected=!this.variable.multi||!e.selected,n=n||!1,a=a||!1;var o=function(t){r.a.each(i.options,function(n){e!==n&&(n.selected=t)})};n&&(e.selected=!0),"All"===e.text||a?(o(!1),n=!0):this.variable.multi?(t.ctrlKey||t.metaKey||t.shiftKey)&&(n=!0,o(!1)):(o(!1),n=!0),this.selectionsChanged(n)}},e.prototype.selectionsChanged=function(e){var t=this;this.selectedValues=r.a.filter(this.options,{selected:!0}),this.selectedValues.length>1&&"All"===this.selectedValues[0].text&&(this.selectedValues[0].selected=!1,this.selectedValues=this.selectedValues.slice(1,this.selectedValues.length)),r.a.each(this.tags,function(e){e.selected&&r.a.each(e.values,function(n){r.a.find(t.selectedValues,{value:n})||(e.selected=!1)})}),this.selectedTags=r.a.filter(this.tags,{selected:!0}),this.variable.current.value=r.a.map(this.selectedValues,"value"),this.variable.current.text=r.a.map(this.selectedValues,"text").join(" + "),this.variable.current.tags=this.selectedTags,this.variable.multi||(this.variable.current.value=this.selectedValues[0].value),e&&this.commitChanges()},e.prototype.commitChanges=function(){0===this.search.options.length&&this.search.query.length>0?this.variable.current={text:this.search.query,value:this.search.query}:0===this.selectedValues.length&&(this.options[0].selected=!0,this.selectionsChanged(!1)),this.dropdownVisible=!1,this.updateLinkText(),this.variable.current.text!==this.oldVariableText&&this.onUpdated()},e.prototype.queryChanged=function(){var e=this;this.highlightIndex=-1,this.search.options=r.a.filter(this.options,function(t){return-1!==t.text.toLowerCase().indexOf(e.search.query.toLowerCase())}),this.search.options=this.search.options.slice(0,Math.min(this.search.options.length,1e3))},e.prototype.init=function(){this.selectedTags=this.variable.current.tags||[],this.updateLinkText()},e}();function M(e,t,n,a){return{scope:{dashboard:"=",variable:"=",onUpdated:"&"},templateUrl:"public/app/partials/valueSelectDropdown.html",controller:"ValueSelectDropdownCtrl",controllerAs:"vm",bindToController:!0,link:function(e,a){var r=f.a.element(t.document.body),i=a.find(".variable-value-link"),o=a.find("input");function s(t){0===a.has(t.target).length&&e.$apply(function(){e.vm.commitChanges()})}e.$watch("vm.dropdownVisible",function(e){e?(o.css("width",Math.max(i.width(),80)+"px"),o.show(),i.hide(),o.focus(),n(function(){r.on("click",s)},0,!1)):(o.hide(),i.show(),r.off("click",s))}),e.vm.dashboard.on("template-variable-value-updated",function(){e.vm.updateLinkText()},e),e.vm.init()}}}function _(e){return{multiElement:!0,terminal:!0,transclude:!0,priority:600,restrict:"E",link:function(t,n,a,r,i){var s,l,c;function u(){c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=function(e){var t,n=e[0],a=e[e.length-1];n=n.nextSibling;for(var r=1;n!==a&&n;r++)(t||e[r]!==n)&&(t||(t=o()([].slice.call(e,0,r))),t.push(n)),n=n.nextSibling;return t||e}(s.clone),e.leave(c).then(function(){c=null}),s=null)}t.$watch(a.property,function(t,r){l&&t!==r&&u(),l||!t&&!a.showNull?u():i(function(t,a){l=a,t[t.length++]=document.createComment(" end rebuild on change "),s={clone:t},e.enter(t,n.parent(),n)})})}}}s.c.controller("ValueSelectDropdownCtrl",T),s.c.directive("valueSelectDropdown",M),s.c.directive("rebuildOnChange",_),s.c.directive("giveFocus",function(){return function(e,t,n){t.click(function(e){e.stopPropagation()}),e.$watch(n.giveFocus,function(e){e&&setTimeout(function(){t.focus();var e=t[0];if(e.setSelectionRange){var n=2*t.val().length;e.setSelectionRange(n,n)}},200)},!0)}});var A=function(){function e(e){var t=this;this.$rootScope=e;this.observer=new MutationObserver(function(e){1===e.length&&t.$rootScope.appEvent("json-diff-ready")});this.observer.observe(f.a.element(".delta-html")[0],{attributes:!0,attributeFilter:["class"],characterData:!1,childList:!0,subtree:!1})}return e.$inject=["$rootScope"],e.prototype.$onDestroy=function(){this.observer.disconnect()},e}();s.c.directive("diffDelta",function(){return{controller:A,replace:!1,restrict:"A"}});var D=function(){function e(e,t,n){this.$scope=e,this.$rootScope=t,this.$anchorScroll=n}return e.$inject=["$scope","$rootScope","$anchorScroll"],e.prototype.goToLine=function(e){var t,n=this;this.$scope.switchView().then(function(){t=n.$rootScope.$on("json-diff-ready",function(){n.$anchorScroll("l"+e),t()}.bind(n))})},e}();s.c.directive("diffLinkJson",function(){return{controller:D,controllerAs:"ctrl",replace:!0,restrict:"E",scope:{line:"@lineDisplay",link:"@lineLink",switchView:"&"},template:'<a class="diff-linenum btn btn-inverse btn-small" ng-click="ctrl.goToLine(link)">Line {{ line }}</a>'}});var N=o()(window);o.a.fn.place_tt=function(){var e={offset:5};return function(t,n,a){var i=this;return a=o.a.extend(!0,{},e,a),this.each(function(){var e,s,l=o()(i);l.addClass("grafana-tooltip"),o()("#tooltip").remove(),l.appendTo(document.body),a.compile&&f.a.element(document).injector().invoke(["$compile","$rootScope",function(e,t){var n=t.$new(!0);r.a.extend(n,a.scopeData),e(l)(n),n.$digest(),n.$destroy()}]),e=l.outerWidth(!0),s=l.outerHeight(!0),l.css("left",t+a.offset+e>N.width()?t-a.offset-e:t+a.offset),l.css("top",n+a.offset+s>N.height()?n-a.offset-s:n+a.offset)})}}();n(1109);function P(e){return!!e&&"object"===typeof e}function O(e){if(void 0===e)return"";if(null===e)return"Object";if("object"==typeof e&&!e.constructor)return"Object";var t=/function ([^(]*)/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}function I(e){return null===e?"null":typeof e}function $(e,t){var n=I(e);return"null"===n||"undefined"===n?n:("string"===n&&(t='"'+function(e){return e.replace('"','"')}(t)+'"'),"function"===n?e.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}":t)}function F(e){return"json-formatter-"+e}function q(e,t,n){var a=document.createElement(e);return t&&a.classList.add(F(t)),void 0!==n&&(n instanceof Node?a.appendChild(n):a.appendChild(document.createTextNode(String(n)))),a}var R=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,L=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,j=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,U=window.requestAnimationFrame||function(e){return e(),0},V={animateOpen:!0,animateClose:!0,theme:null},B=function(){function e(e,t,n,a){void 0===t&&(t=1),void 0===n&&(n=V),this.json=e,this.open=t,this.config=n,this.key=a,this._isOpen=null,this.skipChildren=!1}return Object.defineProperty(e.prototype,"isOpen",{get:function(){return null!==this._isOpen?this._isOpen:this.open>0},set:function(e){this._isOpen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDate",{get:function(){return"string"===this.type&&(R.test(this.json)||j.test(this.json)||L.test(this.json))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUrl",{get:function(){return"string"===this.type&&0===this.json.indexOf("http")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArray",{get:function(){return Array.isArray(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isObject",{get:function(){return P(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyObject",{get:function(){return!this.keys.length&&!this.isArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasKey",{get:function(){return void 0!==this.key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"constructorName",{get:function(){return O(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return I(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.isObject?Object.keys(this.json).map(function(e){return e||'""'}):[]},enumerable:!0,configurable:!0}),e.prototype.toggleOpen=function(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(F("open")))},e.prototype.openAtDepth=function(e){void 0===e&&(e=1),e<0||(this.open=e,this.isOpen=0!==e,this.element&&(this.removeChildren(!1),0===e?this.element.classList.remove(F("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(F("open")))))},e.prototype.isNumberArray=function(){return this.json.length>0&&this.json.length<4&&(r.a.isNumber(this.json[0])||r.a.isNumber(this.json[1]))},e.prototype.renderArray=function(){var e=q("span");return e.appendChild(q("span","bracket","[")),this.isNumberArray()?(this.json.forEach(function(t,n){n>0&&e.appendChild(q("span","array-comma",",")),e.appendChild(q("span","number",t))}),this.skipChildren=!0):e.appendChild(q("span","number",this.json.length)),e.appendChild(q("span","bracket","]")),e},e.prototype.render=function(e){void 0===e&&(e=!1),this.element=q("div","row");var t=q("a","toggler-link"),n=q("span","toggler");if(this.isObject&&t.appendChild(n),this.hasKey&&t.appendChild(q("span","key",this.key+":")),this.isObject){var a=q("span","value"),r=q("span"),i=q("span","constructor-name",this.constructorName);if(r.appendChild(i),this.isArray){var o=this.renderArray();r.appendChild(o)}a.appendChild(r),t.appendChild(a)}else{(a=this.isUrl?q("a"):q("span")).classList.add(F(this.type)),this.isDate&&a.classList.add(F("date")),this.isUrl&&(a.classList.add(F("url")),a.setAttribute("href",this.json));var s=$(this.json,this.json);a.appendChild(document.createTextNode(s)),t.appendChild(a)}var l=q("div","children");return this.isObject&&l.classList.add(F("object")),this.isArray&&l.classList.add(F("array")),this.isEmpty&&l.classList.add(F("empty")),this.config&&this.config.theme&&this.element.classList.add(F(this.config.theme)),this.isOpen&&this.element.classList.add(F("open")),e||this.element.appendChild(t),this.skipChildren?t.removeChild(n):this.element.appendChild(l),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&t.addEventListener("click",this.toggleOpen.bind(this)),this.element},e.prototype.appendChildren=function(t){var n=this;void 0===t&&(t=!1);var a=this.element.querySelector("div."+F("children"));if(a&&!this.isEmpty)if(t){var r=0,i=function(){var t=n.keys[r],o=new e(n.json[t],n.open-1,n.config,t);a.appendChild(o.render()),(r+=1)<n.keys.length&&(r>10?i():U(i))};U(i)}else this.keys.forEach(function(t){var r=new e(n.json[t],n.open-1,n.config,t);a.appendChild(r.render())})},e.prototype.removeChildren=function(e){void 0===e&&(e=!1);var t=this.element.querySelector("div."+F("children"));if(e){var n=0,a=function(){t&&t.children.length&&(t.removeChild(t.children[0]),(n+=1)>10?a():U(a))};U(a)}else t&&(t.innerHTML="")},e}();s.c.directive("jsonTree",[function(){return{restrict:"E",scope:{object:"=",startExpanded:"@",rootName:"@"},link:function(e,t){var n=new B(e.object,3,{animateOpen:!0}).render(!0);t.html(n)}}}]);var Q=n(7),z=n(383),H=n.n(z),G=(n(1246),n(1247),n(1248),n(1249),n(1250),n(1251),n(1252),n(1253),n(1254),n(1255),n(1260),n(1261),n(1263),"ace/theme/grafana-dark"),W="ace/theme/textmate",Y="text",K=10,X=2,J=!0,Z=!0,ee="<div></div>";function te(e,t,n){var a=n.mode||Y,r=n.maxLines||K,i=void 0!==n.showGutter,o=n.tabSize||X,s=n.behavioursEnabled?"true"===n.behavioursEnabled:J,l=n.snippetsEnabled?"true"===n.snippetsEnabled:Z,c=t.get(0),u=H.a.edit(c),d=u.getSession(),p={maxLines:r,showGutter:i,tabSize:o,behavioursEnabled:s,highlightActiveLine:!1,showPrintMargin:!1,autoScrollEditorIntoView:!0};u.setOptions(p),u.$blockScrolling=1/0,u.renderer.setScrollMargin(10,10),u.renderer.setPadding(10),function(){var e=G;Q.a.bootData.user.lightTheme&&(e=W);u.setTheme(e)}(),function(t){if(H.a.acequire("ace/ext/language_tools"),u.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:l}),e.getCompleter()){var n=u;n.completers=n.completers.slice(),n.completers.push(e.getCompleter())}var a="ace/mode/"+t;d.setMode(a)}(a),f(e.content),t.addClass("gf-code-editor");var h=t.find("textarea");function f(e){u.setValue(e),u.clearSelection()}h.addClass("gf-form-input"),e.codeEditorFocus&&setTimeout(function(){h.focus();var e=h[0];if(e.setSelectionRange){var t=2*h.val().length;e.setSelectionRange(t,t)}},100),d.on("change",function(t){e.$apply(function(){var t=u.getValue();e.content=t})}),e.$watch("content",function(t,n){var a=u.getValue();t!==a&&t!==n&&e.$$postDigest(function(){f(t)})}),u.on("blur",function(){e.onChange()}),e.$on("$destroy",function(){u.destroy()}),u.commands.addCommand({name:"executeQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(){e.onChange()}})}s.c.directive("codeEditor",function(){return{restrict:"E",template:ee,scope:{content:"=",datasource:"=",codeEditorFocus:"<",onChange:"&",getCompleter:"&"},link:te}});n(1264);s.c.directive("spectrumPicker",function(){return{restrict:"E",require:"ngModel",scope:!0,replace:!0,template:'<color-picker color="ngModel.$viewValue" onChange="onColorChange"></color-picker>',link:function(e,t,n,a){e.ngModel=a,e.onColorChange=function(e){a.$setViewValue(e)}}}});var ne=n(152),ae=n(52),re=n(79),ie=function(){function e(e,t){this.backendSrv=e,this.$q=t,this.recentIsOpen=ae.a.getBool("search.sections.recent",!0),this.starredIsOpen=ae.a.getBool("search.sections.starred",!0)}return e.$inject=["backendSrv","$q"],e.prototype.getRecentDashboards=function(e){var t=this;return this.queryForRecentDashboards().then(function(n){n.length>0&&(e.recent={title:"Recent",icon:"fa fa-clock-o",score:-1,removable:!0,expanded:t.recentIsOpen,toggle:t.toggleRecent.bind(t),items:n})})},e.prototype.queryForRecentDashboards=function(){var e=r.a.take(ne.a.getDashboardOpened(),30);return 0===e.length?Promise.resolve([]):this.backendSrv.search({dashboardIds:e}).then(function(t){return e.map(function(e){return r.a.find(t,{id:e})}).filter(function(e){return e&&!e.isStarred})})},e.prototype.toggleRecent=function(e){return this.recentIsOpen=e.expanded=!e.expanded,ae.a.set("search.sections.recent",this.recentIsOpen),!e.expanded||e.items.length?Promise.resolve(e):this.queryForRecentDashboards().then(function(t){return e.items=t,Promise.resolve(e)})},e.prototype.toggleStarred=function(e){return this.starredIsOpen=e.expanded=!e.expanded,ae.a.set("search.sections.starred",this.starredIsOpen),Promise.resolve(e)},e.prototype.getStarred=function(e){var t=this;return re.a.isSignedIn?this.backendSrv.search({starred:!0,limit:30}).then(function(n){n.length>0&&(e.starred={title:"Starred",icon:"fa fa-star-o",score:-2,expanded:t.starredIsOpen,toggle:t.toggleStarred.bind(t),items:n})}):Promise.resolve()},e.prototype.search=function(e){var t=this,n={},a=[],i=r.a.clone(e),o=e.query||e.tag&&e.tag.length>0||e.starred||e.folderIds&&e.folderIds.length>0;return e.skipRecent||o||a.push(this.getRecentDashboards(n)),e.skipStarred||o||a.push(this.getStarred(n)),i.folderIds=i.folderIds||[],o||(i.folderIds=[0]),a.push(this.backendSrv.search(i).then(function(e){return t.handleSearchResult(n,e)})),this.$q.all(a).then(function(){return r.a.sortBy(r.a.values(n),"score")})},e.prototype.handleSearchResult=function(e,t){if(0===t.length)return e;for(var n=0,a=t;n<a.length;n++){"dash-folder"===(s=a[n]).type&&(e[s.id]={id:s.id,uid:s.uid,title:s.title,expanded:!1,items:[],toggle:this.toggleFolder.bind(this),url:s.url,icon:"fa fa-folder",score:r.a.keys(e).length})}for(var i=0,o=t;i<o.length;i++){var s;if("dash-folder"!==(s=o[i]).type){var l=e[s.folderId||0];l||(l=s.folderId?{id:s.folderId,uid:s.folderUid,title:s.folderTitle,url:s.folderUrl,items:[],icon:"fa fa-folder-open",toggle:this.toggleFolder.bind(this),score:r.a.keys(e).length}:{id:0,title:"General",items:[],icon:"fa fa-folder-open",toggle:this.toggleFolder.bind(this),score:r.a.keys(e).length},e[s.folderId||0]=l),l.expanded=!0,l.items.push(s)}}},e.prototype.toggleFolder=function(e){if(e.expanded=!e.expanded,e.icon=e.expanded?"fa fa-folder-open":"fa fa-folder",e.items.length)return Promise.resolve(e);var t={folderIds:[e.id]};return this.backendSrv.search(t).then(function(t){return e.items=t,Promise.resolve(e)})},e.prototype.getDashboardTags=function(){return this.backendSrv.get("/api/dashboards/tags")},e}();s.c.service("searchSrv",ie);var oe=n(0),se=n.n(oe),le=n(15),ce=n.n(le);function ue(e,t){if(f.a.isFunction(e))return e;if(!e)throw new Error("ReactComponent name attribute must be specified");var n;try{n=t.get(e)}catch(e){}if(!n)try{n=e.split(".").reduce(function(e,t){return e[t]},window)}catch(e){}if(!n)throw Error("Cannot find react component "+e);return n}function de(e,t,n){return Object.keys(e||{}).reduce(function(a,r){var i=e[r],o=(n||{})[r]||{};return a[r]=f.a.isFunction(i)&&!1!==o.wrapApply?function(e,t){if(e.wrappedInApply)return e;var n=function(){var n=arguments,a=t.$root.$$phase;return"$apply"===a||"$digest"===a?e.apply(null,n):t.$apply(function(){return e.apply(null,n)})};return n.wrappedInApply=!0,n}(i,t):i,a},{})}function pe(e,t,n,a){var r=f.a.isFunction(t.$watchCollection),i=f.a.isFunction(t.$watchGroup),o=[];n.forEach(function(n){var s=function(e){return Array.isArray(e)?e[0]:e}(n),l=function(e,t){return Array.isArray(t)&&f.a.isObject(t[1])&&t[1].watchDepth||e}(e,n);"collection"===l&&r?t.$watchCollection(s,a):"reference"===l&&i?o.push(s):"one-time"===l||t.$watch(s,a,"reference"!==l)}),"one-time"===e&&a(),o.length&&t.$watchGroup(o,a)}function he(e,t,n,a){n.$evalAsync(function(){ce.a.render(se.a.createElement(e,t),a[0])})}function fe(e){return Array.isArray(e)?e[0]:e}function me(e){return Array.isArray(e)?e[1]:{}}var ge=f.a.module("react",[]);ge.directive("reactComponent",["$injector",function(e){return{restrict:"E",replace:!0,link:function(t,n,a){var r=this,i=ue(a.name,e),o=function(){var e=de(t.$eval(a.props),t);he(i,e,t,n)};a.props?pe(a.watchDepth,t,[a.props],o):o(),t.$on("$destroy",function(){a.onScopeDestroy?t.$eval(a.onScopeDestroy,{unmountComponent:ce.a.unmountComponentAtNode.bind(r,n[0])}):ce.a.unmountComponentAtNode(n[0])})}}}]),ge.factory("reactDirective",["$injector",function(e){return function(t,n,a,r){var i={restrict:"E",replace:!0,link:function(a,i,o){var s=this,l=ue(t,e),c=function(){var e={},t={};n.forEach(function(n){var r=fe(n);e[r]=a.$eval(function(e,t){return e[Object.keys(e).filter(function(e){return e.toLowerCase()===t.toLowerCase()})[0]]}(o,r)),t[r]=me(n)}),e=de(e,a,t),e=f.a.extend({},e,r),he(l,e,a,i)},u=(n=n||Object.keys(l.propTypes||{})).map(function(e){return Array.isArray(e)?[o[fe(e)],me(e)]:o[e]});n.length?pe(o.watchDepth,a,u,c):c(),a.$on("$destroy",function(){o.onScopeDestroy?a.$eval(o.onScopeDestroy,{unmountComponent:ce.a.unmountComponentAtNode.bind(s,i[0])}):ce.a.unmountComponentAtNode(i[0])})}};return f.a.extend(i,a)}}]);var ve=n(6),be=n(2),ye=n(9),we=function(){function e(e,t,n,a){var r=this;this.$location=t,this.$timeout=n,this.searchSrv=a,this.getTags=function(){return r.searchSrv.getDashboardTags()},this.onTagFiltersChanged=function(e){r.query.tag=e,r.search()},ye.b.on("show-dash-search",this.openSearch.bind(this),e),ye.b.on("hide-dash-search",this.closeSearch.bind(this),e),this.initialFolderFilterTitle="All",this.isEditor=re.a.isEditor,this.hasEditPermissionInFolders=re.a.hasEditPermissionInFolders}return e.$inject=["$scope","$location","$timeout","searchSrv"],e.prototype.closeSearch=function(){this.isOpen=this.ignoreClose},e.prototype.openSearch=function(e,t){var n=this;this.isOpen?this.closeSearch():(this.isOpen=!0,this.giveSearchFocus=0,this.selectedIndex=-1,this.results=[],this.query={query:"",tag:[],starred:!1},this.currentSearchId=0,this.ignoreClose=!0,this.isLoading=!0,t&&t.starred&&(this.query.starred=!0),this.$timeout(function(){n.ignoreClose=!1,n.giveSearchFocus=n.giveSearchFocus+1,n.search()},100))},e.prototype.keyDown=function(e){if(27===e.keyCode&&this.closeSearch(),40===e.keyCode&&this.moveSelection(1),38===e.keyCode&&this.moveSelection(-1),13===e.keyCode){var t=this.getFlattenedResultForNavigation()[this.selectedIndex];if(t)if(void 0!==t.dashboardIndex){var n=this.results[t.folderIndex].items[t.dashboardIndex];n&&(this.$location.search({}),this.$location.path(n.url),this.closeSearch())}else{var a=this.results[t.folderIndex];a&&a.toggle(a)}}},e.prototype.onFilterboxClick=function(){this.giveSearchFocus=0,this.preventClose()},e.prototype.preventClose=function(){var e=this;this.ignoreClose=!0,this.$timeout(function(){e.ignoreClose=!1},100)},e.prototype.moveSelection=function(e){if(0!==this.results.length){var t=this.getFlattenedResultForNavigation(),n=t[this.selectedIndex];if(n&&(void 0!==n.dashboardIndex?this.results[n.folderIndex].items[n.dashboardIndex].selected=!1:this.results[n.folderIndex].selected=!1),0!==e){var a=t.length,r=(this.selectedIndex+e)%a;this.selectedIndex=r<0?r+a:r;var i=t[this.selectedIndex];if(void 0!==i.dashboardIndex||0!==this.results[i.folderIndex].id)return void 0!==i.dashboardIndex?this.results[i.folderIndex].expanded?void(this.results[i.folderIndex].items[i.dashboardIndex].selected=!0):void this.moveSelection(e):void(this.results[i.folderIndex].hideHeader?this.moveSelection(e):this.results[i.folderIndex].selected=!0);this.moveSelection(e)}else this.selectedIndex=-1}},e.prototype.searchDashboards=function(){var e=this;this.currentSearchId=this.currentSearchId+1;var t=this.currentSearchId,n=be.a({},this.query,{tag:this.query.tag});return this.searchSrv.search(n).then(function(n){t<e.currentSearchId||(e.results=n||[],e.isLoading=!1,e.moveSelection(1))})},e.prototype.queryHasNoFilters=function(){var e=this.query;return""===e.query&&!1===e.starred&&0===e.tag.length},e.prototype.filterByTag=function(e){-1===r.a.indexOf(this.query.tag,e)&&(this.query.tag.push(e),this.search())},e.prototype.removeTag=function(e,t){this.query.tag=r.a.without(this.query.tag,e),this.search(),this.giveSearchFocus=this.giveSearchFocus+1,t.stopPropagation(),t.preventDefault()},e.prototype.clearSearchFilter=function(){this.query.tag=[],this.search()},e.prototype.showStarred=function(){this.query.starred=!this.query.starred,this.giveSearchFocus=this.giveSearchFocus+1,this.search()},e.prototype.search=function(){this.showImport=!1,this.selectedIndex=-1,this.searchDashboards()},e.prototype.folderExpanding=function(){this.moveSelection(0)},e.prototype.getFlattenedResultForNavigation=function(){var e=0;return r.a.flatMap(this.results,function(t){var n=[];n.push({folderIndex:e});var a=0;return n=n.concat(r.a.map(t.items||[],function(t){return{folderIndex:e,dashboardIndex:a++}})),e++,n})},e}();s.c.directive("dashboardSearch",function(){return{restrict:"E",templateUrl:"public/app/core/components/search/search.html",controller:we,bindToController:!0,controllerAs:"ctrl",scope:{}}});var xe=n(103),Se=n.n(xe);s.c.directive("infoPopover",function(){return{restrict:"E",template:'<i class="fa fa-info-circle"></i>',transclude:!0,link:function(e,t,n,a,i){var o=n.offset||"0 -10px",s=n.position||"right middle",l="drop-help drop-hide-out-of-bounds";t.addClass("gf-form-help-icon"),n.wide&&(l+=" drop-wide"),n.mode&&t.addClass("gf-form-help-icon--"+n.mode),i(function(n,a){var i=document.createElement("div");i.className="markdown-html",r.a.each(n,function(e){i.appendChild(e)});var c={target:t[0],content:i,position:s,classes:l,openOn:"hover",hoverOpenDelay:400,tetherOptions:{offset:o,constraints:[{to:"window",attachment:"together",pin:!0}]}};e.$applyAsync(function(){var t=new Se.a(c),n=e.$on("$destroy",function(){t.destroy(),n()})})})}}});var ke=function(){function e(){}return e.prototype.showSearch=function(){ye.b.emit("show-dash-search")},e.prototype.navItemClicked=function(e,t){e.clickHandler&&(e.clickHandler(),t.preventDefault())},e}();s.c.directive("pageH1",function(){return{restrict:"E",template:'\n    <h1 class="page-header__title">\n      <i class="page-header__icon {{::model.header.icon}}" ng-if="::model.header.icon"></i>\n      <img class="page-header__img" ng-src="{{::model.header.img}}" ng-if="::model.header.img"></i>\n      {{model.header.text}}\n    </h1>\n    ',scope:{model:"="}}}),s.c.directive("navbar",function(){return{restrict:"E",templateUrl:"public/app/core/components/navbar/navbar.html",controller:ke,bindToController:!0,controllerAs:"ctrl",scope:{model:"="},link:function(e,t){}}}),s.c.directive("arrayJoin",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){a.$parsers.push(function(e){return(e||"").split(",")}),a.$formatters.push(function(e){return r.a.isArray(e)?(e||"").join(","):e})}}});var Ce=n(1465),Ee=(new(function(){function e(){this.observers={}}return e.prototype.getWebSocketUrl=function(){var e=window.location;return("https:"===e.protocol?"wss://":"ws://")+e.host+Q.a.appSubUrl+"/ws"},e.prototype.getConnection=function(){var e=this;return this.initPromise?this.initPromise:this.conn&&1===this.conn.readyState?Promise.resolve(this.conn):(this.initPromise=new Promise(function(t,n){console.log("Live: connecting..."),e.conn=new WebSocket(e.getWebSocketUrl()),e.conn.onclose=function(t){console.log("Live: websocket onclose",t),n({message:"Connection closed"}),e.initPromise=null,setTimeout(e.reconnect.bind(e),2e3)},e.conn.onmessage=function(t){e.handleMessage(t.data)},e.conn.onerror=function(t){e.initPromise=null,n({message:"Connection error"}),console.log("Live: websocket error",t)},e.conn.onopen=function(n){console.log("opened"),e.initPromise=null,t(e.conn)}}),this.initPromise)},e.prototype.handleMessage=function(e){if((e=JSON.parse(e)).stream){var t=this.observers[e.stream];t?t.next(e):this.removeObserver(e.stream,null)}else console.log("Error: stream message without stream!",e)},e.prototype.reconnect=function(){var e=this;0!==r.a.keys(this.observers).length&&(console.log("LiveSrv: Reconnecting"),this.getConnection().then(function(t){r.a.each(e.observers,function(t,n){e.send({action:"subscribe",stream:n})})}))},e.prototype.send=function(e){this.conn.send(JSON.stringify(e))},e.prototype.addObserver=function(e,t){var n=this;this.observers[e]=t,this.getConnection().then(function(t){n.send({action:"subscribe",stream:e})})},e.prototype.removeObserver=function(e,t){var n=this;console.log("unsubscribe",e),delete this.observers[e],this.getConnection().then(function(t){n.send({action:"unsubscribe",stream:e})})},e.prototype.subscribe=function(e){var t=this;return console.log("LiveSrv.subscribe: "+e),Ce.a.create(function(n){return t.addObserver(e,n),function(){t.removeObserver(e,n)}})},e}()),n(150),'\n<div class="layout-selector">\n  <button ng-click="ctrl.listView()" ng-class="{active: ctrl.mode === \'list\'}">\n    <i class="fa fa-list"></i>\n  </button>\n  <button ng-click="ctrl.gridView()" ng-class="{active: ctrl.mode === \'grid\'}">\n    <i class="fa fa-th"></i>\n  </button>\n</div>\n'),Te=function(){function e(e){this.$rootScope=e,this.mode=ae.a.get("grafana.list.layout.mode")||"grid"}return e.$inject=["$rootScope"],e.prototype.listView=function(){this.mode="list",ae.a.set("grafana.list.layout.mode","list"),this.$rootScope.appEvent("layout-mode-changed","list")},e.prototype.gridView=function(){this.mode="grid",ae.a.set("grafana.list.layout.mode","grid"),this.$rootScope.appEvent("layout-mode-changed","grid")},e}();function Me(e){return{restrict:"A",scope:{},link:function(t,n){var a="card-list-layout-"+(ae.a.get("grafana.list.layout.mode")||"grid");n.addClass(a),e.onAppEvent("layout-mode-changed",function(e,t){n.removeClass(a),a="card-list-layout-"+t,n.addClass(a)},t)}}}s.c.directive("layoutSelector",function(){return{restrict:"E",controller:Te,bindToController:!0,controllerAs:"ctrl",scope:{},template:Ee}}),s.c.directive("layoutMode",Me);var _e='\n<label for="check-{{ctrl.id}}" class="gf-form-switch-container">\n  <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">\n    {{ctrl.label}}\n    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class="gf-form-switch {{ctrl.switchClass}}" ng-if="ctrl.show">\n    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">\n    <span class="gf-form-switch__slider"></span>\n  </div>\n</label>\n',Ae='\n<label for="check-{{ctrl.id}}" class="gf-form-switch-container">\n   <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">\n    {{ctrl.label}}\n    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class="gf-form-checkbox {{ctrl.switchClass}}" ng-if="ctrl.show">\n    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">\n    <span class="gf-form-switch__checkbox"></span>\n  </div>\n</label>\n',De=function(){function e(e,t){this.$timeout=t,this.show=!0,this.id=e.$id}return e.$inject=["$scope","$timeout"],e.prototype.internalOnChange=function(){var e=this;return this.$timeout(function(){return e.onChange()})},e}();s.c.directive("gfFormSwitch",function(){return{restrict:"E",controller:De,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:_e}}),s.c.directive("gfFormCheckbox",function(){return{restrict:"E",controller:De,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:Ae}});var Ne='\n<select class="gf-form-input" ng-model="ctrl.model" ng-options="f.value as f.text for f in ctrl.options"></select>\n',Pe=function(){function e(e){this.backendSrv=e}return e.$inject=["backendSrv"],e.prototype.$onInit=function(){var e=this;return this.options=[{value:0,text:"Default"}],this.backendSrv.search({starred:!0}).then(function(t){t.forEach(function(t){e.options.push({value:t.id,text:t.title})})})},e}();s.c.directive("dashboardSelector",function(){return{restrict:"E",controller:Pe,bindToController:!0,controllerAs:"ctrl",template:Ne,scope:{model:"="}}});var Oe='\n<div class="dropdown cascade-open">\n<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.def.type}}</a>\n<span>(</span><span class="query-part-parameters"></span><span>)</span>\n<ul class="dropdown-menu">\n  <li ng-repeat="action in partActions">\n    <a ng-click="triggerPartAction(action)">{{action.text}}</a>\n  </li>\n</ul>\n';function Ie(e,t){var n='<input type="text" class="hide input-mini tight-form-func-param"></input>';return{restrict:"E",template:Oe,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(e,a){var i=e.part,s=i.def,l=a.find(".query-part-parameters"),c=e.debounce;function u(e){var t=o()(this),n=t.next();n.val(i.params[e]),n.css("width",t.width()+16+"px"),t.hide(),n.show(),n.focus(),n.select();var a=n.data("typeahead");a&&(n.val(""),a.lookup())}function d(n){var a=o()(this),r=a.prev(),s=a.val();(""!==s||i.def.params[n].optional)&&(r.html(t.highlightVariablesAsHtml(s)),i.updateParam(a.val(),n),e.$apply(function(){e.handleEvent({$event:{name:"part-param-changed"}})})),a.hide(),r.show()}function p(e,t){13===t.which&&d.call(this,e)}function h(){this.style.width=8*(3+this.value.length)+"px"}function f(){r.a.each(s.params,function(a,s){if(!(a.optional&&i.params.length<=s)){s>0&&o()("<span>, </span>").appendTo(l);var f=t.highlightVariablesAsHtml(i.params[s]),m=o()('<a class="graphite-func-param-link pointer">'+f+"</a>"),g=o()(n);m.appendTo(l),g.appendTo(l),g.blur(r.a.partial(d,s)),g.keyup(h),g.keypress(r.a.partial(p,s)),m.click(r.a.partial(u,s)),function(t,n,a){if(n.options||n.dynamicLookup){t.attr("data-provide","typeahead"),t.typeahead({source:function(t,a){if(n.options){var i=n.options;return"int"===n.type&&(i=r.a.map(i,function(e){return e.toString()})),i}e.$apply(function(){e.handleEvent({$event:{name:"get-param-options"}}).then(function(e){var t=r.a.map(e,function(e){return r.a.escape(e.value)});a(t)})})},minLength:0,items:1e3,updater:function(e){return e=r.a.unescape(e),setTimeout(function(){d.call(t[0],a)},0),e}});var i=t.data("typeahead");i.lookup=function(){this.query=this.$element.val()||"";var e=this.source(this.query,o.a.proxy(this.process,this));return e?this.process(e):e},c&&(i.lookup=r.a.debounce(i.lookup,500,{leading:!0}))}}(g,a,s)}})}e.partActions=[],e.showActionsMenu=function(){e.handleEvent({$event:{name:"get-part-actions"}}).then(function(t){e.partActions=t})},e.triggerPartAction=function(t){e.handleEvent({$event:{name:"action",action:t}})},l.empty(),f()}}}s.c.directive("queryPartEditor",Ie);var $e='\n<div class="dropdown cascade-open">\n<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.label}}</a>\n<span>{{part.def.wrapOpen}}</span><span class="query-part-parameters"></span><span>{{part.def.wrapClose}}</span>\n<ul class="dropdown-menu">\n  <li ng-repeat="action in partActions">\n    <a ng-click="triggerPartAction(action)">{{action.text}}</a>\n  </li>\n</ul>\n';function Fe(e,t){var n='<input type="text" class="hide input-mini"></input>';return{restrict:"E",template:$e,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(e,a){var i=e.part,s=i.def,l=a.find(".query-part-parameters"),c=e.debounce,u=null;function d(e){var t=o()(this),n=t.next();n.val(i.params[e]),n.css("width",t.width()+16+"px"),t.hide(),n.show(),n.focus(),n.select();var a=n.data("typeahead");a&&(n.val(""),a.lookup())}function p(e,t){u=setTimeout(function(){h(e,t)},200)}function h(n,a){var r=n.prev(),o=n.val();(""!==o||i.def.params[a].optional)&&(r.html(t.highlightVariablesAsHtml(o)),i.updateParam(n.val(),a),e.$apply(function(){e.handleEvent({$event:{name:"part-param-changed"}})})),n.hide(),r.show()}function f(e,t){13===t.which&&h(o()(this),e)}function m(){this.style.width=8*(3+this.value.length)+"px"}function g(){r.a.each(s.params,function(a,h){if(!(a.optional&&i.params.length<=h)){h>0&&o()("<span>"+s.separator+"</span>").appendTo(l);var g=t.highlightVariablesAsHtml(i.params[h]),v=o()('<a class="graphite-func-param-link pointer">'+g+"</a>"),b=o()(n);v.appendTo(l),b.appendTo(l),b.blur(r.a.partial(p,b,h)),b.keyup(m),b.keypress(r.a.partial(f,h)),v.click(r.a.partial(d,h)),function(t,n,a){if(n.options||n.dynamicLookup){t.attr("data-provide","typeahead"),t.typeahead({source:function(t,o){if(n.options){var s=n.options;return"int"===n.type&&(s=r.a.map(s,function(e){return e.toString()})),s}e.$apply(function(){e.handleEvent({$event:{name:"get-param-options",param:n}}).then(function(e){var t=r.a.map(e,function(e){return r.a.escape(e.value)});-1===r.a.indexOf(t,i.params[a])&&t.unshift(r.a.escape(i.params[a])),o(t)})})},minLength:0,items:1e3,updater:function(e){return(e=r.a.unescape(e))===i.params[a]?(clearTimeout(u),t.focus(),e):e}});var s=t.data("typeahead");s.lookup=function(){this.query=this.$element.val()||"";var e=this.source(this.query,o.a.proxy(this.process,this));return e?this.process(e):e},c&&(s.lookup=r.a.debounce(s.lookup,500,{leading:!0}))}}(b,a,h)}})}e.partActions=[],e.showActionsMenu=function(){e.handleEvent({$event:{name:"get-part-actions"}}).then(function(t){e.partActions=t})},e.triggerPartAction=function(t){e.handleEvent({$event:{name:"action",action:t}})},l.empty(),g()}}}function qe(e){var t=this.query;return""===t||("/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e.toLowerCase().match(t.toLowerCase()))}s.c.directive("sqlPartEditor",Fe);var Re=function(){function e(e,t,n,a,i){var o=this;this.$scope=e,this.$sce=n,this.templateSrv=a,this.$q=i,this.inputElement=t.find("input").first(),this.linkElement=t.find("a").first(),this.linkMode=!0,this.cancelBlur=null,e.$watch("ctrl.model",this.modelChanged.bind(this)),this.labelMode?this.cssClasses="gf-form-label "+this.cssClass:this.cssClasses="gf-form-input gf-form-input--dropdown "+this.cssClass,this.placeholder&&this.inputElement.attr("placeholder",this.placeholder),this.inputElement.attr("data-provide","typeahead"),this.inputElement.typeahead({source:this.typeaheadSource.bind(this),minLength:0,items:1e4,updater:this.typeaheadUpdater.bind(this),matcher:qe});var s=this.inputElement.data("typeahead");s.lookup=function(){this.query=this.$element.val()||"",this.source(this.query,this.process.bind(this))},this.debounce&&(s.lookup=r.a.debounce(s.lookup,500,{leading:!0})),this.linkElement.keydown(function(e){40!==e.keyCode&&13!==e.keyCode||o.linkElement.click()}),this.inputElement.keydown(function(e){13===e.keyCode&&setTimeout(function(){o.inputElement.blur()},300)}),this.inputElement.blur(this.inputBlur.bind(this)),this.startOpen&&setTimeout(this.open.bind(this),0)}return e.$inject=["$scope","$element","$sce","templateSrv","$q"],e.prototype.getOptionsInternal=function(e){var t=this.getOptions({$query:e});return this.isPromiseLike(t)?t:this.$q.when(t)},e.prototype.isPromiseLike=function(e){return e&&"function"==typeof e.then},e.prototype.modelChanged=function(){var e=this;r.a.isObject(this.model)?this.updateDisplay(this.model.text):this.lookupText?this.getOptionsInternal("").then(function(t){var n=r.a.find(t,{value:e.model});e.updateDisplay(n?n.text:e.model)}):this.updateDisplay(this.model)},e.prototype.typeaheadSource=function(e,t){var n=this;this.getOptionsInternal(e).then(function(e){n.optionCache=e;var a=r.a.map(e,function(e){return r.a.escape(e.text)});n.allowCustom&&""!==n.text&&-1===r.a.indexOf(a,n.text)&&a.unshift(n.text),t(a)})},e.prototype.typeaheadUpdater=function(e){return e===this.text?(clearTimeout(this.cancelBlur),this.inputElement.focus(),e):(this.inputElement.val(e),this.switchToLink(!0),e)},e.prototype.switchToLink=function(e){this.linkMode&&!e||(clearTimeout(this.cancelBlur),this.cancelBlur=null,this.linkMode=!0,this.inputElement.hide(),this.linkElement.show(),this.updateValue(this.inputElement.val()))},e.prototype.inputBlur=function(){this.cancelBlur=setTimeout(this.switchToLink.bind(this),200)},e.prototype.updateValue=function(e){var t=this;""!==(e=r.a.unescape(e))&&this.text!==e&&this.$scope.$apply(function(){var n=r.a.find(t.optionCache,{text:e});n?(r.a.isObject(t.model)?t.model=n:t.model=n.value,t.text=n.text):t.allowCustom&&(r.a.isObject(t.model)?t.model.text=t.model.value=e:t.model=e,t.text=e),t.$scope.$$postDigest(function(){t.$scope.$apply(function(){t.onChange({$option:n})})})})},e.prototype.updateDisplay=function(e){this.text=e,this.display=this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(e))},e.prototype.open=function(){this.inputElement.css("width",Math.max(this.linkElement.width(),80)+16+"px"),this.inputElement.show(),this.inputElement.focus(),this.linkElement.hide(),this.linkMode=!1;var e=this.inputElement.data("typeahead");e&&(this.inputElement.val(""),e.lookup())},e}(),Le='\n<input type="text"\n  data-provide="typeahead"\n  class="gf-form-input"\n  spellcheck="false"\n  style="display:none">\n</input>\n<a ng-class="ctrl.cssClasses"\n   tabindex="1"\n   ng-click="ctrl.open()"\n   give-focus="ctrl.focus"\n   ng-bind-html="ctrl.display || \'&nbsp;\'">\n</a>\n';s.c.directive("gfFormDropdown",function(){return{restrict:"E",template:Le,controller:Re,bindToController:!0,controllerAs:"ctrl",scope:{model:"=",getOptions:"&",onChange:"&",cssClass:"@",allowCustom:"@",labelMode:"@",lookupText:"@",placeholder:"@",startOpen:"@",debounce:"@"}}});var je=function(){function e(e){e.json=f.a.toJson(e.model.object,!0),e.canUpdate=void 0!==e.model.updateHandler&&e.contextSrv.isEditor,e.canCopy=e.model.enableCopy,e.update=function(){var t=f.a.fromJson(e.json);e.model.updateHandler(t,e.model.object)},e.getContentForClipboard=function(){return e.json}}return e.$inject=["$scope"],e}();s.c.controller("JsonEditorCtrl",je);var Ue=function(){function e(e,t,n,a){e.formModel={user:"",email:"",password:""},e.command={},e.result="",e.loggingIn=!1,n.sidemenu=!1,e.oauth=Q.a.oauth,e.oauthEnabled=r.a.keys(Q.a.oauth).length>0,e.ldapEnabled=Q.a.ldapEnabled,e.authProxyEnabled=Q.a.authProxyEnabled,e.disableLoginForm=Q.a.disableLoginForm,e.disableUserSignUp=Q.a.disableUserSignUp,e.loginHint=Q.a.loginHint,e.loginMode=!0,e.submitBtnText="Log in",e.init=function(){e.$watch("loginMode",e.loginModeChanged),Q.a.loginError&&e.appEvent("alert-warning",["Login Failed",Q.a.loginError])},e.submit=function(){e.loginMode?e.login():e.signUp()},e.changeView=function(){var e=document.querySelector("#login-view"),t=document.querySelector("#change-password-view");e.className+=" add",setTimeout(function(){e.className+=" hidden"},250),setTimeout(function(){t.classList.remove("hidden")},251),setTimeout(function(){t.classList.remove("remove")},301),setTimeout(function(){document.getElementById("newPassword").focus()},400)},e.changePassword=function(){e.command.oldPassword="admin",e.command.newPassword===e.command.confirmNew?t.put("/api/user/password",e.command).then(function(){e.toGrafana()}):e.appEvent("alert-warning",["New passwords do not match",""])},e.skip=function(){e.toGrafana()},e.loginModeChanged=function(t){e.submitBtnText=t?"Log in":"Sign up"},e.signUp=function(){e.loginForm.$valid&&t.post("/api/user/signup",e.formModel).then(function(t){"SignUpCreated"===t.status?a.path("/signup").search({email:e.formModel.email}):window.location.href=Q.a.appSubUrl+"/"})},e.login=function(){delete e.loginError,e.loginForm.$valid&&(e.loggingIn=!0,t.post("/login",e.formModel).then(function(t){e.result=t,"admin"!==e.formModel.password||e.ldapEnabled||e.authProxyEnabled?e.toGrafana():e.changeView()}).catch(function(){e.loggingIn=!1}))},e.toGrafana=function(){var t=a.search();t.redirect&&"/"===t.redirect[0]?window.location.href=Q.a.appSubUrl+t.redirect:e.result.redirectUrl?window.location.href=e.result.redirectUrl:window.location.href=Q.a.appSubUrl+"/"},e.init()}return e.$inject=["$scope","backendSrv","contextSrv","$location"],e}();s.c.controller("LoginCtrl",Ue);var Ve=function(){function e(e,t,n,a){n.sidemenu=!1,e.formModel={},e.navModel={main:{icon:"gicon gicon-branding",text:"Invite",subTitle:"Register your Grafana account",breadcrumbs:[{title:"Login",url:"login"}]}},e.init=function(){a.get("/api/user/invite/"+t.code).then(function(n){e.formModel.name=n.name,e.formModel.email=n.email,e.formModel.username=n.email,e.formModel.inviteCode=t.code,e.greeting=n.name||n.email||n.username,e.invitedBy=n.invitedBy})},e.submit=function(){e.inviteForm.$valid&&a.post("/api/user/invite/complete",e.formModel).then(function(){window.location.href=Q.a.appSubUrl+"/"})},e.init()}return e.$inject=["$scope","$routeParams","contextSrv","backendSrv"],e}();s.c.controller("InvitedCtrl",Ve);var Be=function(){function e(e,t,n,a){this.$scope=e,this.backendSrv=t,a.sidemenu=!1,e.ctrl=this,e.formModel={};var r=n.search();!r.email||r.email.match(/^\S+@\S+$/)?(e.formModel.orgName=r.email,e.formModel.email=r.email,e.formModel.username=r.email,e.formModel.code=r.code,e.verifyEmailEnabled=!1,e.autoAssignOrg=!1,e.navModel={main:{icon:"gicon gicon-branding",text:"Sign Up",subTitle:"Register your Grafana account",breadcrumbs:[{title:"Login",url:"login"}]}},t.get("/api/user/signup/options").then(function(t){e.verifyEmailEnabled=t.verifyEmailEnabled,e.autoAssignOrg=t.autoAssignOrg})):console.log("invalid email")}return e.$inject=["$scope","backendSrv","$location","contextSrv"],e.prototype.submit=function(){this.$scope.signUpForm.$valid&&this.backendSrv.post("/api/user/signup/step2",this.$scope.formModel).then(function(e){"redirect-to-select-org"===e.code?window.location.href=Q.a.appSubUrl+"/profile/select-org?signup=1":window.location.href=Q.a.appSubUrl+"/"})},e}();s.c.controller("SignUpCtrl",Be);var Qe=function(){function e(e,t,n,a){t.sidemenu=!1,e.formModel={},e.mode="send",e.ldapEnabled=Q.a.ldapEnabled,e.authProxyEnabled=Q.a.authProxyEnabled,e.disableLoginForm=Q.a.disableLoginForm;var r=a.search();r.code&&(e.mode="reset",e.formModel.code=r.code),e.navModel={main:{icon:"gicon gicon-branding",text:"Reset Password",subTitle:"Reset your Grafana password",breadcrumbs:[{title:"Login",url:"login"}]}},e.sendResetEmail=function(){e.sendResetForm.$valid&&n.post("/api/user/password/send-reset-email",e.formModel).then(function(){e.mode="email-sent"})},e.submitReset=function(){e.resetForm.$valid&&(e.formModel.newPassword===e.formModel.confirmPassword?n.post("/api/user/password/reset",e.formModel).then(function(){a.path("login")}):e.appEvent("alert-warning",["New passwords do not match",""]))}}return e.$inject=["$scope","contextSrv","backendSrv","$location"],e}();s.c.controller("ResetPasswordCtrl",Qe);var ze=function(){function e(e,t,n){e.navModel=n.getNotFoundNav(),e.appSubUrl=Q.a.appSubUrl,t.isSignedIn||ye.b.emit("toggle-sidemenu-hidden"),e.$on("destroy",function(){t.isSignedIn||ye.b.emit("toggle-sidemenu-hidden")})}return e.$inject=["$scope","contextSrv","navModelSrv"],e}();s.c.controller("ErrorCtrl",ze);var He=function(){function e(){}return e.prototype.set=function(){console.log("old depricated alert srv being used")},e}();s.c.service("alertSrv",He);var Ge=function(){function e(e,t){this.$rootScope=e,this.$modal=t}return e.$inject=["$rootScope","$modal"],e.prototype.init=function(){ye.b.on("show-modal",this.showModal.bind(this),this.$rootScope),ye.b.on("hide-modal",this.hideModal.bind(this),this.$rootScope),ye.b.on("confirm-modal",this.showConfirmModal.bind(this),this.$rootScope)},e.prototype.hideModal=function(){this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss()},e.prototype.showModal=function(e){this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss(),this.modalScope=e.scope,e.model?(this.modalScope=this.$rootScope.$new(),this.modalScope.model=e.model):this.modalScope||(this.modalScope=this.$rootScope.$new());var t=this.$modal({modalClass:e.modalClass,template:e.src,templateHtml:e.templateHtml,persist:!1,show:!1,scope:this.modalScope,keyboard:!1,backdrop:e.backdrop});Promise.resolve(t).then(function(e){e.modal("show")})},e.prototype.showConfirmModal=function(e){var t=this.$rootScope.$new();t.onConfirm=function(){e.onConfirm(),t.dismiss()},t.updateConfirmText=function(n){t.confirmTextValid=e.confirmText.toLowerCase()===n.toLowerCase()},t.title=e.title,t.text=e.text,t.text2=e.text2,t.confirmText=e.confirmText,t.onConfirm=e.onConfirm,t.onAltAction=e.onAltAction,t.altActionText=e.altActionText,t.icon=e.icon||"fa-check",t.yesText=e.yesText||"Yes",t.noText=e.noText||"Cancel",t.confirmTextValid=!t.confirmText,ye.b.emit("show-modal",{src:"public/app/partials/confirm_modal.html",scope:t,modalClass:"confirm-modal"})},e}();s.c.service("utilSrv",Ge);var We=function(){function e(e){this.$timeout=e,this.timers=[]}return e.$inject=["$timeout"],e.prototype.register=function(e){return this.timers.push(e),e},e.prototype.cancel=function(e){this.timers=r.a.without(this.timers,e),this.$timeout.cancel(e)},e.prototype.cancelAll=function(){var e=this;r.a.each(this.timers,function(t){e.$timeout.cancel(t)}),this.timers=[]},e}();s.c.service("timer",We);var Ye=function(){function e(e,t){this.$rootScope=e,this.$location=t}return e.$inject=["$rootScope","$location"],e.prototype.gaInit=function(){o.a.ajax({url:"https://www.google-analytics.com/analytics.js",dataType:"script",cache:!0});var e=window.ga=window.ga||function(){(e.q=e.q||[]).push(arguments)};return e.l=+new Date,e("create",Q.a.googleAnalyticsId,"auto"),e("set","anonymizeIp",!0),e},e.prototype.init=function(){var e=this;this.$rootScope.$on("$viewContentLoaded",function(){var t={page:e.$location.url()},n=window.ga||e.gaInit();n("set",t),n("send","pageview")})},e}();function Ke(e){Q.a.googleAnalyticsId&&e.init()}function Xe(e,t,n){var a=null;this.close=function(){a&&a.close()},this.show=function(i){a&&(a.close(),a=null);var o,s=r.a.extend(t.$new(!0),i.model);s.dismiss=function(){o.close()};var l=document.createElement("div");return l.innerHTML=i.template,e(l)(s),n(function(){(o=new Se.a({target:i.element,content:l,position:i.position,classes:i.classNames||"drop-popover",openOn:i.openOn,hoverCloseDelay:200,tetherOptions:{constraints:[{to:"scrollParent",attachment:"together"}]}})).on("close",function(){setTimeout(function(){s.$destroy(),o.tether&&o.destroy(),i.onClose&&i.onClose()}),a=null}),(a=o).open()},100),function(){o&&o.close()}}}function Je(e,t){var n=this;function a(n){return"*"===n||"*"===n.value?(this.value="*",this.html=e.trustAsHtml('<i class="fa fa-asterisk"><i>'),this.type=n.type,void(this.expandable=!0)):r.a.isString(n)?(this.value=n,void(this.html=e.trustAsHtml(t.highlightVariablesAsHtml(this.value)))):(this.text=n.value,this.cssClass=n.cssClass,this.custom=n.custom,this.type=n.type,this.fake=n.fake,this.value=n.value,this.selectMode=n.selectMode,this.type=n.type,this.expandable=n.expandable,void(this.html=n.html||e.trustAsHtml(t.highlightVariablesAsHtml(this.value))))}this.getSegmentForValue=function(e,t){return e?this.newSegment(e):this.newSegment({value:t,fake:!0})},this.newSelectMeasurement=function(){return new a({value:"select measurement",fake:!0})},this.newFake=function(e,t,n){return new a({value:e,fake:!0,type:t,cssClass:n})},this.newSegment=function(e){return new a(e)},this.newKey=function(e){return new a({value:e,type:"key",cssClass:"query-segment-key"})},this.newKeyValue=function(e){return new a({value:e,type:"value",cssClass:"query-segment-value"})},this.newCondition=function(e){return new a({value:e,type:"condition",cssClass:"query-keyword"})},this.newOperator=function(e){return new a({value:e,type:"operator",cssClass:"query-segment-operator"})},this.newOperators=function(e){return r.a.map(e,function(e){return new a({value:e,type:"operator",cssClass:"query-segment-operator"})})},this.transformToSegments=function(e,a){return function(i){var o=r.a.map(i,function(e){return n.newSegment({value:e.text,expandable:e.expandable})});return e&&r.a.each(t.variables,function(e){void 0!==a&&a!==e.type||o.unshift(n.newSegment({type:"value",value:"$"+e.name,expandable:!0}))}),o}},this.newSelectMetric=function(){return new a({value:"select metric",fake:!0})},this.newPlusButton=function(){return new a({fake:!0,html:'<i class="fa fa-plus "></i>',type:"plus-button",cssClass:"query-part"})}}s.c.service("googleAnalyticsSrv",Ye).run(Ke),s.c.service("popoverSrv",Xe),s.c.service("uiSegmentSrv",Je);n(14);var Ze=function(){function e(e){this.$compile=e}return e.$inject=["$compile"],e.prototype.addDirective=function(e,t,n){var a=f.a.element(document.createElement(t));this.$compile(a)(n),e.empty(),e.append(a)},e.prototype.link=function(e,t,n,a){var r=a.directive(e);r&&r.fn?(r.fn.registered||(s.c.directive(n.$normalize(r.name),r.fn),r.fn.registered=!0),this.addDirective(t,r.name,e)):t.empty()},e.prototype.create=function(e){var t=this;return{restrict:"E",scope:e.scope,link:function(n,a,r){if(e.watchPath){var i=null;n.$watch(e.watchPath,function(){i&&i.$destroy(),i=n.$new(),t.link(i,a,r,e)})}else t.link(n,a,r,e)}}},e}();s.c.service("dynamicDirectiveSrv",Ze);var et=n(63),tt=n(58),nt=n(27),at=function(){function e(e,t,n,a,r){this.$location=e,this.$timeout=t,this.$window=n,this.$rootScope=a,this.$route=r,this.fullPageReloadRoutes=["/logout"]}return e.$inject=["$location","$timeout","$window","$rootScope","$route"],e.prototype.init=function(){var e=this;this.$rootScope.$on("$routeUpdate",function(t,n){var a=e.$location.url();et.b.getState().location.url!==a&&et.b.dispatch(Object(nt.c)({path:e.$location.path(),query:e.$location.search(),routeParams:e.$route.current.params}))}),this.$rootScope.$on("$routeChangeSuccess",function(t,n){et.b.dispatch(Object(nt.c)({path:e.$location.path(),query:e.$location.search(),routeParams:e.$route.current.params}))}),et.b.subscribe(function(){var t=et.b.getState(),n=e.$location.url(),a=tt.a.stripBaseFromUrl(t.location.url);n!==a&&(e.$timeout(function(){e.$location.url(a),t.location.replace&&e.$location.replace()}),console.log("store updating angular $location.url",a))}),ye.b.on("location-change",function(t){var n=tt.a.stripBaseFromUrl(t.href);e.fullPageReloadRoutes.indexOf(n)>-1?e.$window.location.href=t.href:e.$timeout(function(){e.$location.url(n)})})},e}();s.c.service("bridgeSrv",at);var rt=n(4),it=n.n(rt);function ot(e){var t=function(t,n){var a;return a=n.ctrl?(n.ctrl.panel||n.ctrl.row).scopedVars:n.row.scopedVars,e.replaceWithText(t,a)};return t.$stateful=!0,t}s.c.filter("stringSort",function(){return function(e){return e.sort()}}),s.c.filter("slice",function(){return function(e,t,n){if(!r.a.isUndefined(e))return e.slice(t,n)}}),s.c.filter("stringify",function(){return function(e){return r.a.isObject(e)&&!r.a.isArray(e)?f.a.toJson(e):r.a.isNull(e)?null:e.toString()}}),s.c.filter("moment",function(){return function(e,t){switch(t){case"ago":return it()(e).fromNow()}return it()(e).fromNow()}}),s.c.filter("noXml",function(){var e=function(e){return r.a.isString(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;"):e};return function(t){return r.a.isArray(t)?r.a.map(t,e):e(t)}}),s.c.filter("interpolateTemplateVars",ot);n(254),n(196);var st=function(){function e(){this.tabIndex=0,this.shortcuts={Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["s","s"],description:"Open search with starred filter"},{keys:["s","t"],description:"Open search in tags view"},{keys:["esc"],description:"Exit edit/setting views"}],Dashboard:[{keys:["mod+s"],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:["mod+o"],description:"Toggle shared graph crosshair"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t",'<i class="fa fa-long-arrow-left"></i>'],description:"Move time range back"},{keys:["t",'<i class="fa fa-long-arrow-right"></i>'],description:"Move time range forward"}]}}return e.prototype.dismiss=function(){ye.b.emit("hide-modal")},e}();s.c.directive("helpModal",function(){return{restrict:"E",templateUrl:"public/app/core/components/help/help.html",controller:st,bindToController:!0,transclude:!0,controllerAs:"ctrl",scope:{}}});var lt=function(){return function(){this.breadcrumbs=[]}}(),ct=function(){function e(){this.navItems=Q.a.bootData.navTree}return e.prototype.getCfgNode=function(){return r.a.find(this.navItems,{id:"cfg"})},e.prototype.getNav=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this.navItems,a=new lt,i=0,o=e;i<o.length;i++){var s=o[i];if(r.a.isNumber(s)){a.main=a.breadcrumbs[s];break}var l=r.a.find(n,{id:s});a.breadcrumbs.push(l),a.node=l,a.main=l,n=l.children}if(a.main.children)for(var c=0,u=a.main.children;c<u.length;c++){var d=u[c];d.active=!1,d.url===a.node.url&&(d.active=!0)}return a},e.prototype.getNotFoundNav=function(){var e={text:"Page not found",icon:"fa fa-fw fa-warning",subTitle:"404 Error"};return{breadcrumbs:[e],node:e,main:e}},e}();s.c.service("navModelSrv",ct);var ut=n(278),dt=n.n(ut),pt='\n<div class="baron__track">\n  <div class="baron__bar"></div>\n</div>\n',ht="baron baron__root",ft="baron__scroller";s.c.directive("grafanaScrollbar",function(){return{restrict:"A",link:function(e,t,n){var a=t.parent(),r=t;console.log("scroll"),n.grafanaScrollbar&&"scrollonroot"===n.grafanaScrollbar&&(a=r),a.addClass(ht),o()(pt).appendTo(a),t.addClass(ft);var i={root:a[0],scroller:r[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling",track:".baron__track",direction:"v"},s=dt()(i);e.$on("$destroy",function(){s.dispose()})}}});var mt='\n<div class="modal-body">\n\t<div class="modal-header">\n\t\t<h2 class="modal-header-title">\n\t\t\t<i class="fa fa-random"></i>\n\t\t\t<span class="p-l-1">Switch Organization</span>\n\t\t</h2>\n\n\t\t<a class="modal-header-close" ng-click="ctrl.dismiss();">\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n  <div class="modal-content modal-content--has-scroll" grafana-scrollbar>\n    <table class="filter-table form-inline">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t<th>Role</th>\n\t\t\t\t\t<th></th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr ng-repeat="org in ctrl.orgs">\n\t\t\t\t\t<td>{{org.name}}</td>\n\t\t\t\t\t<td>{{org.role}}</td>\n\t\t\t\t\t<td class="text-right">\n\t\t\t\t\t\t<span class="btn btn-primary btn-mini" ng-show="org.orgId === ctrl.currentOrgId">\n\t\t\t\t\t\t\tCurrent\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<a ng-click="ctrl.setUsingOrg(org)" class="btn btn-inverse btn-mini" ng-show="org.orgId !== ctrl.currentOrgId">\n\t\t\t\t\t\t\tSwitch to\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>',gt=function(){function e(e){this.backendSrv=e,this.currentOrgId=re.a.user.orgId,this.getUserOrgs()}return e.$inject=["backendSrv"],e.prototype.getUserOrgs=function(){var e=this;this.backendSrv.get("/api/user/orgs").then(function(t){e.orgs=t})},e.prototype.setUsingOrg=function(e){var t=this;return this.backendSrv.post("/api/user/using/"+e.orgId).then(function(){t.setWindowLocation(Q.a.appSubUrl+(Q.a.appSubUrl.endsWith("/")?"":"/")+"?orgId="+e.orgId)})},e.prototype.setWindowLocation=function(e){window.location.href=e},e}();s.c.directive("orgSwitcher",function(){return{restrict:"E",template:mt,controller:gt,bindToController:!0,controllerAs:"ctrl",scope:{dismiss:"&"}}});var vt=n(197),bt=n(69),yt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={options:[]},n}return be.c(t,e),t.prototype.componentDidMount=function(){this.setState({options:this.buildOptions(this.props)})},t.prototype.componentWillReceiveProps=function(e){(e.options.length>0||e.variables.length)&&this.setState({options:this.buildOptions(e)})},t.prototype.shouldComponentUpdate=function(e){var t=this.buildOptions(e);return e.value!==this.props.value||!r.a.isEqual(t,this.state.options)},t.prototype.buildOptions=function(e){var t=e.variables,n=void 0===t?[]:t,a=e.options;return n.length>0?[this.getVariablesGroup()].concat(a):a},t.prototype.getVariablesGroup=function(){return{label:"Template Variables",options:this.props.variables.map(function(e){return{label:"$"+e.name,value:"$"+e.name}})}},t.prototype.getSelectedOption=function(){var e=this,t=this.state.options;return(t.every(function(e){return e.options})?r.a.flatten(t.map(function(e){return e.options})):t).find(function(t){return t.value===e.props.value})},t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.className,a=e.isSearchable,r=e.onChange,i=this.state.options,o=this.getSelectedOption();return se.a.createElement(ve.Select,{className:n,isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:function(e){return r(e.value)},options:i,isSearchable:a,maxMenuHeight:500,placeholder:t,noOptionsMessage:function(){return"No options found"},value:o})},t.defaultProps={variables:[],options:[],isSearchable:!0},t}(se.a.Component),wt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={metricDescriptors:[],metrics:[],services:[],service:"",metric:"",metricDescriptor:null,defaultProject:""},n.onServiceChange=function(e){var t=n.state.metricDescriptors,a=n.props,r=a.templateSrv,i=a.metricType,o=t.filter(function(t){return t.service===r.replace(e)}).map(function(e){return{service:e.service,value:e.type,label:e.displayName,description:e.description}});n.setState({service:e,metrics:o}),o.length>0&&!o.some(function(e){return e.value===r.replace(i)})&&n.onMetricTypeChange(o[0].value)},n.onMetricTypeChange=function(e){var t=n.getSelectedMetricDescriptor(e);n.setState({metricDescriptor:t}),n.props.onChange(be.a({},t,{type:e}))},n}return be.c(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({defaultProject:this.props.defaultProject},function(){e.getCurrentProject().then(e.loadMetricDescriptors.bind(e)).then(e.initializeServiceAndMetrics.bind(e))})},t.prototype.getCurrentProject=function(){return be.b(this,void 0,void 0,function(){var e=this;return be.d(this,function(t){return[2,new Promise(function(t,n){return be.b(e,void 0,void 0,function(){var e,a;return be.d(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this.state.defaultProject&&"loading project..."!==this.state.defaultProject?[3,2]:[4,this.props.datasource.getDefaultProject()];case 1:e=r.sent(),this.setState({defaultProject:e}),r.label=2;case 2:return t(this.state.defaultProject),[3,4];case 3:return a=r.sent(),ye.b.emit("ds-request-error",a),n(),[3,4];case 4:return[2]}})})})]})})},t.prototype.loadMetricDescriptors=function(){return be.b(this,void 0,void 0,function(){var e;return be.d(this,function(t){switch(t.label){case 0:return"loading project..."===this.state.defaultProject?[3,2]:[4,this.props.datasource.getMetricTypes(this.state.defaultProject)];case 1:return e=t.sent(),this.setState({metricDescriptors:e}),[2,e];case 2:return[2,[]]}})})},t.prototype.initializeServiceAndMetrics=function(){return be.b(this,void 0,void 0,function(){var e,t,n,a,r;return be.d(this,function(i){return e=this.state.metricDescriptors,t=this.getServicesList(e),n=this.getMetricsList(e),a=n.length>0?n[0].service:"",r=this.getSelectedMetricDescriptor(this.props.metricType),this.setState({metricDescriptors:e,services:t,metrics:n,service:a,metricDescriptor:r}),[2]})})},t.prototype.getSelectedMetricDescriptor=function(e){var t=this;return this.state.metricDescriptors.find(function(n){return n.type===t.props.templateSrv.replace(e)})},t.prototype.getMetricsList=function(e){var t=this.getSelectedMetricDescriptor(this.props.metricType);return t?e.filter(function(e){return e.service===t.service}).map(function(e){return{service:e.service,value:e.type,label:e.displayName,description:e.description}}):[]},t.prototype.getServicesList=function(e){var t=e.map(function(e){return{value:e.service,label:r.a.startCase(e.serviceShortName)}});return t.length>0?r.a.uniqBy(t,function(e){return e.value}):[]},t.prototype.getTemplateVariablesGroup=function(){return{label:"Template Variables",options:this.props.templateSrv.variables.map(function(e){return{label:"$"+e.name,value:"$"+e.name}})}},t.prototype.render=function(){var e=this.state,t=e.services,n=e.service,a=e.metrics,r=this.props,i=r.metricType,o=r.templateSrv;return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"gf-form-inline"},se.a.createElement("div",{className:"gf-form"},se.a.createElement("span",{className:"gf-form-label width-9 query-keyword"},"Service"),se.a.createElement(yt,{onChange:this.onServiceChange,value:n,options:t,isSearchable:!1,placeholder:"Select Services",className:"width-15"})),se.a.createElement("div",{className:"gf-form gf-form--grow"},se.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),se.a.createElement("div",{className:"gf-form-inline"},se.a.createElement("div",{className:"gf-form"},se.a.createElement("span",{className:"gf-form-label width-9 query-keyword"},"Metric"),se.a.createElement(yt,{onChange:this.onMetricTypeChange,value:i,variables:o.variables,options:[{label:"Metrics",expanded:!0,options:a}],placeholder:"Select Metric",className:"width-15"})),se.a.createElement("div",{className:"gf-form gf-form--grow"},se.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),this.props.children(this.state.metricDescriptor))},t}(se.a.Component),xt=n(62),St=function(){function e(e,t,n,a){this.uiSegmentSrv=e,this.filters=t,this.getFilterKeysFunc=n,this.getFilterValuesFunc=a}return e.prototype.buildSegmentModel=function(){var e=this;this.removeSegment=this.uiSegmentSrv.newSegment({fake:!0,value:"-- remove filter --"}),this.filterSegments=[],this.filters.forEach(function(t,n){switch(n%4){case 0:e.filterSegments.push(e.uiSegmentSrv.newKey(t));break;case 1:e.filterSegments.push(e.uiSegmentSrv.newOperator(t));break;case 2:e.filterSegments.push(e.uiSegmentSrv.newKeyValue(t));break;case 3:e.filterSegments.push(e.uiSegmentSrv.newCondition(t))}}),this.ensurePlusButton(this.filterSegments)},e.prototype.getFilters=function(e,t,n){return be.b(this,void 0,void 0,function(){var a;return be.d(this,function(r){return"condition"===e.type?[2,[this.uiSegmentSrv.newSegment("AND")]]:"operator"===e.type?[2,this.uiSegmentSrv.newOperators(["=","!=","=~","!=~"])]:"key"===e.type||"plus-button"===e.type?n&&e.value&&"-- remove filter --"!==e.value?(this.removeSegment.value="-- remove filter --",[2,Promise.resolve([this.removeSegment])]):[2,this.getFilterKeysFunc(e,"-- remove filter --")]:"value"===e.type&&(a=this.getFilterValuesFunc(t)).length>0?[2,this.getValuesForFilterKey(a)]:[2,[]]})})},e.prototype.getValuesForFilterKey=function(e){var t=this;return e.map(function(e){return t.uiSegmentSrv.newSegment({value:""+e,expandable:!1})})},e.prototype.addNewFilterSegments=function(e,t){t>2&&this.filterSegments.splice(t,0,this.uiSegmentSrv.newCondition("AND")),e.type="key",this.filterSegments.push(this.uiSegmentSrv.newOperator("=")),this.filterSegments.push(this.uiSegmentSrv.newFake("select value","value","query-segment-value"))},e.prototype.removeFilterSegment=function(e){this.filterSegments.splice(e,3),e>2&&"condition"===this.filterSegments[e-1].type&&this.filterSegments.splice(e-1,1),0===e&&this.filterSegments.length>0&&"condition"===this.filterSegments[0].type&&this.filterSegments.splice(0,1)},e.prototype.ensurePlusButton=function(e){var t=e.length,n=e[Math.max(t-1,0)];n&&"plus-button"===n.type||e.push(this.uiSegmentSrv.newPlusButton())},e.prototype.filterSegmentUpdated=function(e,t){return"plus-button"===e.type?this.addNewFilterSegments(e,t):"key"===e.type&&"-- remove filter --"===e.value?(this.removeFilterSegment(t),this.ensurePlusButton(this.filterSegments)):"value"===e.type&&"select value"!==e.value&&this.ensurePlusButton(this.filterSegments),this.filterSegments.filter(function(e){return"plus-button"!==e.type}).map(function(e){return e.value})},e}(),kt=function(){return function(){return{templateUrl:"public/app/plugins/datasource/stackdriver/partials/query.filter.html",controller:"StackdriverFilterCtrl",controllerAs:"ctrl",bindToController:!0,restrict:"E",scope:{labelData:"<",loading:"<",groupBys:"<",filters:"<",filtersChanged:"&",groupBysChanged:"&",hideGroupBys:"<"}}}}(),Ct=function(){function e(e,t,n){this.$scope=e,this.uiSegmentSrv=t,this.templateSrv=n,this.defaultRemoveGroupByValue="-- remove group by --",this.resourceTypeValue="resource.type",this.$scope.ctrl=this,this.initSegments(this.hideGroupBys)}return e.$inject=["$scope","uiSegmentSrv","templateSrv"],e.prototype.initSegments=function(e){var t=this;e||(this.groupBySegments=this.groupBys.map(function(e){return t.uiSegmentSrv.getSegmentForValue(e)}),this.ensurePlusButton(this.groupBySegments)),this.removeSegment=this.uiSegmentSrv.newSegment({fake:!0,value:"-- remove group by --"}),this.filterSegments=new St(this.uiSegmentSrv,this.filters,this.getFilterKeys.bind(this),this.getFilterValues.bind(this)),this.filterSegments.buildSegmentModel()},e.prototype.createLabelKeyElements=function(){return be.b(this,void 0,void 0,function(){var e,t=this;return be.d(this,function(n){switch(n.label){case 0:return[4,this.loading];case 1:return n.sent(),e=(e=Object.keys(this.labelData.metricLabels||{}).map(function(e){return t.uiSegmentSrv.newSegment({value:"metric.label."+e,expandable:!1})})).concat(Object.keys(this.labelData.resourceLabels||{}).map(function(e){return t.uiSegmentSrv.newSegment({value:"resource.label."+e,expandable:!1})})),this.labelData.resourceTypes&&this.labelData.resourceTypes.length>0&&(e=e.concat([this.uiSegmentSrv.newSegment({value:this.resourceTypeValue,expandable:!1})])),[2,e]}})})},e.prototype.getFilterKeys=function(e,t){return be.b(this,void 0,void 0,function(){var n,a=this;return be.d(this,function(r){switch(r.label){case 0:return[4,this.createLabelKeyElements()];case 1:return n=r.sent(),-1!==this.filters.indexOf(this.resourceTypeValue)&&(n=n.filter(function(e){return e.value!==a.resourceTypeValue})),(!e||"plus-button"===e.type)&&0===n.length?[2,[]]:[2,"plus-button"===e.type?n:n.concat([this.uiSegmentSrv.newSegment({fake:!0,value:t||this.defaultRemoveGroupByValue})])]}})})},e.prototype.getGroupBys=function(e){return be.b(this,void 0,void 0,function(){var t,n=this;return be.d(this,function(a){switch(a.label){case 0:return[4,this.createLabelKeyElements()];case 1:return t=(t=a.sent()).filter(function(e){return-1===n.groupBys.indexOf(e.value)}),(!e||"plus-button"===e.type)&&0===t.length?[2,[]]:(this.removeSegment.value=this.defaultRemoveGroupByValue,[2,"plus-button"===e.type?t:t.concat([this.removeSegment])])}})})},e.prototype.groupByChanged=function(e,t){e.value===this.removeSegment.value?this.groupBySegments.splice(t,1):e.type="value";var n=this.groupBySegments.reduce(function(e,t){return t.fake||e.push(t.value),e},[]);this.groupBysChanged({groupBys:n}),this.ensurePlusButton(this.groupBySegments)},e.prototype.getFilters=function(e,t){return be.b(this,void 0,void 0,function(){var n;return be.d(this,function(a){switch(a.label){case 0:return[4,this.loading];case 1:return a.sent(),n=this.labelData.metricLabels&&0===Object.keys(this.labelData.metricLabels).length,[2,this.filterSegments.getFilters(e,t,n)]}})})},e.prototype.getFilterValues=function(e){var t=this.templateSrv.replace(this.filterSegments.filterSegments[e-2].value);if(!t||!this.labelData.metricLabels||0===Object.keys(this.labelData.metricLabels).length)return[];var n=t.substring(t.indexOf(".label.")+7);return t.startsWith("metric.label.")&&this.labelData.metricLabels.hasOwnProperty(n)?this.labelData.metricLabels[n]:t.startsWith("resource.label.")&&this.labelData.resourceLabels.hasOwnProperty(n)?this.labelData.resourceLabels[n]:t===this.resourceTypeValue?this.labelData.resourceTypes:[]},e.prototype.filterSegmentUpdated=function(e,t){var n=this.filterSegments.filterSegmentUpdated(e,t);n.some(function(e){return"select value"===e})||this.filtersChanged({filters:n})},e.prototype.ensurePlusButton=function(e){var t=e.length,n=e[Math.max(t-1,0)];n&&"plus-button"===n.type||e.push(this.uiSegmentSrv.newPlusButton())},e}();s.c.directive("stackdriverFilter",kt),s.c.controller("StackdriverFilterCtrl",Ct);var Et={metricLabels:{},resourceLabels:{},resourceTypes:[]},Tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be.c(t,e),t.prototype.componentDidMount=function(){return be.b(this,void 0,void 0,function(){var e,t,n,a,r,i,o,s,l=this;return be.d(this,function(c){return this.element?(e=this.props,t=e.groupBys,n=e.filters,a=e.hideGroupBys,r=Object(xt.a)(),i={loading:null,labelData:Et,groupBys:t,filters:n,filtersChanged:function(e){l.props.filtersChanged(e)},groupBysChanged:function(e){l.props.groupBysChanged(e)},hideGroupBys:a},o=this.loadLabels(i),i.loading=o,s='<stackdriver-filter\n                        filters="filters"\n                        group-bys="groupBys"\n                        label-data="labelData"\n                        loading="loading"\n                        filters-changed="filtersChanged(filters)"\n                        group-bys-changed="groupBysChanged(groupBys)"\n                        hide-group-bys="hideGroupBys"/>',this.component=r.load(this.element,i,s),[2]):[2]})})},t.prototype.componentDidUpdate=function(e){if(this.element){var t=this.component.getScope();e.metricType!==this.props.metricType&&(t.loading=this.loadLabels(t)),t.filters=this.props.filters,t.groupBys=this.props.groupBys}},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.loadLabels=function(e){return be.b(this,void 0,void 0,function(){var t=this;return be.d(this,function(n){return[2,new Promise(function(n){return be.b(t,void 0,void 0,function(){var t;return be.d(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),this.props.metricType?[3,1]:(e.labelData=Et,[3,3]);case 1:return[4,this.props.datasource.getLabels(this.props.metricType,this.props.refId)];case 2:t=a.sent().meta,e.labelData=t,a.label=3;case 3:return n(),[3,5];case 4:return a.sent(),ye.b.emit("alert-error",["Error","Error loading metric labels for "+this.props.metricType]),e.labelData=Et,n(),[3,5];case 5:return[2]}})})})]})})},t.prototype.render=function(){var e=this;return se.a.createElement("div",{ref:function(t){return e.element=t},style:{width:"100%"}})},t}(se.a.Component),Mt=n(83),_t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={aggOptions:[],displayAdvancedOptions:!1},t.onToggleDisplayAdvanced=function(){t.setState(function(e){return{displayAdvancedOptions:!e.displayAdvancedOptions}})},t}return be.c(t,e),t.prototype.componentDidMount=function(){this.setAggOptions(this.props)},t.prototype.componentWillReceiveProps=function(e){this.setAggOptions(e)},t.prototype.setAggOptions=function(e){var t=e.metricDescriptor,n=[];t&&(n=[{label:"Aggregations",expanded:!0,options:Object(Mt.b)(t.valueType,t.metricKind).map(function(e){return be.a({},e,{label:e.text})})}]),this.setState({aggOptions:n})},t.prototype.render=function(){var e=this.state,t=e.displayAdvancedOptions,n=e.aggOptions,a=this.props,r=a.templateSrv,i=a.onChange,o=a.crossSeriesReducer;return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"gf-form-inline"},se.a.createElement("div",{className:"gf-form"},se.a.createElement("label",{className:"gf-form-label query-keyword width-9"},"Aggregation"),se.a.createElement(yt,{onChange:i,value:o,variables:r.variables,options:n,placeholder:"Select Aggregation",className:"width-15"})),se.a.createElement("div",{className:"gf-form gf-form--grow"},se.a.createElement("label",{className:"gf-form-label gf-form-label--grow"},se.a.createElement("a",{onClick:this.onToggleDisplayAdvanced},se.a.createElement(se.a.Fragment,null,se.a.createElement("i",{className:"fa fa-caret-"+(t?"down":"right")})," Advanced Options"))))),this.props.children(this.state.displayAdvancedOptions))},t}(se.a.Component),At=function(e){var t=e.perSeriesAligner,n=e.templateSrv,a=e.onChange,r=e.alignOptions;return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"gf-form-group"},se.a.createElement("div",{className:"gf-form offset-width-9"},se.a.createElement("label",{className:"gf-form-label query-keyword width-15"},"Aligner"),se.a.createElement(yt,{onChange:a,value:t,variables:n.variables,options:r,placeholder:"Select Alignment",className:"width-15"}))))},Dt=n(119),Nt=function(e){var t=e.alignmentPeriod,n=e.templateSrv,a=e.onChange,r=e.perSeriesAligner,i=e.usedAlignmentPeriod,o=Dt.b.find(function(e){return e.value===n.replace(r)}),s=v.a.secondsToHms(i)+" interval ("+(o?o.text:"")+")";return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"gf-form-inline"},se.a.createElement("div",{className:"gf-form"},se.a.createElement("label",{className:"gf-form-label query-keyword width-9"},"Alignment Period"),se.a.createElement(yt,{onChange:a,value:t,variables:n.variables,options:[{label:"Alignment options",expanded:!0,options:Dt.c.map(function(e){return be.a({},e,{label:e.text})})}],placeholder:"Select Alignment",className:"width-15"})),se.a.createElement("div",{className:"gf-form gf-form--grow"},i&&se.a.createElement("label",{className:"gf-form-label gf-form-label--grow"},s))))},Pt=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){n.setState({value:e.target.value}),n.propagateOnChange(e.target.value)},n.propagateOnChange=Object(a.debounce)(n.props.onChange,500),n.state={value:""},n}return be.c(t,e),t.prototype.componentDidMount=function(){this.setState({value:this.props.value})},t.prototype.componentWillReceiveProps=function(e){e.value!==this.props.value&&this.setState({value:e.value})},t.prototype.render=function(){return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"gf-form-inline"},se.a.createElement("div",{className:"gf-form"},se.a.createElement("label",{className:"gf-form-label query-keyword width-9"},"Alias By"),se.a.createElement("input",{type:"text",className:"gf-form-input width-24",value:this.state.value,onChange:this.onChange})),se.a.createElement("div",{className:"gf-form gf-form--grow"},se.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))))},t}(oe.Component),Ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={projectName:"Loading project..."},t}return be.c(t,e),t.prototype.componentDidMount=function(){return be.b(this,void 0,void 0,function(){var e;return be.d(this,function(t){switch(t.label){case 0:return[4,this.props.datasource.getDefaultProject()];case 1:return e=t.sent(),this.setState({projectName:e}),[2]}})})},t.prototype.render=function(){var e=this.state.projectName;return se.a.createElement("div",{className:"gf-form"},se.a.createElement("span",{className:"gf-form-label width-9 query-keyword"},"Project"),se.a.createElement("input",{className:"gf-form-input width-15",disabled:!0,type:"text",value:e}))},t}(se.a.Component),It=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={displayHelp:!1,displaRawQuery:!1},t.onHelpClicked=function(){t.setState({displayHelp:!t.state.displayHelp})},t.onRawQueryClicked=function(){t.setState({displaRawQuery:!t.state.displaRawQuery})},t}return be.c(t,e),t.prototype.shouldComponentUpdate=function(e){return null!==e.metricDescriptor},t.prototype.render=function(){var e=this.state,t=e.displayHelp,n=e.displaRawQuery,a=this.props,r=a.datasource,i=a.rawQuery,o=a.lastQueryError;return se.a.createElement(se.a.Fragment,null,se.a.createElement("div",{className:"gf-form-inline"},se.a.createElement(Ot,{datasource:r}),se.a.createElement("div",{className:"gf-form",onClick:this.onHelpClicked},se.a.createElement("label",{className:"gf-form-label query-keyword pointer"},"Show Help ",se.a.createElement("i",{className:"fa fa-caret-"+(t?"down":"right")}))),i&&se.a.createElement("div",{className:"gf-form",onClick:this.onRawQueryClicked},se.a.createElement("label",{className:"gf-form-label query-keyword"},"Raw Query ",se.a.createElement("i",{className:"fa fa-caret-"+(n?"down":"right"),"ng-show":"ctrl.showHelp"}))),se.a.createElement("div",{className:"gf-form gf-form--grow"},se.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),i&&n&&se.a.createElement("div",{className:"gf-form"},se.a.createElement("pre",{className:"gf-form-pre"},i)),t&&se.a.createElement("div",{className:"gf-form grafana-info-box",style:{padding:0}},se.a.createElement("pre",{className:"gf-form-pre alert alert-info",style:{marginRight:0}},se.a.createElement("h5",null,"Alias Patterns"),"Format the legend keys any way you want by using alias patterns. Format the legend keys any way you want by using alias patterns.",se.a.createElement("br",null)," ",se.a.createElement("br",null),"Example:",se.a.createElement("code",null,"{{metricDescriptor.name}} - {{metricDescriptor.label.instance_name}}"),se.a.createElement("br",null),"Result:   ",se.a.createElement("code",null,"cpu/usage_time - server1-europe-west-1"),se.a.createElement("br",null),se.a.createElement("br",null),se.a.createElement("strong",null,"Patterns"),se.a.createElement("br",null),se.a.createElement("ul",null,se.a.createElement("li",null,se.a.createElement("code",null,"{{metricDescriptor.type}}")," = metric type e.g. compute.googleapis.com/instance/cpu/usage_time"),se.a.createElement("li",null,se.a.createElement("code",null,"{{metricDescriptor.name}}")," = name part of metric e.g. instance/cpu/usage_time"),se.a.createElement("li",null,se.a.createElement("code",null,"{{metricDescriptor.service}}")," = service part of metric e.g. compute"),se.a.createElement("li",null,se.a.createElement("code",null,"{{metricDescriptor.label.label_name}}")," = Metric label metadata e.g. metricDescriptor.label.instance_name"),se.a.createElement("li",null,se.a.createElement("code",null,"{{resource.label.label_name}}")," = Resource label metadata e.g. resource.label.zone"),se.a.createElement("li",null,se.a.createElement("code",null,"{{bucket}}")," = bucket boundary for distribution metrics when using a heatmap in Grafana")))),o&&se.a.createElement("div",{className:"gf-form"},se.a.createElement("pre",{className:"gf-form-pre alert alert-error"},o)))},t}(se.a.Component),$t={defaultProject:"loading project...",metricType:"",metricKind:"",valueType:"",refId:"",service:"",unit:"",crossSeriesReducer:"REDUCE_MEAN",alignmentPeriod:"stackdriver-auto",perSeriesAligner:"ALIGN_MEAN",groupBys:[],filters:[],aliasBy:"",alignOptions:[],lastQuery:"",lastQueryError:"",usedAlignmentPeriod:""},Ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=$t,t.onMetricTypeChange=function(e){var n=e.valueType,a=e.metricKind,r=e.type,i=e.unit,o=t.props,s=o.templateSrv,l=o.onQueryChange,c=o.onExecuteQuery,u=Object(Mt.d)({valueType:n,metricKind:a,perSeriesAligner:t.state.perSeriesAligner},s),d=u.perSeriesAligner,p=u.alignOptions;t.setState({alignOptions:p,perSeriesAligner:d,metricType:r,unit:i,valueType:n,metricKind:a},function(){l(t.state),c()})},t}return be.c(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.events,n=e.target,a=e.templateSrv;t.on("data-received",this.onDataReceived.bind(this)),t.on("data-error",this.onDataError.bind(this));var r=Object(Mt.d)(n,a),i=r.perSeriesAligner,o=r.alignOptions;this.setState(be.a({},this.props.target,{alignOptions:o,perSeriesAligner:i}))},t.prototype.componentWillUnmount=function(){this.props.events.off("data-received",this.onDataReceived),this.props.events.off("data-error",this.onDataError)},t.prototype.onDataReceived=function(e){var t=this,n=e.find(function(e){return e.refId===t.props.target.refId});n&&this.setState({lastQuery:decodeURIComponent(n.meta.rawQuery),lastQueryError:"",usedAlignmentPeriod:n.meta.alignmentPeriod})},t.prototype.onDataError=function(e){var t,n;if(e.data&&e.data.error)n=this.props.datasource.formatStackdriverError(e);else if(e.data&&e.data.results){var a=e.data.results[this.props.target.refId];if(t=decodeURIComponent(a.meta.rawQuery),a&&a.error)try{n=JSON.parse(a.error).error.message}catch(e){n=a.error}}this.setState({lastQuery:t,lastQueryError:n})},t.prototype.onPropertyChange=function(e,t){var n,a=this;this.setState(((n={})[e]=t,n),function(){a.props.onQueryChange(a.state),a.props.onExecuteQuery()})},t.prototype.render=function(){var e=this,t=this.state,n=t.usedAlignmentPeriod,a=t.defaultProject,r=t.metricType,i=t.crossSeriesReducer,o=t.groupBys,s=t.filters,l=t.perSeriesAligner,c=t.alignOptions,u=t.alignmentPeriod,d=t.aliasBy,p=t.lastQuery,h=t.lastQueryError,f=t.refId,m=this.props,g=m.datasource,v=m.templateSrv;return se.a.createElement(se.a.Fragment,null,se.a.createElement(wt,{defaultProject:a,metricType:r,templateSrv:v,datasource:g,onChange:this.onMetricTypeChange},function(t){return se.a.createElement(se.a.Fragment,null,se.a.createElement(Tt,{filtersChanged:function(t){return e.onPropertyChange("filters",t)},groupBysChanged:function(t){return e.onPropertyChange("groupBys",t)},filters:s,groupBys:o,refId:f,hideGroupBys:!1,templateSrv:v,datasource:g,metricType:t?t.type:""}),se.a.createElement(_t,{metricDescriptor:t,templateSrv:v,crossSeriesReducer:i,groupBys:o,onChange:function(t){return e.onPropertyChange("crossSeriesReducer",t)}},function(t){return t&&se.a.createElement(At,{alignOptions:c,templateSrv:v,perSeriesAligner:l,onChange:function(t){return e.onPropertyChange("perSeriesAligner",t)}})}),se.a.createElement(Nt,{templateSrv:v,alignmentPeriod:u,perSeriesAligner:l,usedAlignmentPeriod:n,onChange:function(t){return e.onPropertyChange("alignmentPeriod",t)}}),se.a.createElement(Pt,{value:d,onChange:function(t){return e.onPropertyChange("aliasBy",t)}}),se.a.createElement(It,{datasource:g,rawQuery:p,lastQueryError:h}))}))},t}(se.a.Component),qt=function(){return se.a.createElement("div",{className:"gf-form grafana-info-box",style:{padding:0}},se.a.createElement("pre",{className:"gf-form-pre alert alert-info",style:{marginRight:0}},se.a.createElement("h5",null,"Annotation Query Format"),se.a.createElement("p",null,"An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is important to limit the number of rows returned."," "),se.a.createElement("p",null,"The Title and Text fields support templating and can use data returned from the query. For example, the Title field could have the following text:"),se.a.createElement("code",null,"{{metric.type}}"," has value: ","{{metric.value}}"),se.a.createElement("p",null,"Example Result: ",se.a.createElement("code",null,"monitoring.googleapis.com/uptime_check/http_status has this value: 502")),se.a.createElement("label",null,"Patterns:"),se.a.createElement("p",null,se.a.createElement("code",null,"{{metric.value}}")," = value of the metric/point"),se.a.createElement("p",null,se.a.createElement("code",null,"{{metric.type}}")," = metric type e.g. compute.googleapis.com/instance/cpu/usage_time"),se.a.createElement("p",null,se.a.createElement("code",null,"{{metric.name}}")," = name part of metric e.g. instance/cpu/usage_time"),se.a.createElement("p",null,se.a.createElement("code",null,"{{metric.service}}")," = service part of metric e.g. compute"),se.a.createElement("p",null,se.a.createElement("code",null,"{{metric.label.label_name}}")," = Metric label metadata e.g. metric.label.instance_name"),se.a.createElement("p",null,se.a.createElement("code",null,"{{resource.label.label_name}}")," = Resource label metadata e.g. resource.label.zone")))},Rt={defaultProject:"loading project...",metricType:"",filters:[],metricKind:"",valueType:"",refId:"annotationQuery",title:"",text:""},Lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=Rt,t.onMetricTypeChange=function(e){var n=e.valueType,a=e.metricKind,r=e.type,i=e.unit,o=t.props.onQueryChange;t.setState({metricType:r,unit:i,valueType:n,metricKind:a},function(){o(t.state)})},t}return be.c(t,e),t.prototype.componentDidMount=function(){this.setState(be.a({},this.props.target))},t.prototype.onChange=function(e,t){var n,a=this;this.setState(((n={})[e]=t,n),function(){a.props.onQueryChange(a.state)})},t.prototype.render=function(){var e=this,t=this.state,n=t.defaultProject,a=t.metricType,r=t.filters,i=t.refId,o=t.title,s=t.text,l=this.props,c=l.datasource,u=l.templateSrv;return se.a.createElement(se.a.Fragment,null,se.a.createElement(wt,{defaultProject:n,metricType:a,templateSrv:u,datasource:c,onChange:this.onMetricTypeChange},function(t){return se.a.createElement(se.a.Fragment,null,se.a.createElement(Tt,{filtersChanged:function(t){return e.onChange("filters",t)},filters:r,refId:i,hideGroupBys:!0,templateSrv:u,datasource:c,metricType:t?t.type:""}))}),se.a.createElement("div",{className:"gf-form gf-form-inline"},se.a.createElement("div",{className:"gf-form"},se.a.createElement("span",{className:"gf-form-label query-keyword width-9"},"Title"),se.a.createElement("input",{type:"text",className:"gf-form-input width-20",value:o,onChange:function(t){return e.onChange("title",t.target.value)}})),se.a.createElement("div",{className:"gf-form"},se.a.createElement("span",{className:"gf-form-label query-keyword width-9"},"Text"),se.a.createElement("input",{type:"text",className:"gf-form-input width-20",value:s,onChange:function(t){return e.onChange("text",t.target.value)}})),se.a.createElement("div",{className:"gf-form gf-form--grow"},se.a.createElement("div",{className:"gf-form-label gf-form-label--grow"}))),se.a.createElement(qt,null))},t}(se.a.Component),jt=function(e){function t(t){return e.call(this,t)||this}return be.c(t,e),t.prototype.render=function(){var e=this.props.password,t="strength: strong like a bull.",n="password-strength-good";return e?(e.length<=8&&(t="strength: you can do better.",n="password-strength-ok"),e.length<4&&(t="strength: weak sauce.",n="password-strength-bad"),se.a.createElement("div",{className:"password-strength small "+n},se.a.createElement("em",null,t))):null},t}(se.a.Component),Ut=n(223),Vt=n(131),Bt=n(13),Qt=n.n(Bt),zt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={search:""},n}return be.c(t,e),t.prototype.render=function(){return this.state.search.sections.map(function(e){return se.a.createElement(Ht,{section:e,key:e.id})})},t}(se.a.Component),Ht=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleSection=function(){n.props.section.toggle()},n}return be.c(t,e),t.prototype.renderItem=function(e){return se.a.createElement("a",{className:"search-item",href:e.url,key:e.id},se.a.createElement("span",{className:"search-item__icon"},se.a.createElement("i",{className:"fa fa-th-large"})),se.a.createElement("span",{className:"search-item__body"},se.a.createElement("div",{className:"search-item__body-title"},e.title)))},t.prototype.render=function(){var e=Qt()({fa:!0,"fa-plus":!this.props.section.expanded,"fa-minus":this.props.section.expanded,"search-section__header__toggle":!0});return se.a.createElement("div",{className:"search-section",key:this.props.section.id},se.a.createElement("div",{className:"search-section__header"},se.a.createElement("i",{className:Qt()("search-section__header__icon",this.props.section.icon)}),se.a.createElement("span",{className:"search-section__header__text"},this.props.section.title),se.a.createElement("i",{className:e,onClick:this.toggleSection})),this.props.section.expanded&&se.a.createElement("div",{className:"search-section__items"},this.props.section.items.map(this.renderItem)))},t}(se.a.Component),Gt=n(274),Wt=n.n(Gt),Yt=n(84),Kt=n(201),Xt=function(e){var t=e.data,n=e.className,a=e.label;return se.a.createElement(Yt.a.Option,be.a({},e),se.a.createElement("div",{className:"tag-filter-option btn btn-link "+(n||"")},se.a.createElement(Kt.a,{label:a,removeIcon:!1,count:t.count})))},Jt=n(75),Zt=function(e){function t(t){var n=e.call(this,t)||this;return n.onLoadOptions=function(e){return n.props.tagOptions().then(function(e){return e.map(function(e){return{value:e.term,label:e.term,count:e.count}})})},n.onChange=function(e){n.props.onChange(e.map(function(e){return e.value}))},n}return be.c(t,e),t.prototype.render=function(){var e=this.props.tags.map(function(e){return{value:e,label:e,count:0}}),t={classNamePrefix:"gf-form-select-box",isMulti:!0,defaultOptions:!0,loadOptions:this.onLoadOptions,onChange:this.onChange,className:"gf-form-input gf-form-input--form-dropdown",placeholder:"Tags",loadingMessage:function(){return"Loading..."},noOptionsMessage:function(){return"No tags found"},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},value:e,styles:Object(ve.resetSelectStyles)(),filterOption:function(e,t){return RegExp(Object(Jt.b)(t),"i").test(e.value)},components:{Option:Xt,IndicatorsContainer:ve.IndicatorsContainer,NoOptionsMessage:ve.NoOptionsMessage,MultiValueLabel:function(){return null},MultiValueRemove:function(e){var t=e.data;return se.a.createElement(Yt.a.MultiValueRemove,be.a({},e),se.a.createElement(Kt.a,{key:t.label,label:t.label,removeIcon:!0,count:t.count}))}}};return se.a.createElement("div",{className:"gf-form gf-form--has-input-icon gf-form--grow"},se.a.createElement("div",{className:"tag-filter"},se.a.createElement(Wt.a,be.a({},t))),se.a.createElement("i",{className:"gf-form-input-icon fa fa-tag"}))},t}(se.a.Component),en=function(e){var t=e.child,n=t.divider?"divider":"";return se.a.createElement("li",{className:n},se.a.createElement("a",{href:t.url},t.icon&&se.a.createElement("i",{className:t.icon}),t.text))},tn=function(e){var t=e.link;return se.a.createElement("ul",{className:"dropdown-menu dropdown-menu--sidemenu",role:"menu"},se.a.createElement("li",{className:"side-menu-header"},se.a.createElement("a",{className:"side-menu-header-link",href:t.url},se.a.createElement("span",{className:"sidemenu-item-text"},t.text))),t.children&&t.children.map(function(e,t){return se.a.createElement(en,{child:e,key:e.url+"-"+t})}))},nn=function(e){var t=e.link;return se.a.createElement("div",{className:"sidemenu-item dropdown"},se.a.createElement("a",{className:"sidemenu-link",href:t.url,target:t.target},se.a.createElement("span",{className:"icon-circle sidemenu-icon"},se.a.createElement("i",{className:t.icon}),t.img&&se.a.createElement("img",{src:t.img}))),se.a.createElement(tn,{link:t}))},an=function(){var e=r.a.cloneDeep(Q.a.bootData.navTree),t=r.a.filter(e,function(e){return!e.hideFromMenu});return se.a.createElement("div",{className:"sidemenu__top"},t.map(function(e,t){return se.a.createElement(nn,{link:e,key:e.id+"-"+t})}))},rn=function(){var e="login?redirect="+encodeURIComponent(window.location.pathname);return se.a.createElement("div",{className:"sidemenu-item"},se.a.createElement("a",{href:e,className:"sidemenu-link",target:"_self"},se.a.createElement("span",{className:"icon-circle sidemenu-icon"},se.a.createElement("i",{className:"fa fa-fw fa-sign-in"}))),se.a.createElement("a",{href:e,target:"_self"},se.a.createElement("ul",{className:"dropdown-menu dropdown-menu--sidemenu",role:"menu"},se.a.createElement("li",{className:"side-menu-header"},se.a.createElement("span",{className:"sidemenu-item-text"},"Sign In")))))},on=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemClicked=function(e,t){"/shortcuts"===t.url&&(e.preventDefault(),ye.b.emit("show-modal",{templateHtml:"<help-modal></help-modal>"}))},t.switchOrg=function(){ye.b.emit("show-modal",{templateHtml:'<org-switcher dismiss="dismiss()"></org-switcher>'})},t}return be.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.link,a=t.user;return se.a.createElement("div",{className:"sidemenu-item dropdown dropup"},se.a.createElement("a",{href:n.url,className:"sidemenu-link",target:n.target},se.a.createElement("span",{className:"icon-circle sidemenu-icon"},n.icon&&se.a.createElement("i",{className:n.icon}),n.img&&se.a.createElement("img",{src:n.img}))),se.a.createElement("ul",{className:"dropdown-menu dropdown-menu--sidemenu",role:"menu"},n.subTitle&&se.a.createElement("li",{className:"sidemenu-subtitle"},se.a.createElement("span",{className:"sidemenu-item-text"},n.subTitle)),n.showOrgSwitcher&&se.a.createElement("li",{className:"sidemenu-org-switcher"},se.a.createElement("a",{onClick:this.switchOrg},se.a.createElement("div",null,se.a.createElement("div",{className:"sidemenu-org-switcher__org-name"},a.orgName),se.a.createElement("div",{className:"sidemenu-org-switcher__org-current"},"Current Org:")),se.a.createElement("div",{className:"sidemenu-org-switcher__switch"},se.a.createElement("i",{className:"fa fa-fw fa-random"}),"Switch"))),n.children&&n.children.map(function(t,n){return t.hideFromMenu?null:se.a.createElement("li",{className:t.divider,key:t.text+"-"+n},se.a.createElement("a",{href:t.url,target:t.target,onClick:function(n){return e.itemClicked(n,t)}},t.icon&&se.a.createElement("i",{className:t.icon}),t.text))}),se.a.createElement("li",{className:"side-menu-header"},se.a.createElement("span",{className:"sidemenu-item-text"},n.text))))},t}(oe.PureComponent);function sn(){var e=r.a.cloneDeep(Q.a.bootData.navTree),t=r.a.filter(e,function(e){return e.hideFromMenu}),n=re.a.isSignedIn,a=re.a.user;if(a&&a.orgCount>1){var i=r.a.find(t,{id:"profile"});i&&(i.showOrgSwitcher=!0)}return se.a.createElement("div",{className:"sidemenu__bottom"},!n&&se.a.createElement(rn,null),t.map(function(e,t){return se.a.createElement(on,{link:e,user:a,key:e.url+"-"+t})}))}var ln=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleSideMenu=function(){(new Date).getTime()-et.b.getState().location.lastUpdated<1e3||(re.a.toggleSideMenu(),ye.b.emit("toggle-sidemenu"))},t.toggleSideMenuSmallBreakpoint=function(){ye.b.emit("toggle-sidemenu-mobile")},t}return be.c(t,e),t.prototype.render=function(){return[se.a.createElement("div",{className:"sidemenu__logo",onClick:this.toggleSideMenu,key:"logo"},se.a.createElement("img",{src:"public/img/grafana_icon.svg",alt:"Grafana"})),se.a.createElement("div",{className:"sidemenu__logo_small_breakpoint",onClick:this.toggleSideMenuSmallBreakpoint,key:"hamburger"},se.a.createElement("i",{className:"fa fa-bars"}),se.a.createElement("span",{className:"sidemenu__close"},se.a.createElement("i",{className:"fa fa-times"})," Close")),se.a.createElement(an,{key:"topsection"}),se.a.createElement(sn,{key:"bottomsection"})]},t}(oe.PureComponent),cn=n(279),un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be.c(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.appNotification.id!==e.appNotification.id},t.prototype.componentDidMount=function(){var e=this.props,t=e.appNotification,n=e.onClearNotification;setTimeout(function(){n(t.id)},t.timeout)},t.prototype.render=function(){var e=this.props,t=e.appNotification,n=e.onClearNotification;return se.a.createElement(cn.a,{severity:t.severity,title:t.title,text:t.text,icon:t.icon,onClose:function(){return n(t.id)}})},t}(oe.Component),dn=n(202),pn=n(120),hn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClearAppNotification=function(e){t.props.clearAppNotification(e)},t}return be.c(t,e),t.prototype.componentDidMount=function(){var e=this.props.notifyApp;ye.b.on("alert-warning",function(t){return e(Object(pn.c)(t[0],t[1]))}),ye.b.on("alert-success",function(t){return e(Object(pn.b)(t[0],t[1]))}),ye.b.on("alert-error",function(t){return e(Object(pn.a)(t[0],t[1]))})},t.prototype.render=function(){var e=this,t=this.props.appNotifications;return se.a.createElement("div",null,t.map(function(t,n){return se.a.createElement(un,{key:t.id+"-"+n,appNotification:t,onClearNotification:function(t){return e.onClearAppNotification(t)}})}))},t}(oe.PureComponent),fn={notifyApp:nt.b,clearAppNotification:nt.a},mn=Object(dn.a)(hn,function(e){return{appNotifications:e.appNotifications.appNotifications}},fn),gn=n(281),vn=n.n(gn),bn=function(e){return e.description?se.a.createElement("span",{className:"pointer fa fa-question-circle",onClick:e.onDescriptionShow}):se.a.createElement("span",{className:"pointer fa fa-question-circle",onClick:function(){window.open("http://graphite.readthedocs.org/en/latest/functions.html#graphite.render.functions."+e.name,"_blank")}})},yn=function(e){var t=e.func,n=e.onMoveLeft,a=e.onMoveRight,r=e.onRemove,i=e.onDescriptionShow;return se.a.createElement("div",{style:{display:"flex",width:"60px",justifyContent:"space-between"}},se.a.createElement("span",{className:"pointer fa fa-arrow-left",onClick:function(){return n(t)}}),se.a.createElement(bn,{name:t.def.name,description:t.def.description,onDescriptionShow:i}),se.a.createElement("span",{className:"pointer fa fa-remove",onClick:function(){return r(t)}}),se.a.createElement("span",{className:"pointer fa fa-arrow-right",onClick:function(){return a(t)}}))},wn=function(e){function t(t){var n=e.call(this,t)||this;return n.triggerRef=se.a.createRef(),n.renderContent=function(e){var t=e.updatePopperPosition,a=n.props,r=a.onMoveLeft,i=a.onMoveRight,o=a.func.def,s=o.name,l=o.description;return n.state.showingDescription?se.a.createElement("div",{style:{overflow:"auto",maxHeight:"30rem",textAlign:"left",fontWeight:"normal"}},se.a.createElement("h4",{style:{color:"white"}}," ",s," "),se.a.createElement("div",{dangerouslySetInnerHTML:{__html:vn()(l)}})):se.a.createElement(yn,be.a({},n.props,{onMoveLeft:function(){r(n.props.func),t()},onMoveRight:function(){i(n.props.func),t()},onDescriptionShow:function(){n.setState({showingDescription:!0},function(){t()})}}))},n.state={showingDescription:!1},n}return be.c(t,e),t.prototype.render=function(){var e=this;return se.a.createElement(ve.PopperController,{content:this.renderContent,placement:"top",hideAfter:300},function(t,n,a){return se.a.createElement(se.a.Fragment,null,e.triggerRef&&se.a.createElement(ve.Popper,be.a({},a,{referenceElement:e.triggerRef.current,wrapperClassName:"popper",className:"popper__background",onMouseLeave:function(){e.setState({showingDescription:!1}),n()},onMouseEnter:t,renderArrow:function(e){var t=e.arrowProps,n=e.placement;return se.a.createElement("div",be.a({className:"popper__arrow","data-placement":n},t))}})),se.a.createElement("span",{ref:e.triggerRef,onClick:a.show?n:t,onMouseLeave:function(){n(),e.setState({showingDescription:!1})},style:{cursor:"pointer"}},e.props.func.def.name))})},t}(se.a.PureComponent);function xn(){Object(bt.a)("passwordStrength",jt,["password"]),Object(bt.a)("sidemenu",ln,[]),Object(bt.a)("functionEditor",wn,["func","onRemove","onMoveLeft","onMoveRight"]),Object(bt.a)("appNotificationsList",mn,[]),Object(bt.a)("pageHeader",Ut.a,["model","noTabs"]),Object(bt.a)("emptyListCta",Vt.a,["model"]),Object(bt.a)("searchResult",zt,[]),Object(bt.a)("tagFilter",Zt,["tags",["onChange",{watchDepth:"reference"}],["tagOptions",{watchDepth:"reference"}]]),Object(bt.a)("colorPicker",ve.ColorPicker,["color",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Object(bt.a)("seriesColorPickerPopover",ve.SeriesColorPickerPopoverWithTheme,["color","series","onColorChange","onToggleAxis"]),Object(bt.a)("metricSelect",yt,["options","onChange","value","isSearchable","className","placeholder",["variables",{watchDepth:"reference"}]]),Object(bt.a)("stackdriverQueryEditor",Ft,["target","onQueryChange","onExecuteQuery",["events",{watchDepth:"reference"}],["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),Object(bt.a)("stackdriverAnnotationQueryEditor",Lt,["target","onQueryChange","onExecuteQuery",["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]])}var Sn=n(78),kn=function(){function e(e){this.$location=e}return e.$inject=["$location"],e.prototype.toggleFolderExpand=function(e){var t=this;e.toggle&&(!e.expanded&&this.onFolderExpanding&&this.onFolderExpanding(),e.toggle(e).then(function(e){t.editable&&e.expanded&&e.items&&(r.a.each(e.items,function(t){t.checked=e.checked}),t.onSelectionChanged&&t.onSelectionChanged())}))},e.prototype.navigateToFolder=function(e,t){this.$location.path(e.url),t&&(t.stopPropagation(),t.preventDefault())},e.prototype.toggleSelection=function(e,t){e.checked=!e.checked,e.items&&r.a.each(e.items,function(t){t.checked=e.checked}),this.onSelectionChanged&&this.onSelectionChanged(),t&&(t.stopPropagation(),t.preventDefault())},e.prototype.onItemClick=function(e){(this.$location.path().indexOf(e.url)>-1||e.url.indexOf(this.$location.path())>-1)&&ye.b.emit("hide-dash-search")},e.prototype.selectTag=function(e,t){this.onTagSelected&&this.onTagSelected({$tag:e}),t&&(t.stopPropagation(),t.preventDefault())},e}();s.c.directive("dashboardSearchResults",function(){return{restrict:"E",templateUrl:"public/app/core/components/search/search_results.html",controller:kn,bindToController:!0,controllerAs:"ctrl",scope:{editable:"@",results:"=",onSelectionChanged:"&",onTagSelected:"&",onFolderExpanding:"&"}}});var Cn=function(){function e(e,t,n,a){var r=this;this.backendSrv=e,this.searchSrv=n,this.contextSrv=a,this.selectAllChecked=!1,this.canDelete=!1,this.canMove=!1,this.hasFilters=!1,this.starredFilterOptions=[{text:"Filter by Starred",disabled:!0},{text:"Yes"},{text:"No"}],this.canSave=!1,this.isEditor=this.contextSrv.isEditor,this.hasEditPermissionInFolders=this.contextSrv.hasEditPermissionInFolders,this.query={query:"",mode:"tree",tag:[],starred:!1,skipRecent:!0,skipStarred:!0,folderIds:[]},this.folderId&&(this.query.folderIds=[this.folderId]),this.selectedStarredFilter=this.starredFilterOptions[0],this.refreshList().then(function(){r.initTagFilter()})}return e.$inject=["backendSrv","navModelSrv","searchSrv","contextSrv"],e.prototype.refreshList=function(){var e=this;return this.searchSrv.search(this.query).then(function(t){return e.initDashboardList(t)}).then(function(){if(e.folderUid)return e.backendSrv.getFolderByUid(e.folderUid).then(function(t){e.canSave=t.canSave,e.canSave||(e.hasEditPermissionInFolders=!1)})})},e.prototype.initDashboardList=function(e){if(this.canMove=!1,this.canDelete=!1,this.selectAllChecked=!1,this.hasFilters=this.query.query.length>0||this.query.tag.length>0||this.query.starred,e){this.sections=e;for(var t=0,n=this.sections;t<n.length;t++){var a=n[t];a.checked=!1;for(var r=0,i=a.items;r<i.length;r++){i[r].checked=!1}}this.folderId&&this.sections.length>0&&(this.sections[0].hideHeader=!0)}else this.sections=[]},e.prototype.selectionChanged=function(){for(var e=0,t=0,n=this.sections;t<n.length;t++){var a=n[t];e+=r.a.filter(a.items,{checked:!0}).length}var i=r.a.filter(this.sections,{checked:!0}).length;this.canMove=e>0,this.canDelete=e>0||i>0},e.prototype.getFoldersAndDashboardsToDelete=function(){for(var e,t={folders:[],dashboards:[]},n=0,a=this.sections;n<a.length;n++){var i=a[n];if(i.checked&&0!==i.id)t.folders.push(i.uid);else{var o=r.a.filter(i.items,{checked:!0});(e=t.dashboards).push.apply(e,r.a.map(o,"uid"))}}return t},e.prototype.getFolderIds=function(e){for(var t=[],n=0,a=e;n<a.length;n++){var r=a[n];r.checked&&t.push(r.id)}return t},e.prototype.delete=function(){var e,t=this,n=this.getFoldersAndDashboardsToDelete(),a=n.folders.length,r=n.dashboards.length,i="Do you want to delete the ";a>0&&r>0?(i+="selected folder"+(1===a?"":"s")+" and dashboard"+(1===r?"":"s")+"?",e="All dashboards of the selected folder"+(1===a?"":"s")+" will also be deleted"):i+=a>0?"selected folder"+(1===a?"":"s")+" and all its dashboards?":"selected dashboard"+(1===r?"":"s")+"?",ye.b.emit("confirm-modal",{title:"Delete",text:i,text2:e,icon:"fa-trash",yesText:"Delete",onConfirm:function(){t.deleteFoldersAndDashboards(n.folders,n.dashboards)}})},e.prototype.deleteFoldersAndDashboards=function(e,t){var n=this;this.backendSrv.deleteFoldersAndDashboards(e,t).then(function(){n.refreshList()})},e.prototype.getDashboardsToMove=function(){for(var e=[],t=0,n=this.sections;t<n.length;t++){var a=n[t],i=r.a.filter(a.items,{checked:!0});e.push.apply(e,r.a.map(i,"uid"))}return e},e.prototype.moveTo=function(){var e=this.getDashboardsToMove();ye.b.emit("show-modal",{templateHtml:'<move-to-folder-modal dismiss="dismiss()" dashboards="model.dashboards" after-save="model.afterSave()"></move-to-folder-modal>',modalClass:"modal--narrow",model:{dashboards:e,afterSave:this.refreshList.bind(this)}})},e.prototype.initTagFilter=function(){var e=this;return this.searchSrv.getDashboardTags().then(function(t){e.tagFilterOptions=[{term:"Filter By Tag",disabled:!0}].concat(t),e.selectedTagFilter=e.tagFilterOptions[0]})},e.prototype.filterByTag=function(e){return-1===r.a.indexOf(this.query.tag,e)&&this.query.tag.push(e),this.refreshList()},e.prototype.onQueryChange=function(){return this.refreshList()},e.prototype.onTagFilterChange=function(){var e=this.filterByTag(this.selectedTagFilter.term);return this.selectedTagFilter=this.tagFilterOptions[0],e},e.prototype.removeTag=function(e,t){this.query.tag=r.a.without(this.query.tag,e),this.refreshList(),t&&(t.stopPropagation(),t.preventDefault())},e.prototype.removeStarred=function(){return this.query.starred=!1,this.refreshList()},e.prototype.onStarredFilterChange=function(){return this.query.starred="Yes"===this.selectedStarredFilter.text,this.selectedStarredFilter=this.starredFilterOptions[0],this.refreshList()},e.prototype.onSelectAllChanged=function(){for(var e=this,t=0,n=this.sections;t<n.length;t++){var a=n[t];a.hideHeader||(a.checked=this.selectAllChecked),a.items=r.a.map(a.items,function(t){return t.checked=e.selectAllChecked,t})}this.selectionChanged()},e.prototype.clearFilters=function(){this.query.query="",this.query.tag=[],this.query.starred=!1,this.refreshList()},e.prototype.createDashboardUrl=function(){var e="dashboard/new";return this.folderId&&(e+="?folderId="+this.folderId),e},e.prototype.importDashboardUrl=function(){var e="dashboard/import";return this.folderId&&(e+="?folderId="+this.folderId),e},e}();s.c.directive("manageDashboards",function(){return{restrict:"E",templateUrl:"public/app/core/components/manage_dashboards/manage_dashboards.html",controller:Cn,bindToController:!0,controllerAs:"ctrl",scope:{folderId:"=",folderUid:"="}}}),n.d(t,"e",function(){return vt.a}),n.d(t,"f",function(){return xn}),n.d(t,"d",function(){return s.c}),n.d(t,"b",function(){return ye.b}),n.d(t,"c",function(){return re.a}),n.d(t,"a",function(){return B}),n.d(t,"g",function(){return Sn.b})},,function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(6),o={valueFormats:{},regexEscape:function(e){return e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")},round_interval:function(e){switch(!0){case e<15:return 10;case e<35:return 20;case e<75:return 50;case e<150:return 100;case e<350:return 200;case e<750:return 500;case e<1500:return 1e3;case e<3500:return 2e3;case e<7500:return 5e3;case e<12500:return 1e4;case e<17500:return 15e3;case e<25e3:return 2e4;case e<45e3:return 3e4;case e<9e4:return 6e4;case e<21e4:return 12e4;case e<45e4:return 3e5;case e<75e4:return 6e5;case e<105e4:return 9e5;case e<15e5:return 12e5;case e<27e5:return 18e5;case e<54e5:return 36e5;case e<9e6:return 72e5;case e<162e5:return 108e5;case e<324e5:return 216e5;case e<864e5:return 432e5;case e<6048e5:return 864e5;case e<18144e5:return 6048e5;case e<36288e5:return 2592e6;default:return 31536e6}},secondsToHms:function(e){var t=Math.floor(e/31536e3);if(t)return t+"y";var n=Math.floor(e%31536e3/86400);if(n)return n+"d";var a=Math.floor(e%31536e3%86400/3600);if(a)return a+"h";var r=Math.floor(e%31536e3%86400%3600/60);if(r)return r+"m";var i=Math.floor(e%31536e3%86400%3600%60);if(i)return i+"s";var o=Math.floor(1e3*e);return o?o+"ms":"less than a millisecond"},secondsToHhmmss:function(e){var t=[],n=Math.floor(e/3600),a=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return n>9?t.push(""+n):t.push("0"+n),a>9?t.push(""+a):t.push("0"+a),r>9?t.push(""+r):t.push("0"+r),t.join(":")},to_percent:function(e,t){return Math.floor(e/t*1e4)/100+"%"},addslashes:function(e){return e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\'/g,"\\'")).replace(/\"/g,'\\"')).replace(/\0/g,"\\0")},interval_regex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervals_in_seconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},calculateInterval:function(e,t,n){var a,r=1;return n&&(">"===n[0]&&(n=n.slice(1)),r=o.interval_to_ms(n)),r>(a=o.round_interval((e.to.valueOf()-e.from.valueOf())/t))&&(a=r),{intervalMs:a,interval:o.secondsToHms(a/1e3)}},describe_interval:function(e){var t=e.match(o.interval_regex);if(t&&r.a.has(o.intervals_in_seconds,t[2]))return{sec:o.intervals_in_seconds[t[2]],type:t[2],count:parseInt(t[1],10)};throw new Error('Invalid interval string, expecting a number followed by one of "Mwdhmsy"')},interval_to_ms:function(e){var t=o.describe_interval(e);return 1e3*t.sec*t.count},interval_to_seconds:function(e){var t=o.describe_interval(e);return t.sec*t.count},query_color_dot:function(e,t){return'<div class="icon-circle" style="'+["display:inline-block","color:"+e,"font-size:"+t+"px"].join(";")+'"></div>'},slugifyForUrl:function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},stringToJsRegex:function(e){if("/"!==e[0])return new RegExp("^"+e+"$");var t=e.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));return new RegExp(t[1],t[2])},toFixed:function(e,t){if(null===e)return"";var n=t?Math.pow(10,Math.max(0,t)):1,a=String(Math.round(e*n)/n);if(-1!==a.indexOf("e")||0===e)return a;if(null!=t){var r=a.indexOf("."),i=-1===r?0:a.length-r-1;if(i<t)return(i?a:a+".")+String(n).substr(1,t-i)}return a},toFixedScaled:function(e,t,n,a,r){return null===n?o.toFixed(e,t)+r:o.toFixed(e,n+a)+r},roundValue:function(e,t){if(null===e)return null;var n=Math.pow(10,t),a=(n*e).toFixed(t);return Math.round(parseFloat(a))/n},getUnitFormats:function(){return Object(i.getValueFormats)()}};"undefined"!=typeof Proxy?o.valueFormats=new Proxy(o.valueFormats,{get:function(e,t,n){if("string"!=typeof t)throw{message:"Value format "+String(t)+" is not a string"};var a=Object(i.getValueFormat)(t);return a||Reflect.get(e,t,n)}}):o.valueFormats=Object(i.getValueFormatterIndex)(),t.a=o},,,,,,,function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(7),s=n(44),l=n(223),c=n(6),u=i.a.memo(function(e){var t=e.appName,n=e.buildVersion,a=e.buildCommit,r=e.newGrafanaVersionExists,o=e.newGrafanaVersion;return i.a.createElement("footer",{className:"footer"},i.a.createElement("div",{className:"text-center"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{href:"http://docs.grafana.org",target:"_blank"},i.a.createElement("i",{className:"fa fa-file-code-o"})," Docs")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://grafana.com/services/support",target:"_blank"},i.a.createElement("i",{className:"fa fa-support"})," Support Plans")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://community.grafana.com/",target:"_blank"},i.a.createElement("i",{className:"fa fa-comments-o"})," Community")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://grafana.com",target:"_blank"},t)," ",i.a.createElement("span",null,"v",n," (commit: ",a,")")),r&&i.a.createElement("li",null,i.a.createElement(c.Tooltip,{placement:"auto",content:o},i.a.createElement("a",{href:"https://grafana.com/get",target:"_blank"},"New version available!"))))))}),d=function(e){var t=e.pageName,n="Loading "+(void 0===t?"":t)+"...";return i.a.createElement("div",{className:"page-loader-wrapper"},i.a.createElement("i",{className:"page-loader-wrapper__spinner fa fa-spinner fa-spin"}),i.a.createElement("div",{className:"page-loader-wrapper__text"},n))},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.isLoading;return i.a.createElement("div",{className:"page-container page-body"},e&&i.a.createElement(d,null),this.props.children)},t}(r.Component),h=n(1),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateTitle=function(){var e=t.getPageTitle;document.title=e?e+" - Grafana":"Grafana"},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.updateTitle()},t.prototype.componentDidUpdate=function(e){Object(h.isEqual)(e.navModel,this.props.navModel)||this.updateTitle()},Object.defineProperty(t.prototype,"getPageTitle",{get:function(){var e=this.props.navModel;if(e)return Object(s.b)(e)||void 0},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.navModel,t=o.a.buildInfo;return i.a.createElement("div",{className:"page-scrollbar-wrapper"},i.a.createElement(c.CustomScrollbar,{autoHeightMin:"100%"},i.a.createElement("div",{className:"page-scrollbar-content"},i.a.createElement(l.a,{model:e}),this.props.children,i.a.createElement(u,{appName:"Grafana",buildCommit:t.commit,buildVersion:t.version,newGrafanaVersion:t.latestVersion,newGrafanaVersionExists:t.hasUpdate}))))},t.Header=l.a,t.Contents=p,t}(r.Component);t.a=f},function(e,t,n){"use strict";var a=n(266);n.d(t,"c",function(){return a.b});var r=n(221);n.d(t,"d",function(){return r.b});var i=n(195);n.d(t,"b",function(){return i.c}),n.d(t,"a",function(){return i.b})},,,,function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"j",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"h",function(){return p});var a=30,r=10,i=24,o="v",s=4,l=250,c=3*a,u="panel-copy",d=27,p=2},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=[],r=function(e){if(a.some(function(t){return!(!t||!e)&&t.toLocaleUpperCase()===e.toLocaleUpperCase()}))throw new Error("There is already an actionCreator defined with the type "+e);return a.push(e),{create:function(){return Object.assign(function(t){return{type:e,payload:t}},{type:e})}}},i=function(e){if(a.some(function(t){return!(!t||!e)&&t.toLocaleUpperCase()===e.toLocaleUpperCase()}))throw new Error("There is already an actionCreator defined with the type "+e);return a.push(e),{create:function(){return Object.assign(function(){return{type:e,payload:void 0}},{type:e})}}}},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return c});var a=n(1),r=n.n(a),i=n(254);n.d(t,"a",function(){return i.a});var o=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?::(\w+))?}/g,s=function(e){return o.lastIndex=0,o.exec(e)},l={};function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];e[0]=r.a.isString(e[0])?e[0]:Object.values(e[0]).join(" ");var a=e.slice(0,-1).join(" ").match(o);return!!(null!==a&&a.find(function(e){var t=s(e);return null!==t&&t.indexOf(n)>-1}))}},,function(e,t,n){"use strict";n.r(t),n.d(t,"parse",function(){return l}),n.d(t,"isValid",function(){return c}),n.d(t,"parseDateMath",function(){return u});var a=n(1),r=n.n(a),i=n(4),o=n.n(i),s=["y","M","w","d","h","m","s"];function l(e,t,n){if(e){if(o.a.isMoment(e))return e;if(r.a.isDate(e))return o()(e);var a,i,s,l="";return"now"===e.substring(0,3)?(a="utc"===n?o.a.utc():o()(),l=e.substring("now".length)):(-1===(i=e.indexOf("||"))?(s=e,l=""):(s=e.substring(0,i),l=e.substring(i+2)),a=o()(s,o.a.ISO_8601)),l.length?u(l,a,t):a}}function c(e){var t=l(e);return!!t&&(!!o.a.isMoment(t)&&t.isValid())}function u(e,t,n){for(var a=t,i=0,o=e.length;i<o;){var l,c=e.charAt(i++),u=void 0,d=void 0;if("/"===c)u=0;else if("+"===c)u=1;else{if("-"!==c)return;u=2}if(isNaN(e.charAt(i)))d=1;else if(2===e.length)d=e.charAt(i);else{for(var p=i;!isNaN(e.charAt(i));)if(++i>10)return;d=parseInt(e.substring(p,i),10)}if(0===u&&1!==d)return;if(l=e.charAt(i++),!r.a.includes(s,l))return;0===u?n?a.endOf(l):a.startOf(l):1===u?a.add(d,l):2===u&&a.subtract(d,l)}return a}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l});var a=n(1),r=n.n(a),i=function(){return function(e){this.type=e.type,this.params=e.params,this.defaultParams=e.defaultParams,this.renderer=e.renderer,this.category=e.category,this.addStrategy=e.addStrategy}}(),o=function(){function e(e,t){if(this.part=e,this.def=t,!this.def)throw{message:"Could not find query part "+e.type};e.params=e.params||r.a.clone(this.def.defaultParams),this.params=e.params,this.updateText()}return e.prototype.render=function(e){return this.def.renderer(this,e)},e.prototype.hasMultipleParamsInString=function(e,t){return-1!==e.indexOf(",")&&(this.def.params[t+1]&&this.def.params[t+1].optional)},e.prototype.updateParam=function(e,t){var n=this;this.hasMultipleParamsInString(e,t)?r.a.each(e.split(","),function(e,t){n.updateParam(e.trim(),t)}):(""===e&&this.def.params[t].optional?this.params.splice(t,1):this.params[t]=e,this.part.params=this.params,this.updateText())},e.prototype.updateText=function(){if(0!==this.params.length){var e=this.def.type+"(";e+=this.params.join(", "),e+=")",this.text=e}else this.text=this.def.type+"()"},e}();function s(e,t){var n=e.def.type+"(",a=r.a.map(e.params,function(t,n){var a=e.def.params[n];return"time"===a.type&&"auto"===t&&(t="$__interval"),"single"===a.quote?"'"+t+"'":"double"===a.quote?'"'+t+'"':t});return t&&a.unshift(t),n+a.join(", ")+")"}function l(e,t){return t+" "+e.params[0]}},function(e,t,n){"use strict";var a=n(611);n.o(a,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return a.AppNotificationSeverity}),n.o(a,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return a.AppNotificationTimeout}),n.o(a,"DashboardInitPhase")&&n.d(t,"DashboardInitPhase",function(){return a.DashboardInitPhase}),n.o(a,"DashboardRouteInfo")&&n.d(t,"DashboardRouteInfo",function(){return a.DashboardRouteInfo}),n.o(a,"KIOSK_MODE_TV")&&n.d(t,"KIOSK_MODE_TV",function(){return a.KIOSK_MODE_TV}),n.o(a,"OrgRole")&&n.d(t,"OrgRole",function(){return a.OrgRole});var r=n(612);n.o(r,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return r.AppNotificationSeverity}),n.o(r,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return r.AppNotificationTimeout}),n.o(r,"DashboardInitPhase")&&n.d(t,"DashboardInitPhase",function(){return r.DashboardInitPhase}),n.o(r,"DashboardRouteInfo")&&n.d(t,"DashboardRouteInfo",function(){return r.DashboardRouteInfo}),n.o(r,"KIOSK_MODE_TV")&&n.d(t,"KIOSK_MODE_TV",function(){return r.KIOSK_MODE_TV}),n.o(r,"OrgRole")&&n.d(t,"OrgRole",function(){return r.OrgRole});var i=n(613);n.o(i,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return i.AppNotificationSeverity}),n.o(i,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return i.AppNotificationTimeout}),n.o(i,"DashboardInitPhase")&&n.d(t,"DashboardInitPhase",function(){return i.DashboardInitPhase}),n.o(i,"DashboardRouteInfo")&&n.d(t,"DashboardRouteInfo",function(){return i.DashboardRouteInfo}),n.o(i,"KIOSK_MODE_TV")&&n.d(t,"KIOSK_MODE_TV",function(){return i.KIOSK_MODE_TV}),n.o(i,"OrgRole")&&n.d(t,"OrgRole",function(){return i.OrgRole});var o=n(614);n.o(o,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return o.AppNotificationSeverity}),n.o(o,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return o.AppNotificationTimeout}),n.o(o,"DashboardInitPhase")&&n.d(t,"DashboardInitPhase",function(){return o.DashboardInitPhase}),n.o(o,"DashboardRouteInfo")&&n.d(t,"DashboardRouteInfo",function(){return o.DashboardRouteInfo}),n.o(o,"KIOSK_MODE_TV")&&n.d(t,"KIOSK_MODE_TV",function(){return o.KIOSK_MODE_TV}),n.o(o,"OrgRole")&&n.d(t,"OrgRole",function(){return o.OrgRole});var s=n(615);n.o(s,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return s.AppNotificationSeverity}),n.o(s,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return s.AppNotificationTimeout}),n.o(s,"DashboardInitPhase")&&n.d(t,"DashboardInitPhase",function(){return s.DashboardInitPhase}),n.o(s,"DashboardRouteInfo")&&n.d(t,"DashboardRouteInfo",function(){return s.DashboardRouteInfo}),n.o(s,"KIOSK_MODE_TV")&&n.d(t,"KIOSK_MODE_TV",function(){return s.KIOSK_MODE_TV}),n.o(s,"OrgRole")&&n.d(t,"OrgRole",function(){return s.OrgRole});var l=n(616);n.d(t,"DashboardInitPhase",function(){return l.a}),n.d(t,"DashboardRouteInfo",function(){return l.b}),n.d(t,"KIOSK_MODE_TV",function(){return l.c});var c=n(60);n.d(t,"OrgRole",function(){return c.b});var u=n(617);n.o(u,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return u.AppNotificationSeverity}),n.o(u,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return u.AppNotificationTimeout});var d=n(618);n.o(d,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return d.AppNotificationSeverity}),n.o(d,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return d.AppNotificationTimeout});var p=n(619);n.o(p,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return p.AppNotificationSeverity}),n.o(p,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return p.AppNotificationTimeout});n(620);var h=n(621);n.o(h,"AppNotificationSeverity")&&n.d(t,"AppNotificationSeverity",function(){return h.AppNotificationSeverity}),n.o(h,"AppNotificationTimeout")&&n.d(t,"AppNotificationTimeout",function(){return h.AppNotificationTimeout});var f=n(622);n.d(t,"AppNotificationSeverity",function(){return f.a}),n.d(t,"AppNotificationTimeout",function(){return f.b});n(623),n(624),n(194),n(625)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"k",function(){return f}),n.d(t,"l",function(){return m}),n.d(t,"m",function(){return g}),n.d(t,"n",function(){return v}),n.d(t,"p",function(){return b}),n.d(t,"q",function(){return y}),n.d(t,"r",function(){return w}),n.d(t,"s",function(){return x}),n.d(t,"u",function(){return S}),n.d(t,"w",function(){return k}),n.d(t,"v",function(){return C}),n.d(t,"x",function(){return E}),n.d(t,"y",function(){return T}),n.d(t,"z",function(){return M}),n.d(t,"A",function(){return _}),n.d(t,"G",function(){return A}),n.d(t,"E",function(){return D}),n.d(t,"B",function(){return N}),n.d(t,"D",function(){return P}),n.d(t,"F",function(){return O}),n.d(t,"C",function(){return I}),n.d(t,"t",function(){return $}),n.d(t,"o",function(){return F});var a,r=n(32);!function(e){e.InitializeExploreSplit="explore/INITIALIZE_EXPLORE_SPLIT",e.SplitClose="explore/SPLIT_CLOSE",e.SplitOpen="explore/SPLIT_OPEN",e.ResetExplore="explore/RESET_EXPLORE"}(a||(a={}));var i=Object(r.a)("explore/ADD_QUERY_ROW").create(),o=(Object(r.b)("explore/CHANGE_DATASOURCE").create(),Object(r.a)("explore/CHANGE_QUERY").create()),s=Object(r.a)("explore/CHANGE_SIZE").create(),l=Object(r.a)("explore/CHANGE_TIME").create(),c=Object(r.a)("explore/CLEAR_QUERIES").create(),u=Object(r.a)("explore/HIGHLIGHT_LOGS_EXPRESSION").create(),d=Object(r.a)("explore/INITIALIZE_EXPLORE").create(),p=Object(r.b)("explore/INITIALIZE_EXPLORE_SPLIT").create(),h=Object(r.a)("explore/LOAD_DATASOURCE_FAILURE").create(),f=Object(r.a)("explore/LOAD_DATASOURCE_MISSING").create(),m=Object(r.a)("explore/LOAD_DATASOURCE_PENDING").create(),g=Object(r.a)("explore/LOAD_DATASOURCE_SUCCESS").create(),v=Object(r.a)("explore/MODIFY_QUERIES").create(),b=Object(r.a)("explore/QUERY_TRANSACTION_FAILURE").create(),y=Object(r.a)("explore/QUERY_TRANSACTION_START").create(),w=Object(r.a)("explore/QUERY_TRANSACTION_SUCCESS").create(),x=Object(r.a)("explore/REMOVE_QUERY_ROW").create(),S=(Object(r.b)("explore/RUN_QUERIES").create(),Object(r.a)("explore/RUN_QUERIES_EMPTY").create()),k=Object(r.a)("explore/SCAN_START").create(),C=Object(r.a)("explore/SCAN_RANGE").create(),E=Object(r.a)("explore/SCAN_STOP").create(),T=Object(r.a)("explore/SET_QUERIES").create(),M=Object(r.b)("explore/SPLIT_CLOSE").create(),_=Object(r.a)("explore/SPLIT_OPEN").create(),A=(Object(r.b)("explore/STATE_SAVE").create(),Object(r.a)("explore/UPDATE_UI_STATE").create()),D=Object(r.a)("explore/TOGGLE_TABLE").create(),N=Object(r.a)("explore/TOGGLE_GRAPH").create(),P=Object(r.a)("explore/TOGGLE_LOGS").create(),O=Object(r.a)("explore/UPDATE_DATASOURCE_INSTANCE").create(),I=Object(r.a)("explore/TOGGLE_LOG_LEVEL").create(),$=Object(r.b)("explore/RESET_EXPLORE").create(),F=Object(r.a)("explore/QueriesImported").create()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=n(2);function r(e,t,n){if(e[t]){var r=e[t],i=a.a({},r.parentItem);return i.children=i.children.map(function(e){return a.a({},e,{active:e.url===r.url})}),{node:r,main:i}}return n||function(){var e={id:"not-found",text:"Page not found",icon:"fa fa-fw fa-warning",subTitle:"404 Error",url:"not-found"};return{node:e,main:e}}()}var i=function(e){return e.main.text+(e.node.text?": "+e.node.text:"")}},,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"f",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"n",function(){return g}),n.d(t,"m",function(){return v}),n.d(t,"l",function(){return b}),n.d(t,"k",function(){return y}),n.d(t,"o",function(){return w}),n.d(t,"j",function(){return x}),n.d(t,"h",function(){return S}),n.d(t,"a",function(){return k}),n.d(t,"i",function(){return C}),n.d(t,"p",function(){return E}),n.d(t,"g",function(){return T});var a=n(2),r=n(7),i=n(14),o=n(102),s=n(27),l=n(288),c=n(56),u=n(32),d=Object(c.a)("LOAD_DATA_SOURCE").create(),p=Object(c.a)("LOAD_DATA_SOURCES").create(),h=Object(c.a)("LOAD_DATA_SOURCE_META").create(),f=Object(u.b)("LOAD_DATA_SOURCE_TYPES").create(),m=Object(c.a)("LOADED_DATA_SOURCE_TYPES").create(),g=Object(c.a)("SET_DATA_SOURCES_SEARCH_QUERY").create(),v=Object(c.a)("SET_DATA_SOURCES_LAYOUT_MODE").create(),b=Object(c.a)("SET_DATA_SOURCE_TYPE_SEARCH_QUERY").create(),y=Object(c.a)("SET_DATA_SOURCE_NAME").create(),w=Object(c.a)("SET_IS_DEFAULT").create();function x(){var e=this;return function(t){return a.b(e,void 0,void 0,function(){var e;return a.d(this,function(n){switch(n.label){case 0:return[4,Object(i.a)().get("/api/datasources")];case 1:return e=n.sent(),t(p(e)),[2]}})})}}function S(e){var t=this;return function(n){return a.b(t,void 0,void 0,function(){var t,r;return a.d(this,function(a){switch(a.label){case 0:return[4,Object(i.a)().get("/api/datasources/"+e)];case 1:return t=a.sent(),[4,Object(i.a)().get("/api/plugins/"+t.type+"/settings")];case 2:return r=a.sent(),n(d(t)),n(h(r)),n(Object(s.d)(Object(l.a)(t,r))),[2]}})})}}function k(e){var t=this;return function(n,r){return a.b(t,void 0,void 0,function(){var t,o,l;return a.d(this,function(a){switch(a.label){case 0:return[4,n(x())];case 1:return a.sent(),t=r().dataSources.dataSources,o={name:e.name,type:e.id,access:"proxy",isDefault:0===t.length},M(t,o.name)&&(o.name=function(e,t){for(;M(e,t);)_(t)?t=""+N(t)+D(A(t)):t+="-1";return t}(t,o.name)),[4,Object(i.a)().post("/api/datasources",o)];case 2:return l=a.sent(),n(Object(s.c)({path:"/datasources/edit/"+l.id})),[2]}})})}}function C(){var e=this;return function(t){return a.b(e,void 0,void 0,function(){var e;return a.d(this,function(n){switch(n.label){case 0:return t(f()),[4,Object(i.a)().get("/api/plugins",{enabled:1,type:"datasource"})];case 1:return e=n.sent(),t(m(e)),[2]}})})}}function E(e){var t=this;return function(n){return a.b(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,Object(i.a)().put("/api/datasources/"+e.id,e)];case 1:return t.sent(),[4,Object(i.a)().get("/api/frontend/settings").then(function(e){r.a.datasources=e.datasources,r.a.defaultDatasource=e.defaultDatasource,Object(o.a)().init()})];case 2:return t.sent(),[2,n(S(e.id))]}})})}}function T(){var e=this;return function(t,n){return a.b(e,void 0,void 0,function(){var e;return a.d(this,function(a){switch(a.label){case 0:return e=n().dataSources.dataSource,[4,Object(i.a)().delete("/api/datasources/"+e.id)];case 1:return a.sent(),t(Object(s.c)({path:"/datasources"})),[2]}})})}}function M(e,t){return e.filter(function(e){return e.name.toLowerCase()===t.toLowerCase()}).length>0}function _(e){return e.endsWith("-",e.length-1)}function A(e){return parseInt(e.slice(-1),10)}function D(e){return isNaN(e)?1:e+1}function N(e){return e.slice(0,e.length-1)}},function(e,t,n){"use strict";n.r(t);var a=n(441);n.d(t,"LoadingState",function(){return a.a}),n.d(t,"NullValueMode",function(){return a.b});var r=n(442);for(var i in r)["LoadingState","NullValueMode","default"].indexOf(i)<0&&function(e){n.d(t,e,function(){return r[e]})}(i);var o=n(443);n.d(t,"ReactPanelPlugin",function(){return o.c}),n.d(t,"BasicGaugeColor",function(){return o.a}),n.d(t,"MappingType",function(){return o.b});var s=n(444);for(var i in s)["LoadingState","NullValueMode","ReactPanelPlugin","BasicGaugeColor","MappingType","default"].indexOf(i)<0&&function(e){n.d(t,e,function(){return s[e]})}(i);var l=n(445);for(var i in l)["LoadingState","NullValueMode","ReactPanelPlugin","BasicGaugeColor","MappingType","default"].indexOf(i)<0&&function(e){n.d(t,e,function(){return l[e]})}(i);var c=n(129);n.d(t,"GrafanaThemeType",function(){return c.a})},function(e,t,n){"use strict";var a=new(function(){function e(){}return e.prototype.get=function(e){return window.localStorage[e]},e.prototype.set=function(e,t){window.localStorage[e]=t},e.prototype.getBool=function(e,t){return void 0===t||this.exists(e)?"true"===window.localStorage[e]:t},e.prototype.getObject=function(e,t){var n=t;if(this.exists(e)){var a=window.localStorage[e];try{n=JSON.parse(a)}catch(n){console.error("Error parsing store object: "+e+". Returning default: "+t+". ["+n+"]")}}return n},e.prototype.setObject=function(e,t){var n;try{n=JSON.stringify(t)}catch(t){return console.error("Could not stringify object: "+e+". ["+t+"]"),!1}try{this.set(e,n)}catch(t){return console.error("Could not save item in localStorage: "+e+". ["+t+"]"),!1}return!0},e.prototype.exists=function(e){return void 0!==window.localStorage[e]},e.prototype.delete=function(e){window.localStorage.removeItem(e)},e}());t.a=a},function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(36),o=new i.b({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]});function s(e,t){return r.a.reduce(e,function(e,t){return void 0!==t.metric&&void 0!==t.value&&e.push(t.metric+"="+t.value),void 0!==t.Metric&&void 0!==t.Value&&e.push(t.Metric+"="+t.Value),e},[]).join(t)}t.a={alertQueryDef:o,getStateDisplayModel:function(e){switch(e){case"ok":return{text:"OK",iconClass:"icon-gf icon-gf-online",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"icon-gf icon-gf-critical",stateClass:"alert-state-critical"};case"no_data":return{text:"NO DATA",iconClass:"fa fa-question",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"fa fa-pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"fa fa-exclamation",stateClass:"alert-state-warning"};case"unknown":return{text:"UNKNOWN",iconClass:"fa fa-question",stateClass:"alert-state-paused"}}throw{message:"Unknown alert state"}},conditionTypes:[{text:"Query",value:"query"}],evalFunctions:[{text:"IS ABOVE",value:"gt"},{text:"IS BELOW",value:"lt"},{text:"IS OUTSIDE RANGE",value:"outside_range"},{text:"IS WITHIN RANGE",value:"within_range"},{text:"HAS NO VALUE",value:"no_value"}],evalOperators:[{text:"OR",value:"or"},{text:"AND",value:"and"}],noDataModes:[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],executionErrorModes:[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}],reducerTypes:[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"percent_diff()",value:"percent_diff"},{text:"count_non_null()",value:"count_non_null"}],createReducerPart:function(e){var t=new i.b({type:e.type,defaultParams:[]});return new i.a(e,t)},getAlertAnnotationInfo:function(e){return r.a.isArray(e.data)?s(e.data,", "):r.a.isArray(e.data.evalMatches)?s(e.data.evalMatches,", "):e.data.error?"Error: "+e.data.error:""},alertStateSortScore:{alerting:1,no_data:2,pending:3,ok:4,paused:5}}},function(e,t,n){"use strict";n.d(t,"j",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"h",function(){return g}),n.d(t,"m",function(){return b}),n.d(t,"l",function(){return y}),n.d(t,"a",function(){return w}),n.d(t,"i",function(){return x}),n.d(t,"k",function(){return S});var a=n(2),r=n(14),i=n(56),o=n(120),s=n(86),l=n(27),c=Object(i.a)("LOAD_DASHBOARD_PERMISSIONS").create(),u=Object(i.b)("DASHBOARD_INIT_FETCHING").create(),d=Object(i.b)("DASHBOARD_INIT_SERVICES").create(),p=Object(i.b)("SET_DASHBOARD_INIT_SLOW").create(),h=Object(i.a)("DASHBOARD_INIT_COMLETED").create(),f=Object(i.a)("DASHBOARD_INIT_FAILED").create(),m=Object(i.b)("DASHBOARD_CLEAN_UP").create();function g(e){var t=this;return function(n){return a.b(t,void 0,void 0,function(){var t;return a.d(this,function(a){switch(a.label){case 0:return[4,Object(r.a)().get("/api/dashboards/id/"+e+"/permissions")];case 1:return t=a.sent(),n(c(t)),[2]}})})}}function v(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function b(e,t,n){var i=this;return function(o,s){return a.b(i,void 0,void 0,function(){var i,l,c,u,d,p;return a.d(this,function(a){switch(a.label){case 0:for(i=s().dashboard,l=[],c=0,u=i.permissions;c<u.length;c++)(d=u[c]).inherited||(p=v(d),t===d&&(p.permission=n),l.push(p));return[4,Object(r.a)().post("/api/dashboards/id/"+e+"/permissions",{items:l})];case 1:return a.sent(),[4,o(g(e))];case 2:return a.sent(),[2]}})})}}function y(e,t){var n=this;return function(i,o){return a.b(n,void 0,void 0,function(){var n,s,l,c,u;return a.d(this,function(a){switch(a.label){case 0:for(n=o().dashboard,s=[],l=0,c=n.permissions;l<c.length;l++)(u=c[l]).inherited||u===t||s.push(v(u));return[4,Object(r.a)().post("/api/dashboards/id/"+e+"/permissions",{items:s})];case 1:return a.sent(),[4,i(g(e))];case 2:return a.sent(),[2]}})})}}function w(e,t){var n=this;return function(i,o){return a.b(n,void 0,void 0,function(){var n,s,l,c,u;return a.d(this,function(a){switch(a.label){case 0:for(n=o().dashboard,s=[],l=0,c=n.permissions;l<c.length;l++)(u=c[l]).inherited||s.push(v(u));return s.push({userId:t.userId,teamId:t.teamId,role:t.role,permission:t.permission}),[4,Object(r.a)().post("/api/dashboards/id/"+e+"/permissions",{items:s})];case 1:return a.sent(),[4,i(g(e))];case 2:return a.sent(),[2]}})})}}function x(e,t){var n=this;return function(i){return a.b(n,void 0,void 0,function(){return a.d(this,function(n){switch(n.label){case 0:return[4,Object(r.a)().post("/api/dashboards/import",e)];case 1:return n.sent(),i(Object(l.b)(Object(o.b)("Dashboard Imported",t))),i(Object(s.b)()),[2]}})})}}function S(e){var t=this;return function(n){return a.b(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return[4,Object(r.a)().delete("/api/dashboards/"+e)];case 1:return t.sent(),n(Object(s.b)()),[2]}})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"k",function(){return p}),n.d(t,"l",function(){return h}),n.d(t,"h",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"g",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"j",function(){return b}),n.d(t,"m",function(){return y}),n.d(t,"f",function(){return w}),n.d(t,"b",function(){return x}),n.d(t,"i",function(){return S}),n.d(t,"d",function(){return k});var a,r=n(2),i=n(14),o=n(27),s=n(283);!function(e){e.LoadTeams="LOAD_TEAMS",e.LoadTeam="LOAD_TEAM",e.SetSearchQuery="SET_TEAM_SEARCH_QUERY",e.SetSearchMemberQuery="SET_TEAM_MEMBER_SEARCH_QUERY",e.LoadTeamMembers="TEAM_MEMBERS_LOADED",e.LoadTeamGroups="TEAM_GROUPS_LOADED"}(a||(a={}));var l=function(e){return{type:a.LoadTeams,payload:e}},c=function(e){return{type:a.LoadTeam,payload:e}},u=function(e){return{type:a.LoadTeamMembers,payload:e}},d=function(e){return{type:a.LoadTeamGroups,payload:e}},p=function(e){return{type:a.SetSearchMemberQuery,payload:e}},h=function(e){return{type:a.SetSearchQuery,payload:e}};function f(){var e=this;return function(t){return r.b(e,void 0,void 0,function(){var e;return r.d(this,function(n){switch(n.label){case 0:return[4,Object(i.a)().get("/api/teams/search",{perpage:1e3,page:1})];case 1:return e=n.sent(),t(l(e.teams)),[2]}})})}}function m(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(a){switch(a.label){case 0:return[4,Object(i.a)().get("/api/teams/"+e)];case 1:return t=a.sent(),n(c(t)),n(Object(o.d)(Object(s.a)(t))),[2]}})})}}function g(){var e=this;return function(t,n){return r.b(e,void 0,void 0,function(){var e,a;return r.d(this,function(r){switch(r.label){case 0:return e=n().team.team,[4,Object(i.a)().get("/api/teams/"+e.id+"/members")];case 1:return a=r.sent(),t(u(a)),[2]}})})}}function v(e){var t=this;return function(n,a){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(r){switch(r.label){case 0:return t=a().team.team,[4,Object(i.a)().post("/api/teams/"+t.id+"/members",{userId:e})];case 1:return r.sent(),n(g()),[2]}})})}}function b(e){var t=this;return function(n,a){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(r){switch(r.label){case 0:return t=a().team.team,[4,Object(i.a)().delete("/api/teams/"+t.id+"/members/"+e)];case 1:return r.sent(),n(g()),[2]}})})}}function y(e,t){var n=this;return function(a,o){return r.b(n,void 0,void 0,function(){var n;return r.d(this,function(r){switch(r.label){case 0:return n=o().team.team,[4,Object(i.a)().put("/api/teams/"+n.id,{name:e,email:t})];case 1:return r.sent(),a(m(n.id)),[2]}})})}}function w(){var e=this;return function(t,n){return r.b(e,void 0,void 0,function(){var e,a;return r.d(this,function(r){switch(r.label){case 0:return e=n().team.team,[4,Object(i.a)().get("/api/teams/"+e.id+"/groups")];case 1:return a=r.sent(),t(d(a)),[2]}})})}}function x(e){var t=this;return function(n,a){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(r){switch(r.label){case 0:return t=a().team.team,[4,Object(i.a)().post("/api/teams/"+t.id+"/groups",{groupId:e})];case 1:return r.sent(),n(w()),[2]}})})}}function S(e){var t=this;return function(n,a){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(r){switch(r.label){case 0:return t=a().team.team,[4,Object(i.a)().delete("/api/teams/"+t.id+"/groups/"+e)];case 1:return r.sent(),n(w()),[2]}})})}}function k(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return[4,Object(i.a)().delete("/api/teams/"+e)];case 1:return t.sent(),n(f()),[2]}})})}}},function(e,t,n){"use strict";var a=n(32),r=function(e){var t={},n={addMapper:function(e){if(t[e.filter.type])throw new Error("There is already a mapper defined with the type "+e.filter.type);return t[e.filter.type]=e.mapper,n},create:function(){return function(n,a){void 0===n&&(n=e);var r=t[a.type];return r?r(n,a):n}}};return n};n.d(t,"a",function(){return a.a}),n.d(t,"b",function(){return a.b}),n.d(t,"c",function(){return r})},,function(e,t,n){"use strict";var a=n(7);t.a={stripBaseFromUrl:function(e){var t=a.a.appSubUrl,n=t.endsWith("/")?1:0;return e.length>0&&0===e.indexOf(t)?e.slice(t.length-n):e}}},,function(e,t,n){"use strict";var a,r,i,o;n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return l}),function(e){e.Viewer="Viewer",e.Editor="Editor",e.Admin="Admin"}(a||(a={})),function(e){e[e.View=1]="View",e[e.Edit=2]="Edit",e[e.Admin=4]="Admin"}(r||(r={})),function(e){e[e.Query=1]="Query",e[e.Admin=2]="Admin"}(i||(i={})),function(e){e.Team="Team",e.User="User",e.Viewer="Viewer",e.Editor="Editor"}(o||(o={}));i.Query;var s=[{value:o.Team,text:"Team"},{value:o.User,text:"User"},{value:o.Viewer,text:"Everyone With Viewer Role"},{value:o.Editor,text:"Everyone With Editor Role"}],l=[{value:r.View,label:"View",description:"Can view dashboards."},{value:r.Edit,label:"Edit",description:"Can add, edit and delete dashboards."},{value:r.Admin,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}]},function(e,t,n){"use strict";function a(e,t,n){var a=Math.sqrt(50),r=Math.sqrt(10),i=Math.sqrt(2),o=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),l=o/s;return l>=a?s*=10:l>=r?s*=5:l>=i&&(s*=2),t<e?-s:s}function r(e,t){return e-Math.floor(Math.log(t)/Math.LN10)}function i(e,t,n,a){var r,i=(t-e)/n,o=-Math.floor(Math.log(i)/Math.LN10),s=a,l=Math.pow(10,-o),c=i/l;return c<1.5?r=1:c<3?(r=2,c>2.25&&(null==s||o+1<=s)&&(r=2.5,++o)):r=c<7.5?5:10,r*=l}function o(e,t,n,a){var r=+(null!=e?e:n),i=+(null!=t?t:a),o=i-r;if(0===o){var s=Math.abs(0===i?1:.25*i);null===e&&(r-=s),null!=t&&null==e||(i+=s)}else{null==e&&(r-=.02*o)<0&&null!=n&&n>=0&&(r=0),null==t&&(i+=.02*o)>0&&null!=a&&a<=0&&(i=0)}return{min:r,max:i}}function s(e,t,n,a){var r,i=o(n.min,n.max,e,t),s=i.min,l=(i.max-s)/(.3*Math.sqrt(a)),c=-Math.floor(Math.log(l)/Math.LN10),u=Math.pow(10,-c),d=l/u;d<1.5?r=1:d<3?(r=2,d>2.25&&(r=2.5)):r=d<7.5?5:10,r*=u;var p=Math.max(0,1-Math.floor(Math.log(l)/Math.LN10));return{tickDecimals:p,scaledDecimals:p-Math.floor(Math.log(r)/Math.LN10)}}function l(e,t,n){if(t&&n&&e){var a=n-t,r=a/e/1e3;return r<=45?"%H:%M:%S":r<=7200||a<=864e5?"%H:%M":r<=8e4?"%m/%d %H:%M":r<=2419200||a<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"}function c(e,t){return Math.log(e)/Math.log(t)}function u(e){return d(e.toString())}function d(e){var t=e.indexOf(".");return-1===t?0:e.length-t-1}n.r(t),n.d(t,"tickStep",function(){return a}),n.d(t,"getScaledDecimals",function(){return r}),n.d(t,"getFlotTickSize",function(){return i}),n.d(t,"getFlotRange",function(){return o}),n.d(t,"getFlotTickDecimals",function(){return s}),n.d(t,"grafanaTimeFormat",function(){return l}),n.d(t,"logp",function(){return c}),n.d(t,"getPrecision",function(){return u}),n.d(t,"getStringPrecision",function(){return d})},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var a,r=n(8),i=n.n(r),o=n(5),s=n(1),l=n.n(s),c=function(){function e(e,t){this.$compile=e,this.$rootScope=t}return e.$inject=["$compile","$rootScope"],e.prototype.load=function(e,t,n){var a=this.$rootScope.$new();l.a.assign(a,t);var r=this.$compile(n)(a);return i.a.element(e).append(r),{destroy:function(){a.$destroy(),r.remove()},digest:function(){a.$$phase||a.$digest()},getScope:function(){return a}}},e}();function u(e){a=e}function d(){return a}o.c.service("angularLoader",c)},function(e,t,n){"use strict";var a;function r(e){a=e}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return g}),n.d(t,"i",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return y}),n.d(t,"n",function(){return S}),n.d(t,"o",function(){return k}),n.d(t,"h",function(){return E}),n.d(t,"g",function(){return T}),n.d(t,"l",function(){return M}),n.d(t,"e",function(){return _}),n.d(t,"j",function(){return A}),n.d(t,"m",function(){return D}),n.d(t,"p",function(){return N}),n.d(t,"k",function(){return P});var a=n(2),r=n(1),i=n.n(r),o=n(35),s=n(199),l=n(19),c=n(52),u=n(6),d=n(81),p=n(78),h={from:"now-6h",to:"now"},f={showingTable:!0,showingGraph:!0,showingLogs:!0,dedupStrategy:n(109).c.none},m=100,g="grafana.explore.datasource";function v(e,t,n,r,i){return a.b(this,void 0,void 0,function(){var o,l,c,u,d,p,h,f,m,g,v;return a.d(this,function(b){switch(b.label){case 0:if(o=n,l=t,"mixed"!==n.meta.id||!t)return[3,5];d=0,p=e.targets,b.label=1;case 1:return d<p.length?(h=p[d],[4,r.get(h.datasource)]):[3,4];case 2:if((f=b.sent())&&f.meta.explore)return u=f,[3,4];b.label=3;case 3:return d++,[3,1];case 4:u&&(o=u,l=t.filter(function(e){return e.datasource===u.name})),b.label=5;case 5:return n&&(m=i.timeRangeForUrl(),g={range:m},g=o.getExploreState?a.a({},g,o.getExploreState(l)):a.a({},g,{datasource:n.name,queries:l.map(function(e){return a.a({},e,{datasource:n.name})})}),v=JSON.stringify(g),c=Object(s.a)("/explore",{left:v})),[2,c]}})})}function b(e,t,n,r,i,s,l){var c=s.interval,u=s.intervalMs,d=[a.a({},e,r)];return{options:{interval:c,intervalMs:u,panelId:r.format+"-"+e.key,targets:d,range:{from:o.parse(i.from,!1),to:o.parse(i.to,!0),raw:i},rangeRaw:i,scopedVars:{__interval:{text:c,value:c},__interval_ms:{text:u,value:u}}},query:e,resultType:n,rowIndex:t,scanning:l,id:C(),done:!1,latency:0}}var y=function(e){e.key,e.refId;return a.e(e,["key","refId"])},w=function(e){return e.hasOwnProperty("expr")},x=function(e){return e.hasOwnProperty("ui")};function S(e){var t=f;if(e)try{var n=JSON.parse(decodeURI(e));if(Array.isArray(n)){if(n.length<=3)throw new Error("Error parsing compact URL state for Explore.");var a={from:n[0],to:n[1]},r=n[2],i=[];return n.slice(3).forEach(function(e){w(e)&&(i=i.concat([e])),x(e)&&(t={showingGraph:e.ui[0],showingLogs:e.ui[1],showingTable:e.ui[2],dedupStrategy:e.ui[3]})}),{datasource:r,queries:i,range:a,ui:t}}return n}catch(e){console.error(e)}return{datasource:null,queries:[],range:h,ui:t}}function k(e,t){return t?JSON.stringify([e.range.from,e.range.to,e.datasource].concat(e.queries,[{ui:[!!e.ui.showingGraph,!!e.ui.showingLogs,!!e.ui.showingTable,e.ui.dedupStrategy]}])):JSON.stringify(e)}function C(e){return void 0===e&&(e=0),"Q-"+Date.now()+"-"+Math.random()+"-"+e}function E(e){return void 0===e&&(e=0),{refId:function(e){return void 0===e&&(e=0),""+(e+1)}(e),key:C(e)}}function T(e){return e&&"object"==typeof e&&e.length>0?e.map(function(e,t){return a.a({},e,E(t))}):[a.a({},E())]}function M(e){return e&&e.some(function(e){return Object.keys(e).map(function(t){return e[t]}).filter(function(e){return e}).length>2})}function _(e,t,n){return{graphResult:i.a.flatten(e.filter(function(e){return"Graph"===e.resultType&&e.done&&e.result}).map(function(e){return e.result})),tableResult:d.b.apply(void 0,[new d.a].concat(e.filter(function(e){return"Table"===e.resultType&&e.done&&e.result&&e.result.columns&&e.result.rows}).map(function(e){return e.result}))),logsResult:t&&t.mergeStreams?t.mergeStreams(i.a.flatten(e.filter(function(e){return"Logs"===e.resultType&&e.done&&e.result}).map(function(e){return e.result})),n):void 0}}function A(e,t,n){if(!n)return{interval:"1s",intervalMs:1e3};var a={from:Object(o.parse)(e.from,!1),to:Object(o.parse)(e.to,!0)};return l.a.calculateInterval(a,n,t)}function D(e){return e.map(function(e,t){var n=e.datapoints||[],a=e.target,r=t%u.colors.length,i=u.colors[r];return new p.a({datapoints:n,alias:a,color:i,unit:e.unit})})}function N(e,t,n){var a=Date.now();n.forEach(function(t){e=[{query:t,ts:a}].concat(e)}),e.length>m&&(e=e.slice(0,m));var r="grafana.explore.history."+t;return c.a.setObject(r,e),e}var P=function(e,t){return e.reduce(function(e,n,a){var r=t&&t.name?t.name:n.key;return e.concat(r+"-"+a)},[])}},,,,function(e,t,n){"use strict";n.d(t,"f",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"g",function(){return m}),n.d(t,"a",function(){return g}),n.d(t,"e",function(){return v}),n.d(t,"h",function(){return b});var a=n(52),r=n(114),i=n(1),o=n(130),s=n(35),l=n(9),c=n(93),u=n(31),d=function(e,t,n){if(!1===n)e.removePanel(t);else{var a=t.alert?"Panel includes an alert rule, removing panel will also remove alert rule":null,r=t.alert?"YES":null;l.b.emit("confirm-modal",{title:"Remove Panel",text:"Are you sure you want to remove this panel?",text2:a,icon:"fa-trash",confirmText:r,yesText:"Remove",onConfirm:function(){return d(e,t,!1)}})}},p=function(e,t){e.duplicatePanel(t)},h=function(e){a.a.set(u.f,JSON.stringify(e.getSaveModel())),l.b.emit("alert-success",["Panel copied. Open Add Panel to paste"])},f=function(e,t){var n={object:t.getSaveModel(),updateHandler:function(t,n){!function(e,t,n){var a=e.panels.findIndex(function(e){return e.id===n.id}),i=e.panels.splice(a,1);e.events.emit("panel-removed",i),(t=new r.a(t)).id=n.id,e.panels.splice(a,0,t),e.sortPanelsByGridPos(),e.events.emit("panel-added",t)}(e,t,n)},enableCopy:!0};l.b.emit("show-modal",{src:"public/app/partials/edit_json.html",model:n})},m=function(e,t){l.b.emit("show-modal",{src:"public/app/features/dashboard/components/ShareModal/template.html",model:{dashboard:e,panel:t}})};function g(e,t){var n={timeInfo:"",timeRange:t};if(e.timeFrom){var a=c.a.replace(e.timeFrom,e.scopedVars),r=o.a(a);if(r.invalid)return n.timeInfo="invalid time override",n;if(Object(i.isString)(t.raw.from)){var l=s.parse(r.from);n.timeInfo=r.display,n.timeRange={from:l,to:s.parse(r.to),raw:{from:r.from,to:r.to}}}}if(e.timeShift){var u=c.a.replace(e.timeShift,e.scopedVars);if(o.a(u).invalid)return n.timeInfo="invalid timeshift",n;var d="-"+u;n.timeInfo+=" timeshift "+d;var p=s.parseDateMath(d,n.timeRange.from,!1),h=s.parseDateMath(d,n.timeRange.to,!0);n.timeRange={from:p,to:h,raw:{from:p,to:h}}}return e.hideTimeOverride&&(n.timeInfo=""),n}function v(e){var t=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return e.maxDataPoints?e.maxDataPoints:Math.ceil(t*(e.gridPos.w/24))}var b=function(e){var t=e.snapshotData;if(function(e){return e&&e.hasOwnProperty("datapoints")}(t[0]))return{timeSeries:t};if(function(e){return e&&e.hasOwnProperty("columns")}(t[0]))return{tableData:t[0]};throw new Error("snapshotData is invalid:"+t.toString())}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(5),r=n(200);function i(e,t,n){a.c.directive(e,["reactDirective",function(e){return e(Object(r.a)(t),n)}])}},,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var a=n(0),r=n.n(a),i=["(","[","{","}","]",")","|","*","+","-",".","?","<",">","#","&","^","$"],o=function(e){return e?i.reduce(function(e,t){return e.replace(t,"\\"+t)},e):e},s=Object(a.forwardRef)(function(e,t){return r.a.createElement("label",{className:e.labelClassName},r.a.createElement("input",{ref:t,type:"text",className:e.inputClassName,value:function(e){return e?i.reduce(function(e,t){return e.replace("\\"+t,t)},e):e}(e.value),onChange:function(t){return e.onChange(o(t.target.value))},placeholder:e.placeholder?e.placeholder:null}),r.a.createElement("i",{className:"gf-form-input-icon fa fa-search"}))})},,,function(e,t,n){"use strict";n.d(t,"b",function(){return u});var a=n(19),r=n(61),i=n(1),o=n.n(i),s=n(6);function l(e,t){if(!e)return!1;if("/"===e[0]){var n=a.a.stringToJsRegex(e);return null!=t.match(n)}return e===t}function c(e){return 0===e?.001:e/10}function u(e,t,n){for(var a=0;a<e.length;a++){var i=e[a],l=t.yaxes[(i.yaxis||1)-1],c=Object(s.getValueFormat)(l.format);if(o.a.isNumber(t.decimals))i.updateLegendValues(c,t.decimals,null);else if(o.a.isNumber(l.decimals))i.updateLegendValues(c,l.decimals+1,null);else{var u=d(e),p=u.datamin,h=u.datamax,f=Object(r.getFlotTickDecimals)(p,h,l,n),m=f.tickDecimals,g=f.scaledDecimals,v=(m||-1)+1;i.updateLegendValues(c,v,g+2)}}}function d(e){for(var t=null,n=null,a=0,r=e;a<r.length;a++){var i=r[a];(null===n||n<i.stats.max)&&(n=i.stats.max),(null===t||t>i.stats.min)&&(t=i.stats.min)}return{datamin:t,datamax:n}}var p=function(){function e(e){this.datapoints=e.datapoints,this.label=e.alias,this.id=e.alias,this.alias=e.alias,this.aliasEscaped=o.a.escape(e.alias),this.color=e.color,this.bars={fillColor:e.color},this.valueFormater=Object(s.getValueFormat)("none"),this.stats={},this.legend=!0,this.unit=e.unit,this.hasMsResolution=this.isMsResolutionNeeded()}return e.prototype.applySeriesOverrides=function(e){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(var t=0;t<e.length;t++){var n=e[t];l(n.alias,this.alias)&&(void 0!==n.lines&&(this.lines.show=n.lines),void 0!==n.dashes&&(this.dashes.show=n.dashes,this.lines.lineWidth=0),void 0!==n.points&&(this.points.show=n.points),void 0!==n.bars&&(this.bars.show=n.bars),void 0!==n.fill&&(this.lines.fill=c(n.fill)),void 0!==n.stack&&(this.stack=n.stack),void 0!==n.linewidth&&(this.lines.lineWidth=this.dashes.show?0:n.linewidth,this.dashes.lineWidth=n.linewidth),void 0!==n.dashLength&&(this.dashes.dashLength[0]=n.dashLength),void 0!==n.spaceLength&&(this.dashes.dashLength[1]=n.spaceLength),void 0!==n.nullPointMode&&(this.nullPointMode=n.nullPointMode),void 0!==n.pointradius&&(this.points.radius=n.pointradius),void 0!==n.steppedLine&&(this.lines.steps=n.steppedLine),void 0!==n.zindex&&(this.zindex=n.zindex),void 0!==n.fillBelowTo&&(this.fillBelowTo=n.fillBelowTo),void 0!==n.color&&this.setColor(n.color),void 0!==n.transform&&(this.transform=n.transform),void 0!==n.legend&&(this.legend=n.legend),void 0!==n.hideTooltip&&(this.hideTooltip=n.hideTooltip),void 0!==n.yaxis&&(this.yaxis=n.yaxis))}},e.prototype.getFlotPairs=function(e){var t=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;for(var n,a,r,i="connected"===e,s="null as zero"===e,l=0,c=0,u=!0,d=0;d<this.datapoints.length;d++){if(a=this.datapoints[d][0],n=this.datapoints[d][1],void 0!==r){var p=n-r;p<this.stats.timeStep&&(this.stats.timeStep=p)}if(r=n,null===a){if(i)continue;s&&(a=0)}null!==a&&(o.a.isNumber(a)&&(this.stats.total+=a,this.allIsNull=!1,l++),a>this.stats.max&&(this.stats.max=a),a<this.stats.min&&(this.stats.min=a),null===this.stats.first?this.stats.first=a:c>a?(u=!1,d===this.datapoints.length-1&&(this.stats.delta+=a)):(this.stats.delta+=u?a-c:a,u=!0),c=a,a<this.stats.logmin&&a>0&&(this.stats.logmin=a),0!==a&&(this.allIsZero=!1)),t.push([n,a])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),t.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/l,this.stats.current=t[t.length-1][1],null===this.stats.current&&t.length>1&&(this.stats.current=t[t.length-2][1])),null!==this.stats.max&&null!==this.stats.min&&(this.stats.range=this.stats.max-this.stats.min),null!==this.stats.current&&null!==this.stats.first&&(this.stats.diff=this.stats.current-this.stats.first),this.stats.count=t.length,t},e.prototype.updateLegendValues=function(e,t,n){this.valueFormater=e,this.decimals=t,this.scaledDecimals=n},e.prototype.formatValue=function(e){return o.a.isFinite(e)||(e=null),this.valueFormater(e,this.decimals,this.scaledDecimals)},e.prototype.isMsResolutionNeeded=function(){for(var e=0;e<this.datapoints.length;e++)if(null!==this.datapoints[e][1]){var t=this.datapoints[e][1].toString();if(13===t.length&&t%1e3!=0)return!0}return!1},e.prototype.hideFromLegend=function(e){return!(!e.hideEmpty||!this.allIsNull)||(!this.legend||!(!e.hideZero||!this.allIsZero))},e.prototype.setColor=function(e){this.color=e,this.bars.fillColor=e},e}();t.a=p},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(7),r=n(1),i=n.n(r),o=n(5),s=n(52),l=function(){return function(){a.a.bootData.user&&i.a.extend(this,a.a.bootData.user)}}(),c=new(function(){function e(){this.sidemenuSmallBreakpoint=!1,this.sidemenu=s.a.getBool("grafana.sidemenu",!0),a.a.bootData||(a.a.bootData={user:{},settings:{}}),this.user=new l,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders}return e.prototype.hasRole=function(e){return this.user.orgRole===e},e.prototype.isGrafanaVisible=function(){return!(void 0!==document.visibilityState&&"visible"!==document.visibilityState)},e.prototype.toggleSideMenu=function(){this.sidemenu=!this.sidemenu,s.a.set("grafana.sidemenu",this.sidemenu)},e.prototype.hasAccessToExplore=function(){return(this.isEditor||a.a.viewersCanEdit)&&a.a.exploreEnabled},e}());o.c.factory("contextSrv",function(){return c})},function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"f",function(){return p}),n.d(t,"a",function(){return h}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"g",function(){return g});var a,r=n(1),i=n(51),o=n(59),s=n.n(o),l=function(e,t,n,a){return{hue:e,name:t,variants:{light:n[0],dark:n[1]},isPrimary:!!a}},c=function(e){return Object(r.flatten)(Array.from(g().values())).filter(function(t){return t.name===e})[0]},u=function(e,t){return Object(r.flatten)(Array.from(g().values())).filter(function(n){return n.variants[t]===e})[0]},d=function(e){return/^((0x){0,1}|#{0,1})([0-9A-F]{8}|[0-9A-F]{6}|[0-9A-F]{3})$/gi.test(e)},p=function(e,t){if(e&&!(e.indexOf("rgb")>-1)){if(d(e)){var n=u(e,t||i.GrafanaThemeType.Dark);return n?n.name:void 0}return e}},h=function(e){var t=Object(r.flatten)(Array.from(g().values())).filter(function(t){return t.name===e});return t.length>0?t[0]:void 0},f=function(e,t){if(e.indexOf("rgb")>-1||d(e))return e;var n=h(e);return n?t?n.variants[t]:n.variants.dark:new s.a(e).toHexString()},m=function(e,t){return t?e.variants[t]:e.variants.dark},g=function(){return a||(a=function(){var e=new Map,t=[l("green","green",["#56A64B","#73BF69"],!0),l("green","dark-green",["#19730E","#37872D"]),l("green","semi-dark-green",["#37872D","#56A64B"]),l("green","light-green",["#73BF69","#96D98D"]),l("green","super-light-green",["#96D98D","#C8F2C2"])],n=[l("yellow","yellow",["#F2CC0C","#FADE2A"],!0),l("yellow","dark-yellow",["#CC9D00","#E0B400"]),l("yellow","semi-dark-yellow",["#E0B400","#F2CC0C"]),l("yellow","light-yellow",["#FADE2A","#FFEE52"]),l("yellow","super-light-yellow",["#FFEE52","#FFF899"])],a=[l("red","red",["#E02F44","#F2495C"],!0),l("red","dark-red",["#AD0317","#C4162A"]),l("red","semi-dark-red",["#C4162A","#E02F44"]),l("red","light-red",["#F2495C","#FF7383"]),l("red","super-light-red",["#FF7383","#FFA6B0"])],r=[l("blue","blue",["#3274D9","#5794F2"],!0),l("blue","dark-blue",["#1250B0","#1F60C4"]),l("blue","semi-dark-blue",["#1F60C4","#3274D9"]),l("blue","light-blue",["#5794F2","#8AB8FF"]),l("blue","super-light-blue",["#8AB8FF","#C0D8FF"])],i=[l("orange","orange",["#FF780A","#FF9830"],!0),l("orange","dark-orange",["#E55400","#FA6400"]),l("orange","semi-dark-orange",["#FA6400","#FF780A"]),l("orange","light-orange",["#FF9830","#FFB357"]),l("orange","super-light-orange",["#FFB357","#FFCB7D"])],o=[l("purple","purple",["#A352CC","#B877D9"],!0),l("purple","dark-purple",["#7C2EA3","#8F3BB8"]),l("purple","semi-dark-purple",["#8F3BB8","#A352CC"]),l("purple","light-purple",["#B877D9","#CA95E5"]),l("purple","super-light-purple",["#CA95E5","#DEB6F2"])];return e.set("green",t),e.set("yellow",n),e.set("red",a),e.set("blue",r),e.set("orange",i),e.set("purple",o),e}())}},function(e,t,n){"use strict";n.d(t,"b",function(){return s});var a=n(1),r=n.n(a),i=function(){function e(e){var t=this;this.columns=[],this.columnMap={},this.rows=[],this.type="table",e&&(e.columns&&e.columns.forEach(function(e){return t.addColumn(e)}),e.rows&&e.rows.forEach(function(e){return t.addRow(e)}))}return e.prototype.sort=function(e){null===e.col||this.columns.length<=e.col||(this.rows.sort(function(t,n){return+(null==(t=t[e.col]))-+(null==(n=n[e.col]))||+(t>n)||-(t<n)}),e.desc&&this.rows.reverse(),this.columns[e.col].sort=!0,this.columns[e.col].desc=e.desc)},e.prototype.addColumn=function(e){this.columnMap[e.text]||(this.columns.push(e),this.columnMap[e.text]=e)},e.prototype.addRow=function(e){this.rows.push(e)},e}();function o(e,t,n){for(var a=!1,r=0;r<e.length;r++)if(void 0!==t[r]&&void 0!==n[r]){if(t[r]!==n[r])return!1}else void 0!==t[r]&&void 0!==n[r]||(a=!0);return a}function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=e||new i;if(1===arguments.length)return a;if(2===arguments.length)return a.columns=t[0].hasOwnProperty("columns")?t[0].columns.slice():[],a.rows=t[0].hasOwnProperty("rows")?t[0].rows.slice():[],a;var s={},l=t.slice().reduce(function(e,t){return t.columns.forEach(function(t){var n=t.text;void 0===s[n]&&(s[n]=e.length,e.push(t))}),e},[]),c=t.map(function(e){return e.columns.map(function(e){return s[e.text]})}),u=t.reduce(function(e,t,n){var a=c[n];return t.rows.forEach(function(t){var n=[];a.forEach(function(e,a){n[e]=t[a]}),e.push(n)}),e},[]),d={},p=u.reduce(function(e,t,n){if(!d[n]){for(var a=n+1;a<u.length;){var i=r.a.findIndex(u,function(e){return o(l,t,e)},a);if(!(i>-1))break;for(var s=u[i],c=0;c<l.length;c++)void 0===t[c]&&void 0!==s[c]&&(t[c]=s[c]);d[i]=s,a=i+1}e.push(t)}return e},[]);return a.columns=l,a.rows=p,a}t.a=i},,function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return p}),n.d(t,"d",function(){return h});var a=n(2),r=n(674),i=n.n(r),o=n(119),s=function(e){return i()(e,"service")},l=function(e,t){return e.filter(function(e){return e.service===t})},c=function(e,t,n,a){var r=l(e,a).map(function(e){return{value:e.type,name:e.displayName}});return{metricTypes:r,selectedMetricType:r.some(function(e){return e.value===n})?t:r[0].value}},u=function(e,t){return e?o.b.filter(function(n){return-1!==n.valueTypes.indexOf(e)&&-1!==n.metricKinds.indexOf(t)}):[]},d=function(e,t){return t?o.a.filter(function(n){return-1!==n.valueTypes.indexOf(e)&&-1!==n.metricKinds.indexOf(t)}):[]},p=function(e,t){return a.b(void 0,void 0,void 0,function(){var n,r;return a.d(this,function(a){switch(a.label){case 0:return n="handleLabelKeysQuery",[4,e.getLabels(t,n)];case 1:return r=a.sent(),[2,r.meta?Object.keys(r.meta.resourceLabels).map(function(e){return"resource.label."+e}).concat(Object.keys(r.meta.metricLabels).map(function(e){return"metric.label."+e})):[]]}})})},h=function(e,t){var n=e.valueType,r=e.metricKind,i=e.perSeriesAligner,o=u(n,r).map(function(e){return a.a({},e,{label:e.text})}),s=[{label:"Alignment options",expanded:!0,options:o}];return o.some(function(e){return e.value===t.replace(i)})||(i=o.length>0?o[0].value:""),{alignOptions:s,perSeriesAligner:i}}},,function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(59),o=n.n(i),s=4,l=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function c(e){return o()(e).toHsl()}function u(e){return o()(e).toHexString()}var d=function(e){var t=r.a.map(e,c),n=r.a.sortBy(t,["h"]),a=r.a.chunk(n,s),i=r.a.map(a,function(e){return r.a.sortBy(e,"l")}),o=r.a.flattenDeep(r.a.zip.apply(r.a,i));return r.a.map(o,u)}(l),p=n(51);function h(e){var t=e.timeSeries,n=e.nullValueMode;return t.map(function(e,t){for(var a=t%l.length,i=e.target,o=[],s=0,c=-Number.MAX_VALUE,u=Number.MAX_VALUE,d=Number.MAX_VALUE,h=null,f=null,m=null,g=0,v=null,b=null,y=Number.MAX_VALUE,w=!0,x=!0,S=n===p.NullValueMode.Ignore,k=n===p.NullValueMode.AsZero,C=null,E=null,T=0,M=null,_=0,A=!0,D=0;D<e.datapoints.length;D++)if(E=e.datapoints[D][0],"number"==typeof(C=e.datapoints[D][1])){if(null!==E&&"number"!=typeof E)throw{message:"Time series contains non number values"};if(null!==M&&null!==C){var N=C-M;N<y&&(y=N)}if(M=C,null===E){if(S)continue;k&&(E=0)}null!==E&&(r.a.isNumber(E)&&(s+=E,w=!1,T++),E>c&&(c=E),E<u&&(u=E),null===m?m=E:_>E?(A=!1,D===e.datapoints.length-1&&(g+=E)):(g+=A?E-_:E,A=!0),_=E,E<d&&E>0&&(d=E),0!==E&&(x=!1)),o.push([C,E])}c===-Number.MAX_VALUE&&(c=null),u===Number.MAX_VALUE&&(u=null),o.length&&!w&&(h=s/T,null===(f=o[o.length-1][1])&&o.length>1&&(f=o[o.length-2][1])),null!==c&&null!==u&&(b=c-u),null!==f&&null!==m&&(v=f-m);var P=o.length;return{data:o,label:i,color:l[a],allIsZero:x,allIsNull:w,stats:{total:s,min:u,max:c,current:f,logmin:d,avg:h,diff:v,delta:g,timeStep:y,range:b,count:P,first:m}}})}var f,m,g=n(4),v=n.n(g);!function(e){e.Year="year",e.Month="month",e.Week="week",e.Day="day",e.Hour="hour",e.Minute="minute",e.Second="second",e.Millisecond="millisecond"}(m||(m={}));var b=((f={})[m.Year]=31536e3,f[m.Month]=2592e3,f[m.Week]=604800,f[m.Day]=86400,f[m.Hour]=3600,f[m.Minute]=60,f[m.Second]=1,f[m.Millisecond]=.001,f);function y(e,t,n){return null===e?"":Math.abs(e)<1e3?K(e,t)+" ns":Math.abs(e)<1e6?X(e/1e3,t,n,3," µs"):Math.abs(e)<1e9?X(e/1e6,t,n,6," ms"):Math.abs(e)<6e10?X(e/1e9,t,n,9," s"):X(e/6e10,t,n,12," min")}function w(e,t,n){return null===e?"":Math.abs(e)<1e3?K(e,t)+" µs":Math.abs(e)<1e6?X(e/1e3,t,n,3," ms"):X(e/1e6,t,n,6," s")}function x(e,t,n){return null===e?"":Math.abs(e)<1e3?K(e,t)+" ms":Math.abs(e)<6e4?X(e/1e3,t,n,3," s"):Math.abs(e)<36e5?X(e/6e4,t,n,5," min"):Math.abs(e)<864e5?X(e/36e5,t,n,7," hour"):Math.abs(e)<31536e6?X(e/864e5,t,n,8," day"):X(e/31536e6,t,n,10," year")}function S(e,t){if(null!==e&&void 0!==e&&null!==t&&void 0!==t)return e-t}function k(e,t,n){return null===e?"":Math.abs(e)<1e-6?X(1e9*e,t,S(n,t),-9," ns"):Math.abs(e)<.001?X(1e6*e,t,S(n,t),-6," µs"):Math.abs(e)<1?X(1e3*e,t,S(n,t),-3," ms"):Math.abs(e)<60?K(e,t)+" s":Math.abs(e)<3600?X(e/60,t,n,1," min"):Math.abs(e)<86400?X(e/3600,t,n,4," hour"):Math.abs(e)<604800?X(e/86400,t,n,5," day"):Math.abs(e)<31536e3?X(e/604800,t,n,6," week"):X(e/31556900,t,n,7," year")}function C(e,t,n){return null===e?"":Math.abs(e)<60?K(e,t)+" min":Math.abs(e)<1440?X(e/60,t,n,2," hour"):Math.abs(e)<10080?X(e/1440,t,n,3," day"):Math.abs(e)<604800?X(e/10080,t,n,4," week"):X(e/525948,t,n,5," year")}function E(e,t,n){return null===e?"":Math.abs(e)<24?K(e,t)+" hour":Math.abs(e)<168?X(e/24,t,n,2," day"):Math.abs(e)<8760?X(e/168,t,n,3," week"):X(e/8760,t,n,4," year")}function T(e,t,n){return null===e?"":Math.abs(e)<7?K(e,t)+" day":Math.abs(e)<365?X(e/7,t,n,2," week"):X(e/365,t,n,3," year")}function M(e,t,n){if(null===e)return"";if(0===e)return"0 "+n+"s";if(e<0)return M(-e,t,n)+" ago";var a=[{long:m.Year},{long:m.Month},{long:m.Week},{long:m.Day},{long:m.Hour},{long:m.Minute},{long:m.Second},{long:m.Millisecond}];e*=1e3*b[n];var r=[],i=!1,o=0;null===t&&void 0===t||(o=t);for(var s=0;s<a.length&&o>=0;s++){var l=1e3*b[a[s].long],c=e/l;if(c>=1||i){i=!0;var u=Math.floor(c),d=a[s].long+(1!==u?"s":"");r.push(u+" "+d),e%=l,o--}}return r.join(", ")}function _(e,t){if(null===e)return"";if(e<1e3)return v.a.utc(e).format("SSS\\m\\s");if(e<6e4){var n="ss\\s:SSS\\m\\s";return 0===t&&(n="ss\\s"),v.a.utc(e).format(n)}if(e<36e5){var a="mm\\m:ss\\s:SSS\\m\\s";return 0===t?a="mm\\m":1===t&&(a="mm\\m:ss\\s"),v.a.utc(e).format(a)}var r="mm\\m:ss\\s:SSS\\m\\s",i=("0"+Math.floor(v.a.duration(e,"milliseconds").asHours())).slice(-2)+"h";return 0===t?r="":1===t?r="mm\\m":2===t&&(r="mm\\m:ss\\s"),r?i+":"+v.a.utc(e).format(r):i}function A(e,t){return M(e,t,m.Millisecond)}function D(e,t){return M(e,t,m.Second)}function N(e){var t=[],n=Math.floor(e/3600),a=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return n>9?t.push(""+n):t.push("0"+n),a>9?t.push(""+a):t.push("0"+a),r>9?t.push(""+r):t.push("0"+r),t.join(":")}function P(e,t,n){return k(e,t,n)}function O(e,t){return _(e,t)}function I(e,t){return _(1e3*e,t)}function $(e,t,n,a){var r=a?v.a.utc(e):v()(e);return v()().isSame(e,"day")?r.format("HH:mm:ss"):r.format("YYYY-MM-DD HH:mm:ss")}function F(e,t,n,a){var r=a?v.a.utc(e):v()(e);return v()().isSame(e,"day")?r.format("h:mm:ss a"):r.format("MM/DD/YYYY h:mm:ss a")}function q(e,t,n,a){return(a?v.a.utc(e):v()(e)).fromNow()}function R(e,t){return null===e?"":K(e,t)+"%"}function L(e,t){return null===e?"":K(100*e,t)+"%"}function j(e,t){if(null==e)return"";var n=U(e,t);return"-"===n.substring(0,1)?"-0x"+n.substring(1):"0x"+n}function U(e,t){return null==e?"":parseFloat(K(e,t)).toString(16).toUpperCase()}function V(e,t){return null==e?"":e.toExponential(t)}function B(e){var t=Z(1e3,["","K","M","B","T"]);return function(n,a,r){if(null===n)return"";var i=t(n,a,r);return e+i}}function Q(e,t){return void 0===t&&(t=0),Z(1024,["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"].slice(t).map(function(t){return" "+t+e}))}function z(e,t){void 0===t&&(t=0);var n=["n","µ","m","","k","M","G","T","P","E","Z","Y"];return Z(1e3,(n=n.slice(3+(t||0))).map(function(t){return" "+t+e}))}var H=function(){return[{name:"Misc",formats:[{name:"none",id:"none",fn:K},{name:"short",id:"short",fn:Z(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"percent (0-100)",id:"percent",fn:R},{name:"percent (0.0-1.0)",id:"percentunit",fn:L},{name:"Humidity (%H)",id:"humidity",fn:J("%H")},{name:"decibel",id:"dB",fn:J("dB")},{name:"hexadecimal (0x)",id:"hex0x",fn:j},{name:"hexadecimal",id:"hex",fn:U},{name:"scientific notation",id:"sci",fn:V},{name:"locale format",id:"locale",fn:ee}]},{name:"Acceleration",formats:[{name:"Meters/sec²",id:"accMS2",fn:J("m/sec²")},{name:"Feet/sec²",id:"accFS2",fn:J("f/sec²")},{name:"G unit",id:"accG",fn:J("g")}]},{name:"Angle",formats:[{name:"Degrees (°)",id:"degree",fn:J("°")},{name:"Radians",id:"radian",fn:J("rad")},{name:"Gradian",id:"grad",fn:J("grad")}]},{name:"Area",formats:[{name:"Square Meters (m²)",id:"areaM2",fn:J("m²")},{name:"Square Feet (ft²)",id:"areaF2",fn:J("ft²")},{name:"Square Miles (mi²)",id:"areaMI2",fn:J("mi²")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:z("FLOP/s")},{name:"MFLOP/s",id:"mflops",fn:z("FLOP/s",2)},{name:"GFLOP/s",id:"gflops",fn:z("FLOP/s",3)},{name:"TFLOP/s",id:"tflops",fn:z("FLOP/s",4)},{name:"PFLOP/s",id:"pflops",fn:z("FLOP/s",5)},{name:"EFLOP/s",id:"eflops",fn:z("FLOP/s",6)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:J("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:J("ppb")},{name:"nanogram per cubic meter (ng/m³)",id:"conngm3",fn:J("ng/m³")},{name:"nanogram per normal cubic meter (ng/Nm³)",id:"conngNm3",fn:J("ng/Nm³")},{name:"microgram per cubic meter (μg/m³)",id:"conμgm3",fn:J("μg/m³")},{name:"microgram per normal cubic meter (μg/Nm³)",id:"conμgNm3",fn:J("μg/Nm³")},{name:"milligram per cubic meter (mg/m³)",id:"conmgm3",fn:J("mg/m³")},{name:"milligram per normal cubic meter (mg/Nm³)",id:"conmgNm3",fn:J("mg/Nm³")},{name:"gram per cubic meter (g/m³)",id:"congm3",fn:J("g/m³")},{name:"gram per normal cubic meter (g/Nm³)",id:"congNm3",fn:J("g/Nm³")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:J("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:J("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:B("$")},{name:"Pounds (£)",id:"currencyGBP",fn:B("£")},{name:"Euro (€)",id:"currencyEUR",fn:B("€")},{name:"Yen (¥)",id:"currencyJPY",fn:B("¥")},{name:"Rubles (₽)",id:"currencyRUB",fn:B("₽")},{name:"Hryvnias (₴)",id:"currencyUAH",fn:B("₴")},{name:"Real (R$)",id:"currencyBRL",fn:B("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:B("kr")},{name:"Icelandic Króna (kr)",id:"currencyISK",fn:B("kr")},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:B("kr")},{name:"Swedish Krona (kr)",id:"currencySEK",fn:B("kr")},{name:"Czech koruna (czk)",id:"currencyCZK",fn:B("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:B("CHF")},{name:"Polish Złoty (PLN)",id:"currencyPLN",fn:B("PLN")},{name:"Bitcoin (฿)",id:"currencyBTC",fn:B("฿")}]},{name:"Data (IEC)",formats:[{name:"bits",id:"bits",fn:Q("b")},{name:"bytes",id:"bytes",fn:Q("B")},{name:"kibibytes",id:"kbytes",fn:Q("B",1)},{name:"mebibytes",id:"mbytes",fn:Q("B",2)},{name:"gibibytes",id:"gbytes",fn:Q("B",3)}]},{name:"Data (Metric)",formats:[{name:"bits",id:"decbits",fn:z("d")},{name:"bytes",id:"decbytes",fn:z("B")},{name:"kilobytes",id:"deckbytes",fn:z("B",1)},{name:"megabytes",id:"decmbytes",fn:z("B",2)},{name:"gigabytes",id:"decgbytes",fn:z("B",3)}]},{name:"Data Rate",formats:[{name:"packets/sec",id:"pps",fn:z("pps")},{name:"bits/sec",id:"bps",fn:z("bps")},{name:"bytes/sec",id:"Bps",fn:z("B/s")},{name:"kilobytes/sec",id:"KBs",fn:z("Bs",1)},{name:"kilobits/sec",id:"Kbits",fn:z("bps",1)},{name:"megabytes/sec",id:"MBs",fn:z("Bs",2)},{name:"megabits/sec",id:"Mbits",fn:z("bps",2)},{name:"gigabytes/sec",id:"GBs",fn:z("Bs",3)},{name:"gigabits/sec",id:"Gbits",fn:z("bps",3)}]},{name:"Date & Time",formats:[{name:"YYYY-MM-DD HH:mm:ss",id:"dateTimeAsIso",fn:$},{name:"DD/MM/YYYY h:mm:ss a",id:"dateTimeAsUS",fn:F},{name:"From Now",id:"dateTimeFromNow",fn:q}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:z("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:z("W",1)},{name:"Milliwatt (mW)",id:"mwatt",fn:z("W",-1)},{name:"Watt per square meter (W/m²)",id:"Wm2",fn:J("W/m²")},{name:"Volt-ampere (VA)",id:"voltamp",fn:z("VA")},{name:"Kilovolt-ampere (kVA)",id:"kvoltamp",fn:z("VA",1)},{name:"Volt-ampere reactive (var)",id:"voltampreact",fn:z("var")},{name:"Kilovolt-ampere reactive (kvar)",id:"kvoltampreact",fn:z("var",1)},{name:"Watt-hour (Wh)",id:"watth",fn:z("Wh")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:z("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:z("W/Min",1)},{name:"Joule (J)",id:"joule",fn:z("J")},{name:"Electron volt (eV)",id:"ev",fn:z("eV")},{name:"Ampere (A)",id:"amp",fn:z("A")},{name:"Kiloampere (kA)",id:"kamp",fn:z("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:z("A",-1)},{name:"Volt (V)",id:"volt",fn:z("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:z("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:z("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:z("dBm")},{name:"Ohm (Ω)",id:"ohm",fn:z("Ω")},{name:"Lumens (Lm)",id:"lumens",fn:z("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:J("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:J("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:J("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:J("cfm")},{name:"Litre/hour",id:"litreh",fn:J("l/h")},{name:"Litre/min (l/min)",id:"flowlpm",fn:J("l/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:J("mL/min")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:z("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:z("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:z("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:z("N",1)}]},{name:"Hash Rate",formats:[{name:"hashes/sec",id:"Hs",fn:z("H/s")},{name:"kilohashes/sec",id:"KHs",fn:z("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:z("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:z("H/s",3)},{name:"terahashes/sec",id:"THs",fn:z("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:z("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:z("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:z("g",-1)},{name:"gram (g)",id:"massg",fn:z("g")},{name:"kilogram (kg)",id:"masskg",fn:z("g",1)},{name:"metric ton (t)",id:"masst",fn:J("t")}]},{name:"length",formats:[{name:"millimetre (mm)",id:"lengthmm",fn:z("m",-1)},{name:"feet (ft)",id:"lengthft",fn:J("ft")},{name:"meter (m)",id:"lengthm",fn:z("m")},{name:"kilometer (km)",id:"lengthkm",fn:z("m",1)},{name:"mile (mi)",id:"lengthmi",fn:J("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:z("bar",-1)},{name:"Bars",id:"pressurebar",fn:z("bar")},{name:"Kilobars",id:"pressurekbar",fn:z("bar",1)},{name:"Hectopascals",id:"pressurehpa",fn:J("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:J("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:J('"Hg')},{name:"PSI",id:"pressurepsi",fn:Z(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:z("Bq")},{name:"curie (Ci)",id:"radci",fn:z("Ci")},{name:"Gray (Gy)",id:"radgy",fn:z("Gy")},{name:"rad",id:"radrad",fn:z("rad")},{name:"Sievert (Sv)",id:"radsv",fn:z("Sv")},{name:"rem",id:"radrem",fn:z("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:z("C/kg")},{name:"roentgen (R)",id:"radr",fn:z("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:z("Sv/h")}]},{name:"Temperature",formats:[{name:"Celsius (°C)",id:"celsius",fn:J("°C")},{name:"Farenheit (°F)",id:"farenheit",fn:J("°F")},{name:"Kelvin (K)",id:"kelvin",fn:J("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:z("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:y},{name:"microseconds (µs)",id:"µs",fn:w},{name:"milliseconds (ms)",id:"ms",fn:x},{name:"seconds (s)",id:"s",fn:k},{name:"minutes (m)",id:"m",fn:C},{name:"hours (h)",id:"h",fn:E},{name:"days (d)",id:"d",fn:T},{name:"duration (ms)",id:"dtdurationms",fn:A},{name:"duration (s)",id:"dtdurations",fn:D},{name:"duration (hh:mm:ss)",id:"dthms",fn:N},{name:"Timeticks (s/100)",id:"timeticks",fn:P},{name:"clock (ms)",id:"clockms",fn:O},{name:"clock (s)",id:"clocks",fn:I}]},{name:"Throughput",formats:[{name:"ops/sec (ops)",id:"ops",fn:te("ops")},{name:"requests/sec (rps)",id:"reqps",fn:te("reqps")},{name:"reads/sec (rps)",id:"rps",fn:te("rps")},{name:"writes/sec (wps)",id:"wps",fn:te("wps")},{name:"I/O ops/sec (iops)",id:"iops",fn:te("iops")},{name:"ops/min (opm)",id:"opm",fn:te("opm")},{name:"reads/min (rpm)",id:"rpm",fn:te("rpm")},{name:"writes/min (wpm)",id:"wpm",fn:te("wpm")}]},{name:"Velocity",formats:[{name:"metres/second (m/s)",id:"velocityms",fn:J("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:J("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:J("mph")},{name:"knot (kn)",id:"velocityknot",fn:J("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:z("L",-1)},{name:"litre (L)",id:"litre",fn:z("L")},{name:"cubic metre",id:"m3",fn:J("m³")},{name:"Normal cubic metre",id:"Nm3",fn:J("Nm³")},{name:"cubic decimetre",id:"dm3",fn:J("dm³")},{name:"gallons",id:"gallons",fn:J("gal")}]}]},G=[],W={},Y=!1;function K(e,t){if(null===e)return"";var n=t?Math.pow(10,Math.max(0,t)):1,a=String(Math.round(e*n)/n);if(-1!==a.indexOf("e")||0===e)return a;if(null!=t){var r=a.indexOf("."),i=-1===r?0:a.length-r-1;if(i<t)return(i?a:a+".")+String(n).substr(1,t-i)}return a}function X(e,t,n,a,r){return n?a?K(e,n+a)+r:K(e,n)+r:K(e,t)+r}function J(e){return function(t,n){return null===t?"":K(t,n)+" "+e}}function Z(e,t){return function(n,a,r){if(null===n)return"";for(var i=0,o=t.length;Math.abs(n)>=e;)if(n/=e,++i>=o)return"NA";return i>0&&null!==r&&void 0!==r&&(a=r+3*i),K(n,a)+t[i]}}function ee(e,t){return null==e?"":e.toLocaleString(void 0,{maximumFractionDigits:t})}function te(e){var t=Z(1e3,["","K","M","B","T"]);return function(n,a,r){return null===n?"":t(n,a,r)+" "+e}}function ne(){for(var e=0,t=G=H();e<t.length;e++)for(var n=0,a=t[e].formats;n<a.length;n++){var r=a[n];W[r.id]=r.fn}Y=!0}function ae(e){return Y||ne(),W[e]}function re(){return Y||ne(),W}function ie(){return Y||ne(),G.map(function(e){return{text:e.name,submenu:e.formats.map(function(e){return{text:e.name,value:e.id}})}})}var oe=n(80);n.d(t,"u",function(){return h}),n.d(t,"y",function(){return K}),n.d(t,"z",function(){return X}),n.d(t,"A",function(){return J}),n.d(t,"v",function(){return Z}),n.d(t,"t",function(){return ee}),n.d(t,"w",function(){return te}),n.d(t,"q",function(){return ae}),n.d(t,"s",function(){return re}),n.d(t,"r",function(){return ie}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return 14}),n.d(t,"b",function(){return"rgba(0, 211, 255, 1)"}),n.d(t,"d",function(){return"rgba(11, 237, 50, 1)"}),n.d(t,"a",function(){return"rgba(237, 46, 24, 1)"}),n.d(t,"c",function(){return"rgba(150, 150, 150, 1)"}),n.d(t,"g",function(){return"rgba(247, 149, 32, 1)"}),n.d(t,"h",function(){return.09}),n.d(t,"i",function(){return l}),n.d(t,"x",function(){return d}),n.d(t,"l",function(){return oe.c}),n.d(t,"k",function(){return oe.b}),n.d(t,"o",function(){return oe.f}),n.d(t,"j",function(){return oe.a}),n.d(t,"n",function(){return oe.e}),n.d(t,"m",function(){return oe.d}),n.d(t,"p",function(){return oe.g})},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return p});var a,r=n(2),i=n(14);!function(e){e.LoadPlugins="LOAD_PLUGINS",e.LoadPluginDashboards="LOAD_PLUGIN_DASHBOARDS",e.LoadedPluginDashboards="LOADED_PLUGIN_DASHBOARDS",e.SetPluginsSearchQuery="SET_PLUGIN_SEARCH_QUERY",e.SetLayoutMode="SET_LAYOUT_MODE"}(a||(a={}));var o=function(e){return{type:a.SetLayoutMode,payload:e}},s=function(e){return{type:a.SetPluginsSearchQuery,payload:e}},l=function(e){return{type:a.LoadPlugins,payload:e}},c=function(){return{type:a.LoadPluginDashboards}},u=function(e){return{type:a.LoadedPluginDashboards,payload:e}};function d(){var e=this;return function(t){return r.b(e,void 0,void 0,function(){var e;return r.d(this,function(n){switch(n.label){case 0:return[4,Object(i.a)().get("api/plugins",{embedded:0})];case 1:return e=n.sent(),t(l(e)),[2]}})})}}function p(){var e=this;return function(t,n){return r.b(e,void 0,void 0,function(){var e,a;return r.d(this,function(r){switch(r.label){case 0:return t(c()),e=n().dataSources.dataSource.type,[4,Object(i.a)().get("api/plugins/"+e+"/dashboards")];case 1:return a=r.sent(),t(u(a)),[2]}})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"h",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"g",function(){return h}),n.d(t,"c",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"i",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"b",function(){return y});var a,r=n(2),i=n(14),o=n(27),s=n(204),l=n(9);!function(e){e.LoadFolder="LOAD_FOLDER",e.SetFolderTitle="SET_FOLDER_TITLE",e.SaveFolder="SAVE_FOLDER",e.LoadFolderPermissions="LOAD_FOLDER_PERMISSONS"}(a||(a={}));var c=function(e){return{type:a.LoadFolder,payload:e}},u=function(e){return{type:a.SetFolderTitle,payload:e}},d=function(e){return{type:a.LoadFolderPermissions,payload:e}};function p(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(a){switch(a.label){case 0:return[4,Object(i.a)().getFolderByUid(e)];case 1:return t=a.sent(),n(c(t)),n(Object(o.d)(Object(s.a)(t))),[2]}})})}}function h(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(a){switch(a.label){case 0:return[4,Object(i.a)().put("/api/folders/"+e.uid,{title:e.title,version:e.version})];case 1:return t=a.sent(),l.b.emit("alert-success",["Folder saved"]),n(Object(o.c)({path:t.url+"/settings"})),[2]}})})}}function f(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return[4,Object(i.a)().deleteFolder(e,!0)];case 1:return t.sent(),n(Object(o.c)({path:"dashboards"})),[2]}})})}}function m(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(a){switch(a.label){case 0:return[4,Object(i.a)().get("/api/folders/"+e+"/permissions")];case 1:return t=a.sent(),n(d(t)),[2]}})})}}function g(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function v(e,t){var n=this;return function(a,o){return r.b(n,void 0,void 0,function(){var n,s,l,c,u,d;return r.d(this,function(r){switch(r.label){case 0:for(n=o().folder,s=[],l=0,c=n.permissions;l<c.length;l++)(u=c[l]).inherited||(d=g(u),e===u&&(d.permission=t),s.push(d));return[4,Object(i.a)().post("/api/folders/"+n.uid+"/permissions",{items:s})];case 1:return r.sent(),[4,a(m(n.uid))];case 2:return r.sent(),[2]}})})}}function b(e){var t=this;return function(n,a){return r.b(t,void 0,void 0,function(){var t,o,s,l,c;return r.d(this,function(r){switch(r.label){case 0:for(t=a().folder,o=[],s=0,l=t.permissions;s<l.length;s++)(c=l[s]).inherited||c===e||o.push(g(c));return[4,Object(i.a)().post("/api/folders/"+t.uid+"/permissions",{items:o})];case 1:return r.sent(),[4,n(m(t.uid))];case 2:return r.sent(),[2]}})})}}function y(e){var t=this;return function(n,a){return r.b(t,void 0,void 0,function(){var t,o,s,l,c;return r.d(this,function(r){switch(r.label){case 0:for(t=a().folder,o=[],s=0,l=t.permissions;s<l.length;s++)(c=l[s]).inherited||o.push(g(c));return o.push({userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}),[4,Object(i.a)().post("/api/folders/"+t.uid+"/permissions",{items:o})];case 1:return r.sent(),[4,n(m(t.uid))];case 2:return r.sent(),[2]}})})}}},,,,,,function(e,t,n){"use strict";var a=n(2),r=n(19),i=n(1),o=n.n(i),s=n(33);function l(e){return e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}var c=function(){function e(){this.regex=s.c,this.index={},this.grafanaVariables={},this.builtIns={},this.timeRange=null,this.builtIns.__interval={text:"1s",value:"1s"},this.builtIns.__interval_ms={text:"100",value:"100"},this.variables=[]}return e.prototype.init=function(e,t){this.variables=e,this.timeRange=t,this.updateIndex()},e.prototype.updateIndex=function(){var e;if(this.index=this.variables.reduce(function(e,t){return t.current&&(t.current.isNone||function(e){return e||""===e}(t.current.value))&&(e[t.name]=t),e},{}),this.timeRange){var t=this.timeRange.from.valueOf().toString(),n=this.timeRange.to.valueOf().toString();this.index=a.a({},this.index,((e={}).__from={current:{value:t,text:t}},e.__to={current:{value:n,text:n}},e))}},e.prototype.updateTimeRange=function(e){this.timeRange=e,this.updateIndex()},e.prototype.variableInitialized=function(e){this.index[e.name]=e},e.prototype.getAdhocFilters=function(e){var t=[];if(this.variables)for(var n=0;n<this.variables.length;n++){var a=this.variables[n];"adhoc"===a.type&&(null===a.datasource||a.datasource===e?t=t.concat(a.filters):0===a.datasource.indexOf("$")&&this.replace(a.datasource)===e&&(t=t.concat(a.filters)))}return t},e.prototype.luceneFormat=function(e){return"string"==typeof e?l(e):e instanceof Array&&0===e.length?"__empty__":"("+o.a.map(e,function(e){return'"'+l(e)+'"'}).join(" OR ")+")"},e.prototype.encodeURIComponentStrict=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},e.prototype.formatValue=function(e,t,n){if(n=n||{},"function"==typeof t)return t(e,n,this.formatValue);switch(t){case"regex":if("string"==typeof e)return r.a.regexEscape(e);var a=o.a.map(e,r.a.regexEscape);return 1===a.length?a[0]:"("+a.join("|")+")";case"lucene":return this.luceneFormat(e);case"pipe":return"string"==typeof e?e:e.join("|");case"distributed":return"string"==typeof e?e:this.distributeVariable(e,n.name);case"csv":return o.a.isArray(e)?e.join(","):e;case"json":return JSON.stringify(e);case"percentencode":return o.a.isArray(e)?this.encodeURIComponentStrict("{"+e.join(",")+"}"):this.encodeURIComponentStrict(e);default:return o.a.isArray(e)?"{"+e.join(",")+"}":e}},e.prototype.setGrafanaVariable=function(e,t){this.grafanaVariables[e]=t},e.prototype.getVariableName=function(e){this.regex.lastIndex=0;var t=this.regex.exec(e);return t?t.slice(1).find(function(e){return void 0!==e}):null},e.prototype.variableExists=function(e){var t=this.getVariableName(e);return t&&void 0!==this.index[t]},e.prototype.highlightVariablesAsHtml=function(e){var t=this;return e&&o.a.isString(e)?(e=o.a.escape(e),this.regex.lastIndex=0,e.replace(this.regex,function(e,n,a,r,i){return t.index[n||a||i]||t.builtIns[n||a||i]?'<span class="template-variable">'+e+"</span>":e})):e},e.prototype.getAllValue=function(e){if(e.allValue)return e.allValue;for(var t=[],n=1;n<e.options.length;n++)t.push(e.options[n].value);return t},e.prototype.replace=function(e,t,n){var a,r,i,o,s=this;return e?(this.regex.lastIndex=0,e.replace(this.regex,function(e,l,c,u,d,p){return a=s.index[l||c||d],o=u||p||n,t&&(i=t[l||c||d])?s.formatValue(i.value,o,a):a?(r=s.grafanaVariables[a.current.value])?s.formatValue(r,o,a):(i=a.current.value,s.isAllValue(i)&&(i=s.getAllValue(a),a.allValue)?s.replace(i):s.formatValue(i,o,a)):e})):e},e.prototype.isAllValue=function(e){return"$__all"===e||Array.isArray(e)&&"$__all"===e[0]},e.prototype.replaceWithText=function(e,t){var n,a=this;return e?(this.regex.lastIndex=0,e.replace(this.regex,function(e,r,i,o,s){if(t){var l=t[r||i||s];if(l)return l.text}if(!(n=a.index[r||i||s]))return e;var c=a.grafanaVariables[n.current.value];return"string"==typeof c?c:n.current.text})):e},e.prototype.fillVariableValuesForUrl=function(e,t){o.a.each(this.variables,function(n){if(t&&void 0!==t[n.name]){if(t[n.name].skipUrlSync)return;e["var-"+n.name]=t[n.name].value}else{if(n.skipUrlSync)return;e["var-"+n.name]=n.getValueForUrl()}})},e.prototype.distributeVariable=function(e,t){return(e=o.a.map(e,function(e,n){return 0!==n?t+"="+e:e})).join(",")},e}();t.a=new c},,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"f",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return h});var a,r=n(2),i=n(14);!function(e){e.LoadUsers="LOAD_USERS",e.LoadInvitees="LOAD_INVITEES",e.SetUsersSearchQuery="SET_USERS_SEARCH_QUERY"}(a||(a={}));var o=function(e){return{type:a.LoadUsers,payload:e}},s=function(e){return{type:a.LoadInvitees,payload:e}},l=function(e){return{type:a.SetUsersSearchQuery,payload:e}};function c(){var e=this;return function(t){return r.b(e,void 0,void 0,function(){var e;return r.d(this,function(n){switch(n.label){case 0:return[4,Object(i.a)().get("/api/org/users")];case 1:return e=n.sent(),t(o(e)),[2]}})})}}function u(){var e=this;return function(t){return r.b(e,void 0,void 0,function(){var e;return r.d(this,function(n){switch(n.label){case 0:return[4,Object(i.a)().get("/api/org/invites")];case 1:return e=n.sent(),t(s(e)),[2]}})})}}function d(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return[4,Object(i.a)().patch("/api/org/users/"+e.userId,{role:e.role})];case 1:return t.sent(),n(c()),[2]}})})}}function p(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return[4,Object(i.a)().delete("/api/org/users/"+e)];case 1:return t.sent(),n(c()),[2]}})})}}function h(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return[4,Object(i.a)().patch("/api/org/invites/"+e+"/revoke",{})];case 1:return t.sent(),n(u()),[2]}})})}}},,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var a,r=n(1),i=n.n(r),o=n(5),s=n(7),l=n(113),c=function(){function e(e,t,n,a){this.$q=e,this.$injector=t,this.$rootScope=n,this.templateSrv=a,this.init()}return e.$inject=["$q","$injector","$rootScope","templateSrv"],e.prototype.init=function(){this.datasources={}},e.prototype.get=function(e){return e?"default"===(e=this.templateSrv.replace(e))?this.get(s.a.defaultDatasource):this.datasources[e]?this.$q.when(this.datasources[e]):this.loadDatasource(e):this.get(s.a.defaultDatasource)},e.prototype.loadDatasource=function(e){var t=this,n=s.a.datasources[e];if(!n)return this.$q.reject({message:"Datasource named "+e+" was not found"});var a=this.$q.defer(),r=n.meta;return Object(l.a)(r.module).then(function(i){if(t.datasources[e])a.resolve(t.datasources[e]);else{if(!i.Datasource)throw new Error("Plugin module is missing Datasource constructor");var o=t.$injector.instantiate(i.Datasource,{instanceSettings:n});o.meta=r,o.name=e,o.pluginExports=i,t.datasources[e]=o,a.resolve(o)}}).catch(function(e){t.$rootScope.appEvent("alert-error",[n.name+" plugin failed",e.toString()])}),a.promise},e.prototype.getAll=function(){var e=s.a.datasources;return Object.keys(e).map(function(t){return e[t]})},e.prototype.getExternal=function(){var e=this.getAll().filter(function(e){return!e.meta.builtIn});return i.a.sortBy(e,["name"])},e.prototype.getAnnotationSources=function(){var e=[];return this.addDataSourceVariables(e),i.a.each(s.a.datasources,function(t){t.meta&&t.meta.annotations&&e.push(t)}),e},e.prototype.getMetricSources=function(e){var t=[];return i.a.each(s.a.datasources,function(e,n){if(e.meta&&e.meta.metrics){var a={value:n,name:n,meta:e.meta,sort:n};"grafana"===e.meta.id?a.sort=String.fromCharCode(253):"mixed"===e.meta.id&&(a.sort=String.fromCharCode(254)),t.push(a),n===s.a.defaultDatasource&&(a={value:null,name:"default",meta:e.meta,sort:n},t.push(a))}}),e&&e.skipVariables||this.addDataSourceVariables(t),t.sort(function(e,t){return e.sort.toLowerCase()>t.sort.toLowerCase()?1:e.sort.toLowerCase()<t.sort.toLowerCase()?-1:0}),t},e.prototype.addDataSourceVariables=function(e){for(var t=0;t<this.templateSrv.variables.length;t++){var n=this.templateSrv.variables[t];if("datasource"===n.type){var a=n.current.value;"default"===a&&(a=s.a.defaultDatasource);var r=s.a.datasources[a];if(r){var i="$"+n.name;e.push({name:i,value:i,meta:r.meta,sort:i})}}}},e}();function u(e){a=e}function d(){return a}o.c.service("datasourceSrv",c)},,function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return c});var a=function(e){return e.searchQuery},r=function(e){return e.searchMemberQuery},i=function(e){return e.groups},o=function(e){return e.teams.length},s=function(e,t){return e.team.id===parseInt(t,10)?e.team:null},l=function(e){var t=RegExp(e.searchQuery,"i");return e.teams.filter(function(e){return t.test(e.name)})},c=function(e){var t=RegExp(e.searchMemberQuery,"i");return e.members.filter(function(e){return t.test(e.login)||t.test(e.email)})}},function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return c});var a=function(e){var t=new RegExp(e.searchQuery,"i");return e.dataSources.filter(function(e){return t.test(e.name)||t.test(e.database)})},r=function(e){var t=new RegExp(e.dataSourceTypeSearchQuery,"i");return e.dataSourceTypes.filter(function(e){return t.test(e.name)})},i=function(e,t){return e.dataSource.id===parseInt(t,10)?e.dataSource:{}},o=function(e,t){return e.dataSourceMeta.id===t?e.dataSourceMeta:{}},s=function(e){return e.searchQuery},l=function(e){return e.layoutMode},c=function(e){return e.dataSourcesCount}},,,,function(e,t,n){"use strict";var a,r,i=n(2),o=n(1),s=n.n(o),l=n(6),c=n(7);n.d(t,"a",function(){return r}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"g",function(){return y}),n.d(t,"i",function(){return w}),n.d(t,"h",function(){return x}),n.d(t,"j",function(){return S}),function(e){e.emerg="critical",e.alert="critical",e.crit="critical",e.critical="critical",e.warn="warning",e.warning="warning",e.err="error",e.eror="error",e.error="error",e.info="info",e.notice="info",e.dbug="debug",e.debug="debug",e.trace="trace",e.unkown="unkown"}(r||(r={}));var u,d,p,h=((a={})[r.critical]=l.colors[7],a[r.warning]=l.colors[1],a[r.error]=l.colors[4],a[r.info]=l.colors[0],a[r.debug]=l.colors[5],a[r.trace]=l.colors[2],a[r.unkown]=function(e,t){return c.a.bootData.user.lightTheme?t:e}("#8e8e8e","#dde4ed"),a);!function(e){e[e.Number=0]="Number",e[e.String=1]="String",e[e.LabelsMap=2]="LabelsMap"}(u||(u={})),function(e){e.none="No de-duplication",e.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",e.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",e.signature="De-duplication of successive lines that have identical punctuation and whitespace."}(d||(d={})),function(e){e.none="none",e.exact="exact",e.numbers="numbers",e.signature="signature"}(p||(p={}));var f=/(?:^|\s)(\w+)=("[^"]*"|\S+)/,m={JSON:{buildMatcher:function(e){return new RegExp('(?:{|,)\\s*"'+e+'"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?')},getFields:function(e){var t=[];try{var n=JSON.parse(e);s.a.map(n,function(n,a){var r=new RegExp('"'+a+'"\\s*:\\s*"?'+s.a.escapeRegExp(JSON.stringify(n))+'"?'),i=e.match(r);i&&t.push(i[0])})}catch(e){}return t},getLabelFromField:function(e){return(e.match(/^"(\w+)"\s*:/)||[])[1]},getValueFromField:function(e){return(e.match(/:\s*(.*)$/)||[])[1]},test:function(e){try{return JSON.parse(e)}catch(e){}}},logfmt:{buildMatcher:function(e){return new RegExp("(?:^|\\s)"+e+'=("[^"]*"|\\S+)')},getFields:function(e){var t=[];return e.replace(new RegExp(f,"g"),function(e){return t.push(e.trim()),""}),t},getLabelFromField:function(e){return(e.match(f)||[])[1]},getValueFromField:function(e){return(e.match(f)||[])[2]},test:function(e){return f.test(e)}}};function g(e,t){var n=e.filter(function(e){return t.test(e.entry)}),a=n.length,r=s.a.countBy(n,function(e){return e.entry.match(t)[1]});return s.a.chain(r).map(function(e,t){return{count:e,value:t,proportion:e/a}}).sortBy("count").reverse().value()}function v(e,t){var n=e.filter(function(e){return void 0!==e.labels[t]}),a=n.length,r=s.a.countBy(n,function(e){return e.labels[t]});return s.a.chain(r).map(function(e,t){return{count:e,value:t,proportion:e/a}}).sortBy("count").reverse().value()}var b=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function y(e,t){if(t===p.none)return e;var n=e.rows.reduce(function(e,n,a,r){var i=e[e.length-1];return a>0&&function(e,t,n){switch(n){case p.exact:return e.entry.replace(b,"")===t.entry.replace(b,"");case p.numbers:return e.entry.replace(/\d/g,"")===t.entry.replace(/\d/g,"");case p.signature:return e.entry.replace(/\w/g,"")===t.entry.replace(/\w/g,"");default:return!1}}(n,i,t)?i.duplicates++:(n.duplicates=0,e.push(n)),e},[]);return i.a({},e,{rows:n})}function w(e){var t;try{m.JSON.test(e)&&(t=m.JSON)}catch(e){}return!t&&m.logfmt.test(e)&&(t=m.logfmt),t}function x(e,t){if(0===t.size)return e;var n=e.rows.reduce(function(e,n,a,r){return t.has(n.logLevel)||e.push(n),e},[]);return i.a({},e,{rows:n})}function S(e,t){for(var n={},a=10*t,r=[],i=0,o=e;i<o.length;i++){var s=o[i],l=n[s.logLevel];l||(n[s.logLevel]=l={lastTs:null,datapoints:[],alias:s.logLevel,color:h[s.logLevel]},r.push(l));var c=Math.round(s.timeEpochMs/a)*a;c===l.lastTs?l.datapoints[l.datapoints.length-1][0]++:(l.datapoints.push([1,c]),l.lastTs=c);for(var u=0,d=r;u<d.length;u++){var p=d[u];p!==l&&p.lastTs!==c&&(p.datapoints.push([0,c]),p.lastTs=c)}}return r.map(function(e){return e.datapoints.sort(function(e,t){return e[1]-t[1]}),{datapoints:e.datapoints,target:e.alias,alias:e.alias,color:e.color}})}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a,r=n(0),i=n.n(r);!function(e){e.Grid="grid",e.List="list"}(a||(a={}));t.b=function(e){var t=e.mode,n=e.onLayoutModeChanged;return i.a.createElement("div",{className:"layout-selector"},i.a.createElement("button",{onClick:function(){n(a.List)},className:t===a.List?"active":""},i.a.createElement("i",{className:"fa fa-list"})),i.a.createElement("button",{onClick:function(){n(a.Grid)},className:t===a.Grid?"active":""},i.a.createElement("i",{className:"fa fa-th"})))}},function(e,t,n){"use strict";_e.$inject=["instanceSettings","$q","backendSrv","templateSrv"],Ie.$inject=["$compile"],$e.$inject=["$compile","templateSrv","popoverSrv"],Ai.$inject=["element","event","plot"],Ni.$inject=["element","event","plot"],$i.$inject=["plot"],so.$inject=["timeSrv","popoverSrv","contextSrv"],lo.$inject=["$scope","$element","popoverSrv"],as.$inject=["$q","uiSegmentSrv"],is.$inject=["$q","uiSegmentSrv"];var a={};n.r(a),n.d(a,"PanelCtrl",function(){return B}),n.d(a,"MetricsPanelCtrl",function(){return G}),n.d(a,"QueryCtrl",function(){return W.a}),n.d(a,"alertTab",function(){return Y.a}),n.d(a,"loadPluginCss",function(){return Ts});var r={};n.r(r),n.d(r,"default",function(){return me});var i={};n.r(i),n.d(i,"Datasource",function(){return _e}),n.d(i,"QueryCtrl",function(){return We}),n.d(i,"ConfigCtrl",function(){return Ke}),n.d(i,"AnnotationsQueryCtrl",function(){return Xe});var o={};n.r(o),n.d(o,"Datasource",function(){return et}),n.d(o,"QueryCtrl",function(){return tt}),n.d(o,"ConfigCtrl",function(){return nt}),n.d(o,"AnnotationsQueryCtrl",function(){return at});var s={};n.r(s),n.d(s,"Datasource",function(){return Ct}),n.d(s,"QueryCtrl",function(){return At}),n.d(s,"ConfigCtrl",function(){return Dt}),n.d(s,"AnnotationsQueryCtrl",function(){return Nt});var l={};n.r(l),n.d(l,"Datasource",function(){return Pt}),n.d(l,"QueryCtrl",function(){return Ot}),n.d(l,"ConfigCtrl",function(){return It}),n.d(l,"AnnotationsQueryCtrl",function(){return $t});var c={};n.r(c),n.d(c,"GrafanaDatasource",function(){return Ft}),n.d(c,"Datasource",function(){return Ft}),n.d(c,"QueryCtrl",function(){return qt}),n.d(c,"AnnotationsQueryCtrl",function(){return Rt});var u={};n.r(u),n.d(u,"Datasource",function(){return en}),n.d(u,"QueryCtrl",function(){return tn}),n.d(u,"ConfigCtrl",function(){return nn}),n.d(u,"AnnotationsQueryCtrl",function(){return an});var d={};n.r(d),n.d(d,"LokiConfigCtrl",function(){return ua}),n.d(d,"Datasource",function(){return An}),n.d(d,"QueryEditor",function(){return ca}),n.d(d,"ConfigCtrl",function(){return ua}),n.d(d,"ExploreQueryField",function(){return la}),n.d(d,"ExploreStartPage",function(){return Pn});var p={};n.r(p),n.d(p,"MixedDatasource",function(){return da}),n.d(p,"Datasource",function(){return da});var h={};n.r(h),n.d(h,"MysqlDatasource",function(){return fa}),n.d(h,"Datasource",function(){return fa}),n.d(h,"QueryCtrl",function(){return Sa}),n.d(h,"ConfigCtrl",function(){return ka}),n.d(h,"AnnotationsQueryCtrl",function(){return Ea});var f={};n.r(f),n.d(f,"PostgresDatasource",function(){return _a}),n.d(f,"Datasource",function(){return _a}),n.d(f,"QueryCtrl",function(){return Ia}),n.d(f,"ConfigCtrl",function(){return $a}),n.d(f,"AnnotationsQueryCtrl",function(){return qa});var m={};n.r(m),n.d(m,"Datasource",function(){return Xa}),n.d(m,"QueryCtrl",function(){return tr}),n.d(m,"ConfigCtrl",function(){return nr}),n.d(m,"AnnotationsQueryCtrl",function(){return hr}),n.d(m,"ExploreQueryField",function(){return pr}),n.d(m,"ExploreStartPage",function(){return ir});var g={};n.r(g),n.d(g,"MssqlDatasource",function(){return mr}),n.d(g,"Datasource",function(){return mr}),n.d(g,"QueryCtrl",function(){return vr}),n.d(g,"ConfigCtrl",function(){return br}),n.d(g,"AnnotationsQueryCtrl",function(){return wr});var v={};n.r(v),n.d(v,"Datasource",function(){return xr}),n.d(v,"QueryCtrl",function(){return Sr}),n.d(v,"AnnotationsQueryCtrl",function(){return kr});var b={};n.r(b),n.d(b,"Datasource",function(){return Ar}),n.d(b,"QueryCtrl",function(){return Dr}),n.d(b,"ConfigCtrl",function(){return Nr}),n.d(b,"AnnotationsQueryCtrl",function(){return Pr}),n.d(b,"VariableQueryEditor",function(){return Ir});var y={};n.r(y),n.d(y,"Datasource",function(){return Gr}),n.d(y,"QueryCtrl",function(){return gi}),n.d(y,"ConfigCtrl",function(){return bi}),n.d(y,"AnnotationsQueryCtrl",function(){return vi});var w={};n.r(w),n.d(w,"TextPanelCtrl",function(){return xi}),n.d(w,"PanelCtrl",function(){return xi});var x={};n.r(x),n.d(x,"Text2",function(){return ki}),n.d(x,"reactPanel",function(){return Ci});var S={};n.r(S),n.d(S,"Panel",function(){return Mi}),n.d(S,"PanelOptions",function(){return _i});var k={};n.r(k),n.d(k,"GraphCtrl",function(){return mo}),n.d(k,"PanelCtrl",function(){return mo});var C={};n.r(C),n.d(C,"DashListCtrl",function(){return go}),n.d(C,"PanelCtrl",function(){return go});var E={};n.r(E),n.d(E,"PluginListCtrl",function(){return vo}),n.d(E,"PanelCtrl",function(){return vo});var T={};n.r(T),n.d(T,"AlertListPanel",function(){return yo}),n.d(T,"PanelCtrl",function(){return yo});var M={};n.r(M),n.d(M,"PanelCtrl",function(){return es});var _={};n.r(_),n.d(_,"TablePanelCtrl",function(){return ss}),n.d(_,"PanelCtrl",function(){return ss});var A={};n.r(A),n.d(A,"SingleStatCtrl",function(){return ls}),n.d(A,"PanelCtrl",function(){return ls}),n.d(A,"getColorForValue",function(){return cs});var D={};n.r(D),n.d(D,"GettingStartedPanelCtrl",function(){return us}),n.d(D,"PanelCtrl",function(){return us});var N={};n.r(N),n.d(N,"reactPanel",function(){return vs});var P=n(157),O=n.n(P),I=n(1),$=n.n(I),F=n(111),q=n.n(F),R=n(7),L=n(17),j=n(277),U=n(68),V=n(31),B=function(){function e(e,t){var n=this;this.$injector=t,this.$location=t.get("$location"),this.$scope=e,this.$timeout=t.get("$timeout"),this.editorTabs=[],this.events=this.panel.events,this.timing={};var a=R.a.panels[this.panel.type];a&&(this.pluginId=a.id,this.pluginName=a.name),e.$on("component-did-mount",function(){return n.panelDidMount()})}return e.prototype.panelDidMount=function(){this.events.emit("component-did-mount"),this.dashboard.panelInitialized(this.panel)},e.prototype.renderingCompleted=function(){L.e.renderingCompleted(this.panel.id)},e.prototype.refresh=function(){this.panel.refresh()},e.prototype.publishAppEvent=function(e,t){this.$scope.$root.appEvent(e,t)},e.prototype.changeView=function(e,t){this.publishAppEvent("panel-change-view",{fullscreen:e,edit:t,panelId:this.panel.id})},e.prototype.viewPanel=function(){this.changeView(!0,!1)},e.prototype.editPanel=function(){this.changeView(!0,!0)},e.prototype.exitFullscreen=function(){this.changeView(!1,!1)},e.prototype.initEditMode=function(){this.editModeInitiated||(this.editModeInitiated=!0,this.events.emit("init-edit-mode",null),this.maxPanelsPerRowOptions=Object(j.a)(V.e))},e.prototype.addEditorTab=function(e,t,n,a){var r={title:e,directiveFn:t,icon:a};$.a.isString(t)&&(r.directiveFn=function(){return{templateUrl:t}}),n?this.editorTabs.splice(n,0,r):this.editorTabs.push(r)},e.prototype.getMenu=function(){var e=[];e.push({text:"View",click:"ctrl.viewPanel();",icon:"fa fa-fw fa-eye",shortcut:"v"}),this.dashboard.meta.canEdit&&e.push({text:"Edit",click:"ctrl.editPanel();",role:"Editor",icon:"fa fa-fw fa-edit",shortcut:"e"}),e.push({text:"Share",click:"ctrl.sharePanel();",icon:"fa fa-fw fa-share",shortcut:"p s"}),e.push.apply(e,this.getAdditionalMenuItems());var t=this.getExtendedMenu();return e.push({text:"More ...",click:"",icon:"fa fa-fw fa-cube",submenu:t}),this.dashboard.meta.canEdit&&(e.push({divider:!0,role:"Editor"}),e.push({text:"Remove",click:"ctrl.removePanel();",role:"Editor",icon:"fa fa-fw fa-trash",shortcut:"p r"})),e},e.prototype.getExtendedMenu=function(){var e=[];return!this.panel.fullscreen&&this.dashboard.meta.canEdit&&(e.push({text:"Duplicate",click:"ctrl.duplicate()",role:"Editor",shortcut:"p d"}),e.push({text:"Copy",click:"ctrl.copyPanel()",role:"Editor"})),e.push({text:"Panel JSON",click:"ctrl.editPanelJson(); dismiss();"}),this.events.emit("init-panel-actions",e),e},e.prototype.getAdditionalMenuItems=function(){return[]},e.prototype.otherPanelInFullscreenMode=function(){return this.dashboard.meta.fullscreen&&!this.panel.fullscreen},e.prototype.calculatePanelHeight=function(e){this.containerHeight=e,this.height=this.containerHeight-(V.h+V.i)},e.prototype.render=function(e){this.events.emit("render",e)},e.prototype.duplicate=function(){Object(U.c)(this.dashboard,this.panel)},e.prototype.removePanel=function(){Object(U.f)(this.dashboard,this.panel,!0)},e.prototype.editPanelJson=function(){Object(U.d)(this.dashboard,this.panel)},e.prototype.copyPanel=function(){Object(U.b)(this.panel)},e.prototype.sharePanel=function(){Object(U.g)(this.dashboard,this.panel)},e.prototype.getInfoMode=function(){return this.error?"error":this.panel.description?"info":this.panel.links&&this.panel.links.length?"links":""},e.prototype.getInfoContent=function(e){var t=this.panel.description;"tooltip"===e.mode&&(t=this.error||this.panel.description);var n=this.$injector.get("linkSrv"),a=this.$injector.get("$sanitize"),r=this.$injector.get("templateSrv").replace(t,this.panel.scopedVars),i='<div class="markdown-html">';if(i+=(new q.a).render(r),this.panel.links&&this.panel.links.length>0){i+="<ul>";for(var o=0,s=this.panel.links;o<s.length;o++){var l=s[o],c=n.getPanelLinkAnchorInfo(l,this.panel.scopedVars);i+='<li><a class="panel-menu-link" href="'+c.href+'" target="'+c.target+'">'+c.title+"</a></li>"}i+="</ul>"}return a(i+="</div>")},e}(),Q=n(2),z=n(19),H=n(64),G=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.$q=n.get("$q"),a.contextSrv=n.get("contextSrv"),a.datasourceSrv=n.get("datasourceSrv"),a.timeSrv=n.get("timeSrv"),a.templateSrv=n.get("templateSrv"),a.scope=t,a.panel.datasource=a.panel.datasource||null,a.events.on("refresh",a.onMetricsPanelRefresh.bind(a)),a.events.on("panel-teardown",a.onPanelTearDown.bind(a)),a}return Q.c(t,e),t.prototype.onPanelTearDown=function(){this.dataSubscription&&(this.dataSubscription.unsubscribe(),this.dataSubscription=null)},t.prototype.onMetricsPanelRefresh=function(){var e=this;if(!this.otherPanelInFullscreenMode()){if(this.panel.snapshotData){this.updateTimeRange();var t=this.panel.snapshotData;return $.a.isArray(t)||(t=t.data),this.$timeout(function(){e.events.emit("data-snapshot-load",t)})}this.dataStream||(delete this.error,this.loading=!0,this.datasourceSrv.get(this.panel.datasource).then(this.updateTimeRange.bind(this)).then(this.issueQueries.bind(this)).then(this.handleQueryResult.bind(this)).catch(function(t){t.cancelled?console.log("Panel request cancelled",t):(e.loading=!1,e.error=t.message||"Request Error",e.inspector={error:t},t.data&&(t.data.message&&(e.error=t.data.message),t.data.error&&(e.error=t.data.error)),e.events.emit("data-error",t),console.log("Panel data error:",t))}))}},t.prototype.updateTimeRange=function(e){this.datasource=e||this.datasource,this.range=this.timeSrv.timeRange(),this.resolution=Object(U.e)(this.panel);var t=Object(U.a)(this.panel,this.range);return this.timeInfo=t.timeInfo,this.range=t.timeRange,this.calculateInterval(),this.datasource},t.prototype.calculateInterval=function(){var e=this.panel.interval;e?e=this.templateSrv.replace(e,this.panel.scopedVars):this.datasource&&this.datasource.interval&&(e=this.datasource.interval);var t=z.a.calculateInterval(this.range,this.resolution,e);this.interval=t.interval,this.intervalMs=t.intervalMs},t.prototype.issueQueries=function(e){if(this.datasource=e,!this.panel.targets||0===this.panel.targets.length)return this.$q.when([]);var t=Object.assign({},this.panel.scopedVars,{__interval:{text:this.interval,value:this.interval},__interval_ms:{text:this.intervalMs,value:this.intervalMs}}),n={timezone:this.dashboard.getTimezone(),panelId:this.panel.id,dashboardId:this.dashboard.id,range:this.range,rangeRaw:this.range.raw,interval:this.interval,intervalMs:this.intervalMs,targets:this.panel.targets,maxDataPoints:this.resolution,scopedVars:t,cacheTimeout:this.panel.cacheTimeout};return e.query(n)},t.prototype.handleQueryResult=function(e){this.loading=!1,e&&e.subscribe?this.handleDataStream(e):(this.dashboard.snapshot&&(this.panel.snapshotData=e.data),e&&e.data||(console.log("Data source query result invalid, missing data field:",e),e={data:[]}),this.events.emit("data-received",e.data))},t.prototype.handleDataStream=function(e){var t=this;this.dataStream?console.log("two stream observables!"):(this.dataStream=e,this.dataSubscription=e.subscribe({next:function(e){console.log("dataSubject next!"),e.range&&(t.range=e.range),t.events.emit("data-received",e.data)},error:function(e){t.events.emit("data-error",e),console.log("panel: observer got error")},complete:function(){console.log("panel: observer got complete"),t.dataStream=null}}))},t.prototype.getAdditionalMenuItems=function(){var e=[];return this.contextSrv.hasAccessToExplore()&&this.datasource&&e.push({text:"Explore",click:"ctrl.explore();",icon:"fa fa-fw fa-rocket",shortcut:"x"}),e},t.prototype.explore=function(){return Q.b(this,void 0,void 0,function(){var e,t=this;return Q.d(this,function(n){switch(n.label){case 0:return[4,Object(H.i)(this.panel,this.panel.targets,this.datasource,this.datasourceSrv,this.timeSrv)];case 1:return(e=n.sent())&&this.$timeout(function(){return t.$location.url(e)}),[2]}})})},t}(B),W=n(354),Y=n(373),K=n(4),X=n.n(K),J=n(8),Z=n.n(J),ee=n(10),te=n.n(ee),ne=n(94),ae=n.n(ne),re=n(21),ie=n(205),oe=n(82),se=n(0),le=n.n(se),ce=n(15),ue=n.n(ce),de=n(78),pe=n(81),he=n(35),fe=n(207);function me(e,t){var n=(t=t||{}).delimiter||".",a=t.maxDepth||3,r=1,i={};return function e(o,s){Object.keys(o).forEach(function(l){var c=o[l],u=t.safe&&Array.isArray(c),d="[object Object]"===Object.prototype.toString.call(c),p=s?s+n+l:l;if(t.maxDepth||(a=r+1),!u&&d&&Object.keys(c).length&&r<a)return++r,e(c,p);i[p]=c})}(e,null),i}var ge=n(61),ve=n(152),be=/^(\d+)(?:\.(\d+))?(?:\.(\d+))?(?:-([0-9A-Za-z\.]+))?/,ye=function(){function e(e){var t=be.exec(e);t&&(this.major=Number(t[1]),this.minor=Number(t[2]||0),this.patch=Number(t[3]||0),this.meta=t[4])}return e.prototype.isGtOrEq=function(t){for(var n=new e(t),a=0;a<this.comparable.length;++a){if(this.comparable[a]>n.comparable[a])return!0;if(this.comparable[a]<n.comparable[a])return!1}return!0},e.prototype.isValid=function(){return $.a.isNumber(this.major)},Object.defineProperty(e.prototype,"comparable",{get:function(){return[this.major,this.minor,this.patch]},enumerable:!0,configurable:!0}),e}();function we(e,t){return new ye(e).isGtOrEq(t)}var xe={};function Se(e){e.params=e.params||[],e.defaultParams=e.defaultParams||[],xe[e.name]=e,e.shortName&&(xe[e.shortName]=e)}var ke=[{name:"other",type:"value_or_series",optional:!0,multiple:!0}];function Ce(e,t){return!e.version||we(t,e.version)}Se({name:"scaleToSeconds",category:"Transform",params:[{name:"seconds",type:"int"}],defaultParams:[1]}),Se({name:"perSecond",category:"Transform",params:[{name:"max value",type:"int",optional:!0}],defaultParams:[]}),Se({name:"holtWintersForecast",category:"Calculate"}),Se({name:"holtWintersConfidenceBands",category:"Calculate",params:[{name:"delta",type:"int"}],defaultParams:[3]}),Se({name:"holtWintersAberration",category:"Calculate",params:[{name:"delta",type:"int"}],defaultParams:[3]}),Se({name:"nPercentile",category:"Calculate",params:[{name:"Nth percentile",type:"int"}],defaultParams:[95]}),Se({name:"diffSeries",params:ke,defaultParams:["#A"],category:"Combine"}),Se({name:"stddevSeries",params:ke,defaultParams:[""],category:"Combine"}),Se({name:"divideSeries",params:ke,defaultParams:["#A"],category:"Combine"}),Se({name:"multiplySeries",params:ke,defaultParams:["#A"],category:"Combine"}),Se({name:"asPercent",params:ke,defaultParams:["#A"],category:"Combine"}),Se({name:"group",params:ke,defaultParams:["#A","#B"],category:"Combine"}),Se({name:"sumSeries",shortName:"sum",category:"Combine",params:ke,defaultParams:[""]}),Se({name:"averageSeries",shortName:"avg",category:"Combine",params:ke,defaultParams:[""]}),Se({name:"rangeOfSeries",category:"Combine"}),Se({name:"percentileOfSeries",category:"Combine",params:[{name:"n",type:"int"},{name:"interpolate",type:"boolean",options:["true","false"]}],defaultParams:[95,"false"]}),Se({name:"sumSeriesWithWildcards",category:"Combine",params:[{name:"node",type:"int",multiple:!0}],defaultParams:[3]}),Se({name:"maxSeries",shortName:"max",category:"Combine"}),Se({name:"minSeries",shortName:"min",category:"Combine"}),Se({name:"averageSeriesWithWildcards",category:"Combine",params:[{name:"node",type:"int",multiple:!0}],defaultParams:[3]}),Se({name:"alias",category:"Alias",params:[{name:"alias",type:"string"}],defaultParams:["alias"]}),Se({name:"aliasSub",category:"Alias",params:[{name:"search",type:"string"},{name:"replace",type:"string"}],defaultParams:["","\\1"]}),Se({name:"consolidateBy",category:"Special",params:[{name:"function",type:"string",options:["sum","average","min","max"]}],defaultParams:["max"]}),Se({name:"cumulative",category:"Special",params:[],defaultParams:[]}),Se({name:"groupByNode",category:"Combine",params:[{name:"node",type:"int",options:[0,1,2,3,4,5,6,7,8,9,10,12]},{name:"function",type:"string",options:["sum","avg","maxSeries"]}],defaultParams:[3,"sum"]}),Se({name:"aliasByNode",category:"Alias",params:[{name:"node",type:"int",options:[0,1,2,3,4,5,6,7,8,9,10,12],multiple:!0}],defaultParams:[3]}),Se({name:"substr",category:"Special",params:[{name:"start",type:"int",options:[-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,12]},{name:"stop",type:"int",options:[-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,12]}],defaultParams:[0,0]}),Se({name:"sortByName",category:"Sorting",params:[{name:"natural",type:"boolean",options:["true","false"],optional:!0}],defaultParams:["false"]}),Se({name:"sortByMaxima",category:"Sorting"}),Se({name:"sortByMinima",category:"Sorting"}),Se({name:"sortByTotal",category:"Sorting"}),Se({name:"aliasByMetric",category:"Alias"}),Se({name:"randomWalk",fake:!0,category:"Special",params:[{name:"name",type:"string"}],defaultParams:["randomWalk"]}),Se({name:"countSeries",category:"Combine"}),Se({name:"constantLine",category:"Special",params:[{name:"value",type:"int"}],defaultParams:[10]}),Se({name:"cactiStyle",category:"Special"}),Se({name:"keepLastValue",category:"Transform",params:[{name:"n",type:"int"}],defaultParams:[100]}),Se({name:"changed",category:"Special",params:[],defaultParams:[]}),Se({name:"scale",category:"Transform",params:[{name:"factor",type:"int"}],defaultParams:[1]}),Se({name:"offset",category:"Transform",params:[{name:"amount",type:"int"}],defaultParams:[10]}),Se({name:"transformNull",category:"Transform",params:[{name:"amount",type:"int"}],defaultParams:[0]}),Se({name:"integral",category:"Transform"}),Se({name:"derivative",category:"Transform"}),Se({name:"nonNegativeDerivative",category:"Transform",params:[{name:"max value or 0",type:"int",optional:!0}],defaultParams:[""]}),Se({name:"timeShift",category:"Transform",params:[{name:"amount",type:"select",options:["1h","6h","12h","1d","2d","7d","14d","30d"]}],defaultParams:["1d"]}),Se({name:"timeStack",category:"Transform",params:[{name:"timeShiftUnit",type:"select",options:["1h","6h","12h","1d","2d","7d","14d","30d"]},{name:"timeShiftStart",type:"int"},{name:"timeShiftEnd",type:"int"}],defaultParams:["1d",0,7]}),Se({name:"summarize",category:"Transform",params:[{name:"interval",type:"string"},{name:"func",type:"select",options:["sum","avg","min","max","last"]},{name:"alignToFrom",type:"boolean",optional:!0,options:["false","true"]}],defaultParams:["1h","sum","false"]}),Se({name:"smartSummarize",category:"Transform",params:[{name:"interval",type:"string"},{name:"func",type:"select",options:["sum","avg","min","max","last"]}],defaultParams:["1h","sum"]}),Se({name:"absolute",category:"Transform"}),Se({name:"hitcount",category:"Transform",params:[{name:"interval",type:"string"}],defaultParams:["10s"]}),Se({name:"log",category:"Transform",params:[{name:"base",type:"int"}],defaultParams:["10"]}),Se({name:"averageAbove",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[25]}),Se({name:"averageBelow",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[25]}),Se({name:"currentAbove",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[25]}),Se({name:"currentBelow",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[25]}),Se({name:"maximumAbove",category:"Filter Series",params:[{name:"value",type:"int"}],defaultParams:[0]}),Se({name:"maximumBelow",category:"Filter Series",params:[{name:"value",type:"int"}],defaultParams:[0]}),Se({name:"minimumAbove",category:"Filter Series",params:[{name:"value",type:"int"}],defaultParams:[0]}),Se({name:"minimumBelow",category:"Filter Series",params:[{name:"value",type:"int"}],defaultParams:[0]}),Se({name:"limit",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[5]}),Se({name:"mostDeviant",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[10]}),Se({name:"exclude",category:"Filter Series",params:[{name:"exclude",type:"string"}],defaultParams:["exclude"]}),Se({name:"highestCurrent",category:"Filter Series",params:[{name:"count",type:"int"}],defaultParams:[5]}),Se({name:"highestMax",category:"Filter Series",params:[{name:"count",type:"int"}],defaultParams:[5]}),Se({name:"lowestCurrent",category:"Filter Series",params:[{name:"count",type:"int"}],defaultParams:[5]}),Se({name:"movingAverage",category:"Calculate",params:[{name:"windowSize",type:"int_or_interval",options:["5","7","10","5min","10min","30min","1hour"]}],defaultParams:[10]}),Se({name:"movingMedian",category:"Calculate",params:[{name:"windowSize",type:"int_or_interval",options:["5","7","10","5min","10min","30min","1hour"]}],defaultParams:["5"]}),Se({name:"stdev",category:"Calculate",params:[{name:"n",type:"int"},{name:"tolerance",type:"int"}],defaultParams:[5,.1]}),Se({name:"highestAverage",category:"Filter Series",params:[{name:"count",type:"int"}],defaultParams:[5]}),Se({name:"lowestAverage",category:"Filter Series",params:[{name:"count",type:"int"}],defaultParams:[5]}),Se({name:"removeAbovePercentile",category:"Filter Data",params:[{name:"n",type:"int"}],defaultParams:[5]}),Se({name:"removeAboveValue",category:"Filter Data",params:[{name:"n",type:"int"}],defaultParams:[5]}),Se({name:"removeBelowPercentile",category:"Filter Data",params:[{name:"n",type:"int"}],defaultParams:[5]}),Se({name:"removeBelowValue",category:"Filter Data",params:[{name:"n",type:"int"}],defaultParams:[5]}),Se({name:"useSeriesAbove",category:"Filter Series",params:[{name:"value",type:"int"},{name:"search",type:"string"},{name:"replace",type:"string"}],defaultParams:[0,"search","replace"]}),Se({name:"aggregateLine",category:"Calculate",params:[{name:"func",type:"select",options:["sum","avg","min","max","last"]}],defaultParams:["avg"],version:"1.0"}),Se({name:"averageOutsidePercentile",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[95],version:"1.0"}),Se({name:"delay",category:"Transform",params:[{name:"steps",type:"int"}],defaultParams:[1],version:"1.0"}),Se({name:"exponentialMovingAverage",category:"Calculate",params:[{name:"windowSize",type:"int_or_interval",options:["5","7","10","5min","10min","30min","1hour"]}],defaultParams:[10],version:"1.0"}),Se({name:"fallbackSeries",category:"Special",params:[{name:"fallback",type:"string"}],defaultParams:["constantLine(0)"],version:"1.0"}),Se({name:"grep",category:"Filter Series",params:[{name:"grep",type:"string"}],defaultParams:["grep"],version:"1.0"}),Se({name:"groupByNodes",category:"Combine",params:[{name:"function",type:"string",options:["sum","avg","maxSeries"]},{name:"node",type:"int",options:[0,1,2,3,4,5,6,7,8,9,10,12],multiple:!0}],defaultParams:["sum",3],version:"1.0"}),Se({name:"integralByInterval",category:"Transform",params:[{name:"intervalUnit",type:"select",options:["1h","6h","12h","1d","2d","7d","14d","30d"]}],defaultParams:["1d"],version:"1.0"}),Se({name:"interpolate",category:"Transform",params:[{name:"limit",type:"int",optional:!0}],defaultParams:[],version:"1.0"}),Se({name:"invert",category:"Transform",version:"1.0"}),Se({name:"isNonNull",category:"Combine",version:"1.0"}),Se({name:"linearRegression",category:"Calculate",params:[{name:"startSourceAt",type:"select",options:["-1h","-6h","-12h","-1d","-2d","-7d","-14d","-30d"],optional:!0},{name:"endSourceAt",type:"select",options:["-1h","-6h","-12h","-1d","-2d","-7d","-14d","-30d"],optional:!0}],defaultParams:[],version:"1.0"}),Se({name:"mapSeries",shortName:"map",params:[{name:"node",type:"int"}],defaultParams:[3],category:"Combine",version:"1.0"}),Se({name:"movingMin",category:"Calculate",params:[{name:"windowSize",type:"int_or_interval",options:["5","7","10","5min","10min","30min","1hour"]}],defaultParams:[10],version:"1.0"}),Se({name:"movingMax",category:"Calculate",params:[{name:"windowSize",type:"int_or_interval",options:["5","7","10","5min","10min","30min","1hour"]}],defaultParams:[10],version:"1.0"}),Se({name:"movingSum",category:"Calculate",params:[{name:"windowSize",type:"int_or_interval",options:["5","7","10","5min","10min","30min","1hour"]}],defaultParams:[10],version:"1.0"}),Se({name:"multiplySeriesWithWildcards",category:"Combine",params:[{name:"position",type:"int",options:[0,1,2,3,4,5,6,7,8,9,10,12],multiple:!0}],defaultParams:[2],version:"1.0"}),Se({name:"offsetToZero",category:"Transform",version:"1.0"}),Se({name:"pow",category:"Transform",params:[{name:"factor",type:"int"}],defaultParams:[10],version:"1.0"}),Se({name:"powSeries",category:"Transform",params:ke,defaultParams:[""],version:"1.0"}),Se({name:"reduceSeries",shortName:"reduce",params:[{name:"function",type:"string",options:["asPercent","diffSeries","divideSeries"]},{name:"reduceNode",type:"int",options:[0,1,2,3,4,5,6,7,8,9,10,11,12,13]},{name:"reduceMatchers",type:"string",multiple:!0}],defaultParams:["asPercent",2,"used_bytes"],category:"Combine",version:"1.0"}),Se({name:"removeBetweenPercentile",category:"Filter Series",params:[{name:"n",type:"int"}],defaultParams:[95],version:"1.0"}),Se({name:"removeEmptySeries",category:"Filter Series",version:"1.0"}),Se({name:"squareRoot",category:"Transform",version:"1.0"}),Se({name:"timeSlice",category:"Transform",params:[{name:"startSliceAt",type:"select",options:["-1h","-6h","-12h","-1d","-2d","-7d","-14d","-30d"]},{name:"endSliceAt",type:"select",options:["-1h","-6h","-12h","-1d","-2d","-7d","-14d","-30d"],optional:!0}],defaultParams:["-1h"],version:"1.0"}),Se({name:"weightedAverage",category:"Combine",params:[{name:"other",type:"value_or_series",optional:!0},{name:"node",type:"int",options:[0,1,2,3,4,5,6,7,8,9,10,12]}],defaultParams:["#A",4],version:"1.0"}),Se({name:"seriesByTag",category:"Special",params:[{name:"tagExpression",type:"string",multiple:!0}],version:"1.1"}),Se({name:"groupByTags",category:"Combine",params:[{name:"function",type:"string",options:["sum","avg","maxSeries"]},{name:"tag",type:"string",multiple:!0}],defaultParams:["sum","tag"],version:"1.1"}),Se({name:"aliasByTags",category:"Alias",params:[{name:"tag",type:"string",multiple:!0}],defaultParams:["tag"],version:"1.1"});var Ee=function(){function e(e,t){this.def=e,this.params=[],t&&t.withDefaultParams&&(this.params=e.defaultParams.slice(0)),this.updateText()}return e.prototype.render=function(e){for(var t=this,n=this.def.name+"(",a=$.a.map(this.params,function(e,n){var a;return n<t.def.params.length?a=t.def.params[n].type:$.a.get($.a.last(t.def.params),"multiple")&&(a=$.a.get($.a.last(t.def.params),"type")),$.a.includes(["value_or_series","boolean","int","float","node"],a)?e:$.a.includes(["int_or_interval","node_or_tag"],a)&&$.a.isFinite(+e)?$.a.toString(+e):"'"+e+"'"});""===a[a.length-1];)a.pop();return e&&a.unshift(e),n+a.join(", ")+")"},e.prototype._hasMultipleParamsInString=function(e,t){return-1!==e.indexOf(",")&&(!(!this.def.params[t+1]||!this.def.params[t+1].optional)||!!(t+1>=this.def.params.length&&$.a.get($.a.last(this.def.params),"multiple")))},e.prototype.updateParam=function(e,t){var n=this;this._hasMultipleParamsInString(e,t)?$.a.each(e.split(","),function(e,a){n.updateParam(e.trim(),t+a)}):(""===e&&(t>=this.def.params.length||this.def.params[t].optional)?this.params.splice(t,1):this.params[t]=e,this.updateText())},e.prototype.updateText=function(){if(0!==this.params.length){var e=this.def.name+"(";e+=this.params.join(", "),e+=")",this.text=e}else this.text=this.def.name+"()"},e}();function Te(e,t){if(!(t||xe)[e])throw{message:"Method not found "+e};return(t||xe)[e]}var Me={createFuncInstance:function(e,t,n){return $.a.isString(e)&&(e=Te(e,n)),new Ee(e,t)},getFuncDef:Te,getFuncDefs:function(e,t){var n={};return $.a.forEach(t||xe,function(t){Ce(t,e)&&(n[t.name]=$.a.assign({},t,{params:$.a.filter(t.params,function(t){return Ce(t,e)})}))}),n},parseFuncDefs:function(e){var t={};return $.a.forEach(e||{},function(e,n){if("Graph"!==e.group){var a=e.description;a&&(a=a.replace(/:py:func:`(.+)( <[^>]*>)?`/g,"``$1``").replace(/.. seealso:: /g,"See also: ").replace(/.. code-block *:: *none/g,".. code-block::"));var r={name:e.name,description:a,category:e.group,params:[],defaultParams:[],fake:!1};/^seriesLists?$/.test($.a.get(e,"params[0].type",""))?e.params[0].multiple?e.params[0].required=!1:e.params.shift():r.fake=!0,$.a.forEach(e.params,function(e){var t={name:e.name,type:"string",optional:!e.required,multiple:!!e.multiple,options:void 0};void 0!==e.default?r.defaultParams.push($.a.toString(e.default)):e.suggestions?r.defaultParams.push($.a.toString(e.suggestions[0])):r.defaultParams.push(""),"boolean"===e.type?(t.type="boolean",t.options=["true","false"]):"integer"===e.type?t.type="int":"float"===e.type?t.type="float":"node"===e.type?(t.type="node",t.options=["0","1","2","3","4","5","6","7","8","9","10","11","12"]):"nodeOrTag"===e.type?(t.type="node_or_tag",t.options=["name","0","1","2","3","4","5","6","7","8","9","10","11","12"]):"intOrInterval"===e.type?t.type="int_or_interval":"seriesList"===e.type&&(t.type="value_or_series"),e.options?t.options=$.a.map(e.options,$.a.toString):e.suggestions&&(t.options=$.a.map(e.suggestions,$.a.toString)),r.params.push(t)}),t[n]=r}}),t}};function _e(e,t,n,a){var r=this;this.basicAuth=e.basicAuth,this.url=e.url,this.name=e.name,this.graphiteVersion=e.jsonData.graphiteVersion||"0.9",this.supportsTags=function(e){return we(e,"1.1")}(this.graphiteVersion),this.cacheTimeout=e.cacheTimeout,this.withCredentials=e.withCredentials,this.render_method=e.render_method||"POST",this.funcDefs=null,this.funcDefsPromise=null,this.getQueryOptionsInfo=function(){return{maxDataPoints:!0,cacheTimeout:!0,links:[{text:"Help",url:"http://docs.grafana.org/features/datasources/graphite/#using-graphite-in-grafana"}]}},this.query=function(e){var n={from:this.translateTime(e.rangeRaw.from,!1,e.timezone),until:this.translateTime(e.rangeRaw.to,!0,e.timezone),targets:e.targets,format:e.format,cacheTimeout:e.cacheTimeout||this.cacheTimeout,maxDataPoints:e.maxDataPoints},a=this.buildGraphiteParams(n,e.scopedVars);if(0===a.length)return t.when({data:[]});var r={method:"POST",url:"/render",data:a.join("&"),headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.addTracingHeaders(r,e),e.panelId&&(r.requestId=this.name+".panelId."+e.panelId),this.doGraphiteRequest(r).then(this.convertDataPointsToMs)},this.addTracingHeaders=function(e,t){!this.url.match(/^http/)&&(e.headers["X-Dashboard-Id"]=t.dashboardId,e.headers["X-Panel-Id"]=t.panelId)},this.convertDataPointsToMs=function(e){if(!e||!e.data)return[];for(var t=0;t<e.data.length;t++)for(var n=e.data[t],a=0;a<n.datapoints.length;a++)n.datapoints[a][1]*=1e3;return e},this.parseTags=function(e){var t=[];return 1===(t=e.split(",")).length&&""===(t=e.split(" "))[0]&&(t=[]),t},this.annotationQuery=function(e){var t=this;if(e.annotation.target){var n=a.replace(e.annotation.target,{},"glob"),r={rangeRaw:e.rangeRaw,targets:[{target:n}],format:"json",maxDataPoints:100};return this.query(r).then(function(t){for(var n=[],a=0;a<t.data.length;a++)for(var r=t.data[a],i=0;i<r.datapoints.length;i++){var o=r.datapoints[i];o[0]&&n.push({annotation:e.annotation,time:o[1],title:r.target})}return n})}var i=a.replace(e.annotation.tags);return this.events({range:e.rangeRaw,tags:i}).then(function(n){for(var a=[],r=0;r<n.data.length;r++){var i=n.data[r],o=i.tags;$.a.isString(i.tags)&&(o=t.parseTags(i.tags)),a.push({annotation:e.annotation,time:1e3*i.when,title:i.what,tags:o,text:i.data})}return a})},this.events=function(e){try{var n="";return e.tags&&(n="&tags="+e.tags),this.doGraphiteRequest({method:"GET",url:"/events/get_data?from="+this.translateTime(e.range.from,!1,e.timezone)+"&until="+this.translateTime(e.range.to,!0,e.timezone)+n})}catch(e){return t.reject(e)}},this.targetContainsTemplate=function(e){return a.variableExists(e.target)},this.translateTime=function(e,t,n){if($.a.isString(e)){if("now"===e)return"now";if(e.indexOf("now-")>=0&&-1===e.indexOf("/"))return e=(e=(e=e.substring(3)).replace("m","min")).replace("M","mon");e=he.parse(e,t,n)}return t?e.get("s")&&e.add(1,"m"):!1===t&&e.get("s")&&e.subtract(1,"m"),e.unix()},this.metricFindQuery=function(e,t){var n=t||{},r=a.replace(e),i=r.match(/^tag_values\(([^,]+)((, *[^,]+)*)\)$/);if(i){for(var o=[],s=(l=/, *([^,]+)/g).exec(i[2]);null!==s;)o.push(s[1]),s=l.exec(i[2]);return n.limit=1e4,this.getTagValuesAutoComplete(o,i[1],void 0,n)}if(i=r.match(/^tags\(([^,]*)((, *[^,]+)*)\)$/)){o=[];if(i[1]){o.push(i[1]);var l;for(s=(l=/, *([^,]+)/g).exec(i[2]);null!==s;)o.push(s[1]),s=l.exec(i[2])}return n.limit=1e4,this.getTagsAutoComplete(o,void 0,n)}var c={method:"GET",url:"/metrics/find",params:{query:r},requestId:n.requestId};return n.range&&(c.params.from=this.translateTime(n.range.from,!1,n.timezone),c.params.until=this.translateTime(n.range.to,!0,n.timezone)),this.doGraphiteRequest(c).then(function(e){return $.a.map(e.data,function(e){return{text:e.text,expandable:!!e.expandable}})})},this.getTags=function(e){var t=e||{},n={method:"GET",url:"/tags",requestId:t.requestId};return t.range&&(n.params.from=this.translateTime(t.range.from,!1,t.timezone),n.params.until=this.translateTime(t.range.to,!0,t.timezone)),this.doGraphiteRequest(n).then(function(e){return $.a.map(e.data,function(e){return{text:e.tag,id:e.id}})})},this.getTagValues=function(e,t){var n=t||{},r={method:"GET",url:"/tags/"+a.replace(e),requestId:n.requestId};return n.range&&(r.params.from=this.translateTime(n.range.from,!1,n.timezone),r.params.until=this.translateTime(n.range.to,!0,n.timezone)),this.doGraphiteRequest(r).then(function(e){return e.data&&e.data.values?$.a.map(e.data.values,function(e){return{text:e.value,id:e.id}}):[]})},this.getTagsAutoComplete=function(e,t,n){var i=n||{},o={method:"GET",url:"/tags/autoComplete/tags",params:{expr:$.a.map(e,function(e){return a.replace((e||"").trim())})},requestId:i.requestId};return t&&(o.params.tagPrefix=t),i.limit&&(o.params.limit=i.limit),i.range&&(o.params.from=r.translateTime(i.range.from,!1,i.timezone),o.params.until=r.translateTime(i.range.to,!0,i.timezone)),r.doGraphiteRequest(o).then(function(e){return e.data?$.a.map(e.data,function(e){return{text:e}}):[]})},this.getTagValuesAutoComplete=function(e,t,n,i){var o=i||{},s={method:"GET",url:"/tags/autoComplete/values",params:{expr:$.a.map(e,function(e){return a.replace((e||"").trim())}),tag:a.replace((t||"").trim())},requestId:o.requestId};return n&&(s.params.valuePrefix=n),o.limit&&(s.params.limit=o.limit),o.range&&(s.params.from=r.translateTime(o.range.from,!1,o.timezone),s.params.until=r.translateTime(o.range.to,!0,o.timezone)),r.doGraphiteRequest(s).then(function(e){return e.data?$.a.map(e.data,function(e){return{text:e}}):[]})},this.getVersion=function(e){var t={method:"GET",url:"/version",requestId:(e||{}).requestId};return this.doGraphiteRequest(t).then(function(e){return e.data&&new ye(e.data).isValid()?e.data:""}).catch(function(){return""})},this.createFuncInstance=function(e,t){return Me.createFuncInstance(e,t,this.funcDefs)},this.getFuncDef=function(e){return Me.getFuncDef(e,this.funcDefs)},this.waitForFuncDefsLoaded=function(){return this.getFuncDefs()},this.getFuncDefs=function(){var e=this;if(null!==this.funcDefsPromise)return this.funcDefsPromise;if(!function(e){return we(e,"1.1")}(this.graphiteVersion))return this.funcDefs=Me.getFuncDefs(this.graphiteVersion),this.funcDefsPromise=Promise.resolve(this.funcDefs),this.funcDefsPromise;return this.funcDefsPromise=this.doGraphiteRequest({method:"GET",url:"/functions"}).then(function(t){return 200!==t.status||"object"!=typeof t.data?e.funcDefs=Me.getFuncDefs(e.graphiteVersion):e.funcDefs=Me.parseFuncDefs(t.data),e.funcDefs}).catch(function(t){return console.log("Fetching graphite functions error",t),e.funcDefs=Me.getFuncDefs(e.graphiteVersion),e.funcDefs}),this.funcDefsPromise},this.testDatasource=function(){return this.query({panelId:3,rangeRaw:{from:"now-1h",to:"now"},targets:[{target:"constantLine(100)"}],maxDataPoints:300}).then(function(){return{status:"success",message:"Data source is working"}})},this.doGraphiteRequest=function(e){return(this.basicAuth||this.withCredentials)&&(e.withCredentials=!0),this.basicAuth&&(e.headers=e.headers||{},e.headers.Authorization=this.basicAuth),e.url=this.url+e.url,e.inspect={type:"graphite"},n.datasourceRequest(e)},this._seriesRefLetters="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this.buildGraphiteParams=function(e,t){var n,r,i,o=["from","until","rawData","format","maxDataPoints","cacheTimeout"],s=[],l={},c=/\#([A-Z])/g,u=/'(\d+)m'/gi,d=!1;function p(e){return e.replace("m","min").replace("M","mon")}for(e.format="json",i=0;i<e.targets.length;i++)(n=e.targets[i]).target&&(n.refId||(n.refId=this._seriesRefLetters[i]),r=(r=a.replace(n.target,t)).replace(u,p),l[n.refId]=r);function h(e,t){return l[t]||e}for(i=0;i<e.targets.length;i++)(n=e.targets[i]).target&&(r=(r=l[n.refId]).replace(c,h),l[n.refId]=r,n.hide||(d=!0,s.push("target="+encodeURIComponent(r))));return $.a.each(e,function(e,t){-1!==$.a.indexOf(o,t)&&e&&s.push(t+"="+encodeURIComponent(e))}),d?s:[]}}var Ae=n(281),De=n.n(Ae),Ne=n(103),Pe=n.n(Ne),Oe=n(5);function Ie(e){return{link:function(t,n){var a,r=this,i=t.ctrl,o=te()('<input type="text" class="gf-form-input" spellcheck="false" style="display:none"></input>'),s=te()('<a class="gf-form-label query-part dropdown-toggle" tabindex="1" gf-dropdown="functionMenu" data-toggle="dropdown"><i class="fa fa-plus"></i></a>');o.appendTo(n),s.appendTo(n),i.datasource.getFuncDefs().then(function(a){var r=$.a.map(a,"name").sort();t.functionMenu=function(e){var t={};return $.a.forEach(e,function(e){e.category&&(t[e.category]||(t[e.category]=[]),t[e.category].push({text:e.name,click:"ctrl.addFunction('"+e.name+"')"}))}),$.a.sortBy($.a.map(t,function(e,t){return{text:t,submenu:$.a.sortBy(e,"text")}}),"text")}(a),o.attr("data-provide","typeahead"),o.typeahead({source:r,minLength:1,items:10,updater:function(e){var n=i.datasource.getFuncDef(e);return n||(e=e.toLowerCase(),n=$.a.find(r,function(t){return 0===t.toLowerCase().indexOf(e)}))?(t.$apply(function(){i.addFunction(n)}),o.trigger("blur"),""):""}}),s.click(function(){s.hide(),o.show(),o.focus()}),o.keyup(function(){n.toggleClass("open",""===o.val())}),o.blur(function(){setTimeout(function(){o.val(""),o.hide(),s.show(),n.removeClass("open")},200)}),e(n.contents())(t)});var l=function(){a&&(a.destroy(),a=null)};te()(n).on("mouseenter","ul.dropdown-menu li",function(){var e;l();try{e=i.datasource.getFuncDef(te()("a",r).text())}catch(e){}if(e&&e.description){var t=e.description;t.length>500&&(t=t.substring(0,497)+"...");var n=document.createElement("div");n.innerHTML="<h4>"+e.name+"</h4>"+De()(t),a=new Pe.a({target:r,content:n,classes:"drop-popover",openOn:"always",tetherOptions:{attachment:"bottom left",targetAttachment:"bottom right"}})}}).on("mouseout","ul.dropdown-menu li",function(){l()}),t.$on("$destroy",l)}}}function $e(e,t,n){var a='<input type="text" style="display:none" class="input-small tight-form-func-param"></input>';return{restrict:"A",link:function(n,r){var i=te()('\n    <function-editor\n      func="func"\n      onRemove="ctrl.handleRemoveFunction"\n      onMoveLeft="ctrl.handleMoveLeft"\n      onMoveRight="ctrl.handleMoveRight"\n    /><span>(</span>\n  '),o=n.ctrl,s=n.func,l=!1,c=0,u=null;function d(e){var t=te()(this),n=t.prev(".comma"),a=t.next();a.val(s.params[e]),n.removeClass("query-part__last"),t.hide(),a.show(),a.focus(),a.select();var r=a.data("typeahead");r&&(a.val(""),r.lookup())}function p(e){return e<s.def.params.length?s.def.params[e]:$.a.last(s.def.params).multiple?$.a.assign({},$.a.last(s.def.params),{optional:!0}):{}}function h(e,a){var r=te()(e);clearTimeout(u),u=null;var i=r.prev(),d=i.prev(".comma"),h=r.val();(""!==h||p(a).optional)&&(s.updateParam(h,a),i.html(h?t.highlightVariablesAsHtml(h):"&nbsp;")),c!==s.params.length&&(l||(l=!0,setTimeout(function(){b(),l=!1},200))),n.$apply(function(){o.targetChanged()}),i.hasClass("query-part__last")&&""===h?d.addClass("query-part__last"):i.removeClass("query-part__last"),r.hide(),i.show()}function f(e){var t=this;u=setTimeout(function(){h(t,e)},200)}function m(e,t){13===t.which&&te()(this).blur()}function g(){this.style.width=8*(3+this.value.length)+"px"}function v(){i.appendTo(r);for(var o=$.a.clone(s.def.params),l=$.a.last(s.def.params);s.params.length>=o.length&&l&&l.multiple;)o.push($.a.assign({},l,{optional:!0}));$.a.each(o,function(e,n){if(e.optional&&s.params.length<n)return!1;var i=t.highlightVariablesAsHtml(s.params[n]),o=n>=s.params.length-1&&e.optional&&!i;o&&e.multiple&&(i="+"),n>0&&te()('<span class="comma'+(o?" query-part__last":"")+'">, </span>').appendTo(r);var l=te()('<a ng-click="" class="graphite-func-param-link'+(o?" query-part__last":"")+'">'+(i||"&nbsp;")+"</a>"),u=te()(a);return u.attr("placeholder",e.name),c++,l.appendTo(r),u.appendTo(r),u.blur($.a.partial(f,n)),u.keyup(g),u.keypress($.a.partial(m,n)),l.click($.a.partial(d,n)),e.options&&function(e,t){e.attr("data-provide","typeahead");var n=p(t).options;"int"===p(t).type&&(n=$.a.map(n,function(e){return e.toString()})),e.typeahead({source:n,minLength:0,items:20,updater:function(n){return e.val(n),h(e[0],t),n}}),e.data("typeahead").lookup=function(){return this.query=this.$element.val()||"",this.process(this.source)}}(u,n),!0}),te()("<span>)</span>").appendTo(r),e(r.contents())(n)}function b(){r.children().remove(),v(),n.func.added&&(n.func.added=!1,setTimeout(function(){r.find(".graphite-func-param-link").first().click()},10))}o.handleRemoveFunction=function(e){o.removeFunction(e)},o.handleMoveLeft=function(e){o.moveFunction(e,-1)},o.handleMoveRight=function(e){o.moveFunction(e,1)},b()}}}Oe.c.directive("graphiteAddFunc",Ie),Oe.c.directive("graphiteFuncEditor",$e);for(var Fe=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4304,4346,4348,4348,4352,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7104,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11520,11557,11568,11621,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,13312,19893,19893,19968,19968,40907,40907,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42897,42912,42921,43002,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,44032,55203,55203,55216,55238,55243,55291,63744,64045,64048,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,65536,65547,65549,65574,65576,65594,65596,65597,65599,65613,65616,65629,65664,65786,65856,65908,66176,66204,66208,66256,66304,66334,66352,66378,66432,66461,66464,66499,66504,66511,66513,66517,66560,66717,67584,67589,67592,67592,67594,67637,67639,67640,67644,67644,67647,67669,67840,67861,67872,67897,68096,68096,68112,68115,68117,68119,68121,68147,68192,68220,68352,68405,68416,68437,68448,68466,68608,68680,69635,69687,69763,69807,73728,74606,74752,74850,77824,78894,92160,92728,110592,110593,119808,119892,119894,119964,119966,119967,119970,119970,119973,119974,119977,119980,119982,119993,119995,119995,119997,120003,120005,120069,120071,120074,120077,120084,120086,120092,120094,120121,120123,120126,120128,120132,120134,120134,120138,120144,120146,120485,120488,120512,120514,120538,120540,120570,120572,120596,120598,120628,120630,120654,120656,120686,120688,120712,120714,120744,120746,120770,120772,120779,131072,131072,173782,173782,173824,173824,177972,177972,177984,177984,178205,178205,194560,195101],qe=[],Re=0;Re<128;Re++)qe[Re]=Re>=48&&Re<=57||36===Re||126===Re||124===Re||Re>=65&&Re<=90||95===Re||45===Re||42===Re||58===Re||91===Re||93===Re||63===Re||37===Re||35===Re||61===Re||Re>=97&&Re<=122;var Le=qe;function je(e){this.input=e,this.char=1,this.from=1}function Ue(e){this.expression=e,this.lexer=new je(e),this.tokens=this.lexer.tokenize(),this.index=0}je.prototype={peek:function(e){return this.input.charAt(e||0)},skip:function(e){e=e||1,this.char+=e,this.input=this.input.slice(e)},tokenize:function(){for(var e=[],t=this.next();t;)e.push(t),t=this.next();return e},next:function(){if(this.from=this.char,/\s/.test(this.peek())){for(;/\s/.test(this.peek());)this.from+=1,this.skip();if(""===this.peek())return null}var e=this.scanStringLiteral();return e||((e=this.scanPunctuator()||this.scanNumericLiteral()||this.scanIdentifier()||this.scanTemplateSequence())?(this.skip(e.value.length),e):null)},scanTemplateSequence:function(){return"["===this.peek()&&"["===this.peek(1)?{type:"templateStart",value:"[[",pos:this.char}:"]"===this.peek()&&"]"===this.peek(1)?{type:"templateEnd",value:"[[",pos:this.char}:null},scanIdentifier:function(){var e,t,n="",a=0;function r(e){for(var t=0;t<Fe.length;){if(e<Fe[t++])return!1;if(e<=Fe[t++])return!0}return!1}function i(e){return/^[0-9a-fA-F]$/.test(e)}var o=$.a.bind(function(){if(a+=1,"u"!==this.peek(a))return null;var e=this.peek(a+1),t=this.peek(a+2),n=this.peek(a+3),o=this.peek(a+4);return i(e)&&i(t)&&i(n)&&i(o)&&r(parseInt(e+t+n+o,16))?(a+=5,"\\u"+e+t+n+o):null},this),s=$.a.bind(function(){var e=this.peek(a),t=e.charCodeAt(0);return"*"===e?(a+=1,e):92===t?o():t<128?qe[t]?(a+=1,e):null:r(t)?(a+=1,e):null},this),l=$.a.bind(function(){var e=this.peek(a),t=e.charCodeAt(0);return 92===t?o():t<128?Le[t]?(a+=1,e):null:r(t)?(a+=1,e):null},this);if(null===(t=s()))return null;for(n=t;null!==(t=l());)n+=t;switch(n){case"true":case"false":e="bool";break;default:e="identifier"}return{type:e,value:n,pos:this.char}},scanNumericLiteral:function(){var e,t=0,n="",a=this.input.length,r=this.peek(t);function i(e){return/^[0-9]$/.test(e)}function o(e){return/^[0-7]$/.test(e)}function s(e){return/^[0-9a-fA-F]$/.test(e)}function l(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"}if("-"===r&&(n+=r,t+=1,r=this.peek(t)),"."!==r&&!i(r))return null;if("."!==r){if(n+=this.peek(t),t+=1,r=this.peek(t),"0"===n){if("x"===r||"X"===r){for(t+=1,n+=r;t<a&&s(r=this.peek(t));)n+=r,t+=1;return n.length<=2?{type:"number",value:n,isMalformed:!0,pos:this.char}:t<a&&l(r=this.peek(t))?null:{type:"number",value:n,base:16,isMalformed:!1,pos:this.char}}if(o(r)){for(t+=1,n+=r,e=!1;t<a;){if(i(r=this.peek(t))&&(e=!0),!o(r)){if(!this.isPunctuator(r))return null;break}n+=r,t+=1}return t<a&&l(r=this.peek(t))?null:{type:"number",value:n,base:8,isMalformed:e}}i(r)&&(t+=1,n+=r)}for(;t<a&&i(r=this.peek(t));)n+=r,t+=1}if("."===r)for(n+=r,t+=1;t<a&&i(r=this.peek(t));)n+=r,t+=1;if("e"===r||"E"===r){if(n+=r,t+=1,"+"!==(r=this.peek(t))&&"-"!==r||(n+=this.peek(t),t+=1),!i(r=this.peek(t)))return null;for(n+=r,t+=1;t<a&&i(r=this.peek(t));)n+=r,t+=1}return t<a&&(r=this.peek(t),!this.isPunctuator(r))?null:{type:"number",value:n,base:10,pos:this.char,isMalformed:!isFinite(+n)}},isPunctuator:function(e){switch(e){case".":case"(":case")":case",":case"{":case"}":return!0}return!1},scanPunctuator:function(){var e=this.peek();return this.isPunctuator(e)?{type:e,value:e,pos:this.char}:null},scanStringLiteral:function(){var e=this.peek();if('"'!==e&&"'"!==e)return null;var t="";for(this.skip();this.peek()!==e;){if(""===this.peek())return{type:"string",value:t,isUnclosed:!0,quote:e,pos:this.char};t+=this.peek(),this.skip(1)}return this.skip(),{type:"string",value:t,isUnclosed:!1,quote:e,pos:this.char}}},Ue.prototype={getAst:function(){return this.start()},start:function(){try{return this.functionCall()||this.metricExpression()}catch(e){return{type:"error",message:e.message,pos:e.pos}}},curlyBraceSegment:function(){if(this.match("identifier","{")||this.match("{")){for(var e="";!this.match("")&&!this.match("}");)e+=this.consumeToken().value;return this.match("}")||this.errorMark("Expected closing '}'"),e+=this.consumeToken().value,this.match("identifier")&&(e+=this.consumeToken().value),{type:"segment",value:e}}return null},metricSegment:function(){var e=this.curlyBraceSegment();if(e)return e;if(this.match("identifier")||this.match("number")){var t=this.consumeToken().value.split(".");return 2===t.length&&(this.tokens.splice(this.index,0,{type:"."}),this.tokens.splice(this.index+1,0,{type:"number",value:t[1]})),{type:"segment",value:t[0]}}this.match("templateStart")||this.errorMark("Expected metric identifier"),this.consumeToken(),this.match("identifier")||this.errorMark("Expected identifier after templateStart");var n={type:"template",value:this.consumeToken().value};return this.match("templateEnd")||this.errorMark("Expected templateEnd"),this.consumeToken(),n},metricExpression:function(){if(!(this.match("templateStart")||this.match("identifier")||this.match("number")||this.match("{")))return null;var e={type:"metric",segments:[]};for(e.segments.push(this.metricSegment());this.match(".");){this.consumeToken();var t=this.metricSegment();t||this.errorMark("Expected metric identifier"),e.segments.push(t)}return e},functionCall:function(){if(!this.match("identifier","("))return null;var e={type:"function",name:this.consumeToken().value};return this.consumeToken(),e.params=this.functionParameters(),this.match(")")||this.errorMark("Expected closing parenthesis"),this.consumeToken(),e},boolExpression:function(){return this.match("bool")?{type:"bool",value:"true"===this.consumeToken().value}:null},functionParameters:function(){if(this.match(")")||this.match(""))return[];var e=this.functionCall()||this.numericLiteral()||this.seriesRefExpression()||this.boolExpression()||this.metricExpression()||this.stringLiteral();return this.match(",")?(this.consumeToken(),[e].concat(this.functionParameters())):[e]},seriesRefExpression:function(){return this.match("identifier")&&this.tokens[this.index].value.match(/\#[A-Z]/)?{type:"series-ref",value:this.consumeToken().value}:null},numericLiteral:function(){return this.match("number")?{type:"number",value:parseFloat(this.consumeToken().value)}:null},stringLiteral:function(){if(!this.match("string"))return null;var e=this.consumeToken();if(e.isUnclosed)throw{message:"Unclosed string parameter",pos:e.pos};return{type:"string",value:e.value}},errorMark:function(e){var t=this.tokens[this.index];throw{message:e+" instead found "+(t?t.type:"end of string"),pos:t?t.pos:this.lexer.char}},consumeToken:function(){return this.index++,this.tokens[this.index-1]},matchToken:function(e,t){var n=this.tokens[this.index+t];return void 0===n&&""===e||n&&n.type===e},match:function(e,t){return this.matchToken(e,0)&&(!t||this.matchToken(t,1))}};var Ve=function(){function e(e,t,n,a){this.datasource=e,this.target=t,this.parseTarget(),this.removeTagValue="-- remove tag --"}return e.$inject=["datasource","target","templateSrv","scopedVars"],e.prototype.parseTarget=function(){if(this.functions=[],this.segments=[],this.tags=[],this.error=null,!this.target.textEditor){var e=new Ue(this.target.target).getAst();if(null!==e){if("error"===e.type)return this.error=e.message+" at position: "+e.pos,void(this.target.textEditor=!0);try{this.parseTargetRecursive(e,null)}catch(e){console.log("error parsing target:",e.message),this.error=e.message,this.target.textEditor=!0}this.checkOtherSegmentsIndex=this.segments.length-1,this.checkForSeriesByTag()}else this.checkOtherSegmentsIndex=0}},e.prototype.checkForSeriesByTag=function(){var e=$.a.find(this.functions,function(e){return"seriesByTag"===e.def.name});if(e){this.seriesByTagUsed=!0,e.hidden=!0;var t=this.splitSeriesByTagParams(e);this.tags=t}},e.prototype.getSegmentPathUpTo=function(e){var t=this.segments.slice(0,e);return $.a.reduce(t,function(e,t){return e?e+"."+t.value:t.value},"")},e.prototype.parseTargetRecursive=function(e,t){var n=this;if(null===e)return null;switch(e.type){case"function":var a=this.datasource.createFuncInstance(e.name,{withDefaultParams:!1});$.a.each(e.params,function(e){n.parseTargetRecursive(e,a)}),a.updateText(),this.functions.push(a);break;case"series-ref":this.segments.length>0?this.addFunctionParameter(t,e.value):this.segments.push(e);break;case"bool":case"string":case"number":this.addFunctionParameter(t,e.value);break;case"metric":this.segments.length>0?this.addFunctionParameter(t,$.a.join($.a.map(e.segments,"value"),".")):this.segments=e.segments}},e.prototype.updateSegmentValue=function(e,t){this.segments[t].value=e.value},e.prototype.addSelectMetricSegment=function(){this.segments.push({value:"select metric"})},e.prototype.addFunction=function(e){this.functions.push(e),this.moveAliasFuncLast()},e.prototype.moveAliasFuncLast=function(){var e=$.a.find(this.functions,function(e){return e.def.name.startsWith("alias")});e&&(this.functions=$.a.without(this.functions,e),this.functions.push(e))},e.prototype.addFunctionParameter=function(e,t){if(e.params.length>=e.def.params.length&&!$.a.get($.a.last(e.def.params),"multiple",!1))throw{message:"too many parameters for function "+e.def.name};e.params.push(t)},e.prototype.removeFunction=function(e){this.functions=$.a.without(this.functions,e)},e.prototype.moveFunction=function(e,t){var n=this.functions.indexOf(e);$.a.move(this.functions,n,n+t)},e.prototype.updateModelTarget=function(e){if(!this.target.textEditor){var t=this.getSegmentPathUpTo(this.segments.length).replace(/\.select metric$/,"");this.target.target=$.a.reduce(this.functions,Be,t)}this.updateRenderedTarget(this.target,e);for(var n=0,a=e||[];n<a.length;n++){var r=a[n];r.refId!==this.target.refId&&this.updateRenderedTarget(r,e)}},e.prototype.updateRenderedTarget=function(e,t){var n=$.a.keyBy(t,"refId");delete n[e.refId];var a=/\#([A-Z])/g,r=e.target;for($.a.each(n,function(e,t){!function(e,t){var n=0;$.a.each(e,function(e,r){if(r!==t){var i=a.exec(e.target),o=i&&i.length?i.length-1:0;n+=o}}),e[t].refCount=n}(n,t)});r.match(a);){var i=r.replace(a,function(e,t){var a=n[t];return a?(0===a.refCount&&delete n[t],a.refCount--,a.target):e});if(i===r)break;r=i}delete e.targetFull,e.target!==r&&(e.targetFull=r)},e.prototype.splitSeriesByTagParams=function(e){var t=/([^\!=~]+)(\!?=~?)(.*)/;return $.a.flatten($.a.map(e.params,function(e){var n=t.exec(e);if(n){var a=n.slice(1);if(3===a.length)return{key:a[0],operator:a[1],value:a[2]}}return[]}))},e.prototype.getSeriesByTagFuncIndex=function(){return $.a.findIndex(this.functions,function(e){return"seriesByTag"===e.def.name})},e.prototype.getSeriesByTagFunc=function(){var e=this.getSeriesByTagFuncIndex();return e>=0?this.functions[e]:void 0},e.prototype.addTag=function(e){var t=Qe(e);this.getSeriesByTagFunc().params.push(t),this.tags.push(e)},e.prototype.removeTag=function(e){this.getSeriesByTagFunc().params.splice(e,1),this.tags.splice(e,1)},e.prototype.updateTag=function(e,t){if(this.error=null,e.key!==this.removeTagValue){var n=Qe(e);this.getSeriesByTagFunc().params[t]=n,this.tags[t]=e}else this.removeTag(t)},e.prototype.renderTagExpressions=function(e){return void 0===e&&(e=-1),$.a.compact($.a.map(this.tags,function(t,n){if(n!==e)return t.key+t.operator+t.value}))},e}();function Be(e,t){return t.render(e)}function Qe(e){return e.key+e.operator+e.value}var ze=n(9),He=["=","!=","=~","!=~"],Ge="tag: ",We=function(e){function t(t,n,a,r,i){var o=e.call(this,t,n)||this;return o.uiSegmentSrv=a,o.templateSrv=r,o.supportsTags=o.datasource.supportsTags,o.paused=!1,o.target.target=o.target.target||"",o.datasource.waitForFuncDefsLoaded().then(function(){o.queryModel=new Ve(o.datasource,o.target,r),o.buildSegments()}),o.removeTagValue="-- remove tag --",o}return t.$inject=["$scope","$injector","uiSegmentSrv","templateSrv","$timeout"],Q.c(t,e),t.prototype.parseTarget=function(){this.queryModel.parseTarget(),this.buildSegments()},t.prototype.toggleEditorMode=function(){this.target.textEditor=!this.target.textEditor,this.parseTarget()},t.prototype.buildSegments=function(){var e=this;this.segments=$.a.map(this.queryModel.segments,function(t){return e.uiSegmentSrv.newSegment(t)});var t=this.queryModel.checkOtherSegmentsIndex||0;this.checkOtherSegments(t),this.queryModel.seriesByTagUsed&&this.fixTagSegments()},t.prototype.addSelectMetricSegment=function(){this.queryModel.addSelectMetricSegment(),this.segments.push(this.uiSegmentSrv.newSelectMetric())},t.prototype.checkOtherSegments=function(e){var t=this;if(1!==this.queryModel.segments.length||"series-ref"!==this.queryModel.segments[0].type){if(0!==e){var n=this.queryModel.getSegmentPathUpTo(e+1);return""===n?Promise.resolve():this.datasource.metricFindQuery(n).then(function(a){if(0===a.length)""!==n&&(t.queryModel.segments=t.queryModel.segments.splice(0,e),t.segments=t.segments.splice(0,e),t.addSelectMetricSegment());else if(a[0].expandable){if(t.segments.length!==e)return t.checkOtherSegments(e+1);t.addSelectMetricSegment()}}).catch(function(e){ze.b.emit("alert-error",["Error",e])})}this.addSelectMetricSegment()}},t.prototype.setSegmentFocus=function(e){$.a.each(this.segments,function(t,n){t.focus=e===n})},t.prototype.getAltSegments=function(e,t){var n=this,a=t&&t.length>0?"*"+t+"*":"*";e>0&&(a=this.queryModel.getSegmentPathUpTo(e)+"."+a);var r={range:this.panelCtrl.range,requestId:"get-alt-segments"};return this.datasource.metricFindQuery(a,r).then(function(a){var r=$.a.map(a,function(e){return n.uiSegmentSrv.newSegment({value:e.text,expandable:e.expandable})});return e>0&&0===r.length?r:(0===e&&$.a.eachRight(n.panelCtrl.panel.targets,function(e){e.refId!==n.queryModel.target.refId&&r.unshift(n.uiSegmentSrv.newSegment({type:"series-ref",value:"#"+e.refId,expandable:!1}))}),$.a.eachRight(n.templateSrv.variables,function(e){r.unshift(n.uiSegmentSrv.newSegment({type:"template",value:"$"+e.name,expandable:!0}))}),r.unshift(n.uiSegmentSrv.newSegment("*")),n.supportsTags&&0===e?(n.removeTaggedEntry(r),n.addAltTagSegments(t,r)):r)}).catch(function(e){return[]})},t.prototype.addAltTagSegments=function(e,t){return this.getTagsAsSegments(e).then(function(e){return e=$.a.map(e,function(e){return e.value=Ge+e.value,e}),t.concat.apply(t,e)})},t.prototype.removeTaggedEntry=function(e){e=$.a.remove(e,function(e){return"_tagged"===e.value})},t.prototype.segmentValueChanged=function(e,t){var n=this;if(this.error=null,this.queryModel.updateSegmentValue(e,t),this.queryModel.functions.length>0&&this.queryModel.functions[0].def.fake&&(this.queryModel.functions=[]),"tag"===e.type){var a=function(e){return e.replace(Ge,"")}(e.value);return this.pause(),void this.addSeriesByTagFunc(a)}if(e.expandable)return this.checkOtherSegments(t+1).then(function(){n.setSegmentFocus(t+1),n.targetChanged()});this.spliceSegments(t+1),this.setSegmentFocus(t+1),this.targetChanged()},t.prototype.spliceSegments=function(e){this.segments=this.segments.splice(0,e),this.queryModel.segments=this.queryModel.segments.splice(0,e)},t.prototype.emptySegments=function(){this.queryModel.segments=[],this.segments=[]},t.prototype.targetTextChanged=function(){this.updateModelTarget(),this.refresh()},t.prototype.updateModelTarget=function(){this.queryModel.updateModelTarget(this.panelCtrl.panel.targets)},t.prototype.targetChanged=function(){if(!this.queryModel.error){var e=this.queryModel.target.target;this.updateModelTarget(),this.queryModel.target===e||this.paused||this.panelCtrl.refresh()}},t.prototype.addFunction=function(e){var t=this.datasource.createFuncInstance(e,{withDefaultParams:!0});t.added=!0,this.queryModel.addFunction(t),this.smartlyHandleNewAliasByNode(t),1===this.segments.length&&this.segments[0].fake&&this.emptySegments(),!t.params.length&&t.added&&this.targetChanged(),"seriesByTag"===t.def.name&&this.parseTarget()},t.prototype.removeFunction=function(e){this.queryModel.removeFunction(e),this.targetChanged()},t.prototype.moveFunction=function(e,t){this.queryModel.moveFunction(e,t),this.targetChanged()},t.prototype.addSeriesByTagFunc=function(e){var t=this.datasource.createFuncInstance("seriesByTag",{withDefaultParams:!1}),n=e+"=";t.params=[n],this.queryModel.addFunction(t),t.added=!0,this.emptySegments(),this.targetChanged(),this.parseTarget()},t.prototype.smartlyHandleNewAliasByNode=function(e){if("aliasByNode"===e.def.name)for(var t=0;t<this.segments.length;t++)if(this.segments[t].value.indexOf("*")>=0)return e.params[0]=t,e.added=!1,void this.targetChanged()},t.prototype.getAllTags=function(){var e=this;return this.datasource.getTags().then(function(t){var n=$.a.map(t,"text");return n.splice(0,0,e.removeTagValue),Ye(n)})},t.prototype.getTags=function(e,t){var n=this,a=this.queryModel.renderTagExpressions(e);return this.datasource.getTagsAutoComplete(a,t).then(function(e){var t=$.a.map(e,"text");return t.splice(0,0,n.removeTagValue),Ye(t)})},t.prototype.getTagsAsSegments=function(e){var t=this,n=this.queryModel.renderTagExpressions();return this.datasource.getTagsAutoComplete(n,e).then(function(e){return $.a.map(e,function(e){return t.uiSegmentSrv.newSegment({value:e.text,type:"tag",expandable:!1})})})},t.prototype.getTagOperators=function(){return Ye(He)},t.prototype.getAllTagValues=function(e){var t=e.key;return this.datasource.getTagValues(t).then(function(e){return Ye($.a.map(e,"text"))})},t.prototype.getTagValues=function(e,t,n){var a=this,r=this.queryModel.renderTagExpressions(t),i=e.key;return this.datasource.getTagValuesAutoComplete(r,i,n).then(function(e){var t=$.a.map(e,"text");return $.a.eachRight(a.templateSrv.variables,function(e){t.push("${"+e.name+":regex}")}),Ye(t)})},t.prototype.tagChanged=function(e,t){this.queryModel.updateTag(e,t),this.targetChanged()},t.prototype.addNewTag=function(e){var t={key:e.value,operator:"=",value:""};this.queryModel.addTag(t),this.targetChanged(),this.fixTagSegments()},t.prototype.removeTag=function(e){this.queryModel.removeTag(e),this.targetChanged()},t.prototype.fixTagSegments=function(){this.addTagSegments=[this.uiSegmentSrv.newPlusButton()]},t.prototype.showDelimiter=function(e){return e!==this.queryModel.tags.length-1},t.prototype.pause=function(){this.paused=!0},t.prototype.unpause=function(){this.paused=!1,this.panelCtrl.refresh()},t.prototype.getCollapsedText=function(){return this.target.target},t.templateUrl="partials/query.editor.html",t}(W.a);function Ye(e){return $.a.map(e,function(e){return{text:e,value:e}})}var Ke=function(){function e(e,t){this.graphiteVersions=[{name:"0.9.x",value:"0.9"},{name:"1.0.x",value:"1.0"},{name:"1.1.x",value:"1.1"}],this.datasourceSrv=t,this.current.jsonData=this.current.jsonData||{},this.current.jsonData.graphiteVersion=this.current.jsonData.graphiteVersion||"0.9",this.autoDetectGraphiteVersion()}return e.$inject=["$scope","datasourceSrv"],e.prototype.autoDetectGraphiteVersion=function(){var e=this;this.current.id&&this.datasourceSrv.loadDatasource(this.current.name).then(function(e){return e.getVersion()}).then(function(t){e.graphiteVersions.push({name:t,value:t}),e.current.jsonData.graphiteVersion=t})},e.templateUrl="public/app/plugins/datasource/graphite/partials/config.html",e}(),Xe=function(){function e(){}return e.templateUrl="partials/annotations.editor.html",e}(),Je=function(){function e(e,t,n,a,r){e.init=function(){var t=e.target;t.namespace=t.namespace||"",t.metricName=t.metricName||"",t.statistics=t.statistics||["Average"],t.dimensions=t.dimensions||{},t.period=t.period||"",t.region=t.region||"default",t.id=t.id||"",t.expression=t.expression||"",t.returnData=t.returnData||!1,t.highResolution=t.highResolution||!1,e.regionSegment=n.getSegmentForValue(e.target.region,"select region"),e.namespaceSegment=n.getSegmentForValue(e.target.namespace,"select namespace"),e.metricSegment=n.getSegmentForValue(e.target.metricName,"select metric"),e.dimSegments=$.a.reduce(e.target.dimensions,function(e,t,a){return e.push(n.newKey(a)),e.push(n.newOperator("=")),e.push(n.newKeyValue(t)),e},[]),e.statSegments=$.a.map(e.target.statistics,function(e){return n.getSegmentForValue(e)}),e.ensurePlusButton(e.statSegments),e.ensurePlusButton(e.dimSegments),e.removeDimSegment=n.newSegment({fake:!0,value:"-- remove dimension --"}),e.removeStatSegment=n.newSegment({fake:!0,value:"-- remove stat --"}),$.a.isEmpty(e.target.region)&&(e.target.region="default"),e.onChange||(e.onChange=function(){})},e.getStatSegments=function(){return r.when($.a.flatten([Z.a.copy(e.removeStatSegment),$.a.map(e.datasource.standardStatistics,function(e){return n.getSegmentForValue(e)}),n.getSegmentForValue("pNN.NN")]))},e.statSegmentChanged=function(t,n){t.value===e.removeStatSegment.value?e.statSegments.splice(n,1):t.type="value",e.target.statistics=$.a.reduce(e.statSegments,function(e,t){return t.fake||e.push(t.value),e},[]),e.ensurePlusButton(e.statSegments),e.onChange()},e.ensurePlusButton=function(e){var t=e.length,a=e[Math.max(t-1,0)];a&&"plus-button"===a.type||e.push(n.newPlusButton())},e.getDimSegments=function(t,n){if("operator"===t.type)return r.when([]);var a=e.target,i=r.when([]);if("key"===t.type||"plus-button"===t.type)i=e.datasource.getDimensionKeys(e.target.namespace,e.target.region);else if("value"===t.type){var o=e.dimSegments[n-2].value;i=e.datasource.getDimensionValues(a.region,a.namespace,a.metricName,o,a.dimensions)}return i.then(e.transformToSegments(!0)).then(function(n){return"key"===t.type&&n.splice(0,0,Z.a.copy(e.removeDimSegment)),n})},e.dimSegmentChanged=function(t,a){e.dimSegments[a]=t,t.value===e.removeDimSegment.value?e.dimSegments.splice(a,3):"plus-button"===t.type&&(e.dimSegments.push(n.newOperator("=")),e.dimSegments.push(n.newFake("select dimension value","value","query-segment-value")),t.type="key",t.cssClass="query-segment-key"),e.syncDimSegmentsWithModel(),e.ensurePlusButton(e.dimSegments),e.onChange()},e.syncDimSegmentsWithModel=function(){for(var t={},n=e.dimSegments.length,a=0;a<n-2;a+=3){var r=e.dimSegments[a],i=e.dimSegments[a+2];i.fake||(t[r.value]=i.value)}e.target.dimensions=t},e.getRegions=function(){return e.datasource.metricFindQuery("regions()").then(function(e){return e.unshift({text:"default"}),e}).then(e.transformToSegments(!0))},e.getNamespaces=function(){return e.datasource.metricFindQuery("namespaces()").then(e.transformToSegments(!0))},e.getMetrics=function(){return e.datasource.metricFindQuery("metrics("+e.target.namespace+","+e.target.region+")").then(e.transformToSegments(!0))},e.regionChanged=function(){e.target.region=e.regionSegment.value,e.onChange()},e.namespaceChanged=function(){e.target.namespace=e.namespaceSegment.value,e.onChange()},e.metricChanged=function(){e.target.metricName=e.metricSegment.value,e.onChange()},e.transformToSegments=function(e){return function(a){var r=$.a.map(a,function(e){return n.newSegment({value:e.text,expandable:e.expandable})});return e&&$.a.each(t.variables,function(e){r.unshift(n.newSegment({type:"template",value:"$"+e.name,expandable:!0}))}),r}},e.init()}return e.$inject=["$scope","templateSrv","uiSegmentSrv","datasourceSrv","$q"],e}();Oe.c.directive("cloudwatchQueryParameter",function(){return{templateUrl:"public/app/plugins/datasource/cloudwatch/partials/query.parameter.html",controller:Je,restrict:"E",scope:{target:"=",datasource:"=",onChange:"&"}}});var Ze=n(33),et=function(){function e(e,t,n,a,r){this.$q=t,this.backendSrv=n,this.templateSrv=a,this.timeSrv=r,this.type="cloudwatch",this.name=e.name,this.proxyUrl=e.url,this.defaultRegion=e.jsonData.defaultRegion,this.instanceSettings=e,this.standardStatistics=["Average","Maximum","Minimum","Sum","SampleCount"]}return e.$inject=["instanceSettings","$q","backendSrv","templateSrv","timeSrv"],e.prototype.query=function(e){var t=this;(e=Z.a.copy(e)).targets=this.expandTemplateVariable(e.targets,e.scopedVars,this.templateSrv);var n=$.a.filter(e.targets,function(e){return(""!==e.id||!0!==e.hide)&&(!!e.region&&!!e.namespace&&!!e.metricName&&!$.a.isEmpty(e.statistics)||e.expression.length>0)}).map(function(n){if(n.region=t.templateSrv.replace(t.getActualRegion(n.region),e.scopedVars),n.namespace=t.templateSrv.replace(n.namespace,e.scopedVars),n.metricName=t.templateSrv.replace(n.metricName,e.scopedVars),n.dimensions=t.convertDimensionFormat(n.dimensions,e.scopedVars),n.statistics=n.statistics.map(function(n){return t.templateSrv.replace(n,e.scopedVars)}),n.period=String(t.getPeriod(n,e)),n.id=t.templateSrv.replace(n.id,e.scopedVars),n.expression=t.templateSrv.replace(n.expression,e.scopedVars),n.returnData=void 0===n.hide||!n.hide,n.statistics.some(function(e){if(0===e.indexOf("p")){var t=/^p\d{2}(?:\.\d{1,2})?$/.exec(e);return!t||t[0]!==e}return!1}))throw{message:"Invalid extended statistics"};return $.a.extend({refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.instanceSettings.id,type:"timeSeriesQuery"},n)});if($.a.isEmpty(n)){var a=this.$q.defer();return a.resolve({data:[]}),a.promise}var r={from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:n};return this.performTimeSeriesQuery(r)},e.prototype.getPeriod=function(e,t,n){var a,r=this.convertToCloudWatchTime(t.range.from,!1),i=this.convertToCloudWatchTime(t.range.to,!0);n=Math.round((n||Date.now())/1e3);var o=i-r,s=60;return e.period?a=/^\d+$/.test(e.period)?parseInt(e.period,10):z.a.interval_to_seconds(this.templateSrv.replace(e.period,t.scopedVars)):s=a=n-r<=1296e3?"AWS/EC2"===e.namespace?300:60:n-r<=5443200?300:3600,a<1&&(a=1),!e.highResolution&&o/a>=1440&&(a=Math.ceil(o/1440/s)*s),a},e.prototype.performTimeSeriesQuery=function(e){return this.awsRequest("/api/tsdb/query",e).then(function(e){var t=[];return e.results&&$.a.forEach(e.results,function(e){$.a.forEach(e.series,function(n){var a={target:n.name,datapoints:n.points};e.meta.unit&&(a.unit=e.meta.unit),t.push(a)})}),{data:t}})},e.prototype.transformSuggestDataFromTable=function(e){return $.a.map(e.results.metricFindQuery.tables[0].rows,function(e){return{text:e[0],value:e[1]}})},e.prototype.doMetricQueryRequest=function(e,t){var n=this,a=this.timeSrv.timeRange();return this.awsRequest("/api/tsdb/query",{from:a.from.valueOf().toString(),to:a.to.valueOf().toString(),queries:[$.a.extend({refId:"metricFindQuery",intervalMs:1,maxDataPoints:1,datasourceId:this.instanceSettings.id,type:"metricFindQuery",subtype:e},t)]}).then(function(e){return n.transformSuggestDataFromTable(e)})},e.prototype.getRegions=function(){return this.doMetricQueryRequest("regions",null)},e.prototype.getNamespaces=function(){return this.doMetricQueryRequest("namespaces",null)},e.prototype.getMetrics=function(e,t){return this.doMetricQueryRequest("metrics",{region:this.templateSrv.replace(this.getActualRegion(t)),namespace:this.templateSrv.replace(e)})},e.prototype.getDimensionKeys=function(e,t){return this.doMetricQueryRequest("dimension_keys",{region:this.templateSrv.replace(this.getActualRegion(t)),namespace:this.templateSrv.replace(e)})},e.prototype.getDimensionValues=function(e,t,n,a,r){return this.doMetricQueryRequest("dimension_values",{region:this.templateSrv.replace(this.getActualRegion(e)),namespace:this.templateSrv.replace(t),metricName:this.templateSrv.replace(n),dimensionKey:this.templateSrv.replace(a),dimensions:this.convertDimensionFormat(r,{})})},e.prototype.getEbsVolumeIds=function(e,t){return this.doMetricQueryRequest("ebs_volume_ids",{region:this.templateSrv.replace(this.getActualRegion(e)),instanceId:this.templateSrv.replace(t)})},e.prototype.getEc2InstanceAttribute=function(e,t,n){return this.doMetricQueryRequest("ec2_instance_attribute",{region:this.templateSrv.replace(this.getActualRegion(e)),attributeName:this.templateSrv.replace(t),filters:n})},e.prototype.getResourceARNs=function(e,t,n){return this.doMetricQueryRequest("resource_arns",{region:this.templateSrv.replace(this.getActualRegion(e)),resourceType:this.templateSrv.replace(t),tags:n})},e.prototype.metricFindQuery=function(e){var t,n,a,r;if(e.match(/^regions\(\)/))return this.getRegions();if(e.match(/^namespaces\(\)/))return this.getNamespaces();var i=e.match(/^metrics\(([^\)]+?)(,\s?([^,]+?))?\)/);if(i)return n=i[1],t=i[3],this.getMetrics(n,t);var o=e.match(/^dimension_keys\(([^\)]+?)(,\s?([^,]+?))?\)/);if(o)return n=o[1],t=o[3],this.getDimensionKeys(n,t);var s=e.match(/^dimension_values\(([^,]+?),\s?([^,]+?),\s?([^,]+?),\s?([^,]+?)(,\s?(.+))?\)/);if(s){t=s[1],n=s[2],a=s[3];var l=s[4];return r={},s[6]&&(r=JSON.parse(this.templateSrv.replace(s[6]))),this.getDimensionValues(t,n,a,l,r)}var c=e.match(/^ebs_volume_ids\(([^,]+?),\s?([^,]+?)\)/);if(c){t=c[1];var u=c[2];return this.getEbsVolumeIds(t,u)}var d=e.match(/^ec2_instance_attribute\(([^,]+?),\s?([^,]+?),\s?(.+?)\)/);if(d){t=d[1];var p=d[2];return r=JSON.parse(this.templateSrv.replace(d[3])),this.getEc2InstanceAttribute(t,p,r)}var h=e.match(/^resource_arns\(([^,]+?),\s?([^,]+?),\s?(.+?)\)/);if(h){t=h[1];var f=h[2],m=JSON.parse(this.templateSrv.replace(h[3]));return this.getResourceARNs(t,f,m)}return this.$q.when([])},e.prototype.annotationQuery=function(e){var t=this,n=e.annotation,a=$.a.map(n.statistics,function(e){return t.templateSrv.replace(e)}),r=n.prefixMatching?"":"300",i=n.period||r;i=parseInt(i,10);var o={prefixMatching:n.prefixMatching,region:this.templateSrv.replace(this.getActualRegion(n.region)),namespace:this.templateSrv.replace(n.namespace),metricName:this.templateSrv.replace(n.metricName),dimensions:this.convertDimensionFormat(n.dimensions,{}),statistics:a,period:i,actionPrefix:n.actionPrefix||"",alarmNamePrefix:n.alarmNamePrefix||""};return this.awsRequest("/api/tsdb/query",{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:[$.a.extend({refId:"annotationQuery",intervalMs:1,maxDataPoints:1,datasourceId:this.instanceSettings.id,type:"annotationQuery"},o)]}).then(function(e){return $.a.map(e.results.annotationQuery.tables[0].rows,function(e){return{annotation:n,time:Date.parse(e[0]),title:e[1],tags:[e[2]],text:e[3]}})})},e.prototype.targetContainsTemplate=function(e){var t=this;return this.templateSrv.variableExists(e.region)||this.templateSrv.variableExists(e.namespace)||this.templateSrv.variableExists(e.metricName)||$.a.find(e.dimensions,function(e,n){return t.templateSrv.variableExists(n)||t.templateSrv.variableExists(e)})},e.prototype.testDatasource=function(){var e=this.defaultRegion;return this.getDimensionValues(e,"AWS/Billing","EstimatedCharges","ServiceName",{}).then(function(){return{status:"success",message:"Data source is working"}})},e.prototype.awsRequest=function(e,t){var n={method:"POST",url:e,data:t};return this.backendSrv.datasourceRequest(n).then(function(e){return e.data})},e.prototype.getDefaultRegion=function(){return this.defaultRegion},e.prototype.getActualRegion=function(e){return"default"===e||$.a.isEmpty(e)?this.getDefaultRegion():e},e.prototype.getExpandedVariables=function(e,t,n,a){var r=$.a.find(n.options,{selected:!0,text:"All"}),i=$.a.filter(n.options,function(e){return r?"All"!==e.text:e.selected}),o=$.a.isArray(n.current.value)?n.current.value.map(function(e){return{text:e,value:e}}):[n.current];return(i.some(function(e){return e.value===o[0].value})||"$__all"===o[0].value?i:o).map(function(r){var i=Z.a.copy(e),o={};return o[n.name]=r,i.refId=e.refId+"_"+r.value,i.dimensions[t]=a.replace(i.dimensions[t],o),n.multi&&e.id?i.id=e.id+window.btoa(r.value).replace(/=/g,"0"):i.id=e.id,i})},e.prototype.expandTemplateVariable=function(e,t,n){var a=this;return $.a.chain(e).map(function(e){var r=$.a.findKey(e.dimensions,function(e){return n.variableExists(e)&&!$.a.has(t,n.getVariableName(e))});if(r){var i=$.a.find(n.variables,function(t){return Ze.b(e.dimensions[r],t.name)&&t.multi}),o=$.a.find(n.variables,function(t){return Ze.b(e.dimensions[r],t.name)});return a.getExpandedVariables(e,r,i||o,n)}return[e]}).flatten().value()},e.prototype.convertToCloudWatchTime=function(e,t){return $.a.isString(e)&&(e=he.parse(e,t)),Math.round(e.valueOf()/1e3)},e.prototype.convertDimensionFormat=function(e,t){var n=this,a={};return $.a.each(e,function(e,r){a[n.templateSrv.replace(r,t)]=n.templateSrv.replace(e,t)}),a},e}(),tt=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.aliasSyntax="{{metric}} {{stat}} {{namespace}} {{region}} {{<dimension name>}}",a}return t.$inject=["$scope","$injector"],Q.c(t,e),t.templateUrl="partials/query.editor.html",t}(W.a),nt=function(){function e(e,t){this.accessKeyExist=!1,this.secretKeyExist=!1,this.authTypes=[{name:"Access & secret key",value:"keys"},{name:"Credentials file",value:"credentials"},{name:"ARN",value:"arn"}],this.indexPatternTypes=[{name:"No pattern",value:void 0},{name:"Hourly",value:"Hourly",example:"[logstash-]YYYY.MM.DD.HH"},{name:"Daily",value:"Daily",example:"[logstash-]YYYY.MM.DD"},{name:"Weekly",value:"Weekly",example:"[logstash-]GGGG.WW"},{name:"Monthly",value:"Monthly",example:"[logstash-]YYYY.MM"},{name:"Yearly",value:"Yearly",example:"[logstash-]YYYY"}],this.regions=["ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","cn-north-1","cn-northwest-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-gov-east-1","us-gov-west-1","us-iso-east-1","us-isob-east-1","us-west-1","us-west-2"],this.current.jsonData.timeField=this.current.jsonData.timeField||"@timestamp",this.current.jsonData.authType=this.current.jsonData.authType||"credentials",this.accessKeyExist=this.current.secureJsonFields.accessKey,this.secretKeyExist=this.current.secureJsonFields.secretKey,this.datasourceSrv=t,this.getRegions()}return e.$inject=["$scope","datasourceSrv"],e.prototype.resetAccessKey=function(){this.accessKeyExist=!1},e.prototype.resetSecretKey=function(){this.secretKeyExist=!1},e.prototype.getRegions=function(){var e=this;this.datasourceSrv.loadDatasource(this.current.name).then(function(e){return e.getRegions()}).then(function(t){e.regions=$.a.map(t,"value")},function(e){console.error("failed to get latest regions")})},e.templateUrl="partials/config.html",e}(),at=function(){function e(){}return e.templateUrl="partials/annotations.editor.html",e}(),rt=[{text:"Count",value:"count",requiresField:!1},{text:"Average",value:"avg",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0},{text:"Sum",value:"sum",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0},{text:"Max",value:"max",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0},{text:"Min",value:"min",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0},{text:"Extended Stats",value:"extended_stats",requiresField:!0,supportsMissing:!0,supportsInlineScript:!0},{text:"Percentiles",value:"percentiles",requiresField:!0,supportsMissing:!0,supportsInlineScript:!0},{text:"Unique Count",value:"cardinality",requiresField:!0,supportsMissing:!0},{text:"Moving Average",value:"moving_avg",requiresField:!1,isPipelineAgg:!0,minVersion:2},{text:"Derivative",value:"derivative",requiresField:!1,isPipelineAgg:!0,minVersion:2},{text:"Bucket Script",value:"bucket_script",requiresField:!1,isPipelineAgg:!0,supportsMultipleBucketPaths:!0,minVersion:2},{text:"Raw Document",value:"raw_document",requiresField:!1}],it=[{text:"Terms",value:"terms",requiresField:!0},{text:"Filters",value:"filters"},{text:"Geo Hash Grid",value:"geohash_grid",requiresField:!0},{text:"Date Histogram",value:"date_histogram",requiresField:!0},{text:"Histogram",value:"histogram",requiresField:!0}],ot=[{text:"Doc Count",value:"_count"},{text:"Term value",value:"_term"}],st=[{text:"Top",value:"desc"},{text:"Bottom",value:"asc"}],lt=[{text:"No limit",value:"0"},{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"5",value:"5"},{text:"10",value:"10"},{text:"15",value:"15"},{text:"20",value:"20"}],ct=[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Sum",value:"sum"},{text:"Count",value:"count"},{text:"Std Dev",value:"std_deviation"},{text:"Std Dev Upper",value:"std_deviation_bounds_upper"},{text:"Std Dev Lower",value:"std_deviation_bounds_lower"}],ut=[{text:"auto",value:"auto"},{text:"10s",value:"10s"},{text:"1m",value:"1m"},{text:"5m",value:"5m"},{text:"10m",value:"10m"},{text:"20m",value:"20m"},{text:"1h",value:"1h"},{text:"1d",value:"1d"}],dt=[{text:"Simple",value:"simple"},{text:"Linear",value:"linear"},{text:"Exponentially Weighted",value:"ewma"},{text:"Holt Linear",value:"holt"},{text:"Holt Winters",value:"holt_winters"}],pt={moving_avg:[{text:"window",default:5},{text:"model",default:"simple"},{text:"predict",default:void 0},{text:"minimize",default:!1}],derivative:[{text:"unit",default:void 0}],bucket_script:[]},ht={simple:[],linear:[],ewma:[{text:"Alpha",value:"alpha",default:void 0}],holt:[{text:"Alpha",value:"alpha",default:void 0},{text:"Beta",value:"beta",default:void 0}],holt_winters:[{text:"Alpha",value:"alpha",default:void 0},{text:"Beta",value:"beta",default:void 0},{text:"Gamma",value:"gamma",default:void 0},{text:"Period",value:"period",default:void 0},{text:"Pad",value:"pad",default:void 0,isCheckbox:!0}]};function ft(e){return $.a.filter(rt,function(t){return!t.minVersion||t.minVersion<=e})}function mt(e){if(e){var t=pt[e];return null!==t&&void 0!==t}return!1}function gt(e){return!!e&&void 0!==rt.find(function(t){return t.value===e&&t.supportsMultipleBucketPaths})}function vt(e,t){var n=[];return t?($.a.each(ht[e],function(e){e.isCheckbox||n.push(e)}),n):ht[e]}function bt(e){var t=$.a.find(rt,{value:e.type});return t.requiresField||mt(e.type)?t.text+" "+e.field:t.text}var yt=function(e,t){return $.a.find(e,{id:t})},wt=function(){function e(e){this.timeField=e.timeField,this.esVersion=e.esVersion}return e.prototype.getRangeFilter=function(){var e={};return e[this.timeField]={gte:"$timeFrom",lte:"$timeTo",format:"epoch_millis"},e},e.prototype.buildTermsAgg=function(e,t,n){var a,r,i;if(t.terms={field:e.field},!e.settings)return t;if(t.terms.size=0===parseInt(e.settings.size,10)?500:parseInt(e.settings.size,10),void 0!==e.settings.orderBy&&(t.terms.order={},"_term"===e.settings.orderBy&&this.esVersion>=60?t.terms.order._key=e.settings.order:t.terms.order[e.settings.orderBy]=e.settings.order,a=parseInt(e.settings.orderBy,10),!isNaN(a)))for(i=0;i<n.metrics.length;i++)if((r=n.metrics[i]).id===e.settings.orderBy){t.aggs={},t.aggs[r.id]={},t.aggs[r.id][r.type]={field:r.field};break}return void 0!==e.settings.min_doc_count&&(t.terms.min_doc_count=parseInt(e.settings.min_doc_count,10)),e.settings.missing&&(t.terms.missing=e.settings.missing),t},e.prototype.getDateHistogramAgg=function(e){var t={},n=e.settings||{};return t.interval=n.interval,t.field=this.timeField,t.min_doc_count=n.min_doc_count||0,t.extended_bounds={min:"$timeFrom",max:"$timeTo"},t.format="epoch_millis",""!==n.offset&&(t.offset=n.offset),"auto"===t.interval&&(t.interval="$__interval"),n.missing&&(t.missing=n.missing),t},e.prototype.getHistogramAgg=function(e){var t={},n=e.settings||{};return t.interval=n.interval,t.field=e.field,t.min_doc_count=n.min_doc_count||0,n.missing&&(t.missing=n.missing),t},e.prototype.getFiltersAgg=function(e){for(var t={},n=0;n<e.settings.filters.length;n++){var a=e.settings.filters[n].query,r=e.settings.filters[n].label;t[r=""===r||void 0===r?a:r]={query_string:{query:a,analyze_wildcard:!0}}}return t},e.prototype.documentQuery=function(e,t){return e.size=t,e.sort={},e.sort[this.timeField]={order:"desc",unmapped_type:"boolean"},this.esVersion<5&&(e.fields=["*","_source"]),e.script_fields={},this.esVersion<5?e.fielddata_fields=[this.timeField]:e.docvalue_fields=[this.timeField],e},e.prototype.addAdhocFilters=function(e,t){var n,a,r,i;if(t)for(n=0;n<t.length;n++)switch((r={})[(a=t[n]).key]=a.value,(i={})[a.key]={query:a.value},a.operator){case"=":e.query.bool.must||(e.query.bool.must=[]),e.query.bool.must.push({match_phrase:i});break;case"!=":e.query.bool.must_not||(e.query.bool.must_not=[]),e.query.bool.must_not.push({match_phrase:i});break;case"<":r[a.key]={lt:a.value},e.query.bool.filter.push({range:r});break;case">":r[a.key]={gt:a.value},e.query.bool.filter.push({range:r});break;case"=~":e.query.bool.filter.push({regexp:r});break;case"!~":e.query.bool.filter.push({bool:{must_not:{regexp:r}}})}},e.prototype.build=function(e,t,n){var a,r,i,o,s;e.metrics=e.metrics||[{type:"count",id:"1"}],e.bucketAggs=e.bucketAggs||[{type:"date_histogram",id:"2",settings:{interval:"auto"}}],e.timeField=this.timeField;var l={size:0,query:{bool:{filter:[{range:this.getRangeFilter()},{query_string:{analyze_wildcard:!0,query:n}}]}}};if(this.addAdhocFilters(l,t),0===e.bucketAggs.length){if(!(s=e.metrics[0])||"raw_document"!==s.type)throw{message:"Invalid query"};var c=s.settings&&s.settings.size||500;return this.documentQuery(l,c)}for(o=l,a=0;a<e.bucketAggs.length;a++){var u=e.bucketAggs[a],d={};switch(u.type){case"date_histogram":d.date_histogram=this.getDateHistogramAgg(u);break;case"histogram":d.histogram=this.getHistogramAgg(u);break;case"filters":d.filters={filters:this.getFiltersAgg(u)};break;case"terms":this.buildTermsAgg(u,d,e);break;case"geohash_grid":d.geohash_grid={field:u.field,precision:u.settings.precision}}o.aggs=o.aggs||{},o.aggs[u.id]=d,o=d}for(o.aggs={},a=0;a<e.metrics.length;a++)if("count"!==(s=e.metrics[a]).type){var p={},h=null;if(mt(s.type))if(gt(s.type)){if(!s.pipelineVariables)continue;for(h={buckets_path:{}},r=0;r<s.pipelineVariables.length;r++){if((i=s.pipelineVariables[r]).name&&i.pipelineAgg&&/^\d*$/.test(i.pipelineAgg))(f=yt(e.metrics,i.pipelineAgg))&&("count"===f.type?h.buckets_path[i.name]="_count":h.buckets_path[i.name]=i.pipelineAgg)}}else{if(!s.pipelineAgg||!/^\d*$/.test(s.pipelineAgg))continue;var f;(f=yt(e.metrics,s.pipelineAgg))&&(h="count"===f.type?{buckets_path:"_count"}:{buckets_path:s.pipelineAgg})}else h={field:s.field};for(var m in s.settings)s.settings.hasOwnProperty(m)&&null!==s.settings[m]&&(h[m]=s.settings[m]);p[s.type]=h,o.aggs[s.id]=p}return l},e.prototype.getTermsQuery=function(e){var t={size:0,query:{bool:{filter:[{range:this.getRangeFilter()}]}}};e.query&&t.query.bool.filter.push({query_string:{analyze_wildcard:!0,query:e.query}});var n=500;return e.size&&(n=e.size),t.aggs={1:{terms:{field:e.field,size:n,order:{_term:"asc"}}}},this.esVersion>=60&&(t.aggs[1].terms.order={_key:"asc"}),t},e}(),xt={Hourly:{startOf:"hour",amount:"hours"},Daily:{startOf:"day",amount:"days"},Weekly:{startOf:"isoWeek",amount:"weeks"},Monthly:{startOf:"month",amount:"months"},Yearly:{startOf:"year",amount:"years"}},St=function(){function e(e,t){this.pattern=e,this.interval=t}return e.prototype.getIndexForToday=function(){return this.interval?X.a.utc().format(this.pattern):this.pattern},e.prototype.getIndexList=function(e,t){if(!this.interval)return this.pattern;for(var n=xt[this.interval],a=X()(e).utc().startOf(n.startOf),r=X()(t).utc().startOf(n.startOf).valueOf(),i=[];a.valueOf()<=r;)i.push(a.format(this.pattern)),a.add(1,n.amount);return i},e}(),kt=function(){function e(e,t){this.targets=e,this.response=t,this.targets=e,this.response=t}return e.prototype.processMetrics=function(e,t,n,a){var r,i,o,s,l,c;for(i=0;i<t.metrics.length;i++)if(!(r=t.metrics[i]).hide)switch(r.type){case"count":for(s={datapoints:[],metric:"count",props:a},o=0;o<e.buckets.length;o++)c=(l=e.buckets[o]).doc_count,s.datapoints.push([c,l.key]);n.push(s);break;case"percentiles":if(0===e.buckets.length)break;var u=e.buckets[0][r.id].values;for(var d in u){for(s={datapoints:[],metric:"p"+d,props:a,field:r.field},o=0;o<e.buckets.length;o++){var p=(l=e.buckets[o])[r.id].values;s.datapoints.push([p[d],l.key])}n.push(s)}break;case"extended_stats":for(var h in r.meta)if(r.meta[h]){for(s={datapoints:[],metric:h,props:a,field:r.field},o=0;o<e.buckets.length;o++){var f=(l=e.buckets[o])[r.id];f.std_deviation_bounds_upper=f.std_deviation_bounds.upper,f.std_deviation_bounds_lower=f.std_deviation_bounds.lower,s.datapoints.push([f[h],l.key])}n.push(s)}break;default:for(s={datapoints:[],metric:r.type,field:r.field,metricId:r.id,props:a},o=0;o<e.buckets.length;o++)void 0!==(c=(l=e.buckets[o])[r.id])&&(c.normalized_value?s.datapoints.push([c.normalized_value,l.key]):s.datapoints.push([c.value,l.key]));n.push(s)}},e.prototype.processAggregationDocs=function(e,t,n,a,r){if(0===a.columns.length){for(var i=0,o=$.a.keys(r);i<o.length;i++){var s=o[i];a.addColumn({text:s,filterable:!0})}a.addColumn({text:t.field,filterable:!0})}for(var l=function(e,t,n){a.addColumn({text:t}),e.push(n)},c=0,u=e.buckets;c<u.length;c++){for(var d=u[c],p=[],h=0,f=$.a.values(r);h<f.length;h++){var m=f[h];p.push(m)}p.push(d.key);for(var g=0,v=n.metrics;g<v.length;g++){var b=v[g];switch(b.type){case"count":l(p,this.getMetricName(b.type),d.doc_count);break;case"extended_stats":for(var y in b.meta)if(b.meta[y]){var w=d[b.id];w.std_deviation_bounds_upper=w.std_deviation_bounds.upper,w.std_deviation_bounds_lower=w.std_deviation_bounds.lower,l(p,this.getMetricName(y),w[y])}break;default:var x=this.getMetricName(b.type);$.a.filter(n.metrics,{type:b.type}).length>1&&(x+=" "+b.field),l(p,x,d[b.id].value)}}a.rows.push(p)}},e.prototype.processBuckets=function(e,t,n,a,r,i){var o,s,l,c,u=t.bucketAggs.length-1;for(c in e)if(s=$.a.find(t.bucketAggs,{id:c}),l=e[c],s)if(i===u)"date_histogram"===s.type?this.processMetrics(l,t,n,r):this.processAggregationDocs(l,s,t,a,r);else for(var d in l.buckets)o=l.buckets[d],r=$.a.clone(r),void 0!==o.key?r[s.field]=o.key:r.filter=d,o.key_as_string&&(r[s.field]=o.key_as_string),this.processBuckets(o,t,n,a,r,i+1)},e.prototype.getMetricName=function(e){var t=$.a.find(rt,{value:e});return t||(t=$.a.find(ct,{value:e})),t?t.text:e},e.prototype.getSeriesName=function(e,t,n){var a=this.getMetricName(e.metric);if(t.alias){return t.alias.replace(/\{\{([\s\S]+?)\}\}/g,function(t,n,r){var i=n||r;return 0===i.indexOf("term ")?e.props[i.substring(5)]:void 0!==e.props[i]?e.props[i]:"metric"===i?a:"field"===i?e.field||"":t})}if(e.field&&mt(e.metric))if(e.metric&&gt(e.metric)){var r=$.a.find(t.metrics,{id:e.metricId});if(r&&r.settings.script){a=r.settings.script;for(var i=0,o=r.pipelineVariables;i<o.length;i++){var s=o[i];(l=$.a.find(t.metrics,{id:s.pipelineAgg}))&&(a=a.replace("params."+s.name,bt(l)))}}else a="Unset"}else{var l;(l=$.a.find(t.metrics,{id:e.field}))?a+=" "+bt(l):a="Unset"}else e.field&&(a+=" "+e.field);if(0===$.a.keys(e.props).length)return a;var c="";for(var u in e.props)c+=e.props[u]+" ";return 1===n?c.trim():c.trim()+" "+a},e.prototype.nameSeries=function(e,t){for(var n=$.a.uniq($.a.map(e,"metric")).length,a=0;a<e.length;a++){var r=e[a];r.target=this.getSeriesName(r,t,n)}},e.prototype.processHits=function(e,t){var n,a,r,i,o={target:"docs",type:"docs",datapoints:[],total:e.total,filterable:!0};for(i=0;i<e.hits.length;i++){if(r={_id:(a=e.hits[i])._id,_type:a._type,_index:a._index},a._source)for(n in a._source)r[n]=a._source[n];for(n in a.fields)r[n]=a.fields[n];o.datapoints.push(r)}t.push(o)},e.prototype.trimDatapoints=function(e,t){var n=$.a.find(t.bucketAggs,{type:"date_histogram"});if(n&&n.settings&&n.settings.trimEdges){var a=n.settings.trimEdges;for(var r in e){var i=e[r];i.datapoints.length>2*a&&(i.datapoints=i.datapoints.slice(a,i.datapoints.length-a))}}},e.prototype.getErrorFromElasticResponse=function(e,t){var n={};return n.data=JSON.stringify(t,null,4),t.root_cause&&t.root_cause.length>0&&t.root_cause[0].reason?n.message=t.root_cause[0].reason:n.message=t.reason||"Unkown elastic error response",e.$$config&&(n.config=e.$$config),n},e.prototype.getTimeSeries=function(){for(var e=[],t=0;t<this.response.responses.length;t++){var n=this.response.responses[t];if(n.error)throw this.getErrorFromElasticResponse(this.response,n.error);if(n.hits&&n.hits.hits.length>0&&this.processHits(n.hits,e),n.aggregations){var a=n.aggregations,r=this.targets[t],i=[],o=new pe.a;this.processBuckets(a,r,i,o,{},0),this.trimDatapoints(i,r),this.nameSeries(i,r);for(var s=0;s<i.length;s++)e.push(i[s]);o.rows.length>0&&e.push(o)}}return{data:e}},e}(),Ct=function(){function e(e,t,n,a,r){this.$q=t,this.backendSrv=n,this.templateSrv=a,this.timeSrv=r,this.basicAuth=e.basicAuth,this.withCredentials=e.withCredentials,this.url=e.url,this.name=e.name,this.index=e.index,this.timeField=e.jsonData.timeField,this.esVersion=e.jsonData.esVersion,this.indexPattern=new St(e.index,e.jsonData.interval),this.interval=e.jsonData.timeInterval,this.maxConcurrentShardRequests=e.jsonData.maxConcurrentShardRequests,this.queryBuilder=new wt({timeField:this.timeField,esVersion:this.esVersion})}return e.$inject=["instanceSettings","$q","backendSrv","templateSrv","timeSrv"],e.prototype.request=function(e,t,n){var a={url:this.url+"/"+t,method:e,data:n};return(this.basicAuth||this.withCredentials)&&(a.withCredentials=!0),this.basicAuth&&(a.headers={Authorization:this.basicAuth}),this.backendSrv.datasourceRequest(a)},e.prototype.get=function(e){var t=this.timeSrv.timeRange(),n=this.indexPattern.getIndexList(t.from.valueOf(),t.to.valueOf());return $.a.isArray(n)&&n.length?this.request("GET",n[0]+e).then(function(e){return e.data.$$config=e.config,e.data}):this.request("GET",this.indexPattern.getIndexForToday()+e).then(function(e){return e.data.$$config=e.config,e.data})},e.prototype.post=function(e,t){return this.request("POST",e,t).then(function(e){return e.data.$$config=e.config,e.data}).catch(function(e){if(e.data&&e.data.error)throw{message:"Elasticsearch error: "+e.data.error.reason,error:e.data.error};throw e})},e.prototype.annotationQuery=function(e){var t=e.annotation,n=t.timeField||"@timestamp",a=t.query||"*",r=t.tagsField||"tags",i=t.textField||null,o={};o[n]={from:e.range.from.valueOf(),to:e.range.to.valueOf(),format:"epoch_millis"};var s={query:{bool:{filter:[{range:o},{query_string:{query:this.templateSrv.replace(a,{},"lucene")}}]}},size:1e4};this.esVersion<5&&(s.fields=[n,"_source"]);var l={search_type:"query_then_fetch",ignore_unavailable:!0};t.index?l.index=t.index:l.index=this.indexPattern.getIndexList(e.range.from,e.range.to);var c=Z.a.toJson(l)+"\n"+Z.a.toJson(s)+"\n";return this.post("_msearch",c).then(function(e){for(var a=[],o=e.responses[0].hits.hits,s=function(e,t){if(t){for(var n=t.split("."),a=e,r=0;r<n.length;r++)if(!(a=a[n[r]]))return console.log("could not find field in annotation: ",t),"";return a}},l=0;l<o.length;l++){var c=o[l]._source,u=s(c,n);if(void 0!==o[l].fields){var d=o[l].fields;($.a.isString(d[n])||$.a.isNumber(d[n]))&&(u=d[n])}var p={annotation:t,time:X.a.utc(u).valueOf(),text:s(c,i),tags:s(c,r)};if(t.titleField){var h=s(c,t.titleField);h&&(p.text=h+"\n"+p.text)}"string"==typeof p.tags&&(p.tags=p.tags.split(",")),a.push(p)}return a})},e.prototype.testDatasource=function(){var e=this;return this.timeSrv.setTime({from:"now-1m",to:"now"},!0),this.getFields({type:"date"}).then(function(t){return $.a.find(t,{text:e.timeField})?{status:"success",message:"Index OK. Time field name OK."}:{status:"error",message:"No date field named "+e.timeField+" found"}},function(e){if(console.log(e),e.data&&e.data.error){var t=Z.a.toJson(e.data.error);return e.data.error.reason&&(t=e.data.error.reason),{status:"error",message:t}}return{status:"error",message:e.status}})},e.prototype.getQueryHeader=function(e,t,n){var a={search_type:e,ignore_unavailable:!0,index:this.indexPattern.getIndexList(t,n)};return this.esVersion>=56&&(a.max_concurrent_shard_requests=this.maxConcurrentShardRequests),Z.a.toJson(a)},e.prototype.query=function(e){for(var t,n="",a=[],r=this.templateSrv.getAdhocFilters(this.name),i=0;i<e.targets.length;i++)if(!(t=e.targets[i]).hide){t.alias&&(t.alias=this.templateSrv.replace(t.alias,e.scopedVars,"lucene"));var o=this.templateSrv.replace(t.query||"*",e.scopedVars,"lucene"),s=this.queryBuilder.build(t,r,o),l=Z.a.toJson(s),c=0===s.size&&this.esVersion<5?"count":"query_then_fetch";n+=this.getQueryHeader(c,e.range.from,e.range.to)+"\n",n+=l+"\n",a.push(t)}return 0===a.length?this.$q.when([]):(n=(n=n.replace(/\$timeFrom/g,e.range.from.valueOf())).replace(/\$timeTo/g,e.range.to.valueOf()),n=this.templateSrv.replace(n,e.scopedVars),this.post("_msearch",n).then(function(e){return new kt(a,e).getTimeSeries()}))},e.prototype.getFields=function(e){return this.get("/_mapping").then(function(t){var n={float:"number",double:"number",integer:"number",long:"number",date:"date",string:"string",text:"string",scaled_float:"number",nested:"nested"};function a(e,t,a){return"_"!==t[0]&&(!a.type||(a.type===e.type||a.type===n[e.type]))}var r=[],i={};function o(t){for(var n in t){var s=t[n];if($.a.isObject(s.properties)&&(r.push(n),o(s.properties)),$.a.isObject(s.fields)&&(r.push(n),o(s.fields)),$.a.isString(s.type)){var l=r.concat(n).join(".");a(s,n,e)&&(i[l]={text:l,type:s.type})}}r.pop()}for(var s in t){var l=t[s];if(l&&l.mappings){var c=l.mappings;for(var u in c){o(c[u].properties)}}}return $.a.map(i,function(e){return e})})},e.prototype.getTerms=function(e){var t=this.timeSrv.timeRange(),n=this.esVersion>=5?"query_then_fetch":"count",a=this.getQueryHeader(n,t.from,t.to),r=Z.a.toJson(this.queryBuilder.getTermsQuery(e));return r=a+"\n"+(r=(r=r.replace(/\$timeFrom/g,t.from.valueOf())).replace(/\$timeTo/g,t.to.valueOf()))+"\n",this.post("_msearch?search_type="+n,r).then(function(e){if(!e.responses[0].aggregations)return[];var t=e.responses[0].aggregations[1].buckets;return $.a.map(t,function(e){return{text:e.key_as_string||e.key,value:e.key}})})},e.prototype.metricFindQuery=function(e){return(e=Z.a.fromJson(e))?"fields"===e.find?(e.field=this.templateSrv.replace(e.field,{},"lucene"),this.getFields(e)):"terms"===e.find?(e.field=this.templateSrv.replace(e.field,{},"lucene"),e.query=this.templateSrv.replace(e.query||"*",{},"lucene"),this.getTerms(e)):void 0:this.$q.when([])},e.prototype.getTagKeys=function(){return this.getFields({})},e.prototype.getTagValues=function(e){return this.getTerms({field:e.key,query:"*"})},e.prototype.targetContainsTemplate=function(e){if(this.templateSrv.variableExists(e.query)||this.templateSrv.variableExists(e.alias))return!0;for(var t=0,n=e.bucketAggs;t<n.length;t++){var a=n[t];if(this.templateSrv.variableExists(a.field)||this.objectContainsTemplate(a.settings))return!0}for(var r=0,i=e.metrics;r<i.length;r++){var o=i[r];if(this.templateSrv.variableExists(o.field)||this.objectContainsTemplate(o.settings)||this.objectContainsTemplate(o.meta))return!0}return!1},e.prototype.isPrimitive=function(e){return null===e||void 0===e||!!["string","number","boolean"].some(function(e){return e===typeof!0})},e.prototype.objectContainsTemplate=function(e){if(!e)return!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];if(this.isPrimitive(e[a])){if(this.templateSrv.variableExists(e[a]))return!0}else if(Array.isArray(e[a]))for(var r=0,i=e[a];r<i.length;r++){var o=i[r];if(this.objectContainsTemplate(o))return!0}else if(this.objectContainsTemplate(e[a]))return!0}return!1},e}(),Et=function(){function e(e,t,n,a){var r=e.target.bucketAggs;e.orderByOptions=[],e.getBucketAggTypes=function(){return it},e.getOrderOptions=function(){return st},e.getSizeOptions=function(){return lt},a.onAppEvent("elastic-query-updated",function(){e.validateModel()},e),e.init=function(){e.agg=r[e.index],e.validateModel()},e.onChangeInternal=function(){e.onChange()},e.onTypeChanged=function(){switch(e.agg.settings={},e.showOptions=!1,e.agg.type){case"date_histogram":case"histogram":case"terms":delete e.agg.query,e.agg.field="select field";break;case"filters":delete e.agg.field,e.agg.query="*";break;case"geohash_grid":e.agg.settings.precision=3}e.validateModel(),e.onChange()},e.validateModel=function(){e.index=$.a.indexOf(r,e.agg),e.isFirst=0===e.index,e.bucketAggCount=r.length;var t="",n=e.agg.settings||{};switch(e.agg.type){case"terms":n.order=n.order||"desc",n.size=n.size||"10",n.min_doc_count=n.min_doc_count||1,n.orderBy=n.orderBy||"_term","0"!==n.size&&(t=function(e){return $.a.find(st,{value:e}).text}(n.order)+" "+n.size+", "),n.min_doc_count>0&&(t+="Min Doc Count: "+n.min_doc_count+", "),t+="Order by: "+function(e,t){var n=$.a.find(ot,{value:e});if(n)return n.text;var a=$.a.find(t.metrics,{id:e});return a?bt(a):"metric not found"}(n.orderBy,e.target),"0"===n.size&&(t+=" ("+n.order+")");break;case"filters":n.filters=n.filters||[{query:"*"}],(t=$.a.reduce(n.filters,function(e,t,n){return e+="Q"+(n+1)+"  = "+t.query+" "},"")).length>50&&(t=t.substr(0,50)+"..."),t="Filter Queries ("+n.filters.length+")";break;case"date_histogram":n.interval=n.interval||"auto",n.min_doc_count=n.min_doc_count||0,e.agg.field=e.target.timeField,t="Interval: "+n.interval,n.min_doc_count>0&&(t+=", Min Doc Count: "+n.min_doc_count),(void 0===n.trimEdges||n.trimEdges<0)&&(n.trimEdges=0),n.trimEdges&&n.trimEdges>0&&(t+=", Trim edges: "+n.trimEdges);break;case"histogram":n.interval=n.interval||1e3,n.min_doc_count=$.a.defaultTo(n.min_doc_count,1),t="Interval: "+n.interval,n.min_doc_count>0&&(t+=", Min Doc Count: "+n.min_doc_count);break;case"geohash_grid":n.precision=Math.max(Math.min(n.precision,7),1),t="Precision: "+n.precision}return e.settingsLinkText=t,e.agg.settings=n,!0},e.addFiltersQuery=function(){e.agg.settings.filters.push({query:"*"})},e.removeFiltersQuery=function(t){e.agg.settings.filters=$.a.without(e.agg.settings.filters,t)},e.toggleOptions=function(){e.showOptions=!e.showOptions},e.getOrderByOptions=function(){return function(e){var t=[];return $.a.each(e.metrics,function(e){"count"!==e.type&&t.push({text:bt(e),value:e.id})}),ot.concat(t)}(e.target)},e.getFieldsInternal=function(){return"date_histogram"===e.agg.type?e.getFields({$fieldType:"date"}):e.getFields()},e.getIntervalOptions=function(){return n.when(t.transformToSegments(!0,"interval")(ut))},e.addBucketAgg=function(){var t=r[r.length-1],n=r.length-1;t&&"date_histogram"===t.type&&(n-=1);var a=$.a.reduce(e.target.bucketAggs.concat(e.target.metrics),function(e,t){return parseInt(t.id,10)>e?parseInt(t.id,10):e},0);r.splice(n,0,{type:"terms",field:"select field",id:(a+1).toString(),fake:!0}),e.onChange()},e.removeBucketAgg=function(){r.splice(e.index,1),e.onChange()},e.init()}return e.$inject=["$scope","uiSegmentSrv","$q","$rootScope"],e}();Oe.c.directive("elasticBucketAgg",function(){return{templateUrl:"public/app/plugins/datasource/elasticsearch/partials/bucket_agg.html",controller:Et,restrict:"E",scope:{target:"=",index:"=",onChange:"&",getFields:"&"}}});var Tt=function(){function e(e,t,n,a){var r=e.target.metrics;e.metricAggTypes=ft(e.esVersion),e.extendedStats=ct,e.pipelineAggOptions=[],e.modelSettingsValues={},e.init=function(){e.agg=r[e.index],e.validateModel(),e.updatePipelineAggOptions()},e.updatePipelineAggOptions=function(){e.pipelineAggOptions=function(e){var t=[];return $.a.each(e.metrics,function(e){mt(e.type)||t.push({text:bt(e),value:e.id})}),t}(e.target)},a.onAppEvent("elastic-query-updated",function(){e.index=$.a.indexOf(r,e.agg),e.updatePipelineAggOptions(),e.validateModel()},e),e.validateModel=function(){if(e.isFirst=0===e.index,e.isSingle=1===r.length,e.settingsLinkText="",e.variablesLinkText="",e.aggDef=$.a.find(e.metricAggTypes,{value:e.agg.type}),mt(e.agg.type)){gt(e.agg.type)?(e.variablesLinkText="Options",e.agg.settings.script&&(e.variablesLinkText="Script: "+e.agg.settings.script.replace(new RegExp("params.","g"),""))):(e.agg.pipelineAgg=e.agg.pipelineAgg||"select metric",e.agg.field=e.agg.pipelineAgg);var t=function(e){return mt(e.type)?pt[e.type]:[]}(e.agg);t.length>0&&($.a.each(t,function(t){e.agg.settings[t.text]=e.agg.settings[t.text]||t.default}),e.settingsLinkText="Options")}else e.agg.field||(e.agg.field="select field");switch(e.agg.type){case"cardinality":var n=e.agg.settings.precision_threshold||"";e.settingsLinkText="Precision threshold: "+n;break;case"percentiles":e.agg.settings.percents=e.agg.settings.percents||[25,50,75,95,99],e.settingsLinkText="Values: "+e.agg.settings.percents.join(",");break;case"extended_stats":0===$.a.keys(e.agg.meta).length&&(e.agg.meta.std_deviation_bounds_lower=!0,e.agg.meta.std_deviation_bounds_upper=!0);var a=$.a.reduce(e.agg.meta,function(t,n,a){if(n){var r=$.a.find(e.extendedStats,{value:a});t.push(r.text)}return t},[]);e.settingsLinkText="Stats: "+a.join(", ");break;case"moving_avg":e.movingAvgModelTypes=dt,e.modelSettings=vt(e.agg.settings.model,!0),e.updateMovingAvgModelSettings();break;case"raw_document":e.agg.settings.size=e.agg.settings.size||500,e.settingsLinkText="Size: "+e.agg.settings.size,e.target.metrics.splice(0,e.target.metrics.length,e.agg),e.target.bucketAggs=[]}if(e.aggDef.supportsInlineScript){var i=e.agg.inlineScript;i?e.agg.settings.script={inline:i}:delete e.agg.settings.script,""===e.settingsLinkText&&(e.settingsLinkText="Options")}},e.toggleOptions=function(){e.showOptions=!e.showOptions,e.updatePipelineAggOptions()},e.toggleVariables=function(){e.showVariables=!e.showVariables},e.onChangeInternal=function(){e.onChange()},e.updateMovingAvgModelSettings=function(){for(var t=[],n=vt(e.agg.settings.model,!1),a=0;a<n.length;a++)t.push(n[a].value);for(var r in e.agg.settings.settings)null!==e.agg.settings.settings[r]&&-1!==t.indexOf(r)||delete e.agg.settings.settings[r]},e.onChangeClearInternal=function(){delete e.agg.settings.minimize,e.onChange()},e.onTypeChange=function(){e.agg.settings={},e.agg.meta={},e.showOptions=!1,0===e.target.bucketAggs.length&&"raw_document"!==e.agg.type&&(e.target.bucketAggs=[{type:"date_histogram",id:"2",settings:{interval:"auto"}}]),e.showVariables=gt(e.agg.type),e.updatePipelineAggOptions(),e.onChange()},e.getFieldsInternal=function(){return"cardinality"===e.agg.type?e.getFields():e.getFields({$fieldType:"number"})},e.addMetricAgg=function(){var t=r.length,n=$.a.reduce(e.target.bucketAggs.concat(e.target.metrics),function(e,t){return parseInt(t.id,10)>e?parseInt(t.id,10):e},0);r.splice(t,0,{type:"count",field:"select field",id:(n+1).toString()}),e.onChange()},e.removeMetricAgg=function(){r.splice(e.index,1),e.onChange()},e.toggleShowMetric=function(){e.agg.hide=!e.agg.hide,e.agg.hide||delete e.agg.hide,e.onChange()},e.init()}return e.$inject=["$scope","uiSegmentSrv","$q","$rootScope"],e}();Oe.c.directive("elasticMetricAgg",function(){return{templateUrl:"public/app/plugins/datasource/elasticsearch/partials/metric_agg.html",controller:Tt,restrict:"E",scope:{target:"=",index:"=",onChange:"&",getFields:"&",esVersion:"="}}});var Mt=function(e){return{name:"var"+e,pipelineAgg:"select metric"}},_t=function(){function e(e){e.variables=e.variables||[Mt(1)],e.onChangeInternal=function(){e.onChange()},e.add=function(){e.variables.push(Mt(e.variables.length+1)),e.onChange()},e.remove=function(t){e.variables.splice(t,1),e.onChange()}}return e.$inject=["$scope"],e}();Oe.c.directive("elasticPipelineVariables",function(){return{templateUrl:"public/app/plugins/datasource/elasticsearch/partials/pipeline_variables.html",controller:"ElasticPipelineVariablesCtrl",restrict:"E",scope:{onChange:"&",variables:"=",options:"="}}}),Oe.c.controller("ElasticPipelineVariablesCtrl",_t);var At=function(e){function t(t,n,a,r){var i=e.call(this,t,n)||this;if(i.$rootScope=a,i.uiSegmentSrv=r,i.esVersion=i.datasource.esVersion,i.target=i.target||{},i.target.metrics=i.target.metrics||[{type:"count",id:"1"}],i.target.bucketAggs=i.target.bucketAggs||[{type:"date_histogram",id:"2",settings:{interval:"auto"}}],0===i.target.bucketAggs.length){var o=i.target.metrics[0];o&&"raw_document"===o.type||(i.target.bucketAggs=[{type:"date_histogram",id:"2",settings:{interval:"auto"}}]),i.refresh()}return i.queryUpdated(),i}return t.$inject=["$scope","$injector","$rootScope","uiSegmentSrv"],Q.c(t,e),t.prototype.getFields=function(e){var t=Z.a.toJson({find:"fields",type:e});return this.datasource.metricFindQuery(t).then(this.uiSegmentSrv.transformToSegments(!1)).catch(this.handleQueryError.bind(this))},t.prototype.queryUpdated=function(){var e=Z.a.toJson(this.datasource.queryBuilder.build(this.target),!0);this.rawQueryOld&&e!==this.rawQueryOld&&this.refresh(),this.rawQueryOld=e,this.$rootScope.appEvent("elastic-query-updated")},t.prototype.getCollapsedText=function(){var e=this.target.metrics,t=this.target.bucketAggs,n=ft(this.esVersion),a=it,r="";return this.target.query&&(r+="Query: "+this.target.query+", "),r+="Metrics: ",$.a.each(e,function(e,t){var a=$.a.find(n,{value:e.type});r+=a.text+"(",a.requiresField&&(r+=e.field),a.supportsMultipleBucketPaths&&(r+=e.settings.script.replace(new RegExp("params.","g"),"")),r+="), "}),$.a.each(t,function(e,t){0===t&&(r+=" Group by: ");var n=$.a.find(a,{value:e.type});r+=n.text+"(",n.requiresField&&(r+=e.field),r+="), "}),this.target.alias&&(r+="Alias: "+this.target.alias),r},t.prototype.handleQueryError=function(e){return this.error=e.message||"Failed to issue metric query",[]},t.templateUrl="partials/query.editor.html",t}(W.a),Dt=function(){function e(e){this.indexPatternTypes=[{name:"No pattern",value:void 0},{name:"Hourly",value:"Hourly",example:"[logstash-]YYYY.MM.DD.HH"},{name:"Daily",value:"Daily",example:"[logstash-]YYYY.MM.DD"},{name:"Weekly",value:"Weekly",example:"[logstash-]GGGG.WW"},{name:"Monthly",value:"Monthly",example:"[logstash-]YYYY.MM"},{name:"Yearly",value:"Yearly",example:"[logstash-]YYYY"}],this.esVersions=[{name:"2.x",value:2},{name:"5.x",value:5},{name:"5.6+",value:56},{name:"6.0+",value:60}],this.current.jsonData.timeField=this.current.jsonData.timeField||"@timestamp",this.current.jsonData.esVersion=this.current.jsonData.esVersion||5,this.current.jsonData.maxConcurrentShardRequests=this.current.jsonData.maxConcurrentShardRequests||256}return e.$inject=["$scope"],e.prototype.indexPatternTypeChanged=function(){if(!this.current.database||0===this.current.database.length||this.current.database.startsWith("[logstash-]")){var e=$.a.find(this.indexPatternTypes,{value:this.current.jsonData.interval});this.current.database=e.example||"es-index-name"}},e.templateUrl="public/app/plugins/datasource/elasticsearch/partials/config.html",e}(),Nt=function(){function e(){}return e.templateUrl="partials/annotations.editor.html",e}(),Pt=function(){function e(e,t,n,a){this.$q=t,this.backendSrv=n,this.templateSrv=a,this.type="opentsdb",this.url=e.url,this.name=e.name,this.withCredentials=e.withCredentials,this.basicAuth=e.basicAuth,e.jsonData=e.jsonData||{},this.tsdbVersion=e.jsonData.tsdbVersion||1,this.tsdbResolution=e.jsonData.tsdbResolution||1,this.tagKeys={},this.aggregatorsPromise=null,this.filterTypesPromise=null}return e.$inject=["instanceSettings","$q","backendSrv","templateSrv"],e.prototype.query=function(e){var t=this,n=this.convertToTSDBTime(e.rangeRaw.from,!1,e.timezone),a=this.convertToTSDBTime(e.rangeRaw.to,!0,e.timezone),r=[];$.a.each(e.targets,function(n){n.metric&&r.push(t.convertTargetToQuery(n,e,t.tsdbVersion))});var i=$.a.compact(r);if($.a.isEmpty(i)){var o=this.$q.defer();return o.resolve({data:[]}),o.promise}var s={};return $.a.each(i,function(e){e.filters&&e.filters.length>0?$.a.each(e.filters,function(e){s[e.tagk]=!0}):$.a.each(e.tags,function(e,t){s[t]=!0})}),e.targets=$.a.filter(e.targets,function(e){return!0!==e.hide}),this.performTimeSeriesQuery(i,n,a).then(function(n){var a=t.mapMetricsToTargets(n.data,e,t.tsdbVersion);return{data:$.a.map(n.data,function(n,r){return-1===(r=a[r])&&(r=0),t._saveTagKeys(n),t.transformMetricData(n,s,e.targets[r],e,t.tsdbResolution)})}})},e.prototype.annotationQuery=function(e){var t=this.convertToTSDBTime(e.rangeRaw.from,!1,e.timezone),n=this.convertToTSDBTime(e.rangeRaw.to,!0,e.timezone),a=[],r=[];a.push({aggregator:"sum",metric:e.annotation.target});var i=$.a.compact(a);return this.performTimeSeriesQuery(i,t,n).then(function(t){if(t.data[0]){var n=t.data[0].annotations;e.annotation.isGlobal&&(n=t.data[0].globalAnnotations),n&&$.a.each(n,function(t){var n={text:t.description,time:1e3*Math.floor(t.startTime),annotation:e.annotation};r.push(n)})}return r})},e.prototype.targetContainsTemplate=function(e){if(e.filters&&e.filters.length>0)for(var t=0;t<e.filters.length;t++)if(this.templateSrv.variableExists(e.filters[t].filter))return!0;if(e.tags&&Object.keys(e.tags).length>0)for(var n in e.tags)if(this.templateSrv.variableExists(e.tags[n]))return!0;return!1},e.prototype.performTimeSeriesQuery=function(e,t,n){var a=!1;2===this.tsdbResolution&&(a=!0);var r={start:t,queries:e,msResolution:a,globalAnnotations:!0};3===this.tsdbVersion&&(r.showQuery=!0),n&&(r.end=n);var i={method:"POST",url:this.url+"/api/query",data:r};return this._addCredentialOptions(i),this.backendSrv.datasourceRequest(i)},e.prototype.suggestTagKeys=function(e){return this.$q.when(this.tagKeys[e]||[])},e.prototype._saveTagKeys=function(e){var t=Object.keys(e.tags);$.a.each(e.aggregateTags,function(e){t.push(e)}),this.tagKeys[e.metric]=t},e.prototype._performSuggestQuery=function(e,t){return this._get("/api/suggest",{type:t,q:e,max:1e3}).then(function(e){return e.data})},e.prototype._performMetricKeyValueLookup=function(e,t){if(!e||!t)return this.$q.when([]);var n=t.split(",").map(function(e){return e.trim()}),a=n[0],r=a+"=*";n.length>1&&(r+=","+n.splice(1).join(","));var i=e+"{"+r+"}";return this._get("/api/search/lookup",{m:i,limit:3e3}).then(function(e){e=e.data.results;var t=[];return $.a.each(e,function(e){-1===t.indexOf(e.tags[a])&&t.push(e.tags[a])}),t})},e.prototype._performMetricKeyLookup=function(e){return e?this._get("/api/search/lookup",{m:e,limit:1e3}).then(function(e){e=e.data.results;var t=[];return $.a.each(e,function(e){$.a.each(e.tags,function(e,n){-1===t.indexOf(n)&&t.push(n)})}),t}):this.$q.when([])},e.prototype._get=function(e,t){var n={method:"GET",url:this.url+e,params:t};return this._addCredentialOptions(n),this.backendSrv.datasourceRequest(n)},e.prototype._addCredentialOptions=function(e){(this.basicAuth||this.withCredentials)&&(e.withCredentials=!0),this.basicAuth&&(e.headers={Authorization:this.basicAuth})},e.prototype.metricFindQuery=function(e){if(!e)return this.$q.when([]);var t;try{t=this.templateSrv.replace(e,{},"distributed")}catch(e){return this.$q.reject(e)}var n=function(e){return $.a.map(e,function(e){return{text:e}})},a=t.match(/metrics\((.*)\)/);if(a)return this._performSuggestQuery(a[1],"metrics").then(n);var r=t.match(/tag_names\((.*)\)/);if(r)return this._performMetricKeyLookup(r[1]).then(n);var i=t.match(/tag_values\((.*?),\s?(.*)\)/);if(i)return this._performMetricKeyValueLookup(i[1],i[2]).then(n);var o=t.match(/suggest_tagk\((.*)\)/);if(o)return this._performSuggestQuery(o[1],"tagk").then(n);var s=t.match(/suggest_tagv\((.*)\)/);return s?this._performSuggestQuery(s[1],"tagv").then(n):this.$q.when([])},e.prototype.testDatasource=function(){return this._performSuggestQuery("cpu","metrics").then(function(){return{status:"success",message:"Data source is working"}})},e.prototype.getAggregators=function(){return this.aggregatorsPromise?this.aggregatorsPromise:(this.aggregatorsPromise=this._get("/api/aggregators").then(function(e){return e.data&&$.a.isArray(e.data)?e.data.sort():[]}),this.aggregatorsPromise)},e.prototype.getFilterTypes=function(){return this.filterTypesPromise?this.filterTypesPromise:(this.filterTypesPromise=this._get("/api/config/filters").then(function(e){return e.data?Object.keys(e.data).sort():[]}),this.filterTypesPromise)},e.prototype.transformMetricData=function(e,t,n,a,r){var i=this.createMetricLabel(e,n,t,a),o=[];return $.a.each(e.dps,function(e,t){2===r?o.push([e,1*t]):o.push([e,1e3*t])}),{target:i,datapoints:o}},e.prototype.createMetricLabel=function(e,t,n,a){if(t.alias){var r=$.a.clone(a.scopedVars||{});return $.a.each(e.tags,function(e,t){r["tag_"+t]={value:e}}),this.templateSrv.replace(t.alias,r)}var i=e.metric,o=[];return $.a.isEmpty(e.tags)||$.a.each($.a.toPairs(e.tags),function(e){$.a.has(n,e[0])&&o.push(e[0]+"="+e[1])}),$.a.isEmpty(o)||(i+="{"+o.join(", ")+"}"),i},e.prototype.convertTargetToQuery=function(e,t,n){if(!e.metric||e.hide)return null;var a={metric:this.templateSrv.replace(e.metric,t.scopedVars,"pipe"),aggregator:"avg"};if(e.aggregator&&(a.aggregator=this.templateSrv.replace(e.aggregator)),e.shouldComputeRate&&(a.rate=!0,a.rateOptions={counter:!!e.isCounter},e.counterMax&&e.counterMax.length&&(a.rateOptions.counterMax=parseInt(e.counterMax,10)),e.counterResetValue&&e.counterResetValue.length&&(a.rateOptions.resetValue=parseInt(e.counterResetValue,10)),n>=2&&(a.rateOptions.dropResets=!(a.rateOptions.counterMax||a.rateOptions.ResetValue&&0!==a.rateOptions.ResetValue))),!e.disableDownsampling){var r=this.templateSrv.replace(e.downsampleInterval||t.interval);r.match(/\.[0-9]+s/)&&(r=1e3*parseFloat(r)+"ms"),a.downsample=r+"-"+e.downsampleAggregator,e.downsampleFillPolicy&&"none"!==e.downsampleFillPolicy&&(a.downsample+="-"+e.downsampleFillPolicy)}if(e.filters&&e.filters.length>0){if(a.filters=Z.a.copy(e.filters),a.filters)for(var i in a.filters)a.filters[i].filter=this.templateSrv.replace(a.filters[i].filter,t.scopedVars,"pipe")}else if(a.tags=Z.a.copy(e.tags),a.tags)for(var o in a.tags)a.tags[o]=this.templateSrv.replace(a.tags[o],t.scopedVars,"pipe");return e.explicitTags&&(a.explicitTags=!0),a},e.prototype.mapMetricsToTargets=function(e,t,n){var a,r,i=this;return $.a.map(e,function(e){return 3===n?e.query.index:$.a.findIndex(t.targets,function(n){return n.filters&&n.filters.length>0?n.metric===e.metric:n.metric===e.metric&&$.a.every(n.tags,function(n,o){return a=i.templateSrv.replace(n,t.scopedVars,"pipe"),r=a.split("|"),$.a.includes(r,e.tags[o])||"*"===a})})})},e.prototype.convertToTSDBTime=function(e,t,n){return"now"===e?null:(e=he.parse(e,t,n)).valueOf()},e}(),Ot=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.errors=a.validateTarget(),a.aggregators=["avg","sum","min","max","dev","zimsum","mimmin","mimmax"],a.fillPolicies=["none","nan","null","zero"],a.filterTypes=["wildcard","iliteral_or","not_iliteral_or","not_literal_or","iwildcard","literal_or","regexp"],a.tsdbVersion=a.datasource.tsdbVersion,a.target.aggregator||(a.target.aggregator="sum"),a.target.downsampleAggregator||(a.target.downsampleAggregator="avg"),a.target.downsampleFillPolicy||(a.target.downsampleFillPolicy="none"),a.datasource.getAggregators().then(function(e){0!==e.length&&(a.aggregators=e)}),a.datasource.getFilterTypes().then(function(e){0!==e.length&&(a.filterTypes=e)}),a.suggestMetrics=function(e,t){a.datasource.metricFindQuery("metrics("+e+")").then(a.getTextValues).then(t)},a.suggestTagKeys=function(e,t){a.datasource.suggestTagKeys(a.target.metric).then(t)},a.suggestTagValues=function(e,t){a.datasource.metricFindQuery("suggest_tagv("+e+")").then(a.getTextValues).then(t)},a}return t.$inject=["$scope","$injector"],Q.c(t,e),t.prototype.targetBlur=function(){this.errors=this.validateTarget(),this.refresh()},t.prototype.getTextValues=function(e){return $.a.map(e,function(e){return e.text})},t.prototype.addTag=function(){this.target.filters&&this.target.filters.length>0&&(this.errors.tags="Please remove filters to use tags, tags and filters are mutually exclusive."),this.addTagMode?(this.target.tags||(this.target.tags={}),this.errors=this.validateTarget(),this.errors.tags||(this.target.tags[this.target.currentTagKey]=this.target.currentTagValue,this.target.currentTagKey="",this.target.currentTagValue="",this.targetBlur()),this.addTagMode=!1):this.addTagMode=!0},t.prototype.removeTag=function(e){delete this.target.tags[e],this.targetBlur()},t.prototype.editTag=function(e,t){this.removeTag(e),this.target.currentTagKey=e,this.target.currentTagValue=t,this.addTag()},t.prototype.closeAddTagMode=function(){this.addTagMode=!1},t.prototype.addFilter=function(){if(this.target.tags&&$.a.size(this.target.tags)>0&&(this.errors.filters="Please remove tags to use filters, tags and filters are mutually exclusive."),this.addFilterMode){if(this.target.filters||(this.target.filters=[]),this.target.currentFilterType||(this.target.currentFilterType="iliteral_or"),this.target.currentFilterGroupBy||(this.target.currentFilterGroupBy=!1),this.errors=this.validateTarget(),!this.errors.filters){var e={type:this.target.currentFilterType,tagk:this.target.currentFilterKey,filter:this.target.currentFilterValue,groupBy:this.target.currentFilterGroupBy};this.target.filters.push(e),this.target.currentFilterType="literal_or",this.target.currentFilterKey="",this.target.currentFilterValue="",this.target.currentFilterGroupBy=!1,this.targetBlur()}this.addFilterMode=!1}else this.addFilterMode=!0},t.prototype.removeFilter=function(e){this.target.filters.splice(e,1),this.targetBlur()},t.prototype.editFilter=function(e,t){this.removeFilter(t),this.target.currentFilterKey=e.tagk,this.target.currentFilterValue=e.filter,this.target.currentFilterType=e.type,this.target.currentFilterGroupBy=e.groupBy,this.addFilter()},t.prototype.closeAddFilterMode=function(){this.addFilterMode=!1},t.prototype.validateTarget=function(){var e={};if(this.target.shouldDownsample)try{this.target.downsampleInterval?z.a.describe_interval(this.target.downsampleInterval):e.downsampleInterval="You must supply a downsample interval (e.g. '1m' or '1h')."}catch(t){e.downsampleInterval=t.message}return this.target.tags&&$.a.has(this.target.tags,this.target.currentTagKey)&&(e.tags="Duplicate tag key '"+this.target.currentTagKey+"'."),e},t.templateUrl="partials/query.editor.html",t}(W.a),It=function(){function e(e){this.tsdbVersions=[{name:"<=2.1",value:1},{name:"==2.2",value:2},{name:"==2.3",value:3}],this.tsdbResolutions=[{name:"second",value:1},{name:"millisecond",value:2}],this.current.jsonData=this.current.jsonData||{},this.current.jsonData.tsdbVersion=this.current.jsonData.tsdbVersion||1,this.current.jsonData.tsdbResolution=this.current.jsonData.tsdbResolution||1}return e.$inject=["$scope"],e.templateUrl="public/app/plugins/datasource/opentsdb/partials/config.html",e}(),$t=function(){function e(){}return e.templateUrl="partials/annotations.editor.html",e}(),Ft=function(){function e(e,t,n){this.backendSrv=e,this.$q=t,this.templateSrv=n}return e.$inject=["backendSrv","$q","templateSrv"],e.prototype.query=function(e){return this.backendSrv.get("/api/tsdb/testdata/random-walk",{from:e.range.from.valueOf(),to:e.range.to.valueOf(),intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints}).then(function(e){var t=[];return e.results&&$.a.forEach(e.results,function(e){for(var n=0,a=e.series;n<a.length;n++){var r=a[n];t.push({target:r.name,datapoints:r.points})}}),{data:t}})},e.prototype.metricFindQuery=function(e){return this.$q.when({data:[]})},e.prototype.annotationQuery=function(e){var t={from:e.range.from.valueOf(),to:e.range.to.valueOf(),limit:e.annotation.limit,tags:e.annotation.tags,matchAny:e.annotation.matchAny};if("dashboard"===e.annotation.type){if(!e.dashboard.id)return this.$q.when([]);t.dashboardId=e.dashboard.id,delete t.tags}else{if(!$.a.isArray(e.annotation.tags)||0===e.annotation.tags.length)return this.$q.when([]);for(var n=[],a=0,r=t.tags;a<r.length;a++)for(var i=r[a],o=0,s=this.templateSrv.replace(i,{},"pipe").split("|");o<s.length;o++){var l=s[o];n.push(l)}t.tags=n}return this.backendSrv.get("/api/annotations",t)},e}(),qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.templateUrl="partials/query.editor.html",t}(W.a),Rt=function(){function e(){this.types=[{text:"Dashboard",value:"dashboard"},{text:"Tags",value:"tags"}],this.annotation.type=this.annotation.type||"tags",this.annotation.limit=this.annotation.limit||100}return e.templateUrl="partials/annotations.editor.html",e}(),Lt=function(){function e(e){this.series=e.series,this.alias=e.alias,this.annotation=e.annotation}return e.prototype.getTimeSeries=function(){var e,t,n=this,a=[];return 0===this.series.length?a:($.a.each(this.series,function(r){var i=r.columns.length,o=$.a.map(r.tags,function(e,t){return t+": "+e});for(t=1;t<i;t++){var s=r.name,l=r.columns[t];"value"!==l&&(s=s+"."+l),n.alias?s=n._getSeriesName(r,t):r.tags&&(s=s+" {"+o.join(", ")+"}");var c=[];if(r.values)for(e=0;e<r.values.length;e++)c[e]=[r.values[e][t],r.values[e][0]];a.push({target:s,datapoints:c})}}),a)},e.prototype._getSeriesName=function(e,t){var n=e.name.split(".");return this.alias.replace(/\$(\w+)|\[\[([\s\S]+?)\]\]/g,function(a,r,i){var o=r||i,s=parseInt(o,10);if("m"===o||"measurement"===o)return e.name;if("col"===o)return e.columns[t];if(!isNaN(s))return n[s];if(0!==o.indexOf("tag_"))return a;var l=o.replace("tag_","");return e.tags?e.tags[l]:a})},e.prototype.getAnnotations=function(){var e=this,t=[];return $.a.each(this.series,function(n){var a=null,r=null,i=[],o=null;$.a.each(n.columns,function(t,n){"time"!==t?"sequence_number"!==t&&(t!==e.annotation.titleColumn?$.a.includes((e.annotation.tagsColumn||"").replace(" ","").split(","),t)?i.push(n):t!==e.annotation.textColumn?a||o===n||(a=n):o=n:a=n):r=n}),$.a.each(n.values,function(n){var s={annotation:e.annotation,time:+new Date(n[r]),title:n[a],tags:$.a.flatten(i.filter(function(e){return n[e]}).map(function(e){return n[e].split(",")})),text:n[o]};t.push(s)})}),t},e.prototype.getTable=function(){var e,t,n=new pe.a;return 0===this.series.length?n:($.a.each(this.series,function(a,r){if(0===r)for(t=0,"time"===a.columns[0]&&(n.columns.push({text:"Time",type:"time"}),t++),$.a.each($.a.keys(a.tags),function(e){n.columns.push({text:e})});t<a.columns.length;t++)n.columns.push({text:a.columns[t]});if(a.values)for(e=0;e<a.values.length;e++){var i=a.values[e],o=[i[0]];if(a.tags)for(var s in a.tags)a.tags.hasOwnProperty(s)&&o.push(a.tags[s]);for(t=1;t<i.length;t++)o.push(i[t]);n.rows.push(o)}}),n)},e}(),jt=n(36),Ut=[],Vt={Aggregations:[],Selectors:[],Transformations:[],Predictors:[],Math:[],Aliasing:[],Fields:[]};function Bt(e){var t=Ut[e.type];if(!t)throw{message:"Could not find query part "+e.type};return new jt.a(e,t)}function Qt(e){Ut[e.type]=new jt.b(e),e.category.push(Ut[e.type])}var zt=[];function Ht(e,t){return"*"===e.params[0]?"*":'"'+e.params[0]+'"'}function Gt(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.def.category===Vt.Aggregations){if(a.def.type===t.def.type)return;if("count"===a.def.type&&"distinct"===t.def.type)break;if("distinct"===a.def.type){var r=e.length>=n+2;if("count"!==t.def.type&&r)e[n+1].def.category===Vt.Aggregations&&e.splice(n+1,1);else if("count"===t.def.type)return void(r&&"count"===e[n+1].def.type||e.splice(n+1,0,t))}return void(e[n]=t)}if(a.def.category===Vt.Selectors)return void(e[n]=t)}e.splice(1,0,t)}function Wt(e,t){var n;for(n=0;n<e.length;n++){var a=e[n];if(a.def.category===Vt.Math||a.def.category===Vt.Aliasing)break}e.splice(n,0,t)}Qt({type:"field",addStrategy:function(e,t,n){var a=$.a.map(e,function(e){return Bt({type:e.def.type,params:$.a.clone(e.params)})});n.selectModels.push(a)},category:Vt.Fields,params:[{type:"field",dynamicLookup:!0}],defaultParams:["value"],renderer:Ht}),Qt({type:"count",addStrategy:Gt,category:Vt.Aggregations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"distinct",addStrategy:Gt,category:Vt.Aggregations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"integral",addStrategy:Gt,category:Vt.Aggregations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"mean",addStrategy:Gt,category:Vt.Aggregations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"median",addStrategy:Gt,category:Vt.Aggregations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"mode",addStrategy:Gt,category:Vt.Aggregations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"sum",addStrategy:Gt,category:Vt.Aggregations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"derivative",addStrategy:Wt,category:Vt.Transformations,params:[{name:"duration",type:"interval",options:["1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["10s"],renderer:jt.c}),Qt({type:"spread",addStrategy:Wt,category:Vt.Transformations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"non_negative_derivative",addStrategy:Wt,category:Vt.Transformations,params:[{name:"duration",type:"interval",options:["1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["10s"],renderer:jt.c}),Qt({type:"difference",addStrategy:Wt,category:Vt.Transformations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"non_negative_difference",addStrategy:Wt,category:Vt.Transformations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"moving_average",addStrategy:Wt,category:Vt.Transformations,params:[{name:"window",type:"int",options:[5,10,20,30,40]}],defaultParams:[10],renderer:jt.c}),Qt({type:"cumulative_sum",addStrategy:Wt,category:Vt.Transformations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"stddev",addStrategy:Wt,category:Vt.Transformations,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"time",category:zt,params:[{name:"interval",type:"time",options:["$__interval","1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["$__interval"],renderer:jt.c}),Qt({type:"fill",category:zt,params:[{name:"fill",type:"string",options:["none","null","0","previous","linear"]}],defaultParams:["null"],renderer:jt.c}),Qt({type:"elapsed",addStrategy:Wt,category:Vt.Transformations,params:[{name:"duration",type:"interval",options:["1s","10s","1m","5m","10m","15m","1h"]}],defaultParams:["10s"],renderer:jt.c}),Qt({type:"holt_winters",addStrategy:Wt,category:Vt.Predictors,params:[{name:"number",type:"int",options:[5,10,20,30,40]},{name:"season",type:"int",options:[0,1,2,5,10]}],defaultParams:[10,2],renderer:jt.c}),Qt({type:"holt_winters_with_fit",addStrategy:Wt,category:Vt.Predictors,params:[{name:"number",type:"int",options:[5,10,20,30,40]},{name:"season",type:"int",options:[0,1,2,5,10]}],defaultParams:[10,2],renderer:jt.c}),Qt({type:"bottom",addStrategy:Gt,category:Vt.Selectors,params:[{name:"count",type:"int"}],defaultParams:[3],renderer:jt.c}),Qt({type:"first",addStrategy:Gt,category:Vt.Selectors,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"last",addStrategy:Gt,category:Vt.Selectors,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"max",addStrategy:Gt,category:Vt.Selectors,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"min",addStrategy:Gt,category:Vt.Selectors,params:[],defaultParams:[],renderer:jt.c}),Qt({type:"percentile",addStrategy:Gt,category:Vt.Selectors,params:[{name:"nth",type:"int"}],defaultParams:[95],renderer:jt.c}),Qt({type:"top",addStrategy:Gt,category:Vt.Selectors,params:[{name:"count",type:"int"}],defaultParams:[3],renderer:jt.c}),Qt({type:"tag",category:zt,params:[{name:"tag",type:"string",dynamicLookup:!0}],defaultParams:["tag"],renderer:Ht}),Qt({type:"math",addStrategy:function(e,t){var n=e.length;if(n>0){if("math"===e[n-1].def.type)return void(e[n-1]=t);if(n>1&&"math"===e[n-2].def.type)return void(e[n-2]=t);if("alias"===e[n-1].def.type)return void e.splice(n-1,0,t)}e.push(t)},category:Vt.Math,params:[{name:"expr",type:"string"}],defaultParams:[" / 100"],renderer:jt.d}),Qt({type:"alias",addStrategy:function(e,t){var n=e.length;n>0&&"alias"===e[n-1].def.type?e[n-1]=t:e.push(t)},category:Vt.Aliasing,params:[{name:"name",type:"string",quote:"double"}],defaultParams:["alias"],renderMode:"suffix",renderer:function(e,t){return t+' AS "'+e.params[0]+'"'}});var Yt={create:Bt,getCategories:function(){return Vt},replaceAggregationAdd:Gt},Kt=function(){function e(e,t,n){this.target=e,this.templateSrv=t,this.scopedVars=n,e.policy=e.policy||"default",e.resultFormat=e.resultFormat||"time_series",e.orderByTime=e.orderByTime||"ASC",e.tags=e.tags||[],e.groupBy=e.groupBy||[{type:"time",params:["$__interval"]},{type:"fill",params:["null"]}],e.select=e.select||[[{type:"field",params:["value"]},{type:"mean",params:[]}]],this.updateProjection()}return e.$inject=["target","templateSrv","scopedVars"],e.prototype.updateProjection=function(){this.selectModels=$.a.map(this.target.select,function(e){return $.a.map(e,Yt.create)}),this.groupByParts=$.a.map(this.target.groupBy,Yt.create)},e.prototype.updatePersistedParts=function(){this.target.select=$.a.map(this.selectModels,function(e){return $.a.map(e,function(e){return{type:e.def.type,params:e.params}})})},e.prototype.hasGroupByTime=function(){return $.a.find(this.target.groupBy,function(e){return"time"===e.type})},e.prototype.hasFill=function(){return $.a.find(this.target.groupBy,function(e){return"fill"===e.type})},e.prototype.addGroupBy=function(e){var t=e.match(/^(\w+)\((.*)\)$/),n=t[1],a=t[2],r=Yt.create({type:n,params:[a]}),i=this.target.groupBy.length;0===i?this.target.groupBy.push(r.part):"time"===n?this.target.groupBy.splice(0,0,r.part):"tag"===n&&"fill"===this.target.groupBy[i-1].type?this.target.groupBy.splice(i-1,0,r.part):this.target.groupBy.push(r.part),this.updateProjection()},e.prototype.removeGroupByPart=function(e,t){var n=Yt.getCategories();"time"===e.def.type&&(this.target.groupBy=$.a.filter(this.target.groupBy,function(e){return"fill"!==e.type}),this.target.select=$.a.map(this.target.select,function(e){return $.a.filter(e,function(e){var t=Yt.create(e);return t.def.category!==n.Aggregations&&t.def.category!==n.Selectors})})),this.target.groupBy.splice(t,1),this.updateProjection()},e.prototype.removeSelect=function(e){this.target.select.splice(e,1),this.updateProjection()},e.prototype.removeSelectPart=function(e,t){if("field"===t.def.type){if(this.selectModels.length>1){var n=$.a.indexOf(this.selectModels,e);this.selectModels.splice(n,1)}}else{var a=$.a.indexOf(e,t);e.splice(a,1)}this.updatePersistedParts()},e.prototype.addSelectPart=function(e,t){var n=Yt.create({type:t});n.def.addStrategy(e,n,this),this.updatePersistedParts()},e.prototype.renderTagCondition=function(e,t,n){var a="",r=e.operator,i=e.value;return t>0&&(a=(e.condition||"AND")+" "),r||(r=/^\/.*\/$/.test(i)?"=~":"="),"=~"!==r&&"!~"!==r?(n&&(i=this.templateSrv.replace(i,this.scopedVars)),">"!==r&&"<"!==r&&(i="'"+i.replace(/\\/g,"\\\\")+"'")):n&&(i=this.templateSrv.replace(i,this.scopedVars,"regex")),a+'"'+e.key+'" '+r+" "+i},e.prototype.getMeasurementAndPolicy=function(e){var t=this.target.policy,n=this.target.measurement||"measurement";return n.match("^/.*/$")?e&&(n=this.templateSrv.replace(n,this.scopedVars,"regex")):n='"'+n+'"',(t="default"!==t?'"'+this.target.policy+'".':"")+n},e.prototype.interpolateQueryStr=function(e,t,n){return t.multi||t.includeAll?"string"==typeof e?z.a.regexEscape(e):"("+$.a.map(e,z.a.regexEscape).join("|")+")":e},e.prototype.render=function(e){var t=this,n=this.target;if(n.rawQuery)return e?this.templateSrv.replace(n.query,this.scopedVars,this.interpolateQueryStr):n.query;var a,r,i="SELECT ";for(a=0;a<this.selectModels.length;a++){var o=this.selectModels[a],s="";for(r=0;r<o.length;r++){s=(u=o[r]).render(s)}a>0&&(i+=", "),i+=s}i+=" FROM "+this.getMeasurementAndPolicy(e)+" WHERE ";var l=$.a.map(n.tags,function(n,a){return t.renderTagCondition(n,a,e)});l.length>0&&(i+="("+l.join(" ")+") AND "),i+="$timeFilter";var c="";for(a=0;a<this.groupByParts.length;a++){var u=this.groupByParts[a];a>0&&(c+="fill"===u.def.type?" ":", "),c+=u.render("")}return c.length&&(i+=" GROUP BY "+c),n.fill&&(i+=" fill("+n.fill+")"),"DESC"===n.orderByTime&&(i+=" ORDER BY time DESC"),n.limit&&(i+=" LIMIT "+n.limit),n.slimit&&(i+=" SLIMIT "+n.slimit),n.tz&&(i+=" tz('"+n.tz+"')"),i},e.prototype.renderAdhocFilters=function(e){var t=this;return $.a.map(e,function(e,n){return t.renderTagCondition(e,n,!1)}).join(" ")},e}(),Xt=function(){function e(){}return e.prototype.parse=function(e,t){if(!t||0===t.results.length)return[];var n=t.results[0];if(!n.series)return[];var a=e.toLowerCase(),r=a.indexOf("show field keys")>=0||a.indexOf("show retention policies")>=0,i={};return $.a.each(n.series,function(e){$.a.each(e.values,function(e){$.a.isArray(e)?r?Jt(i,e[0]):void 0!==e[1]?Jt(i,e[1]):Jt(i,e[0]):Jt(i,e)})}),$.a.map(i,function(e){return{text:e.toString()}})},e}();function Jt(e,t){e[t]=t}var Zt=function(){function e(e,t){this.target=e,this.database=t}return e.prototype.buildExploreQuery=function(e,t,n){var a,r,i;if("TAG_KEYS"===e)a="SHOW TAG KEYS",r=this.target.measurement,i=this.target.policy;else if("TAG_VALUES"===e)a="SHOW TAG VALUES",r=this.target.measurement,i=this.target.policy;else if("MEASUREMENTS"===e)a="SHOW MEASUREMENTS",n&&(a+=" WITH MEASUREMENT =~ /"+z.a.regexEscape(n)+"/");else{if("FIELDS"===e)return r=this.target.measurement,i=this.target.policy,r.match("^/.*/")||(r='"'+r+'"',i&&"default"!==i&&(r=(i='"'+i+'"')+"."+r)),"SHOW FIELD KEYS FROM "+r;if("RETENTION POLICIES"===e)return a='SHOW RETENTION POLICIES on "'+this.database+'"'}if(r&&(r.match("^/.*/")||r.match(/^merge\(.*\)/)||(r='"'+r+'"'),i&&"default"!==i&&(r=(i='"'+i+'"')+"."+r),a+=" FROM "+r),t&&(a+=' WITH KEY = "'+t+'"'),this.target.tags&&this.target.tags.length>0){var o=$.a.reduce(this.target.tags,function(e,n){return n.key===t?e:(e.push(function(e,t){var n="",a=e.operator,r=e.value;return t>0&&(n=(e.condition||"AND")+" "),a||(a=/^\/.*\/$/.test(e.value)?"=~":"="),"=~"!==a&&"!~"!==a&&isNaN(+r)&&(r="'"+r+"'"),n+'"'+e.key+'" '+a+" "+r}(n,e.length)),e)},[]);o.length>0&&(a+=" WHERE "+o.join(" "))}return"MEASUREMENTS"===e&&(a+=" LIMIT 100"),a},e}(),en=function(){function e(e,t,n,a){this.$q=t,this.backendSrv=n,this.templateSrv=a,this.type="influxdb",this.urls=$.a.map(e.url.split(","),function(e){return e.trim()}),this.username=e.username,this.password=e.password,this.name=e.name,this.database=e.database,this.basicAuth=e.basicAuth,this.withCredentials=e.withCredentials,this.interval=(e.jsonData||{}).timeInterval,this.responseParser=new Xt}return e.$inject=["instanceSettings","$q","backendSrv","templateSrv"],e.prototype.query=function(e){var t,n,a,r=this,i=this.getTimeFilter(e),o=e.scopedVars,s=$.a.cloneDeep(e.targets),l=[],c=$.a.map(s,function(e){return e.hide?"":(l.push(e),o.interval=o.__interval,(t=new Kt(e,r.templateSrv,o)).render(!0))}).reduce(function(e,t){return""!==t&&(e+=";"+t),e});if(""===c)return this.$q.when({data:[]});var u=this.templateSrv.getAdhocFilters(this.name);return u.length>0&&(i+=" AND "+t.renderAdhocFilters(u)),o.timeFilter={value:i},c=this.templateSrv.replace(c,o),this._seriesQuery(c,e).then(function(t){if(!t||!t.results)return[];var i=[];for(n=0;n<t.results.length;n++){var o=t.results[n];if(o&&o.series){var s=l[n],c=s.alias;c&&(c=r.templateSrv.replace(s.alias,e.scopedVars));var u=new Lt({series:t.results[n].series,alias:c});switch(s.resultFormat){case"table":i.push(u.getTable());break;default:var d=u.getTimeSeries();for(a=0;a<d.length;a++)i.push(d[a])}}}return{data:i}})},e.prototype.annotationQuery=function(e){if(!e.annotation.query)return this.$q.reject({message:"Query missing in annotation definition"});var t=this.getTimeFilter({rangeRaw:e.rangeRaw,timezone:e.timezone}),n=e.annotation.query.replace("$timeFilter",t);return n=this.templateSrv.replace(n,null,"regex"),this._seriesQuery(n,e).then(function(t){if(!t||!t.results||!t.results[0])throw{message:"No results in response from InfluxDB"};return new Lt({series:t.results[0].series,annotation:e.annotation}).getAnnotations()})},e.prototype.targetContainsTemplate=function(e){for(var t=0,n=e.groupBy;t<n.length;t++)for(var a=0,r=n[t].params;a<r.length;a++){var i=r[a];if(this.templateSrv.variableExists(i))return!0}for(var o in e.tags)if(this.templateSrv.variableExists(e.tags[o].value))return!0;return!1},e.prototype.metricFindQuery=function(e,t){var n=this.templateSrv.replace(e,null,"regex");return this._seriesQuery(n,t).then($.a.curry(this.responseParser.parse)(e))},e.prototype.getTagKeys=function(e){var t=new Zt({measurement:"",tags:[]},this.database).buildExploreQuery("TAG_KEYS");return this.metricFindQuery(t,e)},e.prototype.getTagValues=function(e){var t=new Zt({measurement:"",tags:[]},this.database).buildExploreQuery("TAG_VALUES",e.key);return this.metricFindQuery(t,e)},e.prototype._seriesQuery=function(e,t){if(!e)return this.$q.when({results:[]});if(t&&t.range){var n=this.getTimeFilter({rangeRaw:t.range,timezone:t.timezone});e=e.replace("$timeFilter",n)}return this._influxRequest("GET","/query",{q:e,epoch:"ms"},t)},e.prototype.serializeParams=function(e){return e?$.a.reduce(e,function(e,t,n){return null===t||void 0===t?e:(e.push(encodeURIComponent(n)+"="+encodeURIComponent(t)),e)},[]).join("&"):""},e.prototype.testDatasource=function(){var e=new Zt({measurement:"",tags:[]},this.database).buildExploreQuery("RETENTION POLICIES");return this._seriesQuery(e).then(function(e){var t=$.a.get(e,"results[0].error");return t?{status:"error",message:t}:{status:"success",message:"Data source is working"}}).catch(function(e){return{status:"error",message:e.message}})},e.prototype._influxRequest=function(e,t,n,a){var r=this.urls.shift();this.urls.push(r);var i={};this.username&&(i.u=this.username,i.p=this.password),a&&a.database?i.db=a.database:this.database&&(i.db=this.database),"GET"===e&&($.a.extend(i,n),n=null);var o={method:e,url:r+t,params:i,data:n,precision:"ms",inspect:{type:"influxdb"},paramSerializer:this.serializeParams};return o.headers=o.headers||{},(this.basicAuth||this.withCredentials)&&(o.withCredentials=!0),this.basicAuth&&(o.headers.Authorization=this.basicAuth),this.backendSrv.datasourceRequest(o).then(function(e){return e.data},function(e){if(0!==e.status||e.status>=300)throw e.data&&e.data.error?{message:"InfluxDB Error: "+e.data.error,data:e.data,config:e.config}:{message:"Network Error: "+e.statusText+"("+e.status+")",data:e.data,config:e.config}})},e.prototype.getTimeFilter=function(e){var t=this.getInfluxTime(e.rangeRaw.from,!1,e.timezone),n=this.getInfluxTime(e.rangeRaw.to,!0,e.timezone),a="ms"===t[t.length-1];return"now()"!==n||a?"time >= "+t+" and time <= "+n:"time >= "+t},e.prototype.getInfluxTime=function(e,t,n){if($.a.isString(e)){if("now"===e)return"now()";var a=/^now-(\d+)([dhms])$/.exec(e);if(a)return"now() - "+parseInt(a[1],10)+a[2];e=he.parse(e,t,n)}return e.valueOf()+"ms"},e}(),tn=function(e){function t(t,n,a,r,i){var o=e.call(this,t,n)||this;o.templateSrv=a,o.$q=r,o.uiSegmentSrv=i,o.target=o.target,o.queryModel=new Kt(o.target,a,o.panel.scopedVars),o.queryBuilder=new Zt(o.target,o.datasource.database),o.groupBySegment=o.uiSegmentSrv.newPlusButton(),o.resultFormats=[{text:"Time series",value:"time_series"},{text:"Table",value:"table"}],o.policySegment=i.newSegment(o.target.policy),o.target.measurement?o.measurementSegment=i.newSegment(o.target.measurement):o.measurementSegment=i.newSelectMeasurement(),o.tagSegments=[];for(var s=0,l=o.target.tags;s<l.length;s++){var c=l[s];c.operator||(/^\/.*\/$/.test(c.value)?c.operator="=~":c.operator="="),c.condition&&o.tagSegments.push(i.newCondition(c.condition)),o.tagSegments.push(i.newKey(c.key)),o.tagSegments.push(i.newOperator(c.operator)),o.tagSegments.push(i.newKeyValue(c.value))}return o.fixTagSegments(),o.buildSelectMenu(),o.removeTagFilterSegment=i.newSegment({fake:!0,value:"-- remove tag filter --"}),o}return t.$inject=["$scope","$injector","templateSrv","$q","uiSegmentSrv"],Q.c(t,e),t.prototype.removeOrderByTime=function(){this.target.orderByTime="ASC"},t.prototype.buildSelectMenu=function(){var e=Yt.getCategories();this.selectMenu=$.a.reduce(e,function(e,t,n){var a={text:n,submenu:t.map(function(e){return{text:e.type,value:e.type}})};return e.push(a),e},[])},t.prototype.getGroupByOptions=function(){var e=this,t=this.queryBuilder.buildExploreQuery("TAG_KEYS");return this.datasource.metricFindQuery(t).then(function(t){var n=[];e.queryModel.hasFill()||n.push(e.uiSegmentSrv.newSegment({value:"fill(null)"})),e.target.limit||n.push(e.uiSegmentSrv.newSegment({value:"LIMIT"})),e.target.slimit||n.push(e.uiSegmentSrv.newSegment({value:"SLIMIT"})),e.target.tz||n.push(e.uiSegmentSrv.newSegment({value:"tz"})),"ASC"===e.target.orderByTime&&n.push(e.uiSegmentSrv.newSegment({value:"ORDER BY time DESC"})),e.queryModel.hasGroupByTime()||n.push(e.uiSegmentSrv.newSegment({value:"time($interval)"}));for(var a=0,r=t;a<r.length;a++){var i=r[a];n.push(e.uiSegmentSrv.newSegment({value:"tag("+i.text+")"}))}return n}).catch(this.handleQueryError.bind(this))},t.prototype.groupByAction=function(){switch(this.groupBySegment.value){case"LIMIT":this.target.limit=10;break;case"SLIMIT":this.target.slimit=10;break;case"tz":this.target.tz="UTC";break;case"ORDER BY time DESC":this.target.orderByTime="DESC";break;default:this.queryModel.addGroupBy(this.groupBySegment.value)}var e=this.uiSegmentSrv.newPlusButton();this.groupBySegment.value=e.value,this.groupBySegment.html=e.html,this.panelCtrl.refresh()},t.prototype.addSelectPart=function(e,t,n){this.queryModel.addSelectPart(e,n.value),this.panelCtrl.refresh()},t.prototype.handleSelectPartEvent=function(e,t,n){switch(n.name){case"get-param-options":var a=this.queryBuilder.buildExploreQuery("FIELDS");return this.datasource.metricFindQuery(a).then(this.transformToSegments(!0)).catch(this.handleQueryError.bind(this));case"part-param-changed":this.panelCtrl.refresh();break;case"action":this.queryModel.removeSelectPart(e,t),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.handleGroupByPartEvent=function(e,t,n){switch(n.name){case"get-param-options":var a=this.queryBuilder.buildExploreQuery("TAG_KEYS");return this.datasource.metricFindQuery(a).then(this.transformToSegments(!0)).catch(this.handleQueryError.bind(this));case"part-param-changed":this.panelCtrl.refresh();break;case"action":this.queryModel.removeGroupByPart(e,t),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.fixTagSegments=function(){var e=this.tagSegments.length,t=this.tagSegments[Math.max(e-1,0)];t&&"plus-button"===t.type||this.tagSegments.push(this.uiSegmentSrv.newPlusButton())},t.prototype.measurementChanged=function(){this.target.measurement=this.measurementSegment.value,this.panelCtrl.refresh()},t.prototype.getPolicySegments=function(){var e=this.queryBuilder.buildExploreQuery("RETENTION POLICIES");return this.datasource.metricFindQuery(e).then(this.transformToSegments(!1)).catch(this.handleQueryError.bind(this))},t.prototype.policyChanged=function(){this.target.policy=this.policySegment.value,this.panelCtrl.refresh()},t.prototype.toggleEditorMode=function(){try{this.target.query=this.queryModel.render(!1)}catch(e){console.log("query render error")}this.target.rawQuery=!this.target.rawQuery},t.prototype.getMeasurements=function(e){var t=this.queryBuilder.buildExploreQuery("MEASUREMENTS",void 0,e);return this.datasource.metricFindQuery(t).then(this.transformToSegments(!0)).catch(this.handleQueryError.bind(this))},t.prototype.handleQueryError=function(e){return this.error=e.message||"Failed to issue metric query",[]},t.prototype.transformToSegments=function(e){var t=this;return function(n){var a=$.a.map(n,function(e){return t.uiSegmentSrv.newSegment({value:e.text,expandable:e.expandable})});if(e)for(var r=0,i=t.templateSrv.variables;r<i.length;r++){var o=i[r];a.unshift(t.uiSegmentSrv.newSegment({type:"value",value:"/^$"+o.name+"$/",expandable:!0}))}return a}},t.prototype.getTagsOrValues=function(e,t){var n,a,r=this;if("condition"===e.type)return this.$q.when([this.uiSegmentSrv.newSegment("AND"),this.uiSegmentSrv.newSegment("OR")]);if("operator"===e.type){var i=this.tagSegments[t+1].value;return/^\/.*\/$/.test(i)?this.$q.when(this.uiSegmentSrv.newOperators(["=~","!~"])):this.$q.when(this.uiSegmentSrv.newOperators(["=","!=","<>","<",">"]))}return"key"===e.type||"plus-button"===e.type?(n=this.queryBuilder.buildExploreQuery("TAG_KEYS"),a=!1):"value"===e.type&&(n=this.queryBuilder.buildExploreQuery("TAG_VALUES",this.tagSegments[t-2].value),a=!0),this.datasource.metricFindQuery(n).then(this.transformToSegments(a)).then(function(t){return"key"===e.type&&t.splice(0,0,Z.a.copy(r.removeTagFilterSegment)),t}).catch(this.handleQueryError.bind(this))},t.prototype.getFieldSegments=function(){var e=this.queryBuilder.buildExploreQuery("FIELDS");return this.datasource.metricFindQuery(e).then(this.transformToSegments(!1)).catch(this.handleQueryError)},t.prototype.tagSegmentUpdated=function(e,t){this.tagSegments[t]=e,e.value===this.removeTagFilterSegment.value?(this.tagSegments.splice(t,3),0===this.tagSegments.length?this.tagSegments.push(this.uiSegmentSrv.newPlusButton()):this.tagSegments.length>2&&(this.tagSegments.splice(Math.max(t-1,0),1),"plus-button"!==this.tagSegments[this.tagSegments.length-1].type&&this.tagSegments.push(this.uiSegmentSrv.newPlusButton()))):("plus-button"===e.type&&(t>2&&this.tagSegments.splice(t,0,this.uiSegmentSrv.newCondition("AND")),this.tagSegments.push(this.uiSegmentSrv.newOperator("=")),this.tagSegments.push(this.uiSegmentSrv.newFake("select tag value","value","query-segment-value")),e.type="key",e.cssClass="query-segment-key"),t+1===this.tagSegments.length&&this.tagSegments.push(this.uiSegmentSrv.newPlusButton())),this.rebuildTargetTagConditions()},t.prototype.rebuildTargetTagConditions=function(){var e=this,t=[],n=0,a="";$.a.each(this.tagSegments,function(r,i){"key"===r.type?(0===t.length&&t.push({}),t[n].key=r.value):"value"===r.type?((a=e.getTagValueOperator(r.value,t[n].operator))&&(e.tagSegments[i-1]=e.uiSegmentSrv.newOperator(a),t[n].operator=a),t[n].value=r.value):"condition"===r.type?(t.push({condition:r.value}),n+=1):"operator"===r.type&&(t[n].operator=r.value)}),this.target.tags=t,this.panelCtrl.refresh()},t.prototype.getTagValueOperator=function(e,t){return"=~"!==t&&"!~"!==t&&/^\/.*\/$/.test(e)?"=~":"=~"!==t&&"!~"!==t||!/^(?!\/.*\/$)/.test(e)?null:"="},t.prototype.getCollapsedText=function(){return this.queryModel.render(!1)},t.templateUrl="partials/query.editor.html",t}(W.a),nn=function(){function e(){}return e.templateUrl="partials/config.html",e}(),an=function(){function e(){}return e.templateUrl="partials/annotations.editor.html",e}(),rn="by|without|on|ignoring|group_left|group_right",on=[rn,"count|count_values|min|max|avg|sum|stddev|stdvar|bottomk|topk|quantile","true|false|null|__name__|job","abs|absent|ceil|changes|clamp_max|clamp_min|count_scalar|day_of_month|day_of_week|days_in_month|delta|deriv","drop_common_labels|exp|floor|histogram_quantile|holt_winters|hour|idelta|increase|irate|label_replace|ln|log2","log10|minute|month|predict_linear|rate|resets|round|scalar|sort|sort_desc|sqrt|time|vector|year|avg_over_time","min_over_time|max_over_time|sum_over_time|count_over_time|quantile_over_time|stddev_over_time|stdvar_over_time"].join("|").split("|"),sn=/([A-Za-z:][\w:]*)\b(?![\(\]{=!",])/g,ln=/{([^{]*)}/g;var cn=/(\w+)\s*(=|!=|=~|!~)\s*("[^"]*")/g;function un(e,t,n,a){var r=[];if(e)for(var i=cn.exec(e);i;)r.push({key:i[1],operator:i[2],value:i[3]}),i=cn.exec(e);var o=a||"=";return r.push({key:t,operator:o,value:'"'+n+'"'}),"{"+$.a.chain(r).uniqWith($.a.isEqual).compact().sortBy("key").map(function(e){return""+e.key+e.operator+e.value}).value().join(",")+"}"}var dn=function(e,t,n,a){if(!t||!n)throw new Error("Need label to add to query.");var r;e=e.replace(sn,function(t,n,a){var i=function(e,t,n,a){var r=e.slice(t).indexOf(n),i=e.slice(t).indexOf(a);return i>-1&&(-1===r||r>i)}(e,a,"{","}"),o=r&&rn.split("|").indexOf(r)>-1;return r=n,i||o||-1!==on.indexOf(n)?n:n+"{}"});for(var i=ln.exec(e),o=[],s=0,l="";i;){var c=e.slice(s,i.index),u=un(i[1],t,n,a);s=i.index+i[1].length+2,l=e.slice(i.index+i[0].length),o.push(c,u),i=ln.exec(e)}return o.push(l),o.join("")};var pn=/\{[^}]*?\}/,hn=/\b(\w+)(!?=~?)("[^"\n]*?")/g;function fn(e,t){if(void 0===t&&(t=1),!e.match(pn)){if(e.match(/^[A-Za-z:][\w:]*$/))return{selector:'{__name__="'+e+'"}',labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+e)}var n=e.slice(0,t),a=n.lastIndexOf("{"),r=n.lastIndexOf("}");if(-1===a)throw new Error("Not inside selector, missing open brace: "+n);if(r>-1&&r>a)throw new Error("Not inside selector, previous selector already closed: "+n);var i=e.slice(t),o=i.indexOf("}")+t,s=i.indexOf("{"),l=s+t;if(-1===o)throw new Error("Not inside selector, missing closing brace in suffix: "+i);if(s>-1&&l<o)throw new Error("Not inside selector, next selector opens before this one closed: "+i);var c={};e.slice(a,o).replace(hn,function(e,t,n,a){return c[t]={value:a,operator:n},""});var u=e.slice(0,a).match(/[A-Za-z:][\w:]*$/);u&&(c.__name__={value:'"'+u[0]+'"',operator:"="});var d=Object.keys(c).sort();return{labelKeys:d,selector:["{",d.map(function(e){return""+e+c[e].operator+c[e].value}).join(","),"}"].join("")}}var mn={comment:{pattern:/(^|[^\n])#.*/,lookbehind:!0},"context-labels":{pattern:/(^|\s)\{[^}]*(?=})/,lookbehind:!0,inside:{"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name"},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},operator:new RegExp("/&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?","i"),punctuation:/[{}`,.]/},gn=n(194),vn=["job","namespace"],bn=864e5,yn=function(e){return{label:e}};var wn=function(e){function t(t,n){var a=e.call(this)||this;return a.cleanText=function(e){return e.replace(/[{}[\]="(),!~+\-*/^%]/g,"").trim()},a.request=function(e){return a.datasource.metadataRequest(e)},a.start=function(){return a.startTask||(a.startTask=a.fetchLogLabels()),a.startTask},a.datasource=t,a.labelKeys={},a.labelValues={},Object.assign(a,n),a}return Q.c(t,e),t.prototype.getSyntax=function(){return mn},t.prototype.provideCompletionItems=function(e,t){e.prefix;var n=e.wrapperClasses,a=(e.text,0===e.value.document.text.length);return $.a.includes(n,"context-labels")?this.getLabelCompletionItems.apply(this,arguments):a?this.getEmptyCompletionItems(t||{}):{suggestions:[]}},t.prototype.getEmptyCompletionItems=function(e){var t=e.history,n=[];if(t&&t.length>0){var a=$.a.chain(t).map(function(e){return e.query.expr}).filter().uniq().take(10).map(yn).map(function(e){return function(e,t){var n=Date.now()-bn,a=t.filter(function(t){return t.ts>n&&t.query.expr===e.label}),r=a.length,i=a[0],o="Queried "+r+" times in the last 24h.";return i&&(o=o+" Last queried "+X()(i.ts).fromNow()+"."),Q.a({},e,{documentation:o})}(e,t)}).value();n.push({prefixMatch:!0,skipSort:!0,label:"History",items:a})}return{suggestions:n}},t.prototype.getLabelCompletionItems=function(e){var t,n,a=e.text,r=e.wrapperClasses,i=e.labelKey,o=e.value,s=null,l=[],c=o.anchorBlock.getText(),u=o.anchorOffset;try{n=fn(c,u)}catch(e){}var d=n?n.labelKeys:[];if(a&&a.match(/^!?=~?/)||$.a.includes(r,"attr-value")){if(i&&this.labelValues["{}"]){var p=this.labelValues["{}"][i];p?(t="context-label-values",l.push({label:'Label values for "'+i+'"',items:p.map(yn)})):s=this.fetchLabelValues(i)}}else{var h=this.labelKeys["{}"]||vn;if(h){var f=$.a.difference(h,d);f.length>0&&(t="context-labels",l.push({label:"Labels",items:f.map(yn)}))}}return{context:t,refresher:s,suggestions:l}},t.prototype.importQueries=function(e,t){return Q.b(this,void 0,Promise,function(){var n=this;return Q.d(this,function(a){return"prometheus"===t?[2,Promise.all(e.map(function(e){return Q.b(n,void 0,void 0,function(){var t;return Q.d(this,function(n){switch(n.label){case 0:return[4,this.importPrometheusQuery(e.expr)];case 1:return t=n.sent(),[2,Q.a({},e,{expr:t})]}})})}))]:[2,e.map(function(e){return{refId:e.refId,expr:""}})]})})},t.prototype.importPrometheusQuery=function(e){return Q.b(this,void 0,Promise,function(){var t,n,a,r,i,o,s;return Q.d(this,function(l){switch(l.label){case 0:return e?(t=e.match(pn))?(n=t[0],a={},n.replace(hn,function(e,t,n,r){return a[t]={value:r,operator:n},""}),[4,this.start()]):[3,2]:[2,""];case 1:if(l.sent(),r=this.labelKeys["{}"],i={},r&&r.length>0)for(o in a)r&&r.indexOf(o)>-1&&(i[o]=a[o]);else i=a;return s=Object.keys(i).sort(),[2,["{",s.map(function(e){return""+e+i[e].operator+i[e].value}).join(","),"}"].join("")];case 2:return[2,""]}})})},t.prototype.fetchLogLabels=function(){return Q.b(this,void 0,void 0,function(){var e,t,n,a,r,i,o=this;return Q.d(this,function(s){switch(s.label){case 0:t="/api/prom/label",s.label=1;case 1:return s.trys.push([1,4,,5]),[4,this.request(t)];case 2:return[4,(n=s.sent()).data||n.json()];case 3:return a=s.sent(),r=a.data.slice().sort(),this.labelKeys=Q.a({},this.labelKeys,((e={})["{}"]=r,e)),this.logLabelOptions=r.map(function(e){return{label:e,value:e,isLeaf:!1}}),[2,r.filter(function(e){return vn.indexOf(e)>-1}).map(function(e){return o.fetchLabelValues(e)})];case 4:return i=s.sent(),console.error(i),[3,5];case 5:return[2,[]]}})})},t.prototype.fetchLabelValues=function(e){return Q.b(this,void 0,void 0,function(){var t,n,a,r,i,o,s,l,c;return Q.d(this,function(u){switch(u.label){case 0:a="/api/prom/label/"+e+"/values",u.label=1;case 1:return u.trys.push([1,4,,5]),[4,this.request(a)];case 2:return[4,(r=u.sent()).data||r.json()];case 3:return i=u.sent(),o=i.data.slice().sort(),this.logLabelOptions=this.logLabelOptions.map(function(t){return t.value===e?Q.a({},t,{children:o.map(function(e){return{label:e,value:e}})}):t}),s=this.labelValues["{}"],l=Q.a({},s,((t={})[e]=o,t)),this.labelValues=Q.a({},this.labelValues,((n={})["{}"]=l,n)),[3,5];case 4:return c=u.sent(),console.error(c),[3,5];case 5:return[2]}})})},t}(gn.b),xn=n(109);var Sn=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function kn(e,t,n,a,r){var i=e.line,o=e.ts||e.timestamp,s="EK"+o+t,l=X()(o),c=l.valueOf(),u=l.fromNow(),d=l.format("YYYY-MM-DD HH:mm:ss");return{key:s,logLevel:function(e){return e?(Object.keys(xn.a).forEach(function(n){t||new RegExp("\\b"+n+"\\b","i").test(e)&&(t=xn.a[n])}),t||(t=xn.a.unkown),t):xn.a.unkown;var t}(i),timeFromNow:u,timeEpochMs:c,timeLocal:d,uniqueLabels:a,entry:i,labels:n,searchWords:r?[r]:[],timestamp:o}}function Cn(e,t){void 0===t&&(t=Mn);var n=e.map(function(e){return e.labels}).join(),a=function(e){return e.reduce(function(e,t){if(!t)throw new Error("Need parsed labels to find common labels.");return e?(Object.keys(t).forEach(function(n){void 0!==e[n]&&e[n]===t[n]||delete e[n]}),Object.keys(e).forEach(function(n){void 0===t[n]&&delete e[n]})):e=Q.a({},t),e},void 0)}((e=e.map(function(e){return Q.a({},e,{parsedLabels:function(e){var t={};return e.replace(Sn,function(e,n,a,r){return t[n]=r,""}),t}(e.labels)})})).map(function(e){return e.parsedLabels}));e=e.map(function(e){return Q.a({},e,{uniqueLabels:function(e,t){var n=Q.a({},e);return Object.keys(t).forEach(function(e){delete n[e]}),n}(e.parsedLabels,a)})});var r=$.a.chain(e).reduce(function(e,t){return e.concat(t.entries.map(function(e){return kn(e,t.labels,t.parsedLabels,t.uniqueLabels,t.search)}))},[]).sortBy("timestamp").reverse().value(),i=[];return $.a.size(a)>0&&i.push({label:"Common labels",value:a,kind:xn.d.LabelsMap}),t&&i.push({label:"Limit",value:t+" ("+r.length+" returned)",kind:xn.d.String}),{id:n,meta:i,rows:r}}var En=/(?:^|\s){[^{]*}/g;function Tn(e){var t=(e=e||"").match(En),n="",a=e;return t&&(n=t[0].trim(),a=e.replace(En,"").trim()),{query:n,regexp:a}}var Mn=1e3,_n={direction:"BACKWARD",limit:Mn,regexp:"",query:""};var An=function(){function e(e,t,n){this.instanceSettings=e,this.backendSrv=t,this.templateSrv=n,this.languageProvider=new wn(this);var a=e.jsonData||{};this.maxLines=parseInt(a.maxLines,10)||Mn}return e.$inject=["instanceSettings","backendSrv","templateSrv"],e.prototype._request=function(e,t,n){var a=""+this.instanceSettings.url+e+"?"+(t?function(e){return Object.keys(e).map(function(t){var n=e[t];return encodeURIComponent(t)+"="+encodeURIComponent(n)}).join("&")}(t):""),r=Q.a({},n,{url:a});return this.backendSrv.datasourceRequest(r)},e.prototype.mergeStreams=function(e,t){var n=Cn(e,this.maxLines);return n.series=Object(xn.j)(n.rows,t),n},e.prototype.prepareQueryTarget=function(e,t){var n=this.templateSrv.replace(e.expr),a=this.getTime(t.range.from,!1),r=this.getTime(t.range.to,!0);return Q.a({},_n,Tn(n),{start:a,end:r,limit:this.maxLines})},e.prototype.query=function(e){return Q.b(this,void 0,void 0,function(){var t,n,a=this;return Q.d(this,function(r){return 0===(t=e.targets.filter(function(e){return e.expr&&!e.hide}).map(function(t){return a.prepareQueryTarget(t,e)})).length?[2,Promise.resolve({data:[]})]:(n=t.map(function(e){return a._request("/api/prom/query",e)}),[2,Promise.all(n).then(function(n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=t[i];if(o.data)for(var l=0,c=o.data.streams||[];l<c.length;l++){var u=c[l];u.search=s.regexp,r.push(u)}}if("time_series"===e.targets[0].resultFormat){var d=Cn(r,a.maxLines);return d.series=Object(xn.j)(d.rows,e.intervalMs),{data:d.series}}return{data:r}})])})})},e.prototype.importQueries=function(e,t){return Q.b(this,void 0,Promise,function(){return Q.d(this,function(n){return[2,this.languageProvider.importQueries(e,t.id)]})})},e.prototype.metadataRequest=function(e){var t=e.replace("v1","prom");return this._request(t,{silent:!0}).then(function(e){return{data:{data:e.data.values||[]}}})},e.prototype.modifyQuery=function(e,t){var n=Tn(e.expr||""),a=n.query;switch(t.type){case"ADD_FILTER":a=un(a,t.key,t.value)}var r=function(e,t){return((e||"")+" "+(t||"")).trim()}(a,n.regexp);return Q.a({},e,{expr:r})},e.prototype.getHighlighterExpression=function(e){return Tn(e.expr).regexp},e.prototype.getTime=function(e,t){return $.a.isString(e)&&(e=he.parse(e,t)),Math.ceil(1e6*e.valueOf())},e.prototype.testDatasource=function(){return this._request("/api/prom/label").then(function(e){return e&&e.data&&e.data.values&&e.data.values.length>0?{status:"success",message:"Data source connected and labels found."}:{status:"error",message:"Data source connected, but no labels received. Verify that Loki and Promtail is configured properly."}}).catch(function(e){var t="Loki: ";return e.statusText?t+=e.statusText:t+="Cannot connect to Loki",e.status&&(t+=". "+e.status),e.data&&e.data.message?t+=". "+e.data.message:e.data&&(t+=". "+e.data),{status:"error",message:t}})},e}(),Dn=[{title:"See your logs",label:"Start by selecting a log stream from the Log labels selector."},{title:'Logs from a "job"',expression:'{job="default/prometheus"}',label:"Returns all log lines emitted by instances of this job."},{title:"Combine stream selectors",expression:'{app="cassandra",namespace="prod"}',label:"Returns all log lines from streams that have both labels."},{title:"Search for text",expression:'{app="cassandra"} (duration|latency)\\s*(=|is|of)\\s*[\\d\\.]+',label:"Add a regular expression after the selector to filter for."}],Nn=function(e){return le.a.createElement("div",null,le.a.createElement("h2",null,"Loki Cheat Sheet"),Dn.map(function(t){return le.a.createElement("div",{className:"cheat-sheet-item",key:t.title},le.a.createElement("div",{className:"cheat-sheet-item__title"},t.title),t.expression&&le.a.createElement("div",{className:"cheat-sheet-item__expression",onClick:function(n){return e.onClickExample({refId:"1",expr:t.expression})}},le.a.createElement("code",null,t.expression)),le.a.createElement("div",{className:"cheat-sheet-item__label"},t.label))}))},Pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){return le.a.createElement("div",{className:"grafana-info-box grafana-info-box--max-lg"},le.a.createElement(Nn,{onClickExample:this.props.onClickExample}))},t}(se.PureComponent),On=n(293),In=n(287),$n=n.n(In),Fn=n(13),qn=n.n(Fn);var Rn=n(267),Ln=n.n(Rn);var jn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRef=function(e){t.el=e},t.onClick=function(){t.props.onClickItem(t.props.item)},t}return Q.c(t,e),t.prototype.componentDidUpdate=function(e){var t=this;this.props.isSelected&&!e.isSelected&&requestAnimationFrame(function(){!function(e){if(e&&e.offsetParent){var t=e.offsetParent;(e.offsetTop>t.scrollTop+t.offsetHeight||e.offsetTop<t.scrollTop)&&(t.scrollTop=e.offsetTop-t.offsetTop)}}(t.el)})},t.prototype.render=function(){var e=this.props,t=e.isSelected,n=e.item,a=e.prefix,r=t?"typeahead-item typeahead-item__selected":"typeahead-item",i=n.label||"";return le.a.createElement("li",{ref:this.getRef,className:r,onClick:this.onClick},le.a.createElement(Ln.a,{textToHighlight:i,searchWords:[a],highlightClassName:"typeahead-match"}),n.documentation&&t?le.a.createElement("div",{className:"typeahead-item-hint"},n.documentation):null)},t}(le.a.PureComponent),Un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.items,n=e.label,a=e.selected,r=e.onClickItem,i=e.prefix;return le.a.createElement("li",{className:"typeahead-group"},le.a.createElement("div",{className:"typeahead-group__title"},n),le.a.createElement("ul",{className:"typeahead-group__list"},t.map(function(e){return le.a.createElement(jn,{key:e.label,onClickItem:r,isSelected:a===e,item:e,prefix:i})})))},t}(le.a.PureComponent),Vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.groupedItems,n=e.menuRef,a=e.selectedItem,r=e.onClickItem,i=e.prefix;return le.a.createElement("ul",{className:"typeahead",ref:n},t.map(function(e){return le.a.createElement(Un,Q.a({key:e.label,onClickItem:r,prefix:i,selected:a},e))}))},t}(le.a.PureComponent),Bn={blocks:{paragraph:"paragraph",codeblock:"code_block",codeline:"code_line"},inlines:{},marks:{}},Qn=function(e,t){var n=e.split("\n").map(function(e){return re.Block.create({type:"code_line",nodes:[re.Text.create(e)]})}),a=re.Block.create({data:{syntax:t},type:"code_block",nodes:n});return re.Document.create({nodes:[a]})},zn=function(e,t){var n=Qn(e,t);return re.Value.create({document:n,SCHEMA:Bn})},Hn=function(){function e(e){var t=this.parse(e),n=t.orders.length?t.orders[0]:0;this.nextMoveOffset=this.getOffsetBetween(t.parts,0,n),this.orders=t.orders,this.parts=t.parts}return e.prototype.clearPlaceholders=function(){this.nextMoveOffset=0,this.orders=[]},e.prototype.getNextMoveOffset=function(){return this.nextMoveOffset},e.prototype.hasPlaceholders=function(){return this.orders.length>0},e.prototype.setNextPlaceholderValue=function(e){if(0!==this.orders.length){var t=this.orders[0];if(this.parts[t]=e,this.orders=this.orders.slice(1),0!==this.orders.length){var n=this.orders[0];if(t!==n){var a=t>n,r=a?{start:n+1,end:t+1}:{start:t+1,end:n};this.nextMoveOffset=(a?-1:1)*this.getOffsetBetween(this.parts,r.start,r.end)}else this.nextMoveOffset=0}else this.nextMoveOffset=0}},e.prototype.toString=function(){return this.parts.join("")},e.prototype.getOffsetBetween=function(e,t,n){return e.slice(t,n).reduce(function(e,t){return e+t.length},0)},e.prototype.parse=function(e){for(var t=/\$(\d+)/g,n=[],a=[],r=0;;){var i=t.exec(e);if(!i)break;var o=e.slice(r,i.index);n.push(o),""!==o&&n.push("");var s=parseInt(i[1],10);a.push({index:n.length-1,order:s}),r+=o.length+i.length}return n.push(e.slice(r)),{orders:a.sort(function(e,t){return e.order-t.order}).map(function(e){return e.index}),parts:n}},e}(),Gn=100;function Wn(e,t){var n=e.reduce(function(e,t){return e.concat(t.items)},[]);return n[Math.max(t,0)%n.length]}function Yn(e){return e&&e.length>0}var Kn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.onChange=function(e,t){var n=e.value,r=n.document!==a.state.value.document,i=a.state.value;a.setState({value:n},function(){r&&(oe.a.serialize(i)!==oe.a.serialize(n)&&t&&a.executeOnQueryChangeAndExecuteQueries())}),r&&n.selection.isCollapsed?window.requestAnimationFrame(a.handleTypeahead):a.resetTimer||a.resetTypeahead()},a.executeOnQueryChangeAndExecuteQueries=function(){var e=a.props,t=e.onQueryChange,n=e.onExecuteQuery;t&&t(oe.a.serialize(a.state.value)),n&&(n(),a.setState({lastExecutedValue:a.state.value}))},a.handleTypeahead=$.a.debounce(function(){return Q.b(a,void 0,void 0,function(){var e,t,n,a,r,i,o,s,l,c,u,d,p,h,f,m,g,v=this;return Q.d(this,function(b){if(e=window.getSelection(),t=this.props,n=t.cleanText,a=t.onTypeahead,r=this.state.value,a&&e.anchorNode){if(i=e.anchorNode.parentElement,!(o=i.closest(".slate-query-field"))||this.state.value.isBlurred)return[2];s=e.getRangeAt(0),l=s.startOffset,c=e.anchorNode.textContent,u=c.substr(0,l),(d=u.match(/(?:!?=~?"?|")(.*)/))?u=d[1]:n&&(u=n(u)),p=a({editorNode:o,prefix:u,selection:e,text:c,value:r,wrapperNode:i}),h=p.suggestions,f=p.context,m=p.refresher,g=h.map(function(e){return e.items&&(u&&(e.skipFilter||(e.items=e.items.filter(function(e){return(e.filterText||e.label).length>=u.length}),e.prefixMatch?e.items=e.items.filter(function(e){return 0===(e.filterText||e.label).indexOf(u)}):e.items=e.items.filter(function(e){return(e.filterText||e.label).indexOf(u)>-1})),e.items=e.items.filter(function(e){return e.insertText||(e.filterText||e.label)!==u})),e.skipSort||(e.items=$.a.sortBy(e.items,function(e){return e.sortText||e.label}))),e}).filter(function(e){return e.items&&e.items.length>0}),$.a.isEqual(g,this.state.suggestions)&&(g=this.state.suggestions),this.setState({suggestions:g,typeaheadPrefix:u,typeaheadContext:f,typeaheadText:c},function(){m&&m.then(v.handleTypeahead).catch(function(e){return console.error(e)})})}return[2]})})},Gn),a.handleEnterAndTabKey=function(e){var t=a.state,n=t.typeaheadIndex,r=t.suggestions;if(a.menuEl){if(event.preventDefault(),!r||0===r.length)return;var i=Wn(r,n),o=a.applyTypeahead(e,i),s=o.operations.find(function(e){return"insert_text"===e.type});if(s){var l=s.text;a.placeholdersBuffer.setNextPlaceholderValue(l),a.placeholdersBuffer.hasPlaceholders()&&o.move(a.placeholdersBuffer.getNextMoveOffset()).focus()}return!0}a.executeOnQueryChangeAndExecuteQueries()},a.onKeyDown=function(e,t){var n=a.state.typeaheadIndex;switch(e.key){case"Escape":if(a.menuEl)return e.preventDefault(),e.stopPropagation(),a.resetTypeahead(),!0;break;case" ":if(e.ctrlKey)return e.preventDefault(),a.handleTypeahead(),!0;break;case"Enter":case"Tab":return a.handleEnterAndTabKey(t);case"ArrowDown":a.menuEl&&(e.preventDefault(),a.setState({typeaheadIndex:n+1}));break;case"ArrowUp":a.menuEl&&(e.preventDefault(),a.setState({typeaheadIndex:Math.max(0,n-1)}))}},a.resetTypeahead=function(){a.mounted&&(a.setState({suggestions:[],typeaheadIndex:0,typeaheadPrefix:"",typeaheadContext:null}),a.resetTimer=null)},a.handleBlur=function(e,t){var n=a.state.lastExecutedValue?oe.a.serialize(a.state.lastExecutedValue):null,r=oe.a.serialize(t.value);a.resetTimer=setTimeout(a.resetTypeahead,100),a.placeholdersBuffer.clearPlaceholders(),n!==r&&a.executeOnQueryChangeAndExecuteQueries()},a.handleFocus=function(){},a.onClickMenu=function(e){var t=a.applyTypeahead(a.state.value.change(),e);a.onChange(t,!0)},a.updateMenu=function(){var e=a.state.suggestions,t=a.menuEl,n=window.getSelection().anchorNode;if(t)if(Yn(e)){if(n){var r=n.parentElement.getBoundingClientRect(),i=window.scrollX,o=window.scrollY;requestAnimationFrame(function(){t.style.opacity="1",t.style.top=r.top+o+r.height+4+"px",t.style.left=r.left+i-2+"px"})}}else t.removeAttribute("style")},a.menuRef=function(e){a.menuEl=e},a.renderMenu=function(){var e=a.props.portalOrigin,t=a.state,n=t.suggestions,r=t.typeaheadIndex,i=t.typeaheadPrefix;if(!Yn(n))return null;var o=Wn(n,r);return le.a.createElement(Xn,{origin:e},le.a.createElement(Vn,{menuRef:a.menuRef,selectedItem:o,onClickItem:a.onClickMenu,prefix:i,groupedItems:n}))},a.handlePaste=function(e,t){var n=e.clipboardData.getData("Text"),r=t.value.change().insertText(n);return a.onChange(r),!0},a.placeholdersBuffer=new Hn(t.initialQuery||""),a.plugins=[{onKeyDown:function(e,t){var n=t.value;if(n.isCollapsed&&"k"===e.key&&e.ctrlKey){e.preventDefault();var a=n.anchorText.text,r=n.anchorOffset,i=a.length-r;return t.deleteForward(i),!0}}},{onKeyDown:function(e,t){var n=t.value;if(n.isCollapsed&&"Enter"===e.key&&e.shiftKey){e.preventDefault();var a=function(e){var t=e.length-e.trimLeft().length;if(t){for(var n=e[0];--t;)n+=e[0];return n}return""}(n.startBlock.text);return t.splitBlock().insertText(a).focus()}}}].concat(t.additionalPlugins||[]).filter(function(e){return e}),a.state={suggestions:[],typeaheadContext:null,typeaheadIndex:0,typeaheadPrefix:"",typeaheadText:"",value:zn(a.placeholdersBuffer.toString(),t.syntax),lastExecutedValue:null},a}return Q.c(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.updateMenu()},t.prototype.componentWillUnmount=function(){this.mounted=!1,clearTimeout(this.resetTimer)},t.prototype.componentDidUpdate=function(e,t){var n=this.props,a=n.initialQuery,r=n.syntax,i=this.state,o=i.value,s=i.suggestions;a!==e.initialQuery&&a!==oe.a.serialize(o)&&(this.placeholdersBuffer=new Hn(a||""),this.setState({value:zn(this.placeholdersBuffer.toString(),r)})),o===t.value&&Yn(s)===Yn(t.suggestions)||this.updateMenu()},t.prototype.componentWillReceiveProps=function(e){if(e.syntaxLoaded&&!this.props.syntaxLoaded){var t=this.state.value.change().insertText(" ").deleteBackward();this.placeholdersBuffer.hasPlaceholders()&&t.move(this.placeholdersBuffer.getNextMoveOffset()).focus(),this.onChange(t,!0)}},t.prototype.applyTypeahead=function(e,t){var n=this.props,a=n.cleanText,r=n.onWillApplySuggestion,i=n.syntax,o=this.state,s=o.typeaheadPrefix,l=o.typeaheadText,c=t.insertText||t.label,u="function"===t.kind,d=t.move||0;r&&(c=r(c,Q.a({},this.state))),this.resetTypeahead();var p=t.deleteBackwards||s.length,h=(a?a(l):l).length-s.length,f=l.indexOf(s),m=s&&(h>0&&f>-1||c===l)&&!u?h+f:0;if(c.match(/\n/)){var g=Qn(c,i);return e.deleteBackward(p).deleteForward(m).insertFragment(g).focus()}return e.deleteBackward(p).deleteForward(m).insertText(c).move(d).focus()},t.prototype.render=function(){var e=this.props.disabled,t=qn()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":e});return le.a.createElement("div",{className:t},le.a.createElement("div",{className:"slate-query-field"},this.renderMenu(),le.a.createElement(ie.a,{autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onKeyDown:this.onKeyDown,onChange:this.onChange,onFocus:this.handleFocus,onPaste:this.handlePaste,placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))},t}(le.a.PureComponent),Xn=function(e){function t(t){var n=e.call(this,t)||this,a=t.index,r=void 0===a?0:a,i=t.origin,o=void 0===i?"query":i;return n.node=document.createElement("div"),n.node.classList.add("slate-typeahead","slate-typeahead-"+o+"-"+r),document.body.appendChild(n.node),n}return Q.c(t,e),t.prototype.componentWillUnmount=function(){document.body.removeChild(this.node)},t.prototype.render=function(){return ue.a.createPortal(this.props.children,this.node)},t}(le.a.PureComponent),Jn=Kn;function Zn(e,t){for(var n,a=e.parentElement.previousSibling;a;){if(n=a.querySelector(t))return n;a=a.previousSibling}}function ea(e){void 0===e&&(e=window);var t=e.getSelection();if(!t.anchorNode)return null;var n=t.getRangeAt(0),a=t.anchorNode.textContent,r=n.startOffset;return a.substr(r,1)}"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),a=this;do{for(t=n.length;--t>=0&&n.item(t)!==a;);a=a.parentElement}while(t<0&&a);return a});var ta={"[":"]","{":"}","(":")"},na=/ (?![^}]+})/;function aa(){return{onKeyDown:function(e,t){var n=t.value;if(n.isCollapsed)switch(e.key){case"{":case"[":return e.preventDefault(),t.insertText(""+e.key+ta[e.key]).move(-1).focus(),!0;case"(":e.preventDefault();var a=n.anchorText.text,r=n.anchorOffset,i=a.slice(r).search(na),o=(i>-1?i+r:a.length)-r;return t.insertText(e.key).move(o).insertText(ta[e.key]).move(-1-o).focus(),!0;case"Backspace":var s=(a=n.anchorText.text)[(r=n.anchorOffset)-1],l=a[r];if(ta[s]&&ta[s]===l)return e.preventDefault(),t.deleteBackward().deleteForward().focus(),!0}}}}function ra(e){var t=e.handler;return{onKeyDown:function(e){if(t&&"Enter"===e.key&&!e.shiftKey)return e.preventDefault(),t(e),!0}}}var ia=function(e){var t=!1;return{promise:new Promise(function(n,a){e.then(function(e){return t?a({isCanceled:!0}):n(e)}),e.catch(function(e){return a(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}},oa="promql";function sa(e,t){var n=t.typeaheadContext,a=t.typeaheadText;switch(n){case"context-labels":var r=ea();r&&"}"!==r&&","!==r||(e+="=");break;case"context-label-values":a.match(/^(!?=~?"|")/)||(e='"'+e),'"'!==ea()&&(e+='"')}return e}var la=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.loadOptions=function(e){var t=e[e.length-1];a.setState(function(e){return{logLabelOptions:e.logLabelOptions.map(function(e){return e.value===t.value?Q.a({},e,{loading:!0}):e})}}),a.languageProvider.fetchLabelValues(t.value).then(a.onUpdateLanguage).catch(function(){})},a.onChangeLogLabels=function(e,t){if(2===t.length){var n="{"+t[0].value+'="'+t[1].value+'"}';a.onChangeQuery(n,!0)}},a.onChangeQuery=function(e,t){var n=a.props,r=n.query,i=n.onQueryChange,o=n.onExecuteQuery;i&&(i(Q.a({},r,{expr:e})),t&&o&&o())},a.onClickHintFix=function(){var e=a.props,t=e.hint,n=e.onExecuteHint;n&&t&&t.fix&&n(t.fix.action)},a.onUpdateLanguage=function(){ae.a.languages[oa]=a.languageProvider.getSyntax();var e=a.languageProvider.logLabelOptions;a.setState({logLabelOptions:e,syntaxLoaded:!0})},a.onTypeahead=function(e){if(!a.languageProvider)return{suggestions:[]};var t=a.props.history,n=e.prefix,r=e.text,i=e.value,o=e.wrapperNode,s=Array.from(o.classList),l=Zn(o,".attr-name"),c=l&&l.textContent,u=ea(),d=a.languageProvider.provideCompletionItems({text:r,value:i,prefix:n,wrapperClasses:s,labelKey:c},{history:t});return console.log("handleTypeahead",s,r,n,u,c,d.context),d},t.datasource.languageProvider&&(a.languageProvider=t.datasource.languageProvider),a.plugins=[aa(),ra({handler:t.onExecuteQuery}),$n()({onlyIn:function(e){return"code_block"===e.type},getSyntax:function(e){return"promql"}})],a.pluginsSearch=[ra({handler:t.onExecuteQuery})],a.state={logLabelOptions:[],syntaxLoaded:!1},a}return Q.c(t,e),t.prototype.componentDidMount=function(){var e=this;this.languageProvider&&(this.languageProviderInitializationPromise=ia(this.languageProvider.start()),this.languageProviderInitializationPromise.promise.then(function(t){t.map(function(t){return t.then(e.onUpdateLanguage).catch(function(){})})}).then(function(){return e.onUpdateLanguage()}).catch(function(e){e.isCanceled&&console.warn("LokiQueryField has unmounted, language provider intialization was canceled")}))},t.prototype.componentWillUnmount=function(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()},t.prototype.render=function(){var e=this.props,t=e.error,n=e.hint,a=e.query,r=this.state,i=r.logLabelOptions,o=r.syntaxLoaded,s=this.languageProvider?this.languageProvider.cleanText:void 0,l=function(e,t){return e?t?"Log labels":"(No labels found)":"Loading labels..."}(o,i&&i.length>0);return le.a.createElement(le.a.Fragment,null,le.a.createElement("div",{className:"gf-form-inline"},le.a.createElement("div",{className:"gf-form"},le.a.createElement(On.a,{options:i,onChange:this.onChangeLogLabels,loadData:this.loadOptions},le.a.createElement("button",{className:"gf-form-label gf-form-label--btn",disabled:!o},l," ",le.a.createElement("i",{className:"fa fa-caret-down"})))),le.a.createElement("div",{className:"gf-form gf-form--grow"},le.a.createElement(Jn,{additionalPlugins:this.plugins,cleanText:s,initialQuery:a.expr,onTypeahead:this.onTypeahead,onWillApplySuggestion:sa,onQueryChange:this.onChangeQuery,onExecuteQuery:this.props.onExecuteQuery,placeholder:"Enter a Loki query",portalOrigin:"loki",syntaxLoaded:o}))),le.a.createElement("div",null,t?le.a.createElement("div",{className:"prom-query-field-info text-error"},t):null,n?le.a.createElement("div",{className:"prom-query-field-info text-warning"},n.label," ",n.fix?le.a.createElement("a",{className:"text-link muted",onClick:this.onClickHintFix},n.fix.label):null):null))},t}(le.a.PureComponent),ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){return le.a.createElement("div",null,le.a.createElement("div",{className:"gf-form"},le.a.createElement("div",{className:"gf-form-label"},"Loki is currently not supported as dashboard data source. We are working on it!")))},t}(se.PureComponent),ua=function(){function e(){}return e.templateUrl="partials/config.html",e}(),da=function(){function e(e,t){this.$q=e,this.datasourceSrv=t}return e.$inject=["$q","datasourceSrv"],e.prototype.query=function(e){var t=this,n=$.a.groupBy(e.targets,"datasource"),a=$.a.map(n,function(n){var a=n[0].datasource;return"-- Mixed --"===a?t.$q([]):t.datasourceSrv.get(a).then(function(t){var a=Z.a.copy(e);return a.targets=n,t.query(a)})});return this.$q.all(a).then(function(e){return{data:$.a.flatten($.a.map(e,"data"))}})},e}(),pa=function(){function e(e){this.$q=e}return e.prototype.processQueryResult=function(e){var t=[];if(!e.data.results)return{data:t};for(var n in e.data.results){var a=e.data.results[n];if(a.series)for(var r=0,i=a.series;r<i.length;r++){var o=i[r];t.push({target:o.name,datapoints:o.points,refId:a.refId,meta:a.meta})}if(a.tables)for(var s=0,l=a.tables;s<l.length;s++){var c=l[s];c.type="table",c.refId=a.refId,c.meta=a.meta,t.push(c)}}return{data:t}},e.prototype.parseMetricFindQueryResult=function(e,t){if(!t||0===t.data.length||0===t.data.results[e].meta.rowCount)return[];var n=t.data.results[e].tables[0].columns,a=t.data.results[e].tables[0].rows,r=this.findColIndex(n,"__text"),i=this.findColIndex(n,"__value");return 2===n.length&&-1!==r&&-1!==i?this.transformToKeyValueList(a,r,i):this.transformToSimpleList(a)},e.prototype.transformToKeyValueList=function(e,t,n){for(var a=[],r=0;r<e.length;r++)this.containsKey(a,e[r][t])||a.push({text:e[r][t],value:e[r][n]});return a},e.prototype.transformToSimpleList=function(e){for(var t=[],n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var r=e[n][a];-1===t.indexOf(r)&&t.push(r)}return $.a.map(t,function(e){return{text:e}})},e.prototype.findColIndex=function(e,t){for(var n=0;n<e.length;n++)if(e[n].text===t)return n;return-1},e.prototype.containsKey=function(e,t){for(var n=0;n<e.length;n++)if(e[n].text===t)return!0;return!1},e.prototype.transformAnnotationResponse=function(e,t){for(var n=t.data.results[e.annotation.name].tables[0],a=-1,r=-1,i=-1,o=0;o<n.columns.length;o++)if("time_sec"===n.columns[o].text||"time"===n.columns[o].text)a=o;else{if("title"===n.columns[o].text)return this.$q.reject({message:"The title column for annotations is deprecated, now only a column named text is returned"});"text"===n.columns[o].text?r=o:"tags"===n.columns[o].text&&(i=o)}if(-1===a)return this.$q.reject({message:"Missing mandatory time column (with time_sec column alias) in annotation query."});var s=[];for(o=0;o<n.rows.length;o++){var l=n.rows[o];s.push({annotation:e.annotation,time:Math.floor(l[a]),text:l[r]?l[r].toString():"",tags:l[i]?l[i].trim().split(/\s*,\s*/):[]})}return s},e}(),ha=function(){function e(e,t,n){this.target=e,this.templateSrv=t,this.scopedVars=n,e.format=e.format||"time_series",e.timeColumn=e.timeColumn||"time",e.metricColumn=e.metricColumn||"none",e.group=e.group||[],e.where=e.where||[{type:"macro",name:"$__timeFilter",params:[]}],e.select=e.select||[[{type:"column",params:["value"]}]],"rawQuery"in this.target||(e.rawQuery="rawSql"in e),this.interpolateQueryStr=this.interpolateQueryStr.bind(this)}return e.$inject=["target","templateSrv","scopedVars"],e.prototype.unquoteIdentifier=function(e){return'"'===e[0]&&'"'===e[e.length-1]?e.substring(1,e.length-1).replace(/""/g,'"'):e},e.prototype.quoteIdentifier=function(e){return'"'+e.replace(/"/g,'""')+'"'},e.prototype.quoteLiteral=function(e){return"'"+e.replace(/'/g,"''")+"'"},e.prototype.escapeLiteral=function(e){return String(e).replace(/'/g,"''")},e.prototype.hasTimeGroup=function(){return $.a.find(this.target.group,function(e){return"time"===e.type})},e.prototype.hasMetricColumn=function(){return"none"!==this.target.metricColumn},e.prototype.interpolateQueryStr=function(e,t,n){return t.multi||t.includeAll?"string"==typeof e?this.quoteLiteral(e):$.a.map(e,this.quoteLiteral).join(","):this.escapeLiteral(e)},e.prototype.render=function(e){var t=this.target;return this.target.rawQuery||"table"in this.target?(t.rawQuery||(t.rawSql=this.buildQuery()),e?this.templateSrv.replace(t.rawSql,this.scopedVars,this.interpolateQueryStr):t.rawSql):""},e.prototype.hasUnixEpochTimecolumn=function(){return["int","bigint","double"].indexOf(this.target.timeColumnType)>-1},e.prototype.buildTimeColumn=function(e){void 0===e&&(e=!0);var t,n=this.hasTimeGroup(),a="$__timeGroup";if(n){var r=void 0;r=n.params.length>1&&"none"!==n.params[1]?n.params.join(","):n.params[0],this.hasUnixEpochTimecolumn()&&(a="$__unixEpochGroup"),e&&(a+="Alias"),t=a+"("+this.target.timeColumn+","+r+")"}else t=this.target.timeColumn,e&&(t+=' AS "time"');return t},e.prototype.buildMetricColumn=function(){return this.hasMetricColumn()?this.target.metricColumn+" AS metric":""},e.prototype.buildValueColumns=function(){for(var e="",t=0,n=this.target.select;t<n.length;t++){var a=n[t];e+=",\n  "+this.buildValueColumn(a)}return e},e.prototype.buildValueColumn=function(e){var t="";t=$.a.find(e,function(e){return"column"===e.type}).params[0];var n=$.a.find(e,function(e){return"aggregate"===e.type});n&&(t=n.params[0]+"("+t+")");var a=$.a.find(e,function(e){return"alias"===e.type});return a&&(t+=" AS "+this.quoteIdentifier(a.params[0])),t},e.prototype.buildWhereClause=function(){var e=this,t="",n=$.a.map(this.target.where,function(t,n){switch(t.type){case"macro":return t.name+"("+e.target.timeColumn+")";case"expression":return t.params.join(" ")}});return n.length>0&&(t="\nWHERE\n  "+n.join(" AND\n  ")),t},e.prototype.buildGroupClause=function(){for(var e="",t="",n=0;n<this.target.group.length;n++){var a=this.target.group[n];n>0&&(t+=", "),"time"===a.type?t+="1":t+=a.params[0]}return t.length&&(e="\nGROUP BY "+t,this.hasMetricColumn()&&(e+=",2")),e},e.prototype.buildQuery=function(){var e="SELECT";return e+="\n  "+this.buildTimeColumn(),this.hasMetricColumn()&&(e+=",\n  "+this.buildMetricColumn()),e+=this.buildValueColumns(),e+="\nFROM "+this.target.table,e+=this.buildWhereClause(),e+=this.buildGroupClause(),e+="\nORDER BY "+this.buildTimeColumn(!1)},e}(),fa=function(){function e(e,t,n,a,r){var i=this;this.backendSrv=t,this.$q=n,this.templateSrv=a,this.timeSrv=r,this.interpolateVariable=function(e,t){return"string"==typeof e?t.multi||t.includeAll?i.queryModel.quoteLiteral(e):e:"number"==typeof e?e:$.a.map(e,function(e){return i.queryModel.quoteLiteral(e)}).join(",")},this.name=e.name,this.id=e.id,this.responseParser=new pa(this.$q),this.queryModel=new ha({}),this.interval=(e.jsonData||{}).timeInterval}return e.$inject=["instanceSettings","backendSrv","$q","templateSrv","timeSrv"],e.prototype.query=function(e){var t=this,n=$.a.filter(e.targets,function(e){return!0!==e.hide}).map(function(n){var a=new ha(n,t.templateSrv,e.scopedVars);return{refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.id,rawSql:a.render(t.interpolateVariable),format:n.format}});return 0===n.length?this.$q.when({data:[]}):this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:n}}).then(this.responseParser.processQueryResult)},e.prototype.annotationQuery=function(e){var t=this;if(!e.annotation.rawQuery)return this.$q.reject({message:"Query missing in annotation definition"});var n={refId:e.annotation.name,datasourceId:this.id,rawSql:this.templateSrv.replace(e.annotation.rawQuery,e.scopedVars,this.interpolateVariable),format:"table"};return this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:[n]}}).then(function(n){return t.responseParser.transformAnnotationResponse(e,n)})},e.prototype.metricFindQuery=function(e,t){var n=this,a="tempvar";t&&t.variable&&t.variable.name&&(a=t.variable.name);var r={refId:a,datasourceId:this.id,rawSql:this.templateSrv.replace(e,{},this.interpolateVariable),format:"table"},i=this.timeSrv.timeRange(),o={queries:[r],from:i.from.valueOf().toString(),to:i.to.valueOf().toString()};return t&&t.range&&t.range.from&&(o.from=t.range.from.valueOf().toString()),t&&t.range&&t.range.to&&(o.to=t.range.to.valueOf().toString()),this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:o}).then(function(e){return n.responseParser.parseMetricFindQueryResult(a,e)})},e.prototype.testDatasource=function(){return this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:"5m",to:"now",queries:[{refId:"A",intervalMs:1,maxDataPoints:1,datasourceId:this.id,rawSql:"SELECT 1",format:"table"}]}}).then(function(e){return{status:"success",message:"Database Connection OK"}}).catch(function(e){return console.log(e),e.data&&e.data.message?{status:"error",message:e.data.message}:{status:"error",message:e.status}})},e}(),ma=function(){function e(e,t){this.target=e,this.queryModel=t}return e.prototype.getOperators=function(e){switch(e){case"double":case"float":return["=","!=","<","<=",">",">="];case"text":case"tinytext":case"mediumtext":case"longtext":case"varchar":case"char":return["=","!=","<","<=",">",">=","IN","NOT IN","LIKE","NOT LIKE"];default:return["=","!=","<","<=",">",">=","IN","NOT IN"]}},e.prototype.quoteIdentAsLiteral=function(e){return this.queryModel.quoteLiteral(this.queryModel.unquoteIdentifier(e))},e.prototype.findMetricTable=function(){return"\n  SELECT\n    table_name as table_name,\n    ( SELECT\n        column_name as column_name\n      FROM information_schema.columns c\n      WHERE\n        c.table_schema = t.table_schema AND\n        c.table_name = t.table_name AND\n        c.data_type IN ('timestamp', 'datetime')\n      ORDER BY ordinal_position LIMIT 1\n    ) AS time_column,\n    ( SELECT\n        column_name AS column_name\n      FROM information_schema.columns c\n      WHERE\n        c.table_schema = t.table_schema AND\n        c.table_name = t.table_name AND\n        c.data_type IN('float', 'int', 'bigint')\n      ORDER BY ordinal_position LIMIT 1\n    ) AS value_column\n  FROM information_schema.tables t\n  WHERE\n    t.table_schema = database() AND\n    EXISTS\n    ( SELECT 1\n      FROM information_schema.columns c\n      WHERE\n        c.table_schema = t.table_schema AND\n        c.table_name = t.table_name AND\n        c.data_type IN ('timestamp', 'datetime')\n    ) AND\n    EXISTS\n    ( SELECT 1\n      FROM information_schema.columns c\n      WHERE\n        c.table_schema = t.table_schema AND\n        c.table_name = t.table_name AND\n        c.data_type IN('float', 'int', 'bigint')\n    )\n  LIMIT 1\n;"},e.prototype.buildTableConstraint=function(e){var t="";if(e.includes(".")){var n=e.split(".");return t="table_schema = "+this.quoteIdentAsLiteral(n[0]),t+=" AND table_name = "+this.quoteIdentAsLiteral(n[1])}return t="table_schema = database() AND table_name = "+this.quoteIdentAsLiteral(e)},e.prototype.buildTableQuery=function(){return"SELECT table_name FROM information_schema.tables WHERE table_schema = database() ORDER BY table_name"},e.prototype.buildColumnQuery=function(e){var t="SELECT column_name FROM information_schema.columns WHERE ";switch(t+=this.buildTableConstraint(this.target.table),e){case"time":t+=" AND data_type IN ('timestamp','datetime','bigint','int','double','float')";break;case"metric":t+=" AND data_type IN ('text','tinytext','mediumtext','longtext','varchar','char')";break;case"value":t+=" AND data_type IN ('bigint','int','smallint','mediumint','tinyint','double','decimal','float')",t+=" AND column_name <> "+this.quoteIdentAsLiteral(this.target.timeColumn);break;case"group":t+=" AND data_type IN ('text','tinytext','mediumtext','longtext','varchar','char')"}return t+=" ORDER BY column_name"},e.prototype.buildValueQuery=function(e){var t="SELECT DISTINCT QUOTE("+e+")";return t+=" FROM "+this.target.table,t+=" WHERE $__timeFilter("+this.target.timeColumn+")",t+=" ORDER BY 1 LIMIT 100"},e.prototype.buildDatatypeQuery=function(e){var t="\nSELECT data_type\nFROM information_schema.columns\nWHERE ";return t+=" table_name = "+this.quoteIdentAsLiteral(this.target.table),t+=" AND column_name = "+this.quoteIdentAsLiteral(e)},e}(),ga=function(){return function(e){this.type=e.type,e.label?this.label=e.label:this.label=this.type[0].toUpperCase()+this.type.substring(1)+":",this.style=e.style,"function"===this.style?(this.wrapOpen="(",this.wrapClose=")",this.separator=", "):(this.wrapOpen=" ",this.wrapClose=" ",this.separator=" "),this.params=e.params,this.defaultParams=e.defaultParams}}(),va=function(){function e(e,t){if(this.part=e,this.def=t,!this.def)throw{message:"Could not find sql part "+e.type};this.datatype=e.datatype,e.name?(this.name=e.name,this.label=t.label+" "+e.name):(this.name="",this.label=t.label),e.params=e.params||$.a.clone(this.def.defaultParams),this.params=e.params}return e.prototype.updateParam=function(e,t){""===e&&this.def.params[t].optional?this.params.splice(t,1):this.params[t]=e,this.part.params=this.params},e}(),ba=[];function ya(e){ba[e.type]=new ga(e)}ya({type:"column",style:"label",params:[{type:"column",dynamicLookup:!0}],defaultParams:["value"]}),ya({type:"expression",style:"expression",label:"Expr:",params:[{name:"left",type:"string",dynamicLookup:!0},{name:"op",type:"string",dynamicLookup:!0},{name:"right",type:"string",dynamicLookup:!0}],defaultParams:["value","=","value"]}),ya({type:"macro",style:"label",label:"Macro:",params:[],defaultParams:[]}),ya({type:"aggregate",style:"label",params:[{name:"name",type:"string",options:["avg","count","min","max","sum","stddev","variance"]}],defaultParams:["avg"]}),ya({type:"alias",style:"label",params:[{name:"name",type:"string",quote:"double"}],defaultParams:["alias"]}),ya({type:"time",style:"function",label:"time",params:[{name:"interval",type:"interval",options:["$__interval","1s","10s","1m","5m","10m","15m","1h"]},{name:"fill",type:"string",options:["none","NULL","previous","0"]}],defaultParams:["$__interval","none"]});var wa={create:function(e){var t=ba[e.type];return t?new va(e,t):null}},xa="SELECT\n  UNIX_TIMESTAMP(<time_column>) as time_sec,\n  <value column> as value,\n  <series name column> as metric\nFROM <table name>\nWHERE $__timeFilter(time_column)\nORDER BY <time_column> ASC\n",Sa=function(e){function t(t,n,a,r,i){var o=e.call(this,t,n)||this;return o.templateSrv=a,o.$q=r,o.uiSegmentSrv=i,o.target=o.target,o.queryModel=new ha(o.target,a,o.panel.scopedVars),o.metaBuilder=new ma(o.target,o.queryModel),o.updateProjection(),o.formats=[{text:"Time series",value:"time_series"},{text:"Table",value:"table"}],o.target.rawSql||("table"===o.panelCtrl.panel.type?(o.target.format="table",o.target.rawSql="SELECT 1",o.target.rawQuery=!0):(o.target.rawSql=xa,o.datasource.metricFindQuery(o.metaBuilder.findMetricTable()).then(function(e){if(e.length>0){o.target.table=e[0].text;var t=o.uiSegmentSrv.newSegment(o.target.table);o.tableSegment.html=t.html,o.tableSegment.value=t.value,o.target.timeColumn=e[1].text,t=o.uiSegmentSrv.newSegment(o.target.timeColumn),o.timeColumnSegment.html=t.html,o.timeColumnSegment.value=t.value,o.target.timeColumnType="timestamp",o.target.select=[[{type:"column",params:[e[2].text]}]],o.updateProjection(),o.panelCtrl.refresh()}}))),o.target.table?o.tableSegment=i.newSegment(o.target.table):o.tableSegment=i.newSegment({value:"select table",fake:!0}),o.timeColumnSegment=i.newSegment(o.target.timeColumn),o.metricColumnSegment=i.newSegment(o.target.metricColumn),o.buildSelectMenu(),o.whereAdd=o.uiSegmentSrv.newPlusButton(),o.groupAdd=o.uiSegmentSrv.newPlusButton(),o.panelCtrl.events.on("data-received",o.onDataReceived.bind(o),t),o.panelCtrl.events.on("data-error",o.onDataError.bind(o),t),o}return t.$inject=["$scope","$injector","templateSrv","$q","uiSegmentSrv"],Q.c(t,e),t.prototype.updateProjection=function(){this.selectParts=$.a.map(this.target.select,function(e){return $.a.map(e,wa.create).filter(function(e){return e})}),this.whereParts=$.a.map(this.target.where,wa.create).filter(function(e){return e}),this.groupParts=$.a.map(this.target.group,wa.create).filter(function(e){return e})},t.prototype.updatePersistedParts=function(){this.target.select=$.a.map(this.selectParts,function(e){return $.a.map(e,function(e){return{type:e.def.type,datatype:e.datatype,params:e.params}})}),this.target.where=$.a.map(this.whereParts,function(e){return{type:e.def.type,datatype:e.datatype,name:e.name,params:e.params}}),this.target.group=$.a.map(this.groupParts,function(e){return{type:e.def.type,datatype:e.datatype,params:e.params}})},t.prototype.buildSelectMenu=function(){this.selectMenu=[];this.selectMenu.push({text:"Aggregate Functions",value:"aggregate",submenu:[{text:"Average",value:"avg"},{text:"Count",value:"count"},{text:"Maximum",value:"max"},{text:"Minimum",value:"min"},{text:"Sum",value:"sum"},{text:"Standard deviation",value:"stddev"},{text:"Variance",value:"variance"}]}),this.selectMenu.push({text:"Alias",value:"alias"}),this.selectMenu.push({text:"Column",value:"column"})},t.prototype.toggleEditorMode=function(){var e=this;this.target.rawQuery?ze.b.emit("confirm-modal",{title:"Warning",text2:"Switching to query builder may overwrite your raw SQL.",icon:"fa-exclamation",yesText:"Switch",onConfirm:function(){e.target.rawQuery=!e.target.rawQuery}}):this.target.rawQuery=!this.target.rawQuery},t.prototype.resetPlusButton=function(e){var t=this.uiSegmentSrv.newPlusButton();e.html=t.html,e.value=t.value},t.prototype.getTableSegments=function(){return this.datasource.metricFindQuery(this.metaBuilder.buildTableQuery()).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this))},t.prototype.tableChanged=function(){var e=this;this.target.table=this.tableSegment.value,this.target.where=[],this.target.group=[],this.updateProjection();var t=this.uiSegmentSrv.newSegment("none");this.metricColumnSegment.html=t.html,this.metricColumnSegment.value=t.value,this.target.metricColumn="none";var n=this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("time")).then(function(t){if(t.length>0&&!$.a.find(t,function(t){return t.text===e.target.timeColumn})){var n=e.uiSegmentSrv.newSegment(t[0].text);e.timeColumnSegment.html=n.html,e.timeColumnSegment.value=n.value}return e.timeColumnChanged(!1)}),a=this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("value")).then(function(t){t.length>0&&(e.target.select=[[{type:"column",params:[t[0].text]}]],e.updateProjection())});this.$q.all([n,a]).then(function(){e.panelCtrl.refresh()})},t.prototype.getTimeColumnSegments=function(){return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("time")).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this))},t.prototype.timeColumnChanged=function(e){var t=this;return this.target.timeColumn=this.timeColumnSegment.value,this.datasource.metricFindQuery(this.metaBuilder.buildDatatypeQuery(this.target.timeColumn)).then(function(n){if(1===n.length){t.target.timeColumnType!==n[0].text&&(t.target.timeColumnType=n[0].text);var a=void 0;a=t.queryModel.hasUnixEpochTimecolumn()?wa.create({type:"macro",name:"$__unixEpochFilter",params:[]}):wa.create({type:"macro",name:"$__timeFilter",params:[]}),t.whereParts.length>=1&&"macro"===t.whereParts[0].def.type?t.whereParts[0]=a:t.whereParts.splice(0,0,a)}t.updatePersistedParts(),!1!==e&&t.panelCtrl.refresh()})},t.prototype.getMetricColumnSegments=function(){return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("metric")).then(this.transformToSegments({addNone:!0})).catch(this.handleQueryError.bind(this))},t.prototype.metricColumnChanged=function(){this.target.metricColumn=this.metricColumnSegment.value,this.panelCtrl.refresh()},t.prototype.onDataReceived=function(e){this.lastQueryMeta=null,this.lastQueryError=null;var t=$.a.find(e,{refId:this.target.refId});t&&(this.lastQueryMeta=t.meta)},t.prototype.onDataError=function(e){if(e.data&&e.data.results){var t=e.data.results[this.target.refId];t&&(this.lastQueryMeta=t.meta,this.lastQueryError=t.error)}},t.prototype.transformToSegments=function(e){var t=this;return function(n){var a=$.a.map(n,function(e){return t.uiSegmentSrv.newSegment({value:e.text,expandable:e.expandable})});if(e.addTemplateVars)for(var r=0,i=t.templateSrv.variables;r<i.length;r++){var o=i[r],s=void 0;s="$"+o.name,e.templateQuoter&&!1===o.multi&&(s=e.templateQuoter(s)),a.unshift(t.uiSegmentSrv.newSegment({type:"template",value:s,expandable:!0}))}return e.addNone&&a.unshift(t.uiSegmentSrv.newSegment({type:"template",value:"none",expandable:!0})),a}},t.prototype.findAggregateIndex=function(e){return $.a.findIndex(e,function(e){return"aggregate"===e.def.type||"percentile"===e.def.type})},t.prototype.findWindowIndex=function(e){return $.a.findIndex(e,function(e){return"window"===e.def.type||"moving_window"===e.def.type})},t.prototype.addSelectPart=function(e,t,n){var a=t.value;n&&n.type&&(a=n.type);var r=wa.create({type:a});n&&(r.params[0]=n.value);var i=!1;switch(a){case"column":var o=$.a.map(e,function(e){return wa.create({type:e.def.type,params:$.a.clone(e.params)})});this.selectParts.push(o);break;case"percentile":case"aggregate":0===this.target.group.length&&this.addGroup("time","$__interval");var s=this.findAggregateIndex(e);-1!==s?e[s]=r:e.splice(1,0,r),$.a.find(e,function(e){return"alias"===e.def.type})||(i=!0);break;case"moving_window":case"window":var l=this.findWindowIndex(e);if(-1!==l)e[l]=r;else{var c=this.findAggregateIndex(e);-1!==c?e.splice(c+1,0,r):e.splice(1,0,r)}$.a.find(e,function(e){return"alias"===e.def.type})||(i=!0);break;case"alias":i=!0}i&&(r=wa.create({type:"alias",params:[e[0].params[0].replace(/"/g,"")]}),"alias"===e[e.length-1].def.type?e[e.length-1]=r:e.push(r)),this.updatePersistedParts(),this.panelCtrl.refresh()},t.prototype.removeSelectPart=function(e,t){if("column"===t.def.type){if(this.selectParts.length>1){var n=$.a.indexOf(this.selectParts,e);this.selectParts.splice(n,1)}}else{var a=$.a.indexOf(e,t);e.splice(a,1)}this.updatePersistedParts()},t.prototype.handleSelectPartEvent=function(e,t,n){switch(n.name){case"get-param-options":switch(t.def.type){case"column":return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("value")).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this))}case"part-param-changed":this.updatePersistedParts(),this.panelCtrl.refresh();break;case"action":this.removeSelectPart(e,t),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.handleGroupPartEvent=function(e,t,n){switch(n.name){case"get-param-options":return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery()).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this));case"part-param-changed":this.updatePersistedParts(),this.panelCtrl.refresh();break;case"action":this.removeGroup(e,t),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.addGroup=function(e,t){var n=[t];"time"===e&&(n=["$__interval","none"]);var a=wa.create({type:e,params:n});"time"===e?this.groupParts.splice(0,0,a):this.groupParts.push(a);for(var r=0,i=this.selectParts;r<i.length;r++){var o=i[r];if(!o.some(function(e){return"aggregate"===e.def.type})){var s=wa.create({type:"aggregate",params:["avg"]});if(o.splice(1,0,s),!o.some(function(e){return"alias"===e.def.type})){var l=wa.create({type:"alias",params:[o[0].part.params[0]]});o.push(l)}}}this.updatePersistedParts()},t.prototype.removeGroup=function(e,t){"time"===e.def.type&&(this.selectParts=$.a.map(this.selectParts,function(e){return $.a.filter(e,function(e){return"aggregate"!==e.def.type&&"percentile"!==e.def.type})})),this.groupParts.splice(t,1),this.updatePersistedParts()},t.prototype.handleWherePartEvent=function(e,t,n,a){var r=this;switch(n.name){case"get-param-options":switch(n.param.name){case"left":return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery()).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this));case"right":return["int","bigint","double","datetime"].indexOf(t.datatype)>-1?this.$q.when([]):this.datasource.metricFindQuery(this.metaBuilder.buildValueQuery(t.params[0])).then(this.transformToSegments({addTemplateVars:!0,templateQuoter:function(e){return r.queryModel.quoteLiteral(e)}})).catch(this.handleQueryError.bind(this));case"op":return this.$q.when(this.uiSegmentSrv.newOperators(this.metaBuilder.getOperators(t.datatype)));default:return this.$q.when([])}case"part-param-changed":this.updatePersistedParts(),this.datasource.metricFindQuery(this.metaBuilder.buildDatatypeQuery(t.params[0])).then(function(e){1===e.length&&(t.datatype=e[0].text)}),this.panelCtrl.refresh();break;case"action":e.splice(a,1),this.updatePersistedParts(),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.getWhereOptions=function(){var e=[];return this.queryModel.hasUnixEpochTimecolumn()?e.push(this.uiSegmentSrv.newSegment({type:"macro",value:"$__unixEpochFilter"})):e.push(this.uiSegmentSrv.newSegment({type:"macro",value:"$__timeFilter"})),e.push(this.uiSegmentSrv.newSegment({type:"expression",value:"Expression"})),this.$q.when(e)},t.prototype.addWhereAction=function(e,t){switch(this.whereAdd.type){case"macro":var n=wa.create({type:"macro",name:this.whereAdd.value,params:[]});this.whereParts.length>=1&&"macro"===this.whereParts[0].def.type?this.whereParts[0]=n:this.whereParts.splice(0,0,n);break;default:this.whereParts.push(wa.create({type:"expression",params:["value","=","value"]}))}this.updatePersistedParts(),this.resetPlusButton(this.whereAdd),this.panelCtrl.refresh()},t.prototype.getGroupOptions=function(){var e=this;return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("group")).then(function(t){var n=[];e.queryModel.hasTimeGroup()||n.push(e.uiSegmentSrv.newSegment({type:"time",value:"time($__interval,none)"}));for(var a=0,r=t;a<r.length;a++){var i=r[a];n.push(e.uiSegmentSrv.newSegment({type:"column",value:i.text}))}return n}).catch(this.handleQueryError.bind(this))},t.prototype.addGroupAction=function(){this.groupAdd.value,this.addGroup(this.groupAdd.type,this.groupAdd.value),this.resetPlusButton(this.groupAdd),this.panelCtrl.refresh()},t.prototype.handleQueryError=function(e){return this.error=e.message||"Failed to issue metric query",[]},t.templateUrl="partials/query.editor.html",t}(W.a),ka=function(){function e(){}return e.templateUrl="partials/config.html",e}(),Ca="SELECT\n    UNIX_TIMESTAMP(<time_column>) as time_sec,\n    <text_column> as text,\n    <tags_column> as tags\n  FROM <table name>\n  WHERE $__timeFilter(time_column)\n  ORDER BY <time_column> ASC\n  LIMIT 100\n  ",Ea=function(){function e(){this.annotation.rawQuery=this.annotation.rawQuery||Ca}return e.templateUrl="partials/annotations.editor.html",e}(),Ta=function(){function e(e){this.$q=e}return e.prototype.processQueryResult=function(e){var t=[];if(!e.data.results)return{data:t};for(var n in e.data.results){var a=e.data.results[n];if(a.series)for(var r=0,i=a.series;r<i.length;r++){var o=i[r];t.push({target:o.name,datapoints:o.points,refId:a.refId,meta:a.meta})}if(a.tables)for(var s=0,l=a.tables;s<l.length;s++){var c=l[s];c.type="table",c.refId=a.refId,c.meta=a.meta,t.push(c)}}return{data:t}},e.prototype.parseMetricFindQueryResult=function(e,t){if(!t||0===t.data.length||0===t.data.results[e].meta.rowCount)return[];var n=t.data.results[e].tables[0].columns,a=t.data.results[e].tables[0].rows,r=this.findColIndex(n,"__text"),i=this.findColIndex(n,"__value");return 2===n.length&&-1!==r&&-1!==i?this.transformToKeyValueList(a,r,i):this.transformToSimpleList(a)},e.prototype.transformToKeyValueList=function(e,t,n){for(var a=[],r=0;r<e.length;r++)this.containsKey(a,e[r][t])||a.push({text:e[r][t],value:e[r][n]});return a},e.prototype.transformToSimpleList=function(e){for(var t=[],n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var r=e[n][a];-1===t.indexOf(r)&&t.push(r)}return $.a.map(t,function(e){return{text:e}})},e.prototype.findColIndex=function(e,t){for(var n=0;n<e.length;n++)if(e[n].text===t)return n;return-1},e.prototype.containsKey=function(e,t){for(var n=0;n<e.length;n++)if(e[n].text===t)return!0;return!1},e.prototype.transformAnnotationResponse=function(e,t){for(var n=t.data.results[e.annotation.name].tables[0],a=-1,r=-1,i=-1,o=0;o<n.columns.length;o++)"time"===n.columns[o].text?a=o:"text"===n.columns[o].text?r=o:"tags"===n.columns[o].text&&(i=o);if(-1===a)return this.$q.reject({message:"Missing mandatory time column in annotation query."});var s=[];for(o=0;o<n.rows.length;o++){var l=n.rows[o];s.push({annotation:e.annotation,time:Math.floor(l[a]),title:l[-1],text:l[r],tags:l[i]?l[i].trim().split(/\s*,\s*/):[]})}return s},e}(),Ma=function(){function e(e,t,n){this.target=e,this.templateSrv=t,this.scopedVars=n,e.format=e.format||"time_series",e.timeColumn=e.timeColumn||"time",e.metricColumn=e.metricColumn||"none",e.group=e.group||[],e.where=e.where||[{type:"macro",name:"$__timeFilter",params:[]}],e.select=e.select||[[{type:"column",params:["value"]}]],"rawQuery"in this.target||(e.rawQuery="rawSql"in e),this.interpolateQueryStr=this.interpolateQueryStr.bind(this)}return e.$inject=["target","templateSrv","scopedVars"],e.prototype.unquoteIdentifier=function(e){return'"'===e[0]&&'"'===e[e.length-1]?e.substring(1,e.length-1).replace(/""/g,'"'):e},e.prototype.quoteIdentifier=function(e){return'"'+String(e).replace(/"/g,'""')+'"'},e.prototype.quoteLiteral=function(e){return"'"+String(e).replace(/'/g,"''")+"'"},e.prototype.escapeLiteral=function(e){return String(e).replace(/'/g,"''")},e.prototype.hasTimeGroup=function(){return $.a.find(this.target.group,function(e){return"time"===e.type})},e.prototype.hasMetricColumn=function(){return"none"!==this.target.metricColumn},e.prototype.interpolateQueryStr=function(e,t,n){return t.multi||t.includeAll?"string"==typeof e?this.quoteLiteral(e):$.a.map(e,this.quoteLiteral).join(","):this.escapeLiteral(e)},e.prototype.render=function(e){var t=this.target;return this.target.rawQuery||"table"in this.target?(t.rawQuery||(t.rawSql=this.buildQuery()),e?this.templateSrv.replace(t.rawSql,this.scopedVars,this.interpolateQueryStr):t.rawSql):""},e.prototype.hasUnixEpochTimecolumn=function(){return["int4","int8","float4","float8","numeric"].indexOf(this.target.timeColumnType)>-1},e.prototype.buildTimeColumn=function(e){void 0===e&&(e=!0);var t,n=this.hasTimeGroup(),a="$__timeGroup";if(n){var r=void 0;r=n.params.length>1&&"none"!==n.params[1]?n.params.join(","):n.params[0],this.hasUnixEpochTimecolumn()&&(a="$__unixEpochGroup"),e&&(a+="Alias"),t=a+"("+this.target.timeColumn+","+r+")"}else t=this.target.timeColumn,e&&(t+=' AS "time"');return t},e.prototype.buildMetricColumn=function(){return this.hasMetricColumn()?this.target.metricColumn+" AS metric":""},e.prototype.buildValueColumns=function(){for(var e="",t=0,n=this.target.select;t<n.length;t++){var a=n[t];e+=",\n  "+this.buildValueColumn(a)}return e},e.prototype.buildValueColumn=function(e){var t="";t=$.a.find(e,function(e){return"column"===e.type}).params[0];var n=$.a.find(e,function(e){return"aggregate"===e.type||"percentile"===e.type}),a=$.a.find(e,function(e){return"window"===e.type||"moving_window"===e.type});if(n){var r=n.params[0];switch(n.type){case"aggregate":t="first"===r||"last"===r?r+"("+t+","+this.target.timeColumn+")":r+"("+t+")";break;case"percentile":t=r+"("+n.params[1]+") WITHIN GROUP (ORDER BY "+t+")"}}if(a){var i=[];this.hasMetricColumn()&&i.push("PARTITION BY "+this.target.metricColumn),i.push("ORDER BY "+this.buildTimeColumn(!1));var o=i.join(" "),s=void 0,l=void 0;switch(a.type){case"window":switch(a.params[0]){case"delta":t=(s=t)+" - "+(l="lag("+s+") OVER ("+o+")");break;case"increase":t="(CASE WHEN "+(s=t)+" >= "+(l="lag("+s+") OVER ("+o+")")+" THEN "+s+" - "+l,t+=" WHEN "+l+" IS NULL THEN NULL ELSE "+s+" END)";break;case"rate":var c=this.target.timeColumn;n&&(c="min("+c+")"),t="(CASE WHEN "+(s=t)+" >= "+(l="lag("+s+") OVER ("+o+")")+" THEN "+s+" - "+l,t+=" WHEN "+l+" IS NULL THEN NULL ELSE "+s+" END)",t+="/extract(epoch from "+c+" - lag("+c+") OVER ("+o+"))";break;default:t=a.params[0]+"("+t+") OVER ("+o+")"}break;case"moving_window":t=a.params[0]+"("+t+") OVER ("+o+" ROWS "+a.params[1]+" PRECEDING)"}}var u=$.a.find(e,function(e){return"alias"===e.type});return u&&(t+=" AS "+this.quoteIdentifier(u.params[0])),t},e.prototype.buildWhereClause=function(){var e=this,t="",n=$.a.map(this.target.where,function(t,n){switch(t.type){case"macro":return t.name+"("+e.target.timeColumn+")";case"expression":return t.params.join(" ")}});return n.length>0&&(t="\nWHERE\n  "+n.join(" AND\n  ")),t},e.prototype.buildGroupClause=function(){for(var e="",t="",n=0;n<this.target.group.length;n++){var a=this.target.group[n];n>0&&(t+=", "),"time"===a.type?t+="1":t+=a.params[0]}return t.length&&(e="\nGROUP BY "+t,this.hasMetricColumn()&&(e+=",2")),e},e.prototype.buildQuery=function(){var e="SELECT";return e+="\n  "+this.buildTimeColumn(),this.hasMetricColumn()&&(e+=",\n  "+this.buildMetricColumn()),e+=this.buildValueColumns(),e+="\nFROM "+this.target.table,e+=this.buildWhereClause(),e+=this.buildGroupClause(),e+="\nORDER BY 1",this.hasMetricColumn()&&(e+=",2"),e},e}(),_a=function(){function e(e,t,n,a,r){var i=this;this.backendSrv=t,this.$q=n,this.templateSrv=a,this.timeSrv=r,this.interpolateVariable=function(e,t){return"string"==typeof e?t.multi||t.includeAll?i.queryModel.quoteLiteral(e):e:"number"==typeof e?e:$.a.map(e,function(e){return i.queryModel.quoteLiteral(e)}).join(",")},this.name=e.name,this.id=e.id,this.jsonData=e.jsonData,this.responseParser=new Ta(this.$q),this.queryModel=new Ma({}),this.interval=(e.jsonData||{}).timeInterval}return e.$inject=["instanceSettings","backendSrv","$q","templateSrv","timeSrv"],e.prototype.query=function(e){var t=this,n=$.a.filter(e.targets,function(e){return!0!==e.hide}).map(function(n){var a=new Ma(n,t.templateSrv,e.scopedVars);return{refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.id,rawSql:a.render(t.interpolateVariable),format:n.format}});return 0===n.length?this.$q.when({data:[]}):this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:n}}).then(this.responseParser.processQueryResult)},e.prototype.annotationQuery=function(e){var t=this;if(!e.annotation.rawQuery)return this.$q.reject({message:"Query missing in annotation definition"});var n={refId:e.annotation.name,datasourceId:this.id,rawSql:this.templateSrv.replace(e.annotation.rawQuery,e.scopedVars,this.interpolateVariable),format:"table"};return this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:[n]}}).then(function(n){return t.responseParser.transformAnnotationResponse(e,n)})},e.prototype.metricFindQuery=function(e,t){var n=this,a="tempvar";t&&t.variable&&t.variable.name&&(a=t.variable.name);var r={refId:a,datasourceId:this.id,rawSql:this.templateSrv.replace(e,{},this.interpolateVariable),format:"table"},i=this.timeSrv.timeRange(),o={queries:[r],from:i.from.valueOf().toString(),to:i.to.valueOf().toString()};return this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:o}).then(function(e){return n.responseParser.parseMetricFindQueryResult(a,e)})},e.prototype.getVersion=function(){return this.metricFindQuery("SELECT current_setting('server_version_num')::int/100",{})},e.prototype.getTimescaleDBVersion=function(){return this.metricFindQuery("SELECT extversion FROM pg_extension WHERE extname = 'timescaledb'",{})},e.prototype.testDatasource=function(){return this.metricFindQuery("SELECT 1",{}).then(function(e){return{status:"success",message:"Database Connection OK"}}).catch(function(e){return console.log(e),e.data&&e.data.message?{status:"error",message:e.data.message}:{status:"error",message:e.status}})},e}(),Aa=function(){function e(e,t){this.target=e,this.queryModel=t}return e.prototype.getOperators=function(e){switch(e){case"float4":case"float8":return["=","!=","<","<=",">",">="];case"text":case"varchar":case"char":return["=","!=","<","<=",">",">=","IN","NOT IN","LIKE","NOT LIKE","~","~*","!~","!~*"];default:return["=","!=","<","<=",">",">=","IN","NOT IN"]}},e.prototype.quoteIdentAsLiteral=function(e){return this.queryModel.quoteLiteral(this.queryModel.unquoteIdentifier(e))},e.prototype.findMetricTable=function(){var e="\nSELECT\n\tquote_ident(table_name) as table_name,\n\t( SELECT\n\t    quote_ident(column_name) as column_name\n\t  FROM information_schema.columns c\n    WHERE\n      c.table_schema = t.table_schema AND\n      c.table_name = t.table_name AND\n      udt_name IN ('timestamptz','timestamp')\n    ORDER BY ordinal_position LIMIT 1\n  ) AS time_column,\n  ( SELECT\n      quote_ident(column_name) AS column_name\n    FROM information_schema.columns c\n    WHERE\n      c.table_schema = t.table_schema AND\n      c.table_name = t.table_name AND\n      udt_name='float8'\n    ORDER BY ordinal_position LIMIT 1\n  ) AS value_column\nFROM information_schema.tables t\nWHERE ";return e+=this.buildSchemaConstraint(),e+=" AND\n  EXISTS\n  ( SELECT 1\n    FROM information_schema.columns c\n    WHERE\n      c.table_schema = t.table_schema AND\n      c.table_name = t.table_name AND\n      udt_name IN ('timestamptz','timestamp')\n  ) AND\n  EXISTS\n  ( SELECT 1\n    FROM information_schema.columns c\n    WHERE\n      c.table_schema = t.table_schema AND\n      c.table_name = t.table_name AND\n      udt_name='float8'\n  )\nLIMIT 1\n;"},e.prototype.buildSchemaConstraint=function(){return"\ntable_schema IN (\n  SELECT\n    CASE WHEN trim(s[i]) = '\"$user\"' THEN user ELSE trim(s[i]) END\n  FROM\n    generate_series(\n      array_lower(string_to_array(current_setting('search_path'),','),1),\n      array_upper(string_to_array(current_setting('search_path'),','),1)\n    ) as i,\n    string_to_array(current_setting('search_path'),',') s\n)"},e.prototype.buildTableConstraint=function(e){var t="";if(e.includes(".")){var n=e.split(".");return t="table_schema = "+this.quoteIdentAsLiteral(n[0]),t+=" AND table_name = "+this.quoteIdentAsLiteral(n[1])}return t=this.buildSchemaConstraint(),t+=" AND table_name = "+this.quoteIdentAsLiteral(e)},e.prototype.buildTableQuery=function(){var e="SELECT quote_ident(table_name) FROM information_schema.tables WHERE ";return e+=this.buildSchemaConstraint(),e+=" ORDER BY table_name"},e.prototype.buildColumnQuery=function(e){var t="SELECT quote_ident(column_name) FROM information_schema.columns WHERE ";switch(t+=this.buildTableConstraint(this.target.table),e){case"time":t+=" AND data_type IN ('timestamp without time zone','timestamp with time zone','bigint','integer','double precision','real')";break;case"metric":t+=" AND data_type IN ('text','character','character varying')";break;case"value":t+=" AND data_type IN ('bigint','integer','double precision','real')",t+=" AND column_name <> "+this.quoteIdentAsLiteral(this.target.timeColumn);break;case"group":t+=" AND data_type IN ('text','character','character varying')"}return t+=" ORDER BY column_name"},e.prototype.buildValueQuery=function(e){var t="SELECT DISTINCT quote_literal("+e+")";return t+=" FROM "+this.target.table,t+=" WHERE $__timeFilter("+this.target.timeColumn+")",t+=" AND "+e+" IS NOT NULL",t+=" ORDER BY 1 LIMIT 100"},e.prototype.buildDatatypeQuery=function(e){var t="SELECT udt_name FROM information_schema.columns WHERE ";return t+=this.buildTableConstraint(this.target.table),t+=" AND column_name = "+this.quoteIdentAsLiteral(e)},e.prototype.buildAggregateQuery=function(){var e="SELECT DISTINCT proname FROM pg_aggregate ";return e+="INNER JOIN pg_proc ON pg_aggregate.aggfnoid = pg_proc.oid ",e+="INNER JOIN pg_type ON pg_type.oid=pg_proc.prorettype ",e+="WHERE pronargs=1 AND typname IN ('float8') AND aggkind='n' ORDER BY 1"},e}(),Da=[];function Na(e){Da[e.type]=new ga(e)}Na({type:"column",style:"label",params:[{type:"column",dynamicLookup:!0}],defaultParams:["value"]}),Na({type:"expression",style:"expression",label:"Expr:",params:[{name:"left",type:"string",dynamicLookup:!0},{name:"op",type:"string",dynamicLookup:!0},{name:"right",type:"string",dynamicLookup:!0}],defaultParams:["value","=","value"]}),Na({type:"macro",style:"label",label:"Macro:",params:[],defaultParams:[]}),Na({type:"aggregate",style:"label",params:[{name:"name",type:"string",options:["avg","count","min","max","sum","stddev","variance"]}],defaultParams:["avg"]}),Na({type:"percentile",label:"Aggregate:",style:"label",params:[{name:"name",type:"string",options:["percentile_cont","percentile_disc"]},{name:"fraction",type:"number",options:["0.5","0.75","0.9","0.95","0.99"]}],defaultParams:["percentile_cont","0.95"]}),Na({type:"alias",style:"label",params:[{name:"name",type:"string",quote:"double"}],defaultParams:["alias"]}),Na({type:"time",style:"function",label:"time",params:[{name:"interval",type:"interval",options:["$__interval","1s","10s","1m","5m","10m","15m","1h"]},{name:"fill",type:"string",options:["none","NULL","previous","0"]}],defaultParams:["$__interval","none"]}),Na({type:"window",style:"label",params:[{name:"function",type:"string",options:["delta","increase","rate","sum"]}],defaultParams:["increase"]}),Na({type:"moving_window",style:"label",label:"Moving Window:",params:[{name:"function",type:"string",options:["avg"]},{name:"window_size",type:"number",options:["3","5","7","10","20"]}],defaultParams:["avg","5"]});var Pa={create:function(e){var t=Da[e.type];return t?new va(e,t):null}},Oa="SELECT\n  $__time(time_column),\n  value1\nFROM\n  metric_table\nWHERE\n  $__timeFilter(time_column)\n",Ia=function(e){function t(t,n,a,r,i){var o=e.call(this,t,n)||this;return o.templateSrv=a,o.$q=r,o.uiSegmentSrv=i,o.target=o.target,o.queryModel=new Ma(o.target,a,o.panel.scopedVars),o.metaBuilder=new Aa(o.target,o.queryModel),o.updateProjection(),o.formats=[{text:"Time series",value:"time_series"},{text:"Table",value:"table"}],o.target.rawSql||("table"===o.panelCtrl.panel.type?(o.target.format="table",o.target.rawSql="SELECT 1",o.target.rawQuery=!0):(o.target.rawSql=Oa,o.datasource.metricFindQuery(o.metaBuilder.findMetricTable()).then(function(e){if(e.length>0){o.target.table=e[0].text;var t=o.uiSegmentSrv.newSegment(o.target.table);o.tableSegment.html=t.html,o.tableSegment.value=t.value,o.target.timeColumn=e[1].text,t=o.uiSegmentSrv.newSegment(o.target.timeColumn),o.timeColumnSegment.html=t.html,o.timeColumnSegment.value=t.value,o.target.timeColumnType="timestamp",o.target.select=[[{type:"column",params:[e[2].text]}]],o.updateProjection(),o.panelCtrl.refresh()}}))),o.target.table?o.tableSegment=i.newSegment(o.target.table):o.tableSegment=i.newSegment({value:"select table",fake:!0}),o.timeColumnSegment=i.newSegment(o.target.timeColumn),o.metricColumnSegment=i.newSegment(o.target.metricColumn),o.buildSelectMenu(),o.whereAdd=o.uiSegmentSrv.newPlusButton(),o.groupAdd=o.uiSegmentSrv.newPlusButton(),o.panelCtrl.events.on("data-received",o.onDataReceived.bind(o),t),o.panelCtrl.events.on("data-error",o.onDataError.bind(o),t),o}return t.$inject=["$scope","$injector","templateSrv","$q","uiSegmentSrv"],Q.c(t,e),t.prototype.updateProjection=function(){this.selectParts=$.a.map(this.target.select,function(e){return $.a.map(e,Pa.create).filter(function(e){return e})}),this.whereParts=$.a.map(this.target.where,Pa.create).filter(function(e){return e}),this.groupParts=$.a.map(this.target.group,Pa.create).filter(function(e){return e})},t.prototype.updatePersistedParts=function(){this.target.select=$.a.map(this.selectParts,function(e){return $.a.map(e,function(e){return{type:e.def.type,datatype:e.datatype,params:e.params}})}),this.target.where=$.a.map(this.whereParts,function(e){return{type:e.def.type,datatype:e.datatype,name:e.name,params:e.params}}),this.target.group=$.a.map(this.groupParts,function(e){return{type:e.def.type,datatype:e.datatype,params:e.params}})},t.prototype.buildSelectMenu=function(){this.selectMenu=[];var e={text:"Aggregate Functions",value:"aggregate",submenu:[{text:"Average",value:"avg"},{text:"Count",value:"count"},{text:"Maximum",value:"max"},{text:"Minimum",value:"min"},{text:"Sum",value:"sum"},{text:"Standard deviation",value:"stddev"},{text:"Variance",value:"variance"}]};if(!0===this.datasource.jsonData.timescaledb&&(e.submenu.push({text:"First",value:"first"}),e.submenu.push({text:"Last",value:"last"})),this.selectMenu.push(e),this.datasource.jsonData.postgresVersion>=904){this.selectMenu.push({text:"Ordered-Set Aggregate Functions",value:"percentile",submenu:[{text:"Percentile (continuous)",value:"percentile_cont"},{text:"Percentile (discrete)",value:"percentile_disc"}]})}this.selectMenu.push({text:"Window Functions",value:"window",submenu:[{text:"Delta",value:"delta"},{text:"Increase",value:"increase"},{text:"Rate",value:"rate"},{text:"Sum",value:"sum"},{text:"Moving Average",value:"avg",type:"moving_window"}]}),this.selectMenu.push({text:"Alias",value:"alias"}),this.selectMenu.push({text:"Column",value:"column"})},t.prototype.toggleEditorMode=function(){var e=this;this.target.rawQuery?ze.b.emit("confirm-modal",{title:"Warning",text2:"Switching to query builder may overwrite your raw SQL.",icon:"fa-exclamation",yesText:"Switch",onConfirm:function(){e.target.rawQuery=!e.target.rawQuery}}):this.target.rawQuery=!this.target.rawQuery},t.prototype.resetPlusButton=function(e){var t=this.uiSegmentSrv.newPlusButton();e.html=t.html,e.value=t.value},t.prototype.getTableSegments=function(){return this.datasource.metricFindQuery(this.metaBuilder.buildTableQuery()).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this))},t.prototype.tableChanged=function(){var e=this;this.target.table=this.tableSegment.value,this.target.where=[],this.target.group=[],this.updateProjection();var t=this.uiSegmentSrv.newSegment("none");this.metricColumnSegment.html=t.html,this.metricColumnSegment.value=t.value,this.target.metricColumn="none";var n=this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("time")).then(function(t){if(t.length>0&&!$.a.find(t,function(t){return t.text===e.target.timeColumn})){var n=e.uiSegmentSrv.newSegment(t[0].text);e.timeColumnSegment.html=n.html,e.timeColumnSegment.value=n.value}return e.timeColumnChanged(!1)}),a=this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("value")).then(function(t){t.length>0&&(e.target.select=[[{type:"column",params:[t[0].text]}]],e.updateProjection())});this.$q.all([n,a]).then(function(){e.panelCtrl.refresh()})},t.prototype.getTimeColumnSegments=function(){return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("time")).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this))},t.prototype.timeColumnChanged=function(e){var t=this;return this.target.timeColumn=this.timeColumnSegment.value,this.datasource.metricFindQuery(this.metaBuilder.buildDatatypeQuery(this.target.timeColumn)).then(function(n){if(1===n.length){t.target.timeColumnType!==n[0].text&&(t.target.timeColumnType=n[0].text);var a=void 0;a=t.queryModel.hasUnixEpochTimecolumn()?Pa.create({type:"macro",name:"$__unixEpochFilter",params:[]}):Pa.create({type:"macro",name:"$__timeFilter",params:[]}),t.whereParts.length>=1&&"macro"===t.whereParts[0].def.type?t.whereParts[0]=a:t.whereParts.splice(0,0,a)}t.updatePersistedParts(),!1!==e&&t.panelCtrl.refresh()})},t.prototype.getMetricColumnSegments=function(){return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("metric")).then(this.transformToSegments({addNone:!0})).catch(this.handleQueryError.bind(this))},t.prototype.metricColumnChanged=function(){this.target.metricColumn=this.metricColumnSegment.value,this.panelCtrl.refresh()},t.prototype.onDataReceived=function(e){this.lastQueryMeta=null,this.lastQueryError=null;var t=$.a.find(e,{refId:this.target.refId});t&&(this.lastQueryMeta=t.meta)},t.prototype.onDataError=function(e){if(e.data&&e.data.results){var t=e.data.results[this.target.refId];t&&(this.lastQueryMeta=t.meta,this.lastQueryError=t.error)}},t.prototype.transformToSegments=function(e){var t=this;return function(n){var a=$.a.map(n,function(e){return t.uiSegmentSrv.newSegment({value:e.text,expandable:e.expandable})});if(e.addTemplateVars)for(var r=0,i=t.templateSrv.variables;r<i.length;r++){var o=i[r],s=void 0;s="$"+o.name,e.templateQuoter&&!1===o.multi&&(s=e.templateQuoter(s)),a.unshift(t.uiSegmentSrv.newSegment({type:"template",value:s,expandable:!0}))}return e.addNone&&a.unshift(t.uiSegmentSrv.newSegment({type:"template",value:"none",expandable:!0})),a}},t.prototype.findAggregateIndex=function(e){return $.a.findIndex(e,function(e){return"aggregate"===e.def.type||"percentile"===e.def.type})},t.prototype.findWindowIndex=function(e){return $.a.findIndex(e,function(e){return"window"===e.def.type||"moving_window"===e.def.type})},t.prototype.addSelectPart=function(e,t,n){var a=t.value;n&&n.type&&(a=n.type);var r=Pa.create({type:a});n&&(r.params[0]=n.value);var i=!1;switch(a){case"column":var o=$.a.map(e,function(e){return Pa.create({type:e.def.type,params:$.a.clone(e.params)})});this.selectParts.push(o);break;case"percentile":case"aggregate":0===this.target.group.length&&this.addGroup("time","$__interval");var s=this.findAggregateIndex(e);-1!==s?e[s]=r:e.splice(1,0,r),$.a.find(e,function(e){return"alias"===e.def.type})||(i=!0);break;case"moving_window":case"window":var l=this.findWindowIndex(e);if(-1!==l)e[l]=r;else{var c=this.findAggregateIndex(e);-1!==c?e.splice(c+1,0,r):e.splice(1,0,r)}$.a.find(e,function(e){return"alias"===e.def.type})||(i=!0);break;case"alias":i=!0}i&&(r=Pa.create({type:"alias",params:[e[0].params[0].replace(/"/g,"")]}),"alias"===e[e.length-1].def.type?e[e.length-1]=r:e.push(r)),this.updatePersistedParts(),this.panelCtrl.refresh()},t.prototype.removeSelectPart=function(e,t){if("column"===t.def.type){if(this.selectParts.length>1){var n=$.a.indexOf(this.selectParts,e);this.selectParts.splice(n,1)}}else{var a=$.a.indexOf(e,t);e.splice(a,1)}this.updatePersistedParts()},t.prototype.handleSelectPartEvent=function(e,t,n){switch(n.name){case"get-param-options":switch(t.def.type){case"aggregate":return this.datasource.metricFindQuery(this.metaBuilder.buildAggregateQuery()).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this));case"column":return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("value")).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this))}case"part-param-changed":this.updatePersistedParts(),this.panelCtrl.refresh();break;case"action":this.removeSelectPart(e,t),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.handleGroupPartEvent=function(e,t,n){switch(n.name){case"get-param-options":return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery()).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this));case"part-param-changed":this.updatePersistedParts(),this.panelCtrl.refresh();break;case"action":this.removeGroup(e,t),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.addGroup=function(e,t){var n=[t];"time"===e&&(n=["$__interval","none"]);var a=Pa.create({type:e,params:n});"time"===e?this.groupParts.splice(0,0,a):this.groupParts.push(a);for(var r=0,i=this.selectParts;r<i.length;r++){var o=i[r];if(!o.some(function(e){return"aggregate"===e.def.type})){var s=Pa.create({type:"aggregate",params:["avg"]});if(o.splice(1,0,s),!o.some(function(e){return"alias"===e.def.type})){var l=Pa.create({type:"alias",params:[o[0].part.params[0]]});o.push(l)}}}this.updatePersistedParts()},t.prototype.removeGroup=function(e,t){"time"===e.def.type&&(this.selectParts=$.a.map(this.selectParts,function(e){return $.a.filter(e,function(e){return"aggregate"!==e.def.type&&"percentile"!==e.def.type})})),this.groupParts.splice(t,1),this.updatePersistedParts()},t.prototype.handleWherePartEvent=function(e,t,n,a){var r=this;switch(n.name){case"get-param-options":switch(n.param.name){case"left":return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery()).then(this.transformToSegments({})).catch(this.handleQueryError.bind(this));case"right":return["int4","int8","float4","float8","timestamp","timestamptz"].indexOf(t.datatype)>-1?this.$q.when([]):this.datasource.metricFindQuery(this.metaBuilder.buildValueQuery(t.params[0])).then(this.transformToSegments({addTemplateVars:!0,templateQuoter:function(e){return r.queryModel.quoteLiteral(e)}})).catch(this.handleQueryError.bind(this));case"op":return this.$q.when(this.uiSegmentSrv.newOperators(this.metaBuilder.getOperators(t.datatype)));default:return this.$q.when([])}case"part-param-changed":this.updatePersistedParts(),this.datasource.metricFindQuery(this.metaBuilder.buildDatatypeQuery(t.params[0])).then(function(e){1===e.length&&(t.datatype=e[0].text)}),this.panelCtrl.refresh();break;case"action":e.splice(a,1),this.updatePersistedParts(),this.panelCtrl.refresh();break;case"get-part-actions":return this.$q.when([{text:"Remove",value:"remove-part"}])}},t.prototype.getWhereOptions=function(){var e=[];return this.queryModel.hasUnixEpochTimecolumn()?e.push(this.uiSegmentSrv.newSegment({type:"macro",value:"$__unixEpochFilter"})):e.push(this.uiSegmentSrv.newSegment({type:"macro",value:"$__timeFilter"})),e.push(this.uiSegmentSrv.newSegment({type:"expression",value:"Expression"})),this.$q.when(e)},t.prototype.addWhereAction=function(e,t){switch(this.whereAdd.type){case"macro":var n=Pa.create({type:"macro",name:this.whereAdd.value,params:[]});this.whereParts.length>=1&&"macro"===this.whereParts[0].def.type?this.whereParts[0]=n:this.whereParts.splice(0,0,n);break;default:this.whereParts.push(Pa.create({type:"expression",params:["value","=","value"]}))}this.updatePersistedParts(),this.resetPlusButton(this.whereAdd),this.panelCtrl.refresh()},t.prototype.getGroupOptions=function(){var e=this;return this.datasource.metricFindQuery(this.metaBuilder.buildColumnQuery("group")).then(function(t){var n=[];e.queryModel.hasTimeGroup()||n.push(e.uiSegmentSrv.newSegment({type:"time",value:"time($__interval,none)"}));for(var a=0,r=t;a<r.length;a++){var i=r[a];n.push(e.uiSegmentSrv.newSegment({type:"column",value:i.text}))}return n}).catch(this.handleQueryError.bind(this))},t.prototype.addGroupAction=function(){this.groupAdd.value,this.addGroup(this.groupAdd.type,this.groupAdd.value),this.resetPlusButton(this.groupAdd),this.panelCtrl.refresh()},t.prototype.handleQueryError=function(e){return this.error=e.message||"Failed to issue metric query",[]},t.templateUrl="partials/query.editor.html",t}(W.a),$a=function(){function e(e,t){this.postgresVersions=[{name:"9.3",value:903},{name:"9.4",value:904},{name:"9.5",value:905},{name:"9.6",value:906},{name:"10",value:1e3}],this.datasourceSrv=t,this.current.jsonData.sslmode=this.current.jsonData.sslmode||"verify-full",this.current.jsonData.postgresVersion=this.current.jsonData.postgresVersion||903,this.showTimescaleDBHelp=!1,this.autoDetectFeatures()}return e.$inject=["$scope","datasourceSrv"],e.prototype.autoDetectFeatures=function(){var e=this;this.current.id&&this.datasourceSrv.loadDatasource(this.current.name).then(function(t){return t.getVersion().then(function(n){(n=Number(n[0].text))>=906&&t.getTimescaleDBVersion().then(function(t){1===t.length&&(e.current.jsonData.timescaledb=!0)});var a=Math.trunc(n/100),r=n%100,i=String(a);n<1e3&&(i=String(a)+"."+String(r)),$.a.find(e.postgresVersions,function(e){return e.value===n})||e.postgresVersions.push({name:i,value:n}),e.current.jsonData.postgresVersion=n})})},e.prototype.toggleTimescaleDBHelp=function(){this.showTimescaleDBHelp=!this.showTimescaleDBHelp},e.templateUrl="partials/config.html",e}(),Fa="SELECT\n  extract(epoch from time_column) AS time,\n  text_column as text,\n  tags_column as tags\nFROM\n  metric_table\nWHERE\n  $__timeFilter(time_column)\n",qa=function(){function e(){this.annotation.rawQuery=this.annotation.rawQuery||Fa}return e.templateUrl="partials/annotations.editor.html",e}(),Ra=function(){function e(e,t,n){this.datasource=e,this.query=t,this.range=n.timeRange()}return e.prototype.process=function(){var e=this.query.match(/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/);if(e)return e[1]?this.labelValuesQuery(e[2],e[1]):this.labelValuesQuery(e[2],null);var t=this.query.match(/^metrics\((.+)\)\s*$/);if(t)return this.metricNameQuery(t[1]);var n=this.query.match(/^query_result\((.+)\)\s*$/);return n?this.queryResultQuery(n[1]):this.metricNameAndLabelsQuery(this.query)},e.prototype.labelValuesQuery=function(e,t){var n;if(t){var a=this.datasource.getPrometheusTime(this.range.from,!1),r=this.datasource.getPrometheusTime(this.range.to,!0);return n="/api/v1/series?match[]="+encodeURIComponent(t)+"&start="+a+"&end="+r,this.datasource.metadataRequest(n).then(function(t){var n=$.a.map(t.data.data,function(t){return t[e]||""}).filter(function(e){return""!==e});return $.a.uniq(n).map(function(e){return{text:e,expandable:!0}})})}return n="/api/v1/label/"+e+"/values",this.datasource.metadataRequest(n).then(function(e){return $.a.map(e.data.data,function(e){return{text:e}})})},e.prototype.metricNameQuery=function(e){return this.datasource.metadataRequest("/api/v1/label/__name__/values").then(function(t){return $.a.chain(t.data.data).filter(function(t){return new RegExp(e).test(t)}).map(function(e){return{text:e,expandable:!0}}).value()})},e.prototype.queryResultQuery=function(e){var t=this.datasource.getPrometheusTime(this.range.to,!0);return this.datasource.performInstantQuery({expr:e},t).then(function(e){return $.a.map(e.data.data.result,function(e){var t=e.metric.__name__||"";return delete e.metric.__name__,t+="{"+$.a.map(e.metric,function(e,t){return t+'="'+e+'"'}).join(",")+"}",{text:t+=" "+e.value[1]+" "+1e3*e.value[0],expandable:!0}})})},e.prototype.metricNameAndLabelsQuery=function(e){var t=this.datasource.getPrometheusTime(this.range.from,!1),n=this.datasource.getPrometheusTime(this.range.to,!0),a="/api/v1/series?match[]="+encodeURIComponent(e)+"&start="+t+"&end="+n,r=this;return this.datasource.metadataRequest(a).then(function(e){return $.a.map(e.data.data,function(e){return{text:r.datasource.getOriginalMetricName(e),expandable:!0}})})},e}(),La=function(){function e(e){this.templateSrv=e}return e.prototype.transform=function(e,t){var n=e.data.data.result;if("table"===t.format)return[this.transformMetricDataToTable(n,t.responseListLength,t.refId,t.valueWithRefId)];if(n&&"heatmap"===t.format){var a=[];n.sort(ja);for(var r=0,i=n;r<i.length;r++){var o=i[r];a.push(this.transformMetricData(o,t,t.start,t.end))}return a=this.transformToHistogramOverTime(a)}if(n){a=[];for(var s=0,l=n;s<l.length;s++){o=l[s];"matrix"===e.data.data.resultType?a.push(this.transformMetricData(o,t,t.start,t.end)):"vector"===e.data.data.resultType&&a.push(this.transformInstantMetricData(o,t))}return a}return[]},e.prototype.transformMetricData=function(e,t,n,a){var r,i=[];r=this.createMetricLabel(e.metric,t);var o=1e3*parseInt(t.step,10),s=1e3*n;if(void 0===e.values)throw new Error("Prometheus heatmap error: data should be a time series");for(var l=0,c=e.values;l<c.length;l++){var u=c[l],d=parseFloat(u[1]);$.a.isNaN(d)&&(d=null);for(var p=1e3*parseFloat(u[0]),h=s;h<p;h+=o)i.push([null,h]);s=p+o,i.push([d,p])}var f=1e3*a;for(h=s;h<=f;h+=o)i.push([null,h]);return{datapoints:i,query:t.query,target:r}},e.prototype.transformMetricDataToTable=function(e,t,n,a){var r,i,o=new pe.a,s={};if(!e||0===e.length)return o;$.a.each(e,function(e){for(var t in e.metric)s.hasOwnProperty(t)||(s[t]=1)});var l=$.a.keys(s).sort();o.columns.push({text:"Time",type:"time"}),$.a.each(l,function(e,t){s[e]=t+1,o.columns.push({text:e,filterable:!e.startsWith("__")})});var c=t>1||a?"Value #"+n:"Value";return o.columns.push({text:c}),$.a.each(e,function(e){if(e.value&&(e.values=[e.value]),e.values)for(r=0;r<e.values.length;r++){var t=e.values[r],n=[1e3*t[0]];if(e.metric)for(i=0;i<l.length;i++){var a=l[i];e.metric.hasOwnProperty(a)?n.push(e.metric[a]):n.push("")}n.push(parseFloat(t[1])),o.rows.push(n)}}),o},e.prototype.transformInstantMetricData=function(e,t){var n,a=[];return n=this.createMetricLabel(e.metric,t),a.push([parseFloat(e.value[1]),1e3*e.value[0]]),{target:n,datapoints:a,labels:e.metric}},e.prototype.createMetricLabel=function(e,t){var n="";return(n=$.a.isUndefined(t)||$.a.isEmpty(t.legendFormat)?this.getOriginalMetricName(e):this.renderTemplate(this.templateSrv.replace(t.legendFormat),e))&&"{}"!==n||(n=t.query),n},e.prototype.renderTemplate=function(e,t){return e.replace(/\{\{\s*(.+?)\s*\}\}/g,function(e,n){return t[n]?t[n]:n})},e.prototype.getOriginalMetricName=function(e){var t=e.__name__||"";return delete e.__name__,t+"{"+$.a.map($.a.toPairs(e),function(e){return e[0]+'="'+e[1]+'"'}).join(",")+"}"},e.prototype.transformToHistogramOverTime=function(e){for(var t=e.length-1;t>0;t--){var n=e[t].datapoints,a=e[t-1].datapoints;if(!n||!a)throw new Error("Prometheus heatmap transform error: data should be a time series");for(var r=0;r<n.length;r++){var i=a[r]||[0];n[r][0]-=i[0]}}return e},e}();function ja(e,t){var n,a;try{n=Ua(e.metric.le),a=Ua(t.metric.le)}catch(e){return console.log(e),0}return n>a?1:n<a?-1:0}function Ua(e){return"+Inf"===e?1/0:Number(e)}var Va=[{label:"1m",sortText:"00:01:00"},{label:"5m",sortText:"00:05:00"},{label:"10m",sortText:"00:10:00"},{label:"30m",sortText:"00:30:00"},{label:"1h",sortText:"01:00:00"},{label:"1d",sortText:"24:00:00"}],Ba=[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate φ-quantile (0 ≤ φ ≤ 1) over dimensions"}].concat([{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(φ float, b instant-vector)",documentation:"Calculates the φ-quantile (0 ≤ φ ≤ 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The φ-quantile (0 ≤ φ ≤ 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}]),Qa={comment:{pattern:/(^|[^\n])#.*/,lookbehind:!0},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=})/,inside:{"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name"},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp("\\b(?:"+Ba.map(function(e){return e.label}).join("|")+")(?=\\s*\\()","i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp("/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:"+["by","group_left","group_right","ignoring","on","offset","without"].join("|")+")\\b","i"),punctuation:/[{};()`,.]/},za=["job","instance"],Ha=864e5,Ga=function(e){return{label:e}},Wa=function(e){return e.kind="function",e};var Ya=function(e){function t(t,n){var a=e.call(this)||this;return a.cleanText=function(e){return e.replace(/[{}[\]="(),!~+\-*/^%]/g,"").trim()},a.request=function(e){return a.datasource.metadataRequest(e)},a.start=function(){return a.startTask||(a.startTask=a.fetchMetricNames().then(function(){return[a.fetchHistogramMetrics()]})),a.startTask},a.datasource=t,a.histogramMetrics=[],a.labelKeys={},a.labelValues={},a.metrics=[],Object.assign(a,n),a}return Q.c(t,e),t.prototype.getSyntax=function(){return Qa},t.prototype.provideCompletionItems=function(e,t){var n=e.prefix,a=e.wrapperClasses,r=e.text,i=e.value,o=0===i.document.text.length,s=i.document.getTextsAtRangeAsArray(i.selection),l=1===s.length?s[0]:null,c=l?l.text[i.selection.anchorOffset]:null,u=a.length>3,d=n&&!u,p=!c||")"===c,h=""===n&&!r.match(/^[\]})\s]+$/)&&p,f=r.match(/[+\-*/^%]/);return $.a.includes(a,"context-range")?this.getRangeCompletionItems():$.a.includes(a,"context-labels")?this.getLabelCompletionItems.apply(this,arguments):$.a.includes(a,"context-aggregation")?this.getAggregationCompletionItems.apply(this,arguments):o?this.getEmptyCompletionItems(t||{}):d||h||f?this.getTermCompletionItems():{suggestions:[]}},t.prototype.getEmptyCompletionItems=function(e){var t=e.history,n=[];if(t&&t.length>0){var a=$.a.chain(t).map(function(e){return e.query.expr}).filter().uniq().take(5).map(Ga).map(function(e){return function(e,t){var n=Date.now()-Ha,a=t.filter(function(t){return t.ts>n&&t.query===e.label}),r=a.length,i=a[0],o="Queried "+r+" times in the last 24h.";return i&&(o=o+" Last queried "+X()(i.ts).fromNow()+"."),Q.a({},e,{documentation:o})}(e,t)}).value();n.push({prefixMatch:!0,skipSort:!0,label:"History",items:a})}var r=this.getTermCompletionItems();return{suggestions:n=n.concat(r.suggestions)}},t.prototype.getTermCompletionItems=function(){var e=this.metrics,t=[];return t.push({prefixMatch:!0,label:"Functions",items:Ba.map(Wa)}),e&&e.length>0&&t.push({label:"Metrics",items:e.map(Ga)}),{suggestions:t}},t.prototype.getRangeCompletionItems=function(){return{context:"context-range",suggestions:[{label:"Range vector",items:Va.slice()}]}},t.prototype.getAggregationCompletionItems=function(e){var t,n=e.value,a=[],r=n.document.getBlocks().reduce(function(e,a){var r=a.getText();return n.anchorBlock.key===a.key&&(t=n.anchorOffset+e.length),e+=r},""),i=r.lastIndexOf("(",t),o=r.lastIndexOf("(",i-1),s=r.indexOf(")",o);if(-1===o){var l=r.indexOf(")",t);s=r.indexOf(")",l+1),o=r.lastIndexOf("(",s)}var c={refresher:null,suggestions:a,context:"context-aggregation"};if(-1===o)return c;var u=r.slice(o+1,s),d=fn(u=u.replace(/\[[^\]]+\]$/,""),u.length-2).selector,p=this.labelKeys[d];return p?a.push({label:"Labels",items:p.map(Ga)}):c.refresher=this.fetchSeriesLabels(d),c},t.prototype.getLabelCompletionItems=function(e){var t,n,a,r=this,i=e.text,o=e.wrapperClasses,s=e.labelKey,l=e.value,c=null,u=[],d=l.anchorBlock.getText(),p=l.anchorOffset;try{n=(a=fn(d,p)).selector}catch(e){n="{}"}var h=n.indexOf("__name__=")>-1,f=a?a.labelKeys:[];if(i&&i.match(/^!?=~?/)||$.a.includes(o,"attr-value")){if(s&&this.labelValues[n]&&this.labelValues[n][s]){var m=this.labelValues[n][s];t="context-label-values",u.push({label:'Label values for "'+s+'"',items:m.map(Ga)})}}else{var g=this.labelKeys[n]||(h?null:za);if(g){var v=$.a.difference(g,f);v.length>0&&(t="context-labels",u.push({label:"Labels",items:v.map(Ga)}))}}return n&&!this.labelValues[n]&&(c="{}"===n?Promise.all(za.map(function(e){return r.fetchLabelValues(e)})):this.fetchSeriesLabels(n,!h)),{context:t,refresher:c,suggestions:u}},t.prototype.fetchMetricNames=function(){return Q.b(this,void 0,void 0,function(){var e,t,n,a;return Q.d(this,function(r){switch(r.label){case 0:e="/api/v1/label/__name__/values",r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this.request(e)];case 2:return[4,(t=r.sent()).data||t.json()];case 3:return n=r.sent(),this.metrics=n.data,[3,5];case 4:return a=r.sent(),console.error(a),[3,5];case 5:return[2]}})})},t.prototype.fetchHistogramMetrics=function(){return Q.b(this,void 0,void 0,function(){var e;return Q.d(this,function(t){switch(t.label){case 0:return[4,this.fetchSeriesLabels('{le!=""}',!0)];case 1:return t.sent(),(e=this.labelValues['{le!=""}'])&&e.__name__&&(this.histogramMetrics=e.__name__.slice().sort()),[2]}})})},t.prototype.fetchLabelValues=function(e){return Q.b(this,void 0,void 0,function(){var t,n,a,r,i,o,s,l;return Q.d(this,function(c){switch(c.label){case 0:a="/api/v1/label/"+e+"/values",c.label=1;case 1:return c.trys.push([1,4,,5]),[4,this.request(a)];case 2:return[4,(r=c.sent()).data||r.json()];case 3:return i=c.sent(),o=this.labelValues["{}"],s=Q.a({},o,((t={})[e]=i.data,t)),this.labelValues=Q.a({},this.labelValues,((n={})["{}"]=s,n)),[3,5];case 4:return l=c.sent(),console.error(l),[3,5];case 5:return[2]}})})},t.prototype.fetchSeriesLabels=function(e,t){return Q.b(this,void 0,void 0,function(){var n,a,r,i,o,s,l,c,u;return Q.d(this,function(d){switch(d.label){case 0:r="/api/v1/series?match[]="+e,d.label=1;case 1:return d.trys.push([1,4,,5]),[4,this.request(r)];case 2:return[4,(i=d.sent()).data||i.json()];case 3:return o=d.sent(),s=function(e,t){void 0===t&&(t=!1);var n={};return e.forEach(function(e){var a=e.__name__,r=Q.e(e,["__name__"]);t&&(n.__name__=n.__name__||[],-1===n.__name__.indexOf(a)&&n.__name__.push(a)),Object.keys(r).forEach(function(e){n[e]||(n[e]=[]),-1===n[e].indexOf(r[e])&&n[e].push(r[e])})}),{values:n,keys:Object.keys(n)}}(o.data,t),l=s.keys,c=s.values,this.labelKeys=Q.a({},this.labelKeys,((n={})[e]=l,n)),this.labelValues=Q.a({},this.labelValues,((a={})[e]=c,a)),[3,5];case 4:return u=d.sent(),console.error(u),[3,5];case 5:return[2]}})})},t}(gn.b),Ka=20;var Xa=function(){function e(e,t,n,a,r){this.$q=t,this.backendSrv=n,this.templateSrv=a,this.timeSrv=r,this.type="prometheus",this.editorSrc="app/features/prometheus/partials/query.editor.html",this.name=e.name,this.url=e.url,this.directUrl=e.directUrl,this.basicAuth=e.basicAuth,this.withCredentials=e.withCredentials,this.interval=e.jsonData.timeInterval||"15s",this.queryTimeout=e.jsonData.queryTimeout,this.httpMethod=e.jsonData.httpMethod||"GET",this.resultTransformer=new La(a),this.ruleMappings={},this.languageProvider=new Ya(this)}return e.$inject=["instanceSettings","$q","backendSrv","templateSrv","timeSrv"],e.prototype.init=function(){this.loadRules()},e.prototype._request=function(e,t,n){return"GET"===(n=$.a.defaults(n||{},{url:this.url+e,method:this.httpMethod})).method?$.a.isEmpty(t)||(n.url=n.url+"?"+$.a.map(t,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")):(n.headers={"Content-Type":"application/x-www-form-urlencoded"},n.transformRequest=function(e){return te.a.param(e)},n.data=t),(this.basicAuth||this.withCredentials)&&(n.withCredentials=!0),this.basicAuth&&(n.headers={Authorization:this.basicAuth}),this.backendSrv.datasourceRequest(n)},e.prototype.metadataRequest=function(e){return this._request(e,null,{method:"GET",silent:!0})},e.prototype.interpolateQueryExpr=function(e,t,n){return t.multi||t.includeAll?"string"==typeof e?Za(e):$.a.map(e,Za).join("|"):Ja(e)},e.prototype.targetContainsTemplate=function(e){return this.templateSrv.variableExists(e.expr)},e.prototype.query=function(e){for(var t=this,n=this.getPrometheusTime(e.range.from,!1),a=this.getPrometheusTime(e.range.to,!0),r=[],i=[],o=0,s=(e=$.a.clone(e)).targets;o<s.length;o++){var l=s[o];l.expr&&!l.hide&&(i.push(l),r.push(this.createQuery(l,e,n,a)))}if($.a.isEmpty(r))return this.$q.when({data:[]});var c=$.a.map(r,function(e){return e.instant?t.performInstantQuery(e,a):t.performTimeSeriesQuery(e,e.start,e.end)});return this.$q.all(c).then(function(e){var n=[];return $.a.each(e,function(a,o){if("error"===a.status)throw Q.a({index:o},a.error);var s={format:i[o].format,step:r[o].step,legendFormat:i[o].legendFormat,start:r[o].start,end:r[o].end,query:r[o].expr,responseListLength:e.length,refId:i[o].refId,valueWithRefId:i[o].valueWithRefId},l=t.resultTransformer.transform(a,s);n=n.concat(l)}),{data:n}})},e.prototype.createQuery=function(e,t,n,a){var r={hinting:e.hinting,instant:e.instant},i=Math.ceil(a-n),o=z.a.interval_to_seconds(t.interval),s=z.a.interval_to_seconds(this.templateSrv.replace(e.interval,t.scopedVars)||t.interval),l=e.intervalFactor||1,c=this.adjustInterval(o,s,i,l),u=Q.a({},t.scopedVars,this.getRangeScopedVars());o!==c&&(o=c,u=Object.assign({},t.scopedVars,Q.a({__interval:{text:o+"s",value:o+"s"},__interval_ms:{text:1e3*o,value:1e3*o}},this.getRangeScopedVars()))),r.step=o;var d=e.expr;d=this.templateSrv.getAdhocFilters(this.name).reduce(function(e,t){var n=t.key,a=t.operator,r=t.value;return"=~"!==a&&"!~"!==a||(r=Za(r)),dn(e,n,r,a)},d),r.expr=this.templateSrv.replace(d,u,this.interpolateQueryExpr),r.requestId=t.panelId+e.refId;var p=function(e,t,n){var a=Math.ceil(t/n)*n,r=Math.floor(e/n)*n;return{end:a,start:r}}(n,a,r.step);return r.start=p.start,r.end=p.end,r},e.prototype.adjustInterval=function(e,t,n,a){return 0!==e&&n/a/e>11e3&&(e=Math.ceil(n/a/11e3)),Math.max(e*a,t,1)},e.prototype.performTimeSeriesQuery=function(e,t,n){if(t>n)throw{message:"Invalid time range"};var a={query:e.expr,start:t,end:n,step:e.step};return this.queryTimeout&&(a.timeout=this.queryTimeout),this._request("/api/v1/query_range",a,{requestId:e.requestId})},e.prototype.performInstantQuery=function(e,t){var n={query:e.expr,time:t};return this.queryTimeout&&(n.timeout=this.queryTimeout),this._request("/api/v1/query",n,{requestId:e.requestId})},e.prototype.performSuggestQuery=function(e,t){var n=this;void 0===t&&(t=!1);return t&&this.metricsNameCache&&this.metricsNameCache.expire>Date.now()?this.$q.when($.a.filter(this.metricsNameCache.data,function(t){return 1!==t.indexOf(e)})):this.metadataRequest("/api/v1/label/__name__/values").then(function(t){return n.metricsNameCache={data:t.data.data,expire:Date.now()+6e4},$.a.filter(t.data.data,function(t){return 1!==t.indexOf(e)})})},e.prototype.metricFindQuery=function(e){if(!e)return this.$q.when([]);var t=Q.a({__interval:{text:this.interval,value:this.interval},__interval_ms:{text:z.a.interval_to_ms(this.interval),value:z.a.interval_to_ms(this.interval)}},this.getRangeScopedVars()),n=this.templateSrv.replace(e,t,this.interpolateQueryExpr);return new Ra(this,n,this.timeSrv).process()},e.prototype.getRangeScopedVars=function(){var e=this.timeSrv.timeRange(),t=e.to.diff(e.from),n=Math.round(t/1e3),a=z.a.secondsToHms(t/1e3);return{__range_ms:{text:t,value:t},__range_s:{text:n,value:n},__range:{text:a,value:a}}},e.prototype.annotationQuery=function(e){var t=e.annotation,n=t.expr||"",a=t.tagKeys||"",r=t.titleFormat||"",i=t.textFormat||"";if(!n)return this.$q.when([]);var o=t.step||"60s",s=this.getPrometheusTime(e.range.from,!1),l=this.getPrometheusTime(e.range.to,!0),c=Q.a({},e,{interval:o}),u=this.createQuery({expr:n,interval:"1s"},c,s,l),d=this;return this.performTimeSeriesQuery(u,u.start,u.end).then(function(e){var n=[];return a=a.split(","),$.a.each(e.data.data.result,function(e){for(var o=$.a.chain(e.metric).filter(function(e,t){return $.a.includes(a,t)}).value(),s=0,l=e.values;s<l.length;s++){var c=l[s];if("1"===c[1]||t.useValueForTime){var u={annotation:t,title:d.resultTransformer.renderTemplate(r,e.metric),tags:o,text:d.resultTransformer.renderTemplate(i,e.metric)};t.useValueForTime?u.time=Math.floor(parseFloat(c[1])):u.time=1e3*Math.floor(parseFloat(c[0])),n.push(u)}}}),n})},e.prototype.testDatasource=function(){var e=(new Date).getTime();return this.performInstantQuery({expr:"1+1"},e/1e3).then(function(e){return"success"===e.data.status?{status:"success",message:"Data source is working"}:{status:"error",message:e.error}})},e.prototype.getExploreState=function(e){var t=this,n={datasource:this.name};if(e&&e.length>0){var a=e.map(function(e){return Q.a({},e,{expr:t.templateSrv.replace(e.expr,{},t.interpolateQueryExpr),legendFormat:null,step:null})});n=Q.a({},n,{queries:a})}return n},e.prototype.getQueryHints=function(e,t){return function(e,t,n){var a=[];if(e.trim().match(/^\w+_bucket$/)){var r="Time series has buckets, you probably wanted a histogram.";a.push({type:"HISTOGRAM_QUANTILE",label:r,fix:{label:"Fix by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:e}}})}if(t&&t.length>0&&t.forEach(function(t){var n=t.datapoints;if(-1===e.indexOf("rate(")&&n.length>1){var r=!1,i=n.filter(function(e){return null!==e[0]}),o=i.every(function(e,t){return 0===t||(r=r||e[0]>i[t-1][0],e[0]>=i[t-1][0])});if(r&&o){var s="Time series is monotonously increasing.",l=void 0;e.trim().match(/^\w+$/)?l={label:"Fix by adding rate().",action:{type:"ADD_RATE",query:e}}:s+=" Try applying a rate() function.",a.push({type:"APPLY_RATE",label:s,fix:l})}}}),n&&n.ruleMappings){var i=n.ruleMappings,o=Object.keys(i).reduce(function(t,n){var a;return e.search(n)>-1?Q.a({},t,((a={})[n]=i[n],a)):t},{});$.a.size(o)>0&&(r="Query contains recording rules.",a.push({type:"EXPAND_RULES",label:r,fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:e,mapping:o}}}))}return t&&t.length>=Ka&&e.trim().match(/^\w+$/)&&a.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:e,preventSubmit:!0}}}),a.length>0?a:null}(e.expr||"",t,this)},e.prototype.loadRules=function(){var e=this;this.metadataRequest("/api/v1/rules").then(function(e){return e.data||e.json()}).then(function(t){var n=$.a.get(t,["data","groups"]);n&&(e.ruleMappings=function(e){return e.reduce(function(e,t){return t.rules.filter(function(e){return"recording"===e.type}).reduce(function(e,t){var n;return Q.a({},e,((n={})[t.name]=t.query,n))},e)},{})}(n))}).catch(function(e){console.log("Rules API is experimental. Ignore next error."),console.error(e)})},e.prototype.modifyQuery=function(e,t){var n=e.expr||"";switch(t.type){case"ADD_FILTER":n=dn(n,t.key,t.value);break;case"ADD_HISTOGRAM_QUANTILE":n="histogram_quantile(0.95, sum(rate("+n+"[5m])) by (le))";break;case"ADD_RATE":n="rate("+n+"[5m])";break;case"ADD_SUM":n="sum("+n.trim()+") by ($1)";break;case"EXPAND_RULES":t.mapping&&(n=function(e,t){var n=Object.keys(t),a=new RegExp("(\\s|^)("+n.join("|")+")(\\s|$|\\(|\\[|\\{)","ig");return e.replace(a,function(e,n,a,r){return""+n+t[a]+r})}(n,t.mapping))}return Q.a({},e,{expr:n})},e.prototype.getPrometheusTime=function(e,t){return $.a.isString(e)&&(e=he.parse(e,t)),Math.ceil(e.valueOf()/1e3)},e.prototype.getTimeRange=function(){var e=this.timeSrv.timeRange();return{start:this.getPrometheusTime(e.from,!1),end:this.getPrometheusTime(e.to,!0)}},e.prototype.getOriginalMetricName=function(e){return this.resultTransformer.getOriginalMetricName(e)},e}();function Ja(e){return"string"==typeof e?e.replace(/'/g,"\\\\'"):e}function Za(e){return"string"==typeof e?Ja(e.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]+?.()]/g,"\\\\$&")):e}var er=function(){function e(e,t){this.datasource=e,this.templateSrv=t,this.identifierRegexps=[/\[/,/[a-zA-Z0-9_:]/],this.labelQueryCache={},this.labelNameCache={},this.labelValueCache={},this.templateVariableCompletions=this.templateSrv.variables.map(function(e){return{caption:"$"+e.name,value:"$"+e.name,meta:"variable",score:Number.MAX_VALUE}})}return e.prototype.getCompletions=function(e,t,n,a,r){var i=this,o=function(e,t){return t=t.concat(i.templateVariableCompletions),r(e,t)},s=t.getTokenAt(n.row,n.column);switch(s.type){case"entity.name.tag.label-matcher":return void this.getCompletionsForLabelMatcherName(t,n).then(function(e){o(null,e)});case"string.quoted.label-matcher":return void this.getCompletionsForLabelMatcherValue(t,n).then(function(e){o(null,e)});case"entity.name.tag.label-list-matcher":return void this.getCompletionsForBinaryOperator(t,n).then(function(e){o(null,e)})}if("paren.lparen"===s.type&&"["===s.value){for(var l=[],c=0,u=["s","m","h"];c<u.length;c++)for(var d=u[c],p=0,h=[1,5,10,30];p<h.length;p++){var f=h[p];l.push({caption:f+d,value:"["+f+d,meta:"range vector"})}return l.unshift({caption:"$__interval_ms",value:"[$__interval_ms",meta:"range vector"}),l.unshift({caption:"$__interval",value:"[$__interval",meta:"range vector"}),void o(null,l)}var m=a;return this.datasource.performSuggestQuery(m,!0).then(function(e){o(null,e.map(function(e){var t=e;return"("===a&&(t="("+e),{caption:e,value:t,meta:"metric"}}))})},e.prototype.getCompletionsForLabelMatcherName=function(e,t){var n=this,a=this.findMetricName(e,t.row,t.column);return a?this.labelNameCache[a]?Promise.resolve(this.labelNameCache[a]):this.getLabelNameAndValueForExpression(a,"metricName").then(function(e){var t=n.transformToCompletions($.a.uniq($.a.flatten(e.map(function(e){return Object.keys(e)}))),"label name");return n.labelNameCache[a]=t,Promise.resolve(t)}):Promise.resolve(this.transformToCompletions(["__name__","instance","job"],"label name"))},e.prototype.getCompletionsForLabelMatcherValue=function(e,t){var n=this,a=this.findMetricName(e,t.row,t.column);if(!a)return Promise.resolve([]);var r=this.findToken(e,t.row,t.column,"entity.name.tag.label-matcher",null,"paren.lparen.label-matcher");if(!r)return Promise.resolve([]);var i=r.value;return this.labelValueCache[a]&&this.labelValueCache[a][i]?Promise.resolve(this.labelValueCache[a][i]):this.getLabelNameAndValueForExpression(a,"metricName").then(function(e){var t=n.transformToCompletions($.a.uniq(e.map(function(e){return e[i]})),"label value");return n.labelValueCache[a]=n.labelValueCache[a]||{},n.labelValueCache[a][i]=t,Promise.resolve(t)})},e.prototype.getCompletionsForBinaryOperator=function(e,t){var n,a,r=this,i=this.findToken(e,t.row,t.column,"keyword.control",null,"identifier");if(!i)return Promise.resolve([]);switch(i.value){case"by":case"without":return(n=this.findToken(e,i.row,i.column,"paren.rparen",null,"identifier"))?""===(a=this.findExpressionMatchedParen(e,n.row,n.column))?Promise.resolve([]):this.getLabelNameAndValueForExpression(a,"expression").then(function(e){var t=r.transformToCompletions($.a.uniq($.a.flatten(e.map(function(e){return Object.keys(e)}))),"label name");return r.labelNameCache[a]=t,t}):Promise.resolve([]);case"on":case"ignoring":case"group_left":case"group_right":var o=this.findToken(e,i.row,i.column,"keyword.operator.binary",null,"identifier");if(!o)return Promise.resolve([]);if(n=this.findToken(e,o.row,o.column,"paren.rparen",null,"identifier"))return""===(a=this.findExpressionMatchedParen(e,n.row,n.column))?Promise.resolve([]):this.getLabelNameAndValueForExpression(a,"expression").then(function(e){var t=r.transformToCompletions($.a.uniq($.a.flatten(e.map(function(e){return Object.keys(e)}))),"label name");return r.labelNameCache[a]=t,t});var s=this.findMetricName(e,o.row,o.column);return this.getLabelNameAndValueForExpression(s,"metricName").then(function(e){var t=r.transformToCompletions($.a.uniq($.a.flatten(e.map(function(e){return Object.keys(e)}))),"label name");return r.labelNameCache[s]=t,Promise.resolve(t)})}return Promise.resolve([])},e.prototype.getLabelNameAndValueForExpression=function(e,t){var n=this;if(this.labelQueryCache[e])return Promise.resolve(this.labelQueryCache[e]);var a=e;if("metricName"===t){var r="=~";/[a-zA-Z_:][a-zA-Z0-9_:]*/.test(e)&&(r="="),a="{__name__"+r+'"'+e+'"}'}var i=this.datasource.getTimeRange(),o=i.start,s=i.end,l="/api/v1/series?match[]="+encodeURIComponent(a)+"&start="+o+"&end="+s;return this.datasource.metadataRequest(l).then(function(t){return n.labelQueryCache[e]=t.data.data,t.data.data})},e.prototype.transformToCompletions=function(e,t){return e.map(function(e){return{caption:e,value:e,meta:t,score:Number.MAX_VALUE}})},e.prototype.findMetricName=function(e,t,n){var a="",r=this.findToken(e,t,n,"entity.name.tag.label-matcher","__name__","paren.lparen.label-matcher");if(r){var i=e.getTokens(r.row)[r.index+2];i&&"string.quoted.label-matcher"===i.type&&(a=i.value.slice(1,-1))}else{var o=this.findToken(e,t,n,"identifier",null,null);o&&(e.getTokens(o.row),a=o.value)}return a},e.prototype.findToken=function(e,t,n,a,r,i){for(var o,s,l=t;l>=0;l--){var c=void 0;if(o=e.getTokens(l),l===t)for(c=0,s=0;s<o.length;s++){var u=c+o[s].value.length;if(u>=n)break;c=u}else s=o.length-1,c=$.a.sum(o.map(function(e){return e.value.length}))-o[o.length-1].value.length;for(;s>=0;s--){if(o[s].type===i)return null;if(o[s].type===a&&(!r||o[s].value===r))return o[s].row=l,o[s].column=c,o[s].index=s,o[s];c-=o[s].value.length}}return null},e.prototype.findExpressionMatchedParen=function(e,t,n){for(var a,r,i=1,o=")",s=t;s>=0;s--){if(a=e.getTokens(s),s===t){var l=0;for(r=0;r<a.length&&!((l+=a[r].value.length)>=n);r++);}else r=a.length-1;for(;r>=0;r--)if(o=a[r].value+o,"paren.rparen"===a[r].type)i++;else if("paren.lparen"===a[r].type&&0===--i)return o}return o},e}(),tr=(n(1391),n(1392),function(e){function t(t,n,a){var r=e.call(this,t,n)||this;r.templateSrv=a;var i=r.target;return i.expr=i.expr||"",i.intervalFactor=i.intervalFactor||1,i.format=i.format||r.getDefaultFormat(),r.metric="",r.resolutions=$.a.map([1,2,3,4,5,10],function(e){return{factor:e,label:"1/"+e}}),r.formats=[{text:"Time series",value:"time_series"},{text:"Table",value:"table"},{text:"Heatmap",value:"heatmap"}],r.instant=!1,r.updateLink(),r}return t.$inject=["$scope","$injector","templateSrv"],Q.c(t,e),t.prototype.getCompleter=function(e){return new er(this.datasource,this.templateSrv)},t.prototype.getDefaultFormat=function(){return"table"===this.panelCtrl.panel.type?"table":"heatmap"===this.panelCtrl.panel.type?"heatmap":"time_series"},t.prototype.refreshMetricData=function(){$.a.isEqual(this.oldTarget,this.target)||(this.oldTarget=Z.a.copy(this.target),this.panelCtrl.refresh(),this.updateLink())},t.prototype.updateLink=function(){var e=this.panelCtrl.range;if(e){var t=Math.ceil((e.to.valueOf()-e.from.valueOf())/1e3),n=e.to.utc().format("YYYY-MM-DD HH:mm"),a={"g0.expr":this.templateSrv.replace(this.target.expr,this.panelCtrl.panel.scopedVars,this.datasource.interpolateQueryExpr),"g0.range_input":t+"s","g0.end_input":n,"g0.step_input":this.target.step,"g0.stacked":this.panelCtrl.panel.stack?1:0,"g0.tab":0},r=$.a.map(a,function(e,t){return t+"="+encodeURIComponent(e)}).join("&");this.linkToPrometheus=this.datasource.directUrl+"/graph?"+r}},t.prototype.getCollapsedText=function(){return this.target.expr},t.templateUrl="partials/query.editor.html",t}(W.a)),nr=function(){function e(e){this.current.jsonData.httpMethod=this.current.jsonData.httpMethod||"GET"}return e.$inject=["$scope"],e.templateUrl="public/app/plugins/datasource/prometheus/partials/config.html",e}(),ar=[{title:"Request Rate",expression:"rate(http_request_total[5m])",label:"Given an HTTP request counter, this query calculates the per-second average request rate over the last 5 minutes."},{title:"95th Percentile of Request Latencies",expression:"histogram_quantile(0.95, sum(rate(prometheus_http_request_duration_seconds_bucket[5m])) by (le))",label:"Calculates the 95th percentile of HTTP request rate over 5 minute windows."},{title:"Alerts Firing",expression:'sort_desc(sum(sum_over_time(ALERTS{alertstate="firing"}[24h])) by (alertname))',label:"Sums up the alerts that have been firing over the last 24 hours."}],rr=function(e){return le.a.createElement("div",null,le.a.createElement("h2",null,"PromQL Cheat Sheet"),ar.map(function(t){return le.a.createElement("div",{className:"cheat-sheet-item",key:t.expression},le.a.createElement("div",{className:"cheat-sheet-item__title"},t.title),le.a.createElement("div",{className:"cheat-sheet-item__expression",onClick:function(n){return e.onClickExample({refId:"1",expr:t.expression})}},le.a.createElement("code",null,t.expression)),le.a.createElement("div",{className:"cheat-sheet-item__label"},t.label))}))},ir=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){return le.a.createElement("div",{className:"grafana-info-box grafana-info-box--max-lg"},le.a.createElement(rr,{onClickExample:this.props.onClickExample}))},t}(se.PureComponent),or="__histograms__",sr="metric",lr="promql",cr="__recording_rules__";function ur(e,t){var n=t.typeaheadContext,a=t.typeaheadText;switch(n){case"context-labels":var r=ea();r&&"}"!==r&&","!==r||(e+="=");break;case"context-label-values":a.match(/^(!?=~?"|")/)||(e='"'+e),'"'!==ea()&&(e+='"')}return e}var dr,pr=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.onChangeMetrics=function(e,t){var n;if(1===t.length){if(0!==t[0].children.length)return;n=t[0].value}else{var r=t[0].value,i=t[1].value;n=r===or?"histogram_quantile(0.95, sum(rate("+i+"[5m])) by (le))":i}a.onChangeQuery(n,!0)},a.onChangeQuery=function(e,t){var n=a.props,r=n.query,i=n.onQueryChange,o=n.onExecuteQuery;i&&(i(Q.a({},r,{expr:e})),t&&o&&o())},a.onClickHintFix=function(){var e=a.props,t=e.hint,n=e.onExecuteHint;n&&t&&t.fix&&n(t.fix.action)},a.onUpdateLanguage=function(){var e=a.languageProvider,t=e.histogramMetrics,n=e.metrics;if(n){ae.a.languages[lr]=a.languageProvider.getSyntax(),ae.a.languages[lr][sr]={alias:"variable",pattern:new RegExp("(?:^|\\s)("+n.join("|")+")(?:$|\\s)")};var r=function(e,t){void 0===t&&(t="_");var n=/:\w+:/,a=e.filter(function(e){return n.test(e)}),r={label:"Recording rules",value:cr,children:a.slice().sort().map(function(e){return{label:e,value:e}})},i=a.length>0?[r]:[],o=$.a.chain(e).filter(function(e){return!n.test(e)}).groupBy(function(e){return e.split(t)[0]}).map(function(e,t){return{children:1===e.length&&e[0]===t?[]:e.sort().map(function(e){return{label:e,value:e}}),label:t,value:t}}).sortBy("label").value();return i.concat(o)}(n),i=t.map(function(e){return{label:e,value:e}}),o=t.length>0?[{label:"Histograms",value:or,children:i,isLeaf:!1}].concat(r):r;a.setState({metricsOptions:o,syntaxLoaded:!0})}},a.onTypeahead=function(e){if(!a.languageProvider)return{suggestions:[]};var t=a.props.history,n=e.prefix,r=e.text,i=e.value,o=e.wrapperNode,s=Array.from(o.classList),l=Zn(o,".attr-name"),c=l&&l.textContent,u=ea(),d=a.languageProvider.provideCompletionItems({text:r,value:i,prefix:n,wrapperClasses:s,labelKey:c},{history:t});return console.log("handleTypeahead",s,r,n,u,c,d.context),d},t.datasource.languageProvider&&(a.languageProvider=t.datasource.languageProvider),a.plugins=[aa(),ra({handler:t.onExecuteQuery}),$n()({onlyIn:function(e){return"code_block"===e.type},getSyntax:function(e){return"promql"}})],a.state={metricsOptions:[],syntaxLoaded:!1},a}return Q.c(t,e),t.prototype.componentDidMount=function(){var e=this;this.languageProvider&&(this.languageProviderInitializationPromise=ia(this.languageProvider.start()),this.languageProviderInitializationPromise.promise.then(function(t){t.map(function(t){return t.then(e.onUpdateLanguage).catch(function(){})})}).then(function(){return e.onUpdateLanguage()}).catch(function(e){e.isCanceled&&console.warn("PromQueryField has unmounted, language provider intialization was canceled")}))},t.prototype.componentWillUnmount=function(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()},t.prototype.render=function(){var e=this.props,t=e.error,n=e.hint,a=e.query,r=this.state,i=r.metricsOptions,o=r.syntaxLoaded,s=this.languageProvider?this.languageProvider.cleanText:void 0,l=o?"Metrics":"Loading metrics...";return le.a.createElement(le.a.Fragment,null,le.a.createElement("div",{className:"gf-form-inline gf-form-inline--nowrap"},le.a.createElement("div",{className:"gf-form flex-shrink-0"},le.a.createElement(On.a,{options:i,onChange:this.onChangeMetrics},le.a.createElement("button",{className:"gf-form-label gf-form-label--btn",disabled:!o},l," ",le.a.createElement("i",{className:"fa fa-caret-down"})))),le.a.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1"},le.a.createElement(Jn,{additionalPlugins:this.plugins,cleanText:s,initialQuery:a.expr,onTypeahead:this.onTypeahead,onWillApplySuggestion:ur,onQueryChange:this.onChangeQuery,onExecuteQuery:this.props.onExecuteQuery,placeholder:"Enter a PromQL query",portalOrigin:"prometheus",syntaxLoaded:o}))),t?le.a.createElement("div",{className:"prom-query-field-info text-error"},t):null,n?le.a.createElement("div",{className:"prom-query-field-info text-warning"},n.label," ",n.fix?le.a.createElement("a",{className:"text-link muted",onClick:this.onClickHintFix},n.fix.label):null):null)},t}(le.a.PureComponent),hr=function(){function e(){}return e.templateUrl="partials/annotations.editor.html",e}(),fr=function(){function e(e){this.$q=e}return e.prototype.processQueryResult=function(e){var t=[];if(!e.data.results)return{data:t};for(var n in e.data.results){var a=e.data.results[n];if(a.series)for(var r=0,i=a.series;r<i.length;r++){var o=i[r];t.push({target:o.name,datapoints:o.points,refId:a.refId,meta:a.meta})}if(a.tables)for(var s=0,l=a.tables;s<l.length;s++){var c=l[s];c.type="table",c.refId=a.refId,c.meta=a.meta,t.push(c)}}return{data:t}},e.prototype.parseMetricFindQueryResult=function(e,t){if(!t||0===t.data.length||0===t.data.results[e].meta.rowCount)return[];var n=t.data.results[e].tables[0].columns,a=t.data.results[e].tables[0].rows,r=this.findColIndex(n,"__text"),i=this.findColIndex(n,"__value");return 2===n.length&&-1!==r&&-1!==i?this.transformToKeyValueList(a,r,i):this.transformToSimpleList(a)},e.prototype.transformToKeyValueList=function(e,t,n){for(var a=[],r=0;r<e.length;r++)this.containsKey(a,e[r][t])||a.push({text:e[r][t],value:e[r][n]});return a},e.prototype.transformToSimpleList=function(e){for(var t=[],n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var r=e[n][a];-1===t.indexOf(r)&&t.push(r)}return $.a.map(t,function(e){return{text:e}})},e.prototype.findColIndex=function(e,t){for(var n=0;n<e.length;n++)if(e[n].text===t)return n;return-1},e.prototype.containsKey=function(e,t){for(var n=0;n<e.length;n++)if(e[n].text===t)return!0;return!1},e.prototype.transformAnnotationResponse=function(e,t){for(var n=t.data.results[e.annotation.name].tables[0],a=-1,r=-1,i=-1,o=0;o<n.columns.length;o++)"time"===n.columns[o].text?a=o:"text"===n.columns[o].text?r=o:"tags"===n.columns[o].text&&(i=o);if(-1===a)return this.$q.reject({message:"Missing mandatory time column (with time column alias) in annotation query."});var s=[];for(o=0;o<n.rows.length;o++){var l=n.rows[o];s.push({annotation:e.annotation,time:Math.floor(l[a]),text:l[r],tags:l[i]?l[i].trim().split(/\s*,\s*/):[]})}return s},e}(),mr=function(){function e(e,t,n,a,r){this.backendSrv=t,this.$q=n,this.templateSrv=a,this.timeSrv=r,this.name=e.name,this.id=e.id,this.responseParser=new fr(this.$q),this.interval=(e.jsonData||{}).timeInterval}return e.$inject=["instanceSettings","backendSrv","$q","templateSrv","timeSrv"],e.prototype.interpolateVariable=function(e,t){return"string"==typeof e?t.multi||t.includeAll?"'"+e.replace(/'/g,"''")+"'":e:"number"==typeof e?e:$.a.map(e,function(t){return"number"==typeof e?e:"'"+t.replace(/'/g,"''")+"'"}).join(",")},e.prototype.query=function(e){var t=this,n=$.a.filter(e.targets,function(e){return!0!==e.hide}).map(function(n){return{refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.id,rawSql:t.templateSrv.replace(n.rawSql,e.scopedVars,t.interpolateVariable),format:n.format}});return 0===n.length?this.$q.when({data:[]}):this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:n}}).then(this.responseParser.processQueryResult)},e.prototype.annotationQuery=function(e){var t=this;if(!e.annotation.rawQuery)return this.$q.reject({message:"Query missing in annotation definition"});var n={refId:e.annotation.name,datasourceId:this.id,rawSql:this.templateSrv.replace(e.annotation.rawQuery,e.scopedVars,this.interpolateVariable),format:"table"};return this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:[n]}}).then(function(n){return t.responseParser.transformAnnotationResponse(e,n)})},e.prototype.metricFindQuery=function(e,t){var n=this,a="tempvar";t&&t.variable&&t.variable.name&&(a=t.variable.name);var r={refId:a,datasourceId:this.id,rawSql:this.templateSrv.replace(e,{},this.interpolateVariable),format:"table"},i=this.timeSrv.timeRange(),o={queries:[r],from:i.from.valueOf().toString(),to:i.to.valueOf().toString()};return this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:o}).then(function(e){return n.responseParser.parseMetricFindQueryResult(a,e)})},e.prototype.testDatasource=function(){return this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:"5m",to:"now",queries:[{refId:"A",intervalMs:1,maxDataPoints:1,datasourceId:this.id,rawSql:"SELECT 1",format:"table"}]}}).then(function(e){return{status:"success",message:"Database Connection OK"}}).catch(function(e){return console.log(e),e.data&&e.data.message?{status:"error",message:e.data.message}:{status:"error",message:e.status}})},e}(),gr="SELECT\n  $__timeEpoch(<time_column>),\n  <value column> as value,\n  <series name column> as metric\nFROM\n  <table name>\nWHERE\n  $__timeFilter(time_column)\nORDER BY\n  <time_column> ASC",vr=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.target.format=a.target.format||"time_series",a.target.alias="",a.formats=[{text:"Time series",value:"time_series"},{text:"Table",value:"table"}],a.target.rawSql||("table"===a.panelCtrl.panel.type?(a.target.format="table",a.target.rawSql="SELECT 1"):a.target.rawSql=gr),a.panelCtrl.events.on("data-received",a.onDataReceived.bind(a),t),a.panelCtrl.events.on("data-error",a.onDataError.bind(a),t),a}return t.$inject=["$scope","$injector"],Q.c(t,e),t.prototype.onDataReceived=function(e){this.lastQueryMeta=null,this.lastQueryError=null;var t=$.a.find(e,{refId:this.target.refId});t&&(this.lastQueryMeta=t.meta)},t.prototype.onDataError=function(e){if(e.data&&e.data.results){var t=e.data.results[this.target.refId];t&&(this.lastQueryMeta=t.meta,this.lastQueryError=t.error)}},t.templateUrl="partials/query.editor.html",t}(W.a),br=function(){function e(e){this.current.jsonData.encrypt=this.current.jsonData.encrypt||"false"}return e.$inject=["$scope"],e.templateUrl="partials/config.html",e}(),yr="SELECT\n    <time_column> as time,\n    <text_column> as text,\n    <tags_column> as tags\n  FROM\n    <table name>\n  WHERE\n    $__timeFilter(time_column)\n  ORDER BY\n    <time_column> ASC",wr=function(){function e(){this.annotation.rawQuery=this.annotation.rawQuery||yr}return e.templateUrl="partials/annotations.editor.html",e}(),xr=function(){function e(e,t,n){this.backendSrv=t,this.$q=n,this.id=e.id}return e.$inject=["instanceSettings","backendSrv","$q"],e.prototype.query=function(e){var t=this,n=$.a.filter(e.targets,function(e){return!0!==e.hide}).map(function(n){return{refId:n.refId,scenarioId:n.scenarioId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,stringInput:n.stringInput,points:n.points,alias:n.alias,datasourceId:t.id}});return 0===n.length?this.$q.when({data:[]}):this.backendSrv.datasourceRequest({method:"POST",url:"/api/tsdb/query",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:n}}).then(function(e){var t=[];return e.data.results&&$.a.forEach(e.data.results,function(e){if(e.tables)for(var n=0,a=e.tables;n<a.length;n++){var r=a[n],i=new pe.a;i.rows=r.rows,i.columns=r.columns,t.push(i)}for(var o=0,s=e.series;o<s.length;o++){var l=s[o];t.push({target:l.name,datapoints:l.points})}}),{data:t}})},e.prototype.annotationQuery=function(e){for(var t=e.range.from.valueOf(),n=[],a=(e.range.to.valueOf()-t)/10,r=0;r<10;r++)n.push({annotation:e.annotation,time:t,text:'This is the text, <a href="https://grafana.com">Grafana.com</a>',tags:["text","server"]}),t+=a;return this.$q.when(n)},e.prototype.testDatasource=function(){return Promise.resolve({status:"success",message:"Data source is working"})},e.prototype.getScenarios=function(){return this.backendSrv.get("/api/tsdb/testdata/scenarios")},e}(),Sr=function(e){function t(t,n,a){var r=e.call(this,t,n)||this;return r.backendSrv=a,r.target.scenarioId=r.target.scenarioId||"random_walk",r.scenarioList=[],r.newPointTime=X()(),r.selectedPoint={text:"Select point",value:null},r}return t.$inject=["$scope","$injector","backendSrv"],Q.c(t,e),t.prototype.getPoints=function(){return $.a.map(this.target.points,function(e,t){return{text:X()(e[1]).format("MMMM Do YYYY, H:mm:ss")+" : "+e[0],value:t}})},t.prototype.pointSelected=function(e){this.selectedPoint=e},t.prototype.deletePoint=function(){this.target.points.splice(this.selectedPoint.value,1),this.selectedPoint={text:"Select point",value:null},this.refresh()},t.prototype.addPoint=function(){this.target.points=this.target.points||[],this.target.points.push([this.newPointValue,this.newPointTime.valueOf()]),this.target.points=$.a.sortBy(this.target.points,function(e){return e[1]}),this.refresh()},t.prototype.$onInit=function(){var e=this;return this.backendSrv.get("/api/tsdb/testdata/scenarios").then(function(t){e.scenarioList=t,e.scenario=$.a.find(e.scenarioList,{id:e.target.scenarioId})})},t.prototype.scenarioChanged=function(){this.scenario=$.a.find(this.scenarioList,{id:this.target.scenarioId}),this.target.stringInput=this.scenario.stringInput,"manual_entry"===this.target.scenarioId?this.target.points=this.target.points||[]:delete this.target.points,this.refresh()},t.templateUrl="partials/query.editor.html",t}(W.a),kr=function(){function e(){}return e.template="<h2>Annotation scenario</h2>",e}(),Cr=n(119),Er=n(375),Tr=n.n(Er);!function(e){e.Services="services",e.MetricTypes="metricTypes",e.LabelKeys="labelKeys",e.LabelValues="labelValues",e.ResourceTypes="resourceTypes",e.Aggregations="aggregations",e.Aligners="aligners",e.AlignmentPeriods="alignmentPeriods"}(dr||(dr={}));var Mr=n(83),_r=function(){function e(e){this.datasource=e}return e.prototype.execute=function(e){return Q.b(this,void 0,void 0,function(){return Q.d(this,function(t){try{switch(e.selectedQueryType){case dr.Services:return[2,this.handleServiceQuery()];case dr.MetricTypes:return[2,this.handleMetricTypesQuery(e)];case dr.LabelKeys:return[2,this.handleLabelKeysQuery(e)];case dr.LabelValues:return[2,this.handleLabelValuesQuery(e)];case dr.ResourceTypes:return[2,this.handleResourceTypeQuery(e)];case dr.Aligners:return[2,this.handleAlignersQuery(e)];case dr.AlignmentPeriods:return[2,this.handleAlignmentPeriodQuery()];case dr.Aggregations:return[2,this.handleAggregationQuery(e)];default:return[2,[]]}}catch(t){return console.error("Could not run StackdriverMetricFindQuery "+e,t),[2,[]]}return[2]})})},e.prototype.handleServiceQuery=function(){return Q.b(this,void 0,void 0,function(){var e;return Q.d(this,function(t){switch(t.label){case 0:return[4,this.datasource.getMetricTypes(this.datasource.projectName)];case 1:return e=t.sent(),[2,Object(Mr.a)(e).map(function(e){return{text:e.serviceShortName,value:e.service,expandable:!0}})]}})})},e.prototype.handleMetricTypesQuery=function(e){var t=e.selectedService;return Q.b(this,void 0,void 0,function(){var e;return Q.d(this,function(n){switch(n.label){case 0:return t?[4,this.datasource.getMetricTypes(this.datasource.projectName)]:[2,[]];case 1:return e=n.sent(),[2,Object(Mr.g)(e,this.datasource.templateSrv.replace(t)).map(function(e){return{text:e.displayName,value:e.type,expandable:!0}})]}})})},e.prototype.handleLabelKeysQuery=function(e){var t=e.selectedMetricType;return Q.b(this,void 0,void 0,function(){return Q.d(this,function(e){switch(e.label){case 0:return t?[4,Object(Mr.e)(this.datasource,t)]:[2,[]];case 1:return[2,e.sent().map(this.toFindQueryResult)]}})})},e.prototype.handleLabelValuesQuery=function(e){var t=e.selectedMetricType,n=e.labelKey;return Q.b(this,void 0,void 0,function(){var e,a,r,i,o;return Q.d(this,function(s){switch(s.label){case 0:return t?(e="handleLabelValuesQuery",[4,this.datasource.getLabels(t,e)]):[2,[]];case 1:return a=s.sent(),r=this.datasource.templateSrv.replace(n),i=r.split(".").reverse()[0],o=[],a.meta&&a.meta.metricLabels&&a.meta.metricLabels.hasOwnProperty(i)?o=a.meta.metricLabels[i]:a.meta&&a.meta.resourceLabels&&a.meta.resourceLabels.hasOwnProperty(i)&&(o=a.meta.resourceLabels[i]),[2,o.map(this.toFindQueryResult)]}})})},e.prototype.handleResourceTypeQuery=function(e){var t=e.selectedMetricType;return Q.b(this,void 0,void 0,function(){var e,n;return Q.d(this,function(a){switch(a.label){case 0:return t?(e="handleResourceTypeQueryQueryType",[4,this.datasource.getLabels(t,e)]):[2,[]];case 1:return[2,(n=a.sent()).meta.resourceTypes?n.meta.resourceTypes.map(this.toFindQueryResult):[]]}})})},e.prototype.handleAlignersQuery=function(e){var t=e.selectedMetricType;return Q.b(this,void 0,void 0,function(){var e,n,a,r,i=this;return Q.d(this,function(o){switch(o.label){case 0:return t?[4,this.datasource.getMetricTypes(this.datasource.projectName)]:[2,[]];case 1:return e=o.sent(),n=e.find(function(e){return e.type===i.datasource.templateSrv.replace(t)}),a=n.valueType,r=n.metricKind,[2,Object(Mr.c)(a,r).map(this.toFindQueryResult)]}})})},e.prototype.handleAggregationQuery=function(e){var t=e.selectedMetricType;return Q.b(this,void 0,void 0,function(){var e,n,a,r,i=this;return Q.d(this,function(o){switch(o.label){case 0:return t?[4,this.datasource.getMetricTypes(this.datasource.projectName)]:[2,[]];case 1:return e=o.sent(),n=e.find(function(e){return e.type===i.datasource.templateSrv.replace(t)}),a=n.valueType,r=n.metricKind,[2,Object(Mr.b)(a,r).map(this.toFindQueryResult)]}})})},e.prototype.handleAlignmentPeriodQuery=function(){return Cr.c.map(this.toFindQueryResult)},e.prototype.toFindQueryResult=function(e){return Tr()(e)?{text:e,expandable:!0}:Q.a({},e,{expandable:!0})},e}(),Ar=function(){function e(e,t,n,a){this.backendSrv=t,this.templateSrv=n,this.timeSrv=a,this.baseUrl="/stackdriver/",this.url=e.url,this.id=e.id,this.projectName=e.jsonData.defaultProject||"",this.authenticationType=e.jsonData.authenticationType||"jwt",this.metricTypes=[]}return e.$inject=["instanceSettings","backendSrv","templateSrv","timeSrv"],e.prototype.getTimeSeries=function(e){return Q.b(this,void 0,void 0,function(){var t,n=this;return Q.d(this,function(a){switch(a.label){case 0:return(t=e.targets.filter(function(e){return!e.hide&&e.metricType}).map(function(t){return{refId:t.refId,intervalMs:e.intervalMs,datasourceId:n.id,metricType:n.templateSrv.replace(t.metricType,e.scopedVars||{}),crossSeriesReducer:n.templateSrv.replace(t.crossSeriesReducer||"REDUCE_MEAN",e.scopedVars||{}),perSeriesAligner:n.templateSrv.replace(t.perSeriesAligner,e.scopedVars||{}),alignmentPeriod:n.templateSrv.replace(t.alignmentPeriod,e.scopedVars||{}),groupBys:n.interpolateGroupBys(t.groupBys,e.scopedVars),view:t.view||"FULL",filters:n.interpolateFilters(t.filters,e.scopedVars),aliasBy:n.templateSrv.replace(t.aliasBy,e.scopedVars||{}),type:"timeSeriesQuery"}})).length>0?[4,this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:t}})]:[3,2];case 1:return[2,a.sent().data];case 2:return[2,{results:[]}]}})})},e.prototype.interpolateFilters=function(e,t){var n=this;return(e||[]).map(function(e){return n.templateSrv.replace(e,t||{},"regex")})},e.prototype.getLabels=function(e,t){return Q.b(this,void 0,void 0,function(){return Q.d(this,function(n){switch(n.label){case 0:return[4,this.getTimeSeries({targets:[{refId:t,datasourceId:this.id,metricType:this.templateSrv.replace(e),crossSeriesReducer:"REDUCE_NONE",view:"HEADERS"}],range:this.timeSrv.timeRange()})];case 1:return[2,n.sent().results[t]]}})})},e.prototype.interpolateGroupBys=function(e,t){var n=this,a=[];return(e||[]).forEach(function(e){var r=n.templateSrv.replace(e,t||{},"csv").split(",");Array.isArray(r)?a=a.concat(r):a.push(r)}),a},e.prototype.resolvePanelUnitFromTargets=function(e){var t;return e.length>0&&e.every(function(t){return t.unit===e[0].unit})&&Cr.d.hasOwnProperty(e[0].unit)&&(t=Cr.d[e[0].unit]),t},e.prototype.query=function(e){return Q.b(this,void 0,void 0,function(){var t,n,a=this;return Q.d(this,function(r){switch(r.label){case 0:return t=[],[4,this.getTimeSeries(e)];case 1:return(n=r.sent()).results?(Object.values(n.results).forEach(function(n){if(n.series){var r=a.resolvePanelUnitFromTargets(e.targets);n.series.forEach(function(e){var a={target:e.name,datapoints:e.points,refId:n.refId,meta:n.meta};r&&(a=Q.a({},a,{unit:r})),t.push(a)})}}),[2,{data:t}]):[2,{data:[]}]}})})},e.prototype.annotationQuery=function(e){return Q.b(this,void 0,void 0,function(){var t,n,a,r=this;return Q.d(this,function(i){switch(i.label){case 0:return t=e.annotation,n=[{refId:"annotationQuery",datasourceId:this.id,metricType:this.templateSrv.replace(t.target.metricType,e.scopedVars||{}),crossSeriesReducer:"REDUCE_NONE",perSeriesAligner:"ALIGN_NONE",title:this.templateSrv.replace(t.target.title,e.scopedVars||{}),text:this.templateSrv.replace(t.target.text,e.scopedVars||{}),tags:this.templateSrv.replace(t.target.tags,e.scopedVars||{}),view:"FULL",filters:(t.target.filters||[]).map(function(t){return r.templateSrv.replace(t,e.scopedVars||{})}),type:"annotationQuery"}],[4,this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:n}})];case 1:return a=i.sent().data,[2,a.results.annotationQuery.tables[0].rows.map(function(e){return{annotation:t,time:Date.parse(e[0]),title:e[1],tags:[],text:e[3]}})]}})})},e.prototype.metricFindQuery=function(e){return Q.b(this,void 0,void 0,function(){return Q.d(this,function(t){return[2,new _r(this).execute(e)]})})},e.prototype.testDatasource=function(){return Q.b(this,void 0,void 0,function(){var e,t,n,a,r,i,o;return Q.d(this,function(s){switch(s.label){case 0:n="Cannot connect to Stackdriver API",s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,this.getDefaultProject()];case 2:return a=s.sent(),r="v3/projects/"+a+"/metricDescriptors",[4,this.doRequest(""+this.baseUrl+r)];case 3:return 200===(i=s.sent()).status?(e="success",t="Successfully queried the Stackdriver API."):(e="error",t=i.statusText?i.statusText:n),[3,6];case 4:return o=s.sent(),e="error",$.a.isString(o)?t=o:(t="Stackdriver: ",t+=o.statusText?o.statusText:n,o.data&&o.data.error&&o.data.error.code&&(t+=": "+o.data.error.code+". "+o.data.error.message)),[3,6];case 5:return[2,{status:e,message:t}];case 6:return[2]}})})},e.prototype.formatStackdriverError=function(e){var t="Stackdriver: ";if(t+=e.statusText?e.statusText+": ":"",e.data&&e.data.error)try{var n=JSON.parse(e.data.error);t+=n.error.code+". "+n.error.message}catch(n){t+=e.data.error}else t+="Cannot connect to Stackdriver API";return t},e.prototype.getDefaultProject=function(){return Q.b(this,void 0,void 0,function(){var e,t;return Q.d(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),"gce"!==this.authenticationType&&this.projectName?[3,2]:[4,this.backendSrv.datasourceRequest({url:"/api/tsdb/query",method:"POST",data:{queries:[{refId:"ensureDefaultProjectQuery",type:"ensureDefaultProjectQuery",datasourceId:this.id}]}})];case 1:return e=n.sent().data,this.projectName=e.results.ensureDefaultProjectQuery.meta.defaultProject,[2,this.projectName];case 2:return[2,this.projectName];case 3:return[3,5];case 4:throw t=n.sent(),this.formatStackdriverError(t);case 5:return[2]}})})},e.prototype.getMetricTypes=function(e){return Q.b(this,void 0,Promise,function(){var t,n,a;return Q.d(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),0!==this.metricTypes.length?[3,2]:(t="v3/projects/"+e+"/metricDescriptors",[4,this.doRequest(""+this.baseUrl+t)]);case 1:n=r.sent().data,this.metricTypes=n.metricDescriptors.map(function(e){var t=e.type.split("/")[0],n=t.split(".")[0];return e.service=t,e.serviceShortName=n,e.displayName=e.displayName||e.type,e}),r.label=2;case 2:return[2,this.metricTypes];case 3:return a=r.sent(),ze.b.emit("ds-request-error",this.formatStackdriverError(a)),[2,[]];case 4:return[2]}})})},e.prototype.doRequest=function(e,t){return void 0===t&&(t=1),Q.b(this,void 0,void 0,function(){var n=this;return Q.d(this,function(a){return[2,this.backendSrv.datasourceRequest({url:this.url+e,method:"GET"}).catch(function(a){if(t>0)return n.doRequest(e,t-1);throw a})]})})},e}(),Dr=function(e){function t(t,n,a){var r=e.call(this,t,n)||this;return r.templateSrv=a,r.onQueryChange=r.onQueryChange.bind(r),r.onExecuteQuery=r.onExecuteQuery.bind(r),r}return t.$inject=["$scope","$injector","templateSrv"],Q.c(t,e),t.prototype.onQueryChange=function(e){Object.assign(this.target,e)},t.prototype.onExecuteQuery=function(){this.$scope.ctrl.refresh()},t.templateUrl="partials/query.editor.html",t}(W.a),Nr=function(){function e(e){this.validationErrors=[],this.defaultAuthenticationType="jwt",this.datasourceSrv=e,this.current.jsonData=this.current.jsonData||{},this.current.jsonData.authenticationType=this.current.jsonData.authenticationType?this.current.jsonData.authenticationType:this.defaultAuthenticationType,this.current.secureJsonData=this.current.secureJsonData||{},this.current.secureJsonFields=this.current.secureJsonFields||{},this.authenticationTypes=[{key:this.defaultAuthenticationType,value:"Google JWT File"},{key:"gce",value:"GCE Default Service Account"}]}return e.$inject=["datasourceSrv"],e.prototype.save=function(e){this.current.secureJsonData.privateKey=e.private_key,this.current.jsonData.tokenUri=e.token_uri,this.current.jsonData.clientEmail=e.client_email,this.current.jsonData.defaultProject=e.project_id},e.prototype.validateJwt=function(e){return this.resetValidationMessages(),e.private_key&&0!==e.private_key.length||this.validationErrors.push("Private key field missing in JWT file."),e.token_uri&&0!==e.token_uri.length||this.validationErrors.push("Token URI field missing in JWT file."),e.client_email&&0!==e.client_email.length||this.validationErrors.push("Client Email field missing in JWT file."),e.project_id&&0!==e.project_id.length||this.validationErrors.push("Project Id field missing in JWT file."),0===this.validationErrors.length&&(this.inputDataValid=!0,!0)},e.prototype.onUpload=function(e){this.jsonText="",this.validateJwt(e)&&this.save(e)},e.prototype.onPasteJwt=function(e){try{var t=JSON.parse(e.originalEvent.clipboardData.getData("text/plain")||this.jsonText);this.validateJwt(t)&&this.save(t)}catch(e){this.resetValidationMessages(),this.validationErrors.push("Invalid json: "+e.message)}},e.prototype.resetValidationMessages=function(){this.validationErrors=[],this.inputDataValid=!1,this.jsonText="",this.current.jsonData=Object.assign({},{authenticationType:this.current.jsonData.authenticationType}),this.current.secureJsonData={},this.current.secureJsonFields={}},e.templateUrl="public/app/plugins/datasource/stackdriver/partials/config.html",e}(),Pr=function(){function e(e){this.templateSrv=e,this.annotation.target=this.annotation.target||{},this.onQueryChange=this.onQueryChange.bind(this)}return e.$inject=["templateSrv"],e.prototype.onQueryChange=function(e){Object.assign(this.annotation.target,e)},e.templateUrl="partials/annotations.editor.html",e}(),Or=function(e){var t=e.label,n=e.onValueChange,a=e.value,r=e.options;return le.a.createElement("div",{className:"gf-form max-width-21"},le.a.createElement("span",{className:"gf-form-label width-10 query-keyword"},t),le.a.createElement("div",{className:"gf-form-select-wrapper max-width-12"},le.a.createElement("select",{className:"gf-form-input",required:!0,onChange:n,value:a},r.map(function(e,t){var n=e.value,a=e.name;return le.a.createElement("option",{key:t,value:n},a)}))))},Ir=function(e){function t(t){var n=e.call(this,t)||this;return n.queryTypes=[{value:dr.Services,name:"Services"},{value:dr.MetricTypes,name:"Metric Types"},{value:dr.LabelKeys,name:"Label Keys"},{value:dr.LabelValues,name:"Label Values"},{value:dr.ResourceTypes,name:"Resource Types"},{value:dr.Aggregations,name:"Aggregations"},{value:dr.Aligners,name:"Aligners"},{value:dr.AlignmentPeriods,name:"Alignment Periods"}],n.defaults={selectedQueryType:n.queryTypes[0].value,metricDescriptors:[],selectedService:"",selectedMetricType:"",labels:[],labelKey:"",metricTypes:[],services:[]},n.state=Object.assign(n.defaults,n.props.query),n}return Q.c(t,e),t.prototype.componentDidMount=function(){return Q.b(this,void 0,void 0,function(){var e,t,n,a,r,i,o,s,l=this;return Q.d(this,function(c){switch(c.label){case 0:return[4,this.props.datasource.getMetricTypes(this.props.datasource.projectName)];case 1:return e=c.sent(),t=Object(Mr.a)(e).map(function(e){return{value:e.service,name:e.serviceShortName}}),n="",t.some(function(e){return e.value===l.props.templateSrv.replace(l.state.selectedService)})?n=this.state.selectedService:t&&t.length>0&&(n=t[0].value),a=Object(Mr.f)(e,this.state.selectedMetricType,this.props.templateSrv.replace(this.state.selectedMetricType),this.props.templateSrv.replace(n)),r=a.metricTypes,i=a.selectedMetricType,s=[{services:t,selectedService:n,metricTypes:r,selectedMetricType:i,metricDescriptors:e}],[4,this.getLabels(i)];case 2:return o=Q.a.apply(void 0,s.concat([c.sent()])),this.setState(o),[2]}})})},t.prototype.onQueryTypeChange=function(e){return Q.b(this,void 0,void 0,function(){var t,n;return Q.d(this,function(a){switch(a.label){case 0:return n=[{selectedQueryType:e.target.value}],[4,this.getLabels(this.state.selectedMetricType,e.target.value)];case 1:return t=Q.a.apply(void 0,n.concat([a.sent()])),this.setState(t),[2]}})})},t.prototype.onServiceChange=function(e){return Q.b(this,void 0,void 0,function(){var t,n,a,r,i;return Q.d(this,function(o){switch(o.label){case 0:return t=Object(Mr.f)(this.state.metricDescriptors,this.state.selectedMetricType,this.props.templateSrv.replace(this.state.selectedMetricType),this.props.templateSrv.replace(e.target.value)),n=t.metricTypes,a=t.selectedMetricType,i=[{selectedService:e.target.value,metricTypes:n,selectedMetricType:a}],[4,this.getLabels(a)];case 1:return r=Q.a.apply(void 0,i.concat([o.sent()])),this.setState(r),[2]}})})},t.prototype.onMetricTypeChange=function(e){return Q.b(this,void 0,void 0,function(){var t,n;return Q.d(this,function(a){switch(a.label){case 0:return n=[{selectedMetricType:e.target.value}],[4,this.getLabels(e.target.value)];case 1:return t=Q.a.apply(void 0,n.concat([a.sent()])),this.setState(t),[2]}})})},t.prototype.onLabelKeyChange=function(e){this.setState({labelKey:e.target.value})},t.prototype.componentDidUpdate=function(){var e=this,t=this.state,n=(t.metricDescriptors,t.labels,t.metricTypes,t.services,Q.e(t,["metricDescriptors","labels","metricTypes","services"])),a=this.queryTypes.find(function(t){return t.value===e.state.selectedQueryType});this.props.onChange(n,"Stackdriver - "+a.name)},t.prototype.getLabels=function(e,t){return void 0===t&&(t=this.state.selectedQueryType),Q.b(this,void 0,void 0,function(){var n,a,r,i=this;return Q.d(this,function(o){switch(o.label){case 0:return n={labels:this.state.labels,labelKey:this.state.labelKey},e&&t===dr.LabelValues?[4,Object(Mr.e)(this.props.datasource,e)]:[3,2];case 1:a=o.sent(),r=a.some(function(e){return e===i.props.templateSrv.replace(i.state.labelKey)})?this.state.labelKey:a[0],n={labels:a,labelKey:r},o.label=2;case 2:return[2,n]}})})},t.prototype.insertTemplateVariables=function(e){return this.props.templateSrv.variables.map(function(e){return{name:"$"+e.name,value:"$"+e.name}}).concat(e)},t.prototype.renderQueryTypeSwitch=function(e){var t=this;switch(e){case dr.MetricTypes:return le.a.createElement(Or,{value:this.state.selectedService,options:this.insertTemplateVariables(this.state.services),onValueChange:function(e){return t.onServiceChange(e)},label:"Service"});case dr.LabelKeys:case dr.LabelValues:case dr.ResourceTypes:return le.a.createElement(le.a.Fragment,null,le.a.createElement(Or,{value:this.state.selectedService,options:this.insertTemplateVariables(this.state.services),onValueChange:function(e){return t.onServiceChange(e)},label:"Service"}),le.a.createElement(Or,{value:this.state.selectedMetricType,options:this.insertTemplateVariables(this.state.metricTypes),onValueChange:function(e){return t.onMetricTypeChange(e)},label:"Metric Type"}),e===dr.LabelValues&&le.a.createElement(Or,{value:this.state.labelKey,options:this.insertTemplateVariables(this.state.labels.map(function(e){return{value:e,name:e}})),onValueChange:function(e){return t.onLabelKeyChange(e)},label:"Label Key"}));case dr.Aligners:case dr.Aggregations:return le.a.createElement(le.a.Fragment,null,le.a.createElement(Or,{value:this.state.selectedService,options:this.insertTemplateVariables(this.state.services),onValueChange:function(e){return t.onServiceChange(e)},label:"Service"}),le.a.createElement(Or,{value:this.state.selectedMetricType,options:this.insertTemplateVariables(this.state.metricTypes),onValueChange:function(e){return t.onMetricTypeChange(e)},label:"Metric Type"}));default:return""}},t.prototype.render=function(){var e=this;return le.a.createElement(le.a.Fragment,null,le.a.createElement(Or,{value:this.state.selectedQueryType,options:this.queryTypes,onValueChange:function(t){return e.onQueryTypeChange(t)},label:"Query Type"}),this.renderQueryTypeSwitch(this.state.selectedQueryType))},t}(se.PureComponent),$r=function(){function e(){}return e.createISO8601Duration=function(e,t){return $.a.includes(["hour","minute","h","m"],t)?"PT"+e+t[0].toUpperCase():"P"+e+t[0].toUpperCase()},e.createISO8601DurationFromInterval=function(t){var n=+t.slice(0,t.length-1),a=t[t.length-1];if(t.indexOf("ms")>-1)return e.createISO8601Duration(1,"m");if("s"===t[t.length-1]){var r=60*n%60;return r<1&&(r=1),e.createISO8601Duration(r,"m")}return e.createISO8601Duration(n,a)},e.findClosestTimeGrain=function(e,t){for(var n=$.a.filter(t,function(e){return"auto"!==e}),a=n[0],r=z.a.interval_to_ms(e),i=0;i<n.length;i++)r>z.a.interval_to_ms(n[i])&&(a=i+1<n.length?n[i+1]:n[i]);return a},e.createTimeGrainFromISO8601Duration=function(t){var n=1;"PT"===t.substring(0,2)&&(n=2);var a=t.substring(n,t.length-1),r=t.substring(t.length-1);return a+" "+e.timeUnitToText(+a,r)},e.timeUnitToText=function(e,t){var n="";return"S"===t&&(n="second"),"M"===t&&(n="minute"),"H"===t&&(n="hour"),"D"===t&&(n="day"),e>1?n+"s":n},e.createKbnUnitFromISO8601Duration=function(t){if("auto"===t)return"auto";var n=1;"PT"===t.substring(0,2)&&(n=2);var a=t.substring(n,t.length-1),r=t.substring(t.length-1);return a+e.timeUnitToKbn(+a,r)},e.timeUnitToKbn=function(e,t){return"S"===t?"s":"M"===t?"m":"H"===t?"h":"D"===t?"d":""},e}(),Fr=function(){function e(e,t,n,a,r){this.metricName=e,this.from=t,this.to=n,this.timeGrain=a,this.grafanaInterval=r,this.timeGrainInterval="",this.allowedTimeGrains=["1m","5m","15m","30m","1h","6h","12h","1d"]}return e.prototype.setAllowedTimeGrains=function(e){var t=this;this.allowedTimeGrains=[],e.forEach(function(e){"auto"===e.value?t.allowedTimeGrains.push(e.value):t.allowedTimeGrains.push($r.createKbnUnitFromISO8601Duration(e.value))})},e.prototype.setAggregation=function(e){this.aggregation=e},e.prototype.setDimensionFilter=function(e,t){this.dimension=e,this.dimensionFilter=t},e.prototype.generateFilter=function(){var e=this.createDatetimeAndTimeGrainConditions();return this.aggregation&&(e+="&aggregation="+this.aggregation),this.metricName&&this.metricName.trim().length>0&&(e+="&metricnames="+this.metricName),this.dimension&&this.dimensionFilter&&this.dimensionFilter.trim().length>0&&(e+="&$filter="+this.dimension+" eq '"+this.dimensionFilter+"'"),e},e.prototype.createDatetimeAndTimeGrainConditions=function(){var e="timespan="+this.from.utc().format()+"/"+this.to.utc().format();return"auto"===this.timeGrain&&(this.timeGrain=this.calculateAutoTimeGrain()),e+("&interval="+this.timeGrain)},e.prototype.calculateAutoTimeGrain=function(){var e=$r.findClosestTimeGrain(this.grafanaInterval,this.allowedTimeGrains);return $r.createISO8601DurationFromInterval(e)},e}(),qr=function(){function e(){}return e.buildAzureMonitorQueryUrl=function(e,t,n,a,r,i){if((n.match(/\//g)||[]).length>1){var o=a.split("/"),s=n.substring(n.lastIndexOf("/")+1);return e+"/"+t+"/providers/"+n.substring(0,n.lastIndexOf("/"))+"/"+o[0]+"/"+s+"/"+o[1]+"/providers/microsoft.insights/metrics?api-version="+r+"&"+i}return e+"/"+t+"/providers/"+n+"/"+a+"/providers/microsoft.insights/metrics?api-version="+r+"&"+i},e.buildAzureMonitorGetMetricNamesUrl=function(e,t,n,a,r){if((n.match(/\//g)||[]).length>1){var i=a.split("/"),o=n.substring(n.lastIndexOf("/")+1);return e+"/"+t+"/providers/"+n.substring(0,n.lastIndexOf("/"))+"/"+i[0]+"/"+o+"/"+i[1]+"/providers/microsoft.insights/metricdefinitions?api-version="+r}return e+"/"+t+"/providers/"+n+"/"+a+"/providers/microsoft.insights/metricdefinitions?api-version="+r},e}(),Rr=function(){function e(e){this.results=e}return e.prototype.parseQueryResult=function(){for(var t=[],n=0;n<this.results.length;n++)for(var a=0;a<this.results[n].result.data.value.length;a++)for(var r=0;r<this.results[n].result.data.value[a].timeseries.length;r++){var i=this.results[n].query.alias;t.push({target:e.createTarget(this.results[n].result.data.value[a],this.results[n].result.data.value[a].timeseries[r].metadatavalues,i),datapoints:e.convertDataToPoints(this.results[n].result.data.value[a].timeseries[r].data)})}return t},e.createTarget=function(t,n,a){var r=e.parseResourceGroupFromId(t.id),i=e.parseResourceNameFromId(t.id),o=e.parseNamespaceFromId(t.id,i);if(a){return a.replace(/\{\{([\s\S]+?)\}\}/g,function(e,a,s){var l=a||s;return"resourcegroup"===l?r:"namespace"===l?o:"resourcename"===l?i:"metric"===l?t.name.value:"dimensionname"===l?n&&n.length>0?n[0].name.value:"":"dimensionvalue"===l?n&&n.length>0?n[0].value:"":e})}return n&&n.length>0?i+"{"+n[0].name.value+"="+n[0].value+"}."+t.name.value:i+"."+t.name.value},e.parseResourceGroupFromId=function(e){var t=e.indexOf("/resourceGroups/")+16,n=e.indexOf("/providers");return e.substring(t,n)},e.parseNamespaceFromId=function(e,t){var n=e.indexOf("/providers/")+11,a=e.indexOf("/"+t);return e.substring(n,a)},e.parseResourceNameFromId=function(e){var t=e.lastIndexOf("/providers"),n=e.slice(0,t).lastIndexOf("/")+1;return e.substring(n,t)},e.convertDataToPoints=function(t){for(var n=[],a=0;a<t.length;a++){var r=e.dateTimeToEpoch(t[a].timeStamp),i=e.getKeyForAggregationField(t[a]);i&&n.push([t[a][i],r])}return n},e.dateTimeToEpoch=function(e){return X()(e).valueOf()},e.getKeyForAggregationField=function(e){var t=$.a.keys(e);return t.length<2?"":$.a.intersection(t,["total","average","maximum","minimum","count"])[0]},e.parseResponseValues=function(e,t,n){for(var a=[],r=0;r<e.data.value.length;r++)$.a.find(a,["value",$.a.get(e.data.value[r],n)])||a.push({text:$.a.get(e.data.value[r],t),value:$.a.get(e.data.value[r],n)});return a},e.parseResourceNames=function(e,t){for(var n=[],a=0;a<e.data.value.length;a++)e.data.value[a].type===t&&n.push({text:e.data.value[a].name,value:e.data.value[a].name});return n},e.parseMetadata=function(t,n){var a=$.a.find(t.data.value,function(e){return $.a.get(e,"name.value")===n});return{primaryAggType:a.primaryAggregationType,supportedAggTypes:a.supportedAggregationTypes||["None","Average","Minimum","Maximum","Total","Count"],supportedTimeGrains:e.parseTimeGrains(a.metricAvailabilities||[]),dimensions:e.parseDimensions(a)}},e.parseTimeGrains=function(e){var t=[];return e.forEach(function(e){e.timeGrain&&t.push({text:$r.createTimeGrainFromISO8601Duration(e.timeGrain),value:e.timeGrain})}),t},e.parseDimensions=function(e){var t=[];if(!e.dimensions||0===e.dimensions.length)return t;e.isDimensionRequired||t.push({text:"None",value:"None"});for(var n=0;n<e.dimensions.length;n++)t.push({text:e.dimensions[n].localizedValue,value:e.dimensions[n].value});return t},e}(),Lr=function(){function e(e){this.cloudName=e,this.supportedMetricNamespaces={azuremonitor:["Microsoft.AnalysisServices/servers","Microsoft.ApiManagement/service","Microsoft.Automation/automationAccounts","Microsoft.Batch/batchAccounts","Microsoft.Cache/redis","Microsoft.ClassicCompute/virtualMachines","Microsoft.ClassicCompute/domainNames/slots/roles","Microsoft.CognitiveServices/accounts","Microsoft.Compute/virtualMachines","Microsoft.Compute/virtualMachineScaleSets","Microsoft.ContainerInstance/containerGroups","Microsoft.ContainerRegistry/registries","Microsoft.ContainerService/managedClusters","Microsoft.CustomerInsights/hubs","Microsoft.DataBoxEdge/dataBoxEdgeDevices","Microsoft.DataFactory/datafactories","Microsoft.DataFactory/factories","Microsoft.DataLakeAnalytics/accounts","Microsoft.DataLakeStore/accounts","Microsoft.DBforMariaDB/servers","Microsoft.DBforMySQL/servers","Microsoft.DBforPostgreSQL/servers","Microsoft.Devices/IotHubs","Microsoft.Devices/provisioningServices","Microsoft.DocumentDB/databaseAccounts","Microsoft.EventGrid/topics","Microsoft.EventGrid/eventSubscriptions","Microsoft.EventGrid/extensionTopics","Microsoft.EventHub/namespaces","Microsoft.EventHub/clusters","Microsoft.HDInsight/clusters","Microsoft.Insights/AutoscaleSettings","Microsoft.Insights/components","Microsoft.KeyVault/vaults","Microsoft.Kusto/clusters","Microsoft.LocationBasedServices/accounts","Microsoft.Logic/workflows","Microsoft.Logic/integrationServiceEnvironments","Microsoft.NetApp/netAppAccounts/capacityPools","Microsoft.NetApp/netAppAccounts/capacityPools/Volumes","Microsoft.Network/networkInterfaces","Microsoft.Network/loadBalancers","Microsoft.Network/dnsZones","Microsoft.Network/publicIPAddresses","Microsoft.Network/azureFirewalls","Microsoft.Network/applicationGateways","Microsoft.Network/virtualNetworkGateways","Microsoft.Network/expressRouteCircuits","Microsoft.Network/expressRouteCircuits/Peerings","Microsoft.Network/connections","Microsoft.Network/trafficManagerProfiles","Microsoft.Network/networkWatchers/connectionMonitors","Microsoft.Network/frontdoors","Microsoft.NotificationHubs/namespaces/notificationHubs","Microsoft.PowerBIDedicated/capacities","Microsoft.Relay/namespaces","Microsoft.Search/searchServices","Microsoft.ServiceBus/namespaces","Microsoft.Sql/servers/databases","Microsoft.Sql/servers/elasticPools","Microsoft.Sql/managedInstances","Microsoft.Storage/storageAccounts","Microsoft.Storage/storageAccounts/blobServices","Microsoft.Storage/storageAccounts/fileServices","Microsoft.Storage/storageAccounts/queueServices","Microsoft.Storage/storageAccounts/tableServices","Microsoft.StorageSync/storageSyncServices","Microsoft.StorageSync/storageSyncServices/syncGroups","Microsoft.StorageSync/storageSyncServices/syncGroups/serverEndpoints","Microsoft.StorageSync/storageSyncServices/registeredServers","Microsoft.StreamAnalytics/streamingJobs","Microsoft.Web/serverfarms","Microsoft.Web/sites","Microsoft.Web/sites/slots","Microsoft.Web/hostingEnvironments/multiRolePools","Microsoft.Web/hostingEnvironments/workerPools"],govazuremonitor:["Microsoft.AnalysisServices/servers","Microsoft.ApiManagement/service","Microsoft.Batch/batchAccounts","Microsoft.Cache/redis","Microsoft.ClassicCompute/virtualMachines","Microsoft.ClassicCompute/domainNames/slots/roles","Microsoft.CognitiveServices/accounts","Microsoft.Compute/virtualMachines","Microsoft.Compute/virtualMachineScaleSets","Microsoft.ContainerRegistry/registries","Microsoft.DBforMySQL/servers","Microsoft.DBforPostgreSQL/servers","Microsoft.Devices/IotHubs","Microsoft.Devices/provisioningServices","Microsoft.EventGrid/topics","Microsoft.EventGrid/eventSubscriptions","Microsoft.EventGrid/extensionTopics","Microsoft.EventHub/namespaces","Microsoft.EventHub/clusters","Microsoft.Insights/AutoscaleSettings","Microsoft.KeyVault/vaults","Microsoft.Logic/workflows","Microsoft.Network/networkInterfaces","Microsoft.Network/loadBalancers","Microsoft.Network/dnsZones","Microsoft.Network/publicIPAddresses","Microsoft.Network/azureFirewalls","Microsoft.Network/applicationGateways","Microsoft.Network/virtualNetworkGateways","Microsoft.Network/expressRouteCircuits","Microsoft.Network/expressRouteCircuits/Peerings","Microsoft.Network/connections","Microsoft.Network/trafficManagerProfiles","Microsoft.Network/networkWatchers/connectionMonitors","Microsoft.Network/frontdoors","Microsoft.NotificationHubs/namespaces/notificationHubs","Microsoft.OperationalInsights/workspaces","Microsoft.PowerBIDedicated/capacities","Microsoft.Relay/namespaces","Microsoft.ServiceBus/namespaces","Microsoft.Sql/servers/databases","Microsoft.Sql/servers/elasticPools","Microsoft.Sql/managedInstances","Microsoft.Storage/storageAccounts","Microsoft.Storage/storageAccounts/blobServices","Microsoft.Storage/storageAccounts/fileServices","Microsoft.Storage/storageAccounts/queueServices","Microsoft.Storage/storageAccounts/tableServices","Microsoft.Web/serverfarms","Microsoft.Web/sites","Microsoft.Web/sites/slots","Microsoft.Web/hostingEnvironments/multiRolePools","Microsoft.Web/hostingEnvironments/workerPools"],germanyazuremonitor:["Microsoft.AnalysisServices/servers","Microsoft.Batch/batchAccounts","Microsoft.Cache/redis","Microsoft.ClassicCompute/virtualMachines","Microsoft.ClassicCompute/domainNames/slots/roles","Microsoft.Compute/virtualMachines","Microsoft.Compute/virtualMachineScaleSets","Microsoft.DBforMySQL/servers","Microsoft.DBforPostgreSQL/servers","Microsoft.Devices/IotHubs","Microsoft.Devices/provisioningServices","Microsoft.EventHub/namespaces","Microsoft.EventHub/clusters","Microsoft.Insights/AutoscaleSettings","Microsoft.KeyVault/vaults","Microsoft.Network/networkInterfaces","Microsoft.Network/loadBalancers","Microsoft.Network/dnsZones","Microsoft.Network/publicIPAddresses","Microsoft.Network/azureFirewalls","Microsoft.Network/applicationGateways","Microsoft.Network/virtualNetworkGateways","Microsoft.Network/expressRouteCircuits","Microsoft.Network/expressRouteCircuits/Peerings","Microsoft.Network/connections","Microsoft.Network/trafficManagerProfiles","Microsoft.Network/networkWatchers/connectionMonitors","Microsoft.Network/frontdoors","Microsoft.NotificationHubs/namespaces/notificationHubs","Microsoft.PowerBIDedicated/capacities","Microsoft.Relay/namespaces","Microsoft.ServiceBus/namespaces","Microsoft.Sql/servers/databases","Microsoft.Sql/servers/elasticPools","Microsoft.Sql/managedInstances","Microsoft.Storage/storageAccounts","Microsoft.Storage/storageAccounts/blobServices","Microsoft.Storage/storageAccounts/fileServices","Microsoft.Storage/storageAccounts/queueServices","Microsoft.Storage/storageAccounts/tableServices","Microsoft.StreamAnalytics/streamingJobs","Microsoft.Web/serverfarms","Microsoft.Web/sites","Microsoft.Web/sites/slots","Microsoft.Web/hostingEnvironments/multiRolePools","Microsoft.Web/hostingEnvironments/workerPools"],chinaazuremonitor:["Microsoft.AnalysisServices/servers","Microsoft.Batch/batchAccounts","Microsoft.Cache/redis","Microsoft.ClassicCompute/virtualMachines","Microsoft.ClassicCompute/domainNames/slots/roles","Microsoft.CognitiveServices/accounts","Microsoft.Compute/virtualMachines","Microsoft.Compute/virtualMachineScaleSets","Microsoft.ContainerRegistry/registries","Microsoft.DBforMySQL/servers","Microsoft.DBforPostgreSQL/servers","Microsoft.Devices/IotHubs","Microsoft.Devices/provisioningServices","Microsoft.EventHub/namespaces","Microsoft.Insights/AutoscaleSettings","Microsoft.KeyVault/vaults","Microsoft.Logic/workflows","Microsoft.Network/networkInterfaces","Microsoft.Network/loadBalancers","Microsoft.Network/dnsZones","Microsoft.Network/publicIPAddresses","Microsoft.Network/azureFirewalls","Microsoft.Network/applicationGateways","Microsoft.Network/virtualNetworkGateways","Microsoft.Network/expressRouteCircuits","Microsoft.Network/expressRouteCircuits/Peerings","Microsoft.Network/connections","Microsoft.Network/trafficManagerProfiles","Microsoft.Network/networkWatchers/connectionMonitors","Microsoft.Network/frontdoors","Microsoft.NotificationHubs/namespaces/notificationHubs","Microsoft.PowerBIDedicated/capacities","Microsoft.Relay/namespaces","Microsoft.ServiceBus/namespaces","Microsoft.Sql/servers/databases","Microsoft.Sql/servers/elasticPools","Microsoft.Sql/managedInstances","Microsoft.Storage/storageAccounts","Microsoft.Storage/storageAccounts/blobServices","Microsoft.Storage/storageAccounts/fileServices","Microsoft.Storage/storageAccounts/queueServices","Microsoft.Storage/storageAccounts/tableServices","Microsoft.StreamAnalytics/streamingJobs","Microsoft.Web/serverfarms","Microsoft.Web/sites","Microsoft.Web/sites/slots","Microsoft.Web/hostingEnvironments/multiRolePools","Microsoft.Web/hostingEnvironments/workerPools"]}}return e.prototype.get=function(){return this.supportedMetricNamespaces[this.cloudName]},e}(),jr=function(){function e(e,t,n,a){this.instanceSettings=e,this.backendSrv=t,this.templateSrv=n,this.$q=a,this.apiVersion="2018-01-01",this.defaultDropdownValue="select",this.supportedMetricNamespaces=[],this.id=e.id,this.subscriptionId=e.jsonData.subscriptionId,this.cloudName=e.jsonData.cloudName||"azuremonitor",this.baseUrl="/"+this.cloudName+"/subscriptions/"+this.subscriptionId+"/resourceGroups",this.url=e.url,this.supportedMetricNamespaces=new Lr(this.cloudName).get()}return e.$inject=["instanceSettings","backendSrv","templateSrv","$q"],e.prototype.isConfigured=function(){return!!this.subscriptionId&&this.subscriptionId.length>0},e.prototype.query=function(e){var t=this,n=$.a.filter(e.targets,function(e){return!0!==e.hide&&e.azureMonitor.resourceGroup&&e.azureMonitor.resourceGroup!==t.defaultDropdownValue&&e.azureMonitor.resourceName&&e.azureMonitor.resourceName!==t.defaultDropdownValue&&e.azureMonitor.metricDefinition&&e.azureMonitor.metricDefinition!==t.defaultDropdownValue&&e.azureMonitor.metricName&&e.azureMonitor.metricName!==t.defaultDropdownValue}).map(function(n){var a=n.azureMonitor;a.timeGrainUnit&&"auto"!==a.timeGrain&&(a.timeGrain=$r.createISO8601Duration(a.timeGrain,a.timeGrainUnit));var r=t.templateSrv.replace(a.resourceGroup,e.scopedVars),i=t.templateSrv.replace(a.resourceName,e.scopedVars),o=t.templateSrv.replace(a.metricDefinition,e.scopedVars),s=t.templateSrv.replace((a.timeGrain||"").toString(),e.scopedVars),l=new Fr(a.metricName,e.range.from,e.range.to,s,e.interval);a.timeGrains&&l.setAllowedTimeGrains(a.timeGrains),a.aggregation&&l.setAggregation(a.aggregation),a.dimension&&"None"!==a.dimension&&l.setDimensionFilter(a.dimension,a.dimensionFilter);var c=t.templateSrv.replace(l.generateFilter(),e.scopedVars),u=qr.buildAzureMonitorQueryUrl(t.baseUrl,r,o,i,t.apiVersion,c);return{refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.id,url:u,format:e.format,alias:a.alias,raw:!1}});if(n&&0!==n.length){var a=this.doQueries(n);return this.$q.all(a).then(function(e){return new Rr(e).parseQueryResult()})}},e.prototype.doQueries=function(e){var t=this;return $.a.map(e,function(e){return t.doRequest(e.url).then(function(t){return{result:t,query:e}}).catch(function(t){throw{error:t,query:e}})})},e.prototype.annotationQuery=function(e){},e.prototype.metricFindQuery=function(e){if(e.match(/^ResourceGroups\(\)/i))return this.getResourceGroups();var t=e.match(/^Namespaces\(([^\)]+?)(,\s?([^,]+?))?\)/i);if(t)return this.getMetricDefinitions(this.toVariable(t[1]));var n=e.match(/^ResourceNames\(([^,]+?),\s?([^,]+?)\)/i);if(n){var a=this.toVariable(n[1]),r=this.toVariable(n[2]);return this.getResourceNames(a,r)}var i=e.match(/^MetricNames\(([^,]+?),\s?([^,]+?),\s?(.+?)\)/i);if(i){a=this.toVariable(i[1]),r=this.toVariable(i[2]);var o=this.toVariable(i[3]);return this.getMetricNames(a,r,o)}},e.prototype.toVariable=function(e){return this.templateSrv.replace((e||"").trim())},e.prototype.getResourceGroups=function(){var e=this.baseUrl+"?api-version="+this.apiVersion;return this.doRequest(e).then(function(e){return Rr.parseResponseValues(e,"name","name")})},e.prototype.getMetricDefinitions=function(e){var t=this,n=this.baseUrl+"/"+e+"/resources?api-version="+this.apiVersion;return this.doRequest(n).then(function(e){return Rr.parseResponseValues(e,"type","type")}).then(function(e){return $.a.filter(e,function(e){for(var n=0;n<t.supportedMetricNamespaces.length;n++)if(e.value.toLowerCase()===t.supportedMetricNamespaces[n].toLowerCase())return!0;return!1})}).then(function(e){for(var t=!1,n=0;n<e.length;n++)if("Microsoft.Storage/storageAccounts"===e[n].value){t=!0;break}return t&&(e.push({text:"Microsoft.Storage/storageAccounts/blobServices",value:"Microsoft.Storage/storageAccounts/blobServices"}),e.push({text:"Microsoft.Storage/storageAccounts/fileServices",value:"Microsoft.Storage/storageAccounts/fileServices"}),e.push({text:"Microsoft.Storage/storageAccounts/tableServices",value:"Microsoft.Storage/storageAccounts/tableServices"}),e.push({text:"Microsoft.Storage/storageAccounts/queueServices",value:"Microsoft.Storage/storageAccounts/queueServices"})),e})},e.prototype.getResourceNames=function(e,t){var n=this.baseUrl+"/"+e+"/resources?api-version="+this.apiVersion;return this.doRequest(n).then(function(e){if(!$.a.startsWith(t,"Microsoft.Storage/storageAccounts/"))return Rr.parseResourceNames(e,t);for(var n=Rr.parseResourceNames(e,"Microsoft.Storage/storageAccounts"),a=0;a<n.length;a++)n[a].text+="/default",n[a].value+="/default";return n})},e.prototype.getMetricNames=function(e,t,n){var a=qr.buildAzureMonitorGetMetricNamesUrl(this.baseUrl,e,t,n,this.apiVersion);return this.doRequest(a).then(function(e){return Rr.parseResponseValues(e,"name.localizedValue","name.value")})},e.prototype.getMetricMetadata=function(e,t,n,a){var r=qr.buildAzureMonitorGetMetricNamesUrl(this.baseUrl,e,t,n,this.apiVersion);return this.doRequest(r).then(function(e){return Rr.parseMetadata(e,a)})},e.prototype.testDatasource=function(){if(!this.isValidConfigField(this.instanceSettings.jsonData.tenantId))return{status:"error",message:"The Tenant Id field is required."};if(!this.isValidConfigField(this.instanceSettings.jsonData.clientId))return{status:"error",message:"The Client Id field is required."};var e=this.baseUrl+"?api-version="+this.apiVersion;return this.doRequest(e).then(function(e){return 200===e.status?{status:"success",message:"Successfully queried the Azure Monitor service.",title:"Success"}:{status:"error",message:"Returned http status code "+e.status}}).catch(function(e){var t="Azure Monitor: ";return t+=e.statusText?e.statusText+": ":"",e.data&&e.data.error&&e.data.error.code?t+=e.data.error.code+". "+e.data.error.message:e.data&&e.data.error?t+=e.data.error:e.data?t+=e.data:t+="Cannot connect to Azure Monitor REST API.",{status:"error",message:t}})},e.prototype.isValidConfigField=function(e){return e&&e.length>0},e.prototype.doRequest=function(e,t){var n=this;return void 0===t&&(t=1),this.backendSrv.datasourceRequest({url:this.url+e,method:"GET"}).catch(function(a){if(t>0)return n.doRequest(e,t-1);throw a})},e}(),Ur=function(){function e(e,t,n){this.from=e,this.to=t,this.grafanaInterval=n,this.aggregation="",this.groupBy="",this.timeGrainType="",this.timeGrain="",this.timeGrainUnit="",this.filter=""}return e.prototype.setAggregation=function(e){this.aggregation=e},e.prototype.setGroupBy=function(e){this.groupBy=e},e.prototype.setInterval=function(e,t,n){this.timeGrainType=e,this.timeGrain=t,this.timeGrainUnit=n},e.prototype.setFilter=function(e){this.filter=e},e.prototype.generate=function(){var e="timespan="+this.from.utc().format()+"/"+this.to.utc().format();return this.aggregation&&this.aggregation.length>0&&(e+="&aggregation="+this.aggregation),this.groupBy&&this.groupBy.length>0&&(e+="&segment="+this.groupBy),"specific"===this.timeGrainType&&this.timeGrain&&this.timeGrainUnit&&(e+="&interval="+$r.createISO8601Duration(this.timeGrain,this.timeGrainUnit)),"auto"===this.timeGrainType&&(e+="&interval="+$r.createISO8601DurationFromInterval(this.grafanaInterval)),this.filter&&(e+="&filter="+this.filter),e},e}(),Vr=function(){function e(e,t,n){this.rawQueryString=e,this.options=t,this.defaultTimeField=n}return e.prototype.generate=function(){var e=this,t=this.rawQueryString,n=/\$__([_a-zA-Z0-9]+)\(([^\)]*)\)/gi;t=(t=t.replace(n,function(t,n,a){return"contains"===n?e.getMultiContains(a):t})).replace(/\$__escapeMulti\(('[^]*')\)/gi,function(t,n){return e.escape(n)}),this.options&&(t=(t=(t=(t=t.replace(n,function(t,n,a){return"timeFilter"===n?e.getTimeFilter(a,e.options):t})).replace(/\$__interval/gi,this.options.interval)).replace(/\$__from/gi,this.getFrom(this.options))).replace(/\$__to/gi,this.getUntil(this.options)));var a=t;return{uriString:"query="+(t=encodeURIComponent(t)),rawQuery:a}},e.prototype.getFrom=function(e){var t=e.range.from;return"datetime("+X()(t).startOf("minute").toISOString()+")"},e.prototype.getUntil=function(e){if("now"===e.rangeRaw.to)return"now()";var t=e.range.to;return"datetime("+X()(t).startOf("minute").toISOString()+")"},e.prototype.getTimeFilter=function(e,t){var n=e||this.defaultTimeField;return"now"===t.rangeRaw.to?n+" >= "+this.getFrom(t):n+"  >= "+this.getFrom(t)+" and "+n+" <= "+this.getUntil(t)},e.prototype.getMultiContains=function(e){var t=e.indexOf(","),n=e.substring(0,t),a=e.substring(e.indexOf(",")+1);return a&&"all"===a.toLowerCase().trim()?"1 == 1":n.trim()+" in ("+a.trim()+")"},e.prototype.escape=function(e){return e.substring(1,e.length-1).split("','").map(function(e){return"@'"+e+"'"}).join(", ")},e}(),Br=function(){function e(e){this.results=e}return e.prototype.parseQueryResult=function(){for(var e=[],t=[],n=0;n<this.results.length;n++)if(this.results[n].query.raw){var a=this.results[n].query.xaxis,r=this.results[n].query.yaxis,i=this.results[n].query.spliton;t=this.results[n].result.data.Tables[0].Columns;var o=this.results[n].result.data.Tables[0].Rows;e=$.a.concat(e,this.parseRawQueryResultRow(this.results[n].query,t,o,a,r,i))}else{var s=this.results[n].result.data.value,l=this.results[n].query.alias;e=$.a.concat(e,this.parseQueryResultRow(this.results[n].query,s,l))}return e},e.prototype.parseRawQueryResultRow=function(t,n,a,r,i,o){var s=[],l=$.a.map(n,function(e){return{text:e.ColumnName,value:e.ColumnName}}),c=n.findIndex(function(e){return e.ColumnName===r}),u=i.split(","),d={};$.a.forEach(u,function(e){d[e]=n.findIndex(function(t){return t.ColumnName===e})});var p=n.findIndex(function(e){return e.ColumnName===o}),h="timestamp"===r;return $.a.forEach(a,function(n){$.a.forEach(d,function(a,r){var i=-1===p?e.findOrCreateBucket(s,r):e.findOrCreateBucket(s,n[p]),o=h?e.dateTimeToEpoch(n[c]):n[c];i.datapoints.push([n[a],o]),i.refId=t.refId,i.query=t.query,i.columnsForDropdown=l})}),s},e.prototype.parseQueryResultRow=function(t,n,a){var r=[];if(e.isSingleValue(n)){var i=e.getMetricFieldKey(n),o=e.getKeyForAggregationField(n[i]),s=e.dateTimeToEpoch(n.end);return r.push({target:i,datapoints:[[n[i][o],s]],refId:t.refId,query:t.query}),r}if(e.hasSegmentsField(n.segments[0]))for(p=0;p<n.segments.length;p++){s=e.dateTimeToEpoch(n.segments[p].end);for(var l=0;l<n.segments[p].segments.length;l++){i=e.getMetricFieldKey(n.segments[p].segments[l]),o=e.getKeyForAggregationField(n.segments[p].segments[l][i]);var c=this.getTargetName(n.segments[p].segments[l],a),u=e.findOrCreateBucket(r,c);u.datapoints.push([n.segments[p].segments[l][i][o],s]),u.refId=t.refId,u.query=t.query}}else{for(var i=e.getMetricFieldKey(n.segments[0]),d=e.findOrCreateBucket(r,i),p=0;p<n.segments.length;p++){var s=e.dateTimeToEpoch(n.segments[p].end),o=e.getKeyForAggregationField(n.segments[p][i]);d.datapoints.push([n.segments[p][i][o],s])}d.refId=t.refId,d.query=t.query}return r},e.prototype.getTargetName=function(e,t){var n="",a="",r="";for(var i in e)$.a.isObject(e[i])?n=i:(a=i,r=e[i]);if(t){return t.replace(/\{\{([\s\S]+?)\}\}/g,function(e,t,i){var o=t||i;return"metric"===o?n:"groupbyname"===o?a:"groupbyvalue"===o?r:e})}return n+"{"+a+'="'+r+'"}'},e.isSingleValue=function(t){return!e.hasSegmentsField(t)},e.findOrCreateBucket=function(e,t){var n=$.a.find(e,["target",t]);return n||(n={target:t,datapoints:[]},e.push(n)),n},e.hasSegmentsField=function(e){var t=$.a.keys(e);return $.a.indexOf(t,"segments")>-1},e.getMetricFieldKey=function(e){var t=$.a.keys(e);return $.a.filter($.a.without(t,"start","end"),function(t){return $.a.isObject(e[t])})[0]},e.getKeyForAggregationField=function(e){var t=$.a.keys(e);return $.a.intersection(t,["sum","avg","min","max","count","unique"])[0]},e.dateTimeToEpoch=function(e){return X()(e).valueOf()},e.parseMetricNames=function(t){var n=$.a.keys(t.data.metrics);return e.toTextValueList(n)},e.prototype.parseMetadata=function(e){var t=this.results.data.metrics[e];if(!t)throw Error("No data found for metric: "+e);return{primaryAggType:t.defaultAggregation,supportedAggTypes:t.supportedAggregations,supportedGroupBy:t.supportedGroupBy.all}},e.prototype.parseGroupBys=function(){return e.toTextValueList(this.results.supportedGroupBy)},e.prototype.parseQuerySchema=function(){var e={Type:"AppInsights",Tables:{}};if(this.results&&this.results.data&&this.results.data.Tables)for(var t=0;t<this.results.data.Tables[0].Rows.length;t++){var n=this.results.data.Tables[0].Rows[t],a=n[0],r=n[1],i=n[2];e.Tables[a]?e.Tables[a].OrderedColumns.push({Name:r,Type:i}):e.Tables[a]={Name:a,OrderedColumns:[{Name:r,Type:i}]}}return e},e.toTextValueList=function(e){for(var t=[],n=0;n<e.length;n++)t.push({text:e[n],value:e[n]});return t},e}(),Qr=function(){function e(e,t,n,a){this.backendSrv=t,this.templateSrv=n,this.$q=a,this.version="beta",this.logAnalyticsColumns={},this.id=e.id,this.applicationId=e.jsonData.appInsightsAppId,this.baseUrl="/appinsights/"+this.version+"/apps/"+this.applicationId,this.url=e.url}return e.$inject=["instanceSettings","backendSrv","templateSrv","$q"],e.prototype.isConfigured=function(){return!!this.applicationId&&this.applicationId.length>0},e.prototype.query=function(e){var t=this,n=$.a.filter(e.targets,function(e){return!0!==e.hide}).map(function(n){var a=n.appInsights;if(a.rawQuery){var r=(o=new Vr(t.templateSrv.replace(a.rawQueryString,e.scopedVars),e,"timestamp")).generate(),i=t.baseUrl+"/query?"+r.uriString;return{refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.id,url:i,format:e.format,alias:a.alias,query:r.rawQuery,xaxis:a.xaxis,yaxis:a.yaxis,spliton:a.spliton,raw:!0}}var o=new Ur(e.range.from,e.range.to,e.interval);"none"!==a.groupBy&&o.setGroupBy(t.templateSrv.replace(a.groupBy,e.scopedVars)),o.setAggregation(a.aggregation),o.setInterval(a.timeGrainType,t.templateSrv.replace(a.timeGrain,e.scopedVars),a.timeGrainUnit),o.setFilter(t.templateSrv.replace(a.filter||""));i=t.baseUrl+"/metrics/"+t.templateSrv.replace(encodeURI(a.metricName),e.scopedVars)+"?"+o.generate();return{refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.id,url:i,format:e.format,alias:a.alias,xaxis:"",yaxis:"",spliton:"",raw:!1}});if(n&&0!==n.length){var a=this.doQueries(n);return this.$q.all(a).then(function(e){return new Br(e).parseQueryResult()}).then(function(e){for(var n=[],a=0;a<e.length;a++)e[a].columnsForDropdown&&(t.logAnalyticsColumns[e[a].refId]=e[a].columnsForDropdown),n.push(e[a]);return n})}},e.prototype.doQueries=function(e){var t=this;return $.a.map(e,function(e){return t.doRequest(e.url).then(function(t){return{result:t,query:e}}).catch(function(t){throw{error:t,query:e}})})},e.prototype.annotationQuery=function(e){},e.prototype.metricFindQuery=function(e){if(e.match(/^AppInsightsMetricNames\(\)/i))return this.getMetricNames();var t=e.match(/^AppInsightsGroupBys\(([^\)]+?)(,\s?([^,]+?))?\)/i);if(t){var n=t[1];return this.getGroupBys(this.templateSrv.replace(n))}},e.prototype.testDatasource=function(){var e=this.baseUrl+"/metrics/metadata";return this.doRequest(e).then(function(e){return 200===e.status?{status:"success",message:"Successfully queried the Application Insights service.",title:"Success"}:{status:"error",message:"Returned http status code "+e.status}}).catch(function(e){var t="Application Insights: ";return t+=e.statusText?e.statusText+": ":"",e.data&&e.data.error&&"PathNotFoundError"===e.data.error.code?t+="Invalid Application Id for Application Insights service.":e.data&&e.data.error?t+=e.data.error.code+". "+e.data.error.message:t+="Cannot connect to Application Insights REST API.",{status:"error",message:t}})},e.prototype.doRequest=function(e,t){var n=this;return void 0===t&&(t=1),this.backendSrv.datasourceRequest({url:this.url+e,method:"GET"}).catch(function(a){if(t>0)return n.doRequest(e,t-1);throw a})},e.prototype.getMetricNames=function(){var e=this.baseUrl+"/metrics/metadata";return this.doRequest(e).then(Br.parseMetricNames)},e.prototype.getMetricMetadata=function(e){var t=this.baseUrl+"/metrics/metadata";return this.doRequest(t).then(function(t){return new Br(t).parseMetadata(e)})},e.prototype.getGroupBys=function(e){return this.getMetricMetadata(e).then(function(e){return new Br(e).parseGroupBys()})},e.prototype.getQuerySchema=function(){var e=this.baseUrl+"/query/schema";return this.doRequest(e).then(function(e){return new Br(e).parseQuerySchema()})},e}(),zr=function(){function e(e){this.results=e}return e.prototype.parseQueryResult=function(){for(var e=[],t=[],n=0;n<this.results.length;n++)if(0!==this.results[n].result.data.tables.length){t=this.results[n].result.data.tables[0].columns;var a=this.results[n].result.data.tables[0].rows;e="time_series"===this.results[n].query.resultFormat?$.a.concat(e,this.parseTimeSeriesResult(this.results[n].query,t,a)):$.a.concat(e,this.parseTableResult(this.results[n].query,t,a))}return e},e.prototype.parseTimeSeriesResult=function(t,n,a){for(var r=[],i=-1,o=-1,s=-1,l=0;l<n.length;l++)-1===i&&"datetime"===n[l].type&&(i=l),-1===o&&"string"===n[l].type&&(o=l),-1===s&&["int","long","real","double"].indexOf(n[l].type)>-1&&(s=l);if(-1===i)throw new Error("No datetime column found in the result. The Time Series format requires a time column.");return $.a.forEach(a,function(a){var l=e.dateTimeToEpoch(a[i]),c=o>-1?a[o]:n[s].name,u=e.findOrCreateBucket(r,c);u.datapoints.push([a[s],l]),u.refId=t.refId,u.query=t.query}),r},e.prototype.parseTableResult=function(e,t,n){return{type:"table",columns:$.a.map(t,function(e){return{text:e.name,type:e.type}}),rows:n,refId:e.refId,query:e.query}},e.prototype.parseToVariables=function(){var e=this.parseQueryResult(),t=[];return $.a.forEach(e,function(e){$.a.forEach($.a.flattenDeep(e.rows),function(e){t.push({text:e,value:e})})}),t},e.prototype.transformToAnnotations=function(t){var n=this.parseQueryResult(),a=[];return $.a.forEach(n,function(n){for(var r=-1,i=-1,o=-1,s=0;s<n.columns.length;s++)-1===r&&"datetime"===n.columns[s].type&&(r=s),-1===i&&"text"===n.columns[s].text.toLowerCase()&&(i=s),-1===o&&"tags"===n.columns[s].text.toLowerCase()&&(o=s);$.a.forEach(n.rows,function(n){a.push({annotation:t.annotation,time:Math.floor(e.dateTimeToEpoch(n[r])),text:n[i]?n[i].toString():"",tags:n[o]?n[o].trim().split(/\s*,\s*/):[]})})}),a},e.prototype.parseSchemaResult=function(){return{Plugins:[{Name:"pivot"}],Databases:this.createSchemaDatabaseWithTables()}},e.prototype.createSchemaDatabaseWithTables=function(){return{Default:{Name:"Default",Tables:this.createSchemaTables(),Functions:this.createSchemaFunctions()}}},e.prototype.createSchemaTables=function(){for(var e={},t=0,n=this.results.tables;t<n.length;t++){var a=n[t];e[a.name]={Name:a.name,OrderedColumns:[]};for(var r=0,i=a.columns;r<i.length;r++){var o=i[r];e[a.name].OrderedColumns.push(this.convertToKustoColumn(o))}}return e},e.prototype.convertToKustoColumn=function(e){return{Name:e.name,Type:e.type}},e.prototype.createSchemaFunctions=function(){for(var e={},t=0,n=this.results.functions;t<n.length;t++){var a=n[t];e[a.name]={Name:a.name,Body:a.body,DocString:a.displayName,Folder:a.category,FunctionKind:"Unknown",InputParameters:[],OutputColumns:[]}}return e},e.findOrCreateBucket=function(e,t){var n=$.a.find(e,["target",t]);return n||(n={target:t,datapoints:[],refId:"",query:""},e.push(n)),n},e.dateTimeToEpoch=function(e){return X()(e).valueOf()},e}(),Hr=function(){function e(e,t,n,a){this.instanceSettings=e,this.backendSrv=t,this.templateSrv=n,this.$q=a,this.id=e.id,this.baseUrl=this.instanceSettings.jsonData.azureLogAnalyticsSameAs?"/sameasloganalyticsazure":"/loganalyticsazure",this.url=e.url,this.defaultOrFirstWorkspace=this.instanceSettings.jsonData.logAnalyticsDefaultWorkspace,this.setWorkspaceUrl()}return e.$inject=["instanceSettings","backendSrv","templateSrv","$q"],e.prototype.isConfigured=function(){return!!this.instanceSettings.jsonData.logAnalyticsSubscriptionId&&this.instanceSettings.jsonData.logAnalyticsSubscriptionId.length>0||!!this.instanceSettings.jsonData.azureLogAnalyticsSameAs},e.prototype.setWorkspaceUrl=function(){if(this.instanceSettings.jsonData.subscriptionId||this.instanceSettings.jsonData.azureLogAnalyticsSameAs){this.subscriptionId=this.instanceSettings.jsonData.subscriptionId;var e=this.instanceSettings.jsonData.cloudName||"azuremonitor";this.azureMonitorUrl="/"+e+"/subscriptions/"+this.subscriptionId}else this.subscriptionId=this.instanceSettings.jsonData.logAnalyticsSubscriptionId,this.azureMonitorUrl="/workspacesloganalytics/subscriptions/"+this.subscriptionId},e.prototype.getWorkspaces=function(){var e=this.azureMonitorUrl+"/providers/Microsoft.OperationalInsights/workspaces?api-version=2017-04-26-preview";return this.doRequest(e).then(function(e){return $.a.map(e.data.value,function(e){return{text:e.name,value:e.properties.customerId}})||[]})},e.prototype.getSchema=function(e){if(!e)return Promise.resolve();var t=this.baseUrl+"/"+e+"/metadata";return this.doRequest(t).then(function(e){return new zr(e.data).parseSchemaResult()})},e.prototype.query=function(e){var t=this,n=$.a.filter(e.targets,function(e){return!0!==e.hide}).map(function(n){var a=n.azureLogAnalytics,r=new Vr(t.templateSrv.replace(a.query,e.scopedVars,t.interpolateVariable),e,"TimeGenerated").generate(),i=t.baseUrl+"/"+a.workspace+"/query?"+r.uriString;return{refId:n.refId,intervalMs:e.intervalMs,maxDataPoints:e.maxDataPoints,datasourceId:t.id,url:i,query:r.rawQuery,format:e.format,resultFormat:a.resultFormat}});if(n&&0!==n.length){var a=this.doQueries(n);return this.$q.all(a).then(function(e){return new zr(e).parseQueryResult()})}},e.prototype.metricFindQuery=function(e){var t=this;return this.getDefaultOrFirstWorkspace().then(function(n){var a=t.buildQuery(e,null,n),r=t.doQueries(a);return t.$q.all(r).then(function(e){return new zr(e).parseToVariables()}).catch(function(e){if(e.error&&e.error.data&&e.error.data.error&&e.error.data.error.innererror&&e.error.data.error.innererror.innererror)throw{message:e.error.data.error.innererror.innererror.message};if(e.error&&e.error.data&&e.error.data.error)throw{message:e.error.data.error.message}})})},e.prototype.buildQuery=function(e,t,n){var a=new Vr(this.templateSrv.replace(e,{},this.interpolateVariable),t,"TimeGenerated").generate().uriString,r=this.baseUrl+"/"+n+"/query?"+a,i=[];return i.push({datasourceId:this.id,url:r,resultFormat:"table"}),i},e.prototype.interpolateVariable=function(e,t){return"string"==typeof e?t.multi||t.includeAll?"'"+e+"'":e:"number"==typeof e?e:$.a.map(e,function(t){return"number"==typeof e?e:"'"+t+"'"}).join(",")},e.prototype.getDefaultOrFirstWorkspace=function(){var e=this;return this.defaultOrFirstWorkspace?Promise.resolve(this.defaultOrFirstWorkspace):this.getWorkspaces().then(function(t){return e.defaultOrFirstWorkspace=t[0].value,e.defaultOrFirstWorkspace})},e.prototype.annotationQuery=function(e){if(!e.annotation.rawQuery)return this.$q.reject({message:"Query missing in annotation definition"});var t=this.buildQuery(e.annotation.rawQuery,e,e.annotation.workspace),n=this.doQueries(t);return this.$q.all(n).then(function(t){return new zr(t).transformToAnnotations(e)})},e.prototype.doQueries=function(e){var t=this;return $.a.map(e,function(e){return t.doRequest(e.url).then(function(t){return{result:t,query:e}}).catch(function(t){throw{error:t,query:e}})})},e.prototype.doRequest=function(e,t){var n=this;return void 0===t&&(t=1),this.backendSrv.datasourceRequest({url:this.url+e,method:"GET"}).catch(function(a){if(t>0)return n.doRequest(e,t-1);throw a})},e.prototype.testDatasource=function(){var e=this,t=this.isValidConfig();return t||this.getDefaultOrFirstWorkspace().then(function(t){var n=e.baseUrl+"/"+t+"/metadata";return e.doRequest(n)}).then(function(e){return 200===e.status?{status:"success",message:"Successfully queried the Azure Log Analytics service.",title:"Success"}:{status:"error",message:"Returned http status code "+e.status}}).catch(function(t){var n="Azure Log Analytics: ";return t.config&&t.config.url&&t.config.url.indexOf("workspacesloganalytics")>-1&&(n="Azure Log Analytics requires access to Azure Monitor but had the following error: "),{status:"error",message:n=e.getErrorMessage(n,t)}})},e.prototype.getErrorMessage=function(e,t){return e+=t.statusText?t.statusText+": ":"",t.data&&t.data.error&&t.data.error.code?e+=t.data.error.code+". "+t.data.error.message:t.data&&t.data.error?e+=t.data.error:t.data?e+=t.data:e+="Cannot connect to Azure Log Analytics REST API.",e},e.prototype.isValidConfig=function(){if(!this.instanceSettings.jsonData.azureLogAnalyticsSameAs)return this.isValidConfigField(this.instanceSettings.jsonData.logAnalyticsSubscriptionId)?this.isValidConfigField(this.instanceSettings.jsonData.logAnalyticsTenantId)?this.isValidConfigField(this.instanceSettings.jsonData.logAnalyticsClientId)?void 0:{status:"error",message:"The Client Id field is required."}:{status:"error",message:"The Tenant Id field is required."}:{status:"error",message:"The Subscription Id field is required."}},e.prototype.isValidConfigField=function(e){return e&&e.length>0},e}(),Gr=function(){function e(e,t,n,a){this.backendSrv=t,this.templateSrv=n,this.$q=a,this.name=e.name,this.id=e.id,this.azureMonitorDatasource=new jr(e,this.backendSrv,this.templateSrv,this.$q),this.appInsightsDatasource=new Qr(e,this.backendSrv,this.templateSrv,this.$q),this.azureLogAnalyticsDatasource=new Hr(e,this.backendSrv,this.templateSrv,this.$q)}return e.$inject=["instanceSettings","backendSrv","templateSrv","$q"],e.prototype.query=function(e){var t=[],n=$.a.cloneDeep(e),a=$.a.cloneDeep(e),r=$.a.cloneDeep(e);if(n.targets=$.a.filter(n.targets,["queryType","Azure Monitor"]),a.targets=$.a.filter(a.targets,["queryType","Application Insights"]),r.targets=$.a.filter(r.targets,["queryType","Azure Log Analytics"]),n.targets.length>0){var i=this.azureMonitorDatasource.query(n);i&&t.push(i)}if(a.targets.length>0){var o=this.appInsightsDatasource.query(a);o&&t.push(o)}if(r.targets.length>0){var s=this.azureLogAnalyticsDatasource.query(r);s&&t.push(s)}return 0===t.length?this.$q.when({data:[]}):Promise.all(t).then(function(e){return{data:$.a.flatten(e)}})},e.prototype.annotationQuery=function(e){return this.azureLogAnalyticsDatasource.annotationQuery(e)},e.prototype.metricFindQuery=function(e){if(!e)return Promise.resolve([]);var t=this.appInsightsDatasource.metricFindQuery(e);if(t)return t;var n=this.azureMonitorDatasource.metricFindQuery(e);if(n)return n;var a=this.azureLogAnalyticsDatasource.metricFindQuery(e);return a||Promise.resolve([])},e.prototype.testDatasource=function(){var e=[];return this.azureMonitorDatasource.isConfigured()&&e.push(this.azureMonitorDatasource.testDatasource()),this.appInsightsDatasource.isConfigured()&&e.push(this.appInsightsDatasource.testDatasource()),this.azureLogAnalyticsDatasource.isConfigured()&&e.push(this.azureLogAnalyticsDatasource.testDatasource()),0===e.length?{status:"error",message:"Nothing configured. At least one of the API's must be configured.",title:"Error"}:this.$q.all(e).then(function(e){for(var t="success",n="",a=0;a<e.length;a++)"success"!==e[a].status&&(t=e[a].status),n+=a+1+". "+e[a].message+" ";return{status:t,message:n,title:$.a.upperFirst(t)}})},e.prototype.getResourceGroups=function(){return this.azureMonitorDatasource.getResourceGroups()},e.prototype.getMetricDefinitions=function(e){return this.azureMonitorDatasource.getMetricDefinitions(e)},e.prototype.getResourceNames=function(e,t){return this.azureMonitorDatasource.getResourceNames(e,t)},e.prototype.getMetricNames=function(e,t,n){return this.azureMonitorDatasource.getMetricNames(e,t,n)},e.prototype.getMetricMetadata=function(e,t,n,a){return this.azureMonitorDatasource.getMetricMetadata(e,t,n,a)},e.prototype.getAppInsightsMetricNames=function(){return this.appInsightsDatasource.getMetricNames()},e.prototype.getAppInsightsMetricMetadata=function(e){return this.appInsightsDatasource.getMetricMetadata(e)},e.prototype.getAppInsightsColumns=function(e){return this.appInsightsDatasource.logAnalyticsColumns[e]},e.prototype.getAzureLogAnalyticsWorkspaces=function(){return this.azureLogAnalyticsDatasource.getWorkspaces()},e}(),Wr="prism-token";var Yr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRef=function(e){t.el=e},t}return Q.c(t,e),t.prototype.componentDidUpdate=function(e){this.props.isSelected&&!e.isSelected&&function(e){if(e&&e.offsetParent){var t=e.offsetParent;(e.offsetTop>t.scrollTop+t.offsetHeight||e.offsetTop<t.scrollTop)&&(t.scrollTop=e.offsetTop-t.offsetTop)}}(this.el)},t.prototype.render=function(){var e=this.props,t=e.hint,n=e.isSelected,a=e.label,r=e.onClickItem,i=n?"typeahead-item typeahead-item__selected":"typeahead-item";return le.a.createElement("li",{ref:this.getRef,className:i,onClick:function(){return r(a)}},a,t&&n?le.a.createElement("div",{className:"typeahead-item-hint"},t):null)},t}(le.a.PureComponent),Kr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.items,n=e.label,a=e.selected,r=e.onClickItem;return le.a.createElement("li",{className:"typeahead-group"},le.a.createElement("div",{className:"typeahead-group__title"},n),le.a.createElement("ul",{className:"typeahead-group__list"},t.map(function(e){var t="object"==typeof e?e.text:e,n="object"==typeof e?e.display||e.text:e;return le.a.createElement(Yr,{key:t,onClickItem:r,isSelected:a.indexOf(t)>-1,hint:e.hint,label:n})})))},t}(le.a.PureComponent),Xr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.groupedItems,n=e.menuRef,a=e.selectedItems,r=e.onClickItem;return le.a.createElement("ul",{className:"typeahead",ref:n},t.map(function(e){return le.a.createElement(Kr,Q.a({key:e.label,onClickItem:r,selected:a},e))}))},t}(le.a.PureComponent),Jr=n(196);function Zr(e){return e?e.reduce(function(e,t){return e.concat(t.items)},[]):[]}var ei=function(e){return re.Value.create({document:function(e){var t=e.split("\n").map(function(e){return re.Block.create({type:"paragraph",nodes:[re.Text.create(e)]})});return re.Document.create({nodes:t})}(e)})},ti=function(e){function t(t){var n=e.call(this,t)||this,a=t.index,r=void 0===a?0:a,i=t.prefix,o=void 0===i?"query":i;return n.node=document.createElement("div"),n.node.classList.add("slate-typeahead","slate-typeahead-"+o+"-"+r),document.body.appendChild(n.node),n}return Q.c(t,e),t.prototype.componentWillUnmount=function(){document.body.removeChild(this.node)},t.prototype.render=function(){return ue.a.createPortal(this.props.children,this.node)},t}(le.a.Component),ni=function(e){function t(t,n){var a=e.call(this,t,n)||this;a.keybindingSrv=Object(Jr.a)(),a.onChange=function(e){var t=e.value,n=t.document!==a.state.value.document;a.setState({value:t},function(){n&&(requestAnimationFrame(function(){return a.onTypeahead()}),a.onChangeQuery())})},a.request=function(e){return a.props.request?a.props.request(e):fetch(e)},a.onChangeQuery=function(){var e=a.props.onQueryChange;e&&e(oe.a.serialize(a.state.value))},a.onKeyDown=function(e,t){var n=a.state,r=n.typeaheadIndex,i=n.suggestions;switch(e.key){case"Escape":if(a.menuEl)return e.preventDefault(),e.stopPropagation(),a.resetTypeahead(),!0;break;case" ":if(e.ctrlKey)return e.preventDefault(),a.onTypeahead(!0),!0;break;case"Tab":case"Enter":if(a.menuEl){if(e.preventDefault(),!i||0===i.length)return;var o=Zr(i),s=o[Math.abs(r)%o.length||0];return a.applyTypeahead(t,s),!0}break;case"ArrowDown":a.menuEl&&(e.preventDefault(),a.setState({typeaheadIndex:r+1}));break;case"ArrowUp":a.menuEl&&(e.preventDefault(),a.setState({typeaheadIndex:Math.max(0,r-1)}))}},a.onTypeahead=function(e,t){return e||a.state.value.change()},a.resetTypeahead=function(){a.setState({suggestions:[],typeaheadIndex:0,typeaheadPrefix:"",typeaheadContext:null})},a.handleBlur=function(){var e=a.props.onBlur;a.resetTimer=setTimeout(a.resetTypeahead,100),e&&e(),a.restoreEscapeKeyBinding()},a.handleFocus=function(){var e=a.props.onFocus;e&&e(),a.removeEscapeKeyBinding()},a.onClickItem=function(e){var t=a.state.suggestions;if(t&&0!==t.length){var n=Zr(t),r=$.a.find(n,function(t){return t.display===e||t.text===e}),i=a.applyTypeahead(a.state.value.change(),r);a.onChange(i)}},a.updateMenu=function(){var e=a.state.suggestions,t=a.menuEl,n=window.getSelection().anchorNode;if(t)if(e&&e.length>0){if(n&&n.parentElement){var r=n.parentElement.getBoundingClientRect(),i=window.scrollX,o=window.scrollY,s=window.innerHeight,l=r.left+i-2,c=r.top+o+r.height+4,u=s-c-10;requestAnimationFrame(function(){t.style.opacity=1,t.style.top=c+"px",t.style.left=l+"px",t.style.maxHeight=u+"px"})}}else t.removeAttribute("style")},a.menuRef=function(e){a.menuEl=e},a.renderMenu=function(){var e=a.props.portalPrefix,t=a.state.suggestions;if(!(t&&t.length>0))return null;var n=Math.max(a.state.typeaheadIndex,0),r=Zr(t);n=n%r.length||0;var i=(r.length>0?[r[n]]:[]).map(function(e){return"object"==typeof e?e.text:e});return le.a.createElement(ti,{prefix:e},le.a.createElement(Xr,{menuRef:a.menuRef,selectedItems:i,onClickItem:a.onClickItem,groupedItems:t}))};var r=t.prismDefinition,i=void 0===r?{}:r,o=t.prismLanguage,s=void 0===o?"kusto":o;return a.plugins=[aa(),{onKeyDown:function(e,t){var n=t.value;if(n.isCollapsed&&"k"===e.key&&e.ctrlKey){e.preventDefault();var a=n.anchorText.text,r=n.anchorOffset,i=a.length-r;return t.deleteForward(i),!0}}},ra({handler:t.onPressEnter}),{onKeyDown:function(e,t){var n=t.value;if(n.isCollapsed&&"Enter"===e.key&&e.shiftKey){e.preventDefault();var a=function(e){var t=e.length-e.trimLeft().length;if(t){for(var n=e[0];--t;)n+=e[0];return n}return""}(n.startBlock.text);return t.splitBlock().insertText(a).focus()}}},function(e){var t=e.definition,n=e.language;return t&&(ae.a.languages[n]=ae.a.languages[n]||t),{renderMark:function(e){var t=e.children,n=e.mark;if(n.type===Wr){var a="token "+n.data.get("types");return le.a.createElement("span",{className:a},t)}},decorateNode:function(e){if("paragraph"!==e.type)return[];var t=e.getTexts().toArray(),a=t.map(function(e){return e.text}).join("\n"),r=ae.a.languages[n],i=ae.a.tokenize(a,r),o=[],s=t.shift(),l=s,c=0,u=0,d=0;function p(e,n){var a=(n||"")+" "+(e.type||"")+" "+(e.alias||"");if("string"==typeof e||"string"==typeof e.content){s=l,c=u;var r="string"==typeof e?e:e.content,i=r.split("\n").length-1,h=r.length-i,f=d+h,m=s.text.length-c,g=h;for(u=c+g;m<g;)g=h-m,m=(l=t.shift()).text.length,u=g;if("string"!=typeof e||n){var v={anchorKey:s.key,anchorOffset:c,focusKey:l.key,focusOffset:u,marks:[{type:Wr,data:{types:a}}]};o.push(v)}d=f}else if(e.content&&e.content.length)for(var b=0,y=e.content;b<y.length;b++)p(y[b],a)}for(var h=0,f=i;h<f.length;h++)p(f[h]);return o}}}({definition:i,language:s})],a.state={labelKeys:{},labelValues:{},suggestions:[],typeaheadIndex:0,typeaheadPrefix:"",value:ei(t.initialQuery||"")},a}return Q.c(t,e),t.prototype.componentDidMount=function(){this.updateMenu()},t.prototype.componentWillUnmount=function(){this.restoreEscapeKeyBinding(),clearTimeout(this.resetTimer)},t.prototype.componentDidUpdate=function(){this.updateMenu()},t.prototype.applyTypeahead=function(e,t){return{value:{}}},t.prototype.removeEscapeKeyBinding=function(){this.keybindingSrv.unbind("esc","keydown")},t.prototype.restoreEscapeKeyBinding=function(){this.keybindingSrv.setupGlobal()},t.prototype.render=function(){return le.a.createElement("div",{className:"slate-query-field"},this.renderMenu(),le.a.createElement(ie.a,{autoCorrect:!1,onBlur:this.handleBlur,onKeyDown:this.onKeyDown,onChange:this.onChange,onFocus:this.handleFocus,placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value}))},t}(le.a.Component);var ai=[{text:"!between",hint:"Matches the input that is outside the inclusive range."},{text:"as",hint:"Binds a name to the operator's input tabular expression."},{text:"between",hint:"Matches the input that is inside the inclusive range."},{text:"consume",hint:"The `consume` operator consumes the tabular data stream handed to it. It is\r\nmostly used for triggering the query side-effect without actually returning\r\nthe results back to the caller."},{text:"count",hint:"Returns the number of records in the input record set."},{text:"datatable",hint:"Returns a table whose schema and values are defined in the query itself."},{text:"distinct",hint:"Produces a table with the distinct combination of the provided columns of the input table."},{text:"evaluate",hint:"Invokes a service-side query extension (plugin)."},{text:"extend",hint:"Create calculated columns and append them to the result set."},{text:"externaldata",hint:"Returns a table whose schema is defined in the query itself, and whose data is read from an external raw file."},{text:"facet",hint:"Returns a set of tables, one for each specified column.\r\nEach table specifies the list of values taken by its column.\r\nAn additional table can be created by using the `with` clause."},{text:"find",hint:"Finds rows that match a predicate across a set of tables."},{text:"fork",hint:"Runs multiple consumer operators in parallel."},{text:"getschema",hint:"Produce a table that represents a tabular schema of the input."},{text:"in",hint:"Filters a recordset based on the provided set of values."},{text:"invoke",hint:"Invokes lambda that receives the source of `invoke` as tabular parameter argument."},{text:"join",hint:"Merge the rows of two tables to form a new table by matching values of the specified column(s) from each table."},{text:"limit",hint:"Return up to the specified number of rows."},{text:"make-series",hint:"Create series of specified aggregated values along specified axis."},{text:"mvexpand",hint:"Expands multi-value array or property bag."},{text:"order",hint:"Sort the rows of the input table into order by one or more columns."},{text:"parse",hint:"Evaluates a string expression and parses its value into one or more calculated columns."},{text:"print",hint:"Evaluates one or more scalar expressions and inserts the results (as a single-row table with as many columns as there are expressions) into the output."},{text:"project",hint:"Select the columns to include, rename or drop, and insert new computed columns."},{text:"project-away",hint:"Select what  columns to exclude from the input."},{text:"project-rename",hint:"Renames columns in the result output."},{text:"range",hint:"Generates a single-column table of values."},{text:"reduce",hint:"Groups a set of strings together based on values similarity."},{text:"render",hint:"Instructs the user agent to render the results of the query in a particular way."},{text:"sample",hint:"Returns up to the specified number of random rows from the input table."},{text:"sample-distinct",hint:"Returns a single column that contains up to the specified number of distinct values of the requested column."},{text:"search",hint:"The search operator provides a multi-table/multi-column search experience."},{text:"serialize",hint:"Marks that order of the input row set is safe for window functions usage."},{text:"sort",hint:"Sort the rows of the input table into order by one or more columns."},{text:"summarize",hint:"Produces a table that aggregates the content of the input table."},{text:"take",hint:"Return up to the specified number of rows."},{text:"top",hint:"Returns the first *N* records sorted by the specified columns."},{text:"top-hitters",hint:"Returns an approximation of the first *N* results (assuming skewed distribution of the input)."},{text:"top-nested",hint:"Produces hierarchical top results, where each level is a drill-down based on previous level values."},{text:"union",hint:"Takes two or more tables and returns the rows of all of them."},{text:"where",hint:"Filters a table to the subset of rows that satisfy a predicate."}],ri=[{text:"abs",hint:"Calculates the absolute value of the input."},{text:"acos",hint:"Returns the angle whose cosine is the specified number (the inverse operation of [`cos()`](cosfunction.md)) ."},{text:"ago",hint:"Subtracts the given timespan from the current UTC clock time."},{text:"any",hint:"Returns random non-empty value from the specified expression values."},{text:"arg_max",hint:"Finds a row in the group that maximizes *ExprToMaximize*, and returns the value of *ExprToReturn* (or `*` to return the entire row)."},{text:"arg_min",hint:"Finds a row in the group that minimizes *ExprToMinimize*, and returns the value of *ExprToReturn* (or `*` to return the entire row)."},{text:"argmax",hint:"Finds a row in the group that maximizes *ExprToMaximize*, and returns the value of *ExprToReturn* (or `*` to return the entire row)."},{text:"argmin",hint:"Finds a row in the group that minimizes *ExprToMinimize*, and returns the value of *ExprToReturn* (or `*` to return the entire row)."},{text:"array_concat",hint:"Concatenates a number of dynamic arrays to a single array."},{text:"array_length",hint:"Calculates the number of elements in a dynamic array."},{text:"array_slice",hint:"Extracts a slice of a dynamic array."},{text:"array_split",hint:"Splits an array to multiple arrays according to the split indices and packs the generated array in a dynamic array."},{text:"asin",hint:"Returns the angle whose sine is the specified number (the inverse operation of [`sin()`](sinfunction.md)) ."},{text:"assert",hint:"Checks for a condition; if the condition is false, outputs error messages and fails the query."},{text:"atan",hint:"Returns the angle whose tangent is the specified number (the inverse operation of [`tan()`](tanfunction.md)) ."},{text:"atan2",hint:"Calculates the angle, in radians, between the positive x-axis and the ray from the origin to the point (y, x)."},{text:"avg",hint:"Calculates the average of *Expr* across the group."},{text:"avgif",hint:"Calculates the [average](avg-aggfunction.md) of *Expr* across the group for which *Predicate* evaluates to `true`."},{text:"bag_keys",hint:"Enumerates all the root keys in a dynamic property-bag object."},{text:"base64_decodestring",hint:"Decodes a base64 string to a UTF-8 string"},{text:"base64_encodestring",hint:"Encodes a string as base64 string"},{text:"beta_cdf",hint:"Returns the standard cumulative beta distribution function."},{text:"beta_inv",hint:"Returns the inverse of the beta cumulative probability beta density function."},{text:"beta_pdf",hint:"Returns the probability density beta function."},{text:"bin",hint:"Rounds values down to an integer multiple of a given bin size."},{text:"bin_at",hint:"Rounds values down to a fixed-size 'bin', with control over the bin's starting point.\r\n(See also [`bin function`](./binfunction.md).)"},{text:"bin_auto",hint:"Rounds values down to a fixed-size 'bin', with control over the bin size and starting point provided by a query property."},{text:"binary_and",hint:"Returns a result of the bitwise `and` operation between two values."},{text:"binary_not",hint:"Returns a bitwise negation of the input value."},{text:"binary_or",hint:"Returns a result of the bitwise `or` operation of the two values."},{text:"binary_shift_left",hint:"Returns binary shift left operation on a pair of numbers."},{text:"binary_shift_right",hint:"Returns binary shift right operation on a pair of numbers."},{text:"binary_xor",hint:"Returns a result of the bitwise `xor` operation of the two values."},{text:"buildschema",hint:"Returns the minimal schema that admits all values of *DynamicExpr*."},{text:"case",hint:"Evaluates a list of predicates and returns the first result expression whose predicate is satisfied."},{text:"ceiling",hint:"Calculates the smallest integer greater than, or equal to, the specified numeric expression."},{text:"cluster",hint:"Changes the reference of the query to a remote cluster."},{text:"coalesce",hint:"Evaluates a list of expressions and returns the first non-null (or non-empty for string) expression."},{text:"cos",hint:"Returns the cosine function."},{text:"cot",hint:"Calculates the trigonometric cotangent of the specified angle, in radians."},{text:"count",hint:"Returns a count of the records per summarization group (or in total if summarization is done without grouping)."},{text:"countif",hint:"Returns a count of rows for which *Predicate* evaluates to `true`."},{text:"countof",hint:"Counts occurrences of a substring in a string. Plain string matches may overlap; regex matches do not."},{text:"current_principal",hint:"Returns the current principal running this query."},{text:"cursor_after",hint:"A predicate over the records of a table to compare their ingestion time\r\nagainst a database cursor."},{text:"cursor_before_or_at",hint:"A predicate over the records of a table to compare their ingestion time\r\nagainst a database cursor."},{text:"database",hint:"Changes the reference of the query to a specific database within the cluster scope."},{text:"datetime_add",hint:"Calculates a new [datetime](./scalar-data-types/datetime.md) from a specified datepart multiplied by a specified amount, added to a specified [datetime](./scalar-data-types/datetime.md)."},{text:"datetime_diff",hint:"Calculates calendarian difference between two [datetime](./scalar-data-types/datetime.md) values."},{text:"datetime_part",hint:"Extracts the requested date part as an integer value."},{text:"dayofmonth",hint:"Returns the integer number representing the day number of the given month"},{text:"dayofweek",hint:"Returns the integer number of days since the preceding Sunday, as a `timespan`."},{text:"dayofyear",hint:"Returns the integer number represents the day number of the given year."},{text:"dcount",hint:"Returns an estimate of the number of distinct values of *Expr* in the group."},{text:"dcount_hll",hint:"Calculates the dcount from hll results (which was generated by [hll](hll-aggfunction.md) or [hll_merge](hll-merge-aggfunction.md))."},{text:"dcountif",hint:"Returns an estimate of the number of distinct values of *Expr* of rows for which *Predicate* evaluates to `true`."},{text:"degrees",hint:"Converts angle value in radians into value in degrees, using formula `degrees = (180 / PI ) * angle_in_radians`"},{text:"distance",hint:"Returns the distance between two points in meters."},{text:"endofday",hint:"Returns the end of the day containing the date, shifted by an offset, if provided."},{text:"endofmonth",hint:"Returns the end of the month containing the date, shifted by an offset, if provided."},{text:"endofweek",hint:"Returns the end of the week containing the date, shifted by an offset, if provided."},{text:"endofyear",hint:"Returns the end of the year containing the date, shifted by an offset, if provided."},{text:"estimate_data_size",hint:"Returns an estimated data size of the selected columns of the tabular expression."},{text:"exp",hint:"The base-e exponential function of x, which is e raised to the power x: e^x."},{text:"exp10",hint:"The base-10 exponential function of x, which is 10 raised to the power x: 10^x.  \r\n**Syntax**"},{text:"exp2",hint:"The base-2 exponential function of x, which is 2 raised to the power x: 2^x."},{text:"extent_id",hint:'Returns a unique identifier that identifies the data shard ("extent") that the current record resides in.'},{text:"extent_tags",hint:'Returns a dynamic array with the [tags](../management/extents-overview.md#extent-tagging) of the data shard ("extent") that the current record resides in.'},{text:"extract",hint:"Get a match for a [regular expression](./re2.md) from a text string."},{text:"extract_all",hint:"Get all matches for a [regular expression](./re2.md) from a text string."},{text:"extractjson",hint:"Get a specified element out of a JSON text using a path expression."},{text:"floor",hint:"An alias for [`bin()`](binfunction.md)."},{text:"format_datetime",hint:"Formats a datetime parameter based on the format pattern parameter."},{text:"format_timespan",hint:"Formats a timespan parameter based on the format pattern parameter."},{text:"gamma",hint:"Computes [gamma function](https://en.wikipedia.org/wiki/Gamma_function)"},{text:"getmonth",hint:"Get the month number (1-12) from a datetime."},{text:"gettype",hint:"Returns the runtime type of its single argument."},{text:"getyear",hint:"Returns the year part of the `datetime` argument."},{text:"hash",hint:"Returns a hash value for the input value."},{text:"hash_sha256",hint:"Returns a sha256 hash value for the input value."},{text:"hll",hint:"Calculates the Intermediate results of [dcount](dcount-aggfunction.md) across the group."},{text:"hll_merge",hint:"Merges hll results (scalar version of the aggregate version [`hll_merge()`](hll-merge-aggfunction.md))."},{text:"hourofday",hint:"Returns the integer number representing the hour number of the given date"},{text:"iff",hint:"Evaluates the first argument (the predicate), and returns the value of either the second or third arguments, depending on whether the predicate evaluated to `true` (second) or `false` (third)."},{text:"iif",hint:"Evaluates the first argument (the predicate), and returns the value of either the second or third arguments, depending on whether the predicate evaluated to `true` (second) or `false` (third)."},{text:"indexof",hint:"Function reports the zero-based index of the first occurrence of a specified string within input string."},{text:"ingestion_time",hint:"Retrieves the record's `$IngestionTime` hidden `datetime` column, or null."},{text:"iscolumnexists",hint:"Returns a boolean value indicating if the given string argument exists in the schema produced by the preceding tabular operator."},{text:"isempty",hint:"Returns `true` if the argument is an empty string or is null."},{text:"isfinite",hint:"Returns whether input is a finite value (is neither infinite nor NaN)."},{text:"isinf",hint:"Returns whether input is an infinite (positive or negative) value."},{text:"isnan",hint:"Returns whether input is Not-a-Number (NaN) value."},{text:"isnotempty",hint:"Returns `true` if the argument is not an empty string nor it is a null."},{text:"isnotnull",hint:"Returns `true` if the argument is not null."},{text:"isnull",hint:"Evaluates its sole argument and returns a `bool` value indicating if the argument evaluates to a null value."},{text:"log",hint:"Returns the natural logarithm function."},{text:"log10",hint:"Returns the common (base-10) logarithm function."},{text:"log2",hint:"Returns the base-2 logarithm function."},{text:"loggamma",hint:"Computes log of absolute value of the [gamma function](https://en.wikipedia.org/wiki/Gamma_function)"},{text:"make_datetime",hint:"Creates a [datetime](./scalar-data-types/datetime.md) scalar value from the specified date and time."},{text:"make_dictionary",hint:"Returns a `dynamic` (JSON) property-bag (dictionary) of all the values of *Expr* in the group."},{text:"make_string",hint:"Returns the string generated by the Unicode characters."},{text:"make_timespan",hint:"Creates a [timespan](./scalar-data-types/timespan.md) scalar value from the specified time period."},{text:"makelist",hint:"Returns a `dynamic` (JSON) array of all the values of *Expr* in the group."},{text:"makeset",hint:"Returns a `dynamic` (JSON) array of the set of distinct values that *Expr* takes in the group."},{text:"materialize",hint:"Allows caching a sub-query result during the time of query execution in a way that other subqueries can reference the partial result."},{text:"max",hint:"Returns the maximum value across the group."},{text:"max_of",hint:"Returns the maximum value of several evaluated numeric expressions."},{text:"merge_tdigests",hint:"Merges tdigest results (scalar version of the aggregate version [`merge_tdigests()`](merge-tdigests-aggfunction.md))."},{text:"min",hint:"Returns the minimum value agross the group."},{text:"min_of",hint:"Returns the minimum value of several evaluated numeric expressions."},{text:"monthofyear",hint:"Returns the integer number represents the month number of the given year."},{text:"next",hint:"Returns the value of a column in a row that it at some offset following the\r\ncurrent row in a [serialized row set](./windowsfunctions.md#serialized-row-set)."},{text:"not",hint:"Reverses the value of its `bool` argument."},{text:"now",hint:"Returns the current UTC clock time, optionally offset by a given timespan.\r\nThis function can be used multiple times in a statement and the clock time being referenced will be the same for all instances."},{text:"pack",hint:"Creates a `dynamic` object (property bag) from a list of names and values."},{text:"pack_all",hint:"Creates a `dynamic` object (property bag) from all the columns of the tabular expression."},{text:"pack_array",hint:"Packs all input values into a dynamic array."},{text:"parse_ipv4",hint:"Converts input to integer (signed 64-bit) number representation."},{text:"parse_json",hint:"Interprets a `string` as a [JSON value](https://json.org/)) and returns the value as [`dynamic`](./scalar-data-types/dynamic.md). \r\nIt is superior to using [extractjson() function](./extractjsonfunction.md)\r\nwhen you need to extract more than one element of a JSON compound object."},{text:"parse_path",hint:'Parses a file path `string` and returns a [`dynamic`](./scalar-data-types/dynamic.md) object that contains the following parts of the path: \r\nScheme, RootPath, DirectoryPath, DirectoryName, FileName, Extension, AlternateDataStreamName.\r\nIn addition to the simple paths with both types of slashes, supports paths with schemas (e.g. "file://..."), shared paths (e.g. "\\\\shareddrive\\users..."), long paths (e.g "\\\\?\\C:...""), alternate data streams (e.g. "file1.exe:file2.exe")'},{text:"parse_url",hint:"Parses an absolute URL `string` and returns a [`dynamic`](./scalar-data-types/dynamic.md) object contains all parts of the URL (Scheme, Host, Port, Path, Username, Password, Query Parameters, Fragment)."},{text:"parse_urlquery",hint:"Parses a url query `string` and returns a [`dynamic`](./scalar-data-types/dynamic.md) object contains the Query parameters."},{text:"parse_user_agent",hint:"Interprets a user-agent string, which identifies the user's browser and provides certain system details to servers hosting the websites the user visits. The result is returned as [`dynamic`](./scalar-data-types/dynamic.md)."},{text:"parse_version",hint:"Converts input string representation of version to a comparable decimal number."},{text:"parse_xml",hint:"Interprets a `string` as a XML value, converts the value to a [JSON value](https://json.org/) and returns the value as  [`dynamic`](./scalar-data-types/dynamic.md)."},{text:"percentile",hint:"Returns an estimate for the specified [nearest-rank percentile](#nearest-rank-percentile) of the population defined by *Expr*. \r\nThe accuracy depends on the density of population in the region of the percentile."},{text:"percentile_tdigest",hint:"Calculates the percentile result from tdigest results (which was generated by [tdigest](tdigest-aggfunction.md) or [merge-tdigests](merge-tdigests-aggfunction.md))"},{text:"percentrank_tdigest",hint:"Calculates the approximate rank of the value in a set where rank is expressed as percentage of set's size. \r\nThis function can be viewed as the inverse of the percentile."},{text:"pi",hint:"Returns the constant value of Pi (π)."},{text:"point",hint:"Returns a dynamic array representation of a point."},{text:"pow",hint:"Returns a result of raising to power"},{text:"prev",hint:"Returns the value of a column in a row that it at some offset prior to the\r\ncurrent row in a [serialized row set](./windowsfunctions.md#serialized-row-set)."},{text:"radians",hint:"Converts angle value in degrees into value in radians, using formula `radians = (PI / 180 ) * angle_in_degrees`"},{text:"rand",hint:"Returns a random number."},{text:"range",hint:"Generates a dynamic array holding a series of equally-spaced values."},{text:"repeat",hint:"Generates a dynamic array holding a series of equal values."},{text:"replace",hint:"Replace all regex matches with another string."},{text:"reverse",hint:"Function makes reverse of input string."},{text:"round",hint:"Returns the rounded source to the specified precision."},{text:"row_cumsum",hint:"Calculates the cumulative sum of a column in a [serialized row set](./windowsfunctions.md#serialized-row-set)."},{text:"row_number",hint:"Returns the current row's index in a [serialized row set](./windowsfunctions.md#serialized-row-set).\r\nThe row index starts by default at `1` for the first row, and is incremented by `1` for each additional row.\r\nOptionally, the row index can start at a different value than `1`.\r\nAdditionally, the row index may be reset according to some provided predicate."},{text:"series_add",hint:"Calculates the element-wise addition of two numeric series inputs."},{text:"series_decompose",hint:"Applies a decomposition transformation on a series."},{text:"series_decompose_anomalies",hint:"Anomaly Detection based on series decomposition (refer to [series_decompose()](series-decomposefunction.md))"},{text:"series_decompose_forecast",hint:"Forecast based on series decomposition."},{text:"series_divide",hint:"Calculates the element-wise division of two numeric series inputs."},{text:"series_equals",hint:"Calculates the element-wise equals (`==`) logic operation of two numeric series inputs."},{text:"series_fill_backward",hint:"Performs backward fill interpolation of missing values in a series."},{text:"series_fill_const",hint:"Replaces missing values in a series with a specified constant value."},{text:"series_fill_forward",hint:"Performs forward fill interpolation of missing values in a series."},{text:"series_fill_linear",hint:"Performs linear interpolation of missing values in a series."},{text:"series_fir",hint:"Applies a Finite Impulse Response filter on a series."},{text:"series_fit_2lines",hint:"Applies two segments linear regression on a series, returning multiple columns."},{text:"series_fit_2lines_dynamic",hint:"Applies two segments linear regression on a series, returning dynamic object."},{text:"series_fit_line",hint:"Applies linear regression on a series, returning multiple columns."},{text:"series_fit_line_dynamic",hint:"Applies linear regression on a series, returning dynamic object."},{text:"series_greater",hint:"Calculates the element-wise greater (`>`) logic operation of two numeric series inputs."},{text:"series_greater_equals",hint:"Calculates the element-wise greater or equals (`>=`) logic operation of two numeric series inputs."},{text:"series_iir",hint:"Applies a Infinite Impulse Response filter on a series."},{text:"series_less",hint:"Calculates the element-wise less (`<`) logic operation of two numeric series inputs."},{text:"series_less_equals",hint:"Calculates the element-wise less or equal (`<=`) logic operation of two numeric series inputs."},{text:"series_multiply",hint:"Calculates the element-wise multiplication of two numeric series inputs."},{text:"series_not_equals",hint:"Calculates the element-wise not equals (`!=`) logic operation of two numeric series inputs."},{text:"series_outliers",hint:"Scores anomaly points in a series."},{text:"series_periods_detect",hint:"Finds the most significant periods that exist in a time series."},{text:"series_periods_validate",hint:"Checks whether a time series contains periodic patterns of given lengths."},{text:"series_seasonal",hint:"Calculates the seasonal component of a series according to the detected or given seasonal period."},{text:"series_stats",hint:"Returns statistics for a series in multiple columns."},{text:"series_stats_dynamic",hint:"Returns statistics for a series in dynamic object."},{text:"series_subtract",hint:"Calculates the element-wise subtraction of two numeric series inputs."},{text:"sign",hint:"Sign of a numeric expression"},{text:"sin",hint:"Returns the sine function."},{text:"split",hint:"Splits a given string according to a given delimiter and returns a string array with the contained substrings."},{text:"sqrt",hint:"Returns the square root function."},{text:"startofday",hint:"Returns the start of the day containing the date, shifted by an offset, if provided."},{text:"startofmonth",hint:"Returns the start of the month containing the date, shifted by an offset, if provided."},{text:"startofweek",hint:"Returns the start of the week containing the date, shifted by an offset, if provided."},{text:"startofyear",hint:"Returns the start of the year containing the date, shifted by an offset, if provided."},{text:"stdev",hint:"Calculates the standard deviation of *Expr* across the group, considering the group as a [sample](https://en.wikipedia.org/wiki/Sample_%28statistics%29)."},{text:"stdevif",hint:"Calculates the [stdev](stdev-aggfunction.md) of *Expr* across the group for which *Predicate* evaluates to `true`."},{text:"stdevp",hint:"Calculates the standard deviation of *Expr* across the group, considering the group as a [population](https://en.wikipedia.org/wiki/Statistical_population)."},{text:"strcat",hint:"Concatenates between 1 and 64 arguments."},{text:"strcat_array",hint:"Creates a concatenated string of array values using specified delimiter."},{text:"strcat_delim",hint:"Concatenates between 2 and 64 arguments, with delimiter, provided as first argument."},{text:"strcmp",hint:"Compares two strings."},{text:"string_size",hint:"Returns the size, in bytes, of the input string."},{text:"strlen",hint:"Returns the length, in characters, of the input string."},{text:"strrep",hint:"Repeats given [string](./scalar-data-types/string.md) provided amount of times."},{text:"substring",hint:"Extracts a substring from a source string starting from some index to the end of the string."},{text:"sum",hint:"Calculates the sum of *Expr* across the group."},{text:"sumif",hint:"Returns a sum of *Expr* for which *Predicate* evaluates to `true`."},{text:"table",hint:"References specific table using an query-time evaluated string-expression."},{text:"tan",hint:"Returns the tangent function."},{text:"tdigest",hint:"Calculates the Intermediate results of [`percentiles()`](percentiles-aggfunction.md) across the group."},{text:"tdigest_merge",hint:"Merges tdigest results (scalar version of the aggregate version [`tdigest_merge()`](tdigest-merge-aggfunction.md))."},{text:"tobool",hint:"Converts input to boolean (signed 8-bit) representation."},{text:"todatetime",hint:"Converts input to [datetime](./scalar-data-types/datetime.md) scalar."},{text:"todecimal",hint:"Converts input to decimal number representation."},{text:"todouble",hint:"Converts the input to a value of type `real`. (`todouble()` and `toreal()` are synonyms.)"},{text:"todynamic",hint:"Interprets a `string` as a [JSON value](https://json.org/) and returns the value as [`dynamic`](./scalar-data-types/dynamic.md)."},{text:"toguid",hint:"Converts input to [`guid`](./scalar-data-types/guid.md) representation."},{text:"tohex",hint:"Converts input to a hexadecimal string."},{text:"toint",hint:"Converts input to integer (signed 32-bit) number representation."},{text:"tolong",hint:"Converts input to long (signed 64-bit) number representation."},{text:"tolower",hint:"Converts input string to lower case."},{text:"toscalar",hint:"Returns a scalar constant value of the evaluated expression."},{text:"tostring",hint:"Converts input to a string representation."},{text:"totimespan",hint:"Converts input  to [timespan](./scalar-data-types/timespan.md) scalar."},{text:"toupper",hint:"Converts a string to upper case."},{text:"translate",hint:"Replaces a set of characters ('searchList') with another set of characters ('replacementList') in a given a string.\r\nThe function searches for characters in the 'searchList' and replaces them with the corresponding characters in 'replacementList'"},{text:"treepath",hint:"Enumerates all the path expressions that identify leaves in a dynamic object."},{text:"trim",hint:"Removes all leading and trailing matches of the specified regular expression."},{text:"trim_end",hint:"Removes trailing match of the specified regular expression."},{text:"trim_start",hint:"Removes leading match of the specified regular expression."},{text:"url_decode",hint:"The function converts encoded URL into a to regular URL representation."},{text:"url_encode",hint:"The function converts characters of the input URL into a format that can be transmitted over the Internet."},{text:"variance",hint:"Calculates the variance of *Expr* across the group, considering the group as a [sample](https://en.wikipedia.org/wiki/Sample_%28statistics%29)."},{text:"varianceif",hint:"Calculates the [variance](variance-aggfunction.md) of *Expr* across the group for which *Predicate* evaluates to `true`."},{text:"variancep",hint:"Calculates the variance of *Expr* across the group, considering the group as a [population](https://en.wikipedia.org/wiki/Statistical_population)."},{text:"weekofyear",hint:"Returns the integer number represents the week number."},{text:"welch_test",hint:"Computes the p_value of the [Welch-test function](https://en.wikipedia.org/wiki/Welch%27s_t-test)"},{text:"zip",hint:"The `zip` function accepts any number of `dynamic` arrays, and returns an\r\narray whose elements are each an array holding the elements of the input\r\narrays of the same index."}],ii=["by","on","contains","notcontains","containscs","notcontainscs","startswith","has","matches","regex","true","false","and","or","typeof","int","string","date","datetime","time","long","real","​boolean","bool"],oi=[{text:"$__timeFilter",display:"$__timeFilter()",hint:"Macro that uses the selected timerange in Grafana to filter the query."},{text:"$__escapeMulti",display:"$__escapeMulti()",hint:"Macro to escape multi-value template variables that contain illegal characters."},{text:"$__contains",display:"$__contains()",hint:"Macro for multi-value template variables."}],si={comment:{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0},"function-context":{pattern:/[a-z0-9_]+\([^)]*\)?/i,inside:{}},duration:{pattern:new RegExp(["SECONDS","MINUTES","HOURS","DAYS","WEEKS","MONTHS","YEARS"].join("?|")+"?","i"),alias:"number"},builtin:new RegExp("\\b(?:"+ri.map(function(e){return e.text}).join("|")+")(?=\\s*\\()","i"),string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:new RegExp("\\b(?:"+ii.join("|")+"|"+ai.map(function(e){return e.text}).join("|")+"|\\*)\\b","i"),boolean:/\b(?:true|false)\b/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/-|\+|\*|\/|>|<|==|<=?|>=?|<>|!~|~|=|\|/,punctuation:/[{};(),.:]/,variable:/(\[\[(.+?)\]\])|(\$(.+?))\b/};si["function-context"].inside={argument:{pattern:/[a-z0-9_]+(?=:)/i,alias:"symbol"},duration:si.duration,number:si.number,builtin:si.builtin,string:si.string,variable:si.variable};var li=si,ci=100,ui=function(){return{Databases:{Default:{}}}},di=function(e){return e.replace(/[{}[\]="(),!~+\-*/^%]/g,"").trim()},pi=function(e){return{text:e}},hi=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.onTypeahead=function(e){var t=window.getSelection();if(t.anchorNode){var n=t.anchorNode.parentElement;if(null===n)return;if(!n.closest(".slate-query-field")||a.state.value.isBlurred)return;var r=t.getRangeAt(0),i=t.anchorNode.textContent;if(null===i)return;var o=r.startOffset,s=di(i.substr(0,o)),l=a.state.value.anchorOffset,c=a.state.value.anchorText.text.slice(0,l),u=[],d=n.classList,p=null;if(d.contains("function-context"))p="context-function",u=a.getColumnSuggestions();else if(c.match(/(where\s(\w+\b)?$)/i))p="context-where",u=a.getColumnSuggestions();else if(c.match(/(summarize\s(\w+\b)?$)/i))p="context-summarize",u=a.getFunctionSuggestions();else if(c.match(/(summarize\s(.+\s)?by\s+([^,\s]+,\s*)*([^,\s]+\b)?$)/i))p="context-summarize-by",u=a.getColumnSuggestions();else if(c.match(/(by\s+([^,\s]+,\s*)*([^,\s]+\b)?$)/i))p="context-by",u=a.getColumnSuggestions();else if(c.match(/(on\s(.+\b)?$)/i))p="context-join-on",u=a.getColumnSuggestions();else if(c.match(/(join\s+(\(\s+)?(\w+\b)?$)/i))p="context-join",u=a.getTableSuggestions();else if(c.match(/(distinct\s(.+\b)?$)/i))p="context-distinct",u=a.getColumnSuggestions();else if(c.match(/(database\(\"(\w+)\"\)\.(.+\b)?$)/i)){p="context-database-table";var h=a.getDBFromDatabaseFunction(c);console.log(h),u=a.getTableSuggestions(h),s=s.replace(".","")}else if(fi(oe.a.serialize(a.state.value)).match(/^\s*\w*$/i)){if(p="context-new",!a.schema)return a.fetchSchema(),void setTimeout(a.onTypeahead,0);u=a.getInitialSuggestions()}else if(!s||d.contains("argument")||e)!0===e&&(p="context-builtin-forced",c.match(/\s$/i)&&(s=""),u=a.getKeywordSuggestions());else{if(c.match(/\s$/i))return void(s="");s=function(e){var t=/(?:.*\s)?([^\s]+\s*)$/gi.exec(e);if(t&&t.length>1)return t[1];return""}(s),p="context-builtin",u=a.getKeywordSuggestions()}var f=0;s=s.toLowerCase();var m=u.map(function(e){return e.items&&s&&!e.skipFilter&&(e.items=e.items.filter(function(e){return e.text.length>=s.length}),e.prefixMatch?e.items=e.items.filter(function(e){return 0===e.text.toLowerCase().indexOf(s)}):e.items=e.items.filter(function(e){return e.text.toLowerCase().indexOf(s)>-1})),f+=e.items.length,e}).filter(function(e){return e.items.length>0});a.setState({typeaheadPrefix:s,typeaheadContext:p,typeaheadText:i,suggestions:f>0?m:[]})}},a.schema=ui(),a.onTypeahead=function(e,t){var n;return function(){var a=this,r=arguments;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(a,r)},t)}}(a.onTypeahead,ci),a}return Q.c(t,e),t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.fetchSchema()},t.prototype.applyTypeahead=function(e,t){var n=this.state,a=n.typeaheadPrefix,r=n.typeaheadContext,i=n.typeaheadText,o=t.text||t,s=ea();"function"===t.type?s&&"("===s||(o+="("):"context-function"===r?s&&")"===s||(o+=")"):s&&" "===s||(o+=" "),this.resetTypeahead();var l=t.deleteBackwards||a.length,c=di(i).length-a.length,u=i.indexOf(a),d=a&&(c>0&&u>-1||o===i)?c+u:0;return e.deleteBackward(l).deleteForward(d).insertText(o).move(0).focus()},t.prototype.getInitialSuggestions=function(){return this.getTableSuggestions()},t.prototype.getKeywordSuggestions=function(){return[{prefixMatch:!0,label:"Keywords",items:ii.map(pi)},{prefixMatch:!0,label:"Operators",items:ai},{prefixMatch:!0,label:"Functions",items:ri.map(function(e){return e.type="function",e})},{prefixMatch:!0,label:"Macros",items:oi.map(function(e){return e.type="function",e})},{prefixMatch:!0,label:"Tables",items:$.a.map(this.schema.Databases.Default.Tables,function(e){return{text:e.Name}})}]},t.prototype.getFunctionSuggestions=function(){return[{prefixMatch:!0,label:"Functions",items:ri.map(function(e){return e.type="function",e})},{prefixMatch:!0,label:"Macros",items:oi.map(function(e){return e.type="function",e})}]},t.prototype.getTableSuggestions=function(e){return void 0===e&&(e="Default"),this.schema.Databases[e]?[{prefixMatch:!0,label:"Tables",items:$.a.map(this.schema.Databases[e].Tables,function(e){return{text:e.Name}})}]:[]},t.prototype.getColumnSuggestions=function(){var e=this.getTableFromContext();if(e){var t=this.schema.Databases.Default.Tables[e];if(t)return[{prefixMatch:!0,label:"Fields",items:$.a.map(t.OrderedColumns,function(e){return{text:e.Name,hint:e.Type}})}]}return[]},t.prototype.getTableFromContext=function(){var e=fi(oe.a.serialize(this.state.value)),t=/^\s*(\w+)\s*|/g.exec(e);return t&&t.length>1&&t[0]&&t[1]?t[1]:null},t.prototype.getDBFromDatabaseFunction=function(e){var t=/database\(\"(\w+)\"\)/gi.exec(e);return t&&t.length>1&&t[0]&&t[1]?t[1]:null},t.prototype.fetchSchema=function(){return Q.b(this,void 0,void 0,function(){var e;return Q.d(this,function(t){switch(t.label){case 0:return[4,this.props.getSchema()];case 1:return(e=t.sent())?("AppInsights"===e.Type&&(e=function(e){var t=ui();return t.Databases.Default=e,t}(e)),this.schema=e):this.schema=ui(),[2]}})})},t}(ni);function fi(e){var t=e.replace(/\/\/.*$/gm,"");return t=t.replace("\n"," ")}var mi=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeQuery=function(e){var t=n.props,a=t.index,r=t.change,i=n.state.query!==e;n.setState({edited:i,query:e}),r&&r(e,a)},n.onPressEnter=function(){var e=n.props.execute;e&&e()},n.state={edited:!1,query:t.query||""},n}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.variables,n=e.getSchema,a=e.placeholder,r=this.state,i=r.edited,o=r.query;return le.a.createElement("div",{className:"gf-form-input",style:{height:"auto"}},le.a.createElement(hi,{initialQuery:i?null:o,onPressEnter:this.onPressEnter,onQueryChange:this.onChangeQuery,prismLanguage:"kusto",prismDefinition:li,placeholder:a,templateVariables:t,getSchema:n}))},t.defaultProps={placeholder:"Enter a query"},t}(se.Component);Oe.c.directive("kustoEditor",["reactDirective",function(e){return e(mi,["change","database","execute","query","variables","placeholder",["getSchema",{watchDepth:"reference"}]])}]);var gi=function(e){function t(t,n,a){var r=e.call(this,t,n)||this;return r.templateSrv=a,r.defaultDropdownValue="select",r.defaults={queryType:"Azure Monitor",azureMonitor:{resourceGroup:r.defaultDropdownValue,metricDefinition:r.defaultDropdownValue,resourceName:r.defaultDropdownValue,metricName:r.defaultDropdownValue,dimensionFilter:"*",timeGrain:"auto"},azureLogAnalytics:{query:["//change this example to create your own time series query","<table name>                                                              //the table to query (e.g. Usage, Heartbeat, Perf)","| where $__timeFilter(TimeGenerated)                                      //this is a macro used to show the full chart’s time range, choose the datetime column here","| summarize count() by <group by column>, bin(TimeGenerated, $__interval) //change “group by column” to a column in your table, such as “Computer”. The $__interval macro is used to auto-select the time grain. Can also use 1h, 5m etc.","| order by TimeGenerated asc"].join("\n"),resultFormat:"time_series",workspace:r.datasource&&r.datasource.azureLogAnalyticsDatasource?r.datasource.azureLogAnalyticsDatasource.defaultOrFirstWorkspace:""},appInsights:{metricName:r.defaultDropdownValue,rawQuery:!1,rawQueryString:"",groupBy:"none",timeGrainType:"auto",xaxis:"timestamp",yaxis:"",spliton:""}},r.getWorkspaces=function(){return r.datasource.azureLogAnalyticsDatasource.getWorkspaces().then(function(e){r.workspaces=e,e.length>0&&!r.target.azureLogAnalytics.workspace&&(r.target.azureLogAnalytics.workspace=e[0].value)}).catch(r.handleQueryCtrlError.bind(r))},r.getAzureLogAnalyticsSchema=function(){return r.getWorkspaces().then(function(){return r.datasource.azureLogAnalyticsDatasource.getSchema(r.target.azureLogAnalytics.workspace)}).catch(r.handleQueryCtrlError.bind(r))},r.onLogAnalyticsQueryChange=function(e){r.target.azureLogAnalytics.query=e},r.onLogAnalyticsQueryExecute=function(){r.panelCtrl.refresh()},r.onAppInsightsQueryChange=function(e){r.target.appInsights.rawQueryString=e},r.onAppInsightsQueryExecute=function(){return r.refresh()},r.getAppInsightsQuerySchema=function(){return r.datasource.appInsightsDatasource.getQuerySchema().catch(r.handleQueryCtrlError.bind(r))},$.a.defaultsDeep(r.target,r.defaults),r.migrateTimeGrains(),r.panelCtrl.events.on("data-received",r.onDataReceived.bind(r),t),r.panelCtrl.events.on("data-error",r.onDataError.bind(r),t),r.resultFormats=[{text:"Time series",value:"time_series"},{text:"Table",value:"table"}],"Azure Log Analytics"===r.target.queryType&&r.getWorkspaces(),r}return t.$inject=["$scope","$injector","templateSrv"],Q.c(t,e),t.prototype.onDataReceived=function(e){this.lastQueryError=void 0,this.lastQuery="";var t=$.a.find(e,{refId:this.target.refId});t&&(this.lastQuery=t.query)},t.prototype.onDataError=function(e){this.handleQueryCtrlError(e)},t.prototype.handleQueryCtrlError=function(e){e.query&&e.query.refId&&e.query.refId!==this.target.refId||(e.error&&e.error.data&&e.error.data.error&&e.error.data.error.innererror?e.error.data.error.innererror.innererror?this.lastQueryError=e.error.data.error.innererror.innererror.message:this.lastQueryError=e.error.data.error.innererror.message:e.error&&e.error.data&&e.error.data.error?this.lastQueryError=e.error.data.error.message:e.error&&e.error.data?this.lastQueryError=e.error.data.message:e.data&&e.data.error?this.lastQueryError=e.data.error.message:e.data&&e.data.message?this.lastQueryError=e.data.message:this.lastQueryError=e)},t.prototype.migrateTimeGrains=function(){this.target.azureMonitor.timeGrainUnit&&("auto"!==this.target.azureMonitor.timeGrain&&(this.target.azureMonitor.timeGrain=$r.createISO8601Duration(this.target.azureMonitor.timeGrain,this.target.azureMonitor.timeGrainUnit)),delete this.target.azureMonitor.timeGrainUnit,this.onMetricNameChange())},t.prototype.replace=function(e){return this.templateSrv.replace(e,this.panelCtrl.panel.scopedVars)},t.prototype.onQueryTypeChange=function(){if("Azure Log Analytics"===this.target.queryType)return this.getWorkspaces()},t.prototype.getResourceGroups=function(e){if("Azure Monitor"===this.target.queryType&&this.datasource.azureMonitorDatasource.isConfigured())return this.datasource.getResourceGroups().catch(this.handleQueryCtrlError.bind(this))},t.prototype.getMetricDefinitions=function(e){if("Azure Monitor"===this.target.queryType&&this.target.azureMonitor.resourceGroup&&this.target.azureMonitor.resourceGroup!==this.defaultDropdownValue)return this.datasource.getMetricDefinitions(this.replace(this.target.azureMonitor.resourceGroup)).catch(this.handleQueryCtrlError.bind(this))},t.prototype.getResourceNames=function(e){if("Azure Monitor"===this.target.queryType&&this.target.azureMonitor.resourceGroup&&this.target.azureMonitor.resourceGroup!==this.defaultDropdownValue&&this.target.azureMonitor.metricDefinition&&this.target.azureMonitor.metricDefinition!==this.defaultDropdownValue)return this.datasource.getResourceNames(this.replace(this.target.azureMonitor.resourceGroup),this.replace(this.target.azureMonitor.metricDefinition)).catch(this.handleQueryCtrlError.bind(this))},t.prototype.getMetricNames=function(e){if("Azure Monitor"===this.target.queryType&&this.target.azureMonitor.resourceGroup&&this.target.azureMonitor.resourceGroup!==this.defaultDropdownValue&&this.target.azureMonitor.metricDefinition&&this.target.azureMonitor.metricDefinition!==this.defaultDropdownValue&&this.target.azureMonitor.resourceName&&this.target.azureMonitor.resourceName!==this.defaultDropdownValue)return this.datasource.getMetricNames(this.replace(this.target.azureMonitor.resourceGroup),this.replace(this.target.azureMonitor.metricDefinition),this.replace(this.target.azureMonitor.resourceName)).catch(this.handleQueryCtrlError.bind(this))},t.prototype.onResourceGroupChange=function(){this.target.azureMonitor.metricDefinition=this.defaultDropdownValue,this.target.azureMonitor.resourceName=this.defaultDropdownValue,this.target.azureMonitor.metricName=this.defaultDropdownValue,this.target.azureMonitor.dimensions=[],this.target.azureMonitor.dimension=""},t.prototype.onMetricDefinitionChange=function(){this.target.azureMonitor.resourceName=this.defaultDropdownValue,this.target.azureMonitor.metricName=this.defaultDropdownValue,this.target.azureMonitor.dimensions=[],this.target.azureMonitor.dimension=""},t.prototype.onResourceNameChange=function(){this.target.azureMonitor.metricName=this.defaultDropdownValue,this.target.azureMonitor.dimensions=[],this.target.azureMonitor.dimension=""},t.prototype.onMetricNameChange=function(){var e=this;if(this.target.azureMonitor.metricName&&this.target.azureMonitor.metricName!==this.defaultDropdownValue)return this.datasource.getMetricMetadata(this.replace(this.target.azureMonitor.resourceGroup),this.replace(this.target.azureMonitor.metricDefinition),this.replace(this.target.azureMonitor.resourceName),this.replace(this.target.azureMonitor.metricName)).then(function(t){return e.target.azureMonitor.aggOptions=t.supportedAggTypes||[t.primaryAggType],e.target.azureMonitor.aggregation=t.primaryAggType,e.target.azureMonitor.timeGrains=[{text:"auto",value:"auto"}].concat(t.supportedTimeGrains),e.target.azureMonitor.dimensions=t.dimensions,t.dimensions.length>0&&(e.target.azureMonitor.dimension=t.dimensions[0].value),e.refresh()}).catch(this.handleQueryCtrlError.bind(this))},t.prototype.getAutoInterval=function(){return"auto"===this.target.azureMonitor.timeGrain?$r.findClosestTimeGrain(this.templateSrv.builtIns.__interval.value,$.a.map(this.target.azureMonitor.timeGrains,function(e){return $r.createKbnUnitFromISO8601Duration(e.value)})||["1m","5m","15m","30m","1h","6h","12h","1d"]):""},Object.defineProperty(t.prototype,"templateVariables",{get:function(){return this.templateSrv.variables.map(function(e){return"$"+e.name})},enumerable:!0,configurable:!0}),t.prototype.getAppInsightsAutoInterval=function(){var e=this.templateSrv.builtIns.__interval.value;return"s"===e[e.length-1]?"1m":e},t.prototype.getAppInsightsMetricNames=function(){if(this.datasource.appInsightsDatasource.isConfigured())return this.datasource.getAppInsightsMetricNames().catch(this.handleQueryCtrlError.bind(this))},t.prototype.getAppInsightsColumns=function(){return this.datasource.getAppInsightsColumns(this.target.refId)},t.prototype.onAppInsightsColumnChange=function(){return this.refresh()},t.prototype.onAppInsightsMetricNameChange=function(){var e=this;if(this.target.appInsights.metricName&&this.target.appInsights.metricName!==this.defaultDropdownValue)return this.datasource.getAppInsightsMetricMetadata(this.replace(this.target.appInsights.metricName)).then(function(t){return e.target.appInsights.aggOptions=t.supportedAggTypes,e.target.appInsights.groupByOptions=t.supportedGroupBy,e.target.appInsights.aggregation=t.primaryAggType,e.refresh()}).catch(this.handleQueryCtrlError.bind(this))},t.prototype.getAppInsightsGroupBySegments=function(e){return $.a.map(this.target.appInsights.groupByOptions,function(e){return{text:e,value:e}})},t.prototype.resetAppInsightsGroupBy=function(){this.target.appInsights.groupBy="none",this.refresh()},t.prototype.updateTimeGrainType=function(){"specific"===this.target.appInsights.timeGrainType?(this.target.appInsights.timeGrain="1",this.target.appInsights.timeGrainUnit="minute"):this.target.appInsights.timeGrain="",this.refresh()},t.prototype.toggleEditorMode=function(){this.target.appInsights.rawQuery=!this.target.appInsights.rawQuery},t.templateUrl="partials/query.editor.html",t}(W.a),vi=function(){function e(){this.defaultQuery='<your table>\n| where $__timeFilter() \n| project TimeGenerated, Text=YourTitleColumn, Tags="tag1,tag2"',this.annotation.queryType=this.annotation.queryType||"Azure Log Analytics",this.annotation.rawQuery=this.annotation.rawQuery||this.defaultQuery,this.getWorkspaces()}return e.prototype.getWorkspaces=function(){var e=this;return this.workspaces&&this.workspaces.length>0?this.workspaces:this.datasource.getAzureLogAnalyticsWorkspaces().then(function(t){return e.workspaces=t,t.length>0&&!e.annotation.workspace&&(e.annotation.workspace=t[0].value),e.workspaces}).catch(function(){})},e.templateUrl="partials/annotations.editor.html",e}(),bi=function(){function e(e,t,n){this.hasRequiredGrafanaVersion=this.hasMinVersion(),this.current.jsonData.cloudName=this.current.jsonData.cloudName||"azuremonitor",this.current.jsonData.azureLogAnalyticsSameAs=this.current.jsonData.azureLogAnalyticsSameAs||!1,this.current.id&&(this.current.url="/api/datasources/proxy/"+this.current.id,this.azureLogAnalyticsDatasource=new Hr(this.current,t,null,n),this.getWorkspaces())}return e.$inject=["$scope","backendSrv","$q"],e.prototype.hasMinVersion=function(){return we(R.a.buildInfo.version,"5.2")},e.prototype.showMinVersionWarning=function(){return!this.hasRequiredGrafanaVersion&&this.current.secureJsonFields.logAnalyticsClientSecret},e.prototype.getWorkspaces=function(){var e=this;if(this.azureLogAnalyticsDatasource.isConfigured())return this.azureLogAnalyticsDatasource.getWorkspaces().then(function(t){e.workspaces=t,e.workspaces.length>0&&(e.current.jsonData.logAnalyticsDefaultWorkspace=e.current.jsonData.logAnalyticsDefaultWorkspace||e.workspaces[0].value)})},e.templateUrl="public/app/plugins/datasource/grafana-azure-monitor-datasource/partials/config.html",e}(),yi=n(645),wi="\n# Title\n\nFor markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)\n\n\n\n",xi=function(e){function t(t,n,a,r){var i=e.call(this,t,n)||this;i.templateSrv=a,i.$sce=r,i.panelDefaults={mode:"markdown",content:wi},$.a.defaults(i.panel,i.panelDefaults),i.events.on("init-edit-mode",i.onInitEditMode.bind(i)),i.events.on("refresh",i.onRefresh.bind(i)),i.events.on("render",i.onRender.bind(i));return t.$watch(function(e){var t=e.ctrl.panel;return[t.content,t.mode].join()},$.a.throttle(function(){i.render()},100)),i}return t.$inject=["$scope","$injector","templateSrv","$sce"],Q.c(t,e),t.prototype.onInitEditMode=function(){this.addEditorTab("Options","public/app/plugins/panel/text/editor.html"),"text"===this.panel.mode&&(this.panel.mode="markdown")},t.prototype.onRefresh=function(){this.render()},t.prototype.onRender=function(){"markdown"===this.panel.mode?this.renderMarkdown(this.panel.content):"html"===this.panel.mode&&this.updateContent(this.panel.content),this.renderingCompleted()},t.prototype.renderText=function(e){e=e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\n/g,"<br/>"),this.updateContent(e)},t.prototype.renderMarkdown=function(e){var t=this;this.remarkable||(this.remarkable=new q.a),this.$scope.$applyAsync(function(){t.updateContent(t.remarkable.render(e))})},t.prototype.updateContent=function(e){e=R.a.disableSanitizeHtml?e:Object(yi.b)(e);try{this.content=this.$sce.trustAsHtml(this.templateSrv.replace(e,this.panel.scopedVars))}catch(t){console.log("Text panel error: ",t),this.content=this.$sce.trustAsHtml(e)}},t.templateUrl="public/app/plugins/panel/text/module.html",t.scrollable=!0,t}(B),Si=n(6),ki=function(e){function t(t){return e.call(this,t)||this}return Q.c(t,e),t.prototype.render=function(){return le.a.createElement("h2",null,"Text Panel!")},t}(se.PureComponent),Ci=new Si.ReactPanelPlugin(ki),Ei=n(85),Ti=n(51),Mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e,t=this.props,n=t.panelData,a=t.timeRange,r=t.width,i=t.height,o=this.props.options,s=o.showLines,l=o.showBars,c=o.showPoints;return n.timeSeries&&(e=Object(Ei.u)({timeSeries:n.timeSeries,nullValueMode:Ti.NullValueMode.Ignore})),le.a.createElement(Si.Graph,{timeSeries:e,timeRange:a,showLines:s,showPoints:c,showBars:l,width:r,height:i})},t}(se.PureComponent),_i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToggleLines=function(){t.props.onChange(Q.a({},t.props.options,{showLines:!t.props.options.showLines}))},t.onToggleBars=function(){t.props.onChange(Q.a({},t.props.options,{showBars:!t.props.options.showBars}))},t.onTogglePoints=function(){t.props.onChange(Q.a({},t.props.options,{showPoints:!t.props.options.showPoints}))},t}return Q.c(t,e),t.prototype.render=function(){var e=this.props.options,t=e.showBars,n=e.showPoints,a=e.showLines;return le.a.createElement("div",null,le.a.createElement("div",{className:"section gf-form-group"},le.a.createElement("h5",{className:"section-heading"},"Draw Modes"),le.a.createElement(Si.Switch,{label:"Lines",labelClass:"width-5",checked:a,onChange:this.onToggleLines}),le.a.createElement(Si.Switch,{label:"Bars",labelClass:"width-5",checked:t,onChange:this.onToggleBars}),le.a.createElement(Si.Switch,{label:"Points",labelClass:"width-5",checked:n,onChange:this.onTogglePoints})),le.a.createElement("div",{className:"section gf-form-group"},le.a.createElement("h5",{className:"section-heading"},"Test Options"),le.a.createElement(Si.Switch,{label:"Lines",labelClass:"width-5",checked:a,onChange:this.onToggleLines}),le.a.createElement(Si.Switch,{label:"Bars",labelClass:"width-5",checked:t,onChange:this.onToggleBars}),le.a.createElement(Si.Switch,{label:"Points",labelClass:"width-5",checked:n,onChange:this.onTogglePoints})))},t}(se.PureComponent);n(209),n(396),n(397),n(398),n(650),n(651),n(652),n(653);function Ai(e,t,n){var a=Z.a.element(document).injector(),r=document.createElement("div");r.innerHTML='<annotation-tooltip event="event" on-edit="onEdit()"></annotation-tooltip>',a.invoke(["$compile","$rootScope",function(a,i){var o=n.getOptions().events.manager,s=i.$new(!0);s.event=t,s.onEdit=function(){o.editEvent(t)},a(r)(s),s.$digest(),s.$destroy();var l=new Pe.a({target:e[0],content:r,position:"bottom center",classes:"drop-popover drop-popover--annotation",openOn:"hover",hoverCloseDelay:200,tetherOptions:{constraints:[{to:"window",pin:!0,attachment:"both"}]}});l.open(),l.on("close",function(){setTimeout(function(){l.destroy()})})}])}var Di=null;function Ni(e,t,n){var a=n.getOptions().events.manager;a.editorOpen?Di=e:(a.editorOpened(),Di=e,setTimeout(function(){var e=Z.a.element(document).injector(),n=document.createElement("div");n.innerHTML='<event-editor panel-ctrl="panelCtrl" event="event" close="close()"></event-editor>',e.invoke(["$compile","$rootScope",function(e,r){var i,o=r.$new(!0);o.event=t,o.panelCtrl=a.panelCtrl,o.close=function(){i.close()},e(n)(o),o.$digest(),(i=new Pe.a({target:Di[0],content:n,position:"bottom center",classes:"drop-popover drop-popover--form",openOn:"click",tetherOptions:{constraints:[{to:"window",pin:!0,attachment:"both"}]}})).open(),a.editorOpened(),i.on("close",function(){setTimeout(function(){a.editorClosed(),o.$destroy(),i.destroy()})})}])},100))}var Pi=function(){function e(e,t,n,a,r,i,o,s){this._object=e,this._drawFunc=t,this._clearFunc=n,this._moveFunc=a,this._position={left:r,top:i},this._width=o,this._height=s}return e.$inject=["object","drawFunc","clearFunc","moveFunc","left","top","width","height"],e.prototype.width=function(){return this._width},e.prototype.height=function(){return this._height},e.prototype.position=function(){return this._position},e.prototype.draw=function(){this._drawFunc(this._object)},e.prototype.clear=function(){this._clearFunc(this._object)},e.prototype.getObject=function(){return this._object},e.prototype.moveTo=function(e){this._position=e,this._moveFunc(this._object,this._position)},e}(),Oi=function(){function e(e,t){this._options=e,this._drawableEvent=t,this._hidden=!1}return e.$inject=["options","drawableEvent"],e.prototype.visual=function(){return this._drawableEvent},e.prototype.getOptions=function(){return this._options},e.prototype.getParent=function(){return this._parent},e.prototype.isHidden=function(){return this._hidden},e.prototype.hide=function(){this._hidden=!0},e.prototype.unhide=function(){this._hidden=!1},e}(),Ii=function(){function e(e){this._events=[],this._types=[],this._plot=e,this.eventsEnabled=!1}return e.$inject=["plot"],e.prototype.getEvents=function(){return this._events},e.prototype.setTypes=function(e){return this._types=e},e.prototype.setupEvents=function(e){var t=this,n=$.a.partition(e,"isRegion"),a=n[0];e=n[1],te.a.each(e,function(e,n){var a=new Oi(n,t._buildDiv(n));t._events.push(a)}),te.a.each(a,function(e,n){var a=new Oi(n,t._buildRegDiv(n));t._events.push(a)}),this._events.sort(function(e,t){var n=e.getOptions(),a=t.getOptions();return n.min>a.min?1:n.min<a.min?-1:0})},e.prototype.drawEvents=function(){var e=this;te.a.each(this._events,function(t,n){e._insidePlot(n.getOptions().min)&&!n.isHidden()?n.visual().draw():n.visual().getObject().hide()})},e.prototype.updateEvents=function(){var e,t,n=this,a=this._plot.getPlotOffset(),r=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1];te.a.each(this._events,function(i,o){t=a.top+n._plot.height()-o.visual().height(),e=r.p2c(o.getOptions().min)+a.left-o.visual().width()/2,o.visual().moveTo({top:t,left:e})})},e.prototype._clearEvents=function(){te.a.each(this._events,function(e,t){t.visual().clear()}),this._events=[]},e.prototype._buildDiv=function(e){var t,n,a,r,i,o,s,l,c=this,u=this._plot.getPlaceholder(),d=this._plot.getPlotOffset(),p=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1],h=e.eventType;a=null!==this._types&&this._types[h]&&this._types[h].color?this._types[h].color:"#666",r=null!==this._types&&this._types[h]&&this._types[h].markerSize?this._types[h].markerSize:8,i=null===this._types||!this._types[h]||void 0===this._types[h].markerShow||this._types[h].markerShow,l=null===this._types||!this._types[h]||void 0===this._types[h].markerTooltip||this._types[h].markerTooltip,o=null!=this._types&&this._types[h]&&this._types[h].lineStyle?this._types[h].lineStyle.toLowerCase():"dashed",s=null!=this._types&&this._types[h]&&void 0!==this._types[h].lineWidth?this._types[h].lineWidth:1;var f=p.options.eventSectionHeight||0;f/=3,t=d.top+this._plot.height()+f,n=p.p2c(e.min)+d.left;var m=te()('<div class="events_line flot-temp-elem"></div>').css({position:"absolute",opacity:.8,left:n+"px",top:8,width:s+"px",height:this._plot.height()+.8*f,"border-left-width":s+"px","border-left-style":o,"border-left-color":a,color:a}).appendTo(u);if(i){var g=te()('<div class="events_marker"></div>').css({position:"absolute",left:-r-Math.round(s/2)+"px","font-size":0,"line-height":0,width:0,height:0,"border-left":r+"px solid transparent","border-right":r+"px solid transparent"});g.appendTo(m),this._types[h]&&this._types[h].position&&"BOTTOM"===this._types[h].position.toUpperCase()?g.css({top:t-r-8+"px","border-top":"none","border-bottom":r+"px solid "+a}):g.css({top:"0px","border-top":r+"px solid "+a,"border-bottom":"none"}),g.data({event:e});e.editModel&&Ni(g,e.editModel,c._plot);l&&(g.css({cursor:"help"}),g.hover(function(){Ai(g,te()(this).data("event"),c._plot)},function(){c._plot.clearSelection()}))}return new Pi(m,function(e){e.show()},function(e){e.remove()},function(e,t){e.css({top:t.top,left:t.left})},n,t,m.width(),m.height())},e.prototype._buildRegDiv=function(e){var t,n,a,r,i,o,s,l=this,c=this,u=this._plot.getPlaceholder(),d=this._plot.getPlotOffset(),p=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1],h=e.eventType;o=null!==this._types&&this._types[h]&&this._types[h].color?this._types[h].color:"#666",s=null===this._types||!this._types[h]||void 0===this._types[h].markerTooltip||this._types[h].markerTooltip,a=null!=this._types&&this._types[h]&&void 0!==this._types[h].lineWidth?this._types[h].lineWidth:1,i=null!=this._types&&this._types[h]&&this._types[h].lineStyle?this._types[h].lineStyle.toLowerCase():"dashed";t=d.top+this._plot.height()+2;var f=Math.min(e.min,e.timeEnd),m=Math.max(e.min,e.timeEnd);n=p.p2c(f)+d.left;var g=p.p2c(m)+d.left;r=g-n,$.a.each([n,g],function(e){te()('<div class="events_line flot-temp-elem"></div>').css({position:"absolute",opacity:.8,left:e+"px",top:8,width:a+"px",height:l._plot.height()+2,"border-left-width":a+"px","border-left-style":i,"border-left-color":o,color:o}).appendTo(u)});var v=te()('<div class="events_marker region_marker flot-temp-elem"></div>').css({position:"absolute",opacity:.5,left:n+"px",top:t,width:Math.round(r+a)+"px",height:"0.5rem","border-left-color":o,color:o,"background-color":o});v.appendTo(u),v.data({event:e});e.editModel&&Ni(v,e.editModel,c._plot);return s&&(v.css({cursor:"help"}),v.hover(function(){Ai(v,te()(this).data("event"),c._plot)},function(){c._plot.clearSelection()})),new Pi(v,function(e){e.show()},function(e){e.remove()},function(e,t){e.css({top:t.top,left:t.left})},n,t,v.width(),v.height())},e.prototype._insidePlot=function(e){var t=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1],n=t.p2c(e);return n>0&&n<t.p2c(t.max)},e}();function $i(e){var t=this,n=new Ii(e);e.getEvents=function(){return n._events},e.hideEvents=function(){te.a.each(n._events,function(e,t){t.visual().getObject().hide()})},e.showEvents=function(){e.hideEvents(),te.a.each(n._events,function(e,t){t.hide()}),t.eventMarkers.drawEvents()},e.setEvents=function(e){n.eventsEnabled&&n.setupEvents(e)},e.hooks.processOptions.push(function(e,t){null!=t.events.data&&(n.eventsEnabled=!0)}),e.hooks.draw.push(function(e){var t=e.getOptions();n.eventsEnabled&&(n.getEvents().length<1?(n.setTypes(t.events.types),n.setupEvents(t.events.data)):n.updateEvents()),n.drawEvents()})}te.a.plot.plugins.push({init:$i,options:{events:{data:null,types:null,xaxis:1,position:"BOTTOM"}},name:"events",version:"0.2.5"});var Fi=function(){function e(e){this.panelCtrl=e}return e.prototype.getHandleHtml=function(e,t,n){var a=t.colorMode;return"custom"===t.colorMode&&(a="critical"),'\n    <div class="alert-handle-wrapper alert-handle-wrapper--T'+e+'">\n      <div class="alert-handle-line alert-handle-line--'+a+'">\n      </div>\n      <div class="alert-handle" data-handle-index="'+e+'">\n        <i class="icon-gf icon-gf-'+a+" alert-state-"+a+'"></i>\n        <span class="alert-handle-value">'+n+'<i class="alert-handle-grip"></i></span>\n      </div>\n    </div>'},e.prototype.initDragging=function(e){var t,n=te()(e.currentTarget).parents(".alert-handle-wrapper"),a=te()(e.currentTarget).data("handleIndex"),r=null,i=this.plot,o=this.panelCtrl,s=this.thresholds[a];function l(e){if(null===r)r=e.clientY;else{var a=e.clientY-r;t+=a,r=e.clientY,n.css({top:t+a})}}function c(){var e=i.c2p({left:0,top:t}).y;e=parseInt(e.toFixed(0),10),s.value=e,n.off("mousemove",l),n.off("mouseup",l),n.off("mouseleave",l),o.$scope.$apply(function(){o.render(),o.events.emit("threshold-changed",{threshold:s,handleIndex:a})})}r=null,t=n.position().top,n.on("mousemove",l),n.on("mouseup",c),n.on("mouseleave",c)},e.prototype.cleanUp=function(){this.placeholder.find(".alert-handle-wrapper").remove(),this.needsCleanup=!1},e.prototype.renderHandle=function(e,t){var n=this.thresholds[e],a=n.value,r=a,i=0;if($.a.isNumber(a)){var o=this.plot.p2c({x:0,y:a});i=Math.round(Math.min(Math.max(o.top,0),this.height)-6)}else r="",i=t;var s=te()(this.getHandleHtml(e,n,r));this.placeholder.append(s),s.toggleClass("alert-handle-wrapper--no-value",""===r),s.css({top:i})},e.prototype.shouldDrawHandles=function(){return!this.hasSecondYAxis&&this.panelCtrl.editingThresholds&&this.panelCtrl.panel.thresholds.length>0},e.prototype.prepare=function(e,t){this.hasSecondYAxis=!1;for(var n=0;n<t.length;n++)if(t[n].yaxis>1){this.hasSecondYAxis=!0;break}if(this.shouldDrawHandles()){var a=this.panelCtrl.panel.thresholds.length>1?"220px":"110px";e.css("margin-right",a)}else this.needsCleanup&&e.css("margin-right","0")},e.prototype.draw=function(e){this.thresholds=this.panelCtrl.panel.thresholds,this.plot=e,this.placeholder=e.getPlaceholder(),this.needsCleanup&&this.cleanUp(),this.shouldDrawHandles()&&(this.height=e.height(),this.thresholds.length>0&&this.renderHandle(0,10),this.thresholds.length>1&&this.renderHandle(1,this.height-30),this.placeholder.off("mousedown",".alert-handle"),this.placeholder.on("mousedown",".alert-handle",this.initDragging.bind(this)),this.needsCleanup=!0)},e.prototype.addFlotOptions=function(e,t){if(t.thresholds&&0!==t.thresholds.length){var n,a,r,i=1/0,o=-1/0;for(n=0;n<t.thresholds.length;n++)if(a=t.thresholds[n],$.a.isNumber(a.value)){var s=void 0;switch(a.op){case"gt":s=i,t.thresholds.length>n+1&&(r=t.thresholds[n+1]).value>a.value&&(o=s=r.value);break;case"lt":s=o,t.thresholds.length>n+1&&(r=t.thresholds[n+1]).value<a.value&&(i=s=r.value)}var l=void 0,c=void 0;switch(a.colorMode){case"critical":l="rgba(234, 112, 112, 0.12)",c="rgba(237, 46, 24, 0.60)";break;case"warning":l="rgba(235, 138, 14, 0.12)",c="rgba(247, 149, 32, 0.60)";break;case"ok":l="rgba(11, 237, 50, 0.090)",c="rgba(6,163,69, 0.60)";break;case"custom":a.fillColor||(a.fillColor="rgba(255, 255, 255, 1)"),a.lineColor||(a.lineColor="rgba(255, 255, 255, 0)"),l=a.fillColor,c=a.lineColor}a.fill&&("right"===a.yaxis&&this.hasSecondYAxis?e.grid.markings.push({y2axis:{from:a.value,to:s},color:Object(Si.getColorFromHexRgbOrName)(l)}):e.grid.markings.push({yaxis:{from:a.value,to:s},color:Object(Si.getColorFromHexRgbOrName)(l)})),a.line&&("right"===a.yaxis&&this.hasSecondYAxis?e.grid.markings.push({y2axis:{from:a.value,to:a.value},color:Object(Si.getColorFromHexRgbOrName)(c)}):e.grid.markings.push({yaxis:{from:a.value,to:a.value},color:Object(Si.getColorFromHexRgbOrName)(c)}))}}},e}(),qi={gray:{themeDependent:!0,title:"Gray",darkColor:{fill:"rgba(255, 255, 255, 0.09)",line:"rgba(255, 255, 255, 0.2)"},lightColor:{fill:"rgba(0, 0, 0, 0.09)",line:"rgba(0, 0, 0, 0.2)"}},red:{title:"Red",color:{fill:"rgba(234, 112, 112, 0.12)",line:"rgba(237, 46, 24, 0.60)"}},green:{title:"Green",color:{fill:"rgba(11, 237, 50, 0.090)",line:"rgba(6,163,69, 0.60)"}},blue:{title:"Blue",color:{fill:"rgba(11, 125, 238, 0.12)",line:"rgba(11, 125, 238, 0.60)"}},yellow:{title:"Yellow",color:{fill:"rgba(235, 138, 14, 0.12)",line:"rgba(247, 149, 32, 0.60)"}},custom:{title:"Custom"}};function Ri(e,t){if(-1===Object.keys(qi).indexOf(e.colorMode)&&(e.colorMode="red"),"custom"===e.colorMode)return{fill:e.fill&&e.fillColor?Object(Si.getColorFromHexRgbOrName)(e.fillColor,t):null,line:e.line&&e.lineColor?Object(Si.getColorFromHexRgbOrName)(e.lineColor,t):null};var n=qi[e.colorMode];return!0===n.themeDependent?t===Si.GrafanaThemeType.Light?n.lightColor:n.darkColor:{fill:e.fill?Object(Si.getColorFromHexRgbOrName)(n.color.fill,t):null,line:e.fill?Object(Si.getColorFromHexRgbOrName)(n.color.line,t):null}}var Li=function(){function e(e,t){void 0===t&&(t=Si.GrafanaThemeType.Dark),this.panelCtrl=e,this.theme=t}return e.prototype.draw=function(e){this.timeRegions=this.panelCtrl.panel.timeRegions,this.plot=e},e.prototype.addFlotOptions=function(e,t){if(t.timeRegions&&0!==t.timeRegions.length){var n,a,r,i,o,s,l,c={from:X()(this.panelCtrl.range.from).utc(),to:X()(this.panelCtrl.range.to).utc()},u=t.timeRegions.map(function(e){return Q.a({},e)});for(n=0;n<u.length;n++)if(((r=u[n]).fromDayOfWeek||r.from||r.toDayOfWeek||r.to)&&(r.from&&!r.to&&(r.to=r.from),!r.from&&r.to&&(r.from=r.to),a={from:this.parseTimeRange(r.from),to:this.parseTimeRange(r.to)},!r.fromDayOfWeek&&r.toDayOfWeek&&(r.fromDayOfWeek=r.toDayOfWeek),!r.toDayOfWeek&&r.fromDayOfWeek&&(r.toDayOfWeek=r.fromDayOfWeek),r.fromDayOfWeek&&(a.from.dayOfWeek=Number(r.fromDayOfWeek)),r.toDayOfWeek&&(a.to.dayOfWeek=Number(r.toDayOfWeek)),a.from.dayOfWeek&&null===a.from.h&&null===a.from.m&&(a.from.h=0,a.from.m=0,a.from.s=0),a.to.dayOfWeek&&null===a.to.h&&null===a.to.m&&(a.to.h=23,a.to.m=59,a.to.s=59),a.from&&a.to)){if(i=[],a.from.h>=c.from.hour()&&a.from.h<=c.from.hour()&&a.from.m>=c.from.minute()&&a.from.m<=c.from.minute()&&a.to.h>=c.to.hour()&&a.to.h<=c.to.hour()&&a.to.m>=c.to.minute()&&a.to.m<=c.to.minute())i.push({from:c.from.valueOf(),to:c.to.startOf("hour").valueOf()});else for((o=X()(c.from)).set("hour",0),o.set("minute",0),o.set("second",0),o.add(a.from.h,"hours"),o.add(a.from.m,"minutes"),o.add(a.from.s,"seconds");o.unix()<=c.to.unix();){for(;a.from.dayOfWeek&&a.from.dayOfWeek!==o.isoWeekday();)o.add(24,"hours");if(o.unix()>c.to.unix())break;if(s=X()(o),a.from.h<=a.to.h)s.add(a.to.h-a.from.h,"hours");else if(a.from.h+a.to.h<23)for(s.add(a.to.h,"hours");s.hour()!==a.to.h;)s.add(-1,"hours");else for(s.add(24-a.from.h,"hours");s.hour()!==a.to.h;)s.add(1,"hours");for(s.set("minute",a.to.m),s.set("second",a.to.s);a.to.dayOfWeek&&a.to.dayOfWeek!==s.isoWeekday();)s.add(24,"hours");o.unix()<c.from.unix()&&s.unix()<c.from.unix()||o.unix()>c.to.unix()&&s.unix()>c.to.unix()||i.push({from:o.valueOf(),to:s.valueOf()}),o.add(24,"hours")}l=Ri(r,this.theme);for(var d=0;d<i.length;d++){var p=i[d];r.fill&&e.grid.markings.push({xaxis:{from:p.from,to:p.to},color:l.fill}),r.line&&(e.grid.markings.push({xaxis:{from:p.from,to:p.from},color:l.line}),e.grid.markings.push({xaxis:{from:p.to,to:p.to},color:l.line}))}}}},e.prototype.parseTimeRange=function(e){var t={h:null,m:null},n=/^([\d]+):?(\d{2})?/.exec(e);return n?(n.length>1&&(t.h=Number(n[1]),t.m=0,n.length>2&&void 0!==n[2]&&(t.m=Number(n[2])),t.h>23&&(t.h=23),t.m>59&&(t.m=59)),t):t},e}(),ji=n(378);function Ui(e,t,n,a,r){return e.map(function(e){var i=function(e){for(var t=[],n=0;n<e.length;n++)for(var a=e[n].datapoints,r=0;r<a.length;r++)null!==a[r][0]&&t.push(a[r][0]);return t}([e]);if(e.histogram=!0,n[e.alias])e.data=[];else{var o=function(e,t,n,a){for(var r={},i=Vi(n,t),o=Vi(a,t),s=i,l=0;s<=o;)r[s]=0,s=i+t*l,l++;for(var c=0;c<e.length;c++){var u=Vi(e[c],t);r[u]=r[u]+1}var d=$.a.map(r,function(e,t){return[Number(t),e]});return $.a.sortBy(d,function(e){return e[0]})}(i,t,a,r);e.data=o}return e})}function Vi(e,t){return Math.floor(e/t)*t}function Bi(e,t){if(!isNaN(t)&&function(e){return 2===e.length&&Qi(e[0])&&Qi(e[1])}(e)){var n=e[0],a=e[1];!function(e,t,n){0!==n&&(e.min-=n,e.max-=n,t.min-=n,t.max-=n)}(n,a,t),function(e,t){e.max===e.min&&(e.min-=.25,e.max+=.25);t.max===t.min&&(t.min-=.25,t.max+=.25)}(n,a);var r=0===n.min||0===a.min||0===n.max||0===a.max,i=zi(n,a);if(r&&i)n.min=n.max>0?0:n.min,n.max=n.max>0?n.max:0,a.min=a.max>0?0:a.min,a.max=a.max>0?a.max:0;else if(function(e,t){return e.min>=0&&t.max<=0||e.max<=0&&t.min>=0}(n,a))n.min>=0?(n.min=-n.max,a.max=-a.min):(n.max=-n.min,a.min=-a.max);else{var o=function(e,t){var n,a;if(Hi(e,t))n=t.min?e.min/t.min:0,a=t.max?e.max/t.max:0;else if(zi(e,t)){var r=Math.abs(e.min),i=Math.abs(e.max),o=Math.abs(t.min),s=Math.abs(t.max),l=$.a.max([r,i]),c=$.a.min([r,i]),u=$.a.max([o,s]),d=$.a.min([o,s]);n=c?l/c:l,a=d?u/d:u}else e.min>0||t.min>0?(n=e.max/t.max,a=0):(n=0,a=e.min/t.min);return n>a?n:a}(n,a);i?n.min>0?(n.min=n.max/o,a.min=a.max/o):(n.max=n.min/o,a.max=a.min/o):Hi(n,a)?(n.min=a.min?a.min*o:n.min,a.min=n.min?n.min/o:a.min,n.max=a.max?a.max*o:n.max,a.max=n.max?n.max/o:a.max):(n.min=n.min>0?a.min*o:n.min,a.min=a.min>0?n.min/o:a.min,n.max=n.max<0?a.max*o:n.max,a.max=a.max<0?n.max/o:a.max)}!function(e,t,n){0!==n&&(e.min+=n,e.max+=n,t.min+=n,t.max+=n)}(n,a,t)}}function Qi(e){return"min"in e&&"max"in e}function zi(e,t){return e.min>=0&&t.min>=0||e.max<=0&&t.max<=0}function Hi(e,t){return e.min<=0&&e.max>=0&&t.min<=0&&t.max>=0}var Gi=["min","max","avg","current","total"],Wi=function(e){function t(t){var n=e.call(this,t)||this;return n.onLabelClick=function(e){return n.props.onLabelClick(n.props.series,e)},n.onToggleAxis=function(){var e=2===n.state.yaxis?1:2,t={alias:n.props.series.alias,yaxis:e};n.setState({yaxis:e}),n.props.onToggleAxis(t)},n.onColorChange=function(e){n.props.onColorChange(n.props.series,e),n.forceUpdate()},n.state={yaxis:n.props.series.yaxis},n}return Q.c(t,e),t.prototype.renderLegendValues=function(){for(var e=this.props,t=e.series,n=e.asTable,a=[],r=0,i=Gi;r<i.length;r++){var o=i[r];if(this.props[o]){var s=t.formatValue(t.stats[o]);a.push(le.a.createElement(Ji,{key:o,valueName:o,value:s,asTable:n}))}}return a},t.prototype.render=function(){var e=this.props,t=e.series,n=e.values,a=e.asTable,r=e.hidden,i=qn()({"graph-legend-series-hidden":r,"graph-legend-series--right-y":2===t.yaxis}),o=n?this.renderLegendValues():[],s=le.a.createElement(Yi,{label:t.alias,color:t.color,yaxis:this.state.yaxis,onLabelClick:this.onLabelClick,onColorChange:this.onColorChange,onToggleAxis:this.onToggleAxis});return a?le.a.createElement("tr",{className:"graph-legend-series "+i},le.a.createElement("td",null,s),o):le.a.createElement("div",{className:"graph-legend-series "+i},s,o)},t.defaultProps={asTable:!1,hidden:!1,onLabelClick:function(){},onColorChange:function(){},onToggleAxis:function(){}},t}(se.PureComponent),Yi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.label,a=t.color,r=t.yaxis,i=this.props,o=i.onColorChange,s=i.onToggleAxis;return[le.a.createElement(Xi,{key:"icon",color:a,yaxis:r,onColorChange:o,onToggleAxis:s}),le.a.createElement("a",{className:"graph-legend-alias pointer",title:n,key:"label",onClick:function(t){return e.props.onLabelClick(t)}},n)]},t.defaultProps={yaxis:void 0,onLabelClick:function(){}},t}(se.PureComponent);function Ki(e){var t=e.color;return le.a.createElement("i",{className:"fa fa-minus pointer",style:{color:t}})}var Xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){return le.a.createElement(Si.SeriesColorPicker,{yaxis:this.props.yaxis,color:this.props.color,onChange:this.props.onColorChange,onToggleAxis:this.props.onToggleAxis,enableNamedColors:!0},le.a.createElement("span",{className:"graph-legend-icon"},le.a.createElement(Ki,{color:this.props.color})))},t.defaultProps={yaxis:void 0,onColorChange:function(){},onToggleAxis:function(){}},t}(se.PureComponent);function Ji(e){var t=e.value,n=e.valueName;return e.asTable?le.a.createElement("td",{className:"graph-legend-value "+n},t):le.a.createElement("div",{className:"graph-legend-value "+n},t)}var Zi=function(e){function t(t){var n=e.call(this,t)||this;return n.onToggleSeries=function(e,t){var a=Q.a({},n.state.hiddenSeries);t.ctrlKey||t.metaKey||t.shiftKey?a[e.alias]?delete a[e.alias]:a[e.alias]=!0:a=n.toggleSeriesExclusiveMode(e),n.setState({hiddenSeries:a}),n.props.onToggleSeries(a)},n.state={hiddenSeries:n.props.hiddenSeries},n}return Q.c(t,e),t.prototype.sortLegend=function(){var e=this,t=this.props.seriesList.slice()||[];return this.props.sort&&(t=$.a.sortBy(t,function(t){var n=t.stats[e.props.sort];return null===n&&(n=-1/0),n}),this.props.sortDesc&&(t=t.reverse())),t},t.prototype.toggleSeriesExclusiveMode=function(e){var t=Q.a({},this.state.hiddenSeries);return t[e.alias]&&delete t[e.alias],this.props.seriesList.every(function(n){return n.alias===e.alias||t[n.alias]})?this.props.seriesList.forEach(function(e){delete t[e.alias]}):this.props.seriesList.forEach(function(n){n.alias!==e.alias&&(t[n.alias]=!0)}),t},t.prototype.render=function(){var e=this.props,t=e.optionalClass,n=e.rightSide,a=e.sideWidth,r=e.sort,i=e.sortDesc,o=e.hideEmpty,s=e.hideZero,l={values:e.values,min:e.min,max:e.max,avg:e.avg,current:e.current,total:e.total},c=this.state.hiddenSeries,u={hideEmpty:o,hideZero:s},d={sort:r,sortDesc:i},p=this.sortLegend().filter(function(e){return!e.hideFromLegend(u)}),h=(this.props.alignAsTable?"graph-legend-table":"")+" "+t,f={minWidth:n&&a?a:void 0,width:n&&a?a-1:void 0},m=Q.a({seriesList:p,hiddenSeries:c,onToggleSeries:this.onToggleSeries,onToggleAxis:this.props.onToggleAxis,onToggleSort:this.props.onToggleSort,onColorChange:this.props.onColorChange},l,d);return le.a.createElement("div",{className:"graph-legend-content "+h,style:f},this.props.alignAsTable?le.a.createElement(to,Q.a({},m)):le.a.createElement(eo,Q.a({},m)))},t.defaultProps={values:!1,min:!1,max:!1,avg:!1,current:!1,total:!1,alignAsTable:!1,rightSide:!1,sort:void 0,sortDesc:!1,optionalClass:"",onToggleSeries:function(){},onToggleSort:function(){},onToggleAxis:function(){},onColorChange:function(){}},t}(se.PureComponent),eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.seriesList,a=t.hiddenSeries,r={values:t.values,min:t.min,max:t.max,avg:t.avg,current:t.current,total:t.total};return n.map(function(t,n){return le.a.createElement(Wi,Q.a({key:t.id+"-"+n,series:t,hidden:a[t.alias]},r,{onLabelClick:e.props.onToggleSeries,onColorChange:e.props.onColorChange,onToggleAxis:e.props.onToggleAxis}))})},t}(se.PureComponent),to=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToggleSort=function(e){var n=t.props.sortDesc,a=t.props.sort;e!==a&&(n=null),!1===n?(a=null,n=null):(n=!n,a=e),t.props.onToggleSort(a,n)},t}return Q.c(t,e),t.prototype.render=function(){var e=this,t=this.props.seriesList,n=this.props,a=n.values,r=n.min,i=n.max,o=n.avg,s=n.current,l=n.total,c=n.sort,u=n.sortDesc,d=n.hiddenSeries,p={values:a,min:r,max:i,avg:o,current:s,total:l};return le.a.createElement("table",null,le.a.createElement("colgroup",null,le.a.createElement("col",{style:{width:"100%"}})),le.a.createElement("thead",null,le.a.createElement("tr",null,le.a.createElement("th",{style:{textAlign:"left"}}),Gi.map(function(t){return p[t]&&le.a.createElement(no,{key:t,statName:t,sort:c,sortDesc:u,onClick:e.onToggleSort})}))),le.a.createElement("tbody",null,t.map(function(t,n){return le.a.createElement(Wi,Q.a({key:t.id+"-"+n,asTable:!0,series:t,hidden:d[t.alias],onLabelClick:e.props.onToggleSeries,onColorChange:e.props.onColorChange,onToggleAxis:e.props.onToggleAxis},p))})))},t}(se.PureComponent),no=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return t.props.onClick(t.props.statName)},t}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.statName,n=e.sort,a=e.sortDesc;return le.a.createElement("th",{className:"pointer",onClick:this.onClick},t,n===t&&le.a.createElement("span",{className:a?"fa fa-caret-down":"fa fa-caret-up"}))},t}(se.PureComponent),ao=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){return le.a.createElement(Si.CustomScrollbar,{renderTrackHorizontal:function(e){return le.a.createElement("div",Q.a({},e,{style:{visibility:"none"}}))}},le.a.createElement(Zi,Q.a({},this.props)))},t}(se.PureComponent),ro=n(200),io=Object(ro.a)(ao),oo=function(){function e(e,t,n){var a=this;this.scope=e,this.elem=t,this.timeSrv=n,this.ctrl=e.ctrl,this.dashboard=this.ctrl.dashboard,this.panel=this.ctrl.panel,this.annotations=[],this.panelWidth=0,this.eventManager=new ji.a(this.ctrl),this.thresholdManager=new Fi(this.ctrl),this.timeRegionManager=new Li(this.ctrl,R.a.theme.type),this.tooltip=new function(e,t,n,a){var r=this,i=n.ctrl.panel,o=te()('<div class="graph-tooltip">');this.destroy=function(){o.remove()},this.findHoverIndexFromDataPoints=function(e,t,n){var a,r=t.datapoints.pointsize,i=n*r,o=t.datapoints.points.length;for(a=i;a<o;a+=r)if(!t.lines.steps&&null!=t.datapoints.points[i]&&null==t.datapoints.points[a]||t.datapoints.points[a]>e)return Math.max(a-r,0)/r;return a/r-1},this.findHoverIndexFromData=function(e,t){for(var n,a=0,r=t.data.length-1;;){if(a>r)return Math.max(r,0);if(n=Math.floor((a+r)/2),t.data[n][0]===e)return n;t.data[n][0]<e?a=n+1:r=n-1}},this.renderAndShow=function(e,t,n,a){"time"===a&&(t='<div class="graph-tooltip-time">'+e+"</div>"+t),o.html(t).place_tt(n.pageX+20,n.pageY)},this.getMultiSeriesPlotHoverInfo=function(e,t){var n,a,r,o,s,l,c,u,d,p=[[],[],[]],h=0;for(a=0;a<e.length;a++)!(r=e[a]).data.length||i.legend.hideEmpty&&r.allIsNull?p[0].push({hidden:!0,value:0}):!r.data.length||i.legend.hideZero&&r.allIsZero?p[0].push({hidden:!0,value:0}):r.hideTooltip?p[0].push({hidden:!0,value:0}):(o=this.findHoverIndexFromData(t.x,r),s=t.x-r.data[o][0],l=r.data[o][0],(!u||s>=0&&(s<u||u<0)||s<0&&s>u)&&(u=s,d=l),n=r.stack?"individual"===i.tooltip.value_type?r.data[o][1]:r.stack?h+=r.data[o][1]:r.data[o][1]:r.data[o][1],(r.lines.steps||r.stack)&&(o=this.findHoverIndexFromDataPoints(t.x,r,o)),c=0,r.yaxis&&(c=r.yaxis.n),p[c].push({value:n,hoverIndex:o,color:r.color,label:r.aliasEscaped,time:l,distance:s,index:a}));return(p=p[0].concat(p[1],p[2])).time=d,p},e.mouseleave(function(){if(i.tooltip.shared){var t=e.data().plot;t&&(o.detach(),t.unhighlight())}L.b.emit("graph-hover-clear")}),e.bind("plothover",function(t,n,a){r.show(n,a),n.panelRelY=(n.pageY-e.offset().top)/e.height(),L.b.emit("graph-hover",{pos:n,panel:i})}),e.bind("plotclick",function(e,t,n){L.b.emit("graph-click",{pos:t,panel:i,item:n})}),this.clear=function(e){o.detach(),e.clearCrosshair(),e.unhighlight()},this.show=function(n,s){var l,c,u,d,p,h,f,m,g=e.data().plot,v=g.getData(),b=g.getXAxes()[0].options.mode,y=a(),w=i.tooltip.shared;if(n.panelRelY){var x=g.pointOffset({x:n.x});if(Number.isNaN(x.left)||x.left<0||x.left>e.width())return void r.clear(g);if(n.pageX=e.offset().left+x.left,n.pageY=e.offset().top+e.height()*n.panelRelY,!(n.pageY>=te()(window).scrollTop()&&n.pageY<=te()(window).innerHeight()+te()(window).scrollTop()))return void r.clear(g);if(g.setCrosshair(n),w=!0,t.sharedCrosshairModeOnly())return}if(0!==y.length)if(m=y[0].hasMsResolution?"YYYY-MM-DD HH:mm:ss.SSS":"YYYY-MM-DD HH:mm:ss",w){g.unhighlight();var S=r.getMultiSeriesPlotHoverInfo(v,n);for(f="",u=t.formatDate(S.time,m),2===i.tooltip.sort?S.sort(function(e,t){return t.value-e.value}):1===i.tooltip.sort&&S.sort(function(e,t){return e.value-t.value}),p=0;p<S.length;p++)if(!(d=S[p]).hidden){var k="";s&&d.index===s.seriesIndex&&(k="graph-tooltip-list-item--highlight"),c=(h=y[d.index]).formatValue(d.value),f+='<div class="graph-tooltip-list-item '+k+'"><div class="graph-tooltip-series-name">',f+='<i class="fa fa-minus" style="color:'+d.color+';"></i> '+d.label+":</div>",f+='<div class="graph-tooltip-value">'+c+"</div></div>",g.highlight(d.index,d.hoverIndex)}r.renderAndShow(u,f,n,b)}else s?(h=y[s.seriesIndex],l='<div class="graph-tooltip-list-item"><div class="graph-tooltip-series-name">',l+='<i class="fa fa-minus" style="color:'+s.series.color+';"></i> '+h.aliasEscaped+":</div>",c=i.stack&&"individual"===i.tooltip.value_type?s.datapoint[1]-s.datapoint[2]:s.datapoint[1],c=h.formatValue(c),u=t.formatDate(s.datapoint[0],m),l+='<div class="graph-tooltip-value">'+c+"</div>",r.renderAndShow(u,l,n,b)):o.detach()}}(this.elem,this.ctrl.dashboard,this.scope,function(){return a.sortedSeries}),this.ctrl.events.on("panel-teardown",this.onPanelTeardown.bind(this)),this.ctrl.events.on("render",this.onRender.bind(this)),L.b.on("graph-hover",this.onGraphHover.bind(this),e),L.b.on("graph-hover-clear",this.onGraphHoverClear.bind(this),e),this.elem.bind("plotselected",this.onPlotSelected.bind(this)),this.elem.bind("plotclick",this.onPlotClick.bind(this)),this.elem&&this.elem.parent&&(this.legendElem=this.elem.parent().find(".graph-legend")[0])}return e.prototype.onRender=function(e){var t=this;if(this.data=e||this.data,this.data){this.annotations=this.ctrl.annotations||[],this.buildFlotPairs(this.data);var n=this.elem.height();if(Object(L.g)(this.data,this.panel,n),!this.panel.legend.show)return this.legendElem.hasChildNodes()&&ue.a.unmountComponentAtNode(this.legendElem),void this.renderPanel();var a=this.panel.legend,r=a.values,i=a.min,o=a.max,s=a.avg,l=a.current,c=a.total,u=this.panel.legend,d={alignAsTable:u.alignAsTable,rightSide:u.rightSide,sideWidth:u.sideWidth,sort:u.sort,sortDesc:u.sortDesc,hideEmpty:u.hideEmpty,hideZero:u.hideZero},p={values:r,min:i,max:o,avg:s,current:l,total:c},h=Q.a({seriesList:this.data,hiddenSeries:this.ctrl.hiddenSeries},d,p,{onToggleSeries:this.ctrl.onToggleSeries,onToggleSort:this.ctrl.onToggleSort,onColorChange:this.ctrl.onColorChange,onToggleAxis:this.ctrl.onToggleAxis}),f=le.a.createElement(io,h);ue.a.render(f,this.legendElem,function(){return t.renderPanel()})}},e.prototype.onGraphHover=function(e){this.dashboard.sharedTooltipModeEnabled()&&this.plot&&e.panel.id!==this.panel.id&&!this.ctrl.otherPanelInFullscreenMode()&&this.tooltip.show(e.pos)},e.prototype.onPanelTeardown=function(){this.thresholdManager=null,this.timeRegionManager=null,this.plot&&(this.plot.destroy(),this.plot=null),this.tooltip.destroy(),this.elem.off(),this.elem.remove(),ue.a.unmountComponentAtNode(this.legendElem)},e.prototype.onGraphHoverClear=function(e,t){this.plot&&this.tooltip.clear(this.plot)},e.prototype.onPlotSelected=function(e,t){var n=this;"time"===this.panel.xaxis.mode?(t.ctrlKey||t.metaKey)&&(this.dashboard.meta.canEdit||this.dashboard.meta.canMakeEditable)?setTimeout(function(){n.eventManager.updateTime(t.xaxis)},100):this.scope.$apply(function(){n.timeSrv.setTime({from:X.a.utc(t.xaxis.from),to:X.a.utc(t.xaxis.to)})}):this.plot.clearSelection()},e.prototype.onPlotClick=function(e,t,n){var a=this;"time"===this.panel.xaxis.mode&&((t.ctrlKey||t.metaKey)&&(this.dashboard.meta.canEdit||this.dashboard.meta.canMakeEditable)&&(t.x!==t.x1||setTimeout(function(){a.eventManager.updateTime({from:t.x,to:null})},100)))},e.prototype.shouldAbortRender=function(){return!this.data||0===this.panelWidth},e.prototype.drawHook=function(e){this.panel.yaxes[0].label&&this.panel.yaxes[0].show&&te()("<div class='axisLabel left-yaxis-label flot-temp-elem'></div>").text(this.panel.yaxes[0].label).appendTo(this.elem),this.panel.yaxes[1].label&&this.panel.yaxes[1].show&&te()("<div class='axisLabel right-yaxis-label flot-temp-elem'></div>").text(this.panel.yaxes[1].label).appendTo(this.elem),this.ctrl.dataWarning&&te()('<div class="datapoints-warning flot-temp-elem">'+this.ctrl.dataWarning.title+"</div>").appendTo(this.elem),this.thresholdManager.draw(e),this.timeRegionManager.draw(e)},e.prototype.processOffsetHook=function(e,t){var n=this.panel.yaxes[0],a=this.panel.yaxes[1];n.show&&n.label&&(t.left=20),a.show&&a.label&&(t.right=20);for(var r=e.getYAxes(),i=0;i<r.length;i++){var o=r[i],s=this.panel.yaxes[i];o.options.max=null!==o.options.max?o.options.max:s.max,o.options.min=null!==o.options.min?o.options.min:s.min}},e.prototype.processRangeHook=function(e){var t=e.getYAxes(),n=this.panel.yaxis.align||!1;if(t.length>1&&!0===n){var a=this.panel.yaxis.alignLevel||0;Bi(t,parseFloat(a))}},e.prototype.getMinTimeStepOfSeries=function(e){for(var t=Number.MAX_VALUE,n=0;n<e.length;n++)if(e[n].stats.timeStep){if(this.panel.bars){if(e[n].bars&&!1===e[n].bars.show)continue}else if(void 0===e[n].bars||void 0===e[n].bars.show||!e[n].bars.show)continue;e[n].stats.timeStep<t&&(t=e[n].stats.timeStep)}return t},e.prototype.renderPanel=function(){if(this.panelWidth=this.elem.width(),!this.shouldAbortRender()){this.thresholdManager.prepare(this.elem,this.data),this.panel.dashes=!!this.panel.lines&&this.panel.dashes;var e=this.buildFlotOptions(this.panel);this.prepareXAxis(e,this.panel),this.configureYAxisOptions(this.data,e),this.thresholdManager.addFlotOptions(e,this.panel),this.timeRegionManager.addFlotOptions(e,this.panel),this.eventManager.addFlotEvents(this.annotations,e),this.sortedSeries=this.sortSeries(this.data,this.panel),this.callPlot(e,!0)}},e.prototype.buildFlotPairs=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.data=n.getFlotPairs(n.nullPointMode||this.panel.nullPointMode),this.ctrl.hiddenSeries[n.alias]&&(n.data=[],n.stack=!1)}},e.prototype.prepareXAxis=function(e,t){switch(t.xaxis.mode){case"series":e.series.bars.barWidth=.7,e.series.bars.align="center";for(var n=0;n<this.data.length;n++){var a=this.data[n];a.data=[[n+1,a.stats[t.xaxis.values[0]]]]}this.addXSeriesAxis(e);break;case"histogram":var r=void 0;if(this.data.length){var i=$.a.min($.a.map(this.data,function(e){return e.stats.min})),o=$.a.max($.a.map(this.data,function(e){return e.stats.max})),s=t.xaxis.buckets||this.panelWidth/50;r=Object(ge.tickStep)(i,o,s),e.series.bars.barWidth=.8*r,this.data=Ui(this.data,r,this.ctrl.hiddenSeries,i,o)}else r=0;this.addXHistogramAxis(e,r);break;case"table":e.series.bars.barWidth=.7,e.series.bars.align="center",this.addXTableAxis(e);break;default:e.series.bars.barWidth=this.getMinTimeStepOfSeries(this.data)/1.5,this.addTimeAxis(e)}},e.prototype.callPlot=function(e,t){try{this.plot=te.a.plot(this.elem,this.sortedSeries,e),this.ctrl.renderError&&(delete this.ctrl.error,delete this.ctrl.inspector)}catch(e){console.log("flotcharts error",e),this.ctrl.error=e.message||"Render Error",this.ctrl.renderError=!0,this.ctrl.inspector={error:e}}t&&this.ctrl.renderingCompleted()},e.prototype.buildFlotOptions=function(e){var t="#c8c8c8";!0===R.a.bootData.user.lightTheme&&(t="#a1a1a1");var n=!!e.stack||null;return{hooks:{draw:[this.drawHook.bind(this)],processOffset:[this.processOffsetHook.bind(this)],processRange:[this.processRangeHook.bind(this)]},legend:{show:!1},series:{stackpercent:!!e.stack&&e.percentage,stack:e.percentage?null:n,lines:{show:e.lines,zero:!1,fill:this.translateFillOption(e.fill),lineWidth:e.dashes?0:e.linewidth,steps:e.steppedLine},dashes:{show:e.dashes,lineWidth:e.linewidth,dashLength:[e.dashLength,e.spaceLength]},bars:{show:e.bars,fill:1,barWidth:1,zero:!1,lineWidth:0},points:{show:e.points,fill:1,fillColor:!1,radius:e.points?e.pointradius:2},shadowSize:0},yaxes:[],xaxis:{},grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:t,margin:{left:0,right:0},labelMarginX:0},selection:{mode:"x",color:"#666"},crosshair:{mode:"x"}}},e.prototype.sortSeries=function(e,t){var n=t.legend.sort,a=t.legend.sortDesc,r=null!==n&&void 0!==n,i=null!==a&&void 0!==a,o=t.stack&&r&&i,s=!0===t.legend.sortDesc?-1:1;return o?$.a.sortBy(e,function(e){return e.stats[n]*s}):$.a.sortBy(e,function(e){return e.zindex})},e.prototype.translateFillOption=function(e){return this.panel.percentage&&this.panel.stack&&0===e?.001:e/10},e.prototype.addTimeAxis=function(e){var t=this.panelWidth/100,n=$.a.isUndefined(this.ctrl.range.from)?null:this.ctrl.range.from.valueOf(),a=$.a.isUndefined(this.ctrl.range.to)?null:this.ctrl.range.to.valueOf();e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:"time",min:n,max:a,label:"Datetime",ticks:t,timeformat:this.time_format(t,n,a)}},e.prototype.addXSeriesAxis=function(e){var t=$.a.map(this.data,function(e,t){return[t+1,e.alias]});e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:0,max:t.length+1,label:"Datetime",ticks:t}},e.prototype.addXHistogramAxis=function(e,t){var n,a,r,i=this.panelWidth/50;if(this.data.length&&t){for(var o=[],s=0,l=this.data;s<l.length;s++)for(var c=0,u=l[s].data;c<u.length;c++){o[u[c][0]]=!0}n=Object.keys(o).map(function(e){return Number(e)}),a=$.a.min(n),r=$.a.max(n);for(var d=t,p=Math.floor((r-a)/d);p>i;)d*=2,p=Math.ceil((r-a)/d);a=Math.floor(a/d)*d,r=Math.ceil(1.01*r/d)*d,n=[];for(var h=a;h<=r;h+=d)n.push(h)}else n=i/2,a=0,r=1;e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:a,max:r,label:"Histogram",ticks:n},this.configureAxisMode(e.xaxis,"short")},e.prototype.addXTableAxis=function(e){var t=$.a.map(this.data,function(e,t){return $.a.map(e.datapoints,function(n,a){return[t*e.datapoints.length+a+1,n[1]]})});t=$.a.flatten(t,!0),e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:0,max:t.length+1,label:"Datetime",ticks:t}},e.prototype.configureYAxisOptions=function(e,t){var n={position:"left",show:this.panel.yaxes[0].show,index:1,logBase:this.panel.yaxes[0].logBase||1,min:this.parseNumber(this.panel.yaxes[0].min),max:this.parseNumber(this.panel.yaxes[0].max),tickDecimals:this.panel.yaxes[0].decimals};if(t.yaxes.push(n),$.a.find(e,{yaxis:2})){var a=$.a.clone(n);a.index=2,a.show=this.panel.yaxes[1].show,a.logBase=this.panel.yaxes[1].logBase||1,a.position="right",a.min=this.parseNumber(this.panel.yaxes[1].min),a.max=this.parseNumber(this.panel.yaxes[1].max),a.tickDecimals=this.panel.yaxes[1].decimals,t.yaxes.push(a),this.applyLogScale(t.yaxes[1],e),this.configureAxisMode(t.yaxes[1],this.panel.percentage&&this.panel.stack?"percent":this.panel.yaxes[1].format)}this.applyLogScale(t.yaxes[0],e),this.configureAxisMode(t.yaxes[0],this.panel.percentage&&this.panel.stack?"percent":this.panel.yaxes[0].format)},e.prototype.parseNumber=function(e){return null===e||void 0===e?null:$.a.toNumber(e)},e.prototype.applyLogScale=function(e,t){if(1!==e.logBase){var n,a,r=0===e.min;e.min<Number.MIN_VALUE&&(e.min=null),e.max<Number.MIN_VALUE&&(e.max=null);var i=e.max,o=e.min;for(a=0;a<t.length;a++)(n=t[a]).yaxis===e.index&&((!i||i<n.stats.max)&&(i=n.stats.max),(!o||o>n.stats.logmin)&&(o=n.stats.logmin));e.transform=function(t){return t<Number.MIN_VALUE?null:Math.log(t)/Math.log(e.logBase)},e.inverseTransform=function(t){return Math.pow(e.logBase,t)},i||o?i?o||(o=i*e.inverseTransform(-4)):i=o*e.inverseTransform(4):(i=e.inverseTransform(2),o=e.inverseTransform(-2)),o=e.min?e.inverseTransform(Math.ceil(e.transform(e.min))):e.min=e.inverseTransform(Math.floor(e.transform(o))),i=e.max?e.inverseTransform(Math.floor(e.transform(e.max))):e.max=e.inverseTransform(Math.ceil(e.transform(i))),!o||o<Number.MIN_VALUE||!i||i<Number.MIN_VALUE||(Number.isFinite(o)&&Number.isFinite(i)?(r&&(e.min=.1,o=1),e.ticks=this.generateTicksForLogScaleYAxis(o,i,e.logBase),r&&e.ticks.unshift(.1),e.ticks[e.ticks.length-1]>e.max&&(e.max=e.ticks[e.ticks.length-1])):(e.ticks=[1,2],delete e.min,delete e.max))}},e.prototype.generateTicksForLogScaleYAxis=function(e,t,n){var a,r=[];for(a=e;a<=t;a*=n)r.push(a);var i=Math.ceil(this.ctrl.height/25),o=r.length;if(o>i){var s=Math.ceil(o/i)*n;for(r=[],a=e;a<=t*s;a*=s)r.push(a)}return r},e.prototype.configureAxisMode=function(e,t){e.tickFormatter=function(e,n){var a=Object(Si.getValueFormat)(t);if(!a)throw new Error("Unit '"+t+"' is not supported");return a(e,n.tickDecimals,n.scaledDecimals)}},e.prototype.time_format=function(e,t,n){if(t&&n&&e){var a=n-t,r=a/e/1e3;return r<=45?"%H:%M:%S":r<=7200||a<=86400010?"%H:%M":r<=8e4?"%m/%d %H:%M":r<=2419200||a<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"},e}();function so(e,t,n){return{restrict:"A",template:"",link:function(t,n){return new oo(t,n,e)}}}function lo(e,t,n){e.overrideMenu=[],e.currentOverrides=[],e.override=e.override||{},e.addOverrideOption=function(t,n,a){var r={text:t,propertyName:n,index:e.overrideMenu.length,values:a,submenu:$.a.map(a,function(e){return{text:String(e),value:e}})};e.overrideMenu.push(r)},e.setOverride=function(t,n){"color"!==t.propertyName?(e.override[t.propertyName]=n.value,"fillBelowTo"===t.propertyName&&(e.override.lines=!1,e.ctrl.addSeriesOverride({alias:n.value,lines:!1})),e.updateCurrentOverrides(),e.ctrl.render()):e.openColorSelector(e.override.color)},e.colorSelected=function(t){e.override.color=t,e.updateCurrentOverrides(),e.ctrl.render()},e.openColorSelector=function(a){var r={color:a};n.show({element:t.find(".dropdown")[0],position:"top center",openOn:"click",template:'<series-color-picker-popover color="color" onColorChange="colorSelected" />',classNames:"drop-popover drop-popover--transparent",model:{autoClose:!0,colorSelected:e.colorSelected,series:r,color:a},onClose:function(){e.ctrl.render()}})},e.removeOverride=function(t){delete e.override[t.propertyName],e.updateCurrentOverrides(),e.ctrl.refresh()},e.getSeriesNames=function(){return $.a.map(e.ctrl.seriesList,function(e){return e.alias})},e.updateCurrentOverrides=function(){e.currentOverrides=[],$.a.each(e.overrideMenu,function(t){var n=e.override[t.propertyName];$.a.isUndefined(n)||e.currentOverrides.push({name:t.text,propertyName:t.propertyName,value:String(n)})})},e.addOverrideOption("Bars","bars",[!0,!1]),e.addOverrideOption("Lines","lines",[!0,!1]),e.addOverrideOption("Line fill","fill",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Line width","linewidth",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Null point mode","nullPointMode",["connected","null","null as zero"]),e.addOverrideOption("Fill below to","fillBelowTo",e.getSeriesNames()),e.addOverrideOption("Staircase line","steppedLine",[!0,!1]),e.addOverrideOption("Dashes","dashes",[!0,!1]),e.addOverrideOption("Dash Length","dashLength",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),e.addOverrideOption("Dash Space","spaceLength",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),e.addOverrideOption("Points","points",[!0,!1]),e.addOverrideOption("Points Radius","pointradius",[1,2,3,4,5]),e.addOverrideOption("Stack","stack",[!0,!1,"A","B","C","D"]),e.addOverrideOption("Color","color",["change"]),e.addOverrideOption("Y-axis","yaxis",[1,2]),e.addOverrideOption("Z-index","zindex",[-3,-2,-1,0,1,2,3]),e.addOverrideOption("Transform","transform",["negative-Y"]),e.addOverrideOption("Legend","legend",[!0,!1]),e.addOverrideOption("Hide in tooltip","hideTooltip",[!0,!1]),e.updateCurrentOverrides()}L.d.directive("grafanaGraph",so),Oe.c.controller("SeriesOverridesCtrl",lo);var co=function(){function e(e){var t=this;this.panel=this.panelCtrl.panel,this.panel.alert&&(this.disabled=!0);var n=e.$on("$destroy",function(){t.panelCtrl.editingThresholds=!1,t.panelCtrl.render(),n()});this.panelCtrl.editingThresholds=!0}return e.$inject=["$scope"],e.prototype.addThreshold=function(){this.panel.thresholds.push({value:void 0,colorMode:"critical",op:"gt",fill:!0,line:!0,yaxis:"left"}),this.panelCtrl.render()},e.prototype.removeThreshold=function(e){this.panel.thresholds.splice(e,1),this.panelCtrl.render()},e.prototype.render=function(){this.panelCtrl.render()},e.prototype.onFillColorChange=function(e){var t=this;return function(n){t.panel.thresholds[e].fillColor=n,t.render()}},e.prototype.onLineColorChange=function(e){var t=this;return function(n){t.panel.thresholds[e].lineColor=n,t.render()}},e}();Oe.c.directive("graphThresholdForm",function(){return{restrict:"E",templateUrl:"public/app/plugins/panel/graph/thresholds_form.html",controller:co,bindToController:!0,controllerAs:"ctrl",scope:{panelCtrl:"="}}});var uo=function(){function e(e){var t=this;this.panel=this.panelCtrl.panel;var n=e.$on("$destroy",function(){t.panelCtrl.editingTimeRegions=!1,t.panelCtrl.render(),n()});this.colorModes=$.a.map(Object.keys(qi),function(e){return{key:e,value:qi[e].title}}),this.panelCtrl.editingTimeRegions=!0}return e.$inject=["$scope"],e.prototype.render=function(){this.panelCtrl.render()},e.prototype.addTimeRegion=function(){this.panel.timeRegions.push({op:"time",fromDayOfWeek:void 0,from:void 0,toDayOfWeek:void 0,to:void 0,colorMode:"background6",fill:!0,line:!1,fillColor:"rgba(234, 112, 112, 0.12)",lineColor:"rgba(237, 46, 24, 0.60)"}),this.panelCtrl.render()},e.prototype.removeTimeRegion=function(e){this.panel.timeRegions.splice(e,1),this.panelCtrl.render()},e.prototype.onFillColorChange=function(e){var t=this;return function(n){t.panel.timeRegions[e].fillColor=n,t.render()}},e.prototype.onLineColorChange=function(e){var t=this;return function(n){t.panel.timeRegions[e].lineColor=n,t.render()}},e}();Oe.c.directive("graphTimeRegionForm",function(){return{restrict:"E",templateUrl:"public/app/plugins/panel/graph/time_regions_form.html",controller:uo,bindToController:!0,controllerAs:"ctrl",scope:{panelCtrl:"="}}});var po=function(){function e(e){this.panel=e}return e.prototype.getSeriesList=function(e){var t,n=this;if(!e.dataList||0===e.dataList.length)return[];if(e.dataList&&e.dataList.length>0){t=e.dataList[0];var a=this.getAutoDetectXAxisMode(t);this.panel.xaxis.mode!==a&&(this.panel.xaxis.mode=a,this.setPanelDefaultsForNewXAxisMode())}switch(this.panel.xaxis.mode){case"series":case"time":return e.dataList.map(function(t,a){return n.timeSeriesHandler(t,a,e)});case"histogram":return(this.panel.stack?e.dataList:[{target:"count",datapoints:$.a.concat([],$.a.flatten($.a.map(e.dataList,"datapoints")))}]).map(function(t,a){return n.timeSeriesHandler(t,a,e)});case"field":return this.customHandler(t)}},e.prototype.getAutoDetectXAxisMode=function(e){switch(e.type){case"docs":case"table":return"field";default:return"series"===this.panel.xaxis.mode?"series":"histogram"===this.panel.xaxis.mode?"histogram":"time"}},e.prototype.setPanelDefaultsForNewXAxisMode=function(){switch(this.panel.xaxis.mode){case"time":this.panel.bars=!1,this.panel.lines=!0,this.panel.points=!1,this.panel.legend.show=!0,this.panel.tooltip.shared=!0,this.panel.xaxis.values=[];break;case"series":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1,this.panel.xaxis.values=["total"];break;case"histogram":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1}},e.prototype.timeSeriesHandler=function(e,t,n){var a=e.datapoints||[],r=e.target,i=t%Si.colors.length,o=this.panel.aliasColors[r]||Si.colors[i],s=new de.a({datapoints:a,alias:r,color:Object(Si.getColorFromHexRgbOrName)(o,R.a.theme.type),unit:e.unit});a&&a.length>0&&(a[a.length-1][1]-n.range.from<-1e4&&(s.isOutsideRange=!0));return s},e.prototype.customHandler=function(e){if(!this.panel.xaxis.name)throw{message:"No field name specified to use for x-axis, check your axes settings"};return[]},e.prototype.validateXAxisSeriesValue=function(){switch(this.panel.xaxis.mode){case"series":if(0===this.panel.xaxis.values.length)return void(this.panel.xaxis.values=["total"]);var e=this.getXAxisValueOptions({});return void($.a.find(e,{value:this.panel.xaxis.values[0]})||(this.panel.xaxis.values=["total"]))}},e.prototype.getDataFieldNames=function(e,t){if(0===e.length)return[];var n=[],a=e[0],r=[];if("docs"===a.type){if(0===a.datapoints.length)return[];!function e(a){$.a.forEach(a,function(a,i){if($.a.isObject(a))r.push(i),e(a);else if(!t||$.a.isNumber(a)){var o=r.concat(i).join(".");n.push(o)}}),r.pop()}(a.datapoints[0])}return n},e.prototype.getXAxisValueOptions=function(e){switch(this.panel.xaxis.mode){case"series":return[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Count",value:"count"}]}return[]},e.prototype.pluckDeep=function(e,t){for(var n=t.split("."),a=e,r=0;r<n.length;++r){if(!a[n[r]])return;a=a[n[r]]}return a},e}(),ho=function(){function e(e,t){this.$scope=e,this.$q=t,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.$scope.ctrl=this,this.unitFormats=Object(Si.getValueFormats)(),this.logScales={linear:1,"log (base 2)":2,"log (base 10)":10,"log (base 32)":32,"log (base 1024)":1024},this.xAxisModes={Time:"time",Series:"series",Histogram:"histogram"},this.xAxisStatOptions=[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Count",value:"count"},{text:"Current",value:"current"}],"custom"===this.panel.xaxis.mode&&(this.panel.xaxis.name||(this.panel.xaxis.name="specify field"))}return e.$inject=["$scope","$q"],e.prototype.setUnitFormat=function(e,t){e.format=t.value,this.panelCtrl.render()},e.prototype.render=function(){this.panelCtrl.render()},e.prototype.xAxisModeChanged=function(){this.panelCtrl.processor.setPanelDefaultsForNewXAxisMode(),this.panelCtrl.onDataReceived(this.panelCtrl.dataList)},e.prototype.xAxisValueChanged=function(){this.panelCtrl.onDataReceived(this.panelCtrl.dataList)},e.prototype.getDataFieldNames=function(e){var t=this.panelCtrl.processor.getDataFieldNames(this.panelCtrl.dataList,e).map(function(e){return{text:e,value:e}});return this.$q.when(t)},e}();function fo(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/graph/axes_editor.html",controller:ho}}var mo=function(e){function t(t,n,a){var r=e.call(this,t,n)||this;return r.annotationsSrv=a,r.hiddenSeries={},r.seriesList=[],r.dataList=[],r.annotations=[],r.colors=[],r.panelDefaults={datasource:null,renderer:"flot",yaxes:[{label:null,show:!0,logBase:1,min:null,max:null,format:"short"},{label:null,show:!0,logBase:1,min:null,max:null,format:"short"}],xaxis:{show:!0,mode:"time",name:null,values:[],buckets:null},yaxis:{align:!1,alignLevel:null},lines:!0,fill:1,linewidth:1,dashes:!1,dashLength:10,paceLength:10,points:!1,pointradius:2,bars:!1,stack:!1,percentage:!1,legend:{show:!0,values:!1,min:!1,max:!1,current:!1,total:!1,avg:!1},nullPointMode:"null",steppedLine:!1,tooltip:{value_type:"individual",shared:!0,sort:0},timeFrom:null,timeShift:null,targets:[{}],aliasColors:{},seriesOverrides:[],thresholds:[],timeRegions:[]},r.onColorChange=function(e,t){e.setColor(Object(Si.getColorFromHexRgbOrName)(t,R.a.theme.type)),r.panel.aliasColors[e.alias]=t,r.render()},r.onToggleSeries=function(e){r.hiddenSeries=e,r.render()},r.onToggleSort=function(e,t){r.panel.legend.sort=e,r.panel.legend.sortDesc=t,r.render()},r.onToggleAxis=function(e){var t=$.a.find(r.panel.seriesOverrides,{alias:e.alias});t||(t={alias:e.alias},r.panel.seriesOverrides.push(t)),t.yaxis=e.yaxis,r.render()},$.a.defaults(r.panel,r.panelDefaults),$.a.defaults(r.panel.tooltip,r.panelDefaults.tooltip),$.a.defaults(r.panel.legend,r.panelDefaults.legend),$.a.defaults(r.panel.xaxis,r.panelDefaults.xaxis),r.processor=new po(r.panel),r.events.on("render",r.onRender.bind(r)),r.events.on("data-received",r.onDataReceived.bind(r)),r.events.on("data-error",r.onDataError.bind(r)),r.events.on("data-snapshot-load",r.onDataSnapshotLoad.bind(r)),r.events.on("init-edit-mode",r.onInitEditMode.bind(r)),r.events.on("init-panel-actions",r.onInitPanelActions.bind(r)),r}return t.$inject=["$scope","$injector","annotationsSrv"],Q.c(t,e),t.prototype.onInitEditMode=function(){this.addEditorTab("Display options","public/app/plugins/panel/graph/tab_display.html"),this.addEditorTab("Axes",fo),this.addEditorTab("Legend","public/app/plugins/panel/graph/tab_legend.html"),this.addEditorTab("Thresholds & Time Regions","public/app/plugins/panel/graph/tab_thresholds_time_regions.html"),this.subTabIndex=0},t.prototype.onInitPanelActions=function(e){e.push({text:"Export CSV",click:"ctrl.exportCsv()"}),e.push({text:"Toggle legend",click:"ctrl.toggleLegend()",shortcut:"p l"})},t.prototype.issueQueries=function(t){var n=this;return this.annotationsPromise=this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}),this.annotationsSrv.datasourcePromises.then(function(a){return e.prototype.issueQueries.call(n,t)})},t.prototype.zoomOut=function(e){this.publishAppEvent("zoom-out",2)},t.prototype.onDataSnapshotLoad=function(e){this.annotationsPromise=this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}),this.onDataReceived(e)},t.prototype.onDataError=function(e){this.seriesList=[],this.annotations=[],this.render([])},t.prototype.onDataReceived=function(e){var t=this;if(this.dataList=e,this.seriesList=this.processor.getSeriesList({dataList:e,range:this.range}),this.dataWarning=null,0===this.seriesList.reduce(function(e,t){return e+t.datapoints.length},0))this.dataWarning={title:"No data points",tip:"No datapoints returned from data query"};else for(var n=0,a=this.seriesList;n<a.length;n++){if(a[n].isOutsideRange){this.dataWarning={title:"Data points outside time range",tip:"Can be caused by timezone mismatch or missing time filter in query"};break}}this.annotationsPromise.then(function(e){t.loading=!1,t.alertState=e.alertState,t.annotations=e.annotations,t.render(t.seriesList)},function(){t.loading=!1,t.render(t.seriesList)})},t.prototype.onRender=function(){if(this.seriesList)for(var e=0,t=this.seriesList;e<t.length;e++){var n=t[e];n.applySeriesOverrides(this.panel.seriesOverrides),n.unit&&(this.panel.yaxes[n.yaxis-1].format=n.unit)}},t.prototype.addSeriesOverride=function(e){this.panel.seriesOverrides.push(e||{})},t.prototype.removeSeriesOverride=function(e){this.panel.seriesOverrides=$.a.without(this.panel.seriesOverrides,e),this.render()},t.prototype.toggleLegend=function(){this.panel.legend.show=!this.panel.legend.show,this.render()},t.prototype.legendValuesOptionChanged=function(){var e=this.panel.legend;e.values=e.min||e.max||e.avg||e.current||e.total,this.render()},t.prototype.exportCsv=function(){var e=this.$scope.$new(!0);e.seriesList=this.seriesList,this.publishAppEvent("show-modal",{templateHtml:'<export-data-modal data="seriesList"></export-data-modal>',scope:e,modalClass:"modal--narrow"})},t.template='\n<div class="graph-panel" ng-class="{\'graph-panel--legend-right\': ctrl.panel.legend.rightSide}">\n  <div class="graph-panel__chart" grafana-graph ng-dblclick="ctrl.zoomOut()">\n  </div>\n\n  <div class="graph-legend">\n    <div class="graph-legend-content" graph-legend></div>\n  </div>\n</div>\n',t}(G),go=function(e){function t(t,n,a,r){var i=e.call(this,t,n)||this;return i.backendSrv=a,i.dashboardSrv=r,i.panelDefaults={query:"",limit:10,tags:[],recent:!1,search:!1,starred:!0,headings:!0,folderId:null},$.a.defaults(i.panel,i.panelDefaults),i.panel.tag&&(i.panel.tags=[i.panel.tag],delete i.panel.tag),i.events.on("refresh",i.onRefresh.bind(i)),i.events.on("init-edit-mode",i.onInitEditMode.bind(i)),i.groups=[{list:[],show:!1,header:"Starred dashboards"},{list:[],show:!1,header:"Recently viewed dashboards"},{list:[],show:!1,header:"Search"}],i.panel.mode&&("starred"===i.panel.mode&&(i.panel.starred=!0,i.panel.headings=!1),"recently viewed"===i.panel.mode&&(i.panel.recent=!0,i.panel.starred=!1,i.panel.headings=!1),"search"===i.panel.mode&&(i.panel.search=!0,i.panel.starred=!1,i.panel.headings=!1),delete i.panel.mode),i}return t.$inject=["$scope","$injector","backendSrv","dashboardSrv"],Q.c(t,e),t.prototype.onInitEditMode=function(){this.modes=["starred","search","recently viewed"],this.addEditorTab("Options","public/app/plugins/panel/dashlist/editor.html")},t.prototype.onRefresh=function(){var e=[];return e.push(this.getRecentDashboards()),e.push(this.getStarred()),e.push(this.getSearch()),Promise.all(e).then(this.renderingCompleted.bind(this))},t.prototype.getSearch=function(){var e=this;if(this.groups[2].show=this.panel.search,!this.panel.search)return Promise.resolve();var t={limit:this.panel.limit,query:this.panel.query,tag:this.panel.tags,folderIds:this.panel.folderId,type:"dash-db"};return this.backendSrv.search(t).then(function(t){e.groups[2].list=t})},t.prototype.getStarred=function(){var e=this;if(this.groups[0].show=this.panel.starred,!this.panel.starred)return Promise.resolve();var t={limit:this.panel.limit,starred:"true"};return this.backendSrv.search(t).then(function(t){e.groups[0].list=t})},t.prototype.starDashboard=function(e,t){this.dashboardSrv.starDashboard(e.id,e.isStarred).then(function(t){e.isStarred=t}),t&&(t.stopPropagation(),t.preventDefault())},t.prototype.getRecentDashboards=function(){var e=this;if(this.groups[1].show=this.panel.recent,!this.panel.recent)return Promise.resolve();var t=$.a.take(ve.a.getDashboardOpened(),this.panel.limit);return this.backendSrv.search({dashboardIds:t,limit:this.panel.limit}).then(function(n){e.groups[1].list=t.map(function(e){return $.a.find(n,function(t){return t.id===e})}).filter(function(e){return void 0!==e})})},t.prototype.onFolderChange=function(e){this.panel.folderId=e.id,this.refresh()},t.templateUrl="module.html",t.scrollable=!0,t}(B),vo=function(e){function t(t,n,a){var r=e.call(this,t,n)||this;return r.backendSrv=a,r.panelDefaults={},$.a.defaults(r.panel,r.panelDefaults),r.events.on("init-edit-mode",r.onInitEditMode.bind(r)),r.pluginList=[],r.viewModel=[{header:"Installed Apps",list:[],type:"app"},{header:"Installed Panels",list:[],type:"panel"},{header:"Installed Datasources",list:[],type:"datasource"}],r.update(),r}return t.$inject=["$scope","$injector","backendSrv"],Q.c(t,e),t.prototype.onInitEditMode=function(){this.addEditorTab("Options","public/app/plugins/panel/pluginlist/editor.html")},t.prototype.gotoPlugin=function(e,t){t&&t.stopPropagation(),this.$location.url("plugins/"+e.id+"/edit")},t.prototype.updateAvailable=function(e,t){t.stopPropagation(),t.preventDefault();var n=this.$scope.$new(!0);n.plugin=e,this.publishAppEvent("show-modal",{src:"public/app/features/plugins/partials/update_instructions.html",scope:n})},t.prototype.update=function(){var e=this;this.backendSrv.get("api/plugins",{embedded:0,core:0}).then(function(t){e.pluginList=t,e.viewModel[0].list=$.a.filter(t,{type:"app"}),e.viewModel[1].list=$.a.filter(t,{type:"panel"}),e.viewModel[2].list=$.a.filter(t,{type:"datasource"});for(var n=0,a=e.pluginList;n<a.length;n++){var r=a[n];r.hasUpdate?r.state="has-update":r.enabled||(r.state="not-enabled")}})},t.templateUrl="module.html",t.scrollable=!0,t}(B),bo=n(53),yo=function(e){function t(t,n,a){var r=e.call(this,t,n)||this;for(var i in r.backendSrv=a,r.showOptions=[{text:"Current state",value:"current"},{text:"Recent state changes",value:"changes"}],r.sortOrderOptions=[{text:"Alphabetical (asc)",value:1},{text:"Alphabetical (desc)",value:2},{text:"Importance",value:3}],r.stateFilter={},r.currentAlerts=[],r.alertHistory=[],r.panelDefaults={show:"current",limit:10,stateFilter:[],onlyAlertsOnDashboard:!1,sortOrder:1,dashboardFilter:"",nameFilter:"",folderId:null},$.a.defaults(r.panel,r.panelDefaults),r.events.on("init-edit-mode",r.onInitEditMode.bind(r)),r.events.on("refresh",r.onRefresh.bind(r)),r.panel.stateFilter)r.stateFilter[r.panel.stateFilter[i]]=!0;return r}return t.$inject=["$scope","$injector","backendSrv"],Q.c(t,e),t.prototype.sortResult=function(e){if(3===this.panel.sortOrder)return $.a.sortBy(e,function(e){return bo.a.alertStateSortScore[e.state]});var t=$.a.sortBy(e,function(e){return e.name.toLowerCase()});return 2===this.panel.sortOrder&&t.reverse(),t},t.prototype.updateStateFilter=function(){var e=[];for(var t in this.stateFilter)this.stateFilter[t]&&e.push(t);this.panel.stateFilter=e,this.onRefresh()},t.prototype.onRefresh=function(){var e,t=this;"current"===this.panel.show&&(e=this.getCurrentAlertState()),"changes"===this.panel.show&&(e=this.getStateChanges()),e.then(function(){t.renderingCompleted()})},t.prototype.onFolderChange=function(e){this.panel.folderId=e.id,this.refresh()},t.prototype.getStateChanges=function(){var e=this,t={limit:this.panel.limit,type:"alert",newState:this.panel.stateFilter};return this.panel.onlyAlertsOnDashboard&&(t.dashboardId=this.dashboard.id),t.from=1e3*he.parse(this.dashboard.time.from).unix(),t.to=1e3*he.parse(this.dashboard.time.to).unix(),this.backendSrv.get("/api/annotations",t).then(function(t){return e.alertHistory=$.a.map(t,function(t){return t.time=e.dashboard.formatDate(t.time,"MMM D, YYYY HH:mm:ss"),t.stateModel=bo.a.getStateDisplayModel(t.newState),t.info=bo.a.getAlertAnnotationInfo(t),t}),e.noAlertsMessage=0===e.alertHistory.length?"No alerts in current time range":"",e.alertHistory})},t.prototype.getCurrentAlertState=function(){var e=this,t={state:this.panel.stateFilter};return this.panel.nameFilter&&(t.query=this.panel.nameFilter),this.panel.folderId>=0&&(t.folderId=this.panel.folderId),this.panel.dashboardFilter&&(t.dashboardQuery=this.panel.dashboardFilter),this.panel.onlyAlertsOnDashboard&&(t.dashboardId=this.dashboard.id),this.panel.dashboardTags&&(t.dashboardTag=this.panel.dashboardTags),this.backendSrv.get("/api/alerts",t).then(function(t){return e.currentAlerts=e.sortResult($.a.map(t,function(e){return e.stateModel=bo.a.getStateDisplayModel(e.state),e.newStateDateAgo=X()(e.newStateDate).locale("en").fromNow(!0),e})),e.currentAlerts.length>e.panel.limit&&(e.currentAlerts=e.currentAlerts.slice(0,e.panel.limit)),e.noAlertsMessage=0===e.currentAlerts.length?"No alerts":"",e.currentAlerts})},t.prototype.onInitEditMode=function(){this.addEditorTab("Options","public/app/plugins/panel/alertlist/editor.html")},t.templateUrl="module.html",t.scrollable=!0,t}(B),wo=n(30),xo=n(719);function So(e,t,n,a){void 0===a&&(a=0);var r=xo[e.value],i="always"===e.invert||e.invert===(t?"light":"dark"),o=i?n:a,s=i?a:n;return wo.scaleSequential(r).domain([o,s])}function ko(e,t,n){var a;return void 0===n&&(n=0),"linear"===e.colorScale?a=wo.scaleLinear().domain([n,t]).range([0,1]):"sqrt"===e.colorScale&&(a=wo.scalePow().exponent(e.exponent).domain([n,t]).range([0,1])),a}var Co=0,Eo=0;function To(e,t,n,a,r,i,o){var s=te()(e).find("svg"),l=wo.select(s.get(0));if(!(o<=0||0===s.get(0).childNodes.length)){var c=wo.scaleLinear().domain([0,a]).range([0,o]),u=function(e,t,n,a){for(var r=t-e,i=Object(ge.tickStep)(e,t,3),o=Math.round(r/i),s=[],l=0;l<o;l++){var c=i*l;_o(a,c,i)?s.push(a):(a<c&&s.push(a),_o(n,c,i)?s.push(n):(n<c&&s.push(n),s.push(i*l)))}_o(n,t,i)||s.push(n);return s.push(t),s=$.a.sortBy($.a.uniq(s))}(0,a,r,i),d=wo.axisBottom(c).tickValues(u).tickSize(Co),p=s.find(":first-child"),h=function(e){var t=e.get(0);return t&&t.height&&t.height.baseVal?t.height.baseVal.value:0}(s)+Eo,f=function(e){var t=e.get(0);return t&&t.x&&t.x.baseVal?t.x.baseVal.value:0}(p);wo.select(s.get(0)).append("g").attr("class","axis").attr("transform","translate("+f+","+h+")").call(d),l.select(".axis").select(".domain").remove()}}function Mo(e){te()(e).find("svg").empty()}function _o(e,t,n){return Math.abs(e-t)<.3*n}Oe.c.directive("colorLegend",function(){return{restrict:"E",template:'<div class="heatmap-color-legend"><svg width="16.5rem" height="24px"></svg></div>',link:function(e,t,n){var a=e.ctrl,r=e.ctrl.panel;function i(){var e=te()(t).find("svg"),n=Math.floor(e.outerWidth());if("spectrum"===r.color.mode){var i=So($.a.find(a.colorSchemes,{value:r.color.colorScheme}),L.c.user.lightTheme,n);!function(e,t){var n=te()(e).find("svg");Mo(e);var a=Math.floor(n.outerWidth()),r=n.attr("height");if(a){var i=Math.floor(a/2),o=Math.floor(a/i),s=wo.range(0,a,o),l=wo.select(n.get(0)),c=l.selectAll(".heatmap-color-legend-rect").data(s);c.enter().append("rect").attr("x",function(e){return e}).attr("y",0).attr("width",o+1).attr("height",r).attr("stroke-width",0).attr("fill",function(e){return t(e)})}}(t,i)}else if("opacity"===r.color.mode){var o=r.color;!function(e,t){var n=te()(e).find("svg");Mo(e);var a=wo.select(n.get(0)),r=Math.floor(n.outerWidth()),i=n.attr("height");if(r){var o;"linear"===t.colorScale?o=wo.scaleLinear().domain([0,r]).range([0,1]):"sqrt"===t.colorScale&&(o=wo.scalePow().exponent(t.exponent).domain([0,r]).range([0,1]));var s=wo.range(0,r,10),l=a.selectAll(".heatmap-opacity-legend-rect").data(s);l.enter().append("rect").attr("x",function(e){return e}).attr("y",0).attr("width",10).attr("height",i).attr("stroke-width",0).attr("fill",Object(Si.getColorFromHexRgbOrName)(t.cardColor,L.c.user.lightTheme?Si.GrafanaThemeType.Light:Si.GrafanaThemeType.Dark)).style("opacity",function(e){return o(e)})}}(t,o)}}i(),a.events.on("render",function(){i()})}}}),Oe.c.directive("heatmapLegend",function(){return{restrict:"E",template:'<div class="heatmap-color-legend"><svg width="100px" height="6px"></svg></div>',link:function(e,t,n){var a=e.ctrl,r=e.ctrl.panel;function i(){if(Mo(t),!$.a.isEmpty(a.data)&&!$.a.isEmpty(a.data.cards)){var e=a.data.cardStats.max,n=r.color.max||e,i=r.color.min||0;if("spectrum"===r.color.mode){var o=$.a.find(a.colorSchemes,{value:r.color.colorScheme});!function(e,t,n,a,r,i){var o=te()(e).find("svg"),s=wo.select(o.get(0));Mo(e);var l=Math.floor(o.outerWidth())-30,c=o.attr("height"),u=1;a-n>l&&(u=Math.floor((a-n)/l));var d=l/(a-n),p=wo.range(n,a,u),h=So(t,L.c.user.lightTheme,r,i);s.selectAll(".heatmap-color-legend-rect").data(p).enter().append("rect").attr("x",function(e){return e*d}).attr("y",0).attr("width",u*d+1).attr("height",c).attr("stroke-width",0).attr("fill",function(e){return h(e)}),To(e,h,n,a,r,i,l)}(t,o,0,e,n,i)}else if("opacity"===r.color.mode){var s=r.color;!function(e,t,n,a,r,i){var o=te()(e).find("svg"),s=wo.select(o.get(0));Mo(e);var l=Math.floor(o.outerWidth())-30,c=o.attr("height"),u=1;a-n>l&&(u=Math.floor((a-n)/l));var d=l/(a-n),p=wo.range(n,a,u),h=ko(t,r,i);s.selectAll(".heatmap-opacity-legend-rect").data(p).enter().append("rect").attr("x",function(e){return e*d}).attr("y",0).attr("width",u*d).attr("height",c).attr("stroke-width",0).attr("fill",t.cardColor).style("opacity",function(e){return h(e)}),To(e,h,n,a,r,i,l)}(t,s,0,e,n,i)}}}i(),a.events.on("render",function(){i()})}}});var Ao=function(){function e(e,t){e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.unitFormats=z.a.getUnitFormats(),this.logScales={linear:1,"log (base 2)":2,"log (base 10)":10,"log (base 32)":32,"log (base 1024)":1024},this.dataFormats={"Time series":"timeseries","Time series buckets":"tsbuckets"},this.yBucketBoundModes={Auto:"auto",Upper:"upper",Lower:"lower"}}return e.$inject=["$scope","uiSegmentSrv"],e.prototype.setUnitFormat=function(e){this.panel.yAxis.format=e.value,this.panelCtrl.render()},e}();function Do(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/axes_editor.html",controller:Ao}}var No=function(){function e(e){e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.panelCtrl.render()}return e.$inject=["$scope"],e}();function Po(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/display_editor.html",controller:No}}var Oo=0,Io=1;function $o(e,t){var n,a;try{n=Fo(e.label),a=Fo(t.label)}catch(e){return console.log(e.message||e),0}return n>a?1:n<a?-1:0}function Fo(e){if("+Inf"===e||"inf"===e)return 1/0;var t=Number(e);if(isNaN(t))throw new Error("Error parsing histogram label: "+e+" is not a number");return t}function qo(e){var t=0,n=0,a=[];return $.a.forEach(e,function(e){$.a.forEach(e.buckets,function(r){var i={x:e.x,y:r.y,yBounds:r.bounds,values:r.values,count:r.count};a.push(i),1===a.length&&(t=r.count,n=r.count),t=r.count<t?r.count:t,n=r.count>n?r.count:n})}),{cards:a,cardStats:{min:t,max:n}}}function Ro(e,t,n,a){void 0===a&&(a=1);for(var r={},i=function(e){var t=e.datapoints,a=e.label;$.a.forEach(t,function(e){var t=Vo(e[Io],n);!function(e,t,n,a){var r=t[Oo];if(null===r||void 0===r||isNaN(r))return;var i=$.a.concat(t,a);e[n]&&e[n].values?(e[n].values.push(r),e[n].points.push(i)):e[n]={x:n,values:[r],points:[i]}}(r,e,t,a)})},o=0,s=e;o<s.length;o++){i(s[o])}return $.a.forEach(r,function(e){e.buckets=1!==a?function(e,t,n){var a=e.values,r=e.points,i={};return $.a.forEach(a,function(e,a){var o=Bo(e,t,n),s=o.bottom;Lo(i,s,e,r[a],o)}),i}(e,t,a):function(e,t){var n=e.values,a=e.points,r={};return $.a.forEach(n,function(e,n){var i=Uo(e,t),o=i.bottom;Lo(r,o,e,a[n],i)}),r}(e,t)}),r}function Lo(e,t,n,a,r){var i=1;a.length>3&&(i=parseInt(a[2],10)),e[t]?(e[t].values.push(n),e[t].points.push(a),e[t].count+=i):e[t]={y:t,bounds:r,values:[n],points:[a],count:i}}function jo(e,t,n){return 1===n?Vo(e,t):function(e,t,n){return Bo(e,t,n).bottom}(e,t,n)}function Uo(e,t){return{bottom:Math.floor(e/t)*t,top:(Math.floor(e/t)+1)*t}}function Vo(e,t){return Uo(e,t).bottom}function Bo(e,t,n){if(0===e)return{bottom:0,top:0};var a,r,i=Qo(e,n);if(1!==t&&t){var o=1/t,s=i-Math.floor(i);s=Math.floor(s/o)*o,r=(a=Math.floor(i)+s)+o}else r=(a=Math.floor(i))+1;return{bottom:Math.pow(n,a),top:Math.pow(n,r)}}function Qo(e,t){return Math.log(e)/Math.log(t)}function zo(e,t,n){return void 0===n&&(n=1),1===n?Math.abs(t-e):Qo(Math.max(e,t)/Math.min(e,t),n)}var Ho=function(){function e(e,t){this.scope=t,this.dashboard=t.ctrl.dashboard,this.panelCtrl=t.ctrl,this.panel=t.ctrl.panel,this.heatmapPanel=e,this.mouseOverBucket=!1,this.originalFillColor=null,e.on("mouseleave",this.onMouseLeave.bind(this))}return e.prototype.onMouseLeave=function(){this.destroy()},e.prototype.onMouseMove=function(e){this.panel.tooltip.show&&this.move(e)},e.prototype.add=function(){this.tooltip=wo.select("body").append("div").attr("class","heatmap-tooltip graph-tooltip grafana-tooltip")},e.prototype.destroy=function(){this.tooltip&&this.tooltip.remove(),this.tooltip=null},e.prototype.show=function(e,t){if(this.panel.tooltip.show&&t&&!e.panelRelY){var n=this.getBucketIndexes(e,t),a=n.xBucketIndex,r=n.yBucketIndex;if(t.buckets[a]){var i,o;this.tooltip||this.add();var s,l,c=t.buckets[a],u=$.a.find(c.buckets,function(e,t){return e.bounds.bottom===r||t===r.toString()}),d=this.dashboard.formatDate(c.x,"YYYY-MM-DD HH:mm:ss");if($.a.isNumber(this.panel.tooltipDecimals))s=this.countValueFormatter(this.panel.tooltipDecimals,null),l=this.panelCtrl.tickValueFormatter(this.panelCtrl.decimals,null);else{var p=(this.panelCtrl.decimals||-1)+1;s=this.countValueFormatter(p,this.panelCtrl.scaledDecimals+2),l=this.panelCtrl.tickValueFormatter(p,this.panelCtrl.scaledDecimals+2)}var h='<div class="graph-tooltip-time">'+d+'</div>\n      <div class="heatmap-histogram"></div>';if(u)if(u.bounds){if(t.tsBuckets){var f=function(e){return t.tsBucketsFormatted?t.tsBucketsFormatted[e]:t.tsBuckets[e]};i=f(r),o=r<t.tsBuckets.length-1?f(r+1):""}else{i=l(u.y?u.bounds.bottom:0),o=l(u.bounds.top)}h+="<div>\n          bucket: <b>"+i+" - "+o+"</b> <br>\n          count: <b>"+s(u.count)+"</b> <br>\n        </div>"}else h+="<div>count: <b>"+u.count+"</b><br></div>";else{if(!this.panel.tooltip.showHistogram)return void this.destroy();i=r,o="",0}this.tooltip.html(h),this.panel.tooltip.showHistogram&&this.addHistogram(c),this.move(e)}else this.destroy()}},e.prototype.getBucketIndexes=function(e,t){return{xBucketIndex:this.getXBucketIndex(e.x,t),yBucketIndex:this.getYBucketIndex(e.y,t)}},e.prototype.getXBucketIndex=function(e,t){var n=$.a.find(t.buckets,function(n){return e>n.x&&e-n.x<=t.xBucketSize});return n?n.x:jo(e,t.xBucketSize,1)},e.prototype.getYBucketIndex=function(e,t){return t.tsBuckets?Math.floor(e):jo(e,t.yBucketSize,this.panel.yAxis.logBase)},e.prototype.getSharedTooltipPos=function(e){return e.pageX=this.heatmapPanel.offset().left+this.scope.xScale(e.x),e.pageY=this.heatmapPanel.offset().top+this.scope.chartHeight*e.panelRelY,e},e.prototype.addHistogram=function(e){var t,n,a,r=this.scope.ctrl.data.buckets[e.x],i=this.scope.ctrl.data.yBucketSize;this.scope.ctrl.data.tsBuckets?(t=0,n=this.scope.ctrl.data.tsBuckets.length-1,a=this.scope.ctrl.data.tsBuckets.length):(t=this.scope.ctrl.data.yAxis.min,n=this.scope.ctrl.data.yAxis.max,a=this.scope.ctrl.data.yAxis.ticks);var o=$.a.map(r.buckets,function(e){var t=void 0!==e.count?e.count:e.values.length;return[e.bounds.bottom,t]});o=$.a.filter(o,function(e){return e[0]>=t&&e[0]<=n});var s,l=this.scope.yScale.copy().domain([t,n]).range([0,160]);if(1===this.panel.yAxis.logBase)s=Math.floor(160/(n-t)*i*.9);else{var c=i||1;s=Math.floor(160/a/c*.9)}s=Math.max(s,1);var u=$.a.reduce($.a.map(o,function(e){return e[1]}),function(e,t){return e+t},0),d=wo.scaleLinear().domain([0,u]).range([0,40]);this.tooltip.select(".heatmap-histogram").append("svg").attr("width",160).attr("height",40).selectAll(".bar").data(o).enter().append("rect").attr("x",function(e){return l(e[0])}).attr("width",s).attr("y",function(e){return 40-d(e[1])}).attr("height",function(e){return d(e[1])})},e.prototype.move=function(e){if(this.tooltip){var t=te()(this.tooltip.node())[0],n=t.clientWidth,a=t.clientHeight,r=e.pageX+30,i=e.pageY+5;return e.pageX+n+40>window.innerWidth&&(r=e.pageX-n-30),e.pageY-window.pageYOffset+a+20>window.innerHeight&&(i=e.pageY-a-5),this.tooltip.style("left",r+"px").style("top",i+"px")}},e.prototype.countValueFormatter=function(e,t){void 0===t&&(t=null);return function(n){return Object(Si.getValueFormat)("short")(n,e,t)}},e}(),Go=1.2;var Wo=function(){function e(e,t,n,a){this.scope=e,this.elem=t,this.ctrl=a,this.$heatmap=this.elem.find(".heatmap-panel"),this.tooltip=new Ho(this.$heatmap,this.scope),this.selection={active:!1,x1:-1,x2:-1},this.padding={left:0,right:0,top:0,bottom:0},this.margin={left:25,right:15,top:10,bottom:20},this.dataRangeWidingFactor=Go,this.ctrl.events.on("render",this.onRender.bind(this)),this.ctrl.tickValueFormatter=this.tickValueFormatter.bind(this),L.b.on("graph-hover",this.onGraphHover.bind(this),this.scope),L.b.on("graph-hover-clear",this.onGraphHoverClear.bind(this),this.scope),this.$heatmap.on("mousedown",this.onMouseDown.bind(this)),this.$heatmap.on("mousemove",this.onMouseMove.bind(this)),this.$heatmap.on("mouseleave",this.onMouseLeave.bind(this))}return e.prototype.onGraphHoverClear=function(){this.clearCrosshair()},e.prototype.onGraphHover=function(e){this.drawSharedCrosshair(e.pos)},e.prototype.onRender=function(){this.render(),this.ctrl.renderingCompleted()},e.prototype.setElementHeight=function(){try{var e=this.ctrl.height||this.panel.height||this.ctrl.row.height;return $.a.isString(e)&&(e=parseInt(e.replace("px",""),10)),e-=this.panel.legend.show?28:11,this.$heatmap.css("height",e+"px"),!0}catch(e){return!1}},e.prototype.getYAxisWidth=function(e){var t=e.selectAll(".axis-y text").nodes();return $.a.max($.a.map(t,function(e){return e.getBBox().width}))},e.prototype.getXAxisHeight=function(e){if(e.select(".axis-x line").empty())return 30;var t=parseFloat(e.select(".axis-x line").attr("y2"));return parseFloat(e.attr("height"))-t},e.prototype.addXAxis=function(){this.scope.xScale=this.xScale=wo.scaleTime().domain([this.timeRange.from,this.timeRange.to]).range([0,this.chartWidth]);var e,t=this.chartWidth/100,n=ge.grafanaTimeFormat(t,this.timeRange.from,this.timeRange.to);e="utc"===this.ctrl.dashboard.getTimezone()?wo.utcFormat(n):wo.timeFormat(n);var a=wo.axisBottom(this.xScale).ticks(t).tickFormat(e).tickPadding(10).tickSize(this.chartHeight),r=this.margin.top,i=this.yAxisWidth;this.heatmap.append("g").attr("class","axis axis-x").attr("transform","translate("+i+","+r+")").call(a),this.heatmap.select(".axis-x").select(".domain").remove()},e.prototype.addYAxis=function(){var e=Math.ceil(this.chartHeight/50),t=ge.tickStep(this.data.heatmapStats.min,this.data.heatmapStats.max,e),n=this.wideYAxisRange(this.data.heatmapStats.min,this.data.heatmapStats.max,t),a=n.yMin,r=n.yMax;a=null!==this.panel.yAxis.min?this.panel.yAxis.min:a,r=null!==this.panel.yAxis.max?this.panel.yAxis.max:r,t=ge.tickStep(a,r,e),e=Math.ceil((r-a)/t);var i=ge.getPrecision(t),o=null===this.panel.yAxis.decimals?i:this.panel.yAxis.decimals,s=ge.getFlotTickSize(a,r,e,i),l=ge.getScaledDecimals(o,s);this.ctrl.decimals=o,this.ctrl.scaledDecimals=l,$.a.isEmpty(this.data.buckets)&&(r=1,a=-1,e=3,o=1),this.data.yAxis={min:a,max:r,ticks:e},this.scope.yScale=this.yScale=wo.scaleLinear().domain([a,r]).range([this.chartHeight,0]);var c=wo.axisLeft(this.yScale).ticks(e).tickFormat(this.tickValueFormatter(o,l)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(c);var u=this.margin.top,d=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+d+","+u+")"),this.heatmap.select(".axis-y").select(".domain").remove()},e.prototype.wideYAxisRange=function(e,t,n){var a,r,i=(t*(this.dataRangeWidingFactor-1)-e*(this.dataRangeWidingFactor-1))/2;return 0===n?(r=t*this.dataRangeWidingFactor,a=e-e*(this.dataRangeWidingFactor-1)):(r=Math.ceil((t+i)/n)*n,a=Math.floor((e-i)/n)*n),e>=0&&a<0&&(a=0),{yMin:a,yMax:r}},e.prototype.addLogYAxis=function(){var e=this.panel.yAxis.logBase,t=this.adjustLogRange(this.data.heatmapStats.minLog,this.data.heatmapStats.max,e),n=t.yMin,a=t.yMax;n=this.panel.yAxis.min&&"0"!==this.panel.yAxis.min?this.adjustLogMin(this.panel.yAxis.min,e):n,a=null!==this.panel.yAxis.max?this.adjustLogMax(this.panel.yAxis.max,e):a,$.a.isEmpty(this.data.buckets)&&(a=Math.pow(e,2),n=1),this.scope.yScale=this.yScale=wo.scaleLog().base(this.panel.yAxis.logBase).domain([n,a]).range([this.chartHeight,0]);var r=this.yScale.domain(),i=this.logScaleTickValues(r,e),o=ge.getPrecision(n),s=this.panel.yAxis.decimals||o,l=ge.getFlotTickSize(n,a,i.length,o),c=ge.getScaledDecimals(s,l);this.ctrl.decimals=s,this.ctrl.scaledDecimals=c,this.data.yAxis={min:n,max:a,ticks:i.length};var u=wo.axisLeft(this.yScale).tickValues(i).tickFormat(this.tickValueFormatter(s,c)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(u);var d=this.margin.top,p=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+p+","+d+")"),n<1&&this.heatmap.select(".axis-y").select(".tick text").text("0"),this.heatmap.select(".axis-y").select(".domain").remove()},e.prototype.addYAxisFromBuckets=function(){var e=this.data.tsBuckets;this.scope.yScale=this.yScale=wo.scaleLinear().domain([0,e.length-1]).range([this.chartHeight,0]);var t=$.a.map(e,function(e,t){return t}),n=$.a.max($.a.map(e,ge.getStringPrecision)),a=null===this.panel.yAxis.decimals?n:this.panel.yAxis.decimals;this.ctrl.decimals=a;var r=this.tickValueFormatter.bind(this);function i(t){var n=e[t];return $.a.isNaN($.a.toNumber(n))||""===n||(n=r(a)($.a.toNumber(n))),n}var o=$.a.map(e,function(e,t){return i(t)});this.data.tsBucketsFormatted=o;var s=wo.axisLeft(this.yScale).tickValues(t).tickFormat(i).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(s);var l=this.margin.top,c=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+c+","+l+")"),this.heatmap.select(".axis-y").select(".domain").remove()},e.prototype.adjustLogRange=function(e,t,n){this.data.heatmapStats.minLog;return{yMin:this.data.heatmapStats.minLog>1||!this.data.heatmapStats.minLog?1:this.adjustLogMin(this.data.heatmapStats.minLog,n),yMax:this.adjustLogMax(this.data.heatmapStats.max,n)}},e.prototype.adjustLogMax=function(e,t){return Math.pow(t,Math.ceil(ge.logp(e,t)))},e.prototype.adjustLogMin=function(e,t){return Math.pow(t,Math.floor(ge.logp(e,t)))},e.prototype.logScaleTickValues=function(e,t){var n=e[0],a=e[1],r=[];if(n<1)for(var i=Math.floor(ge.logp(n,t));i<0;i++){var o=Math.pow(t,i);r.push(o)}var s=Math.ceil(ge.logp(a,t));for(i=0;i<=s;i++){o=Math.pow(t,i);r.push(o)}return r},e.prototype.tickValueFormatter=function(e,t){void 0===t&&(t=null);var n=this.panel.yAxis.format;return function(a){try{return"none"!==n?Object(Si.getValueFormat)(n)(a,e,t):a}catch(e){return console.error(e.message||e),a}}},e.prototype.fixYAxisTickSize=function(){this.heatmap.select(".axis-y").selectAll(".tick line").attr("x2",this.chartWidth)},e.prototype.addAxes=function(){this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.chartTop=this.margin.top,this.chartBottom=this.chartTop+this.chartHeight,"tsbuckets"===this.panel.dataFormat?this.addYAxisFromBuckets():1===this.panel.yAxis.logBase?this.addYAxis():this.addLogYAxis(),this.yAxisWidth=this.getYAxisWidth(this.heatmap)+5,this.chartWidth=this.width-this.yAxisWidth-this.margin.right,this.fixYAxisTickSize(),this.addXAxis(),this.xAxisHeight=this.getXAxisHeight(this.heatmap),this.panel.yAxis.show||this.heatmap.select(".axis-y").selectAll("line").style("opacity",0),this.panel.xAxis.show||this.heatmap.select(".axis-x").selectAll("line").style("opacity",0)},e.prototype.addHeatmapCanvas=function(){var e=this.$heatmap[0];this.width=Math.floor(this.$heatmap.width())-this.padding.right,this.height=Math.floor(this.$heatmap.height())-this.padding.bottom,this.cardPadding=null!==this.panel.cards.cardPadding?this.panel.cards.cardPadding:1,this.cardRound=null!==this.panel.cards.cardRound?this.panel.cards.cardRound:0,this.heatmap&&this.heatmap.remove(),this.heatmap=wo.select(e).append("svg").attr("width",this.width).attr("height",this.height)},e.prototype.addHeatmap=function(){var e=this;if(this.addHeatmapCanvas(),this.addAxes(),1!==this.panel.yAxis.logBase&&"tsbuckets"!==this.panel.dataFormat){var t=this.panel.yAxis.logBase,n=this.yScale.domain(),a=this.logScaleTickValues(n,t);this.data.buckets=function(e,t){return $.a.forEach(e,function(e){var n=e.buckets,a={bounds:{bottom:0,top:0},values:[],points:[],count:0},r=n[0]||a,i=n[t]||a,o={y:0,bounds:{bottom:t,top:i.bounds.top||t},values:[],points:[],count:0};o.points=r.points.concat(i.points),o.values=r.values.concat(i.values),o.count=o.values.length,0!==o.count&&(delete n[t],n[0]=o)}),e}(this.data.buckets,$.a.min(a))}var r=this.data.cards,i=this.data.cardStats.max,o=this.panel.color.max||i,s=this.panel.color.min||0,l=$.a.find(this.ctrl.colorSchemes,{value:this.panel.color.colorScheme});this.colorScale=So(l,L.c.user.lightTheme,o,s),this.opacityScale=ko(this.panel.color,o),this.setCardSize();var c=this.heatmap.selectAll(".heatmap-card").data(r);c.append("title"),c=c.enter().append("rect").attr("x",this.getCardX.bind(this)).attr("width",this.getCardWidth.bind(this)).attr("y",this.getCardY.bind(this)).attr("height",this.getCardHeight.bind(this)).attr("rx",this.cardRound).attr("ry",this.cardRound).attr("class","bordered heatmap-card").style("fill",this.getCardColor.bind(this)).style("stroke",this.getCardColor.bind(this)).style("stroke-width",0).style("opacity",this.getCardOpacity.bind(this)),this.$heatmap.find(".heatmap-card").on("mouseenter",function(t){e.tooltip.mouseOverBucket=!0,e.highlightCard(t)}).on("mouseleave",function(t){e.tooltip.mouseOverBucket=!1,e.resetCardHighLight(t)})},e.prototype.highlightCard=function(e){var t=wo.select(e.target).style("fill"),n=wo.color(t).darker(2),a=wo.color(t).brighter(4),r=wo.select(e.target);this.tooltip.originalFillColor=t,r.style("fill",n.toString()).style("stroke",a.toString()).style("stroke-width",1)},e.prototype.resetCardHighLight=function(e){wo.select(e.target).style("fill",this.tooltip.originalFillColor).style("stroke",this.tooltip.originalFillColor).style("stroke-width",0)},e.prototype.setCardSize=function(){var e=Math.floor(this.xScale(this.data.xBucketSize)-this.xScale(0)),t=Math.floor(this.yScale(this.yScale.invert(0)-this.data.yBucketSize));if(1!==this.panel.yAxis.logBase){var n=this.panel.yAxis.logBase,a=this.data.yBucketSize||1;t=Math.floor((this.yScale(1)-this.yScale(n))/a)}this.cardWidth=e-2*this.cardPadding,this.cardHeight=t?t-2*this.cardPadding:0},e.prototype.getCardX=function(e){return this.xScale(e.x)<0?this.yAxisWidth+this.cardPadding:this.xScale(e.x)+this.yAxisWidth+this.cardPadding},e.prototype.getCardWidth=function(e){var t;if(this.xScale(e.x)<0){var n=this.xScale(e.x)+this.cardWidth;t=n>0?n:0}else t=this.xScale(e.x)+this.cardWidth>this.chartWidth?this.chartWidth-this.xScale(e.x)-this.cardPadding:this.cardWidth;return t=Math.max(t,1)},e.prototype.getCardY=function(e){var t=this.yScale(e.y)+this.chartTop-this.cardHeight-this.cardPadding;return 1!==this.panel.yAxis.logBase&&0===e.y?t=this.chartBottom-this.cardHeight-this.cardPadding:t<this.chartTop&&(t=this.chartTop),t},e.prototype.getCardHeight=function(e){var t=this.yScale(e.y)+this.chartTop-this.cardHeight-this.cardPadding,n=this.cardHeight;return 1!==this.panel.yAxis.logBase&&0===e.y?this.cardHeight:(t<this.chartTop?n=this.yScale(e.y)-this.cardPadding:this.yScale(e.y)>this.chartBottom?n=this.chartBottom-t:t+this.cardHeight>this.chartBottom&&(n=this.chartBottom-t),n=Math.min(n,this.chartHeight),n=Math.max(n,1))},e.prototype.getCardColor=function(e){return"opacity"===this.panel.color.mode?Object(Si.getColorFromHexRgbOrName)(this.panel.color.cardColor,L.c.user.lightTheme?Si.GrafanaThemeType.Light:Si.GrafanaThemeType.Dark):this.colorScale(e.count)},e.prototype.getCardOpacity=function(e){return"opacity"===this.panel.color.mode?this.opacityScale(e.count):1},e.prototype.getEventOffset=function(e){var t=this.$heatmap.offset();return{x:Math.floor(e.clientX-t.left),y:Math.floor(e.clientY-t.top)}},e.prototype.onMouseDown=function(e){var t=this,n=this.getEventOffset(e);this.selection.active=!0,this.selection.x1=n.x,this.mouseUpHandler=function(){t.onMouseUp()},te()(document).one("mouseup",this.mouseUpHandler.bind(this))},e.prototype.onMouseUp=function(){te()(document).unbind("mouseup",this.mouseUpHandler.bind(this)),this.mouseUpHandler=null,this.selection.active=!1;var e=Math.abs(this.selection.x2-this.selection.x1);if(this.selection.x2>=0&&e>2){var t=this.xScale.invert(Math.min(this.selection.x1,this.selection.x2)-this.yAxisWidth),n=this.xScale.invert(Math.max(this.selection.x1,this.selection.x2)-this.yAxisWidth);this.ctrl.timeSrv.setTime({from:X.a.utc(t),to:X.a.utc(n)})}this.clearSelection()},e.prototype.onMouseLeave=function(){L.b.emit("graph-hover-clear"),this.clearCrosshair()},e.prototype.onMouseMove=function(e){if(this.heatmap){var t=this.getEventOffset(e);if(this.selection.active)this.clearCrosshair(),this.tooltip.destroy(),this.selection.x2=this.limitSelection(t.x),this.drawSelection(this.selection.x1,this.selection.x2);else{var n=this.getEventPos(e,t);this.drawCrosshair(t.x),this.tooltip.show(n,this.data),this.emitGraphHoverEvent(n)}}},e.prototype.getEventPos=function(e,t){var n=this.xScale.invert(t.x-this.yAxisWidth).valueOf(),a=this.yScale.invert(t.y-this.chartTop);return{pageX:e.pageX,pageY:e.pageY,x:n,x1:n,y:a,y1:a,panelRelY:null,offset:t}},e.prototype.emitGraphHoverEvent=function(e){e.panelRelY=Math.max(e.offset.y/this.height,.001),L.b.emit("graph-hover",{pos:e,panel:this.panel})},e.prototype.limitSelection=function(e){return e=Math.max(e,this.yAxisWidth),e=Math.min(e,this.chartWidth+this.yAxisWidth)},e.prototype.drawSelection=function(e,t){if(this.heatmap){this.heatmap.selectAll(".heatmap-selection").remove();var n=Math.min(e,t),a=Math.abs(e-t);a>2&&this.heatmap.append("rect").attr("class","heatmap-selection").attr("x",n).attr("width",a).attr("y",this.chartTop).attr("height",this.chartHeight)}},e.prototype.clearSelection=function(){this.selection.x1=-1,this.selection.x2=-1,this.heatmap&&this.heatmap.selectAll(".heatmap-selection").remove()},e.prototype.drawCrosshair=function(e){if(this.heatmap){this.heatmap.selectAll(".heatmap-crosshair").remove();var t=e;t=Math.max(t,this.yAxisWidth),t=Math.min(t,this.chartWidth+this.yAxisWidth),this.heatmap.append("g").attr("class","heatmap-crosshair").attr("transform","translate("+t+",0)").append("line").attr("x1",1).attr("y1",this.chartTop).attr("x2",1).attr("y2",this.chartBottom).attr("stroke-width",1)}},e.prototype.drawSharedCrosshair=function(e){if(this.heatmap&&0!==this.ctrl.dashboard.graphTooltip){var t=this.xScale(e.x)+this.yAxisWidth;this.drawCrosshair(t)}},e.prototype.clearCrosshair=function(){this.heatmap&&this.heatmap.selectAll(".heatmap-crosshair").remove()},e.prototype.render=function(){if(this.data=this.ctrl.data,this.panel=this.ctrl.panel,this.timeRange=this.ctrl.range,this.setElementHeight()&&this.data){if($.a.isEmpty(this.data.buckets))return this.addHeatmapCanvas(),void this.addAxes();this.addHeatmap(),this.scope.yAxisWidth=this.yAxisWidth,this.scope.xAxisHeight=this.xAxisHeight,this.scope.chartHeight=this.chartHeight,this.scope.chartWidth=this.chartWidth,this.scope.chartTop=this.chartTop}},e}(),Yo={heatmap:{},cards:{cardPadding:null,cardRound:null},color:{mode:"spectrum",cardColor:"#b4ff00",colorScale:"sqrt",exponent:.5,colorScheme:"interpolateOranges"},legend:{show:!1},dataFormat:"timeseries",yBucketBound:"auto",xAxis:{show:!0},yAxis:{show:!0,format:"short",decimals:null,logBase:1,splitFactor:null,min:null,max:null},xBucketSize:null,xBucketNumber:null,yBucketSize:null,yBucketNumber:null,tooltip:{show:!0,showHistogram:!1},highlightCards:!0},Ko=["opacity","spectrum"],Xo=["linear","sqrt"],Jo=[{name:"Spectral",value:"interpolateSpectral",invert:"always"},{name:"RdYlGn",value:"interpolateRdYlGn",invert:"always"},{name:"Blues",value:"interpolateBlues",invert:"dark"},{name:"Greens",value:"interpolateGreens",invert:"dark"},{name:"Greys",value:"interpolateGreys",invert:"dark"},{name:"Oranges",value:"interpolateOranges",invert:"dark"},{name:"Purples",value:"interpolatePurples",invert:"dark"},{name:"Reds",value:"interpolateReds",invert:"dark"},{name:"Viridis",value:"interpolateViridis",invert:"light"},{name:"Magma",value:"interpolateMagma",invert:"light"},{name:"Inferno",value:"interpolateInferno",invert:"light"},{name:"Plasma",value:"interpolatePlasma",invert:"light"},{name:"Warm",value:"interpolateWarm",invert:"light"},{name:"Cool",value:"interpolateCool",invert:"light"},{name:"Cubehelix",value:"interpolateCubehelixDefault",invert:"light"},{name:"BuGn",value:"interpolateBuGn",invert:"dark"},{name:"BuPu",value:"interpolateBuPu",invert:"dark"},{name:"GnBu",value:"interpolateGnBu",invert:"dark"},{name:"OrRd",value:"interpolateOrRd",invert:"dark"},{name:"PuBuGn",value:"interpolatePuBuGn",invert:"dark"},{name:"PuBu",value:"interpolatePuBu",invert:"dark"},{name:"PuRd",value:"interpolatePuRd",invert:"dark"},{name:"RdPu",value:"interpolateRdPu",invert:"dark"},{name:"YlGnBu",value:"interpolateYlGnBu",invert:"dark"},{name:"YlGn",value:"interpolateYlGn",invert:"dark"},{name:"YlOrBr",value:"interpolateYlOrBr",invert:"dark"},{name:"YlOrRd",value:"interpolateYlOrRd",invert:"dark"}],Zo=["prometheus","elasticsearch"],es=function(e){function t(t,n,a){var r=e.call(this,t,n)||this;return r.opacityScales=[],r.colorModes=[],r.colorSchemes=[],r.timeSrv=a,r.selectionActivated=!1,$.a.defaultsDeep(r.panel,Yo),r.opacityScales=Xo,r.colorModes=Ko,r.colorSchemes=Jo,r.events.on("render",r.onRender.bind(r)),r.events.on("data-received",r.onDataReceived.bind(r)),r.events.on("data-error",r.onDataError.bind(r)),r.events.on("data-snapshot-load",r.onDataReceived.bind(r)),r.events.on("init-edit-mode",r.onInitEditMode.bind(r)),r.onCardColorChange=r.onCardColorChange.bind(r),r}return t.$inject=["$scope","$injector","timeSrv"],Q.c(t,e),t.prototype.onInitEditMode=function(){this.addEditorTab("Axes",Do,2),this.addEditorTab("Display",Po,3),this.unitFormats=z.a.getUnitFormats()},t.prototype.zoomOut=function(e){this.publishAppEvent("zoom-out",2)},t.prototype.onRender=function(){this.range&&("tsbuckets"===this.panel.dataFormat?this.convertHistogramToHeatmapData():this.convertTimeSeriesToHeatmapData())},t.prototype.convertTimeSeriesToHeatmapData=function(){var e,t,n,a,r=this.panel.yAxis.logBase,i=this.panel.xBucketNumber||30,o=Math.floor((this.range.to-this.range.from)/i);e=z.a.interval_regex.test(this.panel.xBucketSize)?z.a.interval_to_ms(this.panel.xBucketSize):isNaN(Number(this.panel.xBucketSize))||""===this.panel.xBucketSize||null===this.panel.xBucketSize?o:Number(this.panel.xBucketSize),a=this.parseSeries(this.series);var s=this.panel.yBucketNumber||10;1!==r?t=this.panel.yAxis.splitFactor:(t=a.max===a.min?a.max?a.max/10:1:(a.max-a.min)/s,t=this.panel.yBucketSize||t),n=Ro(this.series,t,e,r),a.min||a.max||(a={min:-1,max:1,minLog:1},t=1);var l=qo(n),c=l.cards,u=l.cardStats;this.data={buckets:n,heatmapStats:a,xBucketSize:e,yBucketSize:t,cards:c,cardStats:u}},t.prototype.convertHistogramToHeatmapData=function(){var e,t,n,a=this.getPanelDataSourceType();$.a.includes(Zo,a)||this.series.sort($o),t=function(e){for(var t={},n=0;n<e.length;n++){var a=e[n],r=n;if(isNaN(r))return t;for(var i=0,o=a.datapoints;i<o.length;i++){var s=o[i],l=s[Oo],c=s[Io];if($.a.isNumber(l)){var u=t[c];u||(u=t[c]={x:c,buckets:{}}),u.buckets[r]={y:r,count:l,bounds:{top:null,bottom:r},values:[],points:[]}}}}return t}(this.series),n=$.a.map(this.series,"label");var r=this.panel.yBucketBound;"prometheus"===a&&"lower"!==r||"upper"===r?n=[""].concat(n):n.push(""),e=function(e,t){void 0===t&&(t=1);var n=1/0;if(0===e.length)return 0;if(1===e.length)return e[0];e=$.a.sortBy(e);for(var a=1;a<e.length;a++){var r=zo(e[a],e[a-1],t);n=r<n?r:n}return n}($.a.map($.a.keys(t),function(e){return Number(e)}));var i=qo(t),o=i.cards,s=i.cardStats;this.data={buckets:t,xBucketSize:e,yBucketSize:1,tsBuckets:n,cards:o,cardStats:s}},t.prototype.getPanelDataSourceType=function(){return this.datasource.meta&&this.datasource.meta.id?this.datasource.meta.id:"unknown"},t.prototype.onDataReceived=function(e){if(this.series=e.map(this.seriesHandler.bind(this)),this.dataWarning=null,0===$.a.reduce(this.series,function(e,t){return e+t.datapoints.length},0))this.dataWarning={title:"No data points",tip:"No datapoints returned from data query"};else for(var t=0,n=this.series;t<n.length;t++){if(n[t].isOutsideRange){this.dataWarning={title:"Data points outside time range",tip:"Can be caused by timezone mismatch or missing time filter in query"};break}}this.render()},t.prototype.onDataError=function(){this.series=[],this.render()},t.prototype.onCardColorChange=function(e){this.panel.color.cardColor=e,this.render()},t.prototype.seriesHandler=function(e){if(void 0===e.datapoints)throw new Error("Heatmap error: data should be a time series");var t=new de.a({datapoints:e.datapoints,alias:e.target});t.flotpairs=t.getFlotPairs(this.panel.nullPointMode);var n=e.datapoints||[];n&&n.length>0&&(n[n.length-1][1]-this.range.from<-1e4&&(t.isOutsideRange=!0));return t},t.prototype.parseSeries=function(e){var t=$.a.min($.a.map(e,function(e){return e.stats.min})),n=$.a.min($.a.map(e,function(e){return e.stats.logmin}));return{max:$.a.max($.a.map(e,function(e){return e.stats.max})),min:t,minLog:n}},t.prototype.parseHistogramSeries=function(e){var t=$.a.map(e,function(e){return Number(e.alias)}),n=$.a.min(t),a=$.a.min(t);return{max:$.a.max(t),min:n,minLog:a}},t.prototype.link=function(e,t,n,a){!function(e,t,n,a){new Wo(e,t,n,a)}(e,t,n,a)},t.templateUrl="module.html",t}(G),ts={};ts.timeseries_to_rows={description:"Time series to rows",getColumns:function(){return[]},transform:function(e,t,n){n.columns=[{text:"Time",type:"date"},{text:"Metric"},{text:"Value"}];for(var a=0;a<e.length;a++)for(var r=e[a],i=0;i<r.datapoints.length;i++){var o=r.datapoints[i];n.rows.push([o[1],r.target,o[0]])}}},ts.timeseries_to_columns={description:"Time series to columns",getColumns:function(){return[]},transform:function(e,t,n){n.columns.push({text:"Time",type:"date"});for(var a={},r=0;r<e.length;r++){var i=e[r];n.columns.push({text:i.target});for(var o=0;o<i.datapoints.length;o++){var s=i.datapoints[o],l=s[1].toString();a[l]?a[l][r]=s[0]:(a[l]={time:s[1]},a[l][r]=s[0])}}for(var c in a){var u=a[c],d=[u.time];for(r=0;r<e.length;r++){var p=u[r];d.push(p)}n.rows.push(d)}}},ts.timeseries_aggregations={description:"Time series aggregations",getColumns:function(){return[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Current",value:"current"},{text:"Count",value:"count"}]},transform:function(e,t,n){var a,r;for(n.columns.push({text:"Metric"}),a=0;a<t.columns.length;a++)n.columns.push({text:t.columns[a].text});for(a=0;a<e.length;a++){var i=new de.a({datapoints:e[a].datapoints,alias:e[a].target});i.getFlotPairs("connected");var o=[i.alias];for(r=0;r<t.columns.length;r++)o.push(i.stats[t.columns[r].value]);n.rows.push(o)}}},ts.annotations={description:"Annotations",getColumns:function(){return[]},transform:function(e,t,n){if(n.columns.push({text:"Time",type:"date"}),n.columns.push({text:"Title"}),n.columns.push({text:"Text"}),n.columns.push({text:"Tags"}),e&&e.annotations&&0!==e.annotations.length)for(var a=0;a<e.annotations.length;a++){var r=e.annotations[a];n.rows.push([r.time,r.title,r.text,r.tags])}}},ts.table={description:"Table",getColumns:function(e){if(!e||0===e.length)return[];if(1===e.length)return e[0].columns.slice();var t={};return e.reduce(function(e,n){return n.columns.forEach(function(n){var a=n.text;void 0===t[a]&&(t[a]=e.length,e.push(n))}),e},[])},transform:function(e,t,n){if(e&&0!==e.length){var a=$.a.findIndex(e,function(e){return"table"!==e.type});if(a>-1)throw{message:"Result of query #"+String.fromCharCode(65+a)+" is not in table format, try using another transform."};pe.b.apply(void 0,[n].concat(e))}}},ts.json={description:"JSON Data",getColumns:function(e){if(!e||0===e.length)return[];for(var t={},n=0;n<e.length;n++){var a=e[n];if("docs"===a.type)for(var r=Math.min(a.datapoints.length,100),i=0;i<r;i++){var o=me(a.datapoints[i],null);for(var s in o)t[s]=!0}}return $.a.map(t,function(e,t){return{text:t,value:t}})},transform:function(e,t,n){for(var a,r,i,o=0,s=t.columns;o<s.length;o++){var l={text:s[o].text};e.length>0&&e[0].filterable&&(l.filterable=!0),n.columns.push(l)}for(0===n.columns.length&&n.columns.push({text:"JSON"}),a=0;a<e.length;a++){var c=e[a];for(r=0;r<c.datapoints.length;r++){var u=c.datapoints[r],d=[];if($.a.isObject(u)&&t.columns.length>0){var p=me(u,null);for(i=0;i<t.columns.length;i++)d.push(p[t.columns[i].value])}else d.push(JSON.stringify(u));n.rows.push(d)}}}};var ns=function(){function e(e,t,n){this.$q=t,this.uiSegmentSrv=n,e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.transformers=ts,this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.addColumnSegment=n.newPlusButton(),this.updateTransformHints()}return e.$inject=["$scope","$q","uiSegmentSrv"],e.prototype.updateTransformHints=function(){switch(this.canSetColumns=!1,this.columnsHelpMessage="",this.panel.transform){case"timeseries_aggregations":case"json":this.canSetColumns=!0;break;case"table":this.columnsHelpMessage="Columns and their order are determined by the data query"}},e.prototype.getColumnOptions=function(){var e=this;if(!this.panelCtrl.dataRaw)return this.$q.when([]);var t=this.transformers[this.panel.transform].getColumns(this.panelCtrl.dataRaw),n=$.a.map(t,function(t){return e.uiSegmentSrv.newSegment({value:t.text})});return this.$q.when(n)},e.prototype.addColumn=function(){var e=ts[this.panel.transform].getColumns(this.panelCtrl.dataRaw),t=$.a.find(e,{text:this.addColumnSegment.value});t&&(this.panel.columns.push(t),this.render());var n=this.uiSegmentSrv.newPlusButton();this.addColumnSegment.html=n.html,this.addColumnSegment.value=n.value},e.prototype.transformChanged=function(){this.panel.columns=[],"timeseries_aggregations"===this.panel.transform&&this.panel.columns.push({text:"Avg",value:"avg"}),this.updateTransformHints(),this.render()},e.prototype.render=function(){this.panelCtrl.render()},e.prototype.removeColumn=function(e){this.panel.columns=$.a.without(this.panel.columns,e),this.panelCtrl.render()},e}();function as(e,t){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/table/editor.html",controller:ns}}var rs=function(){function e(e){var t=this;e.editor=this,this.activeStyleIndex=0,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.unitFormats=Object(Si.getValueFormats)(),this.colorModes=[{text:"Disabled",value:null},{text:"Cell",value:"cell"},{text:"Value",value:"value"},{text:"Row",value:"row"}],this.columnTypes=[{text:"Number",value:"number"},{text:"String",value:"string"},{text:"Date",value:"date"},{text:"Hidden",value:"hidden"}],this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.dateFormats=[{text:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{text:"YYYY-MM-DD HH:mm:ss.SSS",value:"YYYY-MM-DD HH:mm:ss.SSS"},{text:"MM/DD/YY h:mm:ss a",value:"MM/DD/YY h:mm:ss a"},{text:"MMMM D, YYYY LT",value:"MMMM D, YYYY LT"},{text:"YYYY-MM-DD",value:"YYYY-MM-DD"}],this.mappingTypes=[{text:"Value to text",value:1},{text:"Range to text",value:2}],this.getColumnNames=function(){return t.panelCtrl.table?$.a.map(t.panelCtrl.table.columns,function(e){return e.text}):[]},this.onColorChange=this.onColorChange.bind(this)}return e.$inject=["$scope"],e.prototype.render=function(){this.panelCtrl.render()},e.prototype.setUnitFormat=function(e,t){e.unit=t.value,this.panelCtrl.render()},e.prototype.addColumnStyle=function(){var e=this.panel.styles,t=e.length,n=t;t>0&&("/.*/"===e[t-1].pattern&&(n=t-1));e.splice(n,0,{unit:"short",type:"number",alias:"",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],colorMode:null,pattern:"",dateFormat:"YYYY-MM-DD HH:mm:ss",thresholds:[],mappingType:1}),this.activeStyleIndex=n},e.prototype.removeColumnStyle=function(e){this.panel.styles=$.a.without(this.panel.styles,e)},e.prototype.invertColorOrder=function(e){var t=this.panel.styles[e].colors,n=t[0];t[0]=t[2],t[2]=n,this.panelCtrl.render()},e.prototype.onColorChange=function(e,t){var n=this;return function(a){n.panel.styles[e].colors[t]=a,n.render()}},e.prototype.addValueMap=function(e){e.valueMaps||(e.valueMaps=[]),e.valueMaps.push({value:"",text:""}),this.panelCtrl.render()},e.prototype.removeValueMap=function(e,t){e.valueMaps.splice(t,1),this.panelCtrl.render()},e.prototype.addRangeMap=function(e){e.rangeMaps||(e.rangeMaps=[]),e.rangeMaps.push({from:"",to:"",text:""}),this.panelCtrl.render()},e.prototype.removeRangeMap=function(e,t){e.rangeMaps.splice(t,1),this.panelCtrl.render()},e}();function is(e,t){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/table/column_options.html",controller:rs}}var os=function(){function e(e,t,n,a,r,i){this.panel=e,this.table=t,this.isUtc=n,this.sanitize=a,this.templateSrv=r,this.theme=i,this.initColumns()}return e.prototype.setTable=function(e){this.table=e,this.initColumns()},e.prototype.initColumns=function(){this.formatters=[],this.colorState={};for(var e=0;e<this.table.columns.length;e++){var t=this.table.columns[e];t.title=t.text;for(var n=0;n<this.panel.styles.length;n++){var a=this.panel.styles[n],r=z.a.stringToJsRegex(a.pattern);if(t.text.match(r)){t.style=a,a.alias&&(t.title=t.text.replace(r,a.alias));break}}this.formatters[e]=this.createColumnFormatter(t)}},e.prototype.getColorForValue=function(e,t){if(!t.thresholds)return null;for(var n=t.thresholds.length;n>0;n--)if(e>=t.thresholds[n-1])return Object(Si.getColorFromHexRgbOrName)(t.colors[n],this.theme);return Object(Si.getColorFromHexRgbOrName)($.a.first(t.colors),this.theme)},e.prototype.defaultCellFormatter=function(e,t){return null===e||void 0===e||void 0===e?"":($.a.isArray(e)&&(e=e.join(", ")),t&&t.sanitize?this.sanitize(e):$.a.escape(e))},e.prototype.createColumnFormatter=function(e){var t=this;if(!e.style)return this.defaultCellFormatter;if("hidden"===e.style.type)return function(e){};if("date"===e.style.type)return function(n){if(void 0===n||null===n)return"-";$.a.isArray(n)&&(n=n[0]),$.a.isString(n)&&!isNaN(n)&&n.length>12&&(n=parseInt(n,10));var a=X()(n);return t.isUtc&&(a=a.utc()),a.format(e.style.dateFormat)};if("string"===e.style.type)return function(n){$.a.isArray(n)&&(n=n.join(", "));var a=e.style.mappingType||0;if(1===a&&e.style.valueMaps)for(var r=0;r<e.style.valueMaps.length;r++){var i=e.style.valueMaps[r];if(null!==n){if(!$.a.isString(n)&&Number(i.value)===Number(n)||i.value===n)return t.setColorState(n,e.style),t.defaultCellFormatter(i.text,e.style)}else if("null"===i.value)return i.text}if(2===a&&e.style.rangeMaps)for(r=0;r<e.style.rangeMaps.length;r++){i=e.style.rangeMaps[r];if(null!==n){if(Number(i.from)<=Number(n)&&Number(i.to)>=Number(n))return t.setColorState(n,e.style),t.defaultCellFormatter(i.text,e.style)}else if("null"===i.from&&"null"===i.to)return i.text}return null===n||void 0===n?"-":(t.setColorState(n,e.style),t.defaultCellFormatter(n,e.style))};if("number"===e.style.type){var n=Object(Si.getValueFormat)(e.unit||e.style.unit);return function(a){return null===a||void 0===a?"-":$.a.isString(a)||$.a.isArray(a)?t.defaultCellFormatter(a,e.style):(t.setColorState(a,e.style),n(a,e.style.decimals,null))}}return function(n){return t.defaultCellFormatter(n,e.style)}},e.prototype.setColorState=function(e,t){if(t.colorMode&&null!==e&&void 0!==e&&!$.a.isArray(e)){var n=Number(e);isNaN(n)||(this.colorState[t.colorMode]=this.getColorForValue(n,t))}},e.prototype.renderRowVariables=function(e){for(var t={},n=this.table.rows[e],a=0;a<n.length;a++)t["__cell_"+a]={value:n[a]};return t},e.prototype.formatColumnValue=function(e,t){return this.formatters[e]?this.formatters[e](t):t},e.prototype.renderCell=function(e,t,n,a){void 0===a&&(a=!1),n=this.formatColumnValue(e,n);var r=this.table.columns[e],i="",o="",s=[],l="";this.colorState.cell?(i=' style="background-color:'+this.colorState.cell+'"',s.push("table-panel-color-cell"),this.colorState.cell=null):this.colorState.value&&(o=' style="color:'+this.colorState.value+'"',this.colorState.value=null);var c="";if(a&&(c='<div class="table-panel-width-hack">'+this.table.columns[e].title+"</div>"),void 0===n?(i=' style="display:none;"',r.hidden=!0):r.hidden=!1,!0===r.hidden)return"";if(r.style&&r.style.preserveFormat&&s.push("table-panel-cell-pre"),r.style&&r.style.link){var u=this.renderRowVariables(t);u.__cell={value:n};var d=this.templateSrv.replace(r.style.linkUrl,u,encodeURIComponent),p=this.templateSrv.replace(r.style.linkTooltip,u),h=r.style.linkTargetBlank?"_blank":"";s.push("table-panel-cell-link"),c+='\n        <a href="'+d+'" target="'+h+'" data-link-tooltip data-original-title="'+p+'" data-placement="right"'+o+">\n          "+n+"\n        </a>\n      "}else c+=n;return r.filterable&&(s.push("table-panel-cell-filterable"),c+='\n        <a class="table-panel-filter-link" data-link-tooltip data-original-title="Filter out value" data-placement="bottom"\n           data-row="'+t+'" data-column="'+e+'" data-operator="!=">\n          <i class="fa fa-search-minus"></i>\n        </a>\n        <a class="table-panel-filter-link" data-link-tooltip data-original-title="Filter for value" data-placement="bottom"\n           data-row="'+t+'" data-column="'+e+'" data-operator="=">\n          <i class="fa fa-search-plus"></i>\n        </a>'),s.length&&(l=' class="'+s.join(" ")+'"'),c="<td"+l+i+o+">"+c+"</td>"},e.prototype.render=function(e){for(var t=this.panel.pageSize||100,n=e*t,a=Math.min(n+t,this.table.rows.length),r="",i=[],o="",s=n;s<a;s++){for(var l=this.table.rows[s],c="",u="",d=0;d<this.table.columns.length;d++)c+=this.renderCell(d,s,l[d],s===n);this.colorState.row&&(u=' style="background-color:'+this.colorState.row+'"',i.push("table-panel-color-row"),this.colorState.row=null),i.length&&(o=' class="'+i.join(" ")+'"'),r+="<tr "+o+u+">"+c+"</tr>"}return r},e.prototype.render_values=function(){for(var e=[],t=0;t<this.table.rows.length;t++){for(var n=this.table.rows[t],a=[],r=0;r<this.table.columns.length;r++)a.push(this.formatColumnValue(r,n[r]));e.push(a)}return{columns:this.table.columns,rows:e}},e}(),ss=function(e){function t(t,n,a,r,i,o){var s=e.call(this,t,n)||this;return s.annotationsSrv=r,s.$sanitize=i,s.variableSrv=o,s.panelDefaults={targets:[{}],transform:"timeseries_to_columns",pageSize:null,showHeader:!0,styles:[{type:"date",pattern:"Time",alias:"Time",dateFormat:"YYYY-MM-DD HH:mm:ss"},{unit:"short",type:"number",alias:"",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],colorMode:null,pattern:"/.*/",thresholds:[]}],columns:[],scroll:!0,fontSize:"100%",sort:{col:0,desc:!0}},s.pageIndex=0,void 0===s.panel.styles&&(s.panel.styles=s.panel.columns,s.panel.columns=s.panel.fields,delete s.panel.columns,delete s.panel.fields),$.a.defaults(s.panel,s.panelDefaults),s.events.on("data-received",s.onDataReceived.bind(s)),s.events.on("data-error",s.onDataError.bind(s)),s.events.on("data-snapshot-load",s.onDataReceived.bind(s)),s.events.on("init-edit-mode",s.onInitEditMode.bind(s)),s.events.on("init-panel-actions",s.onInitPanelActions.bind(s)),s}return t.$inject=["$scope","$injector","templateSrv","annotationsSrv","$sanitize","variableSrv"],Q.c(t,e),t.prototype.onInitEditMode=function(){this.addEditorTab("Options",as,2),this.addEditorTab("Column Styles",is,3)},t.prototype.onInitPanelActions=function(e){e.push({text:"Export CSV",click:"ctrl.exportCsv()"})},t.prototype.issueQueries=function(t){return this.pageIndex=0,"annotations"===this.panel.transform?this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}).then(function(e){return{data:e}}):e.prototype.issueQueries.call(this,t)},t.prototype.onDataError=function(e){this.dataRaw=[],this.render()},t.prototype.onDataReceived=function(e){this.dataRaw=e,this.pageIndex=0,this.dataRaw&&this.dataRaw.length&&("table"===this.dataRaw[0].type?this.panel.transform="table":"docs"===this.dataRaw[0].type?this.panel.transform="json":"table"!==this.panel.transform&&"json"!==this.panel.transform||(this.panel.transform="timeseries_to_rows")),this.render()},t.prototype.render=function(){return this.table=function(e,t){var n=new pe.a;if(!e||0===e.length)return n;var a=ts[t.transform];if(!a)throw{message:"Transformer "+t.transform+" not found"};return a.transform(e,t,n),n}(this.dataRaw,this.panel),this.table.sort(this.panel.sort),this.renderer=new os(this.panel,this.table,this.dashboard.isTimezoneUtc(),this.$sanitize,this.templateSrv,R.a.theme.type),e.prototype.render.call(this,this.table)},t.prototype.toggleColumnSort=function(e,t){this.table.columns[this.panel.sort.col]&&(this.table.columns[this.panel.sort.col].sort=!1),this.panel.sort.col===t?this.panel.sort.desc?this.panel.sort.desc=!1:this.panel.sort.col=null:(this.panel.sort.col=t,this.panel.sort.desc=!0),this.render()},t.prototype.exportCsv=function(){var e=this.$scope.$new(!0);e.tableData=this.renderer.render_values(),e.panel="table",this.publishAppEvent("show-modal",{templateHtml:'<export-data-modal panel="panel" data="tableData"></export-data-modal>',scope:e,modalClass:"modal--narrow"})},t.prototype.link=function(e,t,n,a){var r,i=a.panel,o=0;function s(){var e=t.parents(".panel-content"),n=t.find(".table-panel-scroll"),s=t.find("tbody"),l=t.find(".table-panel-footer");t.css({"font-size":i.fontSize}),e.addClass("table-panel-content"),function(e){a.renderer.setTable(r),e.empty(),e.html(a.renderer.render(a.pageIndex))}(s),function(e){e.empty();var t=i.pageSize||100;if(1!==(o=Math.ceil(r.rows.length/t))){for(var n=Math.max(a.pageIndex-3,0),s=Math.min(o,n+9),l=te()("<ul></ul>"),c=n;c<s;c++){var u=c===a.pageIndex?"active":"",d=te()('<li><a class="table-panel-page-link pointer '+u+'">'+(c+1)+"</a></li>");l.append(d)}e.append(l)}}(l),n.css({"max-height":i.scroll?function(){var e=a.height;return o>1&&(e-=26),e-31+"px"}():""})}t.tooltip({selector:"[data-link-tooltip]"}),t.on("click",".table-panel-page-link",function(e){var t=te()(e.currentTarget);a.pageIndex=parseInt(t.text(),10)-1,s()}),t.on("click",".table-panel-filter-link",function(e){var t=te()(e.currentTarget).data(),n={datasource:i.datasource,key:r.columns[t.column].text,value:r.rows[t.row][t.column],operator:t.operator};a.variableSrv.setAdhocFilter(n)});var l=e.$on("$destroy",function(){t.off("click",".table-panel-page-link"),t.off("click",".table-panel-filter-link"),l()});a.events.on("render",function(e){(r=e||r)&&s(),a.renderingCompleted()})},t.templateUrl="module.html",t}(G),ls=(n(654),n(269),function(e){function t(t,n,a,r){var i=e.call(this,t,n)||this;return i.linkSrv=a,i.$sanitize=r,i.dataType="timeseries",i.valueNameOptions=[{value:"min",text:"Min"},{value:"max",text:"Max"},{value:"avg",text:"Average"},{value:"current",text:"Current"},{value:"total",text:"Total"},{value:"name",text:"Name"},{value:"first",text:"First"},{value:"delta",text:"Delta"},{value:"diff",text:"Difference"},{value:"range",text:"Range"},{value:"last_time",text:"Time of last point"}],i.panelDefaults={links:[],datasource:null,maxDataPoints:100,interval:null,targets:[{}],cacheTimeout:null,format:"none",prefix:"",postfix:"",nullText:null,valueMaps:[{value:"null",op:"=",text:"N/A"}],mappingTypes:[{name:"value to text",value:1},{name:"range to text",value:2}],rangeMaps:[{from:"null",to:"null",text:"N/A"}],mappingType:1,nullPointMode:"connected",valueName:"avg",prefixFontSize:"50%",valueFontSize:"80%",postfixFontSize:"50%",thresholds:"",colorBackground:!1,colorValue:!1,colors:["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],sparkline:{show:!1,full:!1,lineColor:"rgb(31, 120, 193)",fillColor:"rgba(31, 118, 189, 0.18)"},gauge:{show:!1,minValue:0,maxValue:100,thresholdMarkers:!0,thresholdLabels:!1},tableColumn:""},$.a.defaults(i.panel,i.panelDefaults),i.events.on("data-received",i.onDataReceived.bind(i)),i.events.on("data-error",i.onDataError.bind(i)),i.events.on("data-snapshot-load",i.onDataReceived.bind(i)),i.events.on("init-edit-mode",i.onInitEditMode.bind(i)),i.onSparklineColorChange=i.onSparklineColorChange.bind(i),i.onSparklineFillChange=i.onSparklineFillChange.bind(i),i}return t.$inject=["$scope","$injector","linkSrv","$sanitize"],Q.c(t,e),t.prototype.onInitEditMode=function(){this.fontSizes=["20%","30%","50%","70%","80%","100%","110%","120%","150%","170%","200%"],this.addEditorTab("Options","public/app/plugins/panel/singlestat/editor.html",2),this.addEditorTab("Value Mappings","public/app/plugins/panel/singlestat/mappings.html",3),this.unitFormats=z.a.getUnitFormats()},t.prototype.setUnitFormat=function(e){this.panel.format=e.value,this.refresh()},t.prototype.onDataError=function(e){this.onDataReceived([])},t.prototype.onDataReceived=function(e){var t={scopedVars:$.a.extend({},this.panel.scopedVars)};if(e.length>0&&"table"===e[0].type){this.dataType="table";var n=e.map(this.tableHandler.bind(this));this.setTableValues(n,t)}else this.dataType="timeseries",this.series=e.map(this.seriesHandler.bind(this)),this.setValues(t);this.data=t,this.render()},t.prototype.seriesHandler=function(e){var t=new de.a({datapoints:e.datapoints||[],alias:e.target});return t.flotpairs=t.getFlotPairs(this.panel.nullPointMode),t},t.prototype.tableHandler=function(e){var t=[],n={};return e.columns.forEach(function(e,t){n[t]=e.text}),this.tableColumnOptions=n,$.a.find(e.columns,["text",this.panel.tableColumn])||this.setTableColumnToSensibleDefault(e),e.rows.forEach(function(e){var a={};e.forEach(function(e,t){var r=n[t];a[r]=e}),t.push(a)}),t},t.prototype.setTableColumnToSensibleDefault=function(e){1===e.columns.length?this.panel.tableColumn=e.columns[0].text:this.panel.tableColumn=$.a.find(e.columns,function(e){return"time"!==e.type}).text},t.prototype.setTableValues=function(e,t){if(e&&0!==e.length&&0!==e[0].length&&void 0!==e[0][0][this.panel.tableColumn]){var n=e[0][0];if(t.value=n[this.panel.tableColumn],$.a.isString(t.value))t.valueFormatted=$.a.escape(t.value),t.value=0,t.valueRounded=0;else{var a=this.getDecimalsForValue(t.value),r=Object(Si.getValueFormat)(this.panel.format);t.valueFormatted=r(n[this.panel.tableColumn],a.decimals,a.scaledDecimals),t.valueRounded=z.a.roundValue(t.value,this.panel.decimals||0)}this.setValueMapping(t)}},t.prototype.canModifyText=function(){return!this.panel.gauge.show},t.prototype.setColoring=function(e){e.background?(this.panel.colorValue=!1,this.panel.colors=["rgba(71, 212, 59, 0.4)","rgba(245, 150, 40, 0.73)","rgba(225, 40, 40, 0.59)"]):(this.panel.colorBackground=!1,this.panel.colors=["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"]),this.render()},t.prototype.invertColorOrder=function(){var e=this.panel.colors[0];this.panel.colors[0]=this.panel.colors[2],this.panel.colors[2]=e,this.render()},t.prototype.onColorChange=function(e){var t=this;return function(n){t.panel.colors[e]=n,t.render()}},t.prototype.onSparklineColorChange=function(e){this.panel.sparkline.lineColor=e,this.render()},t.prototype.onSparklineFillChange=function(e){this.panel.sparkline.fillColor=e,this.render()},t.prototype.getDecimalsForValue=function(e){if($.a.isNumber(this.panel.decimals))return{decimals:this.panel.decimals,scaledDecimals:null};var t,n=e/2,a=-Math.floor(Math.log(n)/Math.LN10),r=Math.pow(10,-a),i=n/r;i<1.5?t=1:i<3?(t=2,i>2.25&&(t=2.5,++a)):t=i<7.5?5:10,t*=r,Math.floor(e)===e&&(a=0);var o={};return o.decimals=Math.max(0,a),o.scaledDecimals=o.decimals-Math.floor(Math.log(t)/Math.LN10)+2,o},t.prototype.setValues=function(e){if(e.flotpairs=[],this.series.length>1){var t=new Error;throw t.message="Multiple Series Error",t.data="Metric query returns "+this.series.length+" series. Single Stat Panel expects a single series.\n\nResponse:\n"+JSON.stringify(this.series),t}if(this.series&&this.series.length>0){var n=$.a.last(this.series[0].datapoints),a=$.a.isArray(n)?n[0]:null,r=Object(Si.getValueFormat)(this.panel.format);if("name"===this.panel.valueName)e.value=0,e.valueRounded=0,e.valueFormatted=this.series[0].alias;else if($.a.isString(a))e.value=0,e.valueFormatted=$.a.escape(a),e.valueRounded=0;else if("last_time"===this.panel.valueName)e.value=n[1],e.valueRounded=e.value,e.valueFormatted=r(e.value,0,0,this.dashboard.isTimezoneUtc());else{e.value=this.series[0].stats[this.panel.valueName],e.flotpairs=this.series[0].flotpairs;var i=this.getDecimalsForValue(e.value);e.valueFormatted=r(e.value,i.decimals,i.scaledDecimals,this.dashboard.isTimezoneUtc()),e.valueRounded=z.a.roundValue(e.value,i.decimals)}e.scopedVars.__name={value:this.series[0].label}}this.setValueMapping(e)},t.prototype.setValueMapping=function(e){if(1===this.panel.mappingType)for(var t=0;t<this.panel.valueMaps.length;t++){if("null"!==(n=this.panel.valueMaps[t]).value){if(parseFloat(n.value)===e.valueRounded)return void(e.valueFormatted=n.text)}else if(null===e.value||void 0===e.value)return void(e.valueFormatted=n.text)}else if(2===this.panel.mappingType)for(t=0;t<this.panel.rangeMaps.length;t++){var n;if("null"!==(n=this.panel.rangeMaps[t]).from||"null"!==n.to){var a=parseFloat(n.from);if(parseFloat(n.to)>=e.valueRounded&&a<=e.valueRounded)return void(e.valueFormatted=n.text)}else if(null===e.value||void 0===e.value)return void(e.valueFormatted=n.text)}null!==e.value&&void 0!==e.value||(e.valueFormatted="no value")},t.prototype.removeValueMap=function(e){var t=$.a.indexOf(this.panel.valueMaps,e);this.panel.valueMaps.splice(t,1),this.render()},t.prototype.addValueMap=function(){this.panel.valueMaps.push({value:"",op:"=",text:""})},t.prototype.removeRangeMap=function(e){var t=$.a.indexOf(this.panel.rangeMaps,e);this.panel.rangeMaps.splice(t,1),this.render()},t.prototype.addRangeMap=function(){this.panel.rangeMaps.push({from:"",to:"",text:""})},t.prototype.link=function(e,t,n,a){var r,i,o=this.$location,s=this.linkSrv,l=this.$timeout,c=this.$sanitize,u=a.panel,d=this.templateSrv,p=t.find(".panel-container");function h(e,t,n,a){return a=c(d.replace(a,r.scopedVars)),'<span class="'+e+'" style="font-size:'+t+'">'+(a=n?function(e){var t=cs(r,r.value);return t?'<span style="color:'+t+'">'+e+"</span>":e}(a):a)+"</span>"}function f(){var e=t.width(),n=t.height(),i=Math.min(e,1.3*n);if(a.invalidGaugeRange=!1,u.gauge.minValue>u.gauge.maxValue)a.invalidGaugeRange=!0;else{var o=te()("<div></div>"),s={top:"10px",margin:"auto",position:"relative",height:.9*n+"px",width:i+"px"};o.css(s);for(var l=[],c=0;c<r.thresholds.length;c++)l.push({value:r.thresholds[c],color:r.colorMap[c]});l.push({value:u.gauge.maxValue,color:r.colorMap[r.colorMap.length-1]});var p=R.a.bootData.user.lightTheme?"rgb(230,230,230)":"rgb(38,38,38)",h=parseInt(u.valueFontSize,10)/100,f=Math.min(i/5,100)*h,m=u.gauge.thresholdLabels?1.5:1,g=Math.min(i/6,60)/m,v=g/5,b=f/2.5,y={series:{gauges:{gauge:{min:u.gauge.minValue,max:u.gauge.maxValue,background:{color:p},border:{color:null},shadow:{show:!1},width:g},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0},cell:{border:{width:0}},threshold:{values:l,label:{show:u.gauge.thresholdLabels,margin:v+1,font:{size:b}},show:u.gauge.thresholdMarkers,width:v},value:{color:u.colorValue?cs(r,r.valueRounded):null,formatter:function(){return function(){var e=u.prefix?d.replace(u.prefix,r.scopedVars):"";return e+=r.valueFormatted,e+=u.postfix?d.replace(u.postfix,r.scopedVars):""}()},font:{size:f,family:'"Helvetica Neue", Helvetica, Arial, sans-serif'}},show:!0}}};t.append(o);var w={data:[[0,r.value]]};te.a.plot(o,[w],y)}}function m(){var e=t.width()+20;if(e<30)setTimeout(m,30);else{var n=a.height,i=te()("<div></div>"),o={position:"absolute"};if(u.sparkline.full){o.bottom="5px",o.left="-5px",o.width=e-10+"px";var s=n<=100?5:15*Math.round(n/100)+5;o.height=n-s+"px"}else o.bottom="0px",o.left="-5px",o.width=e-10+"px",o.height=Math.floor(.25*n)+"px";i.css(o);var l={legend:{show:!1},series:{lines:{show:!0,fill:1,zero:!1,lineWidth:1,fillColor:Object(Si.getColorFromHexRgbOrName)(u.sparkline.fillColor,R.a.theme.type)}},yaxes:{show:!1},xaxis:{show:!1,mode:"time",min:a.range.from.valueOf(),max:a.range.to.valueOf()},grid:{hoverable:!1,show:!1}};t.append(i);var c={data:r.flotpairs,color:Object(Si.getColorFromHexRgbOrName)(u.sparkline.lineColor,R.a.theme.type)};te.a.plot(i,[c],l)}}function g(){if(a.data){(r=a.data).thresholds=u.thresholds.split(",").map(function(e){return Number(e.trim())}),r.colorMap=u.colors.map(function(e){return Object(Si.getColorFromHexRgbOrName)(e,R.a.bootData.user.lightTheme?Si.GrafanaThemeType.Light:Si.GrafanaThemeType.Dark)});var n=u.gauge.show?"":function(){var e='<div class="singlestat-panel-value-container">';return u.prefix&&(e+=h("singlestat-panel-prefix",u.prefixFontSize,u.colorPrefix,u.prefix)),e+=h("singlestat-panel-value",u.valueFontSize,u.colorValue,r.valueFormatted),u.postfix&&(e+=h("singlestat-panel-postfix",u.postfixFontSize,u.colorPostfix,u.postfix)),e+="</div>"}();if(u.colorBackground){var o=cs(r,r.value);console.log(o),o&&(p.css("background-color",o),e.fullscreen?t.css("background-color",o):t.css("background-color",""))}else p.css("background-color",""),t.css("background-color","");t.html(n),u.sparkline.show&&m(),u.gauge.show&&f(),t.toggleClass("pointer",u.links.length>0),i=u.links.length>0?s.getPanelLinkAnchorInfo(u.links[0],r.scopedVars):null}}t=t.find(".singlestat-panel"),function(){var e=te()('<div id="tooltip" class="">hello</div>"');t.mouseleave(function(){0!==u.links.length&&l(function(){e.detach()})}),t.click(function(t){i&&(te()(t).parents(".panel-header").length>0||("_blank"!==i.target?(0===i.href.indexOf("http")?window.location.href=i.href:l(function(){o.url(i.href)}),e.detach()):window.open(i.href,"_blank")))}),t.mousemove(function(t){i&&(e.text("click to go to: "+i.title),e.place_tt(t.pageX,t.pageY-50))})}(),this.events.on("render",function(){g(),a.renderingCompleted()})},t.templateUrl="module.html",t}(G));function cs(e,t){if(!$.a.isFinite(t))return null;for(var n=e.thresholds.length;n>0;n--)if(t>=e.thresholds[n-1])return e.colorMap[n];return $.a.first(e.colorMap)}var us=function(e){function t(t,n,a,r,i){var o=e.call(this,t,n)||this;return o.backendSrv=a,o.$q=i,o.stepIndex=0,o.steps=[],o.steps.push({title:"Install Grafana",icon:"icon-gf icon-gf-check",href:"http://docs.grafana.org/",target:"_blank",note:"Review the installation docs",check:function(){return i.when(!0)}}),o.steps.push({title:"Create your first data source",cta:"Add data source",icon:"icon-gf icon-gf-datasources",href:"datasources/new?gettingstarted",check:function(){return i.when(r.getMetricSources().filter(function(e){return!0!==e.meta.builtIn}).length>0)}}),o.steps.push({title:"Create your first dashboard",cta:"New dashboard",icon:"icon-gf icon-gf-dashboard",href:"dashboard/new?gettingstarted",check:function(){return o.backendSrv.search({limit:1}).then(function(e){return e.length>0})}}),o.steps.push({title:"Invite your team",cta:"Add Users",icon:"icon-gf icon-gf-users",href:"org/users?gettingstarted",check:function(){return o.backendSrv.get("/api/org/users").then(function(e){return e.length>1})}}),o.steps.push({title:"Install apps & plugins",cta:"Explore plugin repository",icon:"icon-gf icon-gf-apps",href:"https://grafana.com/plugins?utm_source=grafana_getting_started",check:function(){return o.backendSrv.get("/api/plugins",{embedded:0,core:0}).then(function(e){return e.length>0})}}),o}return t.$inject=["$scope","$injector","backendSrv","datasourceSrv","$q"],Q.c(t,e),t.prototype.$onInit=function(){var e=this;return this.stepIndex=-1,this.nextStep().then(function(t){e.checksDone=!0})},t.prototype.nextStep=function(){var e=this;if(this.stepIndex===this.steps.length-1)return this.$q.when();this.stepIndex+=1;var t=this.steps[this.stepIndex];return t.check().then(function(n){return n?(t.cssClass="completed",e.nextStep()):(t.cssClass="active",e.$q.when())})},t.prototype.dismiss=function(){this.dashboard.removePanel(this.panel,!1),this.backendSrv.request({method:"PUT",url:"/api/user/helpflags/1",showSuccessAlert:!1}).then(function(e){L.c.user.helpFlags1=e.helpFlags1})},t.templateUrl="public/app/plugins/panel/gettingstarted/module.html",t}(B),ds=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.defaultValue,n=e.onChange,a=e.width,r=Object(Si.getValueFormats)().map(function(e){var t=e.submenu.map(function(e){return{label:e.text,value:e.value}});return{label:e.text,options:t}}),i=r.map(function(e){return e.options.find(function(e){return e.value===t})});return le.a.createElement(Si.Select,{width:a,defaultValue:i,isSearchable:!0,options:r,placeholder:"Choose",onChange:n})},t.defaultProps={width:12},t}(se.PureComponent),ps=[{value:"min",label:"Min"},{value:"max",label:"Max"},{value:"avg",label:"Average"},{value:"current",label:"Current"},{value:"total",label:"Total"},{value:"name",label:"Name"},{value:"first",label:"First"},{value:"delta",label:"Delta"},{value:"diff",label:"Difference"},{value:"range",label:"Range"},{value:"last_time",label:"Time of last point"}],hs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUnitChange=function(e){return t.props.onChange(Q.a({},t.props.options,{unit:e.value}))},t.onStatChange=function(e){return t.props.onChange(Q.a({},t.props.options,{stat:e.value}))},t.onDecimalChange=function(e){isNaN(e.target.value)?t.props.onChange(Q.a({},t.props.options,{decimals:null})):t.props.onChange(Q.a({},t.props.options,{decimals:parseInt(e.target.value,10)}))},t.onPrefixChange=function(e){return t.props.onChange(Q.a({},t.props.options,{prefix:e.target.value}))},t.onSuffixChange=function(e){return t.props.onChange(Q.a({},t.props.options,{suffix:e.target.value}))},t}return Q.c(t,e),t.prototype.render=function(){var e=this.props.options,t=e.stat,n=e.unit,a=e.decimals,r=e.prefix,i=e.suffix,o="";return Number.isFinite(a)&&(o=a.toString()),le.a.createElement(Si.PanelOptionsGroup,{title:"Value"},le.a.createElement("div",{className:"gf-form"},le.a.createElement(Si.FormLabel,{width:6},"Stat"),le.a.createElement(Si.Select,{width:12,options:ps,onChange:this.onStatChange,value:ps.find(function(e){return e.value===t})})),le.a.createElement("div",{className:"gf-form"},le.a.createElement(Si.FormLabel,{width:6},"Unit"),le.a.createElement(ds,{defaultValue:n,onChange:this.onUnitChange})),le.a.createElement(Si.FormField,{label:"Decimals",labelWidth:6,placeholder:"auto",onChange:this.onDecimalChange,value:o,type:"number"}),le.a.createElement(Si.FormField,{label:"Prefix",labelWidth:6,onChange:this.onPrefixChange,value:r||""}),le.a.createElement(Si.FormField,{label:"Suffix",labelWidth:6,onChange:this.onSuffixChange,value:i||""}))},t}(se.PureComponent),fs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onToggleThresholdLabels=function(){return t.props.onChange(Q.a({},t.props.options,{showThresholdLabels:!t.props.options.showThresholdLabels}))},t.onToggleThresholdMarkers=function(){return t.props.onChange(Q.a({},t.props.options,{showThresholdMarkers:!t.props.options.showThresholdMarkers}))},t.onMinValueChange=function(e){var n=e.target;return t.props.onChange(Q.a({},t.props.options,{minValue:n.value}))},t.onMaxValueChange=function(e){var n=e.target;return t.props.onChange(Q.a({},t.props.options,{maxValue:n.value}))},t}return Q.c(t,e),t.prototype.render=function(){var e=this.props.options,t=e.maxValue,n=e.minValue,a=e.showThresholdLabels,r=e.showThresholdMarkers;return le.a.createElement(Si.PanelOptionsGroup,{title:"Gauge"},le.a.createElement(Si.FormField,{label:"Min value",labelWidth:8,onChange:this.onMinValueChange,value:n}),le.a.createElement(Si.FormField,{label:"Max value",labelWidth:8,onChange:this.onMaxValueChange,value:t}),le.a.createElement(Si.Switch,{label:"Show labels",labelClass:"width-8",checked:a,onChange:this.onToggleThresholdLabels}),le.a.createElement(Si.Switch,{label:"Show markers",labelClass:"width-8",checked:r,onChange:this.onToggleThresholdMarkers}))},t}(se.PureComponent),ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onThresholdsChanged=function(e){return t.props.onChange(Q.a({},t.props.options,{thresholds:e}))},t.onValueMappingsChanged=function(e){return t.props.onChange(Q.a({},t.props.options,{valueMappings:e}))},t.onValueOptionsChanged=function(e){return t.props.onChange(Q.a({},t.props.options,{valueOptions:e}))},t}return Q.c(t,e),t.prototype.render=function(){var e=this.props,t=e.onChange,n=e.options;return le.a.createElement(le.a.Fragment,null,le.a.createElement(Si.PanelOptionsGrid,null,le.a.createElement(hs,{onChange:this.onValueOptionsChanged,options:n.valueOptions}),le.a.createElement(fs,{onChange:t,options:n}),le.a.createElement(Si.ThresholdsEditor,{onChange:this.onThresholdsChanged,thresholds:n.thresholds})),le.a.createElement(Si.ValueMappingsEditor,{onChange:this.onValueMappingsChanged,valueMappings:n.valueMappings}))},t}(se.PureComponent),gs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q.c(t,e),t.prototype.render=function(){var e,t=this.props,n=t.panelData,a=t.width,r=t.height,i=t.onInterpolate,o=t.options,s=o.valueOptions,l=i(s.prefix),c=i(s.suffix);if(n.timeSeries){var u=Object(Si.processTimeSeries)({timeSeries:n.timeSeries,nullValueMode:Ti.NullValueMode.Null});e=u[0]?u[0].stats[s.stat]:null}else n.tableData&&(e=n.tableData.rows[0].find(function(e){return e>0}));return le.a.createElement(Si.ThemeContext.Consumer,null,function(t){return le.a.createElement(Si.Gauge,{value:e,width:a,height:r,prefix:l,suffix:c,unit:s.unit,decimals:s.decimals,thresholds:o.thresholds,valueMappings:o.valueMappings,showThresholdLabels:o.showThresholdLabels,showThresholdMarkers:o.showThresholdMarkers,minValue:o.minValue,maxValue:o.maxValue,theme:t})})},t}(se.PureComponent),vs=new Si.ReactPanelPlugin(gs);vs.setEditor(ms),vs.setDefaults({minValue:0,maxValue:100,showThresholdMarkers:!0,showThresholdLabels:!1,valueOptions:{prefix:"",suffix:"",decimals:null,stat:"avg",unit:"none"},valueMappings:[],thresholds:[]});var bs={"app/plugins/datasource/graphite/module":i,"app/plugins/datasource/cloudwatch/module":o,"app/plugins/datasource/elasticsearch/module":s,"app/plugins/datasource/opentsdb/module":l,"app/plugins/datasource/grafana/module":c,"app/plugins/datasource/influxdb/module":u,"app/plugins/datasource/loki/module":d,"app/plugins/datasource/mixed/module":p,"app/plugins/datasource/mysql/module":h,"app/plugins/datasource/postgres/module":f,"app/plugins/datasource/mssql/module":g,"app/plugins/datasource/prometheus/module":m,"app/plugins/datasource/testdata/module":v,"app/plugins/datasource/stackdriver/module":b,"app/plugins/datasource/grafana-azure-monitor-datasource/module":y,"app/plugins/panel/text/module":w,"app/plugins/panel/text2/module":x,"app/plugins/panel/graph2/module":S,"app/plugins/panel/graph/module":k,"app/plugins/panel/dashlist/module":C,"app/plugins/panel/pluginlist/module":E,"app/plugins/panel/alertlist/module":T,"app/plugins/panel/heatmap/module":M,"app/plugins/panel/table/module":_,"app/plugins/panel/singlestat/module":A,"app/plugins/panel/gettingstarted/module":D,"app/plugins/panel/gauge/module":N},ys=n(1470),ws=n(1465);n(1396);n.d(t,"a",function(){return Es}),n.d(t,"b",function(){return Ts});var xs="?_cache="+Date.now();function Ss(e,t){O.a.registerDynamic(e,[],!0,function(e,n,a){a.exports=t})}O.a.registry.set("plugin-loader",O.a.newModule({locate:function(e){return e.address+xs}})),O.a.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js",css:"vendor/plugin-css/css.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"}}}),Ss("@grafana/ui",Si),Ss("lodash",$.a),Ss("moment",X.a),Ss("jquery",te.a),Ss("angular",Z.a),Ss("d3",wo),Ss("rxjs/Subject",ys.a),Ss("rxjs/Observable",ws.a),Ss("prismjs",ae.a),Ss("slate",re.default),Ss("slate-react",ie.b),Ss("slate-plain-serializer",oe.a),Ss("react",le.a),Ss("react-dom",ue.a),Ss("vendor/npm/rxjs/Rx",{Subject:ys.a,Observable:ws.a}),Ss("app/features/dashboard/impression_store",{impressions:ve.a,__esModule:!0}),Ss("app/plugins/sdk",a),Ss("app/core/utils/datemath",he),Ss("app/core/utils/file_export",fe),Ss("app/core/utils/flatten",r),Ss("app/core/utils/kbn",z.a),Ss("app/core/utils/ticks",ge),Ss("app/core/config",R.a),Ss("app/core/time_series",de.a),Ss("app/core/time_series2",de.a),Ss("app/core/table_model",pe.a),Ss("app/core/app_events",L.b),Ss("app/core/core_module",L.d),Ss("app/core/core",{coreModule:L.d,appEvents:L.b,contextSrv:L.c,__esModule:!0});for(var ks=0,Cs=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];ks<Cs.length;ks++){Ss(Cs[ks],{fakeDep:1})}function Es(e){var t=bs[e];return t?Promise.resolve(t):O.a.import(e)}function Ts(e){R.a.bootData.user.lightTheme?O.a.import(e.light+"!css"):O.a.import(e.dark+"!css")}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(2),r=n(1),i=n.n(r),o=n(150),s={events:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,cachedPluginOptions:!0},l={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatIteration:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0},c={gridPos:{x:0,y:0,h:3,w:6},datasource:null,targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1},u=function(){function e(e){for(var t in this.events=new o.a,e)this[t]=e[t];i.a.defaultsDeep(this,i.a.cloneDeep(c)),this.ensureQueryIds(),this.restoreInfintyForThresholds()}return e.prototype.ensureQueryIds=function(){if(this.targets)for(var e=0,t=this.targets;e<t.length;e++){var n=t[e];n.refId||(n.refId=this.getNextQueryLetter())}},e.prototype.restoreInfintyForThresholds=function(){this.options&&this.options.thresholds&&(this.options.thresholds=this.options.thresholds.map(function(e){return 0===e.index&&null===e.value?a.a({},e,{value:-1/0}):e}))},e.prototype.getOptions=function(e){return i.a.defaultsDeep(this.options||{},e)},e.prototype.updateOptions=function(e){this.options=e,this.render()},e.prototype.getSaveModel=function(){var e={};for(var t in this)!s[t]&&this.hasOwnProperty(t)&&(i.a.isEqual(this[t],c[t])||(e[t]=i.a.cloneDeep(this[t])));return e},e.prototype.setViewMode=function(e,t){this.fullscreen=e,this.isEditing=t,this.events.emit("view-mode-changed")},e.prototype.updateGridPos=function(e){var t=!1;this.gridPos.w===e.w&&this.gridPos.h===e.h||(t=!0),this.gridPos.x=e.x,this.gridPos.y=e.y,this.gridPos.w=e.w,this.gridPos.h=e.h,t&&this.events.emit("panel-size-changed")},e.prototype.resizeDone=function(){this.events.emit("panel-size-changed")},e.prototype.refresh=function(){this.hasRefreshed=!0,this.events.emit("refresh")},e.prototype.render=function(){this.hasRefreshed?this.events.emit("render"):this.refresh()},e.prototype.initialized=function(){this.events.emit("panel-initialized")},e.prototype.getOptionsToRemember=function(){var e=this;return Object.keys(this).reduce(function(t,n){var r;return s[n]||l[n]?t:a.a({},t,((r={})[n]=e[n],r))},{})},e.prototype.saveCurrentPanelOptions=function(){this.cachedPluginOptions[this.type]=this.getOptionsToRemember()},e.prototype.restorePanelOptions=function(e){var t=this,n=this.cachedPluginOptions[e]||{};Object.keys(n).map(function(e){t[e]=n[e]})},e.prototype.changeType=function(e,t){this.saveCurrentPanelOptions(),this.type=e,t&&this.destroy();for(var n=0,a=i.a.keys(this);n<a.length;n++){var r=a[n];l[r]||delete this[r]}this.restorePanelOptions(e)},e.prototype.addQuery=function(e){(e=e||{refId:"A"}).refId=this.getNextQueryLetter(),this.targets.push(e)},e.prototype.getNextQueryLetter=function(){var e=this;return i.a.find("ABCDEFGHIJKLMNOPQRSTUVWXYZ",function(t){return i.a.every(e.targets,function(e){return e.refId!==t})})},e.prototype.changeQuery=function(e,t){e.refId=this.targets[t].refId,this.targets=this.targets.map(function(n,a){return a===t?e:n})},e.prototype.destroy=function(){this.events.emit("panel-teardown"),this.events.removeAllListeners()},e}()},,,,,function(e,t,n){"use strict";var a,r;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),function(e){e.METRIC_KIND_UNSPECIFIED="METRIC_KIND_UNSPECIFIED",e.GAUGE="GAUGE",e.DELTA="DELTA",e.CUMULATIVE="CUMULATIVE"}(a||(a={})),function(e){e.VALUE_TYPE_UNSPECIFIED="VALUE_TYPE_UNSPECIFIED",e.BOOL="BOOL",e.INT64="INT64",e.DOUBLE="DOUBLE",e.STRING="STRING",e.DISTRIBUTION="DISTRIBUTION",e.MONEY="MONEY"}(r||(r={}));var i=[{text:"delta",value:"ALIGN_DELTA",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.CUMULATIVE,a.DELTA]},{text:"rate",value:"ALIGN_RATE",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.CUMULATIVE,a.DELTA]},{text:"interpolate",value:"ALIGN_INTERPOLATE",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE]},{text:"next older",value:"ALIGN_NEXT_OLDER",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION,r.STRING,r.VALUE_TYPE_UNSPECIFIED,r.BOOL],metricKinds:[a.GAUGE]},{text:"min",value:"ALIGN_MIN",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE,a.DELTA]},{text:"max",value:"ALIGN_MAX",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE,a.DELTA]},{text:"mean",value:"ALIGN_MEAN",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE,a.DELTA]},{text:"count",value:"ALIGN_COUNT",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.BOOL],metricKinds:[a.GAUGE,a.DELTA]},{text:"sum",value:"ALIGN_SUM",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"stddev",value:"ALIGN_STDDEV",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE,a.DELTA]},{text:"count true",value:"ALIGN_COUNT_TRUE",valueTypes:[r.BOOL],metricKinds:[a.GAUGE]},{text:"count false",value:"ALIGN_COUNT_FALSE",valueTypes:[r.BOOL],metricKinds:[a.GAUGE]},{text:"fraction true",value:"ALIGN_FRACTION_TRUE",valueTypes:[r.BOOL],metricKinds:[a.GAUGE]},{text:"percentile 99",value:"ALIGN_PERCENTILE_99",valueTypes:[r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"percentile 95",value:"ALIGN_PERCENTILE_95",valueTypes:[r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"percentile 50",value:"ALIGN_PERCENTILE_50",valueTypes:[r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"percentile 05",value:"ALIGN_PERCENTILE_05",valueTypes:[r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"percent change",value:"ALIGN_PERCENT_CHANGE",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE,a.DELTA]}],o=[{text:"none",value:"REDUCE_NONE",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION,r.BOOL,r.STRING],metricKinds:[a.GAUGE,a.DELTA,a.CUMULATIVE,a.METRIC_KIND_UNSPECIFIED]},{text:"mean",value:"REDUCE_MEAN",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"min",value:"REDUCE_MIN",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE,a.DELTA,a.CUMULATIVE,a.METRIC_KIND_UNSPECIFIED]},{text:"max",value:"REDUCE_MAX",valueTypes:[r.INT64,r.DOUBLE,r.MONEY],metricKinds:[a.GAUGE,a.DELTA,a.CUMULATIVE,a.METRIC_KIND_UNSPECIFIED]},{text:"sum",value:"REDUCE_SUM",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA,a.CUMULATIVE,a.METRIC_KIND_UNSPECIFIED]},{text:"std. dev.",value:"REDUCE_STDDEV",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA,a.CUMULATIVE,a.METRIC_KIND_UNSPECIFIED]},{text:"count",value:"REDUCE_COUNT",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION,r.BOOL,r.STRING],metricKinds:[a.GAUGE,a.DELTA]},{text:"count true",value:"REDUCE_COUNT_TRUE",valueTypes:[r.BOOL],metricKinds:[a.GAUGE,a.DELTA]},{text:"count false",value:"REDUCE_COUNT_FALSE",valueTypes:[r.BOOL],metricKinds:[a.GAUGE,a.DELTA]},{text:"99th percentile",value:"REDUCE_PERCENTILE_99",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"95th percentile",value:"REDUCE_PERCENTILE_95",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"50th percentile",value:"REDUCE_PERCENTILE_50",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]},{text:"5th percentile",value:"REDUCE_PERCENTILE_05",valueTypes:[r.INT64,r.DOUBLE,r.MONEY,r.DISTRIBUTION],metricKinds:[a.GAUGE,a.DELTA]}],s=[{text:"grafana auto",value:"grafana-auto"},{text:"stackdriver auto",value:"stackdriver-auto"},{text:"1m",value:"+60s"},{text:"5m",value:"+300s"},{text:"30m",value:"+1800s"},{text:"1h",value:"+3600s"},{text:"6h",value:"+21600s"},{text:"1d",value:"+86400s"},{text:"1w",value:"+604800s"}],l={bit:"bits",By:"bytes",s:"s",min:"m",h:"h",d:"d",us:"µs",ms:"ms",ns:"ns",percent:"percent",MiBy:"mbytes","By/s":"Bps",GBy:"decgbytes"}},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d});var a=n(2),r=n(37),i=n(280),o={title:"",text:"",severity:r.AppNotificationSeverity.Success,icon:"fa fa-check",timeout:r.AppNotificationTimeout.Success},s={title:"",text:"",severity:r.AppNotificationSeverity.Warning,icon:"fa fa-exclamation",timeout:r.AppNotificationTimeout.Warning},l={title:"",text:"",severity:r.AppNotificationSeverity.Error,icon:"fa fa-exclamation-triangle",timeout:r.AppNotificationTimeout.Error},c=function(e,t){return a.a({},o,{title:e,text:t,id:Date.now()})},u=function(e,t){return a.a({},l,{title:e,text:Object(i.a)(t),id:Date.now()})},d=function(e,t){return a.a({},s,{title:e,text:t,id:Date.now()})}},,,,,,,,,function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e.Light="light",e.Dark="dark"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return g});var a=n(1),r=n.n(a),i=n(4),o=n.n(i),s=n(35),l={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},c=[{from:"now/d",to:"now/d",display:"Today",section:2},{from:"now/d",to:"now",display:"Today so far",section:2},{from:"now/w",to:"now/w",display:"This week",section:2},{from:"now/w",to:"now",display:"This week so far",section:2},{from:"now/M",to:"now/M",display:"This month",section:2},{from:"now/M",to:"now",display:"This month so far",section:2},{from:"now/y",to:"now/y",display:"This year",section:2},{from:"now/y",to:"now",display:"This year so far",section:2},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday",section:1},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday",section:1},{from:"now-7d/d",to:"now-7d/d",display:"This day last week",section:1},{from:"now-1w/w",to:"now-1w/w",display:"Previous week",section:1},{from:"now-1M/M",to:"now-1M/M",display:"Previous month",section:1},{from:"now-1y/y",to:"now-1y/y",display:"Previous year",section:1},{from:"now-5m",to:"now",display:"Last 5 minutes",section:3},{from:"now-15m",to:"now",display:"Last 15 minutes",section:3},{from:"now-30m",to:"now",display:"Last 30 minutes",section:3},{from:"now-1h",to:"now",display:"Last 1 hour",section:3},{from:"now-3h",to:"now",display:"Last 3 hours",section:3},{from:"now-6h",to:"now",display:"Last 6 hours",section:3},{from:"now-12h",to:"now",display:"Last 12 hours",section:3},{from:"now-24h",to:"now",display:"Last 24 hours",section:3},{from:"now-2d",to:"now",display:"Last 2 days",section:0},{from:"now-7d",to:"now",display:"Last 7 days",section:0},{from:"now-30d",to:"now",display:"Last 30 days",section:0},{from:"now-90d",to:"now",display:"Last 90 days",section:0},{from:"now-6M",to:"now",display:"Last 6 months",section:0},{from:"now-1y",to:"now",display:"Last 1 year",section:0},{from:"now-2y",to:"now",display:"Last 2 years",section:0},{from:"now-5y",to:"now",display:"Last 5 years",section:0}],u="MMM D, YYYY HH:mm:ss",d={};function p(e,t){return r.a.groupBy(c,function(e){return e.active=e.display===t,e.section})}function h(e){return e.format(u)}function f(e){var t=0!==e.indexOf("+");-1===e.indexOf("now")&&(e=(t?"now-":"now")+e);var n=d[e+" to now"];if(n)return n;n=t?{from:e,to:"now"}:{from:"now",to:e};var a=/^now([-+])(\d+)(\w)/.exec(e);if(a){var r=a[3],i=parseInt(a[2],10),o=l[r];o&&(n.display=t?"Last ":"Next ",n.display+=i+" "+o.display,n.section=o.section,i>1&&(n.display+="s"))}else n.display=n.from+" to "+n.to,n.invalid=!0;return n}function m(e){var t=d[e.from.toString()+" to "+e.to.toString()];if(t)return t.display;if(o.a.isMoment(e.from)&&o.a.isMoment(e.to))return h(e.from)+" to "+h(e.to);if(o.a.isMoment(e.from)){var n=s.parse(e.to,!0);return h(e.from)+" to "+n.fromNow()}return o.a.isMoment(e.to)?s.parse(e.from,!1).fromNow()+" to "+h(e.to):"now"===e.to.toString()?f(e.from).display:e.from.toString()+" to "+e.to.toString()}r.a.each(c,function(e){d[e.from+" to "+e.to]=e});var g=function(e){return 0===e.indexOf("$")||0===e.indexOf("+$")||!0!==f(e).invalid}},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.model,t=e.title,n=e.buttonIcon,a=e.buttonLink,r=e.buttonTitle,o=e.onClick,s=e.proTip,l=e.proTipLink,c=e.proTipLinkTitle,u=e.proTipTarget;return i.a.createElement("div",{className:"empty-list-cta"},i.a.createElement("div",{className:"empty-list-cta__title"},t),i.a.createElement("a",{onClick:o,href:a,className:"empty-list-cta__button btn btn-xlarge btn-primary"},i.a.createElement("i",{className:n}),r),s&&i.a.createElement("div",{className:"empty-list-cta__pro-tip"},i.a.createElement("i",{className:"fa fa-rocket"})," ProTip: ",s,i.a.createElement("a",{className:"text-link empty-list-cta__pro-tip-link",href:l,target:u},c)))},t}(r.Component);t.a=o},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(151),s=n.n(o),l={transition:"max-height 200ms ease-in-out",overflow:"hidden"};t.a=function(e){var t=e.children,n=e.in,r=e.maxHeight,o=void 0===r?"200px":r,c=e.style,u=void 0===c?l:c,d={exited:{maxHeight:0},entering:{maxHeight:o},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return i.a.createElement(s.a,{in:n,timeout:200},function(e){return i.a.createElement("div",{style:a.a({},u,d[e])},t)})}},function(e,t,n){"use strict";var a=n(4),r=n.n(a),i=n(1),o=n.n(i),s=n(6),l=n(31),c=n(150),u=n(79);function d(e){if(o.a.isArray(e))return e.map(d);if(o.a.isPlainObject(e)){for(var t={},n=0,a=o.a.keys(e).sort();n<a.length;n++){var r=a[n];t[r]=d(e[r])}return t}return e}var p=n(114),h=n(277),f=function(){function e(e){this.dashboard=e}return e.prototype.updateSchema=function(e){var t,n,a,r,i=this.dashboard.schemaVersion,s=[];if(this.dashboard.schemaVersion=18,i!==this.dashboard.schemaVersion){if(i<2&&(e.services&&e.services.filter&&(this.dashboard.time=e.services.filter.time,this.dashboard.templating.list=e.services.filter.list||[]),s.push(function(e){"graphite"===e.type&&(e.type="graph"),"graph"===e.type&&(o.a.isBoolean(e.legend)&&(e.legend={show:e.legend}),e.grid&&(e.grid.min&&(e.grid.leftMin=e.grid.min,delete e.grid.min),e.grid.max&&(e.grid.leftMax=e.grid.max,delete e.grid.max)),e.y_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[0]=e.y_format,delete e.y_format),e.y2_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[1]=e.y2_format,delete e.y2_format))})),i<3){var c=this.dashboard.getNextPanelId();s.push(function(e){e.id||(e.id=c,c+=1)})}if(i<4&&s.push(function(e){"graph"===e.type&&(o.a.each(e.aliasYAxis,function(t,n){e.seriesOverrides=[{alias:n,yaxis:t}]}),delete e.aliasYAxis)}),i<6){var u=o.a.find(e.pulldowns,{type:"annotations"});for(u&&(this.dashboard.annotations={list:u.annotations||[]}),t=0;t<this.dashboard.templating.list.length;t++){var d=this.dashboard.templating.list[t];void 0===d.datasource&&(d.datasource=null),"filter"===d.type&&(d.type="query"),void 0===d.type&&(d.type="query"),void 0===d.allFormat&&(d.allFormat="glob")}}if(i<7&&(e.nav&&e.nav.length&&(this.dashboard.timepicker=e.nav[0]),s.push(function(e){o.a.each(e.targets,function(t){t.refId||(t.refId=e.getNextQueryLetter&&e.getNextQueryLetter())})})),i<8&&s.push(function(e){o.a.each(e.targets,function(e){e.fields&&e.tags&&e.groupBy&&(e.rawQuery?(delete e.fields,delete e.fill):(e.select=o.a.map(e.fields,function(e){var t=[];return t.push({type:"field",params:[e.name]}),t.push({type:e.func,params:[]}),e.mathExpr&&t.push({type:"math",params:[e.mathExpr]}),e.asExpr&&t.push({type:"alias",params:[e.asExpr]}),t}),delete e.fields,o.a.each(e.groupBy,function(e){"time"===e.type&&e.interval&&(e.params=[e.interval],delete e.interval),"tag"===e.type&&e.key&&(e.params=[e.key],delete e.key)}),e.fill&&(e.groupBy.push({type:"fill",params:[e.fill]}),delete e.fill)))})}),i<9&&s.push(function(e){if(("singlestat"===e.type||""===e.thresholds)&&e.thresholds){var t=e.thresholds.split(",");t.length>=3&&(t.shift(),e.thresholds=t.join(","))}}),i<10&&s.push(function(e){"table"===e.type&&o.a.each(e.styles,function(e){if(e.thresholds&&e.thresholds.length>=3){var t=e.thresholds;t.shift(),e.thresholds=t}})}),i<12&&o.a.each(this.dashboard.templating.list,function(e){e.refresh&&(e.refresh=1),e.refresh||(e.refresh=0),e.hideVariable?e.hide=2:e.hideLabel&&(e.hide=1)}),i<12&&s.push(function(e){"graph"===e.type&&e.grid&&(e.yaxes||(e.yaxes=[{show:e["y-axis"],min:e.grid.leftMin,max:e.grid.leftMax,logBase:e.grid.leftLogBase,format:e.y_formats[0],label:e.leftYAxisLabel},{show:e["y-axis"],min:e.grid.rightMin,max:e.grid.rightMax,logBase:e.grid.rightLogBase,format:e.y_formats[1],label:e.rightYAxisLabel}],e.xaxis={show:e["x-axis"]},delete e.grid.leftMin,delete e.grid.leftMax,delete e.grid.leftLogBase,delete e.grid.rightMin,delete e.grid.rightMax,delete e.grid.rightLogBase,delete e.y_formats,delete e.leftYAxisLabel,delete e.rightYAxisLabel,delete e["y-axis"],delete e["x-axis"]))}),i<13&&s.push(function(e){if("graph"===e.type&&e.grid){e.thresholds=[];var t={},n={};null!==e.grid.threshold1&&(t.value=e.grid.threshold1,e.grid.thresholdLine?(t.line=!0,t.lineColor=e.grid.threshold1Color,t.colorMode="custom"):(t.fill=!0,t.fillColor=e.grid.threshold1Color,t.colorMode="custom")),null!==e.grid.threshold2&&(n.value=e.grid.threshold2,e.grid.thresholdLine?(n.line=!0,n.lineColor=e.grid.threshold2Color,n.colorMode="custom"):(n.fill=!0,n.fillColor=e.grid.threshold2Color,n.colorMode="custom")),o.a.isNumber(t.value)&&(o.a.isNumber(n.value)?t.value>n.value?(t.op=n.op="lt",e.thresholds.push(t),e.thresholds.push(n)):(t.op=n.op="gt",e.thresholds.push(t),e.thresholds.push(n)):(t.op="gt",e.thresholds.push(t))),delete e.grid.threshold1,delete e.grid.threshold1Color,delete e.grid.threshold2,delete e.grid.threshold2Color,delete e.grid.thresholdLine}}),i<14&&(this.dashboard.graphTooltip=e.sharedCrosshair?1:0),i<16&&this.upgradeToGridLayout(e),i<17&&s.push(function(e){if(e.minSpan){var t=l.e/e.minSpan,n=Object(h.a)(l.e);e.maxPerRow=n[o.a.findIndex(n,function(e){return e>t})-1]}delete e.minSpan}),i<18&&s.push(function(e){e["options-gauge"]&&(e.options=e["options-gauge"],e.options.valueOptions={unit:e.options.unit,stat:e.options.stat,decimals:e.options.decimals,prefix:e.options.prefix,suffix:e.options.suffix},e.options.thresholds&&e.options.thresholds.reverse(),delete e.options.options,delete e.options.unit,delete e.options.stat,delete e.options.decimals,delete e.options.prefix,delete e.options.suffix,delete e["options-gauge"])}),0!==s.length)for(n=0;n<this.dashboard.panels.length;n++)for(a=0;a<s.length;a++)if(s[a].call(this,this.dashboard.panels[n]),this.dashboard.panels[n].panels)for(r=0;r<this.dashboard.panels[n].panels.length;r++)s[a].call(this,this.dashboard.panels[n].panels[r])}},e.prototype.upgradeToGridLayout=function(e){var t=0,n=l.e/12,a=o.a.max(o.a.flattenDeep(o.a.map(e.rows,function(e){return o.a.map(e.panels,"id")})))+1;if(e.rows)for(var r=o.a.some(e.rows,function(e){return e.collapse||e.showTitle||e.repeat}),i=0,s=e.rows;i<s.length;i++){var c=s[i];if(!c.repeatIteration){var u=m(c.height||l.b),d={},h=void 0;r&&(d.id=a,d.type="row",d.title=c.title,d.collapsed=c.collapse,d.repeat=c.repeat,d.panels=[],d.gridPos={x:0,y:t,w:l.e,h:u},h=new p.a(d),a++,t++);for(var f=new g(u,l.e,t),v=0,b=c.panels;v<b.length;v++){var y=b[v];y.span=y.span||l.a,y.minSpan&&(y.minSpan=Math.min(l.e,l.e/12*y.minSpan));var w=Math.floor(y.span)*n,x=y.height?m(y.height):u,S=f.getPanelPosition(x,w);t=f.yPos,y.gridPos={x:S.x,y:t+S.y,w:w,h:x},f.addPanel(y.gridPos),delete y.span,h&&d.collapsed?h.panels.push(y):this.dashboard.panels.push(new p.a(y))}h&&this.dashboard.panels.push(h),h&&d.collapsed||(t+=u)}}},e}();function m(e){return o.a.isString(e)&&(e=parseInt(e.replace("px",""),10)),e<l.g&&(e=l.g),Math.ceil(e/(l.c+l.d))}var g=function(){function e(e,t,n){void 0===t&&(t=l.e),void 0===n&&(n=0),this.area=new Array(t).fill(0),this.yPos=n,this.height=e}return e.prototype.reset=function(){this.area.fill(0)},e.prototype.addPanel=function(e){for(var t=e.x;t<e.x+e.w;t++)(!this.area[t]||e.y+e.h-this.yPos>this.area[t])&&(this.area[t]=e.y+e.h-this.yPos);return this.area},e.prototype.getPanelPosition=function(e,t,n){var a,r;void 0===n&&(n=!1);for(var i=this.area.length-1;i>=0&&this.height-this.area[i]>0;i--)if(void 0===r)r=i;else{if(!(i<this.area.length-1&&this.area[i]<=this.area[i+1]))break;a=i}return void 0!==a&&void 0!==r&&r-a>=t-1?{x:a,y:o.a.max(this.area.slice(a))}:n?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(e,t,!0))},e}(),v=n(37);n.d(t,"a",function(){return b});var b=function(){function e(e,t){e||(e={}),this.events=new c.a,this.id=e.id||null,this.uid=e.uid||null,this.revision=e.revision,this.title=e.title||"No Title",this.autoUpdate=e.autoUpdate,this.description=e.description,this.tags=e.tags||[],this.style=e.style||"dark",this.timezone=e.timezone||"",this.editable=!1!==e.editable,this.graphTooltip=e.graphTooltip||0,this.time=e.time||{from:"now-6h",to:"now"},this.timepicker=e.timepicker||{},this.templating=this.ensureListExist(e.templating),this.annotations=this.ensureListExist(e.annotations),this.refresh=e.refresh,this.snapshot=e.snapshot,this.schemaVersion=e.schemaVersion||0,this.version=e.version||0,this.links=e.links||[],this.gnetId=e.gnetId||null,this.panels=o.a.map(e.panels||[],function(e){return new p.a(e)}),this.resetOriginalVariables(),this.resetOriginalTime(),this.initMeta(t),this.updateSchema(e),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos()}return e.prototype.addBuiltInAnnotationQuery=function(){for(var e=!1,t=0,n=this.annotations.list;t<n.length;t++){if(1===n[t].builtIn){e=!0;break}}e||this.annotations.list.unshift({datasource:"-- Grafana --",name:"Annotations & Alerts",type:"dashboard",iconColor:s.DEFAULT_ANNOTATION_COLOR,enable:!0,hide:!0,builtIn:1})},e.prototype.initMeta=function(e){(e=e||{}).canShare=!1!==e.canShare,e.canSave=!1!==e.canSave,e.canStar=!1!==e.canStar,e.canEdit=!1!==e.canEdit,e.showSettings=e.canEdit,e.canMakeEditable=e.canSave&&!this.editable,e.fullscreen=!1,e.isEditing=!1,this.editable||(e.canEdit=!1,e.canDelete=!1,e.canSave=!1),this.meta=e},e.prototype.getSaveModelClone=function(t){var n=o.a.defaults(t||{},{saveVariables:!0,saveTimerange:!0}),a={};for(var r in this)!e.nonPersistedProperties[r]&&this.hasOwnProperty(r)&&(a[r]=o.a.cloneDeep(this[r]));if(a.templating={list:o.a.map(this.templating.list,function(e){return e.getSaveModel?e.getSaveModel():e})},!n.saveVariables)for(var i=0;i<a.templating.list.length;i++){var s=a.templating.list[i],l=o.a.find(this.originalTemplating,{name:s.name,type:s.type});l&&("adhoc"===s.type?a.templating.list[i].filters=l.filters:a.templating.list[i].current=l.current)}return n.saveTimerange||(a.time=this.originalTime),a.panels=o.a.chain(this.panels).filter(function(e){return"add-panel"!==e.type}).map(function(e){return e.getSaveModel()}).value(),a=d(a)},e.prototype.setViewMode=function(e,t,n){this.meta.fullscreen=t,this.meta.isEditing=n&&this.meta.canEdit,e.setViewMode(t,this.meta.isEditing),this.events.emit("view-mode-changed",e)},e.prototype.timeRangeUpdated=function(e){this.events.emit("time-range-updated",e)},e.prototype.startRefresh=function(){this.events.emit("refresh");for(var e=0,t=this.panels;e<t.length;e++){var n=t[e];this.otherPanelInFullscreen(n)||n.refresh()}},e.prototype.render=function(){this.events.emit("render");for(var e=0,t=this.panels;e<t.length;e++){t[e].render()}},e.prototype.panelInitialized=function(e){e.initialized(),this.otherPanelInFullscreen(e)||e.refresh()},e.prototype.otherPanelInFullscreen=function(e){return this.meta.fullscreen&&!e.fullscreen},e.prototype.ensureListExist=function(e){return e||(e={}),e.list||(e.list=[]),e},e.prototype.getNextPanelId=function(){for(var e=0,t=0,n=this.panels;t<n.length;t++){var a=n[t];if(a.id>e&&(e=a.id),a.collapsed)for(var r=0,i=a.panels;r<i.length;r++){var o=i[r];o.id>e&&(e=o.id)}}return e+1},e.prototype.forEachPanel=function(e){for(var t=0;t<this.panels.length;t++)e(this.panels[t],t)},e.prototype.getPanelById=function(e){for(var t=0,n=this.panels;t<n.length;t++){var a=n[t];if(a.id===e)return a}return null},e.prototype.addPanel=function(e){e.id=this.getNextPanelId();var t=new p.a(e);this.panels.unshift(t),this.sortPanelsByGridPos(),this.events.emit("panel-added",t)},e.prototype.sortPanelsByGridPos=function(){this.panels.sort(function(e,t){return e.gridPos.y===t.gridPos.y?e.gridPos.x-t.gridPos.x:e.gridPos.y-t.gridPos.y})},e.prototype.cleanUpRepeats=function(){if(!this.snapshot&&0!==this.templating.list.length){this.iteration=(this.iteration||(new Date).getTime())+1;for(var e=[],t=0,n=this.panels;t<n.length;t++){delete(r=n[t]).scopedVars}for(var a=0;a<this.panels.length;a++){var r;(r=this.panels[a]).repeat&&!r.repeatedByRow||!r.repeatPanelId||r.repeatIteration===this.iteration||e.push(r)}o.a.pull.apply(o.a,[this.panels].concat(e)),this.sortPanelsByGridPos(),this.events.emit("repeats-processed")}},e.prototype.processRepeats=function(){if(!this.snapshot&&0!==this.templating.list.length){this.cleanUpRepeats(),this.iteration=(this.iteration||(new Date).getTime())+1;for(var e=0;e<this.panels.length;e++){var t=this.panels[e];t.repeat&&this.repeatPanel(t,e)}this.sortPanelsByGridPos(),this.events.emit("repeats-processed")}},e.prototype.cleanUpRowRepeats=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];!a.repeat&&a.repeatPanelId&&t.push(a)}o.a.pull.apply(o.a,[e].concat(t)),o.a.pull.apply(o.a,[this.panels].concat(t))},e.prototype.processRowRepeats=function(e){if(!this.snapshot&&0!==this.templating.list.length){var t=e.panels;if(!e.collapsed){var n=o.a.findIndex(this.panels,function(t){return t.id===e.id});t=this.getRowPanels(n)}this.cleanUpRowRepeats(t);for(var a=function(e){var n=t[e];if(n.repeat){var a=o.a.findIndex(r.panels,function(e){return e.id===n.id});r.repeatPanel(n,a)}},r=this,i=0;i<t.length;i++)a(i)}},e.prototype.getPanelRepeatClone=function(e,t,n){if(0===t)return e;var a=new p.a(e.getSaveModel());return a.id=this.getNextPanelId(),this.panels.splice(n+t,0,a),a.repeatIteration=this.iteration,a.repeatPanelId=e.id,a.repeat=null,a},e.prototype.getRowRepeatClone=function(e,t,n){if(0===t){if(!e.collapsed){var a=this.getRowPanels(n);e.panels=a}return e}var r,i,s=new p.a(e.getSaveModel());return e.collapsed?(r=o.a.cloneDeep(e.panels),s.panels=r,i=n+t):(r=this.getRowPanels(n),s.panels=o.a.map(r,function(e){return e.getSaveModel()}),i=n+(r.length+1)*t),this.panels.splice(i,0,s),this.updateRepeatedPanelIds(s),s},e.prototype.repeatPanel=function(e,t){var n=o.a.find(this.templating.list,{name:e.repeat});if(n)if("row"!==e.type){for(var a=this.getSelectedVariableOptions(n),r=e.maxPerRow||4,i=0,s=e.gridPos.y,c=0;c<a.length;c++){var u=a[c],d=void 0;(d=this.getPanelRepeatClone(e,c,t)).scopedVars=d.scopedVars||{},d.scopedVars[n.name]=u,e.repeatDirection===l.j?(c>0&&(s+=d.gridPos.h),d.gridPos.y=s):(d.gridPos.w=Math.max(l.e/a.length,l.e/r),d.gridPos.x=i,d.gridPos.y=s,(i+=d.gridPos.w)+d.gridPos.w>l.e&&(i=0,s+=d.gridPos.h))}var p=s-e.gridPos.y;if(p>0)for(var h=t+a.length;h<this.panels.length;h++)this.panels[h].gridPos.y+=p}else this.repeatRow(e,t,n)},e.prototype.repeatRow=function(e,t,n){var a=this,r=this.getSelectedVariableOptions(n),i=e.gridPos.y;function s(e,t){e.scopedVars=e.scopedVars||{},e.scopedVars[n.name]=t}for(var l=function(n){var l=r[n],u=c.getRowRepeatClone(e,n,t);s(u,l);var d=c.getRowHeight(u),h=u.panels||[],f=void 0;if(e.collapsed)o.a.each(h,function(e,t){s(e,l),n>0&&a.updateRepeatedPanelIds(e,!0)}),u.gridPos.y+=n,i+=n,f=t+n+1;else{var m=t+(h.length+1)*n+1;o.a.each(h,function(e,t){if(s(e,l),n>0){var r=new p.a(e);a.updateRepeatedPanelIds(r,!0),r.gridPos.y+=d*n,a.panels.splice(m+t,0,r)}}),u.panels=[],u.gridPos.y+=d*n,i+=d,f=m+h.length}for(var g=f;g<c.panels.length;g++)c.panels[g].gridPos.y+=i},c=this,u=0;u<r.length;u++)l(u)},e.prototype.updateRepeatedPanelIds=function(e,t){return e.repeatPanelId=e.id,e.id=this.getNextPanelId(),e.repeatIteration=this.iteration,t?e.repeatedByRow=!0:e.repeat=null,e},e.prototype.getSelectedVariableOptions=function(e){return"All"===e.current.text?e.options.slice(1,e.options.length):o.a.filter(e.options,{selected:!0})},e.prototype.getRowHeight=function(e){if(!e.panels||0===e.panels.length)return 0;var t=e.gridPos.y,n=o.a.map(e.panels,"gridPos"),a=o.a.maxBy(n,function(e){return e.y+e.h});return a.y+a.h-t},e.prototype.removePanel=function(e){var t=o.a.indexOf(this.panels,e);this.panels.splice(t,1),this.events.emit("panel-removed",e)},e.prototype.removeRow=function(e,t){(!t&&e.collapsed||t&&!e.collapsed)&&this.toggleRow(e),this.removePanel(e)},e.prototype.expandRows=function(){for(var e=0;e<this.panels.length;e++){var t=this.panels[e];"row"===t.type&&(t.collapsed&&this.toggleRow(t))}},e.prototype.collapseRows=function(){for(var e=0;e<this.panels.length;e++){var t=this.panels[e];"row"===t.type&&(t.collapsed||this.toggleRow(t))}},e.prototype.setPanelFocus=function(e){this.meta.focusPanelId=e},e.prototype.updateSubmenuVisibility=function(){var e=this;this.meta.submenuEnabled=e.links.length>0||o.a.filter(e.templating.list,function(e){return 2!==e.hide}).length>0||o.a.filter(e.annotations.list,function(e){return!0!==e.hide}).length>0},e.prototype.getPanelInfoById=function(e){for(var t=0;t<this.panels.length;t++)if(this.panels[t].id===e)return{panel:this.panels[t],index:t};return null},e.prototype.duplicatePanel=function(e){var t=e.getSaveModel();return t.id=this.getNextPanelId(),delete t.repeat,delete t.repeatIteration,delete t.repeatPanelId,delete t.scopedVars,t.alert&&delete t.thresholds,delete t.alert,e.gridPos.x+2*e.gridPos.w<=l.e?t.gridPos.x+=e.gridPos.w:t.gridPos.y+=e.gridPos.h,this.addPanel(t),t},e.prototype.formatDate=function(e,t){return e=r.a.isMoment(e)?e:r()(e),t=t||"YYYY-MM-DD HH:mm:ss","browser"===this.getTimezone()?r()(e).format(t):r.a.utc(e).format(t)},e.prototype.destroy=function(){this.events.removeAllListeners();for(var e=0,t=this.panels;e<t.length;e++){t[e].destroy()}},e.prototype.toggleRow=function(e){var t=o.a.indexOf(this.panels,e);if(e.collapsed){e.collapsed=!1;var n=o.a.some(e.panels,function(e){return e.repeat});if(e.panels.length>0){for(var a=e.panels[0].gridPos.y-(e.gridPos.y+e.gridPos.h),r=t+1,i=e.gridPos.y,s=0,l=e.panels;s<l.length;s++){var c=l[s];c.gridPos.y-=a,this.panels.splice(r,0,new p.a(c)),r+=1,i=Math.max(i,c.gridPos.y+c.gridPos.h)}for(var u=i-e.gridPos.y-1,d=r;d<this.panels.length;d++)this.panels[d].gridPos.y+=u;e.panels=[],n&&this.processRowRepeats(e)}return this.sortPanelsByGridPos(),void this.events.emit("row-expanded")}var h=this.getRowPanels(t);o.a.pull.apply(o.a,[this.panels].concat(h)),e.panels=o.a.map(h,function(e){return e.getSaveModel()}),e.collapsed=!0,this.events.emit("row-collapsed")},e.prototype.getRowPanels=function(e){for(var t=[],n=e+1;n<this.panels.length;n++){var a=this.panels[n];if("row"===a.type)break;t.push(a)}return t},e.prototype.on=function(e,t){this.events.on(e,t)},e.prototype.off=function(e,t){this.events.off(e,t)},e.prototype.cycleGraphTooltip=function(){this.graphTooltip=(this.graphTooltip+1)%3},e.prototype.sharedTooltipModeEnabled=function(){return this.graphTooltip>0},e.prototype.sharedCrosshairModeOnly=function(){return 1===this.graphTooltip},e.prototype.getRelativeTime=function(e){return e=r.a.isMoment(e)?e:r()(e),"browser"===this.timezone?r()(e).fromNow():r.a.utc(e).fromNow()},e.prototype.isTimezoneUtc=function(){return"utc"===this.getTimezone()},e.prototype.isSnapshot=function(){return void 0!==this.snapshot},e.prototype.getTimezone=function(){return this.timezone?this.timezone:u.a.user.timezone},e.prototype.updateSchema=function(e){new f(this).updateSchema(e)},e.prototype.resetOriginalTime=function(){this.originalTime=o.a.cloneDeep(this.time)},e.prototype.hasTimeChanged=function(){return!o.a.isEqual(this.time,this.originalTime)},e.prototype.resetOriginalVariables=function(){this.originalTemplating=o.a.map(this.templating.list,function(e){return{name:e.name,type:e.type,current:o.a.cloneDeep(e.current),filters:o.a.cloneDeep(e.filters)}})},e.prototype.hasVariableValuesChanged=function(){if(this.templating.list.length!==this.originalTemplating.length)return!1;var e=o.a.map(this.templating.list,function(e){return{name:e.name,type:e.type,current:o.a.cloneDeep(e.current),filters:o.a.cloneDeep(e.filters)}});return!o.a.isEqual(e,this.originalTemplating)},e.prototype.autoFitPanels=function(e,t){var n=Math.max.apply(Math,this.panels.map(function(e){return e.gridPos.h+e.gridPos.y})),a=e-55-20;this.meta.submenuEnabled&&!t&&(a-=50),t===v.KIOSK_MODE_TV&&(a+=55);var r=n/Math.floor(a/(l.c+l.d));this.panels.forEach(function(e,t){e.gridPos.y=Math.round(e.gridPos.y/r)||1,e.gridPos.h=Math.round(e.gridPos.h/r)||1})},e.prototype.templateVariableValueUpdated=function(){this.processRepeats(),this.events.emit("template-variable-value-updated")},e.prototype.expandParentRowFor=function(e){for(var t=0,n=this.panels;t<n.length;t++){var a=n[t];if(a.collapsed)for(var r=0,i=a.panels;r<i.length;r++){if(i[r].id===e)return void this.toggleRow(a)}}},e.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0},e}()},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var a=n(2),r=n(0),i=n.n(r),o=n(51),s=n(271),l=i.a.createContext(Object(s.a)(o.GrafanaThemeType.Dark)),c=function(e){var t=function(t){return i.a.createElement(l.Consumer,null,function(n){return i.a.createElement(e,a.a({},t,{theme:n}))})};return t.displayName="WithTheme("+e.displayName+")",t}},function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h});var a,r=n(4),i=n.n(r),o=n(1),s=n.n(o),l=n(19),c=n(5),u=n(35),d=function(){function e(e,t,n,a,r){var i=this;this.$timeout=t,this.$location=n,this.timer=a,this.contextSrv=r,this.time={from:"6h",to:"now"},e.$on("zoom-out",this.zoomOut.bind(this)),e.$on("$routeUpdate",this.routeUpdated.bind(this)),document.addEventListener("visibilitychange",function(){i.autoRefreshBlocked&&"visible"===document.visibilityState&&(i.autoRefreshBlocked=!1,i.refreshDashboard())})}return e.$inject=["$rootScope","$timeout","$location","timer","contextSrv"],e.prototype.init=function(e){this.timer.cancelAll(),this.dashboard=e,this.time=e.time,this.refresh=e.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=s.a.cloneDeep(this.time),this.refresh&&this.setAutoRefresh(this.refresh)},e.prototype.parseTime=function(){s.a.isString(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=i()(this.time.from).utc()),s.a.isString(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=i()(this.time.to).utc())},e.prototype.parseUrlParam=function(e){if(-1!==e.indexOf("now"))return e;if(8===e.length)return i.a.utc(e,"YYYYMMDD");if(15===e.length)return i.a.utc(e,"YYYYMMDDTHHmmss");if(!isNaN(e)){var t=parseInt(e,10);return i.a.utc(t)}return null},e.prototype.initTimeFromUrl=function(){var e=this.$location.search();e.from&&(this.time.from=this.parseUrlParam(e.from)||this.time.from),e.to&&(this.time.to=this.parseUrlParam(e.to)||this.time.to),e.to&&-1===e.to.indexOf("now")&&(this.refresh=!1,this.dashboard.refresh=!1),e.refresh&&(this.refresh=e.refresh||this.refresh)},e.prototype.routeUpdated=function(){var e=this.$location.search(),t=this.timeRangeForUrl();e.from&&e.to?e.from===t.from&&e.to===t.to||(this.initTimeFromUrl(),this.setTime(this.time,!0)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)},e.prototype.timeHasChangedSinceLoad=function(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)},e.prototype.setAutoRefresh=function(e){var t=this;if(this.dashboard.refresh=e,this.cancelNextRefresh(),e){var n=l.a.interval_to_ms(e);this.refreshTimer=this.timer.register(this.$timeout(function(){t.startNextRefreshTimer(n),t.refreshDashboard()},n))}var a=this.$location.search();e?(a.refresh=e,this.$location.search(a)):a.refresh&&(delete a.refresh,this.$location.search(a))},e.prototype.refreshDashboard=function(){this.dashboard.timeRangeUpdated(this.timeRange())},e.prototype.startNextRefreshTimer=function(e){var t=this;this.cancelNextRefresh(),this.refreshTimer=this.timer.register(this.$timeout(function(){t.startNextRefreshTimer(e),t.contextSrv.isGrafanaVisible()?t.refreshDashboard():t.autoRefreshBlocked=!0},e))},e.prototype.cancelNextRefresh=function(){this.timer.cancel(this.refreshTimer)},e.prototype.setTime=function(e,t){if(s.a.extend(this.time,e),i.a.isMoment(e.to)?(this.oldRefresh=this.dashboard.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.dashboard.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),!0!==t){var n=this.timeRangeForUrl(),a=this.$location.search();a.from=n.from,a.to=n.to,this.$location.search(a)}this.$timeout(this.refreshDashboard.bind(this),0)},e.prototype.timeRangeForUrl=function(){var e=this.timeRange().raw;return i.a.isMoment(e.from)&&(e.from=e.from.valueOf().toString()),i.a.isMoment(e.to)&&(e.to=e.to.valueOf().toString()),e},e.prototype.timeRange=function(){var e={from:i.a.isMoment(this.time.from)?i()(this.time.from):this.time.from,to:i.a.isMoment(this.time.to)?i()(this.time.to):this.time.to},t=this.dashboard&&this.dashboard.getTimezone();return{from:u.parse(e.from,!1,t),to:u.parse(e.to,!0,t),raw:e}},e.prototype.zoomOut=function(e,t){var n=this.timeRange(),a=n.to.valueOf()-n.from.valueOf(),r=n.to.valueOf()-a/2,o=r+a*t/2,s=r-a*t/2;this.setTime({from:i.a.utc(s),to:i.a.utc(o)})},e}();function p(e){a=e}function h(){return a}c.c.service("timeSrv",d)},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var a=function(e){return e.routeParams.id},r=function(e){return e.routeParams.page}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(673),r=function(){function e(){this.emitter=new a.EventEmitter}return e.prototype.emit=function(e,t){this.emitter.emit(e,t)},e.prototype.on=function(e,t,n){var a=this;if(this.emitter.on(e,t),n)var r=n.$on("$destroy",function(){a.emitter.off(e,t),r()})},e.prototype.removeAllListeners=function(e){this.emitter.removeAllListeners(e)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e}()},,function(e,t,n){"use strict";var a=n(52),r=n(1),i=n.n(r),o=n(7),s=new(function(){function e(){}return e.prototype.addDashboardImpression=function(e){var t=this.impressionKey(o.a),n=[];a.a.exists(t)&&(n=JSON.parse(a.a.get(t)),i.a.isArray(n)||(n=[])),(n=n.filter(function(t){return e!==t})).unshift(e),n.length>50&&n.pop(),a.a.set(t,JSON.stringify(n))},e.prototype.getDashboardOpened=function(){var e=a.a.get(this.impressionKey(o.a))||"[]";return e=JSON.parse(e),e=i.a.filter(e,function(e){return i.a.isNumber(e)})},e.prototype.impressionKey=function(e){return"dashboard_impressions-"+e.bootData.user.orgId},e}());t.a=s},,,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return u});var a,r=n(2),i=n(14);!function(e){e.LoadAlertRules="LOAD_ALERT_RULES",e.LoadedAlertRules="LOADED_ALERT_RULES",e.SetSearchQuery="SET_ALERT_SEARCH_QUERY"}(a||(a={}));var o=function(){return{type:a.LoadAlertRules}},s=function(e){return{type:a.LoadedAlertRules,payload:e}},l=function(e){return{type:a.SetSearchQuery,payload:e}};function c(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){var t;return r.d(this,function(a){switch(a.label){case 0:return n(o()),[4,Object(i.a)().get("/api/alerts",e)];case 1:return t=a.sent(),n(s(t)),[2]}})})}}function u(e,t){var n=this;return function(a,o){return r.b(n,void 0,void 0,function(){var n;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(i.a)().post("/api/alerts/"+e+"/pause",t)];case 1:return r.sent(),n=o().location.query.state||"all",a(c({state:n.toString()})),[2]}})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return u});var a,r=n(2),i=n(14);!function(e){e.LoadApiKeys="LOAD_API_KEYS",e.SetApiKeysSearchQuery="SET_API_KEYS_SEARCH_QUERY"}(a||(a={}));var o=function(e){return{type:a.LoadApiKeys,payload:e}};function s(e,t){var n=this;return function(a){return r.b(n,void 0,void 0,function(){var n;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(i.a)().post("/api/auth/keys",e)];case 1:return n=r.sent(),a(u("")),a(l()),t(n.key),[2]}})})}}function l(){var e=this;return function(t){return r.b(e,void 0,void 0,function(){var e;return r.d(this,function(n){switch(n.label){case 0:return[4,Object(i.a)().get("/api/auth/keys")];case 1:return e=n.sent(),t(o(e)),[2]}})})}}function c(e){var t=this;return function(n){return r.b(t,void 0,void 0,function(){return r.d(this,function(t){return Object(i.a)().delete("/api/auth/keys/"+e).then(n(l())),[2]})})}}var u=function(e){return{type:a.SetApiKeysSearchQuery,payload:e}}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return o});var a=function(e){var t=new RegExp(e.searchQuery,"i");return e.users.filter(function(e){return t.test(e.login)||t.test(e.email)})},r=function(e){var t=new RegExp(e.searchQuery,"i");return e.invitees.filter(function(e){return t.test(e.name)||t.test(e.email)})},i=function(e){return e.invitees.length},o=function(e){return e.searchQuery}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return c});var a,r=n(2),i=n(14);!function(e){e.LoadOrganization="LOAD_ORGANIZATION",e.SetOrganizationName="SET_ORGANIZATION_NAME"}(a||(a={}));var o=function(e){return{type:a.LoadOrganization,payload:e}},s=function(e){return{type:a.SetOrganizationName,payload:e}};function l(){var e=this;return function(t){return r.b(e,void 0,void 0,function(){var e;return r.d(this,function(n){switch(n.label){case 0:return[4,Object(i.a)().get("/api/org")];case 1:return e=n.sent(),t(o(e)),[2,e]}})})}}function c(){var e=this;return function(t,n){return r.b(e,void 0,void 0,function(){var e;return r.d(this,function(a){switch(a.label){case 0:return e=n().organization.organization,[4,Object(i.a)().put("/api/org",{name:e.name})];case 1:return a.sent(),t(l()),[2]}})})}}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),function(e){e.left="left",e.right="right"}(a||(a={}));var r=function(){return function(){}}()},function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),function(e){e.AddAppNotification="ADD_APP_NOTIFICATION",e.ClearAppNotification="CLEAR_APP_NOTIFICATION"}(a||(a={}));var r=function(e){return{type:a.ClearAppNotification,payload:e}},i=function(e){return{type:a.AddAppNotification,payload:e}}},function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return g});var a,r=n(2),i=n(10),o=n.n(i),s=n(1),l=n.n(s),c=n(5),u=n(9),d=n(64),p=n(227),h=n.n(p),f=(n(1266),function(){function e(e,t,n,a,r,i){var o=this;this.$rootScope=e,this.$location=t,this.$timeout=n,this.datasourceSrv=a,this.timeSrv=r,this.contextSrv=i,this.modalOpen=!1,this.timepickerOpen=!1,e.$on("$routeChangeSuccess",function(){h.a.reset(),o.setupGlobal()}),this.setupGlobal(),u.b.on("show-modal",function(){return o.modalOpen=!0}),u.b.on("timepickerOpen",function(){return o.timepickerOpen=!0}),u.b.on("timepickerClosed",function(){return o.timepickerOpen=!1})}return e.$inject=["$rootScope","$location","$timeout","datasourceSrv","timeSrv","contextSrv"],e.prototype.setupGlobal=function(){this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("s s",this.openSearchStarred),this.bind("s o",this.openSearch),this.bind("s t",this.openSearchTags),this.bind("f",this.openSearch),this.bindGlobal("esc",this.exit)},e.prototype.openSearchStarred=function(){u.b.emit("show-dash-search",{starred:!0})},e.prototype.openSearchTags=function(){u.b.emit("show-dash-search",{tagsMode:!0})},e.prototype.openSearch=function(){u.b.emit("show-dash-search")},e.prototype.openAlerting=function(){this.$location.url("/alerting")},e.prototype.goToHome=function(){this.$location.url("/")},e.prototype.goToProfile=function(){this.$location.url("/profile")},e.prototype.showHelpModal=function(){u.b.emit("show-modal",{templateHtml:"<help-modal></help-modal>"})},e.prototype.exit=function(){if(!(o()(".popover.in").length>0))if(u.b.emit("hide-modal"),this.modalOpen)this.modalOpen=!1;else{if(this.timepickerOpen)return this.$rootScope.appEvent("closeTimepicker"),void(this.timepickerOpen=!1);var e=this.$location.search();if(e.editview)return delete e.editview,void this.$location.search(e);e.fullscreen?u.b.emit("panel-change-view",{fullscreen:!1,edit:!1}):e.kiosk&&this.$rootScope.appEvent("toggle-kiosk-mode",{exit:!0})}},e.prototype.bind=function(e,t){var n=this;h.a.bind(e,function(e){return e.preventDefault(),e.stopPropagation(),e.returnValue=!1,n.$rootScope.$apply(t.bind(n))},"keydown")},e.prototype.bindGlobal=function(e,t){var n=this;h.a.bindGlobal(e,function(e){return e.preventDefault(),e.stopPropagation(),e.returnValue=!1,n.$rootScope.$apply(t.bind(n))},"keydown")},e.prototype.unbind=function(e,t){h.a.unbind(e,t)},e.prototype.showDashEditView=function(){var e=l.a.extend(this.$location.search(),{editview:"settings"});this.$location.search(e)},e.prototype.setupDashboardBindings=function(e,t){var n=this;this.bind("mod+o",function(){t.graphTooltip=(t.graphTooltip+1)%3,u.b.emit("graph-hover-clear"),t.startRefresh()}),this.bind("mod+s",function(t){e.appEvent("save-dashboard")}),this.bind("t z",function(){e.appEvent("zoom-out",2)}),this.bind("ctrl+z",function(){e.appEvent("zoom-out",2)}),this.bind("t left",function(){e.appEvent("shift-time-backward")}),this.bind("t right",function(){e.appEvent("shift-time-forward")}),this.bind("e",function(){t.meta.focusPanelId&&t.meta.canEdit&&u.b.emit("panel-change-view",{fullscreen:!0,edit:!0,panelId:t.meta.focusPanelId,toggle:!0})}),this.bind("v",function(){t.meta.focusPanelId&&u.b.emit("panel-change-view",{fullscreen:!0,edit:null,panelId:t.meta.focusPanelId,toggle:!0})}),this.contextSrv.hasAccessToExplore()&&this.bind("x",function(){return r.b(n,void 0,void 0,function(){var e,n,a,i=this;return r.d(this,function(r){switch(r.label){case 0:return t.meta.focusPanelId?(e=t.getPanelById(t.meta.focusPanelId),[4,this.datasourceSrv.get(e.datasource)]):[3,3];case 1:return n=r.sent(),[4,Object(d.i)(e,e.targets,n,this.datasourceSrv,this.timeSrv)];case 2:(a=r.sent())&&this.$timeout(function(){return i.$location.url(a)}),r.label=3;case 3:return[2]}})})}),this.bind("p r",function(){t.meta.focusPanelId&&t.meta.canEdit&&(u.b.emit("remove-panel",t.meta.focusPanelId),t.meta.focusPanelId=0)}),this.bind("p d",function(){if(t.meta.focusPanelId&&t.meta.canEdit){var e=t.getPanelInfoById(t.meta.focusPanelId).index;t.duplicatePanel(t.panels[e])}}),this.bind("p s",function(){if(t.meta.focusPanelId){var n=e.$new(),a=t.getPanelInfoById(t.meta.focusPanelId);n.panel=a.panel,n.dashboard=t,u.b.emit("show-modal",{src:"public/app/features/dashboard/components/ShareModal/template.html",scope:n})}}),this.bind("p l",function(){if(t.meta.focusPanelId&&t.getPanelInfoById(t.meta.focusPanelId).panel.legend){var e=t.getPanelById(t.meta.focusPanelId);e.legend.show=!e.legend.show,e.render()}}),this.bind("d shift+c",function(){t.collapseRows()}),this.bind("d shift+e",function(){t.expandRows()}),this.bind("d n",function(e){n.$location.url("/dashboard/new")}),this.bind("d r",function(){t.startRefresh()}),this.bind("d s",function(){n.showDashEditView()}),this.bind("d k",function(){u.b.emit("toggle-kiosk-mode")}),this.bind("d v",function(){u.b.emit("toggle-view-mode")}),this.bind("d a",function(){window.location.href=window.location.href+"&autofitpanels"})},e}());function m(e){a=e}function g(){return a}c.c.service("keybindingSrv",f)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=new(function(){function e(){}return e.prototype.init=function(e,t){this.$rootScope=t,this.window=window,this.enabled},e.prototype.renderingCompleted=function(e){this.panelsRendered=(this.panelsRendered||0)+1,this.window.panelsRendered=this.panelsRendered},e}())},,function(e,t,n){"use strict";
/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */
function a(e,t){return t&&Object.keys(t).length>0&&(e+="?"+i(t)),e}function r(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function i(e){var t=[],n=/\[\]$/,a=function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(e,n){n="function"==typeof n?n():null===n?"":void 0===n?"":n,t[t.length]="boolean"!=typeof n?r(e,!0)+"="+r(n,!0):r(e,!0)},o=function(e,r){var s,l,c;if(e)if(a(r))for(s=0,l=r.length;s<l;s++)n.test(e)?i(e,r[s]):o(e,r[s]);else if(r&&"[object Object]"===String(r))for(c in r)o(e+"["+c+"]",r[c]);else i(e,r);else if(a(r))for(s=0,l=r.length;s<l;s++)i(r[s].name,r[s].value);else for(c in r)o(c,r[c]);return t};return o("",e).join("&")}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(2),r=n(0),i=n.n(r),o=n(7),s=n(6),l=i.a.createContext(o.a),c=l.Consumer,u=function(){return Object(s.getTheme)(o.a.bootData.user.lightTheme?s.GrafanaThemeType.Light:s.GrafanaThemeType.Dark)},d=function(e){var t=e.children;return i.a.createElement(c,null,function(e){return i.a.createElement(s.ThemeContext.Provider,{value:u()},t)})},p=function(e){return function(e){return function(t){return i.a.createElement(l.Provider,{value:o.a},i.a.createElement(e,a.a({},t)))}}(function(t){return i.a.createElement(d,null,i.a.createElement(e,a.a({},t)))})}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(2),r=n(0),i=n.n(r),o=n(276),s=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.removeIcon,a=e.count,r=o.a.getTagColorsFromName(t),s={backgroundColor:r.color,borderColor:r.borderColor},l=0!==a&&i.a.createElement("span",{className:"tag-count-label"},"("+a+")");return i.a.createElement("span",{className:"label label-tag",style:s},n&&i.a.createElement("i",{className:"fa fa-remove"}),t," ",l)},t}(i.a.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(63);function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=o.b.apply(void 0,t)(e);return function(e){return i.a.createElement(r,a.a({},e,{store:s.b}))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(2),r=n(0),i=n.n(r),o=n(6),s=n(14),l=[{value:"",label:"Default"},{value:"dark",label:"Dark"},{value:"light",label:"Light"}],c=[{value:"",label:"Default"},{value:"browser",label:"Local browser time"},{value:"utc",label:"UTC"}],u=function(e){function t(t){var n=e.call(this,t)||this;return n.backendSrv=Object(s.a)(),n.onSubmitForm=function(e){return a.b(n,void 0,void 0,function(){var t,n,r,i;return a.d(this,function(a){switch(a.label){case 0:return e.preventDefault(),t=this.state,n=t.homeDashboardId,r=t.theme,i=t.timezone,[4,this.backendSrv.put("/api/"+this.props.resourceUri+"/preferences",{homeDashboardId:n,theme:r,timezone:i})];case 1:return a.sent(),window.location.reload(),[2]}})})},n.onThemeChanged=function(e){n.setState({theme:e})},n.onTimeZoneChanged=function(e){n.setState({timezone:e})},n.onHomeDashboardChanged=function(e){n.setState({homeDashboardId:e})},n.state={homeDashboardId:0,theme:"",timezone:"",dashboards:[]},n}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e,t,n;return a.d(this,function(a){switch(a.label){case 0:return[4,this.backendSrv.get("/api/"+this.props.resourceUri+"/preferences")];case 1:return e=a.sent(),[4,this.backendSrv.search({starred:!0})];case 2:return t=a.sent(),e.homeDashboardId>0&&!t.find(function(t){return t.id===e.homeDashboardId})?[4,this.backendSrv.search({dashboardIds:[e.homeDashboardId]})]:[3,4];case 3:(n=a.sent())&&n.length>0&&t.push(n[0]),a.label=4;case 4:return this.setState({homeDashboardId:e.homeDashboardId,theme:e.theme,timezone:e.timezone,dashboards:[{id:0,title:"Default",tags:[],type:"",uid:"",uri:"",url:""}].concat(t)}),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.theme,a=t.timezone,r=t.homeDashboardId,s=t.dashboards;return i.a.createElement("form",{className:"section gf-form-group",onSubmit:this.onSubmitForm},i.a.createElement("h3",{className:"page-heading"},"Preferences"),i.a.createElement("div",{className:"gf-form"},i.a.createElement("span",{className:"gf-form-label width-11"},"UI Theme"),i.a.createElement(o.Select,{isSearchable:!1,value:l.find(function(e){return e.value===n}),options:l,onChange:function(t){return e.onThemeChanged(t.value)},width:20})),i.a.createElement("div",{className:"gf-form"},i.a.createElement(o.FormLabel,{width:11,tooltip:"Not finding dashboard you want? Star it first, then it should appear in this select box."},"Home Dashboard"),i.a.createElement(o.Select,{value:s.find(function(e){return e.id===r}),getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.title},onChange:function(t){return e.onHomeDashboardChanged(t.id)},options:s,placeholder:"Chose default dashboard",width:20})),i.a.createElement("div",{className:"gf-form"},i.a.createElement("label",{className:"gf-form-label width-11"},"Timezone"),i.a.createElement(o.Select,{isSearchable:!1,value:c.find(function(e){return e.value===a}),onChange:function(t){return e.onTimeZoneChanged(t.value)},options:c,width:20})),i.a.createElement("div",{className:"gf-form-button-row"},i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save")))},t}(r.PureComponent);t.b=u},function(e,t,n){"use strict";function a(e){return{icon:"fa fa-folder-open",id:"manage-folder",subTitle:"Manage folder dashboards & permissions",url:"",text:e.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"fa fa-fw fa-th-large",id:"folder-dashboards-"+e.uid,text:"Dashboards",url:e.url},{active:!1,icon:"fa fa-fw fa-lock",id:"folder-permissions-"+e.uid,text:"Permissions",url:e.url+"/permissions"},{active:!1,icon:"fa fa-fw fa-cog",id:"folder-settings-"+e.uid,text:"Settings",url:e.url+"/settings"}]}}function r(e){var t=a({id:1,uid:"loading",title:"Loading",url:"url",canSave:!1,version:0});return t.children[e].active=!0,{main:t,node:t.children[e]}}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},,,function(e,t,n){"use strict";n.r(t),n.d(t,"convertSeriesListToCsv",function(){return w}),n.d(t,"exportSeriesListToCsv",function(){return x}),n.d(t,"convertSeriesListToCsvColumns",function(){return S}),n.d(t,"exportSeriesListToCsvColumns",function(){return k}),n.d(t,"convertTableDataToCsv",function(){return C}),n.d(t,"exportTableDataToCsv",function(){return E}),n.d(t,"saveSaveBlob",function(){return T});var a=n(1),r=n(4),i=n.n(r),o=n(172),s=n(697),l="YYYY-MM-DDTHH:mm:ssZ",c=1,u=0,d=";",p="\r\n",h='"',f="grafana_data_export.csv";function m(e){return e?e.split(h).join(h+h):e}var g=new DOMParser;function v(e){if(!e)return e;var t=/&[^;]+;/g;function n(e){return g.parseFromString(e,"text/html").body.textContent}return e.replace(t,n).replace(t,n)}function b(e){return e?"sep="+d+p:""}function y(e,t){void 0===t&&(t=!0);for(var n="",r=0;r<e.length;r+=1)Object(a.isBoolean)(e[r])||Object(a.isNumber)(e[r])||Object(s.isNullOrUndefined)(e[r])?n+=e[r]:n+=""+h+m(Object(a.unescape)(v(e[r])))+h,r<e.length-1&&(n+=d);return t?n+p:n}function w(e,t,n){void 0===t&&(t=l),void 0===n&&(n=!1);for(var a=b(n)+y(["Series","Time","Value"]),r=0;r<e.length;r+=1)for(var o=0;o<e[r].datapoints.length;o+=1)a+=y([e[r].alias,i()(e[r].datapoints[o][c]).format(t),e[r].datapoints[o][u]],o<e[r].datapoints.length-1||r<e.length-1);return a}function x(e,t,n){void 0===t&&(t=l),void 0===n&&(n=!1),T(w(e,t,n),f)}function S(e,t,n){void 0===t&&(t=l),void 0===n&&(n=!1);var r=b(n)+y(["Time"].concat(e.map(function(e){return e.alias})));e=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].datapoints,i=0;i<r.length;i++)t.push(r[i][c]);t=Object(a.sortedUniq)(t.sort());for(var n=0;n<e.length;n++){for(var r=e[n].datapoints,o=r.map(function(e){return e[c]}),s=[],l=void 0,i=0;i<t.length;i++)-1!==(l=Object(a.sortedIndexOf)(o,t[i]))?s.push(r[l]):s.push([null,t[i]]);e[n].datapoints=s}return e}(e);for(var o=function(n){var a=i()(e[0].datapoints[n][c]).format(t);r+=y([a].concat(e.map(function(e){return e.datapoints[n][u]})),n<e[0].datapoints.length-1)},s=0;s<e[0].datapoints.length;s+=1)o(s);return r}function k(e,t,n){void 0===t&&(t=l),void 0===n&&(n=!1),T(S(e,t,n),f)}function C(e,t){void 0===t&&(t=!1);var n=b(t);n+=y(e.columns.map(function(e){return e.title||e.text}));for(var a=0;a<e.rows.length;a+=1)n+=y(e.rows[a],a<e.rows.length-1);return n}function E(e,t){void 0===t&&(t=!1),T(C(e,t),f)}function T(e,t){var n=new Blob([e],{type:"text/csv;charset=utf-8;header=present;"});Object(o.saveAs)(n,t)}},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(10),i=n.n(r),o=n(0),s=n.n(o),l=n(38),c=n(23),u=n(13),d=n.n(u),p=n(120),h=n(280),f=n(291),m=n(379),g=n(380),v=n(381),b=n(6),y=n(279),w=n(290),x=n(54),S=n(27),k=n(37),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isSettingsOpening:!1,isEditing:!1,isFullscreen:!1,showLoadingState:!1,fullscreenPanel:null,scrollTop:0,rememberScrollTop:0},t.setScrollTop=function(e){var n=e.target;t.setState({scrollTop:n.scrollTop})},t.onAddPanel=function(){var e=t.props.dashboard;e.panels.length>0&&"add-panel"===e.panels[0].type||(e.addPanel({type:"add-panel",gridPos:{x:0,y:0,w:12,h:8},title:"Panel Title"}),t.setState({scrollTop:0}))},t}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){return this.props.initDashboard({$injector:this.props.$injector,$scope:this.props.$scope,urlSlug:this.props.urlSlug,urlUid:this.props.urlUid,urlType:this.props.urlType,urlFolderId:this.props.urlFolderId,routeInfo:this.props.routeInfo,fixUrl:!0}),[2]})})},t.prototype.componentWillUnmount=function(){this.props.dashboard&&this.props.cleanUpDashboard()},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props,a=n.dashboard,r=n.editview,i=n.urlEdit,o=n.urlFullscreen,s=n.urlPanelId;a&&(e.dashboard||(document.title=a.title+" - Grafana"),!e.editview&&r&&(this.setState({isSettingsOpening:!0}),setTimeout(function(){t.setState({isSettingsOpening:!1})},10)),o===a.meta.fullscreen&&i===a.meta.isEditing||(isNaN(parseInt(s,10))?this.onLeaveFullscreen():this.onEnterFullscreen()))},t.prototype.onEnterFullscreen=function(){var e=this.props,t=e.dashboard,n=e.urlEdit,a=e.urlFullscreen,r=e.urlPanelId,i=parseInt(r,10);t.expandParentRowFor(i);var o=t.getPanelById(i);o?(t.setViewMode(o,a,n),this.setState({isEditing:n&&t.meta.canEdit,isFullscreen:a,fullscreenPanel:o,rememberScrollTop:this.state.scrollTop}),this.setPanelFullscreenClass(a)):this.handleFullscreenPanelNotFound(r)},t.prototype.onLeaveFullscreen=function(){var e=this.props.dashboard;this.state.fullscreenPanel&&e.setViewMode(this.state.fullscreenPanel,!1,!1),this.setState({isEditing:!1,isFullscreen:!1,fullscreenPanel:null,scrollTop:this.state.rememberScrollTop},function(){e.render()}),this.setPanelFullscreenClass(!1)},t.prototype.handleFullscreenPanelNotFound=function(e){this.props.notifyApp(Object(p.a)("Panel with id "+e+" not found")),this.props.updateLocation({query:{edit:null,fullscreen:null,panelId:null},partial:!0})},t.prototype.setPanelFullscreenClass=function(e){i()("body").toggleClass("panel-in-fullscreen",e)},t.prototype.renderSlowInitState=function(){return s.a.createElement("div",{className:"dashboard-loading"},s.a.createElement("div",{className:"dashboard-loading__text"},s.a.createElement("i",{className:"fa fa-spinner fa-spin"})," ",this.props.initPhase))},t.prototype.renderInitFailedState=function(){var e=this.props.initError;return s.a.createElement("div",{className:"dashboard-loading"},s.a.createElement(y.a,{severity:k.AppNotificationSeverity.Error,title:e.message,text:Object(h.a)(e.error)}))},t.prototype.render=function(){var e=this.props,t=e.dashboard,n=e.editview,a=e.$injector,r=e.isInitSlow,i=e.initError,o=this.state,l=o.isSettingsOpening,c=o.isEditing,u=o.isFullscreen,p=o.scrollTop;if(!t)return r?this.renderSlowInitState():null;var h=d()({"dashboard-page--settings-opening":l,"dashboard-page--settings-open":!l&&n}),y=d()({"dashboard-container":!0,"dashboard-container--has-submenu":t.meta.submenuEnabled});return s.a.createElement("div",{className:h},s.a.createElement(m.a,{dashboard:t,isEditing:c,isFullscreen:u,editview:n,$injector:a,onAddPanel:this.onAddPanel}),s.a.createElement("div",{className:"scroll-canvas scroll-canvas--dashboard"},s.a.createElement(b.CustomScrollbar,{autoHeightMin:"100%",setScrollTop:this.setScrollTop,scrollTop:p},n&&s.a.createElement(v.a,{dashboard:t}),i&&this.renderInitFailedState(),s.a.createElement("div",{className:y},t.meta.submenuEnabled&&s.a.createElement(g.a,{dashboard:t}),s.a.createElement(f.a,{dashboard:t,isEditing:c,isFullscreen:u})))))},t}(o.PureComponent),E={initDashboard:w.a,cleanUpDashboard:x.b,notifyApp:S.b,updateLocation:S.c};t.a=Object(l.hot)(e)(Object(c.b)(function(e){return{urlUid:e.location.routeParams.uid,urlSlug:e.location.routeParams.slug,urlType:e.location.routeParams.type,editview:e.location.query.editview,urlPanelId:e.location.query.panelId,urlFolderId:e.location.query.folderId,urlFullscreen:!!e.location.query.fullscreen,urlEdit:!!e.location.query.edit,initPhase:e.dashboard.initPhase,isInitSlow:e.dashboard.isInitSlow,initError:e.dashboard.initError,dashboard:e.dashboard.model}},E)(C))}).call(this,n(74)(e))},function(e,t){!function(e){e.color={},e.color.make=function(t,n,a,r){var i={};return i.r=t||0,i.g=n||0,i.b=a||0,i.a=null!=r?r:1,i.add=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]+=t;return i.normalize()},i.scale=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]*=t;return i.normalize()},i.toString=function(){return i.a>=1?"rgb("+[i.r,i.g,i.b].join(",")+")":"rgba("+[i.r,i.g,i.b,i.a].join(",")+")"},i.normalize=function(){function e(e,t,n){return t<e?e:t>n?n:t}return i.r=e(0,parseInt(i.r),255),i.g=e(0,parseInt(i.g),255),i.b=e(0,parseInt(i.b),255),i.a=e(0,i.a,1),i},i.clone=function(){return e.color.make(i.r,i.b,i.g,i.a)},i.normalize()},e.color.extract=function(t,n){var a;do{if(""!=(a=t.css(n).toLowerCase())&&"transparent"!=a)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==a&&(a="transparent"),e.color.parse(a)},e.color.parse=function(n){var a,r=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return r(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return r(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return r(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return r(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));var i=e.trim(n).toLowerCase();return"transparent"==i?r(255,255,255,0):r((a=t[i]||[0,0,0])[0],a[1],a[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t=Object.prototype.hasOwnProperty;function n(t,n){var a=n.children("."+t)[0];if(null==a&&((a=document.createElement("canvas")).className=t,e(a).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(n),!a.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");a=window.G_vmlCanvasManager.initElement(a)}this.element=a;var r=this.context=a.getContext("2d"),i=window.devicePixelRatio||1,o=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=i/o,this.resize(n.width(),n.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}function a(t,a,r,i){var o=[],s={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,c=null,u=null,d=null,p=null,h=[],f=[],m={left:0,right:0,top:0,bottom:0},g=0,v=0,b={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},y=this;function w(e,t){t=[y].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function x(t){o=function(t){for(var n=[],a=0;a<t.length;++a){var r=e.extend(!0,{},s.series);null!=t[a].data?(r.data=t[a].data,delete t[a].data,e.extend(!0,r,t[a]),t[a].data=r.data):r.data=t[a],n.push(r)}return n}(t),function(){var t,n=o.length,a=-1;for(t=0;t<o.length;++t){var r=o[t].color;null!=r&&(n--,"number"==typeof r&&r>a&&(a=r))}n<=a&&(n=a+1);var i,l=[],c=s.colors,u=c.length,d=0;for(t=0;t<n;t++)i=e.color.parse(c[t%u]||"#666"),t%u==0&&t&&(d=d>=0?d<.5?-d-.2:0:-d),l[t]=i.scale("rgb",1+d);var p,m=0;for(t=0;t<o.length;++t){if(null==(p=o[t]).color?(p.color=l[m].toString(),++m):"number"==typeof p.color&&(p.color=l[p.color].toString()),null==p.lines.show){var g,v=!0;for(g in p)if(p[g]&&p[g].show){v=!1;break}v&&(p.lines.show=!0)}null==p.lines.zero&&(p.lines.zero=!!p.lines.fill),p.xaxis=E(h,S(p,"x")),p.yaxis=E(f,S(p,"y"))}}(),function(){var t,n,a,r,i,s,l,c,u,d,p,h,f=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=Number.MAX_VALUE;function v(e,t,n){t<e.datamin&&t!=-g&&(e.datamin=t),n>e.datamax&&n!=g&&(e.datamax=n)}for(e.each(k(),function(e,t){t.datamin=f,t.datamax=m,t.used=!1}),t=0;t<o.length;++t)(i=o[t]).datapoints={points:[]},w(b.processRawData,[i,i.data,i.datapoints]);for(t=0;t<o.length;++t){if(i=o[t],p=i.data,!(h=i.datapoints.format)){if((h=[]).push({x:!0,number:!0,required:!0}),h.push({y:!0,number:!0,required:!0}),i.stack||i.bars.show||i.lines.show&&i.lines.fill){var y=!!(i.bars.show&&i.bars.zero||i.lines.show&&i.lines.zero);h.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:y}),i.bars.horizontal&&(delete h[h.length-1].y,h[h.length-1].x=!0)}i.datapoints.format=h}if(null==i.datapoints.pointsize){i.datapoints.pointsize=h.length,l=i.datapoints.pointsize,s=i.datapoints.points;var x=i.lines.show&&i.lines.steps;for(i.xaxis.used=i.yaxis.used=!0,n=a=0;n<p.length;++n,a+=l){var S=null==(d=p[n]);if(!S)for(r=0;r<l;++r)c=d[r],(u=h[r])&&(u.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=g:c==-1/0&&(c=-g)),null==c&&(u.required&&(S=!0),null!=u.defaultValue&&(c=u.defaultValue))),s[a+r]=c;if(S)for(r=0;r<l;++r)null!=(c=s[a+r])&&!1!==(u=h[r]).autoscale&&(u.x&&v(i.xaxis,c,c),u.y&&v(i.yaxis,c,c)),s[a+r]=null;if(x&&a>0&&(!S||null!=s[a-l])){for(r=0;r<l;++r)s[a+l+r]=s[a+r];s[a+1]=s[a-l+1]||0,S&&(s[a]=d[0]),a+=l}}}}for(t=0;t<o.length;++t){if(i=o[t],s=i.datapoints.points,l=i.datapoints.pointsize,"negative-Y"===i.transform)for(n=0;n<s.length;n+=l)null!=s[n]&&(c=s[n+1],s[n+1]=-c);w(b.processDatapoints,[i,i.datapoints])}for(t=0;t<o.length;++t){i=o[t],s=i.datapoints.points,l=i.datapoints.pointsize,h=i.datapoints.format;var C=f,E=f,T=m,M=m;for(n=0;n<s.length;n+=l)if(null!=s[n])for(r=0;r<l;++r)c=s[n+r],(u=h[r])&&!1!==u.autoscale&&c!=g&&c!=-g&&(u.x&&(c<C&&(C=c),c>T&&(T=c)),u.y&&(c<E&&(E=c),c>M&&(M=c)));if(i.bars.show){var _;switch(i.bars.align){case"left":_=0;break;case"right":_=-i.bars.barWidth;break;default:_=-i.bars.barWidth/2}i.bars.horizontal?(E+=_,M+=_+i.bars.barWidth):(C+=_,T+=_+i.bars.barWidth)}v(i.xaxis,C,T),v(i.yaxis,E,M)}e.each(k(),function(e,t){t.datamin==f&&(t.datamin=null),t.datamax==m&&(t.datamax=null)})}()}function S(e,t){var n=e[t+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function k(){return e.grep(h.concat(f),function(e){return e})}function C(e){var t,n,a={};for(t=0;t<h.length;++t)(n=h[t])&&(a["x"+n.n]=n.c2p(e.left));for(t=0;t<f.length;++t)(n=f[t])&&(a["y"+n.n]=n.c2p(e.top));return void 0!==a.x1&&(a.x=a.x1),void 0!==a.y1&&(a.y=a.y1),a}function E(t,n){return t[n-1]||(t[n-1]={n:n,direction:t==h?"x":"y",options:e.extend(!0,{},t==h?s.xaxis:s.yaxis)}),t[n-1]}function T(){U&&clearTimeout(U),u.unbind("mousemove",V),u.unbind("mouseleave",B),u.unbind("click",Q),w(b.shutdown,[u])}function M(e){for(var t=e.options,n=e.ticks||[],a=t.labelWidth||0,r=t.labelHeight||0,i=a||("x"==e.direction?Math.floor(l.width/(n.length||1)):null),o=e.direction+"Axis "+e.direction+e.n+"Axis",s="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+o,c=t.font||"flot-tick-label tickLabel",u=0;u<n.length;++u){var d=n[u];if(d.label){var p=l.getTextInfo(s,d.label,c,null,i);a=Math.max(a,p.width+1),r=Math.max(r,p.height)}}e.labelWidth=t.labelWidth||a,e.labelHeight=t.labelHeight||r}function _(t){var n=t.labelWidth,a=t.labelHeight,r=t.options.position,i="x"===t.direction,o=t.options.tickLength,c=s.grid.axisMargin,u=s.grid.labelMargin,d=s.grid.eventSectionHeight,p=!0,g=!0,v=!0,b=!1;e.each(i?h:f,function(e,n){n&&(n.show||n.reserveSpace)&&(n===t?b=!0:n.options.position===r&&(b?g=!1:p=!1),b||(v=!1))}),g&&(c=0),null==o&&(o=v?"full":5),isNaN(+o)||(u+=+o),i?(a+=u,a+=d,"bottom"==r?(m.bottom+=a+c,t.box={top:l.height-m.bottom,height:a}):(t.box={top:m.top+c,height:a},m.top+=a+c)):(n+=u,"left"==r?(t.box={left:m.left+c,width:n},m.left+=n+c):(m.right+=n+c,t.box={left:l.width-m.right,width:n})),t.position=r,t.tickLength=o,t.box.padding=u,t.box.eventSectionPadding=d,t.innermost=p}function A(){var n=k(),a=s.grid.show;for(var r in m){var i=s.grid.margin||0;m[r]="number"==typeof i?i:i[r]||0}for(var r in w(b.processOffset,[m]),m)"object"==typeof s.grid.borderWidth?m[r]+=a?s.grid.borderWidth[r]:0:m[r]+=a?s.grid.borderWidth:0;if(e.each(n,function(e,t){var n=t.options;t.show=null==n.show?t.used:n.show,t.reserveSpace=null==n.reserveSpace?t.show:n.reserveSpace,function(e){var t=e.options,n=+(null!=t.min?t.min:e.datamin),a=+(null!=t.max?t.max:e.datamax),r=a-n;if(0==r){var i=Math.abs(0==a?1:.25*a);null==t.min&&(n-=i),null!=t.max&&null==t.min||(a+=i)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(n-=r*o)<0&&null!=e.datamin&&e.datamin>=0&&(n=0),null==t.max&&(a+=r*o)>0&&null!=e.datamax&&e.datamax<=0&&(a=0))}e.min=n,e.max=a}(t)}),w(b.processRange,[]),a){for(var c=e.grep(n,function(e){return e.show||e.reserveSpace}),u=!1,d=0;d<2&&(e.each(c,function(e,t){D(t),N(t),u=P(t,t.ticks)||u,M(t)}),u&&b.processRange.length>0);d++)w(b.processRange,[]),u=!1;for(d=c.length-1;d>=0;--d)_(c[d]);!function(){var t,n=s.grid.minBorderMargin;if(null==n)for(n=0,t=0;t<o.length;++t)n=Math.max(n,2*(o[t].points.radius+o[t].points.lineWidth/2));var a={left:n,right:n,top:n,bottom:n};e.each(k(),function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(a.left=Math.max(a.left,t.labelWidth/2),a.right=Math.max(a.right,t.labelWidth/2)):(a.bottom=Math.max(a.bottom,t.labelHeight/2),a.top=Math.max(a.top,t.labelHeight/2)))}),m.left=Math.ceil(Math.max(a.left,m.left)),m.right=Math.ceil(Math.max(a.right,m.right)),m.top=Math.ceil(Math.max(a.top,m.top)),m.bottom=Math.ceil(Math.max(a.bottom,m.bottom))}(),e.each(c,function(e,t){!function(e){"x"==e.direction?(e.box.left=m.left-e.labelWidth/2,e.box.width=l.width-m.left-m.right+e.labelWidth):(e.box.top=m.top-e.labelHeight/2,e.box.height=l.height-m.bottom-m.top+e.labelHeight)}(t)})}g=l.width-m.left-m.right,v=l.height-m.bottom-m.top,e.each(n,function(e,t){!function(e){function t(e){return e}var n,a,r=e.options.transform||t,i=e.options.inverseTransform;"x"==e.direction?(n=e.scale=g/Math.abs(r(e.max)-r(e.min)),a=Math.min(r(e.max),r(e.min))):(n=-(n=e.scale=v/Math.abs(r(e.max)-r(e.min))),a=Math.max(r(e.max),r(e.min))),e.p2c=r==t?function(e){return(e-a)*n}:function(e){return(r(e)-a)*n},e.c2p=i?function(e){return i(a+e/n)}:function(e){return a+e/n}}(t)}),a&&e.each(k(),function(e,t){var n,a,r,i,o,s=t.box,c=t.direction+"Axis "+t.direction+t.n+"Axis",u="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+c,d=t.options.font||"flot-tick-label tickLabel";if(l.removeText(u),t.show&&0!=t.ticks.length)for(var p=0;p<t.ticks.length;++p)!(n=t.ticks[p]).label||n.v<t.min||n.v>t.max||("x"==t.direction?(i="center",a=m.left+t.p2c(n.v),"bottom"==t.position?r=s.top+s.padding+s.eventSectionPadding:(r=s.top+s.height-s.padding,o="bottom")):(o="middle",r=m.top+t.p2c(n.v),"left"==t.position?(a=s.left+s.width-s.padding,i="right"):a=s.left+s.padding),l.addText(u,a,r,n.label,d,null,null,i,o))}),function(){null!=s.legend.container?e(s.legend.container).html(""):t.find(".legend").remove();if(!s.legend.show)return;for(var n,a,r=[],i=[],l=!1,c=s.legend.labelFormatter,u=0;u<o.length;++u)(n=o[u]).label&&(a=c?c(n.label,n):n.label)&&i.push({label:a,color:n.color});if(s.legend.sorted)if(e.isFunction(s.legend.sorted))i.sort(s.legend.sorted);else if("reverse"==s.legend.sorted)i.reverse();else{var d="descending"!=s.legend.sorted;i.sort(function(e,t){return e.label==t.label?0:e.label<t.label!=d?1:-1})}for(var u=0;u<i.length;++u){var p=i[u];u%s.legend.noColumns==0&&(l&&r.push("</tr>"),r.push("<tr>"),l=!0),r.push('<td class="legendColorBox"><div style="border:1px solid '+s.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+p.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+p.label+"</td>")}l&&r.push("</tr>");if(0==r.length)return;var h='<table style="font-size:smaller;color:'+s.grid.color+'">'+r.join("")+"</table>";if(null!=s.legend.container)e(s.legend.container).html(h);else{var f="",g=s.legend.position,v=s.legend.margin;null==v[0]&&(v=[v,v]),"n"==g.charAt(0)?f+="top:"+(v[1]+m.top)+"px;":"s"==g.charAt(0)&&(f+="bottom:"+(v[1]+m.bottom)+"px;"),"e"==g.charAt(1)?f+="right:"+(v[0]+m.right)+"px;":"w"==g.charAt(1)&&(f+="left:"+(v[0]+m.left)+"px;");var b=e('<div class="legend">'+h.replace('style="','style="position:absolute;'+f+";")+"</div>").appendTo(t);if(0!=s.legend.backgroundOpacity){var y=s.legend.backgroundColor;null==y&&((y=(y=s.grid.backgroundColor)&&"string"==typeof y?e.color.parse(y):e.color.extract(b,"background-color")).a=1,y=y.toString());var w=b.children();e('<div style="position:absolute;width:'+w.width()+"px;height:"+w.height()+"px;"+f+"background-color:"+y+';"> </div>').prependTo(b).css("opacity",s.legend.backgroundOpacity)}}}()}function D(t){var n,a=t.options;n="number"==typeof a.ticks&&a.ticks>0?a.ticks:.3*Math.sqrt("x"==t.direction?l.width:l.height);var r=(t.max-t.min)/n,i=-Math.floor(Math.log(r)/Math.LN10),o=a.tickDecimals;null!=o&&i>o&&(i=o);var s,c=Math.pow(10,-i),u=r/c;if(u<1.5?s=1:u<3?(s=2,u>2.25&&(null==o||i+1<=o)&&(s=2.5,++i)):s=u<7.5?5:10,s*=c,null!=a.minTickSize&&s<a.minTickSize&&(s=a.minTickSize),t.delta=r,t.tickDecimals=Math.max(0,null!=o?o:i),t.tickSize=a.tickSize||s,t.scaledDecimals=t.tickDecimals-Math.floor(Math.log(t.tickSize)/Math.LN10),"time"==a.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,n=[],a=function(e,t){return t*Math.floor(e/t)}(e.min,e.tickSize),r=0,i=Number.NaN;do{t=i,i=a+r*e.tickSize,n.push(i),++r}while(i<e.max&&i!=t);return n},t.tickFormatter=function(e,t){var n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,a=""+Math.round(e*n)/n;if(null!=t.tickDecimals){var r=a.indexOf("."),i=-1==r?0:a.length-r-1;if(i<t.tickDecimals)return(i?a:a+".")+(""+n).substr(1,t.tickDecimals-i)}return a}),e.isFunction(a.tickFormatter)&&(t.tickFormatter=function(e,t){return""+a.tickFormatter(e,t)}),null!=a.alignTicksWithAxis){var d=("x"==t.direction?h:f)[a.alignTicksWithAxis-1];if(d&&d.used&&d!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==a.min&&(t.min=Math.min(t.min,p[0])),null==a.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,n,a=[];for(n=0;n<d.ticks.length;++n)t=(d.ticks[n].v-d.min)/(d.max-d.min),t=e.min+t*(e.max-e.min),a.push(t);return a},!t.mode&&null==a.tickDecimals){var m=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),g=t.tickGenerator(t);g.length>1&&/\..*0$/.test((g[1]-g[0]).toFixed(m))||(t.tickDecimals=m)}}}}function N(t){var n,a,r=t.options.ticks,i=[];for(null==r||"number"==typeof r&&r>0?i=t.tickGenerator(t):r&&(i=e.isFunction(r)?r(t):r),t.ticks=[],n=0;n<i.length;++n){var o=null,s=i[n];"object"==typeof s?(a=+s[0],s.length>1&&(o=s[1])):a=+s,null==o&&(o=t.tickFormatter(a,t)),isNaN(a)||t.ticks.push({v:a,label:o})}}function P(e,t){var n=!1;return e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v),n=!0),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v),n=!0)),n}function O(){l.clear(),w(b.drawBackground,[d]);var e=s.grid;e.show&&e.backgroundColor&&(d.save(),d.translate(m.left,m.top),d.fillStyle=Z(s.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,g,v),d.restore()),e.show&&!e.aboveData&&$();for(var t=0;t<o.length;++t)w(b.drawSeries,[d,o[t]]),F(o[t]);w(b.draw,[d]),e.show&&e.aboveData&&$(),l.render(),H()}function I(e,t){for(var n,a,r,i,o=k(),s=0;s<o.length;++s)if((n=o[s]).direction==t&&(e[i=t+n.n+"axis"]||1!=n.n||(i=t+"axis"),e[i])){a=e[i].from,r=e[i].to;break}if(e[i]||(n="x"==t?h[0]:f[0],a=e[t+"1"],r=e[t+"2"]),null!=a&&null!=r&&a>r){var l=a;a=r,r=l}return{from:a,to:r,axis:n}}function $(){var t,n,a,r;d.save(),d.translate(m.left,m.top);var i=s.grid.markings;if(i)for(e.isFunction(i)&&((n=y.getAxes()).xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)),t=0;t<i.length;++t){var o=i[t],l=I(o,"x"),c=I(o,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||c.to<c.axis.min||c.from>c.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max);var u=l.from===l.to,p=c.from===c.to;if(!u||!p)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),u||p){var h=o.lineWidth||s.grid.markingsLineWidth,f=h%2?.5:0;d.beginPath(),d.strokeStyle=o.color||s.grid.markingsColor,d.lineWidth=h,u?(d.moveTo(l.to+f,c.from),d.lineTo(l.to+f,c.to)):(d.moveTo(l.from,c.to+f),d.lineTo(l.to,c.to+f)),d.stroke()}else d.fillStyle=o.color||s.grid.markingsColor,d.fillRect(l.from,c.to,l.to-l.from,c.from-c.to)}}n=k(),a=s.grid.borderWidth;for(var b=0;b<n.length;++b){var w,x,S,C,E=n[b],T=E.box,M=E.tickLength;if(E.show&&0!=E.ticks.length){for(d.lineWidth=1,"x"==E.direction?(w=0,x="full"==M?"top"==E.position?0:v:T.top-m.top+("top"==E.position?T.height:0)):(x=0,w="full"==M?"left"==E.position?0:g:T.left-m.left+("left"==E.position?T.width:0)),E.innermost||(d.strokeStyle=E.options.color,d.beginPath(),S=C=0,"x"==E.direction?S=g+1:C=v+1,1==d.lineWidth&&("x"==E.direction?x=Math.floor(x)+.5:w=Math.floor(w)+.5),d.moveTo(w,x),d.lineTo(w+S,x+C),d.stroke()),d.strokeStyle=E.options.tickColor,d.beginPath(),t=0;t<E.ticks.length;++t){var _=E.ticks[t].v;S=C=0,isNaN(_)||_<E.min||_>E.max||"full"==M&&("object"==typeof a&&a[E.position]>0||a>0)&&(_==E.min||_==E.max)||("x"==E.direction?(w=E.p2c(_),C="full"==M?-v:M,"top"==E.position&&(C=-C)):(x=E.p2c(_),S="full"==M?-g:M,"left"==E.position&&(S=-S)),1==d.lineWidth&&("x"==E.direction?w=Math.floor(w)+.5:x=Math.floor(x)+.5),d.moveTo(w,x),d.lineTo(w+S,x+C))}d.stroke()}}a&&(r=s.grid.borderColor,"object"==typeof a||"object"==typeof r?("object"!=typeof a&&(a={top:a,right:a,bottom:a,left:a}),"object"!=typeof r&&(r={top:r,right:r,bottom:r,left:r}),a.top>0&&(d.strokeStyle=r.top,d.lineWidth=a.top,d.beginPath(),d.moveTo(0-a.left,0-a.top/2),d.lineTo(g,0-a.top/2),d.stroke()),a.right>0&&(d.strokeStyle=r.right,d.lineWidth=a.right,d.beginPath(),d.moveTo(g+a.right/2,0-a.top),d.lineTo(g+a.right/2,v),d.stroke()),a.bottom>0&&(d.strokeStyle=r.bottom,d.lineWidth=a.bottom,d.beginPath(),d.moveTo(g+a.right,v+a.bottom/2),d.lineTo(0,v+a.bottom/2),d.stroke()),a.left>0&&(d.strokeStyle=r.left,d.lineWidth=a.left,d.beginPath(),d.moveTo(0-a.left/2,v+a.bottom),d.lineTo(0-a.left/2,0),d.stroke())):(d.lineWidth=a,d.strokeStyle=s.grid.borderColor,d.strokeRect(-a/2,-a/2,g+a,v+a))),d.restore()}function F(e){e.lines.show&&(function(e){function t(e,t,n,a,r){var i=e.points,o=e.pointsize,s=null,l=null;d.beginPath();for(var c=o;c<i.length;c+=o){var u=i[c-o],p=i[c-o+1],h=i[c],f=i[c+1];if(null!=u&&null!=h){if(p<=f&&p<r.min){if(f<r.min)continue;u=(r.min-p)/(f-p)*(h-u)+u,p=r.min}else if(f<=p&&f<r.min){if(p<r.min)continue;h=(r.min-p)/(f-p)*(h-u)+u,f=r.min}if(p>=f&&p>r.max){if(f>r.max)continue;u=(r.max-p)/(f-p)*(h-u)+u,p=r.max}else if(f>=p&&f>r.max){if(p>r.max)continue;h=(r.max-p)/(f-p)*(h-u)+u,f=r.max}if(u<=h&&u<a.min){if(h<a.min)continue;p=(a.min-u)/(h-u)*(f-p)+p,u=a.min}else if(h<=u&&h<a.min){if(u<a.min)continue;f=(a.min-u)/(h-u)*(f-p)+p,h=a.min}if(u>=h&&u>a.max){if(h>a.max)continue;p=(a.max-u)/(h-u)*(f-p)+p,u=a.max}else if(h>=u&&h>a.max){if(u>a.max)continue;f=(a.max-u)/(h-u)*(f-p)+p,h=a.max}u==s&&p==l||d.moveTo(a.p2c(u)+t,r.p2c(p)+n),s=h,l=f,d.lineTo(a.p2c(h)+t,r.p2c(f)+n)}}d.stroke()}d.save(),d.translate(m.left,m.top),d.lineJoin="round";var n=e.lines.lineWidth,a=e.shadowSize;if(n>0&&a>0){d.lineWidth=a,d.strokeStyle="rgba(0,0,0,0.1)";var r=Math.PI/18;t(e.datapoints,Math.sin(r)*(n/2+a/2),Math.cos(r)*(n/2+a/2),e.xaxis,e.yaxis),d.lineWidth=a/2,t(e.datapoints,Math.sin(r)*(n/2+a/4),Math.cos(r)*(n/2+a/4),e.xaxis,e.yaxis)}d.lineWidth=n,d.strokeStyle=e.color;var i=L(e.lines,e.color,0,v);i&&(d.fillStyle=i,function(e,t,n){var a=e.points,r=e.pointsize,i=Math.min(Math.max(0,n.min),n.max),o=0,s=!1,l=1,c=0,u=0;for(;!(r>0&&o>a.length+r);){var p=a[(o+=r)-r],h=a[o-r+l],f=a[o],m=a[o+l];if(s){if(r>0&&null!=p&&null==f){u=o,r=-r,l=2;continue}if(r<0&&o==c+r){d.fill(),s=!1,l=1,o=c=u+(r=-r);continue}}if(null!=p&&null!=f){if(p<=f&&p<t.min){if(f<t.min)continue;h=(t.min-p)/(f-p)*(m-h)+h,p=t.min}else if(f<=p&&f<t.min){if(p<t.min)continue;m=(t.min-p)/(f-p)*(m-h)+h,f=t.min}if(p>=f&&p>t.max){if(f>t.max)continue;h=(t.max-p)/(f-p)*(m-h)+h,p=t.max}else if(f>=p&&f>t.max){if(p>t.max)continue;m=(t.max-p)/(f-p)*(m-h)+h,f=t.max}if(s||(d.beginPath(),d.moveTo(t.p2c(p),n.p2c(i)),s=!0),h>=n.max&&m>=n.max)d.lineTo(t.p2c(p),n.p2c(n.max)),d.lineTo(t.p2c(f),n.p2c(n.max));else if(h<=n.min&&m<=n.min)d.lineTo(t.p2c(p),n.p2c(n.min)),d.lineTo(t.p2c(f),n.p2c(n.min));else{var g=p,v=f;h<=m&&h<n.min&&m>=n.min?(p=(n.min-h)/(m-h)*(f-p)+p,h=n.min):m<=h&&m<n.min&&h>=n.min&&(f=(n.min-h)/(m-h)*(f-p)+p,m=n.min),h>=m&&h>n.max&&m<=n.max?(p=(n.max-h)/(m-h)*(f-p)+p,h=n.max):m>=h&&m>n.max&&h<=n.max&&(f=(n.max-h)/(m-h)*(f-p)+p,m=n.max),p!=g&&d.lineTo(t.p2c(g),n.p2c(h)),d.lineTo(t.p2c(p),n.p2c(h)),d.lineTo(t.p2c(f),n.p2c(m)),f!=v&&(d.lineTo(t.p2c(f),n.p2c(m)),d.lineTo(t.p2c(v),n.p2c(m)))}}}}(e.datapoints,e.xaxis,e.yaxis));n>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);d.restore()}(e),e.points.show||e.bars.show||function(e){for(var t=[],n=null,a=null,r=e.datapoints,i=[],o=0;o<r.pointsize-2;o++)i.push(0);for(var s=0;s<r.points.length;s+=r.pointsize){var l=r.points[s],c=r.points[s+1];a=s===r.points.length-r.pointsize?null:r.points[s+r.pointsize],null!==l&&null!==c&&null===n&&null===a&&(t.push(l),t.push(c),t.push.apply(t,i)),n=l}var u=r.points;r.points=t,e.points.radius=e.lines.lineWidth/2,q(e),r.points=u}(e)),e.bars.show&&function(e){var t;switch(d.save(),d.translate(m.left,m.top),d.lineWidth=e.bars.lineWidth,d.strokeStyle=e.color,e.bars.align){case"left":t=0;break;case"right":t=-e.bars.barWidth;break;default:t=-e.bars.barWidth/2}var n=e.bars.fill?function(t,n){return L(e.bars,e.color,t,n)}:null;(function(t,n,a,r,i,o){for(var s=t.points,l=t.pointsize,c=0;c<s.length;c+=l)null!=s[c]&&R(s[c],s[c+1],s[c+2],n,a,r,i,o,d,e.bars.horizontal,e.bars.lineWidth)})(e.datapoints,t,t+e.bars.barWidth,n,e.xaxis,e.yaxis),d.restore()}(e),e.points.show&&q(e)}function q(e){function t(e,t,n,a,r,i,o,s){for(var l=e.points,c=e.pointsize,u=0;u<l.length;u+=c){var p=l[u],h=l[u+1];null==p||p<i.min||p>i.max||h<o.min||h>o.max||(d.beginPath(),p=i.p2c(p),h=o.p2c(h)+a,"circle"==s?d.arc(p,h,t,0,r?Math.PI:2*Math.PI,!1):s(d,p,h,t,r),d.closePath(),n&&(d.fillStyle=n,d.fill()),d.stroke())}}d.save(),d.translate(m.left,m.top);var n=e.points.lineWidth,a=e.shadowSize,r=e.points.radius,i=e.points.symbol;if(0==n&&(n=1e-4),n>0&&a>0){var o=a/2;d.lineWidth=o,d.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,r,null,o+o/2,!0,e.xaxis,e.yaxis,i),d.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,r,null,o/2,!0,e.xaxis,e.yaxis,i)}d.lineWidth=n,d.strokeStyle=e.color,t(e.datapoints,r,L(e.points,e.color),0,!1,e.xaxis,e.yaxis,i),d.restore()}function R(e,t,n,a,r,i,o,s,l,c,u){var d,p,h,f,m,g,v,b,y;c?(b=g=v=!0,m=!1,f=t+a,h=t+r,(p=e)<(d=n)&&(y=p,p=d,d=y,m=!0,g=!1)):(m=g=v=!0,b=!1,d=e+a,p=e+r,(f=t)<(h=n)&&(y=f,f=h,h=y,b=!0,v=!1)),p<o.min||d>o.max||f<s.min||h>s.max||(d<o.min&&(d=o.min,m=!1),p>o.max&&(p=o.max,g=!1),h<s.min&&(h=s.min,b=!1),f>s.max&&(f=s.max,v=!1),d=o.p2c(d),h=s.p2c(h),p=o.p2c(p),f=s.p2c(f),i&&(l.fillStyle=i(h,f),l.fillRect(d,f,p-d,h-f)),u>0&&(m||g||v||b)&&(l.beginPath(),l.moveTo(d,h),m?l.lineTo(d,f):l.moveTo(d,f),v?l.lineTo(p,f):l.moveTo(p,f),g?l.lineTo(p,h):l.moveTo(p,h),b?l.lineTo(d,h):l.moveTo(d,h),l.stroke()))}function L(t,n,a,r){var i=t.fill;if(!i)return null;if(t.fillColor)return Z(t.fillColor,a,r,n);var o=e.color.parse(n);return o.a="number"==typeof i?i:.4,o.normalize(),o.toString()}y.setData=x,y.setupGrid=A,y.draw=O,y.getPlaceholder=function(){return t},y.getCanvas=function(){return l.element},y.getPlotOffset=function(){return m},y.width=function(){return g},y.height=function(){return v},y.offset=function(){var e=u.offset();return e.left+=m.left,e.top+=m.top,e},y.getData=function(){return o},y.getAxes=function(){var t={};return e.each(h.concat(f),function(e,n){n&&(t[n.direction+(1!=n.n?n.n:"")+"axis"]=n)}),t},y.getXAxes=function(){return h},y.getYAxes=function(){return f},y.c2p=C,y.p2c=function(e){var t,n,a,r={};for(t=0;t<h.length;++t)if((n=h[t])&&n.used&&(a="x"+n.n,null==e[a]&&1==n.n&&(a="x"),null!=e[a])){r.left=n.p2c(e[a]);break}for(t=0;t<f.length;++t)if((n=f[t])&&n.used&&(a="y"+n.n,null==e[a]&&1==n.n&&(a="y"),null!=e[a])){r.top=n.p2c(e[a]);break}return r},y.getOptions=function(){return s},y.highlight=W,y.unhighlight=Y,y.triggerRedrawOverlay=H,y.pointOffset=function(e){return{left:parseInt(h[S(e,"x")-1].p2c(+e.x)+m.left,10),top:parseInt(f[S(e,"y")-1].p2c(+e.y)+m.top,10)}},y.shutdown=T,y.destroy=function(){T(),t.removeData("plot").empty(),o=[],s=null,l=null,c=null,u=null,d=null,p=null,h=[],f=[],b=null,j=[],y=null},y.resize=function(){var e=t.width(),n=t.height();l.resize(e,n),c.resize(e,n)},y.hooks=b,function(){for(var t={Canvas:n},a=0;a<i.length;++a){var r=i[a];r.init(y,t),r.options&&e.extend(!0,s,r.options)}}(),function(n){e.extend(!0,s,n),n&&n.colors&&(s.colors=n.colors);null==s.xaxis.color&&(s.xaxis.color=e.color.parse(s.grid.color).scale("a",.22).toString());null==s.yaxis.color&&(s.yaxis.color=e.color.parse(s.grid.color).scale("a",.22).toString());null==s.xaxis.tickColor&&(s.xaxis.tickColor=s.grid.tickColor||s.xaxis.color);null==s.yaxis.tickColor&&(s.yaxis.tickColor=s.grid.tickColor||s.yaxis.color);null==s.grid.borderColor&&(s.grid.borderColor=s.grid.color);null==s.grid.tickColor&&(s.grid.tickColor=e.color.parse(s.grid.color).scale("a",.22).toString());var a,r,i,o=t.css("font-size"),l=o?+o.replace("px",""):13,c={style:t.css("font-style"),size:Math.round(.8*l),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(i=s.xaxes.length||1,a=0;a<i;++a)(r=s.xaxes[a])&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},s.xaxis,r),s.xaxes[a]=r,r.font&&(r.font=e.extend({},c,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(i=s.yaxes.length||1,a=0;a<i;++a)(r=s.yaxes[a])&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},s.yaxis,r),s.yaxes[a]=r,r.font&&(r.font=e.extend({},c,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));s.xaxis.noTicks&&null==s.xaxis.ticks&&(s.xaxis.ticks=s.xaxis.noTicks);s.yaxis.noTicks&&null==s.yaxis.ticks&&(s.yaxis.ticks=s.yaxis.noTicks);s.x2axis&&(s.xaxes[1]=e.extend(!0,{},s.xaxis,s.x2axis),s.xaxes[1].position="top",null==s.x2axis.min&&(s.xaxes[1].min=null),null==s.x2axis.max&&(s.xaxes[1].max=null));s.y2axis&&(s.yaxes[1]=e.extend(!0,{},s.yaxis,s.y2axis),s.yaxes[1].position="right",null==s.y2axis.min&&(s.yaxes[1].min=null),null==s.y2axis.max&&(s.yaxes[1].max=null));s.grid.coloredAreas&&(s.grid.markings=s.grid.coloredAreas);s.grid.coloredAreasColor&&(s.grid.markingsColor=s.grid.coloredAreasColor);s.lines&&e.extend(!0,s.series.lines,s.lines);s.points&&e.extend(!0,s.series.points,s.points);s.bars&&e.extend(!0,s.series.bars,s.bars);null!=s.shadowSize&&(s.series.shadowSize=s.shadowSize);null!=s.highlightColor&&(s.series.highlightColor=s.highlightColor);for(a=0;a<s.xaxes.length;++a)E(h,a+1).options=s.xaxes[a];for(a=0;a<s.yaxes.length;++a)E(f,a+1).options=s.yaxes[a];for(var u in b)s.hooks[u]&&s.hooks[u].length&&(b[u]=b[u].concat(s.hooks[u]));w(b.processOptions,[s])}(r),function(){t.find(".flot-temp-elem").remove(),"static"==t.css("position")&&t.css("position","relative");l=new n("flot-base",t),c=new n("flot-overlay",t),d=l.context,p=c.context,u=e(c.element).unbind();var a=t.data("plot");a&&(a.shutdown(),c.clear());t.data("plot",y)}(),x(a),A(),O(),function(){s.grid.hoverable&&(u.mousemove(V),u.bind("mouseleave",B));s.grid.clickable&&u.click(Q);w(b.bindEvents,[u])}();var j=[],U=null;function V(e){s.grid.hoverable&&z("plothover",e,function(e){return 0!=e.hoverable})}function B(e){s.grid.hoverable&&z("plothover",e,function(e){return!1})}function Q(e){y.isSelecting||z("plotclick",e,function(e){return 0!=e.clickable})}function z(e,n,a){var r=u.offset(),i=n.pageX-r.left-m.left,l=n.pageY-r.top-m.top,c=C({left:i,top:l});c.pageX=n.pageX,c.pageY=n.pageY,c.ctrlKey=n.ctrlKey,c.metaKey=n.metaKey;var d=function(e,t,n){var a,r,i,l=s.grid.mouseActiveRadius,c=l*l+1,u=null;for(a=o.length-1;a>=0;--a)if(n(o[a])){var d=o[a],p=d.xaxis,h=d.yaxis,f=d.datapoints.points,m=p.c2p(e),g=h.c2p(t),v=l/p.scale,b=l/h.scale;if(i=d.datapoints.pointsize,p.options.inverseTransform&&(v=Number.MAX_VALUE),h.options.inverseTransform&&(b=Number.MAX_VALUE),d.lines.show||d.points.show)for(r=0;r<f.length;r+=i){var y=f[r],w=f[r+1];if(null!=y&&!(y-m>v||y-m<-v||w-g>b||w-g<-b)){var x=Math.abs(p.p2c(y)-e),S=Math.abs(h.p2c(w)-t),k=x*x+S*S;k<c&&(c=k,u=[a,r/i])}}if(d.bars.show&&!u){var C,E;switch(d.bars.align){case"left":C=0;break;case"right":C=-d.bars.barWidth;break;default:C=-d.bars.barWidth/2}for(E=C+d.bars.barWidth,r=0;r<f.length;r+=i){y=f[r],w=f[r+1];var T=f[r+2];null!=y&&(o[a].bars.horizontal?m<=Math.max(T,y)&&m>=Math.min(T,y)&&g>=w+C&&g<=w+E:m>=y+C&&m<=y+E&&g>=Math.min(T,w)&&g<=Math.max(T,w))&&(u=[a,r/i])}}}return u?(a=u[0],r=u[1],i=o[a].datapoints.pointsize,{datapoint:o[a].datapoints.points.slice(r*i,(r+1)*i),dataIndex:r,series:o[a],seriesIndex:a}):null}(i,l,a);if(d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+r.left+m.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+r.top+m.top,10)),s.grid.autoHighlight){for(var p=0;p<j.length;++p){var h=j[p];h.auto!=e||d&&h.series==d.series&&h.point[0]==d.datapoint[0]&&h.point[1]==d.datapoint[1]||Y(h.series,h.point)}d&&W(d.series,d.datapoint,e)}t.trigger(e,[c,d])}function H(){var e=s.interaction.redrawOverlayInterval;-1!=e?U||(U=setTimeout(G,e)):G()}function G(){var e,t;for(U=null,p.save(),c.clear(),p.translate(m.left,m.top),e=0;e<j.length;++e)(t=j[e]).series.bars.show?J(t.series,t.point):X(t.series,t.point);p.restore(),w(b.drawOverlay,[p])}function W(e,t,n){if("number"==typeof e&&(e=o[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var r=K(e,t);-1==r?(j.push({series:e,point:t,auto:n}),H()):n||(j[r].auto=!1)}function Y(e,t){if(null==e&&null==t)return j=[],void H();if("number"==typeof e&&(e=o[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var a=K(e,t);-1!=a&&(j.splice(a,1),H())}function K(e,t){for(var n=0;n<j.length;++n){var a=j[n];if(a.series==e&&a.point[0]==t[0]&&a.point[1]==t[1])return n}return-1}function X(t,n){var a=n[0],r=n[1],i=t.xaxis,o=t.yaxis,s="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(a<i.min||a>i.max||r<o.min||r>o.max)){var l=t.points.radius+t.points.lineWidth/2;p.lineWidth=l,p.strokeStyle=s;var c=1.5*l;a=i.p2c(a),r=o.p2c(r),p.beginPath(),"circle"==t.points.symbol?p.arc(a,r,c,0,2*Math.PI,!1):t.points.symbol(p,a,r,c,!1),p.closePath(),p.stroke()}}function J(t,n){var a,r="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),i=r;switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth,p.strokeStyle=r,R(n[0],n[1],n[2]||0,a,a+t.bars.barWidth,function(){return i},t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function Z(t,n,a,r){if("string"==typeof t)return t;for(var i=d.createLinearGradient(0,a,0,n),o=0,s=t.colors.length;o<s;++o){var l=t.colors[o];if("string"!=typeof l){var c=e.color.parse(r);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}i.addColorStop(o/(s-1),l)}return i}}e.fn.detach||(e.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),n.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var n=this.element,a=this.context,r=this.pixelRatio;this.width!=e&&(n.width=e*r,n.style.width=e+"px",this.width=e),this.height!=t&&(n.height=t*r,n.style.height=t+"px",this.height=t),a.restore(),a.save(),a.scale(r,r)},n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.render=function(){var e=this._textCache;for(var n in e)if(t.call(e,n)){var a=this.getTextLayer(n),r=e[n];for(var i in a.hide(),r)if(t.call(r,i)){var o=r[i];for(var s in o)if(t.call(o,s)){for(var l,c=o[s].positions,u=0;l=c[u];u++)l.active?l.rendered||(a.append(l.element),l.rendered=!0):(c.splice(u--,1),l.rendered&&l.element.detach());0==c.length&&delete o[s]}}a.show()}},n.prototype.getTextLayer=function(t){var n=this.text[t];return null==n&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),n=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),n},n.prototype.getTextInfo=function(t,n,a,r,i){var o,s,l,c;if(n=""+n,o="object"==typeof a?a.style+" "+a.variant+" "+a.weight+" "+a.size+"px/"+a.lineHeight+"px "+a.family:a,null==(s=this._textCache[t])&&(s=this._textCache[t]={}),null==(l=s[o])&&(l=s[o]={}),null==(c=l[n])){var u=e("<div></div>").html(n).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof a?u.css({font:o,color:a.color}):"string"==typeof a&&u.addClass(a),c=l[n]={element:u,positions:[]};var d=this._textSizeCache[n];d?(c.width=d.width,c.height=d.height):(c.width=u.outerWidth(!0),c.height=u.outerHeight(!0),this._textSizeCache[n]={width:c.width,height:c.height}),u.detach()}return c},n.prototype.addText=function(e,t,n,a,r,i,o,s,l){var c=this.getTextInfo(e,a,r,i,o),u=c.positions;"center"==s?t-=c.width/2:"right"==s&&(t-=c.width),"middle"==l?n-=c.height/2:"bottom"==l&&(n-=c.height);for(var d,p=0;d=u[p];p++)if(d.x==t&&d.y==n)return void(d.active=!0);d={active:!0,rendered:!1,element:u.length?c.element.clone():c.element,x:t,y:n},u.push(d),d.element.css({top:Math.round(n),left:Math.round(t),"text-align":s})},n.prototype.removeText=function(e,n,a,r,i,o){if(null==r){var s=this._textCache[e];if(null!=s)for(var l in s)if(t.call(s,l)){var c=s[l];for(var u in c)if(t.call(c,u))for(var d=c[u].positions,p=0;h=d[p];p++)h.active=!1}}else{var h;for(d=this.getTextInfo(e,r,i,o).positions,p=0;h=d[p];p++)h.x==n&&h.y==a&&(h.active=!1)}},e.plot=function(t,n,r){return new a(e(t),n,r,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,n){return this.each(function(){e.plot(this,t,n)})}}(jQuery)},,,,,,,,,,,,function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),function(e){e.UpdateNavIndex="UPDATE_NAV_INDEX"}(a||(a={}));var r=function(e){return{type:a.UpdateNavIndex,payload:e}}},,function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(13),s=n.n(o),l=n(9),c=function(e){var t=e.main,n=e.customCss,a=t.children.find(function(e){return!0===e.active});return i.a.createElement("div",{className:"gf-form-select-wrapper width-20 "+n},i.a.createElement("label",{className:"gf-form-select-icon "+a.icon,htmlFor:"page-header-select-nav"}),i.a.createElement("select",{className:"gf-select-nav gf-form-input",value:a.url,onChange:function(e){var t=e.target,n=t.options[t.selectedIndex].value;l.b.emit("location-change",{href:n})},id:"page-header-select-nav"},t.children.map(function(e){return e.hideFromTabs?null:i.a.createElement("option",{key:e.url,value:e.url},e.text)})))},u=function(e){var t=e.main,n=e.customCss;return i.a.createElement("ul",{className:"gf-tabs "+n},t.children.map(function(e,t){if(e.hideFromTabs)return null;var n=s()({"gf-tabs-link":!0,active:e.active});return i.a.createElement("li",{className:"gf-tabs-item",key:e.url},i.a.createElement("a",{className:n,target:e.target,href:e.url},i.a.createElement("i",{className:e.icon}),e.text))}))},d=function(e){var t=e.main;return i.a.createElement("nav",null,i.a.createElement(c,{customCss:"page-header__select-nav",main:t}),i.a.createElement(u,{customCss:"page-header__tabs",main:t}))},p=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.shouldComponentUpdate=function(){return!0},t.prototype.renderTitle=function(e,t){if(!(e||t&&0!==t.length))return null;if(!t||0===t.length)return i.a.createElement("h1",{className:"page-header__title"},e);for(var n=[],a=0;a<t.length;a++){var r=t[a];r.url?n.push(i.a.createElement("a",{className:"text-link",key:a,href:r.url},r.title)):n.push(i.a.createElement("span",{key:a}," / ",r.title))}return n.push(i.a.createElement("span",{key:t.length+1}," / ",e)),i.a.createElement("h1",{className:"page-header__title"},n)},t.prototype.renderHeaderTitle=function(e){return i.a.createElement("div",{className:"page-header__inner"},i.a.createElement("span",{className:"page-header__logo"},e.icon&&i.a.createElement("i",{className:"page-header__icon "+e.icon}),e.img&&i.a.createElement("img",{className:"page-header__img",src:e.img})),i.a.createElement("div",{className:"page-header__info-block"},this.renderTitle(e.text,e.breadcrumbs),e.subTitle&&i.a.createElement("div",{className:"page-header__sub-title"},e.subTitle),e.subType&&i.a.createElement("div",{className:"page-header__stamps"},i.a.createElement("i",{className:e.subType.icon}),e.subType.text)))},t.prototype.render=function(){var e=this.props.model;if(!e)return null;var t=e.main;return i.a.createElement("div",{className:"page-header-canvas"},i.a.createElement("div",{className:"page-container"},i.a.createElement("div",{className:"page-header"},this.renderHeaderTitle(t),t.children&&i.a.createElement(d,{main:t}))))},t}(i.a.Component);t.a=p},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e,t,n,a){for(var r in n)n.hasOwnProperty(r)&&(e[r]=void 0===t[r]?n[r]:t[r])}n.d(t,"a",function(){return a})},,,,,,,,,,,,function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),function(e){e.UpdateLocation="UPDATE_LOCATION"}(a||(a={}));var r=function(e){return{type:a.UpdateLocation,payload:e}}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(8),r=n.n(a),i=n(1),o=n.n(i),s=n(19),l=function(){function e(e,t){this.templateSrv=e,this.timeSrv=t}return e.$inject=["templateSrv","timeSrv"],e.prototype.getLinkUrl=function(e){var t=this.templateSrv.replace(e.url||""),n={};if(e.keepTime){var a=this.timeSrv.timeRangeForUrl();n.from=a.from,n.to=a.to}return e.includeVars&&this.templateSrv.fillVariableValuesForUrl(n),this.addParamsToUrl(t,n)},e.prototype.addParamsToUrl=function(e,t){var n=[];return o.a.each(t,function(e,t){null!==e&&(!0===e?n.push(t):o.a.isArray(e)?o.a.each(e,function(e){n.push(t+"="+encodeURIComponent(e))}):n.push(t+"="+encodeURIComponent(e)))}),0===n.length?e:this.appendToQueryString(e,n.join("&"))},e.prototype.appendToQueryString=function(e,t){if(!o.a.isUndefined(t)&&null!==t&&""!==t){var n=e.indexOf("?");-1!==n?e.length-n>1&&(e+="&"):e+="?",e+=t}return e},e.prototype.getAnchorInfo=function(e){var t={};return t.href=this.getLinkUrl(e),t.title=this.templateSrv.replace(e.title||""),t},e.prototype.getPanelLinkAnchorInfo=function(e,t){var n={};if(n.target=e.targetBlank?"_blank":"","absolute"===e.type)n.target=e.targetBlank?"_blank":"_self",n.href=this.templateSrv.replace(e.url||"",t),n.title=this.templateSrv.replace(e.title||"",t);else if(e.url)n.href=e.url,n.title=this.templateSrv.replace(e.title||"",t);else if(e.dashUri)n.href="dashboard/"+e.dashUri+"?",n.title=this.templateSrv.replace(e.title||"",t);else{n.title=this.templateSrv.replace(e.title||"",t);var a=s.a.slugifyForUrl(e.dashboard||"");n.href="dashboard/db/"+a+"?"}var r={};if(e.keepTime){var i=this.timeSrv.timeRangeForUrl();r.from=i.from,r.to=i.to}return e.includeVars&&this.templateSrv.fillVariableValuesForUrl(r,t),n.href=this.addParamsToUrl(n.href,r),e.params&&(n.href=this.appendToQueryString(n.href,this.templateSrv.replace(e.params,t))),n},e}();r.a.module("grafana.services").service("linkSrv",l)},,function(e,t,n){"use strict";var a,r=n(2),i=n(59),o=n.n(i),s={name:"Grafana Default",typography:{fontFamily:{sansSerif:"'Roboto', Helvetica, Arial, sans-serif;",serif:"Georgia, 'Times New Roman', Times, serif;",monospace:"Menlo, Monaco, Consolas, 'Courier New', monospace;"},size:{base:"13px",xs:"10px",s:"12px",m:"14px",l:"18px"},heading:{h1:"2rem",h2:"1.75rem",h3:"1.5rem",h4:"1.3rem",h5:"1.2rem",h6:"1rem"},weight:{light:300,normal:400,semibold:500},lineHeight:{xs:1,s:1.1,m:4/3,l:1.5}},brakpoints:{xs:"0",s:"544px",m:"768px",l:"992px",xl:"1200px"},spacing:{xs:"0",s:"0.2rem",m:"1rem",l:"1.5rem",xl:"3rem",gutter:"30px"},border:{radius:{xs:"2px",s:"3px",m:"5px"}}},l=n(129),c={black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#1f1f20",dark3:"#262628",dark4:"#333333",dark5:"#444444",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",grayBlue:"#212327",blue:"#33b5e5",blueDark:"#005f81",blueLight:"#00a8e6",green:"#299c46",red:"#d44a3a",yellow:"#ecbb13",pink:"#ff4444",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18"},u=r.a({},s,{type:l.a.Dark,name:"Grafana Dark",colors:r.a({},c,{inputBlack:"#09090b",queryRed:"#e24d42",queryGreen:"#74e680",queryPurple:"#fe85fc",queryKeyword:"#66d9ef",queryOrange:"eb7b18",online:"#10a345",warn:"#f79520",critical:"#ed2e18",bodyBg:"#171819",pageBg:"#161719",bodyColor:c.gray4,textColor:c.gray4,textColorStrong:c.white,textColorWeak:c.gray2,textColorEmphasis:c.gray5,textColorFaint:c.dark5,linkColor:new o.a(c.white).darken(11).toString(),linkColorDisabled:new o.a(c.white).darken(11).toString(),linkColorHover:c.white,linkColorExternal:c.blue,headingColor:new o.a(c.white).darken(11).toString()}),background:{dropdown:c.dark3,scrollbar:"#aeb5df",scrollbar2:"#3a3a3a"}}),d={black:"#000000",white:"#ffffff",dark1:"#13161d",dark2:"#1e2028",dark3:"#303133",dark4:"#35373f",dark5:"#41444b",gray1:"#52545c",gray2:"#767980",gray3:"#acb6bf",gray4:"#c7d0d9",gray5:"#dde4ed",gray6:"#e9edf2",gray7:"#f7f8fa",grayBlue:"#212327",blue:"#0083b3",blueDark:"#005f81",blueLight:"#00a8e6",green:"#3aa655",red:"#d44939",yellow:"#ff851b",pink:"#e671b8",purple:"#9954bb",variable:"#0083b3",orange:"#ff7941"},p=r.a({},s,{type:l.a.Light,name:"Grafana Light",colors:r.a({},d,{variable:d.blue,inputBlack:"#09090b",queryRed:d.red,queryGreen:d.green,queryPurple:d.purple,queryKeyword:d.blue,queryOrange:d.orange,online:"#01a64f",warn:"#f79520",critical:"#ec2128",bodyBg:d.gray7,pageBg:d.gray7,bodyColor:d.gray1,textColor:d.gray1,textColorStrong:d.dark2,textColorWeak:d.gray2,textColorEmphasis:d.gray5,textColorFaint:d.dark4,linkColor:d.gray1,linkColorDisabled:new o.a(d.gray1).lighten(30).toString(),linkColorHover:new o.a(d.gray1).darken(20).toString(),linkColorExternal:d.blueLight,headingColor:d.gray1}),background:{dropdown:d.white,scrollbar:d.gray5,scrollbar2:d.gray5}});n.d(t,"a",function(){return h}),n.d(t,"b",function(){return f});var h=function(e){return a&&a(e)||("light"===e?p:u)},f=function(e){return a=e,function(){a=null}}},,,,,function(e,t,n){"use strict";var a=["#E24D42","#1F78C1","#BA43A9","#705DA0","#466803","#508642","#447EBC","#C15C17","#890F02","#757575","#0A437C","#6D1F62","#584477","#629E51","#2F4F4F","#BF1B00","#806EB7","#8a2eb8","#699e00","#000000","#3F6833","#2F575E","#99440A","#E0752D","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],r=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];t.a={getTagColorsFromName:function(e){var t=function(e){for(var t=5381,n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}(e.toLowerCase());return{color:a[Math.abs(t%a.length)],borderColor:r[Math.abs(t%r.length)]}}}},function(e,t,n){"use strict";function a(e){return Array.from(new Array(e+1),function(e,t){return t}).filter(function(t){return e%t==0})}n.d(t,"a",function(){return a})},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),r=n.n(a),i=n(37);var o=function(e){var t=e.title,n=e.icon,a=e.text,o=e.severity,s=e.onClose;return r.a.createElement("div",{className:"alert alert-"+o},r.a.createElement("div",{className:"alert-icon"},r.a.createElement("i",{className:n||function(e){switch(e){case i.AppNotificationSeverity.Error:return"fa fa-exclamation-triangle";case i.AppNotificationSeverity.Success:return"fa fa-check";default:return null}}(o)})),r.a.createElement("div",{className:"alert-body"},r.a.createElement("div",{className:"alert-title"},t),a&&r.a.createElement("div",{className:"alert-text"},a)),s&&r.a.createElement("button",{type:"button",className:"alert-close",onClick:s},r.a.createElement("i",{className:"fa fa fa-remove"})))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(1),r=n.n(a);function i(e){return e&&!r.a.isString(e)?e.message?e.message:e.data&&e.data.message?e.data.message:e.statusText?e.statusText:JSON.stringify(e):null}},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(2),r=n(0),i=n.n(r),o=n(1),s=n.n(o),l=n(6),c=n(14),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!1},n.search=n.search.bind(n),n.debouncedSearch=Object(o.debounce)(n.search,300,{leading:!0,trailing:!0}),n}return a.c(t,e),t.prototype.search=function(e){var t=this,n=Object(c.a)();return this.setState({isLoading:!0}),s.a.isNil(e)&&(e=""),n.get("/api/org/users?query="+e+"&limit=10").then(function(e){return e.map(function(e){return{id:e.userId,value:e.userId,label:e.login===e.email?e.login:e.login+" - "+e.email,imgUrl:e.avatarUrl,login:e.login}})}).finally(function(){t.setState({isLoading:!1})})},t.prototype.render=function(){var e=this.props,t=e.className,n=e.onSelected,a=this.state.isLoading;return i.a.createElement("div",{className:"user-picker"},i.a.createElement(l.AsyncSelect,{className:t,isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:n,placeholder:"Select user",noOptionsMessage:function(){return"No users found"}}))},t}(r.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=n(7);function r(e){var t={img:e.avatarUrl,id:"team-"+e.id,subTitle:"Manage members & settings",url:"",text:e.name,breadcrumbs:[{title:"Teams",url:"org/teams"}],children:[{active:!1,icon:"gicon gicon-team",id:"team-members-"+e.id,text:"Members",url:"org/teams/edit/"+e.id+"/members"},{active:!1,icon:"fa fa-fw fa-sliders",id:"team-settings-"+e.id,text:"Settings",url:"org/teams/edit/"+e.id+"/settings"}]};return a.a.buildInfo.isEnterprise&&t.children.push({active:!1,icon:"fa fa-fw fa-refresh",id:"team-groupsync-"+e.id,text:"External group sync",url:"org/teams/edit/"+e.id+"/groupsync"}),t}function i(e){for(var t,n=r({avatarUrl:"public/img/user_profile.png",id:1,name:"Loading",email:"loading",memberCount:0}),a=0,i=n.children;a<i.length;a++){var o=i[a];if(o.id.indexOf(e)>0){o.active=!0,t=o;break}}return{main:n,node:t}}},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(112),s=n(75),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.searchQuery,n=e.layoutMode,r=e.onSetLayoutMode,l=e.linkButton,c=e.setSearchQuery,u=e.target,d={href:l.href,target:void 0};return u&&(d.target=u),i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(s.a,{labelClassName:"gf-form--has-input-icon",inputClassName:"gf-form-input width-20",value:t,onChange:c,placeholder:"Filter by name or type"}),i.a.createElement(o.b,{mode:n,onLayoutModeChanged:function(e){return r(e)}})),i.a.createElement("div",{className:"page-action-bar__spacer"}),i.a.createElement("a",a.a({className:"btn btn-primary"},d),l.title))},t}(r.PureComponent);t.a=l},function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(){return r.a.createElement("div",{className:""},r.a.createElement("h5",null,"What are Permissions?"),r.a.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=n(7);function r(e,t){var n={img:t.info.logos.large,id:"datasource-"+e.id,subTitle:"Type: "+t.name,url:"",text:e.name,breadcrumbs:[{title:"Data Sources",url:"datasources"}],children:[{active:!1,icon:"fa fa-fw fa-sliders",id:"datasource-settings-"+e.id,text:"Settings",url:"datasources/edit/"+e.id}]};return t.includes&&function(e){return e.filter(function(e){return"dashboard"===e.type}).length>0}(t.includes)&&n.children.push({active:!1,icon:"fa fa-fw fa-th-large",id:"datasource-dashboards-"+e.id,text:"Dashboards",url:"datasources/edit/"+e.id+"/dashboards"}),a.a.buildInfo.isEnterprise&&n.children.push({active:!1,icon:"fa fa-fw fa-lock",id:"datasource-permissions-"+e.id,text:"Permissions",url:"datasources/edit/"+e.id+"/permissions"}),n}function i(e){for(var t,n=r({access:"",basicAuth:!1,basicAuthUser:"",basicAuthPassword:"",withCredentials:!1,database:"",id:1,isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,password:"",readOnly:!1,type:"Loading",typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:""},{id:"1",name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[{type:"",name:"",path:""}]}),a=0,i=n.children;a<i.length;a++){var o=i[a];if(o.id.indexOf(e)>0){o.active=!0,t=o;break}}return{main:n,node:t}}},,function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(2),r=n(120),i=n(14),o=n(27),s=n(58),l=n(54),c=n(37),u=n(133);function d(e,t,n){return a.b(this,void 0,Promise,function(){var r,u,d,p,h;return a.d(this,function(f){switch(f.label){case 0:switch(f.trys.push([0,8,,9]),e.routeInfo){case c.DashboardRouteInfo.Home:return[3,1];case c.DashboardRouteInfo.Normal:return[3,3];case c.DashboardRouteInfo.New:return[3,5]}return[3,6];case 1:return[4,Object(i.a)().get("/api/dashboards/home")];case 2:return(u=f.sent()).redirectUri?(r=s.a.stripBaseFromUrl(u.redirectUri),t(Object(o.c)({path:r,replace:!0})),[2,null]):(u.meta.canSave=!1,u.meta.canShare=!1,u.meta.canStar=!1,[2,u]);case 3:return"db"===e.urlType?(function(e,t,n){a.b(this,void 0,void 0,function(){var r,l,c;return a.d(this,function(a){switch(a.label){case 0:return[4,Object(i.a)().getDashboardBySlug(e)];case 1:return(r=a.sent())&&(l=r.meta.url,-1!==n.indexOf("dashboard-solo")&&(l=l.replace("/d/","/d-solo/")),c=s.a.stripBaseFromUrl(l),t(Object(o.c)({path:c,partial:!0,replace:!0}))),[2]}})})}(e.urlSlug,t,n().location.path),[2,null]):[4,e.$injector.get("dashboardLoaderSrv").loadDashboard(e.urlType,e.urlSlug,e.urlUid)];case 4:return u=f.sent(),e.fixUrl&&u.meta.url&&(d=s.a.stripBaseFromUrl(u.meta.url),p=n().location.path,d!==p)?(t(Object(o.c)({path:d,partial:!0,replace:!0})),[2,null]):[2,u];case 5:return[2,function(e){var t={meta:{canStar:!1,canShare:!1,isNew:!0,folderId:0},dashboard:{title:"New dashboard",panels:[{type:"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}]}};e&&(t.meta.folderId=parseInt(e,10));return t}(e.urlFolderId)];case 6:throw{message:"Unknown route "+e.routeInfo};case 7:return[3,9];case 8:return h=f.sent(),t(Object(l.d)({message:"Failed to fetch dashboard",error:h})),console.log(h),[2,null];case 9:return[2]}})})}function p(e){var t=this;return function(n,i){return a.b(t,void 0,void 0,function(){var t,s,c,p,h,f,m,g,v,b,y;return a.d(this,function(a){switch(a.label){case 0:return n(Object(l.e)()),setTimeout(function(){null===i().dashboard.model&&n(Object(l.g)())},500),[4,d(e,n,i)];case 1:if(!(t=a.sent()))return[2];n(Object(l.f)());try{s=new u.a(t.dashboard,t.meta)}catch(e){return n(Object(l.d)({message:"Failed create dashboard model",error:e})),console.log(e),[2]}(c=i()).location.query.orgId||n(Object(o.c)({query:{orgId:c.user.orgId},partial:!0,replace:!0})),p=e.$injector.get("timeSrv"),h=e.$injector.get("annotationsSrv"),f=e.$injector.get("variableSrv"),m=e.$injector.get("keybindingSrv"),g=e.$injector.get("unsavedChangesSrv"),v=e.$injector.get("dashboardSrv"),p.init(s),h.init(s),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,f.init(s)];case 3:return a.sent(),[3,5];case 4:return b=a.sent(),n(Object(o.b)(Object(r.a)("Templating init failed",b))),console.log(b),[3,5];case 5:try{s.processRepeats(),s.updateSubmenuVisibility(),(y=i().location.query).autofitpanels&&s.autoFitPanels(window.innerHeight,y.kiosk),g.init(s,e.$scope),m.setupDashboardBindings(e.$scope,s)}catch(e){n(Object(o.b)(Object(r.a)("Dashboard init failed",e))),console.log(e)}return v.setCurrent(s),n(Object(l.c)(s)),[2]}})})}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(716),l=n.n(s),c=n(13),u=n.n(c),d=n(717),p=n.n(d),h=n(31),f=n(292),m=1200,g=!1;var v=p()({monitorWidth:!0})(function(e){var t=e.size,n=e.layout,a=e.onLayoutChange,r=e.children,o=e.onDragStop,s=e.onResize,c=e.onResizeStop,u=e.onWidthChange,d=e.className,p=e.isResizable,f=e.isDraggable,v=e.isFullscreen,b=t.width>0?t.width:m;return b!==m&&(g?g=!1:!v&&Math.abs(b-m)>8&&(u(),m=b)),i.a.createElement(l.a,{width:m,className:d,isDraggable:f,isResizable:p,containerPadding:[0,0],useCSSTransforms:!1,margin:[h.d,h.d],cols:h.e,rowHeight:h.c,draggableHandle:".grid-drag-handle",layout:n,onResize:s,onResizeStop:c,onDragStop:o,onLayoutChange:a},r)}),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLayoutChange=function(e){for(var n=0,a=e;n<a.length;n++){var r=a[n];t.panelMap[r.i].updateGridPos(r)}t.props.dashboard.sortPanelsByGridPos()},t.triggerForceUpdate=function(){t.forceUpdate()},t.onWidthChange=function(){for(var e=0,n=t.props.dashboard.panels;e<n.length;e++){n[e].resizeDone()}},t.onViewModeChanged=function(){g=!0},t.updateGridPos=function(e,n){t.panelMap[e.i].updateGridPos(e),t.onLayoutChange(n)},t.onResize=function(e,n,a){console.log(),t.panelMap[a.i].updateGridPos(a)},t.onResizeStop=function(e,n,a){t.updateGridPos(a,e),t.panelMap[a.i].resizeDone()},t.onDragStop=function(e,n,a){t.updateGridPos(a,e)},t}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this.props.dashboard;e.on("panel-added",this.triggerForceUpdate),e.on("panel-removed",this.triggerForceUpdate),e.on("repeats-processed",this.triggerForceUpdate),e.on("view-mode-changed",this.onViewModeChanged),e.on("row-collapsed",this.triggerForceUpdate),e.on("row-expanded",this.triggerForceUpdate)},t.prototype.componentWillUnmount=function(){var e=this.props.dashboard;e.off("panel-added",this.triggerForceUpdate),e.off("panel-removed",this.triggerForceUpdate),e.off("repeats-processed",this.triggerForceUpdate),e.off("view-mode-changed",this.onViewModeChanged),e.off("row-collapsed",this.triggerForceUpdate),e.off("row-expanded",this.triggerForceUpdate)},t.prototype.buildLayout=function(){var e=[];this.panelMap={};for(var t=0,n=this.props.dashboard.panels;t<n.length;t++){var a=n[t],r=a.id.toString();if(this.panelMap[r]=a,a.gridPos){var i={i:r,x:a.gridPos.x,y:a.gridPos.y,w:a.gridPos.w,h:a.gridPos.h};"row"===a.type&&(i.w=h.e,i.h=1,i.isResizable=!1,i.isDraggable=a.collapsed),e.push(i)}else console.log("panel without gridpos")}return e},t.prototype.renderPanels=function(){for(var e=[],t=0,n=this.props.dashboard.panels;t<n.length;t++){var a=n[t],r=u()({"react-grid-item--fullscreen":a.fullscreen});e.push(i.a.createElement("div",{key:a.id.toString(),className:r,id:"panel-"+a.id},i.a.createElement(f.a,{panel:a,dashboard:this.props.dashboard,isEditing:a.isEditing,isFullscreen:a.fullscreen})))}return e},t.prototype.render=function(){var e=this.props,t=e.dashboard,n=e.isFullscreen;return i.a.createElement(v,{className:u()({layout:!0}),layout:this.buildLayout(),isResizable:t.meta.canEdit,isDraggable:t.meta.canEdit,onLayoutChange:this.onLayoutChange,onWidthChange:this.onWidthChange,onDragStop:this.onDragStop,onResize:this.onResize,onResizeStop:this.onResizeStop,isFullscreen:n},this.renderPanels())},t}(r.PureComponent);t.b=Object(o.hot)(e)(b)}).call(this,n(74)(e))},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(7),s=n(13),l=n.n(s),c=n(62),u=n(113),d=n(1),p=n.n(d),h=n(52),f=n(63),m=n(27),g=n(31),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onCreateNewPanel=function(e){void 0===e&&(e="queries");var t=n.props.dashboard,a=n.props.panel.gridPos,r={type:"graph",title:"Panel Title",gridPos:{x:a.x,y:a.y,w:a.w,h:a.h}};t.addPanel(r),t.removePanel(n.props.panel);var i={query:{panelId:r.id,edit:!0,fullscreen:!0},partial:!0};"visualization"===e&&(i.query.tab="visualization",i.query.openVizPicker=!0),f.b.dispatch(Object(m.c)(i))},n.onPasteCopiedPanel=function(e){var t=n.props.dashboard,a=n.props.panel.gridPos,r={type:e.id,title:"Panel Title",gridPos:{x:a.x,y:a.y,w:a.w,h:a.h}};e.defaults&&(p.a.defaults(r,e.defaults),r.title=e.defaults.title,h.a.delete(g.f)),t.addPanel(r),t.removePanel(n.props.panel)},n.onCreateNewRow=function(){var e=n.props.dashboard;e.addPanel({type:"row",title:"Row title",gridPos:{x:0,y:0}}),e.removePanel(n.props.panel)},n.renderOptionLink=function(e,t,n){return i.a.createElement("div",null,i.a.createElement("a",{href:"#",onClick:n,className:"add-panel-widget__link btn btn-inverse"},i.a.createElement("div",{className:"add-panel-widget__icon"},i.a.createElement("i",{className:"gicon gicon-"+e})),i.a.createElement("span",null,t)))},n.handleCloseAddPanel=n.handleCloseAddPanel.bind(n),n.state={copiedPanelPlugins:n.getCopiedPanelPlugins()},n}return a.c(t,e),t.prototype.getCopiedPanelPlugins=function(){var e=p.a.chain(o.a.panels).filter({hideFromList:!1}).map(function(e){return e}).value(),t=[],n=h.a.get(g.f);if(n){var a=JSON.parse(n),r=p.a.find(e,{id:a.type});if(r){var i=p.a.cloneDeep(r);i.name=a.title,i.sort=-1,i.defaults=a,t.push(i)}}return p.a.sortBy(t,"sort")},t.prototype.handleCloseAddPanel=function(e){e.preventDefault(),this.props.dashboard.removePanel(this.props.dashboard.panels[0])},t.prototype.render=function(){var e=this,t=this.state.copiedPanelPlugins;return i.a.createElement("div",{className:"panel-container add-panel-widget-container"},i.a.createElement("div",{className:"add-panel-widget"},i.a.createElement("div",{className:"add-panel-widget__header grid-drag-handle"},i.a.createElement("i",{className:"gicon gicon-add-panel"}),i.a.createElement("span",{className:"add-panel-widget__title"},"New Panel"),i.a.createElement("button",{className:"add-panel-widget__close",onClick:this.handleCloseAddPanel},i.a.createElement("i",{className:"fa fa-close"}))),i.a.createElement("div",{className:"add-panel-widget__btn-container"},i.a.createElement("div",{className:"add-panel-widget__create"},this.renderOptionLink("queries","Add Query",this.onCreateNewPanel),this.renderOptionLink("visualization","Choose Visualization",function(){return e.onCreateNewPanel("visualization")})),i.a.createElement("div",{className:"add-panel-widget__actions"},i.a.createElement("button",{className:"btn btn-inverse add-panel-widget__action",onClick:this.onCreateNewRow},"Convert to row"),1===t.length&&i.a.createElement("button",{className:"btn btn-inverse add-panel-widget__action",onClick:function(){return e.onPasteCopiedPanel(t[0])}},"Paste copied panel")))))},t}(i.a.Component),b=n(6),y=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.render=function(){return i.a.createElement("div",{style:{display:"flex",alignItems:"center",textAlign:"center",height:"100%"}},i.a.createElement("div",{className:"alert alert-error",style:{margin:"0 auto"}},"Panel plugin with id ",this.props.pluginId," could not be found"))},t}(r.PureComponent);function w(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a.c(n,t),n.prototype.render=function(){return i.a.createElement(y,{pluginId:e})},n}(r.PureComponent);return{id:e,name:e,sort:100,module:"",baseUrl:"",dataFormats:[],info:{author:{name:""},description:"",links:[],logos:{large:"",small:""},screenshots:[],updated:"",version:""},exports:{reactPanel:new b.ReactPanelPlugin(t)}}}var x,S=n(93),k=n(9),C=function(e){function t(t){var n=e.call(this,t)||this;return n.onVariableUpdated=function(){n.forceUpdate()},n.onToggle=function(){n.props.dashboard.toggleRow(n.props.panel),n.setState(function(e){return{collapsed:!e.collapsed}})},n.onUpdate=function(){n.props.dashboard.processRepeats(),n.forceUpdate()},n.onOpenSettings=function(){k.b.emit("show-modal",{templateHtml:'<row-options row="model.row" on-updated="model.onUpdated()" dismiss="dismiss()"></row-options>',modalClass:"modal--narrow",model:{row:n.props.panel,onUpdated:n.onUpdate}})},n.onDelete=function(){k.b.emit("confirm-modal",{title:"Delete Row",text:"Are you sure you want to remove this row and all its panels?",altActionText:"Delete row only",icon:"fa-trash",onConfirm:function(){n.props.dashboard.removeRow(n.props.panel,!0)},onAltAction:function(){n.props.dashboard.removeRow(n.props.panel,!1)}})},n.state={collapsed:n.props.panel.collapsed},n.props.dashboard.on("template-variable-value-updated",n.onVariableUpdated),n}return a.c(t,e),t.prototype.componentWillUnmount=function(){this.props.dashboard.off("template-variable-value-updated",this.onVariableUpdated)},t.prototype.render=function(){var e=l()({"dashboard-row":!0,"dashboard-row--collapsed":this.state.collapsed}),t=l()({fa:!0,"fa-chevron-down":!this.state.collapsed,"fa-chevron-right":this.state.collapsed}),n=S.a.replaceWithText(this.props.panel.title,this.props.panel.scopedVars),a=this.props.panel.panels?this.props.panel.panels.length:0,r=1===a?"panel":"panels",o=!0===this.props.dashboard.meta.canEdit;return i.a.createElement("div",{className:e},i.a.createElement("a",{className:"dashboard-row__title pointer",onClick:this.onToggle},i.a.createElement("i",{className:t}),n,i.a.createElement("span",{className:"dashboard-row__panel_count"},"(",a," ",r,")")),o&&i.a.createElement("div",{className:"dashboard-row__actions"},i.a.createElement("a",{className:"pointer",onClick:this.onOpenSettings},i.a.createElement("i",{className:"fa fa-cog"})),i.a.createElement("a",{className:"pointer",onClick:this.onDelete},i.a.createElement("i",{className:"fa fa-trash"}))),!0===this.state.collapsed&&i.a.createElement("div",{className:"dashboard-row__toggle-target",onClick:this.onToggle}," "),o&&i.a.createElement("div",{className:"dashboard-row__drag grid-drag-handle"}))},t}(i.a.Component),E=n(666),T=n(140),M=n(111),_=n.n(M),A=n(269);!function(e){e.Error="Error",e.Info="Info",e.Links="Links"}(x||(x={}));var D,N,P,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeSrv=Object(T.a)(),t.getInfoMode=function(){var e=t.props,n=e.panel;return e.error?x.Error:n.description?x.Info:n.links&&n.links.length?x.Links:void 0},t.getInfoContent=function(){var e=t.props.panel,n=e.description,a=new A.a(S.a,t.timeSrv),r=S.a.replace(n,e.scopedVars),o=(new _.a).render(r);return i.a.createElement("div",{className:"markdown-html"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),e.links&&e.links.length>0&&i.a.createElement("ul",{className:"text-left"},e.links.map(function(t,n){var r=a.getPanelLinkAnchorInfo(t,e.scopedVars);return i.a.createElement("li",{key:n},i.a.createElement("a",{className:"panel-menu-link",href:r.href,target:r.target},r.title))})))},t}return a.c(t,e),t.prototype.renderCornerType=function(e,t){var n=e===x.Error?"error":"info";return i.a.createElement(b.Tooltip,{content:t,placement:"bottom-start",theme:n},i.a.createElement("div",{className:"panel-info-corner panel-info-corner--"+e.toLowerCase()},i.a.createElement("i",{className:"fa"}),i.a.createElement("span",{className:"panel-info-corner-inner"})))},t.prototype.render=function(){var e=this.getInfoMode();return e?e===x.Error?this.renderCornerType(e,this.props.error):e===x.Info?this.renderCornerType(e,this.getInfoContent()):null:null},t}(r.Component),I=function(e){var t="submenu"===e.type;return"divider"===e.type?i.a.createElement("li",{className:"divider"}):i.a.createElement("li",{className:t?"dropdown-submenu":null},i.a.createElement("a",{onClick:e.onClick},e.iconClassName&&i.a.createElement("i",{className:e.iconClassName}),i.a.createElement("span",{className:"dropdown-item-text"},e.text),e.shortcut&&i.a.createElement("span",{className:"dropdown-menu-item-shortcut"},e.shortcut)),e.children)},$=n(68),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItems=function(e,n){return void 0===n&&(n=!1),i.a.createElement("ul",{className:"dropdown-menu dropdown-menu--menu panel-menu",role:n?"":"menu"},e.map(function(e,n){return i.a.createElement(I,{key:""+e.text+n,type:e.type,text:e.text,iconClassName:e.iconClassName,onClick:e.onClick,shortcut:e.shortcut},e.subMenu&&t.renderItems(e.subMenu,!0))}))},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=function(e,t){var n=[];n.push({text:"View",iconClassName:"fa fa-fw fa-eye",onClick:function(){f.b.dispatch(Object(m.c)({query:{panelId:t.id,edit:null,fullscreen:!0},partial:!0}))},shortcut:"v"}),e.meta.canEdit&&n.push({text:"Edit",iconClassName:"fa fa-fw fa-edit",onClick:function(){f.b.dispatch(Object(m.c)({query:{panelId:t.id,edit:!0,fullscreen:!0},partial:!0}))},shortcut:"e"}),n.push({text:"Share",iconClassName:"fa fa-fw fa-share",onClick:function(){Object($.g)(e,t)},shortcut:"p s"});var a=[];return!t.fullscreen&&e.meta.canEdit&&(a.push({text:"Duplicate",onClick:function(){Object($.c)(e,t)},shortcut:"p d"}),a.push({text:"Copy",onClick:function(){Object($.b)(t)}})),a.push({text:"Panel JSON",onClick:function(){Object($.d)(e,t)}}),n.push({type:"submenu",text:"More...",iconClassName:"fa fa-fw fa-cube",subMenu:a}),e.meta.canEdit&&(n.push({type:"divider"}),n.push({text:"Remove",iconClassName:"fa fa-fw fa-trash",onClick:function(){Object($.f)(e,t,!0)},shortcut:"p r"})),n}(e.dashboard,e.panel);return i.a.createElement("div",{className:"panel-menu-container dropdown open"},this.renderItems(t))},t}(r.PureComponent),q=n(660),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clickCoordinates={x:0,y:0},t.state={panelMenuOpen:!1,clickCoordinates:{x:0,y:0}},t.eventToClickCoordinates=function(e){return{x:e.clientX,y:e.clientY}},t.onMouseDown=function(e){t.clickCoordinates=t.eventToClickCoordinates(e)},t.isClick=function(e){return Object(d.isEqual)(e,t.clickCoordinates)},t.onMenuToggle=function(e){t.isClick(t.eventToClickCoordinates(e))&&(e.stopPropagation(),t.setState(function(e){return{panelMenuOpen:!e.panelMenuOpen}}))},t.closeMenu=function(){t.setState({panelMenuOpen:!1})},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.panel,n=e.dashboard,a=e.timeInfo,r=e.scopedVars,o=e.error,s=e.isFullscreen,c=l()({"panel-header":!0,"grid-drag-handle":!s}),u=S.a.replaceWithText(t.title,r);return i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{panel:t,title:t.title,description:t.description,scopedVars:t.scopedVars,links:t.links,error:o}),i.a.createElement("div",{className:c},i.a.createElement("div",{className:"panel-title-container",onClick:this.onMenuToggle,onMouseDown:this.onMouseDown},i.a.createElement("div",{className:"panel-title"},i.a.createElement("span",{className:"icon-gf panel-alert-icon"}),i.a.createElement("span",{className:"panel-title-text"},u," ",i.a.createElement("span",{className:"fa fa-caret-down panel-menu-toggle"})),this.state.panelMenuOpen&&i.a.createElement(q.a,{onClick:this.closeMenu},i.a.createElement(F,{panel:t,dashboard:n})),a&&i.a.createElement("span",{className:"panel-time-info"},i.a.createElement("i",{className:"fa fa-clock-o"})," ",a)))))},t}(r.Component),L=n(102),j=n(19),U=function(e){function t(t){var n=e.call(this,t)||this;return n.dataSourceSrv=Object(L.a)(),n.isUnmounted=!1,n.issueQueries=function(){return a.b(n,void 0,void 0,function(){var e,t,n,r,i,o,s,l,c,u,d,p,h,f,m,g,v,y;return a.d(this,function(a){switch(a.label){case 0:if(e=this.props,t=e.isVisible,n=e.queries,r=e.datasource,i=e.panelId,o=e.dashboardId,s=e.timeRange,l=e.widthPixels,c=e.maxDataPoints,u=e.onDataResponse,d=e.onError,!t)return[2];if(!n.length)return this.setState({loading:b.LoadingState.Done}),[2];this.setState({loading:b.LoadingState.Loading}),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,this.dataSourceSrv.get(r)];case 2:return p=a.sent(),h=this.props.minInterval||p.interval,f=j.a.calculateInterval(s,l,h),m={timezone:"browser",panelId:i,dashboardId:o,range:s,rangeRaw:s.raw,interval:f.interval,intervalMs:f.intervalMs,targets:n,maxDataPoints:c||l,scopedVars:{},cacheTimeout:null},[4,p.query(m)];case 3:return g=a.sent(),this.isUnmounted?[2]:(u&&u(g),this.setState({loading:b.LoadingState.Done,response:g,isFirstLoad:!1}),[3,5]);case 4:return v=a.sent(),console.log("DataPanel error",v),y="Query error",v.message?y=v.message:v.data&&v.data.message?y=v.data.message:v.data&&v.data.error?y=v.data.error:v.status&&(y="Query error: "+v.status+" "+v.statusText),d(y,v),this.setState({isFirstLoad:!1,loading:b.LoadingState.Error}),[3,5];case 5:return[2]}})})},n.getPanelData=function(){var e=n.state.response;return e.data.length>0&&"table"===e.data[0].type?{tableData:e.data[0],timeSeries:null}:{timeSeries:e.data,tableData:null}},n.state={loading:b.LoadingState.NotStarted,response:{data:[]},isFirstLoad:!0},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.issueQueries()},t.prototype.componentWillUnmount=function(){this.isUnmounted=!0},t.prototype.componentDidUpdate=function(e){return a.b(this,void 0,void 0,function(){return a.d(this,function(t){return this.hasPropsChanged(e)?(this.issueQueries(),[2]):[2]})})},t.prototype.hasPropsChanged=function(e){return this.props.refreshCounter!==e.refreshCounter},t.prototype.render=function(){var e=this.props.queries,t=this.state,n=t.loading,a=t.isFirstLoad,r=this.getPanelData();return!a||n!==b.LoadingState.Loading&&n!==b.LoadingState.NotStarted?e.length?i.a.createElement(i.a.Fragment,null,n===b.LoadingState.Loading&&this.renderLoadingState(),this.props.children({loading:n,panelData:r})):i.a.createElement("div",{className:"panel-empty"},i.a.createElement("p",null,"Add a query to get some data!")):this.renderLoadingState()},t.prototype.renderLoadingState=function(){return i.a.createElement("div",{className:"panel-loading"},i.a.createElement("i",{className:"fa fa-spinner fa-spin"}))},t.defaultProps={isVisible:!0,dashboardId:1},t}(r.Component),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:null,errorInfo:null},t}return a.c(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},t.prototype.render=function(){var e=this.props.children,t=this.state;return e({error:t.error,errorInfo:t.errorInfo})},t}(r.Component),B=n(197),Q=n(394),z=n.n(Q),H=function(e){function t(t){var n=e.call(this,t)||this;return n.timeSrv=Object(T.a)(),n.onRefresh=function(){if(console.log("onRefresh"),n.isVisible){var e=n.props.panel,t=Object($.a)(e,n.timeSrv.timeRange());n.setState({refreshCounter:n.state.refreshCounter+1,timeRange:t.timeRange,timeInfo:t.timeInfo})}},n.onRender=function(){n.setState({renderCounter:n.state.renderCounter+1})},n.onInterpolate=function(e,t){return S.a.replace(e,n.props.panel.scopedVars,t)},n.onDataResponse=function(e){n.props.dashboard.isSnapshot()&&(n.props.panel.snapshotData=e.data),n.clearErrorState(),n.props.panel.events.emit("data-received",e.data)},n.onDataError=function(e,t){n.state.errorMessage!==e&&n.setState({errorMessage:e}),n.props.panel.events.emit("data-error",t)},n.onPanelError=function(e){n.state.errorMessage!==e&&n.setState({errorMessage:e})},n.renderPanelBody=function(e,t){var a=n.props.panel,r=n.state,o=r.refreshCounter,s=r.timeRange,l=a.datasource,c=a.targets;return i.a.createElement(i.a.Fragment,null,n.needsQueryExecution?i.a.createElement(U,{panelId:a.id,datasource:l,queries:c,timeRange:s,isVisible:n.isVisible,widthPixels:e,refreshCounter:o,onDataResponse:n.onDataResponse,onError:n.onDataError},function(a){var r=a.loading,i=a.panelData;return n.renderPanelPlugin(r,i,e,t)}):n.renderPanelPlugin(b.LoadingState.Done,n.getDataForPanel,e,t))},n.state={refreshCounter:0,renderCounter:0,errorMessage:null},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.props.panel.events.on("refresh",this.onRefresh),this.props.panel.events.on("render",this.onRender),this.props.dashboard.panelInitialized(this.props.panel)},t.prototype.componentWillUnmount=function(){this.props.panel.events.off("refresh",this.onRefresh)},t.prototype.clearErrorState=function(){this.state.errorMessage&&this.setState({errorMessage:null})},Object.defineProperty(t.prototype,"isVisible",{get:function(){return!this.props.dashboard.otherPanelInFullscreen(this.props.panel)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPanelSnapshot",{get:function(){var e=this.props.panel;return e.snapshotData&&e.snapshotData.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needsQueryExecution",{get:function(){return this.hasPanelSnapshot||this.props.plugin.dataFormats.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getDataForPanel",{get:function(){return this.hasPanelSnapshot?Object($.h)(this.props.panel):null},enumerable:!0,configurable:!0}),t.prototype.renderPanelPlugin=function(e,t,n,a){var r=this.props,o=r.panel,s=r.plugin,l=this.state,c=l.timeRange,u=l.renderCounter,d=s.exports.reactPanel.panel;return e===b.LoadingState.Done&&B.a.renderingCompleted(o.id),i.a.createElement("div",{className:"panel-content"},i.a.createElement(d,{loading:e,panelData:t,timeRange:c,options:o.getOptions(s.exports.reactPanel.defaults),width:n-2*z.a.panelhorizontalpadding,height:a-g.i-z.a.panelverticalpadding,renderCounter:u,onInterpolate:this.onInterpolate}))},t.prototype.render=function(){var e=this,t=this.props,n=t.dashboard,a=t.panel,r=t.isFullscreen,o=this.state,s=o.errorMessage,l=o.timeInfo,c="panel-container panel-container--absolute "+(a.transparent?"panel-transparent":"");return i.a.createElement(E.a,null,function(t){var o=t.width,u=t.height;return 0===o?null:i.a.createElement("div",{className:c},i.a.createElement(R,{panel:a,dashboard:n,timeInfo:l,title:a.title,description:a.description,scopedVars:a.scopedVars,links:a.links,error:s,isFullscreen:r}),i.a.createElement(V,null,function(t){var n=t.error;return t.errorInfo?(e.onPanelError(n.message||"Error in plugin"),null):e.renderPanelBody(o,u)}))})},t}(r.PureComponent),G=n(151),W=n.n(G),Y=function(e){var t={transition:"opacity "+e.duration+"ms linear",opacity:0},n={exited:{opacity:0,display:"none"},entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0}};return i.a.createElement(W.a,{in:e.in,timeout:e.duration,unmountOnExit:e.unmountOnExit||!1,onExited:e.onExited},function(r){return i.a.createElement("div",{style:a.a({},t,n[r])},e.children)})},K=function(e){function t(t){var n=e.call(this,t)||this;return n.onToggleToolBarView=function(e){n.setState({openView:e,isOpen:n.state.openView!==e||!n.state.isOpen})},n.onCloseOpenView=function(){n.setState({isOpen:!1})},n.state={openView:null,fadeIn:!1,isOpen:!1},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.setState({fadeIn:!0})},t.getDerivedStateFromProps=function(e,t){if(t.openView){var n=e.toolbarItems.find(function(e){return e.title===t.openView.title&&e.icon===t.openView.icon});if(n)return a.a({},t,{openView:n})}return t},t.prototype.renderButton=function(e){var t=this;return i.a.createElement("div",{className:"nav-buttons",key:e.title+e.icon},i.a.createElement("button",{className:"btn navbar-button",onClick:function(){e.onClick&&e.onClick(),e.render&&t.onToggleToolBarView(e)},disabled:e.disabled},e.icon&&i.a.createElement("i",{className:e.icon})," ",e.title))},t.prototype.renderOpenView=function(e){return i.a.createElement(b.PanelOptionsGroup,{title:e.title||e.heading,onClose:this.onCloseOpenView},e.render())},t.prototype.render=function(){var e=this,t=this.props,n=t.children,a=t.renderToolbar,r=t.heading,o=t.toolbarItems,s=t.scrollTop,l=t.setScrollTop,c=this.state,u=c.openView,d=c.fadeIn,p=c.isOpen;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"toolbar"},i.a.createElement("div",{className:"toolbar__left"},i.a.createElement("div",{className:"toolbar__heading"},r),a&&a()),o.map(function(t){return e.renderButton(t)})),i.a.createElement("div",{className:"panel-editor__scroll"},i.a.createElement(b.CustomScrollbar,{autoHide:!1,scrollTop:s,setScrollTop:l},i.a.createElement("div",{className:"panel-editor__content"},i.a.createElement(Y,{in:p,duration:200,unmountOnExit:!0},u&&this.renderOpenView(u)),i.a.createElement(Y,{in:d,duration:50},n)))))},t.defaultProps={toolbarItems:[]},t}(r.PureComponent),X=n(377),J=n(17),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wrapperRef=Object(r.createRef)(),t.renderJson=function(){var e=t.props,n=e.json,a=e.config,r=e.open,i=e.onDidRender,o=t.wrapperRef.current,s=new J.a(n,r,a);o.hasChildNodes()?o.replaceChild(s.render(),o.lastChild):o.appendChild(s.render()),i&&i(s.json)},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.renderJson()},t.prototype.componentDidUpdate=function(){this.renderJson()},t.prototype.render=function(){var e=this.props.className;return i.a.createElement("div",{className:e,ref:this.wrapperRef})},t.defaultProps={open:3,config:{animateOpen:!0}},t}(r.PureComponent),ee=n(275),te=n.n(ee),ne=function(e){function t(t){var n=e.call(this,t)||this;return n.getElementType=function(){return n.props.elType||"button"},n.myRef=i.a.createRef(),n}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.text,n=e.onSuccess,a=e.onError;this.clipboardjs=new te.a(this.myRef.current,{text:t}),n&&this.clipboardjs.on("success",function(e){e.clearSelection(),n(e)}),a&&this.clipboardjs.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger),a(e)})},t.prototype.componentWillUnmount=function(){this.clipboardjs&&this.clipboardjs.destroy()},t.prototype.render=function(){var e=this.props,t=(e.elType,e.text,e.children,e.onError,e.onSuccess,a.e(e,["elType","text","children","onError","onSuccess"]));return i.a.createElement(this.getElementType(),a.a({ref:this.myRef},t),this.props.children)},t}(r.PureComponent),ae=function(e){function t(t){var n=e.call(this,t)||this;return n.onPanelRefresh=function(){n.setState(function(e){return a.a({},e,{dsQuery:{isLoading:!0,response:{}}})})},n.onDataSourceResponse=function(e){void 0===e&&(e={}),n.state.isMocking?n.handleMocking(e):((e=a.a({},e)).headers&&delete e.headers,e.config&&(e.request=e.config,delete e.config,delete e.request.transformRequest,delete e.request.transformResponse,delete e.request.paramSerializer,delete e.request.jsonpCallbackParam,delete e.request.headers,delete e.request.requestId,delete e.request.inspect,delete e.request.retry,delete e.request.timeout),e.data&&(e.response=e.data,delete e.data,delete e.status,delete e.statusText,delete e.$$config),n.setState(function(t){return a.a({},t,{dsQuery:{isLoading:!1,response:e}})}))},n.setFormattedJson=function(e){n.formattedJson=e},n.getTextForClipboard=function(){return JSON.stringify(n.formattedJson,null,2)},n.onClipboardSuccess=function(){k.b.emit("alert-success",["Content copied to clipboard"])},n.onToggleExpand=function(){n.setState(function(e){return a.a({},e,{allNodesExpanded:!n.state.allNodesExpanded})})},n.onToggleMocking=function(){n.setState(function(e){return a.a({},e,{isMocking:!n.state.isMocking})})},n.getNrOfOpenNodes=function(){return null===n.state.allNodesExpanded?3:n.state.allNodesExpanded?20:1},n.setMockedResponse=function(e){var t=e.target.value;n.setState(function(e){return a.a({},e,{mockedResponse:t})})},n.renderExpandCollapse=function(){var e=n.state.allNodesExpanded,t=i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fa fa-minus-square-o"})," Collapse All"),a=i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fa fa-plus-square-o"})," Expand All");return e?t:a},n.state={allNodesExpanded:null,isMocking:!1,mockedResponse:"",dsQuery:{isLoading:!1,response:{}}},n}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this.props.panel;e.events.on("refresh",this.onPanelRefresh),k.b.on("ds-request-response",this.onDataSourceResponse),e.refresh()},t.prototype.componentWillUnmount=function(){var e=this.props.panel;k.b.off("ds-request-response",this.onDataSourceResponse),e.events.off("refresh",this.onPanelRefresh)},t.prototype.handleMocking=function(e){var t,n=this.state.mockedResponse;try{t=JSON.parse(n)}catch(e){return void k.b.emit("alert-error",["R: Failed to parse mocked response"])}e.data=t},t.prototype.render=function(){var e=this.state.dsQuery,t=e.response,n=e.isLoading,a=this.getNrOfOpenNodes();return n?i.a.createElement(b.LoadingPlaceholder,{text:"Loading query inspector..."}):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"pull-right"},i.a.createElement("button",{className:"btn btn-transparent btn-p-x-0 m-r-1",onClick:this.onToggleExpand},this.renderExpandCollapse()),i.a.createElement(ne,{className:"btn btn-transparent btn-p-x-0",text:this.getTextForClipboard,onSuccess:this.onClipboardSuccess},i.a.createElement("i",{className:"fa fa-clipboard"})," Copy to Clipboard")),i.a.createElement(Z,{json:t,open:a,onDidRender:this.setFormattedJson}))},t}(r.PureComponent),re=n(130),ie=function(e,t){var n=t.reduce(function(t,n){return n.rule(e)?t:t.concat(n.errorMessage)},[]);return n.length>0?n:null},oe=function(e,t){return t&&t[e]};!function(e){e.Invalid="invalid",e.Valid="valid"}(D||(D={})),function(e){e.Text="text",e.Number="number",e.Password="password",e.Email="email"}(N||(N={})),function(e){e.onBlur="onBlur",e.onFocus="onFocus",e.onChange="onChange"}(P||(P={}));var se,le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:null},t.validatorAsync=function(e){return function(n){var r=ie(n.target.value,e);t.setState(function(e){return a.a({},e,{error:r?r[0]:null})})}},t.populateEventPropsWithStatus=function(e,n){var r=a.a({},e);return Object.keys(P).forEach(function(i){(oe(i,n)||e[i])&&(r[i]=function(r){return a.b(t,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return r.persist(),oe(i,n)?[4,this.validatorAsync(n[i]).apply(this,[r])]:[3,2];case 1:t.sent(),t.label=2;case 2:return e[i]&&e[i].apply(null,[r,this.status]),[2]}})})})}),r},t}return a.c(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this.state.error?D.Invalid:D.Valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this.status===D.Invalid},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.validationEvents,n=e.className,r=e.hideErrorMessage,o=a.e(e,["validationEvents","className","hideErrorMessage"]),s=this.state.error,c=l()("gf-form-input",{invalid:this.isInvalid},n),u=this.populateEventPropsWithStatus(o,t);return i.a.createElement("div",{className:"our-custom-wrapper-class"},i.a.createElement("input",a.a({},u,{className:c})),s&&!r&&i.a.createElement("span",null,s))},t.defaultProps={className:""},t}(r.PureComponent),ce=function(e){var t=e.label,n=e.placeholder,a=e.name,r=(e.value,e.onChange),o=e.tooltipInfo;return i.a.createElement("div",{className:"gf-form gf-form--flex-end"},i.a.createElement(b.FormLabel,{tooltip:o},t),i.a.createElement("input",{type:"text",className:"gf-form-input width-6",placeholder:n,name:a,spellCheck:!1,onBlur:function(e){return r(e.target.value)}}))},ue=((se={})[P.onBlur]=[{rule:function(e){return!e||Object(re.d)(e)},errorMessage:"Not a valid timespan"}],se),de=function(e){return""===e?null:e},pe=function(e){function t(t){var n=e.call(this,t)||this;return n.onRelativeTimeChange=function(e){n.setState({relativeTime:e.target.value})},n.onTimeShiftChange=function(e){n.setState({timeShift:e.target.value})},n.onOverrideTime=function(e,t){var a=e.target.value,r=n.props.panel,i=de(a);t===D.Valid&&r.timeFrom!==i&&(r.timeFrom=i,r.refresh())},n.onTimeShift=function(e,t){var a=e.target.value,r=n.props.panel,i=de(a);t===D.Valid&&r.timeShift!==i&&(r.timeShift=i,r.refresh())},n.onToggleTimeOverride=function(){var e=n.props.panel;e.hideTimeOverride=!e.hideTimeOverride,e.refresh()},n.state={relativeTime:t.panel.timeFrom||"",timeShift:t.panel.timeShift||""},n}return a.c(t,e),t.prototype.renderOptions=function(){var e=this.props,t=e.datasource,n=e.panel,r=t.meta.queryOptions;if(!r)return null;var o={cacheTimeout:{label:"Cache timeout",placeholder:"60",name:"cacheTimeout",value:n.cacheTimeout,tooltipInfo:i.a.createElement(i.a.Fragment,null,"If your time series store has a query cache this option can override the default cache timeout. Specify a numeric value in seconds.")},maxDataPoints:{label:"Max data points",placeholder:"auto",name:"maxDataPoints",value:n.maxDataPoints,tooltipInfo:i.a.createElement(i.a.Fragment,null,"The maximum data points the query should return. For graphs this is automatically set to one data point per pixel.")},minInterval:{label:"Min time interval",placeholder:"0",name:"minInterval",value:n.interval,panelKey:"interval",tooltipInfo:i.a.createElement(i.a.Fragment,null,"A lower limit for the auto group by time interval. Recommended to be set to write frequency, for example"," ",i.a.createElement("code",null,"1m")," if your data is written every minute. Access auto interval via variable"," ",i.a.createElement("code",null,"$__interval")," for time range string and ",i.a.createElement("code",null,"$__interval_ms")," for numeric variable that can be used in math expressions.")}};return Object.keys(r).map(function(e){var t=o[e];return i.a.createElement(ce,a.a({key:e},t,{onChange:function(e){return function(t){n[e]=t,n.refresh()}}(o[e].panelKey||e)}))})},t.prototype.render=function(){var e=this.props.panel.hideTimeOverride,t=this.state,n=t.relativeTime,a=t.timeShift;return i.a.createElement("div",{className:"gf-form-inline"},this.renderOptions(),i.a.createElement("div",{className:"gf-form"},i.a.createElement(b.FormLabel,null,"Relative time"),i.a.createElement(le,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onRelativeTimeChange,onBlur:this.onOverrideTime,validationEvents:ue,hideErrorMessage:!0,value:n})),i.a.createElement("div",{className:"gf-form"},i.a.createElement("span",{className:"gf-form-label"},"Time shift"),i.a.createElement(le,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onTimeShiftChange,onBlur:this.onTimeShift,validationEvents:ue,hideErrorMessage:!0,value:a})),i.a.createElement("div",{className:"gf-form-inline"},i.a.createElement(b.Switch,{label:"Hide time info",checked:e,onChange:this.onToggleTimeOverride})))},t}(r.PureComponent),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=null,t.angularQueryEditor=null,t.state={datasource:null,isCollapsed:!1,loadedDataSourceValue:void 0,hasTextEditMode:!1},t.onPanelDataError=function(){t.angularQueryEditor&&setTimeout(t.angularQueryEditor.digest)},t.onPanelDataReceived=function(){t.angularQueryEditor&&setTimeout(t.angularQueryEditor.digest)},t.onPanelRefresh=function(){t.angularScope&&(t.angularScope.range=Object(T.a)().timeRange())},t.onToggleCollapse=function(){t.setState({isCollapsed:!t.state.isCollapsed})},t.onRunQuery=function(){t.props.panel.refresh()},t.onToggleEditMode=function(){t.angularScope&&t.angularScope.toggleEditorMode&&(t.angularScope.toggleEditorMode(),t.angularQueryEditor.digest()),t.state.isCollapsed&&t.setState({isCollapsed:!1})},t.onRemoveQuery=function(){t.props.onRemoveQuery(t.props.query)},t.onCopyQuery=function(){var e=p.a.cloneDeep(t.props.query);t.props.onAddQuery(e)},t.onDisableQuery=function(){t.props.query.hide=!t.props.query.hide,t.onRunQuery(),t.forceUpdate()},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.loadDatasource(),this.props.panel.events.on("refresh",this.onPanelRefresh),this.props.panel.events.on("data-error",this.onPanelDataError),this.props.panel.events.on("data-received",this.onPanelDataReceived)},t.prototype.componentWillUnmount=function(){this.props.panel.events.off("refresh",this.onPanelRefresh),this.props.panel.events.off("data-error",this.onPanelDataError),this.props.panel.events.off("data-received",this.onPanelDataReceived),this.angularQueryEditor&&this.angularQueryEditor.destroy()},t.prototype.getAngularQueryComponentScope=function(){var e=this.props,t=e.panel,n=e.query,a=e.dashboard;return{datasource:this.state.datasource,target:n,panel:t,dashboard:a,refresh:function(){return t.refresh()},render:function(){return t.render()},events:t.events,range:Object(T.a)().timeRange()}},t.prototype.loadDatasource=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r;return a.d(this,function(a){switch(a.label){case 0:return e=this.props,t=e.query,n=e.panel,[4,Object(L.a)().get(t.datasource||n.datasource)];case 1:return r=a.sent(),this.setState({datasource:r,loadedDataSourceValue:this.props.dataSourceValue,hasTextEditMode:!1}),[2]}})})},t.prototype.componentDidUpdate=function(){var e=this;if(this.state.loadedDataSourceValue!==this.props.dataSourceValue)return this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),void this.loadDatasource();if(this.element&&!this.angularQueryEditor){var t=Object(c.a)(),n={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=t.load(this.element,n,'<plugin-component type="query-ctrl" />'),this.angularScope=n.ctrl,setTimeout(function(){e.setState({hasTextEditMode:!!e.angularScope.toggleEditorMode})},10)}},t.prototype.renderPluginEditor=function(){var e=this,t=this.props,n=t.query,a=t.onChange,r=this.state.datasource;if(r.pluginExports.QueryCtrl)return i.a.createElement("div",{ref:function(t){return e.element=t}});if(r.pluginExports.QueryEditor){var o=r.pluginExports.QueryEditor;return i.a.createElement(o,{query:n,datasource:r,onChange:a,onRunQuery:this.onRunQuery})}return i.a.createElement("div",null,"Data source plugin does not export any Query Editor component")},t.prototype.renderCollapsedText=function(){return this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null},t.prototype.render=function(){var e=this,t=this.props,n=t.query,a=t.inMixedMode,r=this.state,o=r.datasource,s=r.isCollapsed,c=r.hasTextEditMode,u=n.hide,d=l()("query-editor-row__body gf-form-query",{"query-editor-row__body--collapsed":s}),p=l()("query-editor-row",{"query-editor-row--disabled":u,"gf-form-disabled":u});return o?i.a.createElement("div",{className:p},i.a.createElement("div",{className:"query-editor-row__header"},i.a.createElement("div",{className:"query-editor-row__ref-id",onClick:this.onToggleCollapse},s&&i.a.createElement("i",{className:"fa fa-caret-right"}),!s&&i.a.createElement("i",{className:"fa fa-caret-down"}),i.a.createElement("span",null,n.refId),a&&i.a.createElement("em",{className:"query-editor-row__context-info"}," (",o.name,")"),u&&i.a.createElement("em",{className:"query-editor-row__context-info"}," Disabled")),i.a.createElement("div",{className:"query-editor-row__collapsed-text",onClick:this.onToggleEditMode},s&&i.a.createElement("div",null,this.renderCollapsedText())),i.a.createElement("div",{className:"query-editor-row__actions"},c&&i.a.createElement("button",{className:"query-editor-row__action",onClick:this.onToggleEditMode,title:"Toggle text edit mode"},i.a.createElement("i",{className:"fa fa-fw fa-pencil"})),i.a.createElement("button",{className:"query-editor-row__action",onClick:function(){return e.props.onMoveQuery(n,1)}},i.a.createElement("i",{className:"fa fa-fw fa-arrow-down"})),i.a.createElement("button",{className:"query-editor-row__action",onClick:function(){return e.props.onMoveQuery(n,-1)}},i.a.createElement("i",{className:"fa fa-fw fa-arrow-up"})),i.a.createElement("button",{className:"query-editor-row__action",onClick:this.onCopyQuery,title:"Duplicate query"},i.a.createElement("i",{className:"fa fa-fw fa-copy"})),i.a.createElement("button",{className:"query-editor-row__action",onClick:this.onDisableQuery,title:"Disable/enable query"},u&&i.a.createElement("i",{className:"fa fa-fw fa-eye-slash"}),!u&&i.a.createElement("i",{className:"fa fa-fw fa-eye"})),i.a.createElement("button",{className:"query-editor-row__action",onClick:this.onRemoveQuery,title:"Remove query"},i.a.createElement("i",{className:"fa fa-fw fa-trash"})))),i.a.createElement("div",{className:d},this.renderPluginEditor())):null},t}(r.PureComponent),fe=n(14),me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isError:!1,isLoading:!1,help:""},t.loadHelp=function(){var e=t.props,n=e.plugin,a=e.type;t.setState({isLoading:!0}),Object(fe.a)().get("/api/plugins/"+n.id+"/markdown/"+a).then(function(e){var n=(new _.a).render(e);""===e&&"help"===a?t.setState({isError:!1,isLoading:!1,help:t.constructPlaceholderInfo()}):t.setState({isError:!1,isLoading:!1,help:n})}).catch(function(){t.setState({isError:!0,isLoading:!1})})},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.loadHelp()},t.prototype.constructPlaceholderInfo=function(){return"No plugin help or readme markdown file was found"},t.prototype.render=function(){this.props.type;var e=this.state,t=e.isError,n=e.isLoading,a=e.help;return n?i.a.createElement("h2",null,"Loading help..."):t?i.a.createElement("h3",null,"'Error occurred when loading help'"):i.a.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:a}})},t}(r.PureComponent),ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.datasources=Object(L.a)().getMetricSources(),t.backendSrv=Object(fe.a)(),t.state={isLoadingHelp:!1,currentDS:t.findCurrentDataSource(),helpContent:null,isPickerOpen:!1,isAddingMixed:!1,scrollTop:0},t.onChangeDataSource=function(e){var n=t.props.panel,a=t.state.currentDS;if(e.meta.mixed)n.targets.forEach(function(e){e.datasource=n.datasource,e.datasource||(e.datasource=o.a.defaultDatasource)});else if(a)if(a.meta.mixed)for(var r=0,i=n.targets;r<i.length;r++){delete i[r].datasource}else a.meta.id!==e.meta.id&&(n.targets=[{refId:"A"}]);n.datasource=e.value,n.refresh(),t.setState({currentDS:e})},t.renderQueryInspector=function(){var e=t.props.panel;return i.a.createElement(ae,{panel:e})},t.renderHelp=function(){return i.a.createElement(me,{plugin:t.state.currentDS.meta,type:"query_help"})},t.onAddQuery=function(e){t.props.panel.addQuery(e),t.setState({scrollTop:t.state.scrollTop+1e5})},t.onAddQueryClick=function(){t.state.currentDS.meta.mixed?t.setState({isAddingMixed:!0}):t.onAddQuery()},t.onRemoveQuery=function(e){var n=t.props.panel,a=p.a.indexOf(n.targets,e);n.targets.splice(a,1),n.refresh(),t.forceUpdate()},t.onMoveQuery=function(e,n){var a=t.props.panel,r=p.a.indexOf(a.targets,e);p.a.move(a.targets,r,r+n),t.forceUpdate()},t.renderToolbar=function(){var e=t.state,n=e.currentDS,a=e.isAddingMixed;return i.a.createElement(i.a.Fragment,null,i.a.createElement(X.a,{datasources:t.datasources,onChange:t.onChangeDataSource,current:n}),i.a.createElement("div",{className:"flex-grow-1"}),!a&&i.a.createElement("button",{className:"btn navbar-button",onClick:t.onAddQueryClick},"Add Query"),a&&t.renderMixedPicker())},t.renderMixedPicker=function(){return i.a.createElement(X.a,{datasources:t.datasources,onChange:t.onAddMixedQuery,current:null,autoFocus:!0,onBlur:t.onMixedPickerBlur})},t.onAddMixedQuery=function(e){t.onAddQuery({datasource:e.name}),t.setState({isAddingMixed:!1,scrollTop:t.state.scrollTop+1e4})},t.onMixedPickerBlur=function(){t.setState({isAddingMixed:!1})},t.onQueryChange=function(e,n){t.props.panel.changeQuery(e,n),t.forceUpdate()},t.setScrollTop=function(e){var n=e.target;t.setState({scrollTop:n.scrollTop})},t}return a.c(t,e),t.prototype.findCurrentDataSource=function(){var e=this.props.panel;return this.datasources.find(function(t){return t.value===e.datasource})||this.datasources[0]},t.prototype.render=function(){var e=this,t=this.props,n=t.panel,a=t.dashboard,r=this.state,o=r.currentDS,s=r.scrollTop,l={title:"Query Inspector",render:this.renderQueryInspector},c={heading:"Help",icon:"fa fa-question",render:this.renderHelp};return i.a.createElement(K,{heading:"Queries to",renderToolbar:this.renderToolbar,toolbarItems:[l,c],setScrollTop:this.setScrollTop,scrollTop:s},i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"query-editor-rows"},n.targets.map(function(t,r){return i.a.createElement(he,{dataSourceValue:t.datasource||n.datasource,key:t.refId,panel:n,dashboard:a,query:t,onChange:function(t){return e.onQueryChange(t,r)},onRemoveQuery:e.onRemoveQuery,onAddQuery:e.onAddQuery,onMoveQuery:e.onMoveQuery,inMixedMode:o.meta.mixed})})),i.a.createElement(b.PanelOptionsGroup,null,i.a.createElement(pe,{panel:n,datasource:o}))))},t}(r.PureComponent),ve=n(202),be=i.a.memo(function(e){var t=e.isCurrent,n=e.plugin,a=e.onClick,r=l()({"viz-picker__item":!0,"viz-picker__item--current":t});return i.a.createElement("div",{className:r,onClick:a,title:n.name},i.a.createElement("div",{className:"viz-picker__item-name"},n.name),i.a.createElement("img",{className:"viz-picker__item-img",src:n.info.logos.small}))},function(e,t){return e.isCurrent===t.isCurrent}),ye=function(e){function t(t){var n=e.call(this,t)||this;return n.pluginList=n.getPanelPlugins(""),n.renderVizPlugin=function(e,t){var a=n.props.onTypeChanged,r=e.id===n.props.current.id;return i.a.createElement(be,{key:e.id,isCurrent:r,plugin:e,onClick:function(){return a(e)}})},n.getFilteredPluginList=function(){var e=n.props.searchQuery,t=new RegExp(e,"i");return n.pluginList.filter(function(e){return t.test(e.name)})},n}return a.c(t,e),Object.defineProperty(t.prototype,"maxSelectedIndex",{get:function(){return this.getFilteredPluginList().length-1},enumerable:!0,configurable:!0}),t.prototype.getPanelPlugins=function(e){var t=p.a.chain(o.a.panels).filter({hideFromList:!1}).map(function(e){return e}).value();return p.a.sortBy(t,"sort")},t.prototype.render=function(){var e=this,t=this.getFilteredPluginList();return i.a.createElement("div",{className:"viz-picker"},i.a.createElement("div",{className:"viz-picker-list"},t.map(function(t,n){return e.renderVizPlugin(t,n)})))},t}(r.PureComponent),we=n(75),xe=function(e){function t(t){var n=e.call(this,t)||this;return n.getReactPanelOptions=function(){var e=n.props,t=e.panel,a=e.plugin;return t.getOptions(a.exports.reactPanel.defaults)},n.clearQuery=function(){n.setState({searchQuery:""})},n.onPanelOptionsChanged=function(e){n.props.panel.updateOptions(e),n.forceUpdate()},n.onOpenVizPicker=function(){n.setState({isVizPickerOpen:!0,scrollTop:0})},n.onCloseVizPicker=function(){n.props.urlOpenVizPicker&&n.props.updateLocation({query:{openVizPicker:null},partial:!0}),n.setState({isVizPickerOpen:!1})},n.onSearchQueryChange=function(e){n.setState({searchQuery:e})},n.renderToolbar=function(){var e=n.props.plugin,t=n.state.searchQuery;return n.state.isVizPickerOpen?i.a.createElement(i.a.Fragment,null,i.a.createElement(we.a,{labelClassName:"gf-form--has-input-icon",inputClassName:"gf-form-input width-13",placeholder:"",onChange:n.onSearchQueryChange,value:t,ref:function(e){return e&&e.focus()}}),i.a.createElement("button",{className:"btn btn-link toolbar__close",onClick:n.onCloseVizPicker},i.a.createElement("i",{className:"fa fa-chevron-up"}))):i.a.createElement("div",{className:"toolbar__main",onClick:n.onOpenVizPicker},i.a.createElement("img",{className:"toolbar__main-image",src:e.info.logos.small}),i.a.createElement("div",{className:"toolbar__main-name"},e.name),i.a.createElement("i",{className:"fa fa-caret-down"}))},n.onTypeChanged=function(e){e.id===n.props.plugin.id?n.setState({isVizPickerOpen:!1}):n.props.onTypeChanged(e)},n.renderHelp=function(){return i.a.createElement(me,{plugin:n.props.plugin,type:"help"})},n.setScrollTop=function(e){var t=e.target;n.setState({scrollTop:t.scrollTop})},n.state={isVizPickerOpen:n.props.urlOpenVizPicker,searchQuery:"",scrollTop:0},n}return a.c(t,e),t.prototype.renderPanelOptions=function(){var e=this,t=this.props,n=t.plugin;if(t.angularPanel)return i.a.createElement("div",{ref:function(t){return e.element=t}});if(n.exports.reactPanel){var a=n.exports.reactPanel.editor;if(a)return i.a.createElement(a,{options:this.getReactPanelOptions(),onChange:this.onPanelOptionsChanged})}return i.a.createElement("p",null,"Visualization has no options")},t.prototype.componentDidMount=function(){this.shouldLoadAngularOptions()&&this.loadAngularOptions()},t.prototype.componentDidUpdate=function(e){this.props.plugin!==e.plugin&&this.cleanUpAngularOptions(),this.shouldLoadAngularOptions()&&this.loadAngularOptions()},t.prototype.shouldLoadAngularOptions=function(){return this.props.angularPanel&&this.element&&!this.angularOptions},t.prototype.loadAngularOptions=function(){var e=this,t=this.props.angularPanel.getScope();if(t.$$childHead){var n=t.$$childHead.ctrl;n.initEditMode();for(var a="",r=0;r<n.editorTabs.length;r++)a+='\n      <div class="panel-options-group" ng-cloak>'+(r>0?'<div class="panel-options-group__header">\n           <span class="panel-options-group__title">{{ctrl.editorTabs['+r+"].title}}\n           </span>\n         </div>":"")+'<div class="panel-options-group__body">\n          <panel-editor-tab editor-tab="ctrl.editorTabs['+r+']" ctrl="ctrl"></panel-editor-tab>\n        </div>\n      </div>\n      ';var i=Object(c.a)(),o={ctrl:n};this.angularOptions=i.load(this.element,o,a)}else setTimeout(function(){e.forceUpdate()})},t.prototype.componentWillUnmount=function(){this.cleanUpAngularOptions()},t.prototype.cleanUpAngularOptions=function(){this.angularOptions&&(this.angularOptions.destroy(),this.angularOptions=null)},t.prototype.render=function(){var e=this.props.plugin,t=this.state,n=t.isVizPickerOpen,a=t.searchQuery,r=t.scrollTop,o={heading:"Help",icon:"fa fa-question",render:this.renderHelp};return i.a.createElement(K,{heading:"Visualization",renderToolbar:this.renderToolbar,toolbarItems:[o],scrollTop:r,setScrollTop:this.setScrollTop},i.a.createElement(i.a.Fragment,null,i.a.createElement(Y,{in:n,duration:200,unmountOnExit:!0,onExited:this.clearQuery},i.a.createElement(ye,{current:e,onTypeChanged:this.onTypeChanged,searchQuery:a,onClose:this.onCloseVizPicker})),this.renderPanelOptions()))},t}(r.PureComponent),Se={updateLocation:m.c},ke=Object(ve.a)(xe,function(e){return{urlOpenVizPicker:!!e.location.query.openVizPicker}},Se),Ce=n(5),Ee=function(e){return Object.keys(e).reduce(function(t,n){return t.concat(n+"="+e[n])},[]).join()},Te=function(){function e(e){var t=this;this.panelCtrl=e.ctrl;e.$watch(function(e){var t=e.ctrl.panel;return["title","description","transparent","repeat","repeatDirection","minSpan"].map(function(e){return e+"="+(t[e]&&t[e].toString?t[e].toString():t[e])}).join()+(t.links||[]).map(Ee).join()},function(){console.log("panel.render()"),t.panelCtrl.panel.render()},!0)}return e.$inject=["$scope"],e}();Ce.c.directive("panelGeneralTab",function(){return{restrict:"E",templateUrl:"public/app/features/panel/partials/general_tab.html",controller:Te}});var Me,_e,Ae=function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.componentDidMount=function(){if(this.element){var e=this.props.panel,t=Object(c.a)(),n={ctrl:{panel:e}};this.component=t.load(this.element,n,"<panel-general-tab />")}},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.render=function(){var e=this;return i.a.createElement(K,{heading:"General",toolbarItems:[]},i.a.createElement("div",{ref:function(t){return e.element=t}}))},t}(r.PureComponent),De=n(131),Ne=n(53),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={stateHistoryItems:[]},t.clearHistory=function(){var e=t.props,n=e.dashboard,a=e.onRefresh,r=e.panelId;k.b.emit("confirm-modal",{title:"Delete Alert History",text:"Are you sure you want to remove all history & annotations for this alert?",icon:"fa-trash",yesText:"Yes",onConfirm:function(){Object(fe.a)().post("/api/annotations/mass-delete",{dashboardId:n.id,panelId:r}).then(function(){a()}),t.setState({stateHistoryItems:[]})}})},t}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.dashboard,a=t.panelId;Object(fe.a)().get("/api/annotations?dashboardId="+n.id+"&panelId="+a+"&limit=50&type=alert").then(function(t){var a=t.map(function(e){return{stateModel:Ne.a.getStateDisplayModel(e.newState),time:n.formatDate(e.time,"MMM D, YYYY HH:mm:ss"),info:Ne.a.getAlertAnnotationInfo(e)}});e.setState({stateHistoryItems:a})})},t.prototype.render=function(){var e=this.state.stateHistoryItems;return i.a.createElement("div",null,e.length>0&&i.a.createElement("div",{className:"p-b-1"},i.a.createElement("span",{className:"muted"},"Last 50 state changes"),i.a.createElement("button",{className:"btn btn-mini btn-danger pull-right",onClick:this.clearHistory},i.a.createElement("i",{className:"fa fa-trash"})," "," Clear history")),i.a.createElement("ol",{className:"alert-rule-list"},e.length>0?e.map(function(e,t){return i.a.createElement("li",{className:"alert-rule-item",key:e.time+"-"+t},i.a.createElement("div",{className:"alert-rule-item__icon "+e.stateModel.stateClass},i.a.createElement("i",{className:e.stateModel.iconClass})),i.a.createElement("div",{className:"alert-rule-item__body"},i.a.createElement("div",{className:"alert-rule-item__header"},i.a.createElement("p",{className:"alert-rule-item__name"},e.alertName),i.a.createElement("div",{className:"alert-rule-item__text"},i.a.createElement("span",{className:""+e.stateModel.stateClass},e.stateModel.text))),e.info),i.a.createElement("div",{className:"alert-rule-item__time"},e.time))}):i.a.createElement("i",null,"No state changes recorded")))},t}(r.PureComponent),Oe=(n(373),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoading:!1,testRuleResponse:{}},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.testRule()},t.prototype.testRule=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,i;return a.d(this,function(a){switch(a.label){case 0:return e=this.props,t=e.panelId,n=e.dashboard,r={dashboard:n.getSaveModelClone(),panelId:t},this.setState({isLoading:!0}),[4,Object(fe.a)().post("/api/alerts/test",r)];case 1:return i=a.sent(),this.setState({isLoading:!1,testRuleResponse:i}),[2]}})})},t.prototype.render=function(){var e=this.state,t=e.testRuleResponse;return!0===e.isLoading?i.a.createElement(b.LoadingPlaceholder,{text:"Evaluating rule"}):i.a.createElement(Z,{json:t})},t}(r.PureComponent)),Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateHistory=function(){return{title:"State history",render:function(){return i.a.createElement(Pe,{dashboard:t.props.dashboard,panelId:t.props.panel.id,onRefresh:t.panelCtrl.refresh})}}},t.deleteAlert=function(){var e=t.props.panel;return{title:"Delete",btnType:"danger",onClick:function(){k.b.emit("confirm-modal",{title:"Delete Alert",text:"Are you sure you want to delete this alert rule?",text2:"You need to save dashboard for the delete to take effect",icon:"fa-trash",yesText:"Delete",onConfirm:function(){delete e.alert,e.thresholds=[],t.panelCtrl.alertState=null,t.panelCtrl.render(),t.forceUpdate()}})}}},t.renderTestRuleResult=function(){var e=t.props,n=e.panel,a=e.dashboard;return i.a.createElement(Oe,{panelId:n.id,dashboard:a})},t.testRule=function(){return{title:"Test Rule",render:function(){return t.renderTestRuleResult()}}},t.onAddAlert=function(){t.panelCtrl._enableAlert(),t.component.digest(),t.forceUpdate()},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.shouldLoadAlertTab()&&this.loadAlertTab()},t.prototype.componentDidUpdate=function(e){this.shouldLoadAlertTab()&&this.loadAlertTab()},t.prototype.shouldLoadAlertTab=function(){return this.props.angularPanel&&this.element&&!this.component},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.loadAlertTab=function(){var e=this,t=this.props.angularPanel.getScope();if(t.$$childHead){this.panelCtrl=t.$$childHead.ctrl;var n=Object(c.a)(),a={ctrl:this.panelCtrl};this.component=n.load(this.element,a,"<alert-tab />")}else setTimeout(function(){e.forceUpdate()})},t.prototype.render=function(){var e=this,t=this.props.panel.alert,n=t?[this.stateHistory(),this.testRule(),this.deleteAlert()]:[],a={title:"Panel has no alert rule defined",icon:"icon-gf icon-gf-alert",onClick:this.onAddAlert,buttonTitle:"Create Alert"};return i.a.createElement(K,{heading:"Alert",toolbarItems:n},i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:function(t){return e.element=t}}),!t&&i.a.createElement(De.a,{model:a})))},t}(r.PureComponent);!function(e){e.Queries="queries",e.Visualization="visualization",e.Advanced="advanced",e.Alert="alert"}(_e||(_e={}));var $e=((Me={})[_e.Queries]="Queries",Me[_e.Visualization]="Visualization",Me[_e.Advanced]="General",Me[_e.Alert]="Alert",Me),Fe=function(e){return{id:e,text:$e[e]}},qe=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeTab=function(e){f.b.dispatch(Object(m.c)({query:{tab:e.id,openVizPicker:null},partial:!0})),n.forceUpdate()},n}return a.c(t,e),t.prototype.renderCurrentTab=function(e){var t=this.props,n=t.panel,a=t.dashboard,r=t.onTypeChanged,o=t.plugin,s=t.angularPanel;switch(e){case"advanced":return i.a.createElement(Ae,{panel:n});case"queries":return i.a.createElement(ge,{panel:n,dashboard:a});case"alert":return i.a.createElement(Ie,{angularPanel:s,dashboard:a,panel:n});case"visualization":return i.a.createElement(ke,{panel:n,dashboard:a,plugin:o,onTypeChanged:r,angularPanel:s});default:return null}},t.prototype.render=function(){var e=this,t=this.props.plugin,n=f.b.getState().location.query.tab||_e.Queries,a=[Fe(_e.Queries),Fe(_e.Visualization),Fe(_e.Advanced)];return 0===t.dataFormats.length&&(a.shift(),n===_e.Queries&&(n=_e.Visualization)),o.a.alertingEnabled&&"graph"===t.id&&a.push(Fe(_e.Alert)),i.a.createElement("div",{className:"panel-editor-container__editor"},i.a.createElement("div",{className:"panel-editor-tabs"},a.map(function(t){return i.a.createElement(Re,{tab:t,activeTab:n,onClick:e.onChangeTab,key:t.id})})),i.a.createElement("div",{className:"panel-editor__right"},this.renderCurrentTab(n)))},t}(r.PureComponent);function Re(e){var t=e.tab,n=e.activeTab,a=e.onClick,r=l()({"panel-editor-tabs__link":!0,active:n===t.id});return i.a.createElement("div",{className:"panel-editor-tabs__item",onClick:function(){return a(t)}},i.a.createElement("a",{className:r},i.a.createElement(b.Tooltip,{content:""+t.text,placement:"auto"},i.a.createElement("i",{className:"gicon gicon-"+t.id+(n===t.id?"-active":"")}))))}var Le=n(270),je=n.n(Le),Ue=function(e){function t(t){var n=e.call(this,t)||this;n.initialHeight=Math.floor(.3*document.documentElement.scrollHeight),n.noStyles={},n.changeHeight=function(e){var t=n.smallestHeight,a=n.largestHeight;e=(e=e<t?t:e)>a?a:e,n.prevEditorHeight=n.state.editorHeight,n.setState({editorHeight:e})},n.onDrag=function(e,t){var a=n.state.editorHeight+t.y;n.throttledChangeHeight(a),n.throttledResizeDone()};var a=n.props.panel;return n.state={editorHeight:n.initialHeight},n.throttledChangeHeight=Object(d.throttle)(n.changeHeight,20,{trailing:!0}),n.throttledResizeDone=Object(d.throttle)(function(){a.resizeDone()},50),n}return a.c(t,e),Object.defineProperty(t.prototype,"largestHeight",{get:function(){return.9*document.documentElement.scrollHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallestHeight",{get:function(){return 100},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.render,n=e.isEditing,a=this.state.editorHeight;return i.a.createElement(i.a.Fragment,null,t(n?{height:a}:this.noStyles),n&&i.a.createElement("div",{className:"panel-editor-container__resizer"},i.a.createElement(je.a,{axis:"y",grid:[100,1],onDrag:this.onDrag,position:{x:0,y:0}},i.a.createElement("div",{className:"panel-editor-resizer"},i.a.createElement("div",{className:"panel-editor-resizer__handle"})))))},t}(r.PureComponent);n.d(t,"a",function(){return Ve});var Ve=function(e){function t(t){var n=e.call(this,t)||this;return n.specialPanels={},n.onPluginTypeChanged=function(e){n.loadPlugin(e.id)},n.onMouseEnter=function(){n.props.dashboard.setPanelFocus(n.props.panel.id)},n.onMouseLeave=function(){n.props.dashboard.setPanelFocus(0)},n.state={plugin:null,angularPanel:null},n.specialPanels.row=n.renderRow.bind(n),n.specialPanels["add-panel"]=n.renderAddPanel.bind(n),n}return a.c(t,e),t.prototype.isSpecial=function(e){return this.specialPanels[e]},t.prototype.renderRow=function(){return i.a.createElement(C,{panel:this.props.panel,dashboard:this.props.dashboard})},t.prototype.renderAddPanel=function(){return i.a.createElement(v,{panel:this.props.panel,dashboard:this.props.dashboard})},t.prototype.loadPlugin=function(e){return a.b(this,void 0,void 0,function(){var t,n,r,i;return a.d(this,function(a){switch(a.label){case 0:return this.isSpecial(e)?[2]:(t=this.props.panel,this.state.plugin&&this.state.plugin.id===e?[3,5]:(n=o.a.panels[e]||w(e),r=null!=this.state.angularPanel,this.cleanUpAngularPanel(),t.type!==e&&this.props.panel.changeType(e,r),n.exports?(this.setState({plugin:n,angularPanel:null}),[3,5]):[3,1]));case 1:return a.trys.push([1,3,,4]),i=n,[4,Object(u.a)(n.module)];case 2:return i.exports=a.sent(),[3,4];case 3:return a.sent(),n=w(e),[3,4];case 4:this.setState({plugin:n,angularPanel:null}),a.label=5;case 5:return[2]}})})},t.prototype.componentDidMount=function(){this.loadPlugin(this.props.panel.type)},t.prototype.componentDidUpdate=function(){if(this.element&&!this.state.angularPanel){var e=Object(c.a)(),t={panel:this.props.panel,dashboard:this.props.dashboard},n=e.load(this.element,t,'<plugin-component type="panel" class="panel-height-helper"></plugin-component>');this.setState({angularPanel:n})}},t.prototype.cleanUpAngularPanel=function(){this.state.angularPanel&&(this.state.angularPanel.destroy(),this.element=null)},t.prototype.componentWillUnmount=function(){this.cleanUpAngularPanel()},t.prototype.renderReactPanel=function(){var e=this.props,t=e.dashboard,n=e.panel,a=e.isFullscreen,r=this.state.plugin;return i.a.createElement(H,{plugin:r,panel:n,dashboard:t,isFullscreen:a})},t.prototype.renderAngularPanel=function(){var e=this;return i.a.createElement("div",{ref:function(t){return e.element=t},className:"panel-height-helper"})},t.prototype.render=function(){var e=this,t=this.props,n=t.panel,a=t.dashboard,r=t.isFullscreen,o=t.isEditing,s=this.state,c=s.plugin,u=s.angularPanel;if(this.isSpecial(n.type))return this.specialPanels[n.type]();if(!c||!c.exports)return null;var d=l()({"panel-editor-container":o,"panel-height-helper":!o}),p=l()({"panel-wrapper":!0,"panel-wrapper--edit":o,"panel-wrapper--view":r&&!o});return i.a.createElement("div",{className:d},i.a.createElement(Ue,{isEditing:o,panel:n,render:function(t){return i.a.createElement("div",{className:p,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:t},c.exports.reactPanel&&e.renderReactPanel(),c.exports.PanelCtrl&&e.renderAngularPanel())}}),n.isEditing&&i.a.createElement(qe,{panel:n,plugin:c,dashboard:a,angularPanel:u,onTypeChanged:this.onPluginTypeChanged}))},t}(r.PureComponent)},,function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(6),s=n(60);function l(e){var t=e.item;return t.userAvatarUrl?i.a.createElement("img",{className:"filter-table__avatar",src:t.userAvatarUrl}):t.teamAvatarUrl?i.a.createElement("img",{className:"filter-table__avatar",src:t.teamAvatarUrl}):"Editor"===t.role?i.a.createElement("i",{style:{width:"25px",height:"25px"},className:"gicon gicon-editor"}):i.a.createElement("i",{style:{width:"25px",height:"25px"},className:"gicon gicon-viewer"})}function c(e){var t=e.item;return t.userId?i.a.createElement("span",{className:"filter-table__weak-italic"},"(User)"):t.teamId?i.a.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):i.a.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPermissionChanged=function(e){t.props.onPermissionChanged(t.props.item,e.value)},t.onRemoveItem=function(){t.props.onRemoveItem(t.props.item)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.folderInfo,a=-1===t.dashboardId&&!t.inherited,r=s.e.find(function(e){return e.value===t.permission});return i.a.createElement("tr",{className:function(e){return e?"gf-form-disabled":""}(t.inherited)},i.a.createElement("td",{style:{width:"1%"}},i.a.createElement(l,{item:t})),i.a.createElement("td",{style:{width:"90%"}},t.name," ",i.a.createElement(c,{item:t})),i.a.createElement("td",null,t.inherited&&n&&i.a.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",i.a.createElement("a",{className:"text-link",href:n.url+"/permissions"},n.title)," "),a&&i.a.createElement("em",{className:"muted no-wrap"},"Default Permission")),i.a.createElement("td",{className:"query-keyword"},"Can"),i.a.createElement("td",null,i.a.createElement("div",{className:"gf-form"},i.a.createElement(o.Select,{isSearchable:!1,options:s.e,onChange:this.onPermissionChanged,isDisabled:t.inherited,className:"gf-form-select-box__control--menu-right",value:r}))),i.a.createElement("td",null,t.inherited?i.a.createElement("button",{className:"btn btn-inverse btn-small"},i.a.createElement("i",{className:"fa fa-lock"})):i.a.createElement("a",{className:"btn btn-danger btn-small",onClick:this.onRemoveItem},i.a.createElement("i",{className:"fa fa-remove"}))))},t}(r.PureComponent),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.item,t=s.e.find(function(t){return t.value===e.permission});return i.a.createElement("tr",{className:"gf-form-disabled"},i.a.createElement("td",{style:{width:"1%"}},i.a.createElement("i",{style:{width:"25px",height:"25px"},className:"gicon gicon-shield"})),i.a.createElement("td",{style:{width:"90%"}},e.name,i.a.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),i.a.createElement("td",null),i.a.createElement("td",{className:"query-keyword"},"Can"),i.a.createElement("td",null,i.a.createElement("div",{className:"gf-form"},i.a.createElement(o.Select,{options:s.e,onChange:function(){},isDisabled:!0,className:"gf-form-select-box__control--menu-right",value:t}))),i.a.createElement("td",null,i.a.createElement("button",{className:"btn btn-inverse btn-small"},i.a.createElement("i",{className:"fa fa-lock"}))))},t}(r.Component),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.items,n=e.onRemoveItem,a=e.onPermissionChanged,r=e.isFetching,o=e.folderInfo;return i.a.createElement("table",{className:"filter-table gf-form-group"},i.a.createElement("tbody",null,i.a.createElement(d,{key:0,item:{name:"Admin",permission:4,icon:"fa fa-fw fa-street-view"}}),t.map(function(e,t){return i.a.createElement(u,{key:t+1,item:e,onRemoveItem:n,onPermissionChanged:a,folderInfo:o})}),!0===r&&t.length<1?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:4},i.a.createElement("em",null,"Loading permissions..."))):null,!1===r&&t.length<1?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:4},i.a.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))},t}(r.PureComponent);t.a=p},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(282),s=n(1),l=n.n(s),c=n(6),u=n(14),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!1},n.search=n.search.bind(n),n.debouncedSearch=Object(s.debounce)(n.search,300,{leading:!0,trailing:!0}),n}return a.c(t,e),t.prototype.search=function(e){var t=this,n=Object(u.a)();return this.setState({isLoading:!0}),l.a.isNil(e)&&(e=""),n.get("/api/teams/search?perpage=10&page=1&query="+e).then(function(e){var n=e.teams.map(function(e){return{id:e.id,value:e.id,label:e.name,name:e.name,imgUrl:e.avatarUrl}});return t.setState({isLoading:!1}),n})},t.prototype.render=function(){var e=this.props,t=e.onSelected,n=e.className,a=this.state.isLoading;return i.a.createElement("div",{className:"user-picker"},i.a.createElement(c.AsyncSelect,{isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:t,className:n,placeholder:"Select a team",noOptionsMessage:function(){return"No teams found"}}))},t}(r.Component),p=n(60),h=function(e){function t(t){var n=e.call(this,t)||this;return n.onTypeChanged=function(e){var t=e.target.value;switch(t){case p.a.User:case p.a.Team:n.setState({type:t,userId:0,teamId:0,role:void 0});break;case p.a.Editor:n.setState({type:t,userId:0,teamId:0,role:p.b.Editor});break;case p.a.Viewer:n.setState({type:t,userId:0,teamId:0,role:p.b.Viewer})}},n.onUserSelected=function(e){n.setState({userId:e&&!Array.isArray(e)?e.id:0})},n.onTeamSelected=function(e){n.setState({teamId:e&&!Array.isArray(e)?e.id:0})},n.onPermissionChanged=function(e){n.setState({permission:e.value})},n.onSubmit=function(e){return a.b(n,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return e.preventDefault(),[4,this.props.onAddPermission(this.state)];case 1:return t.sent(),this.setState(this.getCleanState()),[2]}})})},n.state=n.getCleanState(),n}return a.c(t,e),t.prototype.getCleanState=function(){return{userId:0,teamId:0,type:p.a.Team,permission:p.c.View}},t.prototype.isValid=function(){switch(this.state.type){case p.a.Team:return this.state.teamId>0;case p.a.User:return this.state.userId>0}return!0},t.prototype.render=function(){var e=this.props.onCancel,t=this.state,n=this.isValid();return i.a.createElement("div",{className:"gf-form-inline cta-form"},i.a.createElement("button",{className:"cta-form__close btn btn-transparent",onClick:e},i.a.createElement("i",{className:"fa fa-close"})),i.a.createElement("form",{name:"addPermission",onSubmit:this.onSubmit},i.a.createElement("h5",null,"Add Permission For"),i.a.createElement("div",{className:"gf-form-inline"},i.a.createElement("div",{className:"gf-form"},i.a.createElement("div",{className:"gf-form-select-wrapper"},i.a.createElement("select",{className:"gf-form-input gf-size-auto",value:t.type,onChange:this.onTypeChanged},p.d.map(function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.text)})))),t.type===p.a.User?i.a.createElement("div",{className:"gf-form"},i.a.createElement(o.a,{onSelected:this.onUserSelected,className:"min-width-20"})):null,t.type===p.a.Team?i.a.createElement("div",{className:"gf-form"},i.a.createElement(d,{onSelected:this.onTeamSelected,className:"min-width-20"})):null,i.a.createElement("div",{className:"gf-form"},i.a.createElement(c.Select,{isSearchable:!1,options:p.e,onChange:this.onPermissionChanged,className:"gf-form-select-box__control--menu-right"})),i.a.createElement("div",{className:"gf-form"},i.a.createElement("button",{"data-save-permission":!0,className:"btn btn-primary",type:"submit",disabled:!n},"Save")))))},t.defaultProps={showPermissionLevels:!0},t}(r.Component);t.a=h},,function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i});var a=function(e){var t=new RegExp(e.searchQuery,"i");return e.plugins.filter(function(e){return t.test(e.name)||t.test(e.info.author.name)||t.test(e.info.description)})},r=function(e){return e.searchQuery},i=function(e){return e.layoutMode}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(1),r=n.n(a),i=function(){function e(e,t){this.$scope=e,this.$injector=t,this.panel=this.panelCtrl.panel,this.isLastQuery=r.a.indexOf(this.panel.targets,this.target)===this.panel.targets.length-1}return e.prototype.refresh=function(){this.panelCtrl.refresh()},e}()},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(5),o=function(){function e(){}return e.alertToGraphThresholds=function(e){for(var t=0;t<e.alert.conditions.length;t++){var n=e.alert.conditions[t];if("query"===n.type){var a=n.evaluator,r=e.thresholds=[];switch(a.type){case"gt":var i=a.params[0];r.push({value:i,op:"gt"});break;case"lt":i=a.params[0];r.push({value:i,op:"lt"});break;case"outside_range":(o=a.params[0])>(s=a.params[1])?(r.push({value:o,op:"gt"}),r.push({value:s,op:"lt"})):(r.push({value:o,op:"lt"}),r.push({value:s,op:"gt"}));break;case"within_range":var o,s;(o=a.params[0])>(s=a.params[1])?(r.push({value:o,op:"lt"}),r.push({value:s,op:"gt"})):(r.push({value:o,op:"gt"}),r.push({value:s,op:"lt"}))}break}}for(var l=0,c=e.thresholds;l<c.length;l++){var u=c[l];u.fill=!0,u.line=!0,u.colorMode="critical"}return!0},e}(),s=n(36),l=n(53),c=n(7),u=n(9);n.d(t,"a",function(){return p});var d=function(){function e(e,t,n,a,r,i){var o=this;this.$scope=e,this.backendSrv=t,this.dashboardSrv=n,this.uiSegmentSrv=a,this.$q=r,this.datasourceSrv=i,this.enable=function(){o.panel.alert={},o.initModel(),o.panel.alert.for="5m"},this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.$scope.ctrl=this,this.subTabIndex=0,this.evalFunctions=l.a.evalFunctions,this.evalOperators=l.a.evalOperators,this.conditionTypes=l.a.conditionTypes,this.noDataModes=l.a.noDataModes,this.executionErrorModes=l.a.executionErrorModes,this.appSubUrl=c.a.appSubUrl,this.panelCtrl._enableAlert=this.enable}return e.$inject=["$scope","backendSrv","dashboardSrv","uiSegmentSrv","$q","datasourceSrv"],e.prototype.$onInit=function(){var e=this;this.addNotificationSegment=this.uiSegmentSrv.newPlusButton();var t=this.graphThresholdChanged.bind(this);return this.panelCtrl.events.on("threshold-changed",t),this.$scope.$on("$destroy",function(){e.panelCtrl.events.off("threshold-changed",t),e.panelCtrl.editingThresholds=!1,e.panelCtrl.render()}),this.notifications=[],this.alertNotifications=[],this.alertHistory=[],this.backendSrv.get("/api/alert-notifications").then(function(t){e.notifications=t,e.initModel(),e.validateModel()})},e.prototype.getAlertHistory=function(){var e=this;this.backendSrv.get("/api/annotations?dashboardId="+this.panelCtrl.dashboard.id+"&panelId="+this.panel.id+"&limit=50&type=alert").then(function(t){e.alertHistory=r.a.map(t,function(t){return t.time=e.dashboardSrv.getCurrent().formatDate(t.time,"MMM D, YYYY HH:mm:ss"),t.stateModel=l.a.getStateDisplayModel(t.newState),t.info=l.a.getAlertAnnotationInfo(t),t})})},e.prototype.getNotificationIcon=function(e){switch(e){case"email":return"fa fa-envelope";case"slack":return"fa fa-slack";case"victorops":return"fa fa-pagelines";case"webhook":return"fa fa-cubes";case"pagerduty":return"fa fa-bullhorn";case"opsgenie":return"fa fa-bell";case"hipchat":return"fa fa-mail-forward";case"pushover":return"fa fa-mobile";case"kafka":return"fa fa-random";case"teams":return"fa fa-windows"}return"fa fa-bell"},e.prototype.getNotifications=function(){var e=this;return this.$q.when(this.notifications.map(function(t){return e.uiSegmentSrv.newSegment(t.name)}))},e.prototype.changeTabIndex=function(e){this.subTabIndex=e,2===this.subTabIndex&&this.getAlertHistory()},e.prototype.notificationAdded=function(){var e=r.a.find(this.notifications,{name:this.addNotificationSegment.value});e&&(this.alertNotifications.push({name:e.name,iconClass:this.getNotificationIcon(e.type),isDefault:!1,uid:e.uid}),r.a.find(this.alert.notifications,function(t){return t.id===e.id||t.uid===e.uid})||this.alert.notifications.push({uid:e.uid}),this.addNotificationSegment.value=this.uiSegmentSrv.newPlusButton().value,this.addNotificationSegment.html=this.uiSegmentSrv.newPlusButton().html,this.addNotificationSegment.fake=!0)},e.prototype.removeNotification=function(e){r.a.remove(this.alert.notifications,function(t){return t.uid===e.uid||t.id===e.id}),r.a.remove(this.alertNotifications,function(t){return t.uid===e.uid||t.id===e.id})},e.prototype.initModel=function(){var e=this,t=this.alert=this.panel.alert;if(t){t.conditions=t.conditions||[],0===t.conditions.length&&t.conditions.push(this.buildDefaultCondition()),t.noDataState=t.noDataState||c.a.alertingNoDataOrNullValues,t.executionErrorState=t.executionErrorState||c.a.alertingErrorOrTimeout,t.frequency=t.frequency||"1m",t.handler=t.handler||1,t.notifications=t.notifications||[],t.for=t.for||"0m";var n=this.panel.title+" alert";t.name=t.name||n,this.conditionModels=r.a.reduce(t.conditions,function(t,n){return t.push(e.buildConditionModel(n)),t},[]),o.alertToGraphThresholds(this.panel);for(var a=0,i=t.notifications;a<i.length;a++){var s=i[a],l=r.a.find(this.notifications,{uid:s.uid});l||(l=r.a.find(this.notifications,{id:s.id})),l&&!1===l.isDefault&&(l.iconClass=this.getNotificationIcon(l.type),this.alertNotifications.push(l))}for(var u=0,d=this.notifications;u<d.length;u++){var p=d[u];p.isDefault&&(p.iconClass=this.getNotificationIcon(p.type),p.bgColor="#00678b",this.alertNotifications.push(p))}this.panelCtrl.editingThresholds=!0,this.panelCtrl.render()}},e.prototype.graphThresholdChanged=function(e){for(var t=0,n=this.alert.conditions;t<n.length;t++){var a=n[t];if("query"===a.type){a.evaluator.params[e.handleIndex]=e.threshold.value,this.evaluatorParamsChanged();break}}},e.prototype.buildDefaultCondition=function(){return{type:"query",query:{params:["A","5m","now"]},reducer:{type:"avg",params:[]},evaluator:{type:"gt",params:[null]},operator:{type:"and"}}},e.prototype.validateModel=function(){var e=this;if(this.alert)for(var t,n=null,a=0,r=this.alert.conditions;a<r.length;a++){var i=r[a];if("query"===i.type){for(var o=0,s=this.panel.targets;o<s.length;o++){var l=s[o];if(t||(t=l),i.query.params[0]===l.refId){n=l;break}}n||(t?(i.query.params[0]=t.refId,n=t):this.error="Could not find any metric queries");var c=n.datasource||this.panel.datasource;this.datasourceSrv.get(c).then(function(t){t.meta.alerting?t.targetContainsTemplate&&t.targetContainsTemplate(n)?e.error="Template variables are not supported in alert queries":e.error="":e.error="The datasource does not support alerting queries"})}}},e.prototype.buildConditionModel=function(e){var t={source:e,type:e.type};return t.queryPart=new s.a(e.query,l.a.alertQueryDef),t.reducerPart=l.a.createReducerPart(e.reducer),t.evaluator=e.evaluator,t.operator=e.operator,t},e.prototype.handleQueryPartEvent=function(e,t){var n=this;switch(t.name){case"action-remove-part":break;case"get-part-actions":return this.$q.when([]);case"part-param-changed":this.validateModel();case"get-param-options":var a=this.panel.targets.map(function(e){return n.uiSegmentSrv.newSegment({value:e.refId})});return this.$q.when(a)}},e.prototype.handleReducerPartEvent=function(e,t){switch(t.name){case"action":e.source.reducer.type=t.action.value,e.reducerPart=l.a.createReducerPart(e.source.reducer);break;case"get-part-actions":for(var n=[],a=0,r=l.a.reducerTypes;a<r.length;a++){var i=r[a];i.value!==e.source.reducer.type&&n.push(i)}return this.$q.when(n)}},e.prototype.addCondition=function(e){var t=this.buildDefaultCondition();this.alert.conditions.push(t),this.conditionModels.push(this.buildConditionModel(t))},e.prototype.removeCondition=function(e){this.alert.conditions.splice(e,1),this.conditionModels.splice(e,1)},e.prototype.delete=function(){var e=this;u.b.emit("confirm-modal",{title:"Delete Alert",text:"Are you sure you want to delete this alert rule?",text2:"You need to save dashboard for the delete to take effect",icon:"fa-trash",yesText:"Delete",onConfirm:function(){delete e.panel.alert,e.alert=null,e.panel.thresholds=[],e.conditionModels=[],e.panelCtrl.alertState=null,e.panelCtrl.render()}})},e.prototype.evaluatorParamsChanged=function(){o.alertToGraphThresholds(this.panel),this.panelCtrl.render()},e.prototype.evaluatorTypeChanged=function(e){switch(e.type){case"lt":case"gt":e.params=[e.params[0]];break;case"within_range":case"outside_range":e.params=[e.params[0],e.params[1]];break;case"no_value":e.params=[]}this.evaluatorParamsChanged()},e.prototype.clearHistory=function(){var e=this;u.b.emit("confirm-modal",{title:"Delete Alert History",text:"Are you sure you want to remove all history & annotations for this alert?",icon:"fa-trash",yesText:"Yes",onConfirm:function(){e.backendSrv.post("/api/annotations/mass-delete",{dashboardId:e.panelCtrl.dashboard.id,panelId:e.panel.id}).then(function(t){e.alertHistory=[],e.panelCtrl.refresh()})}})},e}();function p(){return{restrict:"E",scope:!0,templateUrl:"public/app/features/alerting/partials/alert_tab.html",controller:d}}i.c.directive("alertTab",p)},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(2),r=n(0),i=n.n(r),o=n(6),s=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=n.props.datasources.find(function(t){return t.name===e.value});n.props.onChange(t)},n}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.datasources,n=e.current,a=e.autoFocus,r=e.onBlur,s=t.map(function(e){return{value:e.name,label:e.name,imgUrl:e.meta.info.logos.small}}),l=n&&{label:n.name,value:n.name,imgUrl:n.meta.info.logos.small};return i.a.createElement("div",{className:"gf-form-inline"},i.a.createElement(o.Select,{className:"ds-picker",isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:this.onChange,options:s,autoFocus:a,onBlur:r,openMenuOnFocus:!0,maxMenuHeight:500,placeholder:"Select datasource",noOptionsMessage:function(){return"No datasources found"},value:l}))},t.defaultProps={autoFocus:!1},t}(r.PureComponent)},function(e,t,n){"use strict";E.$inject=["$sanitize","dashboardSrv","contextSrv","$compile"];var a=n(8),r=n.n(a),i=n(1),o=n.n(i),s=n(10),l=n.n(s),c=n(5),u=function(){function e(e,t){this.datasourceSrv=t,this.annotationDefaults={name:"",datasource:null,iconColor:"rgba(255, 96, 96, 1)",enable:!0,showIn:0,hide:!1},this.showOptions=[{text:"All Panels",value:0},{text:"Specific Panels",value:1}],e.ctrl=this,this.dashboard=e.dashboard,this.mode="list",this.datasources=t.getAnnotationSources(),this.annotations=this.dashboard.annotations.list,this.reset(),this.onColorChange=this.onColorChange.bind(this)}return e.$inject=["$scope","datasourceSrv"],e.prototype.datasourceChanged=function(){var e=this;return this.datasourceSrv.get(this.currentAnnotation.datasource).then(function(t){e.currentDatasource=t})},e.prototype.edit=function(e){this.currentAnnotation=e,this.currentAnnotation.showIn=this.currentAnnotation.showIn||0,this.currentIsNew=!1,this.datasourceChanged(),this.mode="edit",l()(".tooltip.in").remove()},e.prototype.reset=function(){this.currentAnnotation=r.a.copy(this.annotationDefaults),this.currentAnnotation.datasource=this.datasources[0].name,this.currentIsNew=!0,this.datasourceChanged()},e.prototype.update=function(){this.reset(),this.mode="list"},e.prototype.setupNew=function(){this.mode="new",this.reset()},e.prototype.backToList=function(){this.mode="list"},e.prototype.move=function(e,t){o.a.move(this.annotations,e,e+t)},e.prototype.add=function(){this.annotations.push(this.currentAnnotation),this.reset(),this.mode="list",this.dashboard.updateSubmenuVisibility()},e.prototype.removeAnnotation=function(e){var t=o.a.indexOf(this.annotations,e);this.annotations.splice(t,1),this.dashboard.updateSubmenuVisibility()},e.prototype.onColorChange=function(e){this.currentAnnotation.iconColor=e},e}();function d(e,t){var n=o.a.partition(e,"regionId"),a=n[0],r=n[1],i=function(e,t){var n=o.a.filter(e,function(e){return e.regionId}),a=o.a.groupBy(n,"regionId");return a=o.a.compact(o.a.map(a,function(e){var n=o.a.head(e);return e&&e.length>1?(n.timeEnd=e[1].time,n.isRegion=!0,n):e&&e.length?(n.time&&n.timeEnd||(function(e){return e.id&&e.id===e.regionId}(n)?n.timeEnd=t.to.valueOf()-1:(n.timeEnd=n.time,n.time=t.from.valueOf()+1),n.isRegion=!0),n):void 0}))}(a,t.range);return e=o.a.concat(i,r)}function p(e){return"panel-alert"===e.eventType}c.c.controller("AnnotationsEditorCtrl",u);var h=function(){function e(e,t,n,a,r){this.$rootScope=e,this.$q=t,this.datasourceSrv=n,this.backendSrv=a,this.timeSrv=r}return e.$inject=["$rootScope","$q","datasourceSrv","backendSrv","timeSrv"],e.prototype.init=function(e){this.clearPromiseCaches(),e.on("refresh",this.clearPromiseCaches.bind(this))},e.prototype.clearPromiseCaches=function(){this.globalAnnotationsPromise=null,this.alertStatesPromise=null,this.datasourcePromises=null},e.prototype.getAnnotations=function(e){var t=this;return this.$q.all([this.getGlobalAnnotations(e),this.getAlertStates(e)]).then(function(t){var n=o.a.flattenDeep(t[0]);return{annotations:n=d(n=function(e){var t=[],n=o.a.partition(e,"id"),a=o.a.groupBy(n[0],"id");return t=o.a.map(a,function(e){return e.length>1&&!o.a.every(e,p)?o.a.find(e,function(e){return"panel-alert"!==e.eventType}):o.a.head(e)}),t=o.a.concat(t,n[1])}(n=o.a.filter(n,function(t){return!t.panelId||"dashboard"!==t.source.type||t.panelId===e.panel.id})),e),alertState:o.a.find(t[1],{panelId:e.panel.id})}}).catch(function(e){return!e.message&&e.data&&e.data.message&&(e.message=e.data.message),console.log("AnnotationSrv.query error",e),t.$rootScope.appEvent("alert-error",["Annotation Query Failed",e.message||e]),[]})},e.prototype.getAlertStates=function(e){return e.dashboard.id?e.panel&&!e.panel.alert?this.$q.when([]):"now"!==e.range.raw.to?this.$q.when([]):this.alertStatesPromise?this.alertStatesPromise:(this.alertStatesPromise=this.backendSrv.get("/api/alerts/states-for-dashboard",{dashboardId:e.dashboard.id}),this.alertStatesPromise):this.$q.when([])},e.prototype.getGlobalAnnotations=function(e){var t=this,n=e.dashboard;if(this.globalAnnotationsPromise)return this.globalAnnotationsPromise;for(var a=this.timeSrv.timeRange(),i=[],o=[],s=function(e){if(!e.enable)return"continue";if(e.snapshotData)return{value:l.translateQueryResult(e,e.snapshotData)};var s=l.datasourceSrv.get(e.datasource);o.push(s),i.push(s.then(function(t){return t.annotationQuery({range:a,rangeRaw:a.raw,annotation:e,dashboard:n})}).then(function(a){return n.snapshot&&(e.snapshotData=r.a.copy(a)),t.translateQueryResult(e,a)}))},l=this,c=0,u=n.annotations.list;c<u.length;c++){var d=s(u[c]);if("object"==typeof d)return d.value}return this.datasourcePromises=this.$q.all(o),this.globalAnnotationsPromise=this.$q.all(i),this.globalAnnotationsPromise},e.prototype.saveAnnotationEvent=function(e){return this.globalAnnotationsPromise=null,this.backendSrv.post("/api/annotations",e)},e.prototype.updateAnnotationEvent=function(e){return this.globalAnnotationsPromise=null,this.backendSrv.put("/api/annotations/"+e.id,e)},e.prototype.deleteAnnotationEvent=function(e){this.globalAnnotationsPromise=null;var t="/api/annotations/"+e.id;return e.isRegion&&(t="/api/annotations/region/"+e.regionId),this.backendSrv.delete(t)},e.prototype.translateQueryResult=function(e,t){e.snapshotData&&delete(e=r.a.copy(e)).snapshotData;for(var n=0,a=t;n<a.length;n++){a[n].source=e}return t},e}();c.c.service("annotationsSrv",h);var f=n(4),m=n.n(f),g=n(17),v=function(){function e(e){this.annotationsSrv=e,this.event.panelId=this.panelCtrl.panel.id,this.event.dashboardId=this.panelCtrl.dashboard.id,this.event.time=b(this.event.time),this.event.isRegion&&(this.event.timeEnd=b(this.event.timeEnd)),this.timeFormated=this.panelCtrl.dashboard.formatDate(this.event.time)}return e.$inject=["annotationsSrv"],e.prototype.save=function(){var e=this;if(this.form.$valid){var t=o.a.cloneDeep(this.event);t.time=t.time.valueOf(),t.timeEnd=0,t.isRegion&&(t.timeEnd=this.event.timeEnd.valueOf(),t.timeEnd<t.time)?console.log("invalid time"):t.id?this.annotationsSrv.updateAnnotationEvent(t).then(function(){e.panelCtrl.refresh(),e.close()}).catch(function(){e.panelCtrl.refresh(),e.close()}):this.annotationsSrv.saveAnnotationEvent(t).then(function(){e.panelCtrl.refresh(),e.close()}).catch(function(){e.panelCtrl.refresh(),e.close()})}},e.prototype.delete=function(){var e=this;return this.annotationsSrv.deleteAnnotationEvent(this.event).then(function(){e.panelCtrl.refresh(),e.close()}).catch(function(){e.panelCtrl.refresh(),e.close()})},e}();function b(e){if(e&&o.a.isNumber(e)){var t=Number(e);return m()(t)}return e}g.d.directive("eventEditor",function(){return{restrict:"E",controller:v,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/features/annotations/partials/event_editor.html",scope:{panelCtrl:"=",event:"=",close:"&"}}});var y=n(59),w=n.n(y),x=n(6),S=function(){return function(){}}(),k=function(){function e(e){this.panelCtrl=e}return e.prototype.editorClosed=function(){this.event=null,this.editorOpen=!1,this.panelCtrl.render()},e.prototype.editorOpened=function(){this.editorOpen=!0},e.prototype.updateTime=function(e){this.event||(this.event=new S,this.event.dashboardId=this.panelCtrl.dashboard.id,this.event.panelId=this.panelCtrl.panel.id),this.event.time=m()(e.from),this.event.isRegion=!1,e.to&&(this.event.timeEnd=m()(e.to),this.event.isRegion=!0),this.panelCtrl.render()},e.prototype.editEvent=function(e,t){this.event=e,this.panelCtrl.render()},e.prototype.addFlotEvents=function(e,t){if(this.event||0!==e.length){var n={$__alerting:{color:x.ALERTING_COLOR,position:"BOTTOM",markerSize:5},$__ok:{color:x.OK_COLOR,position:"BOTTOM",markerSize:5},$__no_data:{color:x.NO_DATA_COLOR,position:"BOTTOM",markerSize:5},$__pending:{color:x.PENDING_COLOR,position:"BOTTOM",markerSize:5},$__editing:{color:x.DEFAULT_ANNOTATION_COLOR,position:"BOTTOM",markerSize:5}};if(this.event)e=this.event.isRegion?[{isRegion:!0,min:this.event.time.valueOf(),timeEnd:this.event.timeEnd.valueOf(),text:this.event.text,eventType:"$__editing",editModel:this.event}]:[{min:this.event.time.valueOf(),text:this.event.text,editModel:this.event,eventType:"$__editing"}];else for(var a=0;a<e.length;a++){var r=e[a];r.min=r.time,r.max=r.time,r.eventType=r.source.name,r.newState?r.eventType="$__"+r.newState:n[r.source.name]||(n[r.source.name]={color:r.source.iconColor,position:"BOTTOM",markerSize:5})}!function(e,t){var n,a=t.grid.markings,r=x.DEFAULT_ANNOTATION_COLOR;o.a.each(e,function(e){n=function(e,t){var n=w()(e);return n.isValid()?(n.setAlpha(t),n.toRgbString()):e}(n=e.source&&e.source.iconColor||r,x.REGION_FILL_ALPHA),a.push({xaxis:{from:e.min,to:e.timeEnd},color:n})})}(function(e){return o.a.filter(e,"isRegion")}(e),t);t.grid.eventSectionHeight=7,t.xaxis.eventSectionHeight=20,t.events={levels:o.a.keys(n).length+1,data:e,types:n,manager:this}}},e}();var C=n(53);function E(e,t,n,a){function r(t){try{return e(t)}catch(e){return console.log("Could not sanitize annotation string, html escaping instead"),o.a.escape(t)}}return{restrict:"E",scope:{event:"=",onEdit:"&"},link:function(e,n){var i=e.event,s=i.title,c=i.text,u=t.getCurrent(),d='<div class="graph-annotation">',p="";if(i.alertId){var h=C.a.getStateDisplayModel(i.newState);p=h.stateClass,s='<i class="'+h.iconClass+'"></i> '+h.text,c=C.a.getAlertAnnotationInfo(i),i.text&&(c=c+"<br />"+i.text)}else s&&(c=s+"<br />"+(o.a.isString(c)?c:""),s="");var f='<div class="graph-annotation__header">';i.login&&(f+='<div class="graph-annotation__user" bs-tooltip="\'Created by '+i.login+'\'"><img src="'+i.avatarUrl+'" /></div>'),f+='\n          <span class="graph-annotation__title '+p+'">'+r(s)+'</span>\n          <span class="graph-annotation__time">'+u.formatDate(i.min)+"</span>\n      ",i.id&&u.meta.canEdit&&(f+='\n          <span class="pointer graph-annotation__edit-icon" ng-click="onEdit()">\n            <i class="fa fa-pencil-square"></i>\n          </span>\n        '),d+=f+="</div>",d+='<div class="graph-annotation__body">',c&&(d+="<div>"+r(c.replace(/\n/g,"<br>"))+"</div>");var m=i.tags;m&&m.length&&(e.tags=m,d+='<span class="label label-tag small" ng-repeat="tag in tags" tag-color-from-name="tag">{{tag}}</span><br/>'),d+="</div>",d+="</div>",l()(d).appendTo(n),a(n.contents())(e)}}}c.c.directive("annotationTooltip",E),n.d(t,"a",function(){return k})},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(62),l=n(9),c=n(6),u=function(e){var t=e.icon,n=e.tooltip,a=e.classSuffix,r=e.onClick,o=e.href;return r?i.a.createElement(c.Tooltip,{content:n},i.a.createElement("button",{className:"btn navbar-button navbar-button--"+a,onClick:r},i.a.createElement("i",{className:t}))):i.a.createElement(c.Tooltip,{content:n},i.a.createElement("a",{className:"btn navbar-button navbar-button--"+a,href:o},i.a.createElement("i",{className:t})))},d=n(27),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onOpenSearch=function(){l.a.emit("show-dash-search")},n.onClose=function(){n.props.editview?n.props.updateLocation({query:{editview:null},partial:!0}):n.props.updateLocation({query:{panelId:null,edit:null,fullscreen:null},partial:!0})},n.onToggleTVMode=function(){l.a.emit("toggle-kiosk-mode")},n.onSave=function(){n.props.$injector.get("dashboardSrv").saveDashboard()},n.onOpenSettings=function(){n.props.updateLocation({query:{editview:"settings"},partial:!0})},n.onStarDashboard=function(){var e=n.props,t=e.dashboard;e.$injector.get("dashboardSrv").starDashboard(t.id,t.meta.isStarred).then(function(e){t.meta.isStarred=e,n.forceUpdate()})},n.onPlaylistPrev=function(){n.playlistSrv.prev()},n.onPlaylistNext=function(){n.playlistSrv.next()},n.onPlaylistStop=function(){n.playlistSrv.stop(),n.forceUpdate()},n.onOpenShare=function(){var e=n.props.$injector.get("$rootScope").$new();e.tabIndex=0,e.dashboard=n.props.dashboard,l.a.emit("show-modal",{src:"public/app/features/dashboard/components/ShareModal/template.html",scope:e})},n.playlistSrv=n.props.$injector.get("playlistSrv"),n}return a.c(t,e),t.prototype.componentDidMount=function(){var e=Object(s.a)(),t={dashboard:this.props.dashboard};this.timepickerCmp=e.load(this.timePickerEl,t,'<gf-time-picker class="gf-timepicker-nav" dashboard="dashboard" ng-if="!dashboard.timepicker.hidden" />')},t.prototype.componentWillUnmount=function(){this.timepickerCmp&&this.timepickerCmp.destroy()},t.prototype.renderDashboardTitleSearchButton=function(){var e=this.props.dashboard,t=e.meta.folderTitle,n=e.meta.folderId>0;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("a",{className:"navbar-page-btn",onClick:this.onOpenSearch},!this.isInFullscreenOrSettings&&i.a.createElement("i",{className:"gicon gicon-dashboard"}),n&&i.a.createElement("span",{className:"navbar-page-btn--folder"},t," / "),e.title,i.a.createElement("i",{className:"fa fa-caret-down"}))),i.a.createElement("div",{className:"navbar__spacer"}))},Object.defineProperty(t.prototype,"isInFullscreenOrSettings",{get:function(){return this.props.editview||this.props.isFullscreen},enumerable:!0,configurable:!0}),t.prototype.renderBackButton=function(){return i.a.createElement("div",{className:"navbar-edit"},i.a.createElement(c.Tooltip,{content:"Go back (Esc)"},i.a.createElement("button",{className:"navbar-edit__back-btn",onClick:this.onClose},i.a.createElement("i",{className:"fa fa-arrow-left"}))))},t.prototype.render=function(){var e=this,t=this.props,n=t.dashboard,a=t.onAddPanel,r=n.meta,o=r.canStar,s=r.canSave,l=r.canShare,c=r.showSettings,d=r.isStarred,p=n.snapshot,h=p&&p.originalUrl;return i.a.createElement("div",{className:"navbar"},this.isInFullscreenOrSettings&&this.renderBackButton(),this.renderDashboardTitleSearchButton(),this.playlistSrv.isPlaying&&i.a.createElement("div",{className:"navbar-buttons navbar-buttons--playlist"},i.a.createElement(u,{tooltip:"Go to previous dashboard",classSuffix:"tight",icon:"fa fa-step-backward",onClick:this.onPlaylistPrev}),i.a.createElement(u,{tooltip:"Stop playlist",classSuffix:"tight",icon:"fa fa-stop",onClick:this.onPlaylistStop}),i.a.createElement(u,{tooltip:"Go to next dashboard",classSuffix:"tight",icon:"fa fa-forward",onClick:this.onPlaylistNext})),i.a.createElement("div",{className:"navbar-buttons navbar-buttons--actions"},s&&i.a.createElement(u,{tooltip:"Add panel",classSuffix:"add-panel",icon:"gicon gicon-add-panel",onClick:a}),o&&i.a.createElement(u,{tooltip:"Mark as favorite",classSuffix:"star",icon:d?"fa fa-star":"fa fa-star-o",onClick:this.onStarDashboard}),l&&i.a.createElement(u,{tooltip:"Share dashboard",classSuffix:"share",icon:"fa fa-share-square-o",onClick:this.onOpenShare}),s&&i.a.createElement(u,{tooltip:"Save dashboard",classSuffix:"save",icon:"fa fa-save",onClick:this.onSave}),h&&i.a.createElement(u,{tooltip:"Open original dashboard",classSuffix:"snapshot-origin",icon:"fa fa-link",href:h}),c&&i.a.createElement(u,{tooltip:"Dashboard settings",classSuffix:"settings",icon:"fa fa-cog",onClick:this.onOpenSettings})),i.a.createElement("div",{className:"navbar-buttons navbar-buttons--tv"},i.a.createElement(u,{tooltip:"Cycle view mode",classSuffix:"tv",icon:"fa fa-desktop",onClick:this.onToggleTVMode})),i.a.createElement("div",{className:"gf-timepicker-nav",ref:function(t){return e.timePickerEl=t}}))},t}(r.PureComponent),h={updateLocation:d.c},f=Object(o.b)(function(){return{}},h)(p);n.d(t,"a",function(){return f})},function(e,t,n){"use strict";var a=n(8),r=n.n(a),i=n(1),o=n.n(i),s=function(){function e(e,t){this.variableSrv=e,this.$location=t,this.annotations=this.dashboard.templating.list,this.variables=this.variableSrv.variables}return e.$inject=["variableSrv","$location"],e.prototype.annotationStateChanged=function(){this.dashboard.startRefresh()},e.prototype.variableUpdated=function(e){this.variableSrv.variableUpdated(e,!0)},e.prototype.openEditView=function(e){var t=o.a.extend(this.$location.search(),{editview:e});this.$location.search(t)},e}();r.a.module("grafana.directives").directive("dashboardSubmenu",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/SubMenu/template.html",controller:s,bindToController:!0,controllerAs:"ctrl",scope:{dashboard:"="}}});var l=n(2),c=n(0),u=n.n(c),d=n(62),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.c(t,e),t.prototype.componentDidMount=function(){var e=Object(d.a)(),t={dashboard:this.props.dashboard};this.angularCmp=e.load(this.element,t,'<dashboard-submenu dashboard="dashboard" />')},t.prototype.componentWillUnmount=function(){this.angularCmp&&this.angularCmp.destroy()},t.prototype.render=function(){var e=this;return u.a.createElement("div",{ref:function(t){return e.element=t}})},t}(c.PureComponent);n.d(t,"a",function(){return p})},function(e,t,n){"use strict";var a=n(17),r=n(10),i=n.n(r),o=n(1),s=n.n(o),l=n(8),c=n.n(l),u=n(7),d=function(){function e(e,t,n,r,i,o){var s=this;this.$scope=e,this.$route=t,this.$location=n,this.$rootScope=r,this.backendSrv=i,this.dashboardSrv=o,e.dashboard=this.dashboard,this.$scope.$on("$destroy",function(){s.dashboard.updateSubmenuVisibility(),setTimeout(function(){s.$rootScope.appEvent("dash-scroll",{restore:!0}),s.dashboard.startRefresh()})}),this.canSaveAs=a.c.hasEditPermissionInFolders,this.canSave=this.dashboard.meta.canSave,this.canDelete=this.dashboard.meta.canSave,this.buildSectionList(),this.onRouteUpdated(),this.$rootScope.onAppEvent("$routeUpdate",this.onRouteUpdated.bind(this),e),this.$rootScope.appEvent("dash-scroll",{animate:!1,pos:0}),this.$rootScope.onAppEvent("dashboard-saved",this.onPostSave.bind(this),e)}return e.$inject=["$scope","$route","$location","$rootScope","backendSrv","dashboardSrv"],e.prototype.buildSectionList=function(){this.sections=[],this.dashboard.meta.canEdit&&(this.sections.push({title:"General",id:"settings",icon:"gicon gicon-preferences"}),this.sections.push({title:"Annotations",id:"annotations",icon:"gicon gicon-annotation"}),this.sections.push({title:"Variables",id:"templating",icon:"gicon gicon-variable"}),this.sections.push({title:"Links",id:"links",icon:"gicon gicon-link"})),this.dashboard.id&&this.dashboard.meta.canSave&&this.sections.push({title:"Versions",id:"versions",icon:"fa fa-fw fa-history"}),this.dashboard.id&&this.dashboard.meta.canAdmin&&this.sections.push({title:"Permissions",id:"permissions",icon:"fa fa-fw fa-lock"}),this.dashboard.meta.canMakeEditable&&this.sections.push({title:"General",icon:"gicon gicon-preferences",id:"make_editable"}),this.sections.push({title:"JSON Model",id:"dashboard_json",icon:"gicon gicon-json"});for(var e=this.$location.search(),t=this.$location.path(),n=0,a=this.sections;n<a.length;n++){var r=a[n],o=s.a.defaults({editview:r.id},e);r.url=u.a.appSubUrl+t+"?"+i.a.param(o)}},e.prototype.onRouteUpdated=function(){this.viewId=this.$location.search().editview,this.viewId&&(this.json=c.a.toJson(this.dashboard.getSaveModelClone(),!0)),"settings"===this.viewId&&this.dashboard.meta.canMakeEditable&&(this.viewId="make_editable"),s.a.find(this.sections,{id:this.viewId})||(this.sections.unshift({title:"Not found",id:"404",icon:"fa fa-fw fa-warning"}),this.viewId="404")},e.prototype.openSaveAsModal=function(){this.dashboardSrv.showSaveAsModal()},e.prototype.saveDashboard=function(){this.dashboardSrv.saveDashboard()},e.prototype.saveDashboardJson=function(){var e=this;this.dashboardSrv.saveJSONDashboard(this.json).then(function(){e.$route.reload()})},e.prototype.onPostSave=function(){this.hasUnsavedFolderChange=!1},e.prototype.hideSettings=function(){var e=this,t=this.$location.search();delete t.editview,setTimeout(function(){e.$rootScope.$apply(function(){e.$location.search(t)})})},e.prototype.makeEditable=function(){this.dashboard.editable=!0,this.dashboard.meta.canMakeEditable=!1,this.dashboard.meta.canEdit=!0,this.dashboard.meta.canSave=!0,this.canDelete=!0,this.viewId="settings",this.buildSectionList();var e=s.a.find(this.sections,{id:this.viewId});this.$location.url(e.url)},e.prototype.deleteDashboard=function(){var e=this,t="",n=this.dashboard.title,r=s.a.sumBy(this.dashboard.panels,function(e){return e.alert?1:0});r>0&&(t="DELETE",n="This dashboard contains "+r+" alerts. Deleting this dashboard will also delete those alerts"),a.b.emit("confirm-modal",{title:"Delete",text:"Do you want to delete this dashboard?",text2:n,icon:"fa-trash",confirmText:t,yesText:"Delete",onConfirm:function(){e.dashboard.meta.canSave=!1,e.deleteDashboardConfirmed()}})},e.prototype.deleteDashboardConfirmed=function(){var e=this;this.backendSrv.deleteDashboard(this.dashboard.uid).then(function(){a.b.emit("alert-success",["Dashboard Deleted",e.dashboard.title+" has been deleted"]),e.$location.url("/")})},e.prototype.onFolderChange=function(e){this.dashboard.meta.folderId=e.id,this.dashboard.meta.folderTitle=e.title,this.hasUnsavedFolderChange=!0},e.prototype.getFolder=function(){return{id:this.dashboard.meta.folderId,title:this.dashboard.meta.folderTitle,url:this.dashboard.meta.folderUrl}},e}();a.d.directive("dashboardSettings",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/DashboardSettings/template.html",controller:d,bindToController:!0,controllerAs:"ctrl",transclude:!0,scope:{dashboard:"="}}});var p=n(2),h=n(0),f=n.n(h),m=n(62),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p.c(t,e),t.prototype.componentDidMount=function(){var e=Object(m.a)(),t={dashboard:this.props.dashboard};this.angularCmp=e.load(this.element,t,'<dashboard-settings dashboard="dashboard" class="dashboard-settings" />')},t.prototype.componentWillUnmount=function(){this.angularCmp&&this.angularCmp.destroy()},t.prototype.render=function(){var e=this;return f.a.createElement("div",{className:"panel-height-helper",ref:function(t){return e.element=t}})},t}(h.PureComponent);n.d(t,"a",function(){return g})},,,,function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var a=function(e){return e.searchQuery},r=function(e){var t=new RegExp(e.searchQuery,"i");return e.items.filter(function(e){return t.test(e.name)||t.test(e.stateText)||t.test(e.info)})}},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var a=function(e){return e.keys.length},r=function(e){var t=RegExp(e.searchQuery,"i");return e.keys.filter(function(e){return t.test(e.name)||t.test(e.role)})}},,,,,,,function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(292),c=n(290),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={panel:null,notFound:!1},t}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.$injector,n=e.$scope,a=e.urlUid,r=e.urlType,i=e.urlSlug,o=e.routeInfo;this.props.initDashboard({$injector:t,$scope:n,urlSlug:i,urlUid:a,urlType:r,routeInfo:o,fixUrl:!1})},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.urlPanelId,a=t.dashboard;if(a&&!e.dashboard){var r=parseInt(n,10);a.expandParentRowFor(r);var i=a.getPanelById(r);if(!i)return void this.setState({notFound:!0});this.setState({panel:i})}},t.prototype.render=function(){var e=this.props,t=e.urlPanelId,n=e.dashboard,a=this.state,r=a.notFound,o=a.panel;return r?i.a.createElement("div",{className:"alert alert-error"},"Panel with id ",t," not found"):o?i.a.createElement("div",{className:"panel-solo"},i.a.createElement(l.a,{dashboard:n,panel:o,isEditing:!1,isFullscreen:!1})):i.a.createElement("div",null,"Loading & initializing dashboard")},t}(r.Component),d={initDashboard:c.a};t.a=Object(o.hot)(e)(Object(s.b)(function(e){return{urlUid:e.location.routeParams.uid,urlSlug:e.location.routeParams.slug,urlType:e.location.routeParams.type,urlPanelId:e.location.query.panelId,dashboard:e.dashboard.model}},d)(u))}).call(this,n(74)(e))},function(e,t,n){e.exports={panelhorizontalpadding:"10",panelverticalpadding:"5"}},,function(e,t){!function(e){e.plot.plugins.push({init:function(t){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},r=null;function i(e){n.active&&(d(e),t.getPlaceholder().trigger("plotselecting",[s()]))}function o(i){1==i.which&&(document.body.focus(),void 0!==document.onselectstart&&null==a.onselectstart&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==a.ondrag&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),u(n.first,i),n.active=!0,r=function(e){!function(e){r=null,void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart),void 0!==document.ondrag&&(document.ondrag=a.ondrag),n.active=!1,d(e),f()?l(e):(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){t.isSelecting=!1},10)}(e)},e(document).one("mouseup",r))}function s(){if(!f())return null;if(!n.show)return null;var a={},r=n.first,i=n.second,o=t.getAxes();return e.each(o,function(e,t){t.used&&(anyUsed=!1)}),e.each(o,function(e,t){t.used;var n=t.c2p(r[t.direction]),o=t.c2p(i[t.direction]);a[e]={from:Math.min(n,o),to:Math.max(n,o)}}),a}function l(e){var n=s();n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,t.getPlaceholder().trigger("plotselected",[n]),n.xaxis&&n.yaxis&&t.getPlaceholder().trigger("selected",[{x1:n.xaxis.from,y1:n.yaxis.from,x2:n.xaxis.to,y2:n.yaxis.to}])}function c(e,t,n){return t<e?e:t>n?n:t}function u(e,a){var r=t.getOptions(),i=t.getPlaceholder().offset(),o=t.getPlotOffset();e.x=c(0,a.pageX-i.left-o.left,t.width()),e.y=c(0,a.pageY-i.top-o.top,t.height()),"y"==r.selection.mode&&(e.x=e==n.first?0:t.width()),"x"==r.selection.mode&&(e.y=e==n.first?0:t.height())}function d(e){null!=e.pageX&&(u(n.second,e),f()?(t.isSelecting=!0,n.show=!0,t.triggerRedrawOverlay()):p(!0))}function p(e){n.show&&(n.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function h(e,n){var a,r,i,o,s=t.getAxes();for(var l in s)if((a=s[l]).direction==n&&(e[o=n+a.n+"axis"]||1!=a.n||(o=n+"axis"),e[o])){r=e[o].from,i=e[o].to;break}if(e[o]||(a="x"==n?t.getXAxes()[0]:t.getYAxes()[0],r=e[n+"1"],i=e[n+"2"]),null!=r&&null!=i&&r>i){var c=r;r=i,i=c}return{from:r,to:i,axis:a}}function f(){var e=t.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=e&&Math.abs(n.second.y-n.first.y)>=e}t.clearSelection=p,t.setSelection=function(e,a){var r,i=t.getOptions();"y"==i.selection.mode?(n.first.x=0,n.second.x=t.width()):(r=h(e,"x"),n.first.x=r.axis.p2c(r.from),n.second.x=r.axis.p2c(r.to)),"x"==i.selection.mode?(n.first.y=0,n.second.y=t.height()):(r=h(e,"y"),n.first.y=r.axis.p2c(r.from),n.second.y=r.axis.p2c(r.to)),n.show=!0,t.triggerRedrawOverlay(),!a&&f()&&l()},t.getSelection=s,t.hooks.bindEvents.push(function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(i),t.mousedown(o))}),t.hooks.drawOverlay.push(function(t,a){if(n.show&&f()){var r=t.getPlotOffset(),i=t.getOptions();a.save(),a.translate(r.left,r.top);var o=e.color.parse(i.selection.color);a.strokeStyle=o.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=i.selection.shape,a.fillStyle=o.scale("a",.4).toString();var s=Math.min(n.first.x,n.second.x)+.5,l=Math.min(n.first.y,n.second.y)+.5,c=Math.abs(n.second.x-n.first.x)-1,u=Math.abs(n.second.y-n.first.y)-1;a.fillRect(s,l,c,u),a.strokeRect(s,l,c,u),a.restore()}}),t.hooks.shutdown.push(function(t,n){n.unbind("mousemove",i),n.unbind("mousedown",o),r&&e(document).unbind("mouseup",r)})},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery)},function(e,t){!function(e){function t(e,t){return t*Math.floor(e/t)}function n(e,t,n,a){if("function"==typeof e.strftime)return e.strftime(t);var r,i=function(e,t){return e=""+e,t=""+(null==t?"0":t),1==e.length?t+e:e},o=[],s=!1,l=e.getHours(),c=l<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==a&&(a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),r=l>12?l-12:0==l?12:l;for(var u=0;u<t.length;++u){var d=t.charAt(u);if(s){switch(d){case"a":d=""+a[e.getDay()];break;case"b":d=""+n[e.getMonth()];break;case"d":d=i(e.getDate(),"");break;case"e":d=i(e.getDate()," ");break;case"h":case"H":d=i(l);break;case"I":d=i(r);break;case"l":d=i(r," ");break;case"m":d=i(e.getMonth()+1,"");break;case"M":d=i(e.getMinutes());break;case"q":d=""+(Math.floor(e.getMonth()/3)+1);break;case"S":d=i(e.getSeconds());break;case"y":d=i(e.getFullYear()%100);break;case"Y":d=""+e.getFullYear();break;case"p":d=c?"am":"pm";break;case"P":d=c?"AM":"PM";break;case"w":d=""+e.getDay()}o.push(d),s=!1}else"%"==d?s=!0:o.push(d)}return o.join("")}function a(e){function t(e,t,n,a){e[t]=function(){return n[a].apply(n,arguments)}}var n={date:e};void 0!=e.strftime&&t(n,"strftime",e,"strftime"),t(n,"getTime",e,"getTime"),t(n,"setTime",e,"setTime");for(var a=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],r=0;r<a.length;r++)t(n,"get"+a[r],e,"getUTC"+a[r]),t(n,"set"+a[r],e,"setUTC"+a[r]);return n}function r(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var n=new timezoneJS.Date;return n.setTimezone(t.timezone),n.setTime(e),n}return a(new Date(e))}return a(new Date(e))}var i={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],s=o.concat([[3,"month"],[6,"month"],[1,"year"]]),l=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(a){a.hooks.processOptions.push(function(a,o){e.each(a.getAxes(),function(e,a){var o=a.options;"time"==o.mode&&(a.tickGenerator=function(e){var n=[],a=r(e.min,o),c=0,u=o.tickSize&&"quarter"===o.tickSize[1]||o.minTickSize&&"quarter"===o.minTickSize[1]?l:s;null!=o.minTickSize&&(c="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*i[o.minTickSize[1]]);for(var d=0;d<u.length-1&&!(e.delta<(u[d][0]*i[u[d][1]]+u[d+1][0]*i[u[d+1][1]])/2&&u[d][0]*i[u[d][1]]>=c);++d);var p=u[d][0],h=u[d][1];if("year"==h){if(null!=o.minTickSize&&"year"==o.minTickSize[1])p=Math.floor(o.minTickSize[0]);else{var f=Math.pow(10,Math.floor(Math.log(e.delta/i.year)/Math.LN10)),m=e.delta/i.year/f;p=m<1.5?1:m<3?2:m<7.5?5:10,p*=f}p<1&&(p=1)}e.tickSize=o.tickSize||[p,h];var g=e.tickSize[0];h=e.tickSize[1];var v=g*i[h];"second"==h?a.setSeconds(t(a.getSeconds(),g)):"minute"==h?a.setMinutes(t(a.getMinutes(),g)):"hour"==h?a.setHours(t(a.getHours(),g)):"month"==h?a.setMonth(t(a.getMonth(),g)):"quarter"==h?a.setMonth(3*t(a.getMonth()/3,g)):"year"==h&&a.setFullYear(t(a.getFullYear(),g)),a.setMilliseconds(0),v>=i.minute&&a.setSeconds(0),v>=i.hour&&a.setMinutes(0),v>=i.day&&a.setHours(0),v>=4*i.day&&a.setDate(1),v>=2*i.month&&a.setMonth(t(a.getMonth(),3)),v>=2*i.quarter&&a.setMonth(t(a.getMonth(),6)),v>=i.year&&a.setMonth(0);var b,y=0,w=Number.NaN;do{if(b=w,w=a.getTime(),n.push(w),"month"==h||"quarter"==h)if(g<1){a.setDate(1);var x=a.getTime();a.setMonth(a.getMonth()+("quarter"==h?3:1));var S=a.getTime();a.setTime(w+y*i.hour+(S-x)*g),y=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+g*("quarter"==h?3:1));else"year"==h?a.setFullYear(a.getFullYear()+g):a.setTime(w+v)}while(w<e.max&&w!=b);return n},a.tickFormatter=function(e,t){var a=r(e,t.options);if(null!=o.timeformat)return n(a,o.timeformat,o.monthNames,o.dayNames);var s=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*i[t.tickSize[1]],c=t.max-t.min,u=o.twelveHourClock?" %p":"",d=o.twelveHourClock?"%I":"%H";return n(a,l<i.minute?d+":%M:%S"+u:l<i.day?c<2*i.day?d+":%M"+u:"%b %d "+d+":%M"+u:l<i.month?"%b %d":s&&l<i.quarter||!s&&l<i.year?c<i.year?"%b":"%b %Y":s&&l<i.year?c<i.year?"Q%q":"Q%q %Y":"%Y",o.monthNames,o.dayNames)})})})},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=n}(jQuery)},function(e,t){!function(e){jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push(function(e,t,n){if(null!=t.stack&&!1!==t.stack){var a=function(e,t){for(var n=null,a=0;a<t.length&&e!=t[a];++a)t[a].stack==e.stack&&(n=t[a]);return n}(t,e.getData());if(a){for(var r,i,o,s,l,c,u,d,p=n.pointsize,h=n.points,f=a.datapoints.pointsize,m=a.datapoints.points,g=[],v=t.lines.show,b=t.bars.horizontal,y=p>2&&(b?n.format[2].x:n.format[2].y),w=v&&t.lines.steps,x=b?1:0,S=b?0:1,k=0,C=0;!(k>=h.length&&C>=m.length);){if(u=g.length,k<h.length&&null==h[k]){for(d=0;d<p;++d)g.push(h[k+d]);k+=p}else if(k>=h.length){for(d=0;d<p;++d)g.push(m[C+d]);y&&(g[u+2]=m[C+S]),C+=f}else if(C>=m.length){for(d=0;d<p;++d)g.push(h[k+d]);k+=p}else if(C<m.length&&null==m[C])C+=f;else{if(r=h[k+x],i=h[k+S],s=m[C+x],l=m[C+S],c=0,r==s){for(d=0;d<p;++d)g.push(h[k+d]);g[u+S]+=l,c=l,k+=p,C+=f}else if(r>s){if(0==k){for(d=0;d<p;++d)g.push(m[C+d]);c=l}if(k>0&&null!=h[k-p]){for(o=i+(h[k-p+S]-i)*(s-r)/(h[k-p+x]-r),g.push(s),g.push(o+l),d=2;d<p;++d)g.push(h[k+d]);c=l}C+=f}else{for(d=0;d<p;++d)g.push(h[k+d]);C>0&&null!=m[C-f]&&(c=l+(m[C-f+S]-l)*(r-s)/(m[C-f+x]-s)),g[u+S]+=c,k+=p}fromgap=!1,u!=g.length&&y&&(g[u+2]=c)}if(w&&u!=g.length&&u>0&&null!=g[u]&&g[u]!=g[u-p]&&g[u+1]!=g[u-p+1]){for(d=0;d<p;++d)g[u+p+d]=g[u+d];g[u+1]=g[u-p+1]}}n.points=g}}})},options:{series:{stack:null}},name:"stack",version:"1.2"})}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a,r;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),function(e){e.NotStarted="NotStarted",e.Loading="Loading",e.Done="Done",e.Error="Error"}(a||(a={})),function(e){e.Null="null",e.Ignore="connected",e.AsZero="null as zero"}(r||(r={}))},function(e,t){},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var a,r,i=function(){function e(e){this.panel=e}return e.prototype.setEditor=function(e){this.editor=e},e.prototype.setDefaults=function(e){this.defaults=e},e}();!function(e){e.Green="#299c46",e.Red="#d44a3a"}(a||(a={})),function(e){e[e.ValueToText=1]="ValueToText",e[e.RangeToText=2]="RangeToText"}(r||(r={}))},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var a,r;n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i}),function(e){e.Home="home-dashboard",e.New="new-dashboard",e.Normal="normal-dashboard",e.Scripted="scripted-dashboard"}(a||(a={})),function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Services="Services",e.Failed="Failed",e.Completed="Completed"}(r||(r={}));var i="tv"},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var a;!function(e){e.Table="table",e.TimeSeries="time_series"}(a||(a={}))},function(e,t){},function(e,t,n){"use strict";var a,r;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),function(e){e.Success="success",e.Warning="warning",e.Error="error",e.Info="info"}(a||(a={})),function(e){e[e.Warning=5e3]="Warning",e[e.Success=3e3]="Success",e[e.Error=7e3]="Error"}(r||(r={}))},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var a=n(299),r=n.n(a);function i(e){var t=e.searchWords;return function(e,t){if(!e||!t)return[];var n,a=[],r=o(t);try{n=new RegExp("(?:"+r+")","g")}catch(e){return a}return e.replace(n,function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){var r=t[t.length-2];a.push({text:e,start:r,length:e.length,end:r+e.length})}return""}),a}(e.textToHighlight,t.join(" "))}var o=function(e){return e.replace(/[[{(][\w,.-?:*+]+$/,"")};var s=Object.keys(r.a.whiteList).reduce(function(e,t){return e[t]=r.a.whiteList[t].concat(["class","style"]),e},{}),l=new r.a.FilterXSS({whiteList:s});function c(e){try{return l.process(e)}catch(t){return console.log("String could not be sanitized",e),e}}},,,,,function(e,t){!function(e){jQuery.plot.plugins.push({init:function(e){var t={},n=!1,a={};function r(e){var t=e.length,n={};if(t>0)for(var a=0;a<t;a++)if(e[a].stackpercent){var r=0,i=1;e[a].bars&&e[a].bars.horizontal&&!0===e[a].bars.horizontal&&(r=1,i=0);for(var o=e[a].data.length,s=0;s<o;s++){var l=0;null!=e[a].data[s][1]&&(l=e[a].data[s][i]),n[e[a].data[s][r]+""]?n[e[a].data[s][r]+""]+=l:n[e[a].data[s][r]+""]=l}}return n}e.hooks.processRawData.push(function(e,t,i,o){if(n||(n=!0,a=r(e.getData())),1==t.stackpercent){var s=i.length;t.percents=[];var l=0,c=1;t.bars&&t.bars.horizontal&&!0===t.bars.horizontal&&(l=1,c=0);for(var u=0;u<s;u++){var d=a[i[u][l]+""];d>0?t.percents.push(100*i[u][c]/d):t.percents.push(0)}}}),e.hooks.processDatapoints.push(function(e,i,o){if(i.stackpercent){n||(a=r(e.getData()));var s=[],l=0,c=1;i.bars&&i.bars.horizontal&&!0===i.bars.horizontal&&(l=1,c=0);for(var u=0;u<o.points.length;u+=3)t[o.points[u+l]]||(t[o.points[u+l]]=0),s[u+l]=o.points[u+l],s[u+c]=o.points[u+c]+t[o.points[u+l]],s[u+2]=t[o.points[u+l]],t[o.points[u+l]]+=o.points[u+c],a[s[u+l]+""]>0?(s[u+c]=100*s[u+c]/a[s[u+l]+""],s[u+2]=100*s[u+2]/a[s[u+l]+""]):(s[u+c]=0,s[u+2]=0);o.points=s}})},options:{series:{stackpercent:null}},name:"stackpercent",version:"0.1"})}()},function(e,t){!function(e){"use strict";e.plot.plugins.push({init:function(t){function n(e,t,n,a,r,i,o,s){var l,c,u,d,p,h;return h=((u=o-r)*(t-i)-(d=s-i)*(e-r))/(-u*(c=a-t)+(l=n-e)*d),(p=(-c*(e-r)+l*(t-i))/(-u*c+l*d))>=0&&p<=1&&h>=0&&h<=1?[e+h*l,t+h*c]:null}t.hooks.drawSeries.push(function(t,a,r){var i,o,s,l,c,u,d;function p(e,t){a.beginPath(),a.moveTo(r.xaxis.p2c(e)+u.left,r.yaxis.p2c(t)+u.top)}function h(e,t){console.assert(t>e,"expects the end index to be greater than the start index");var n,a,r=0===e||null===s[e-1]||null===c[e-1],i=!1;for(n=e;n<t;n++)if(null===s[n*o+1]||null===c[n*o+1])i=!1,r=!0;else if(s[n*o+1]===c[n*l+1])i=!0,r=!1;else{if(s[n*o+1]>c[n*l+1])return r?p(s[n*o],s[n*o+1]):i?p(s[(n-1)*o],s[(n-1)*o+1]):p((a=f(n))[0],a[1]),void g(n,t);r=!1,i=!1}}function f(e){var t,a;for(console.assert(e>0,"expects the second point in the series line segment"),t=1;t<c.length/l;t++)if(null!==(a=n(s[(e-1)*o],s[(e-1)*o+1],s[e*o],s[e*o+1],c[(t-1)*l],c[(t-1)*l+1],c[t*l],c[t*l+1])))return a;console.error("intersectionPoint() should only be called when an intersection happens")}function m(e,t){var n;for(console.assert(e>=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),n=e;n>=t;n--)a.lineTo(i.xaxis.p2c(c[n*l])+u.left,i.yaxis.p2c(c[n*l+1])+u.top);a.closePath(),a.fill()}function g(e,t){var n,i;for(console.assert(e<=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),n=e;n<t;n++){if(null===s[n*o+1]&&n>e)return m(n-1,e),void h(n,t);if(s[n*o+1]===c[n*l+1])return m(n,e),void h(n,t);if(s[n*o+1]<c[n*l+1])return i=f(n),a.lineTo(r.xaxis.p2c(i[0])+u.left,r.yaxis.p2c(i[1])+u.top),m(n,e),void h(n,t);a.lineTo(r.xaxis.p2c(s[n*o])+u.left,r.yaxis.p2c(s[n*o+1])+u.top)}m(t,e)}null!==r.fillBelowTo&&(i=function(e,t){var n;for(n=0;n<t.length;++n)if(t[n].id===e.fillBelowTo)return t[n];return null}(r,t.getData()))&&(o=r.datapoints.pointsize,s=r.datapoints.points,l=i.datapoints.pointsize,c=i.datapoints.points,u=t.getPlotOffset(),function(){if(s.length/o!=c.length/l)return console.error("Refusing to graph inconsistent number of points"),!1;var e;for(e=0;e<s.length/o;e++)if(null!==s[e*o]&&null!==c[e*l]&&s[e*o]!==c[e*l])return console.error("Refusing to graph points without matching value"),!1;return!0}()&&((d=e.color.parse(r.color)).a=.4,d.normalize(),a.fillStyle=d.toString(),h(0,s.length/o)))})},options:{series:{fillBelowTo:null}},name:"fillbelow",version:"0.1.0"})}(jQuery)},function(e,t){!function(e){jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function n(n){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function a(n){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var a=e.offset();t.x=Math.max(0,Math.min(n.pageX-a.left,e.width())),t.y=Math.max(0,Math.min(n.pageY-a.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(n){if(n){var a=e.p2c(n);t.x=Math.max(0,Math.min(a.left,e.width())),t.y=Math.max(0,Math.min(a.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(n){n&&e.setCrosshair(n),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push(function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(n),t.mousemove(a))}),e.hooks.drawOverlay.push(function(e,n){var a=e.getOptions().crosshair;if(a.mode){var r=e.getPlotOffset();if(n.save(),n.translate(r.left,r.top),-1!=t.x){var i=e.getOptions().crosshair.lineWidth%2?.5:0;if(n.strokeStyle=a.color,n.lineWidth=a.lineWidth,n.lineJoin="round",n.beginPath(),-1!=a.mode.indexOf("x")){var o=Math.floor(t.x)+i;n.moveTo(o,0),n.lineTo(o,e.height())}if(-1!=a.mode.indexOf("y")){var s=Math.floor(t.y)+i;n.moveTo(0,s),n.lineTo(e.width(),s)}n.stroke()}n.restore()}}),e.hooks.shutdown.push(function(e,t){t.unbind("mouseout",n),t.unbind("mousemove",a)})},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})}()},function(e,t){!function(e){jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push(function(e,t,n){t.dashes.show&&e.hooks.draw.push(function(e,a){var r=e.getPlotOffset(),i=t.xaxis,o=t.yaxis;function s(e,r){var s,l,c=n.points,u=n.pointsize,d=null,p=null,h=0,f=!0;t.dashes.dashLength[0]?(s=t.dashes.dashLength[0],l=t.dashes.dashLength[1]?t.dashes.dashLength[1]:s):l=s=t.dashes.dashLength,a.beginPath();for(var m=u;m<c.length;m+=u){var g=c[m-u],v=c[m-u+1],b=c[m],y=c[m+1];if(null!=g&&null!=b){if(v<=y&&v<o.min){if(y<o.min)continue;g=(o.min-v)/(y-v)*(b-g)+g,v=o.min}else if(y<=v&&y<o.min){if(v<o.min)continue;b=(o.min-v)/(y-v)*(b-g)+g,y=o.min}if(v>=y&&v>o.max){if(y>o.max)continue;g=(o.max-v)/(y-v)*(b-g)+g,v=o.max}else if(y>=v&&y>o.max){if(v>o.max)continue;b=(o.max-v)/(y-v)*(b-g)+g,y=o.max}if(g<=b&&g<i.min){if(b<i.min)continue;v=(i.min-g)/(b-g)*(y-v)+v,g=i.min}else if(b<=g&&b<i.min){if(g<i.min)continue;y=(i.min-g)/(b-g)*(y-v)+v,b=i.min}if(g>=b&&g>i.max){if(b>i.max)continue;v=(i.max-g)/(b-g)*(y-v)+v,g=i.max}else if(b>=g&&b>i.max){if(g>i.max)continue;y=(i.max-g)/(b-g)*(y-v)+v,b=i.max}g==d&&v==p||a.moveTo(i.p2c(g)+e,o.p2c(v)+r);var w,x=i.p2c(g)+e,S=o.p2c(v)+r,k=i.p2c(b)+e,C=o.p2c(y)+r;do{0==(w=E(h>0?h:f?s:l)).deltaX&&0==w.deltaY||(f?a.lineTo(x+w.deltaX,S+w.deltaY):a.moveTo(x+w.deltaX,S+w.deltaY)),f=!f,h=w.remainder,x+=w.deltaX,S+=w.deltaY}while(w.distance>0);d=b,p=y}function E(e){var t=Math.sqrt(Math.pow(k-x,2)+Math.pow(C-S,2));if(t<=e)return{deltaX:k-x,deltaY:C-S,distance:t,remainder:e-t};var n=C>S?1:-1;return{deltaX:(k>x?1:-1)*Math.sqrt(Math.pow(e,2)/(1+Math.pow((C-S)/(k-x),2))),deltaY:n*Math.sqrt(Math.pow(e,2)-Math.pow(e,2)/(1+Math.pow((C-S)/(k-x),2))),distance:e,remainder:0}}}a.stroke()}a.save(),a.translate(r.left,r.top),a.lineJoin="round";var l=t.dashes.lineWidth,c=t.shadowSize;if(l>0&&c>0){a.lineWidth=c,a.strokeStyle="rgba(0,0,0,0.1)";var u=Math.PI/18;s(Math.sin(u)*(l/2+c/2),Math.cos(u)*(l/2+c/2)),a.lineWidth=c/2,s(Math.sin(u)*(l/2+c/4),Math.cos(u)*(l/2+c/4))}a.lineWidth=l,a.strokeStyle=t.color,l>0&&s(0,0),a.restore()})})},options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})}()},function(e,t){
/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */
!function(e){var t=function(){var t,i,o,s,l,c=function(e,a){t=a,i=e.getPlaceholder(),o=e.getOptions(),s=o.series.gauges,l=e.getData(),n(s.debug)};function u(e,t){"auto"===e.gauge.width&&(e.gauge.width=Math.max(5,t/8)),"auto"===e.label.margin&&(e.label.margin=Math.max(1,t/20)),"auto"===e.label.font.size&&(e.label.font.size=Math.max(5,t/8)),"auto"===e.value.margin&&(e.value.margin=Math.max(1,t/30)),"auto"===e.value.font.size&&(e.value.font.size=Math.max(5,t/9)),"auto"===e.threshold.width&&(e.threshold.width=Math.max(3,t/100)),"auto"===e.threshold.label.margin&&(e.threshold.label.margin=Math.max(3,t/40)),"auto"===e.threshold.label.font.size&&(e.threshold.label.font.size=Math.max(5,t/15))}function d(e,t,n){var a=e.gauge.startAngle+(e.gauge.endAngle-e.gauge.startAngle)*((n-e.gauge.min)/(e.gauge.max-e.gauge.min));return a<e.gauge.startAngle?a=e.gauge.startAngle:a>e.gauge.endAngle&&(a=e.gauge.endAngle),a}function p(e,n,a,i,o,s,l,c,u,d){o!==s&&(t.save(),r(t,e,n,a,i,o,s,l,c,u),d&&(r(t,e,n,a,i,o,s),t.clip(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=10,t.shadowColor="gray",r(t,e,n,a+1,i+2,o,s,l,1)),t.restore())}function h(e,t,n,r,i,o){f(n.cx+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.cos(a(o)),n.cy+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.sin(a(o)),"flotGagueThresholdValue"+r,e.threshold.label.formatter?e.threshold.label.formatter(i):i,e.threshold.label,o)}function f(t,n,a,r,o,s){var l=e(i).find("#"+a),c=l.length;c||((l=e("<span></span>")).attr("id",a),l.attr("class","flot-temp-elem"),i.append(l)),l.css("position","absolute"),l.css("top",n+"px"),o.font.size&&l.css("font-size",o.font.size+"px"),o.font.family&&l.css("font-family",o.font.family),o.color&&l.css("color",o.color),o.background.color&&l.css("background-color",o.background.color),o.background.opacity&&l.css("opacity",o.background.opacity),l.text(r),l.css("left",t+"px"),l.css("left",parseInt(l.css("left"))-l.width()/2+"px"),!c&&s&&(l.css("top",parseInt(l.css("top"))-l.height()/2+"px"),l.css("transform","rotate("+(180*s+90)+"deg)"))}return c.prototype.calculateLayout=function(){var e=i.width(),t=i.height(),n=Math.min(l.length,s.layout.columns),r=Math.ceil(l.length/n),o=s.layout.margin,c=s.layout.hMargin,d=s.layout.vMargin,p=(e-2*o-c*(n-1))/n,h=(t-2*o-d*(r-1))/r;if(s.layout.square){var f=Math.min(p,h);p=f,h=f}u(s,p);var m=s.cell.margin,g=0,v=0;s.label.show&&(g=s.label.margin,v=s.label.font.size);var b=0,y=0;s.value.show&&(b=s.value.margin,y=s.value.font.size);var w=0;s.threshold.show&&(w=s.threshold.width);var x=0,S=0;s.threshold.label.show&&(x=s.threshold.label.margin,S=s.threshold.label.font.size);for(var k=p/2-m-w-2*x-S,C=s.gauge.startAngle,E=s.gauge.endAngle,T=(E-C)/100,M=-1,_=C;_<E;_+=T)M=Math.max(M,Math.sin(a(_)));var A=(h-2*m-2*g-v)/(1+(M=Math.max(M,Math.sin(a(E)))));A*M<b+y/2&&(A=h-2*m-2*g-v-b-y/2);var D=A-2*x-S-w,N=Math.min(k,D),P=s.gauge.width;P>=N&&(P=Math.max(3,N/3));var O=2*x+S+w+N;return{canvasWidth:e,canvasHeight:t,margin:o,hMargin:c,vMargin:d,columns:n,rows:r,cellWidth:p,cellHeight:h,cellMargin:m,labelMargin:g,labelFontSize:v,valueMargin:b,valueFontSize:y,width:P,radius:N,thresholdWidth:w,thresholdLabelMargin:x,thresholdLabelFontSize:S,gaugeOuterHeight:Math.max(O*(1+M),O+b+y/2)}},c.prototype.calculateAutoValues=u,c.prototype.calculateCellLayout=function(e,t,n){var a=function(e,t){return t%e}(t.columns,n),r=function(e,t){return Math.floor(t/e)}(t.columns,n),i=t.margin+(t.cellWidth+t.hMargin)*a,o=t.margin+(t.cellHeight+t.vMargin)*r,s=i+t.cellWidth/2,l=o+t.cellMargin+2*t.labelMargin+t.labelFontSize+t.thresholdWidth+t.thresholdLabelFontSize+2*t.thresholdLabelMargin+t.radius,c=t.cellHeight-2*t.cellMargin-2*t.labelMargin-t.labelFontSize-t.gaugeOuterHeight,u=0;return"middle"===e.cell.vAlign?u=c/2:"bottom"===e.cell.vAlign&&(u=c),l+=u,{col:a,row:r,x:i,y:o,offsetY:u,cellWidth:t.cellWidth,cellHeight:t.cellHeight,cellMargin:t.cellMargin,cx:s,cy:l}},c.prototype.drawBackground=function(e){s.frame.show&&(t.save(),t.strokeStyle=o.grid.borderColor,t.lineWidth=o.grid.borderWidth,t.strokeRect(0,0,e.canvasWidth,e.canvasHeight),o.grid.backgroundColor&&(t.fillStyle=o.grid.backgroundColor,t.fillRect(0,0,e.canvasWidth,e.canvasHeight)),t.restore())},c.prototype.drawCellBackground=function(e,n){t.save(),e.cell.border&&e.cell.border.show&&e.cell.border.color&&e.cell.border.width&&(t.strokeStyle=e.cell.border.color,t.lineWidth=e.cell.border.width,t.strokeRect(n.x,n.y,n.cellWidth,n.cellHeight)),e.cell.background&&e.cell.background.color&&(t.fillStyle=e.cell.background.color,t.fillRect(n.x,n.y,n.cellWidth,n.cellHeight)),t.restore()},c.prototype.drawGauge=function(e,t,n,r,i){var o=e.gauge.shadow.show?e.gauge.shadow.blur:0;p(n.cx,n.cy,t.radius,t.width,a(e.gauge.startAngle),a(e.gauge.endAngle),e.gauge.border.color,e.gauge.border.width,e.gauge.background.color,o);var s=function(e,t){for(var n,a=0;a<e.threshold.values.length;a++){var r=e.threshold.values[a];if(n=r.color,t<r.value)break}return n}(e,i),l=d(e,t,i);p(n.cx,n.cy,t.radius-1,t.width-2,a(e.gauge.startAngle),a(l),s,1,s,o)},c.prototype.drawThreshold=function(e,n,i){for(var o=e.gauge.startAngle,s=0;s<e.threshold.values.length;s++){var l=e.threshold.values[s];c1=l.color,a2=d(e,0,l.value),r(t,i.cx,i.cy,n.radius+n.thresholdWidth,n.thresholdWidth-2,a(o),a(a2),c1,1,c1),o=a2}},c.prototype.drawLable=function(e,t,n,a,r){f(n.cx,n.y+n.cellMargin+t.labelMargin+n.offsetY,"flotGagueLabel"+a,e.label.formatter?e.label.formatter(r.label,r.data[0][1]):text,e.label)},c.prototype.drawValue=function(e,t,n,a,r){f(n.cx,n.cy-e.value.font.size/2,"flotGagueValue"+a,e.value.formatter?e.value.formatter(r.label,r.data[0][1]):text,e.value)},c.prototype.drawThresholdValues=function(e,t,n,a){h(e,t,n,"Min"+a,e.gauge.min,e.gauge.startAngle),h(e,t,n,"Max"+a,e.gauge.max,e.gauge.endAngle);for(var r=0;r<e.threshold.values.length;r++){var i=e.threshold.values[r];if(i.value>e.gauge.min&&i.value<e.gauge.max){var o=d(e,0,i.value);h(e,t,n,a+"_"+r,i.value,o)}}},c}();function n(e){return"undefined"!=typeof Logger?new Logger(e):null}function a(e){return e*Math.PI}function r(e,t,n,a,r,i,o,s,l,c){if(i!==o){e.save(),e.beginPath(),e.arc(t,n,a,i,o,!1),e.lineTo(t+(a-r)*Math.cos(o),n+(a-r)*Math.sin(o)),e.arc(t,n,a-r,o,i,!0),e.closePath(),l&&(e.lineWidth=l),s&&(e.strokeStyle=s,e.stroke()),c&&(e.fillStyle=c,e.fill()),e.restore()}}var i={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return e}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return parseInt(t)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(e){return e}},values:[]}}}};e.plot.plugins.push({init:function(a){a.hooks.processOptions.push(function(e,t){n(t.series.gauges.debug),t.series.gauges.show&&(t.grid.show=!1,t.legend.show=!1),t.series.gauges.threshold.values.sort(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})}),a.hooks.draw.push(function(a,r){var i=a.getOptions().series.gauges;if(n(i.debug),i.show){var o=a.getData();if(o&&o.length){var s=new t(a,r),l=s.calculateLayout();i.debug.layout,s.drawBackground(l);for(var c=0;c<o.length;c++){var u=o[c],d=e.extend({},i,u.gauges);u.gauges&&s.calculateAutoValues(d,l.cellWidth);var p=s.calculateCellLayout(d,l,c);s.drawCellBackground(d,p),d.debug.layout,d.label.show&&s.drawLable(d,l,p,c,u),s.drawGauge(d,l,p,u.label,u.data[0][1]),d.threshold.show&&s.drawThreshold(d,l,p),d.threshold.label.show&&s.drawThresholdValues(d,l,p,c),d.value.show&&s.drawValue(d,l,p,c,u)}}}})},options:i,name:"gauge",version:"1.1.0"})}(jQuery)},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(2),r=n(0),i=n(15),o=n.n(i),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasEventListener:!1},t.onOutsideClick=function(e){var n=o.a.findDOMNode(t);n&&n.contains(e.target)||t.props.onClick()},t}return a.c(t,e),t.prototype.componentDidMount=function(){window.addEventListener("click",this.onOutsideClick,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.onOutsideClick,!1)},t.prototype.render=function(){return this.props.children},t}(r.PureComponent)},,,,,,,function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showConfirm:!1},t.onClickDelete=function(e){e&&e.preventDefault(),t.setState({showConfirm:!0})},t.onClickCancel=function(e){e&&e.preventDefault(),t.setState({showConfirm:!1})},t}return a.c(t,e),t.prototype.render=function(){var e,t,n=this.props.onConfirm;return this.state.showConfirm?(e="show",t="hide"):(e="hide",t="show"),i.a.createElement("span",{className:"delete-button-container"},i.a.createElement("a",{className:"delete-button "+t+" btn btn-danger btn-small",onClick:this.onClickDelete},i.a.createElement("i",{className:"fa fa-remove"})),i.a.createElement("span",{className:"confirm-delete-container"},i.a.createElement("span",{className:"confirm-delete "+e},i.a.createElement("a",{className:"btn btn-small",onClick:this.onClickCancel},"Cancel"),i.a.createElement("a",{className:"btn btn-danger btn-small",onClick:n},"Confirm Delete"))))},t}(r.PureComponent),s=n(395),l=n(15),c=n.n(l),u=function(e){function t(t){var n=e.call(this,t)||this;n.node=document.createElement("div");var a=n.props,r=a.className,i=a.root,o=void 0===i?document.body:i;return r&&n.node.classList.add(r),n.portalRoot=o,n.portalRoot.appendChild(n.node),n}return a.c(t,e),t.prototype.componentWillUnmount=function(){this.portalRoot.removeChild(this.node)},t.prototype.render=function(){return c.a.createPortal(this.props.children,this.node)},t}(r.PureComponent),d=n(151),p=n.n(d),h={transition:"opacity 200ms linear",opacity:0},f={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}},m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.content,r=t.show,o=t.placement,l=t.onMouseEnter,c=t.onMouseLeave,d=t.className,m=t.wrapperClassName,g=t.renderArrow;return i.a.createElement(s.a,null,i.a.createElement(p.a,{in:r,timeout:100,mountOnEnter:!0,unmountOnExit:!0},function(t){return i.a.createElement(u,null,i.a.createElement(s.b,{placement:o,referenceElement:e.props.referenceElement,modifiers:{preventOverflow:{enabled:!0,boundariesElement:"window"}}},function(e){var r=e.ref,o=e.style,s=e.placement,u=e.arrowProps,p=e.scheduleUpdate;return i.a.createElement("div",{onMouseEnter:l,onMouseLeave:c,ref:r,style:a.a({},o,h,f[t]),"data-placement":s,className:""+m},i.a.createElement("div",{className:d},"string"==typeof n&&n,i.a.isValidElement(n)&&i.a.cloneElement(n),"function"==typeof n&&n({updatePopperPosition:p}),g&&g({arrowProps:u,placement:s})))}))}))},t}(r.PureComponent),g=function(e){function t(t){var n=e.call(this,t)||this;return n.showPopper=function(){n.hideTimeout&&clearTimeout(n.hideTimeout),n.setState(function(e){return a.a({},e,{show:!0})})},n.hidePopper=function(){0===n.props.hideAfter?n.setState(function(e){return a.a({},e,{show:!1})}):n.hideTimeout=setTimeout(function(){n.setState(function(e){return a.a({},e,{show:!1})})},n.props.hideAfter)},n.state={placement:n.props.placement||"auto",show:!1},n}return a.c(t,e),t.prototype.componentWillReceiveProps=function(e){e.placement&&e.placement!==this.state.placement&&this.setState(function(t){return a.a({},t,{placement:e.placement||"auto"})})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.content,a=this.state,r=a.show,i=a.placement;return t(this.showPopper,this.hidePopper,{show:r,placement:i,content:n})},t}(i.a.Component),v=function(e){var t=e.children,n=e.theme,o=a.e(e,["children","theme"]),s=Object(r.createRef)(),l="popper__background"+(n?" popper__background--"+n:"");return i.a.createElement(g,a.a({},o),function(e,n,r){return i.a.createElement(i.a.Fragment,null,s.current&&i.a.createElement(m,a.a({},r,{onMouseEnter:e,onMouseLeave:n,referenceElement:s.current,wrapperClassName:"popper",className:l,renderArrow:function(e){var t=e.arrowProps,n=e.placement;return i.a.createElement("div",a.a({className:"popper__arrow","data-placement":n},t))}})),i.a.cloneElement(t,{ref:s,onMouseEnter:e,onMouseLeave:n}))})},b=n(1),y=n.n(b),w=n(670),x=n.n(w),S=function(e){function t(t){var n=e.call(this,t)||this;return n.ref=i.a.createRef(),n}return a.c(t,e),t.prototype.updateScroll=function(){var e=this.ref.current;e&&!y.a.isNil(this.props.scrollTop)&&(this.props.scrollTop>1e4?e.scrollToBottom():e.scrollTop(this.props.scrollTop))},t.prototype.componentDidMount=function(){this.updateScroll()},t.prototype.componentDidUpdate=function(){this.updateScroll()},t.prototype.render=function(){var e=this.props,t=e.customClassName,n=e.children,r=e.autoHeightMax,o=e.autoHeightMin,s=e.setScrollTop,l=e.autoHide,c=e.autoHideTimeout,u=e.hideTracksWhenNotNeeded,d=e.renderTrackHorizontal,p=e.renderTrackVertical;return i.a.createElement(x.a,{ref:this.ref,className:t,onScroll:s,autoHeight:!0,autoHide:l,autoHideTimeout:c,hideTracksWhenNotNeeded:u,autoHeightMax:r,autoHeightMin:o,renderTrackHorizontal:d||function(e){return i.a.createElement("div",a.a({},e,{className:"track-horizontal"}))},renderTrackVertical:p||function(e){return i.a.createElement("div",a.a({},e,{className:"track-vertical"}))},renderThumbHorizontal:function(e){return i.a.createElement("div",a.a({},e,{className:"thumb-horizontal"}))},renderThumbVertical:function(e){return i.a.createElement("div",a.a({},e,{className:"thumb-vertical"}))},renderView:function(e){return i.a.createElement("div",a.a({},e,{className:"view"}))}},n)},t.defaultProps={customClassName:"custom-scrollbars",autoHide:!1,autoHideTimeout:200,autoHideDuration:200,setScrollTop:function(){},hideTracksWhenNotNeeded:!1,autoHeightMin:"0",autoHeightMax:"100%"},t}(r.PureComponent),k=n(13),C=n.n(k),E=n(84),T=n(274),M=n.n(T),_=function(e){var t=e.children,n=e.isSelected,r=e.data;return i.a.createElement(E.a.Option,a.a({},e),i.a.createElement("div",{className:"gf-form-select-box__desc-option"},r.imgUrl&&i.a.createElement("img",{className:"gf-form-select-box__desc-option__img",src:r.imgUrl}),i.a.createElement("div",{className:"gf-form-select-box__desc-option__body"},i.a.createElement("div",null,t),r.description&&i.a.createElement("div",{className:"gf-form-select-box__desc-option__desc"},r.description)),n&&i.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})))},A=function(e){var t=e.children,n=e.data;return i.a.createElement(E.a.SingleValue,a.a({},e),i.a.createElement("div",{className:"gf-form-select-box__img-value"},n.imgUrl&&i.a.createElement("img",{className:"gf-form-select-box__desc-option__img",src:n.imgUrl}),t))},D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expanded:!1},t.onToggleChildren=function(){t.setState(function(e){return{expanded:!e.expanded}})},t}return a.c(t,e),t.prototype.componentDidMount=function(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){var e=this.props.selectProps.value.value;e&&this.props.options.some(function(t){return t.value===e})&&this.setState({expanded:!0})}},t.prototype.componentDidUpdate=function(e){""!==e.selectProps.inputValue&&this.setState({expanded:!0})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.label,a=this.state.expanded;return i.a.createElement("div",{className:"gf-form-select-box__option-group"},i.a.createElement("div",{className:"gf-form-select-box__option-group__header",onClick:this.onToggleChildren},i.a.createElement("span",{className:"flex-grow-1"},n),i.a.createElement("i",{className:"fa "+(a?"fa-caret-left":"fa-caret-down")})," "),a&&t)},t}(r.PureComponent),N=function(e){var t=e.selectProps.menuIsOpen;return i.a.createElement(E.a.IndicatorsContainer,a.a({},e),i.a.createElement("span",{className:"gf-form-select-box__select-arrow "+(t?"gf-form-select-box__select-arrow--reversed":"")}))},P=N,O=function(e){var t=e.children;return i.a.createElement(E.a.Option,a.a({},e),i.a.createElement("div",{className:"gf-form-select-box__desc-option"},i.a.createElement("div",{className:"gf-form-select-box__desc-option__body"},t)))},I=O;function $(){return{clearIndicator:function(){return{}},container:function(){return{}},control:function(){return{}},dropdownIndicator:function(){return{}},group:function(){return{}},groupHeading:function(){return{}},indicatorsContainer:function(){return{}},indicatorSeparator:function(){return{}},input:function(){return{}},loadingIndicator:function(){return{}},loadingMessage:function(){return{}},menu:function(){return{}},menuList:function(e){return{maxHeight:e.maxHeight}},multiValue:function(){return{}},multiValueLabel:function(){return{}},multiValueRemove:function(){return{}},noOptionsMessage:function(){return{}},option:function(){return{}},placeholder:function(){return{}},singleValue:function(){return{}},valueContainer:function(){return{}}}}var F=function(e){return i.a.createElement(E.a.MenuList,a.a({},e),i.a.createElement(S,{autoHide:!1,autoHeightMax:"inherit"},e.children))},q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.defaultValue,n=e.getOptionLabel,a=e.getOptionValue,r=e.onChange,o=e.options,s=e.placeholder,l=e.width,c=e.value,u=e.className,d=e.isDisabled,p=e.isLoading,h=e.isSearchable,f=e.isClearable,m=e.backspaceRemovesValue,g=e.isMulti,v=e.autoFocus,b=e.openMenuOnFocus,y=e.onBlur,w=e.maxMenuHeight,x=e.noOptionsMessage,S="";l&&(S="width-"+l);var k=C()("gf-form-input","gf-form-input--form-dropdown",S,u);return i.a.createElement(E.b,{classNamePrefix:"gf-form-select-box",className:k,components:{Option:_,SingleValue:A,IndicatorsContainer:P,MenuList:F,Group:D},defaultValue:t,value:c,getOptionLabel:n,getOptionValue:a,menuShouldScrollIntoView:!1,isSearchable:h,onChange:r,options:o,placeholder:s||"Choose",styles:{clearIndicator:function(){return{}},container:function(){return{}},control:function(){return{}},dropdownIndicator:function(){return{}},group:function(){return{}},groupHeading:function(){return{}},indicatorsContainer:function(){return{}},indicatorSeparator:function(){return{}},input:function(){return{}},loadingIndicator:function(){return{}},loadingMessage:function(){return{}},menu:function(){return{}},menuList:function(e){return{maxHeight:e.maxHeight}},multiValue:function(){return{}},multiValueLabel:function(){return{}},multiValueRemove:function(){return{}},noOptionsMessage:function(){return{}},option:function(){return{}},placeholder:function(){return{}},singleValue:function(){return{}},valueContainer:function(){return{}}},isDisabled:d,isLoading:p,isClearable:f,autoFocus:v,onBlur:y,openMenuOnFocus:b,maxMenuHeight:w,noOptionsMessage:x,isMulti:g,backspaceRemovesValue:m})},t.defaultProps={width:null,className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300},t}(r.PureComponent),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.defaultValue,n=e.getOptionLabel,a=e.getOptionValue,r=e.onChange,o=e.placeholder,s=e.width,l=e.value,c=e.className,u=e.loadOptions,d=e.defaultOptions,p=e.isLoading,h=e.loadingMessage,f=e.noOptionsMessage,m=e.isDisabled,g=e.isSearchable,v=e.isClearable,b=e.backspaceRemovesValue,y=e.autoFocus,w=e.onBlur,x=e.openMenuOnFocus,S=e.maxMenuHeight,k=e.isMulti,E="";s&&(E="width-"+s);var T=C()("gf-form-input","gf-form-input--form-dropdown",E,c);return i.a.createElement(M.a,{classNamePrefix:"gf-form-select-box",className:T,components:{Option:_,SingleValue:A,IndicatorsContainer:P,NoOptionsMessage:I},defaultValue:t,value:l,getOptionLabel:n,getOptionValue:a,menuShouldScrollIntoView:!1,onChange:r,loadOptions:u,isLoading:p,defaultOptions:d,placeholder:o||"Choose",styles:{clearIndicator:function(){return{}},container:function(){return{}},control:function(){return{}},dropdownIndicator:function(){return{}},group:function(){return{}},groupHeading:function(){return{}},indicatorsContainer:function(){return{}},indicatorSeparator:function(){return{}},input:function(){return{}},loadingIndicator:function(){return{}},loadingMessage:function(){return{}},menu:function(){return{}},menuList:function(e){return{maxHeight:e.maxHeight}},multiValue:function(){return{}},multiValueLabel:function(){return{}},multiValueRemove:function(){return{}},noOptionsMessage:function(){return{}},option:function(){return{}},placeholder:function(){return{}},singleValue:function(){return{}},valueContainer:function(){return{}}},loadingMessage:h,noOptionsMessage:f,isDisabled:m,isSearchable:g,isClearable:v,autoFocus:y,onBlur:w,openMenuOnFocus:x,maxMenuHeight:S,isMulti:k,backspaceRemovesValue:b})},t.defaultProps={width:null,className:"",components:{},loadingMessage:function(){return"Loading..."},isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300},t}(r.PureComponent),L=function(e){var t=e.children,n=e.isFocused,r=e.isInvalid,o=e.className,s=e.htmlFor,l=e.tooltip,c=e.width,u=a.e(e,["children","isFocused","isInvalid","className","htmlFor","tooltip","width"]),d=C()("gf-form-label width-"+(c||"10"),o,{"gf-form-label--is-focused":n,"gf-form-label--is-invalid":r});return i.a.createElement("label",a.a({className:d},u,{htmlFor:s}),t,l&&i.a.createElement(v,{placement:"top",content:l,theme:"info"},i.a.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},i.a.createElement("i",{className:"fa fa-info-circle"}))))},j=function(e){var t=e.label,n=e.labelWidth,r=e.inputWidth,o=a.e(e,["label","labelWidth","inputWidth"]);return i.a.createElement("div",{className:"form-field"},i.a.createElement(L,{width:n},t),i.a.createElement("input",a.a({type:"text",className:"gf-form-input width-"+r},o)))};j.defaultProps={labelWidth:6,inputWidth:12};var U,V=function(e){var t=e.text;return i.a.createElement("div",{className:"gf-form-group"},t," ",i.a.createElement("i",{className:"fa fa-spinner fa-spin"}))},B=n(80),Q=n(129),z=function(e,t){return e[t||Q.a.Dark]};!function(e){e.Small="small",e.Large="large"}(U||(U={}));var H=function(e){var t=e.color,n=e.label,r=e.variant,o=void 0===r?U.Small:r,s=e.isSelected,l=e.theme,c=a.e(e,["color","label","variant","isSelected","theme"]),u=o===U.Small,d=u?"16px":"32px",p=z({light:l.colors.white,dark:l.colors.black},l.type),h={width:d,height:d,borderRadius:"50%",background:""+t,marginRight:u?"0px":"8px",boxShadow:s?"inset 0 0 0 2px "+t+", inset 0 0 0 4px "+p:"none"};return i.a.createElement("div",a.a({style:{display:"flex",alignItems:"center",cursor:"pointer"}},c),i.a.createElement("div",{style:h}),o===U.Large&&i.a.createElement("span",null,n))},G=function(e){var t=e.colors,n=e.selectedColor,r=e.onColorSelect,o=e.theme,s=a.e(e,["colors","selectedColor","onColorSelect","theme"]),l=Object(b.find)(t,function(e){return!!e.isPrimary});return i.a.createElement("div",a.a({},s,{style:{display:"flex",flexDirection:"column"}}),l&&i.a.createElement(H,{key:l.name,isSelected:l.name===n,variant:U.Large,color:Object(B.d)(l,o.type),label:Object(b.upperFirst)(l.hue),onClick:function(){return r(l)},theme:o}),i.a.createElement("div",{style:{display:"flex",marginTop:"8px"}},t.map(function(e){return!e.isPrimary&&i.a.createElement("div",{key:e.name,style:{marginRight:"4px"}},i.a.createElement(H,{key:e.name,isSelected:e.name===n,color:Object(B.d)(e,o.type),onClick:function(){return r(e)},theme:o}))})))},W=function(e){var t=e.color,n=e.onChange,a=e.theme,r=[];return Object(B.g)().forEach(function(e,o){r.push(i.a.createElement(G,{key:o,theme:a,selectedColor:t,colors:e,onColorSelect:function(e){n(e.name)}}))}),i.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridRowGap:"24px",gridColumnGap:"24px"}},r)},Y=n(672),K=n(49),X=n(59),J=n.n(X),Z=function(e){function t(t){var n=e.call(this,t)||this;return n.updateColor=function(e){n.props.onChange(e)},n.handleChange=function(e){var t=J()(e.currentTarget.value);n.setState({value:e.currentTarget.value}),t.isValid()&&n.updateColor(t.toString())},n.handleBlur=function(){J()(n.state.value).isValid()||n.setState({value:n.props.color})},n.state={previousColor:t.color,value:t.color},n.updateColor=Object(b.debounce)(n.updateColor,100),n}return a.c(t,e),t.getDerivedStateFromProps=function(e,t){var n=J()(e.color);return n.isValid()&&e.color!==t.previousColor?a.a({},t,{previousColor:e.color,value:n.toString()}):t},t.prototype.render=function(){var e=this.state.value;return i.a.createElement("div",{style:a.a({display:"flex"},this.props.style)},i.a.createElement("div",{style:{background:this.props.color,width:"35px",height:"35px",flexGrow:0,borderRadius:"3px 0 0 3px"}}),i.a.createElement("div",{style:{flexGrow:1}},i.a.createElement("input",{className:"gf-form-input",value:e,onChange:this.handleChange,onBlur:this.handleBlur})))},t}(i.a.PureComponent),ee=function(e){var t=e.theme,n=e.direction,r={picker:{width:"16px",height:"16px",transform:"vertical"===n?"translate(0, -8px)":"translate(-8px, 0)"}},o=z({light:t.colors.dark3,dark:t.colors.gray2},t.type),s={position:"absolute",left:"6px",width:"0",height:"0",borderStyle:"solid",background:"none"},l={top:"-7px",borderWidth:"6px 3px 0px 3px",borderColor:o+" transparent transparent transparent"},c={bottom:"-7px",borderWidth:"0px 3px 6px 3px",borderColor:" transparent transparent "+o+" transparent"};return"vertical"===n&&(s=a.a({},s,{left:"auto"}),l={borderWidth:"3px 0px 3px 6px",borderColor:"transparent transparent transparent "+o,left:"-7px",top:"7px"},c={borderWidth:"3px 6px 3px 0px",borderColor:"transparent "+o+" transparent transparent",right:"-7px",top:"7px"}),i.a.createElement("div",{style:r.picker},i.a.createElement("div",{style:a.a({},s,l)}),i.a.createElement("div",{style:a.a({},s,c)}))},te=function(e){return function(t){return i.a.createElement(ee,a.a({},t,{theme:e}))}},ne=Object(Y.CustomPicker)(function(e){var t=e.rgb,n=e.hsl,a=e.onChange,r=e.theme;return i.a.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column"}},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{style:{display:"flex",flexGrow:1,flexDirection:"column"}},i.a.createElement("div",{style:{position:"relative",height:"100px",width:"100%"}},i.a.createElement(K.Saturation,{onChange:a,hsl:n,hsv:J()(n).toHsv()})),i.a.createElement("div",{style:{width:"100%",height:"16px",marginTop:"16px",position:"relative",background:"white"}},i.a.createElement(K.Alpha,{rgb:t,hsl:n,a:t.a,onChange:a,pointer:te(r)}))),i.a.createElement("div",{style:{position:"relative",width:"16px",height:"100px",marginLeft:"16px"}},i.a.createElement(K.Hue,{onChange:a,hsl:n,direction:"vertical",pointer:te(r)}))))}),ae=function(e){var t=e.color,n=e.onChange,a=e.theme;return i.a.createElement("div",null,i.a.createElement(ne,{color:J()(Object(B.e)(t)).toRgb(),onChange:function(e){n(J()(e.rgb).toString())},theme:a}),i.a.createElement(Z,{theme:a,color:t,onChange:n,style:{marginTop:"16px"}}))},re=function(e){function t(t){var n=e.call(this,t)||this;return n.getTabClassName=function(e){return"ColorPickerPopover__tab "+(n.state.activePicker===e&&"ColorPickerPopover__tab--active")},n.handleChange=function(e){var t=n.props,a=t.onColorChange,r=t.onChange,i=t.enableNamedColors,o=t.theme,s=a||r;if(i)return s(e);s(Object(B.e)(e,o.type))},n.handleTabChange=function(e){return function(){return n.setState({activePicker:e})}},n.renderPicker=function(){var e=n.state.activePicker,t=n.props,a=t.color,r=t.theme;switch(e){case"spectrum":return i.a.createElement(ae,{color:a,onChange:n.handleChange,theme:r});case"palette":return i.a.createElement(W,{color:Object(B.f)(a,r.type),onChange:n.handleChange,theme:r});default:return n.renderCustomPicker(e)}},n.renderCustomPicker=function(e){var t=n.props,a=t.customPickers,r=t.color,o=t.theme;return a?i.a.createElement(a[e].tabComponent,{color:r,theme:o,onChange:n.handleChange}):null},n.renderCustomPickerTabs=function(){var e=n.props.customPickers;return e?i.a.createElement(i.a.Fragment,null,Object.keys(e).map(function(t){return i.a.createElement("div",{className:n.getTabClassName(t),onClick:n.handleTabChange(t),key:t},e[t].name)})):null},n.state={activePicker:"palette"},ue("ColorPickerPopover",t),n}return a.c(t,e),t.prototype.render=function(){var e=this.props.theme.type||Q.a.Dark;return i.a.createElement("div",{className:"ColorPickerPopover ColorPickerPopover--"+e},i.a.createElement("div",{className:"ColorPickerPopover__tabs"},i.a.createElement("div",{className:this.getTabClassName("palette"),onClick:this.handleTabChange("palette")},"Colors"),i.a.createElement("div",{className:this.getTabClassName("spectrum"),onClick:this.handleTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),i.a.createElement("div",{className:"ColorPickerPopover__content"},this.renderPicker()))},t}(i.a.Component),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={id:y.a.uniqueId()},t.internalOnChange=function(e){e.stopPropagation(),t.props.onChange(e)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.labelClass,n=void 0===t?"":t,a=e.switchClass,r=void 0===a?"":a,o=e.label,s=e.checked,l=e.transparent,c=e.className,u="check-"+this.state.id,d="gf-form-label "+n+" "+(l?"gf-form-label--transparent":"")+" pointer",p="gf-form-switch "+r+" "+(l?"gf-form-switch--transparent":"");return i.a.createElement("label",{htmlFor:u,className:"gf-form gf-form-switch-container "+c},o&&i.a.createElement("div",{className:d},o),i.a.createElement("div",{className:p},i.a.createElement("input",{id:u,type:"checkbox",checked:s,onChange:this.internalOnChange}),i.a.createElement("span",{className:"gf-form-switch__slider"})))},t}(r.PureComponent),oe=n(139),se=function(e){var t=e.yaxis,n=e.onToggleAxis,r=e.color,o=a.e(e,["yaxis","onToggleAxis","color"]);return i.a.createElement(re,a.a({},o,{color:r||"#000000",customPickers:{yaxis:{name:"Y-Axis",tabComponent:function(){return i.a.createElement(ie,{key:"yaxisSwitch",label:"Use right y-axis",className:"ColorPicker__axisSwitch",labelClass:"ColorPicker__axisSwitchLabel",checked:2===t,onChange:function(){n&&n()}})}}}}))},le=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={yaxis:n.props.yaxis},n.onToggleAxis=n.onToggleAxis.bind(n),n}a.c(t,e),t.prototype.onToggleAxis=function(){this.setState({yaxis:2===this.state.yaxis?1:2}),this.props.onToggleAxis&&this.props.onToggleAxis()},t.prototype.render=function(){var e=1===this.state.yaxis?"btn-primary":"btn-inverse",t=2===this.state.yaxis?"btn-primary":"btn-inverse";return i.a.createElement("div",{className:"p-b-1"},i.a.createElement("label",{className:"small p-r-1"},"Y Axis:"),i.a.createElement("button",{onClick:this.onToggleAxis,className:"btn btn-small "+e},"Left"),i.a.createElement("button",{onClick:this.onToggleAxis,className:"btn btn-small "+t},"Right"))}}(i.a.PureComponent),Object(oe.b)(se)),ce=function(e,t,n){var a="[Deprecation warning] "+e+": "+t+" is deprecated. Use "+n+" instead";console.warn(a)},ue=function(e,t){t.onColorChange&&ce(e,"onColorChange","onChange")},de=function(e,t){var n;return void 0===t&&(t="ColorPicker"),(n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.pickerTriggerRef=Object(r.createRef)(),e.handleColorChange=function(t){var n=e.props,a=n.onColorChange,r=n.onChange;return(a||r)(t)},e}return a.c(n,t),n.prototype.render=function(){var t=this,n=i.a.createElement(e,a.a({},this.props,{onChange:this.handleColorChange})),r=this.props,o=r.theme,s=r.children;return i.a.createElement(g,{content:n,hideAfter:300},function(e,n,r){return i.a.createElement(i.a.Fragment,null,t.pickerTriggerRef.current&&i.a.createElement(m,a.a({},r,{referenceElement:t.pickerTriggerRef.current,wrapperClassName:"ColorPicker",onMouseLeave:n,onMouseEnter:e})),s?i.a.cloneElement(s,{ref:t.pickerTriggerRef,onClick:e,onMouseLeave:n}):i.a.createElement("div",{ref:t.pickerTriggerRef,onClick:e,onMouseLeave:n,className:"sp-replacer sp-light"},i.a.createElement("div",{className:"sp-preview"},i.a.createElement("div",{className:"sp-preview-inner",style:{backgroundColor:Object(B.e)(t.props.color||"#000000",o.type)}}))))})},n}(r.Component)).displayName=t,n},pe=Object(oe.b)(de(re,"ColorPicker")),he=Object(oe.b)(de(se,"SeriesColorPicker")),fe=n(85),me=function(e){function t(t){var n=e.call(this,t)||this;n.onAddThreshold=function(e){var t=n.state.thresholds;if(0!==e){var r=t.map(function(t){if(t.index>=e){var n=t.index+1;t=a.a({},t,{index:n})}return t}),i=r.filter(function(t){return t.index===e-1&&0!==t.index})[0],o=r.filter(function(t){return t.index===e+1&&0!==t.index})[0],s=void 0!==i?i.value:0,l=void 0!==o?o.value:100,c=l-(l-s)/2,u=fe.i.filter(function(e){return!r.some(function(t){return t.color===e})})[1];n.setState({thresholds:n.sortThresholds(r.concat([{color:u,index:e,value:c}]))},function(){return n.onChange()})}},n.onRemoveThreshold=function(e){0!==e.index&&n.setState(function(t){return{thresholds:t.thresholds.map(function(t){if(t.index>e.index){var n=t.index-1;t=a.a({},t,{index:n})}return t}).filter(function(t){return t!==e})}},function(){return n.onChange()})},n.onChangeThresholdValue=function(e,t){if(0!==t.index){var r=n.state.thresholds,i=e.target.value.replace(/,/g,"."),o=parseFloat(i),s=isNaN(o)?"":o,l=r.map(function(e){return e===t&&0!==e.index&&(e=a.a({},e,{value:s})),e});n.setState({thresholds:l})}},n.onChangeThresholdColor=function(e,t){var r=n.state.thresholds.map(function(n){return n===e&&(n=a.a({},n,{color:t})),n});n.setState({thresholds:r},function(){return n.onChange()})},n.onBlur=function(){n.setState(function(e){var t=n.sortThresholds(e.thresholds.slice()),a=0;return t.forEach(function(e){e.index=a++}),{thresholds:t}}),n.onChange()},n.onChange=function(){n.props.onChange(n.state.thresholds)},n.sortThresholds=function(e){return e.sort(function(e,t){return e.value-t.value})},n.renderInput=function(e){return i.a.createElement("div",{className:"thresholds-row-input-inner"},i.a.createElement("span",{className:"thresholds-row-input-inner-arrow"}),i.a.createElement("div",{className:"thresholds-row-input-inner-color"},e.color&&i.a.createElement("div",{className:"thresholds-row-input-inner-color-colorpicker"},i.a.createElement(pe,{color:e.color,onChange:function(t){return n.onChangeThresholdColor(e,t)}}))),0===e.index&&i.a.createElement("div",{className:"thresholds-row-input-inner-value"},i.a.createElement("input",{type:"text",value:"Base",readOnly:!0})),e.index>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"thresholds-row-input-inner-value"},i.a.createElement("input",{type:"number",step:"0.0001",onChange:function(t){return n.onChangeThresholdValue(t,e)},value:e.value,onBlur:n.onBlur,readOnly:0===e.index})),i.a.createElement("div",{className:"thresholds-row-input-inner-remove",onClick:function(){return n.onRemoveThreshold(e)}},i.a.createElement("i",{className:"fa fa-times"}))))};var r=0===n.props.thresholds.length,o=r?[{index:0,value:-1/0,color:fe.i[0]}]:t.thresholds;return n.state={thresholds:o},r&&n.onChange(),n}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.state.thresholds;return i.a.createElement(oe.a.Consumer,null,function(n){return i.a.createElement(ye,{title:"Thresholds"},i.a.createElement("div",{className:"thresholds"},t.slice(0).reverse().map(function(t,a){return i.a.createElement("div",{className:"thresholds-row",key:t.index+"-"+a},i.a.createElement("div",{className:"thresholds-row-add-button",onClick:function(){return e.onAddThreshold(t.index+1)}},i.a.createElement("i",{className:"fa fa-plus"})),i.a.createElement("div",{className:"thresholds-row-color-indicator",style:{backgroundColor:Object(B.e)(t.color,n.type)}}),i.a.createElement("div",{className:"thresholds-row-input"},e.renderInput(t)))})))})},t}(r.PureComponent),ge=n(10),ve=n.n(ge),be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=null,t}return a.c(t,e),t.prototype.componentDidUpdate=function(){this.draw()},t.prototype.componentDidMount=function(){this.draw()},t.prototype.draw=function(){if(null!==this.element){var e=this.props,t=e.width,n=e.timeSeries,a=e.timeRange,r=e.showLines,i=e.showBars,o=e.showPoints;if(t){var s=t/100,l=a.from.valueOf(),c=a.to.valueOf(),u={legend:{show:!1},series:{lines:{show:r,linewidth:1,zero:!1},points:{show:o,fill:1,fillColor:!1,radius:2},bars:{show:i,fill:1,barWidth:1,zero:!1,lineWidth:0},shadowSize:0},xaxis:{mode:"time",min:l,max:c,label:"Datetime",ticks:s,timeformat:function(e,t,n){if(t&&n&&e){var a=n-t,r=a/e/1e3;return r<=45?"%H:%M:%S":r<=7200||a<=864e5?"%H:%M":r<=8e4?"%m/%d %H:%M":r<=2419200||a<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"}(s,l,c)},grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0}};try{console.log("Graph render"),ve.a.plot(this.element,n,u)}catch(e){throw console.log("Graph rendering error",e,u,n),new Error("Error rendering panel")}}}},t.prototype.render=function(){var e=this;return i.a.createElement("div",{className:"graph-panel"},i.a.createElement("div",{className:"graph-panel__chart",ref:function(t){return e.element=t}}))},t.defaultProps={showLines:!0,showPoints:!1,showBars:!1},t}(r.PureComponent);var ye=function(e){return i.a.createElement("div",{className:"panel-options-group"},e.onAdd?i.a.createElement("div",{className:"panel-options-group__header"},i.a.createElement("button",{className:"panel-options-group__add-btn",onClick:e.onAdd},i.a.createElement("div",{className:"panel-options-group__add-circle"},i.a.createElement("i",{className:"fa fa-plus"})),i.a.createElement("span",{className:"panel-options-group__title"},e.title))):e.title&&i.a.createElement("div",{className:"panel-options-group__header"},i.a.createElement("span",{className:"panel-options-group__title"},e.title),e.onClose&&i.a.createElement("button",{className:"btn btn-link",onClick:e.onClose},i.a.createElement("i",{className:"fa fa-remove"}))),e.children&&i.a.createElement("div",{className:"panel-options-group__body"},e.children))},we=function(e){var t=e.children;return i.a.createElement("div",{className:"panel-options-grid"},t)},xe=n(51),Se=[{value:xe.MappingType.ValueToText,label:"Value"},{value:xe.MappingType.RangeToText,label:"Range"}],ke=function(e){function t(t){var n=e.call(this,t)||this;return n.onMappingValueChange=function(e){n.setState({value:e.target.value})},n.onMappingFromChange=function(e){n.setState({from:e.target.value})},n.onMappingToChange=function(e){n.setState({to:e.target.value})},n.onMappingTextChange=function(e){n.setState({text:e.target.value})},n.onMappingTypeChange=function(e){n.setState({type:e})},n.updateMapping=function(){n.props.updateValueMapping(a.a({},n.state))},n.state=a.a({},t.valueMapping),n}return a.c(t,e),t.prototype.renderRow=function(){var e=this.state,t=e.from,n=e.text,a=e.to,r=e.type,o=e.value;return r===xe.MappingType.RangeToText?i.a.createElement(i.a.Fragment,null,i.a.createElement(j,{label:"From",labelWidth:4,inputWidth:8,onBlur:this.updateMapping,onChange:this.onMappingFromChange,value:t}),i.a.createElement(j,{label:"To",labelWidth:4,inputWidth:8,onBlur:this.updateMapping,onChange:this.onMappingToChange,value:a}),i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(L,{width:4},"Text"),i.a.createElement("input",{className:"gf-form-input",onBlur:this.updateMapping,value:n,onChange:this.onMappingTextChange}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(j,{label:"Value",labelWidth:4,onBlur:this.updateMapping,onChange:this.onMappingValueChange,value:o,inputWidth:8}),i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(L,{width:4},"Text"),i.a.createElement("input",{className:"gf-form-input",onBlur:this.updateMapping,value:n,onChange:this.onMappingTextChange})))},t.prototype.render=function(){var e=this,t=this.state.type;return i.a.createElement("div",{className:"gf-form-inline"},i.a.createElement("div",{className:"gf-form"},i.a.createElement(L,{width:5},"Type"),i.a.createElement(q,{placeholder:"Choose type",isSearchable:!1,options:Se,value:Se.find(function(e){return e.value===t}),onChange:function(t){return e.onMappingTypeChange(t.value)},width:7})),this.renderRow(),i.a.createElement("div",{className:"gf-form"},i.a.createElement("button",{onClick:this.props.removeValueMapping,className:"gf-form-label gf-form-label--btn"},i.a.createElement("i",{className:"fa fa-times"}))))},t}(r.PureComponent),Ce=function(e){function t(t){var n=e.call(this,t)||this;n.addMapping=function(){return n.setState(function(e){return{valueMappings:e.valueMappings.concat([{id:e.nextIdToAdd,operator:"",value:"",text:"",type:xe.MappingType.ValueToText,from:"",to:""}]),nextIdToAdd:e.nextIdToAdd+1}})},n.onRemoveMapping=function(e){n.setState(function(t){return{valueMappings:t.valueMappings.filter(function(t){return t.id!==e})}},function(){n.props.onChange(n.state.valueMappings)})},n.updateGauge=function(e){n.setState(function(t){return{valueMappings:t.valueMappings.map(function(t){return t.id===e.id?a.a({},e):t})}},function(){n.props.onChange(n.state.valueMappings)})};var r=t.valueMappings;return n.state={valueMappings:r,nextIdToAdd:r.length>0?n.getMaxIdFromValueMappings(r):1},n}return a.c(t,e),t.prototype.getMaxIdFromValueMappings=function(e){return Math.max.apply(null,e.map(function(e){return e.id}).map(function(e){return e}))+1},t.prototype.render=function(){var e=this,t=this.state.valueMappings;return i.a.createElement(ye,{title:"Add value mapping",onAdd:this.addMapping},t.length>0&&t.map(function(t,n){return i.a.createElement(ke,{key:t.text+"-"+n,valueMapping:t,updateValueMapping:e.updateGauge,removeValueMapping:function(){return e.onRemoveMapping(t.id)}})}))},t}(r.PureComponent),Ee=function(e,t){var n=e.reduce(function(e,n){return n.type===xe.MappingType.ValueToText?e=function(e,t,n){if(void 0===t.value)return e;if(null===n&&t.value&&"null"===t.value.toLowerCase())return e.concat(t);var a=parseFloat(n),r=parseFloat(t.value);return isNaN(a)||isNaN(r)?e:a!==r?e:e.concat(t)}(e,n,t):n.type===xe.MappingType.RangeToText&&(e=function(e,t,n){if(void 0===t.from||void 0===t.to||void 0===n)return e;if(null===n&&t.from&&t.to&&"null"===t.from.toLowerCase()&&"null"===t.to.toLowerCase())return e.concat(t);var a=parseFloat(n),r=parseFloat(t.from),i=parseFloat(t.to);return isNaN(a)||isNaN(r)||isNaN(i)?e:a>=r&&a<=i?e.concat(t):e}(e,n,t)),e},[]);return n.sort(function(e,t){return e.id-t.id}),n},Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentDidMount=function(){this.draw()},t.prototype.componentDidUpdate=function(){this.draw()},t.prototype.formatValue=function(e){var t=this.props,n=t.decimals,a=t.valueMappings,r=t.prefix,i=t.suffix,o=t.unit;if(isNaN(e))return e;if(a.length>0){var s=function(e,t){return Ee(e,t)[0]}(a,e);if(s)return""+(r&&r+" ")+s.text+(i&&" "+i)}var l=Object(fe.q)(o)(e,n);return""+(r&&r+" ")+(l||"no value")+(i&&" "+i)},t.prototype.getFontColor=function(e){var t=this.props,n=t.thresholds,a=t.theme;if(1===n.length)return Object(fe.n)(n[0].color,a.type);var r=n.filter(function(t){return e===t.value})[0];if(r)return Object(fe.n)(r.color,a.type);var i=n.filter(function(t){return e>t.value});if(i.length>0){var o=i.sort(function(e,t){return t.value-e.value})[0];return Object(fe.n)(o.color,a.type)}return xe.BasicGaugeColor.Red},t.prototype.getFormattedThresholds=function(){var e=this.props,t=e.maxValue,n=e.minValue,a=e.thresholds,r=e.theme,i=a[a.length-1];return a.map(function(e){if(0===e.index)return{value:n,color:Object(fe.n)(e.color,r.type)};var t=a[e.index-1];return{value:e.value,color:Object(fe.n)(t.color,r.type)}}).concat([{value:t,color:Object(fe.n)(i.color,r.type)}])},t.prototype.getFontScale=function(e){return e>12?1-5*e/110:1-5*e/100},t.prototype.draw=function(){var e=this.props,t=e.maxValue,n=e.minValue,a=e.showThresholdLabels,r=e.showThresholdMarkers,i=e.width,o=e.height,s=e.theme,l=e.value,c=this.formatValue(l),u=Math.min(i,1.3*o),d=s.type===xe.GrafanaThemeType.Light?"rgb(230,230,230)":s.colors.dark3,p=a?1.5:1,h=Math.min(u/6,60)/p,f=h/5,m=Math.min(u/5,100)*(null!==c?this.getFontScale(c.length):1),g=m/2.5,v={series:{gauges:{gauge:{min:n,max:t,background:{color:d},border:{color:null},shadow:{show:!1},width:h},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0},cell:{border:{width:0}},threshold:{values:this.getFormattedThresholds(),label:{show:a,margin:f+1,font:{size:g}},show:r,width:f},value:{color:this.getFontColor(l),formatter:function(){return c},font:{size:m,family:'"Helvetica Neue", Helvetica, Arial, sans-serif'}},show:!0}}},b={data:[[0,l]]};try{ve.a.plot(this.canvasElement,[b],v)}catch(e){console.log("Gauge rendering error",e,v,l)}},t.prototype.render=function(){var e=this,t=this.props,n=t.height,a=t.width;return i.a.createElement("div",{className:"singlestat-panel"},i.a.createElement("div",{style:{height:.9*n+"px",width:Math.min(a,1.3*n)+"px",top:"10px",margin:"auto"},ref:function(t){return e.canvasElement=t}}))},t.defaultProps={maxValue:100,valueMappings:[],minValue:0,prefix:"",showThresholdMarkers:!0,showThresholdLabels:!1,suffix:"",thresholds:[],unit:"none",stat:"avg",theme:xe.GrafanaThemeType.Dark},t}(r.PureComponent);n.d(t,"d",function(){return o}),n.d(t,"x",function(){return v}),n.d(t,"o",function(){return g}),n.d(t,"n",function(){return m}),n.d(t,"p",function(){return u}),n.d(t,"c",function(){return S}),n.d(t,"q",function(){return q}),n.d(t,"a",function(){return R}),n.d(t,"r",function(){}),n.d(t,"i",function(){return N}),n.d(t,"k",function(){return O}),n.d(t,"z",function(){return $}),n.d(t,"f",function(){return L}),n.d(t,"e",function(){return j}),n.d(t,"j",function(){return V}),n.d(t,"b",function(){return pe}),n.d(t,"s",function(){return he}),n.d(t,"t",function(){return se}),n.d(t,"u",function(){return le}),n.d(t,"w",function(){return me}),n.d(t,"h",function(){return be}),n.d(t,"m",function(){return ye}),n.d(t,"l",function(){return we}),n.d(t,"y",function(){return Ce}),n.d(t,"g",function(){return Te}),n.d(t,"v",function(){return ie})},,,,,,,,,,,function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(44),c=n(679),u=n(26),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={stats:[],isLoading:!1},n}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e,t;return a.d(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.setState({isLoading:!0}),[4,this.props.getServerStats()];case 1:return e=n.sent(),this.setState({stats:e,isLoading:!1}),[3,3];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}})})},t.prototype.render=function(){var e=this.props.navModel,t=this.state,n=t.stats,a=t.isLoading;return i.a.createElement(u.a,{navModel:e},i.a.createElement(u.a.Contents,{isLoading:a},i.a.createElement("table",{className:"filter-table form-inline"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Value"))),i.a.createElement("tbody",null,n.map(p)))))},t}(r.PureComponent);function p(e){return i.a.createElement("tr",{key:e.name},i.a.createElement("td",null,e.name),i.a.createElement("td",null,e.value))}t.a=Object(o.hot)(e)(Object(s.b)(function(e){return{navModel:Object(l.a)(e.navIndex,"server-stats"),getServerStats:c.a}})(d))}).call(this,n(74)(e))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(2),r=n(14),i=function(){return a.b(void 0,void 0,Promise,function(){var e,t;return a.d(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Object(r.a)().get("api/admin/stats")];case 1:return[2,[{name:"Total users",value:(e=n.sent()).users},{name:"Total dashboards",value:e.dashboards},{name:"Active users (seen last 30 days)",value:e.activeUsers},{name:"Total orgs",value:e.orgs},{name:"Total playlists",value:e.playlists},{name:"Total snapshots",value:e.snapshots},{name:"Total dashboard tags",value:e.tags},{name:"Total starred dashboards",value:e.stars},{name:"Total alerts",value:e.alerts}]];case 2:throw t=n.sent(),console.error(t),t;case 3:return[2]}})})}},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(26),c=n(681),u=n(9),d=n(27),p=n(44),h=n(155),f=n(385),m=n(75),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateFilters=[{text:"All",value:"all"},{text:"OK",value:"ok"},{text:"Not OK",value:"not_ok"},{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Paused",value:"paused"},{text:"Pending",value:"pending"}],t.onStateFilterChanged=function(e){t.props.updateLocation({query:{state:e.target.value}})},t.onOpenHowTo=function(){u.b.emit("show-modal",{src:"public/app/features/alerting/partials/alert_howto.html",modalClass:"confirm-modal",model:{}})},t.onSearchQueryChange=function(e){t.props.setSearchQuery(e)},t.onTogglePause=function(e){t.props.togglePauseAlertRule(e.id,{paused:"paused"!==e.state})},t.alertStateFilterOption=function(e){var t=e.text,n=e.value;return i.a.createElement("option",{key:n,value:n},t)},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.fetchRules()},t.prototype.componentDidUpdate=function(e){e.stateFilter!==this.props.stateFilter&&this.fetchRules()},t.prototype.fetchRules=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.getAlertRulesAsync({state:this.getStateFilter()})];case 1:return e.sent(),[2]}})})},t.prototype.getStateFilter=function(){var e=this.props.stateFilter;return e?e.toString():"all"},t.prototype.render=function(){var e=this,t=this.props,n=t.navModel,a=t.alertRules,r=t.search,o=t.isLoading;return i.a.createElement(l.a,{navModel:n},i.a.createElement(l.a.Contents,{isLoading:o},i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(m.a,{labelClassName:"gf-form--has-input-icon gf-form--grow",inputClassName:"gf-form-input",placeholder:"Search alerts",value:r,onChange:this.onSearchQueryChange})),i.a.createElement("div",{className:"gf-form"},i.a.createElement("label",{className:"gf-form-label"},"States"),i.a.createElement("div",{className:"gf-form-select-wrapper width-13"},i.a.createElement("select",{className:"gf-form-input",onChange:this.onStateFilterChanged,value:this.getStateFilter()},this.stateFilters.map(this.alertStateFilterOption)))),i.a.createElement("div",{className:"page-action-bar__spacer"}),i.a.createElement("a",{className:"btn btn-secondary",onClick:this.onOpenHowTo},i.a.createElement("i",{className:"fa fa-info-circle"})," How to add an alert")),i.a.createElement("section",null,i.a.createElement("ol",{className:"alert-rule-list"},a.map(function(t){return i.a.createElement(c.a,{rule:t,key:t.id,search:r,onTogglePause:function(){return e.onTogglePause(t)}})})))))},t}(r.PureComponent),v={updateLocation:d.c,getAlertRulesAsync:h.b,setSearchQuery:h.c,togglePauseAlertRule:h.d};t.a=Object(o.hot)(e)(Object(s.b)(function(e){return{navModel:Object(p.a)(e.navIndex,"alert-list"),alertRules:Object(f.a)(e.alertRules),stateFilter:e.location.query.state,search:Object(f.b)(e.alertRules),isLoading:e.alertRules.isLoading}},v)(g))}).call(this,n(74)(e))},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(267),s=n.n(o),l=n(13),c=n.n(l),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.renderText=function(e){return i.a.createElement(s.a,{highlightClassName:"highlight-search-match",textToHighlight:e,searchWords:[this.props.search]})},t.prototype.render=function(){var e=this.props,t=e.rule,n=e.onTogglePause,a=c()({fa:!0,"fa-play":"paused"===t.state,"fa-pause":"paused"!==t.state}),r=t.url+"?panelId="+t.panelId+"&fullscreen&edit&tab=alert";return i.a.createElement("li",{className:"alert-rule-item"},i.a.createElement("span",{className:"alert-rule-item__icon "+t.stateClass},i.a.createElement("i",{className:t.stateIcon})),i.a.createElement("div",{className:"alert-rule-item__body"},i.a.createElement("div",{className:"alert-rule-item__header"},i.a.createElement("div",{className:"alert-rule-item__name"},i.a.createElement("a",{href:r},this.renderText(t.name))),i.a.createElement("div",{className:"alert-rule-item__text"},i.a.createElement("span",{className:""+t.stateClass},this.renderText(t.stateText)),i.a.createElement("span",{className:"alert-rule-item__time"}," for ",t.stateAge))),t.info&&i.a.createElement("div",{className:"small muted alert-rule-item__info"},this.renderText(t.info))),i.a.createElement("div",{className:"alert-rule-item__actions"},i.a.createElement("button",{className:"btn btn-small btn-inverse alert-list__btn width-2",title:"Pausing an alert rule prevents it from executing",onClick:n},i.a.createElement("i",{className:a})),i.a.createElement("a",{className:"btn btn-small btn-inverse alert-list__btn width-2",href:r,title:"Edit alert rule"},i.a.createElement("i",{className:"icon-gf icon-gf-settings"}))))},t}(r.PureComponent);t.a=u},function(e,t,n){"use strict";(function(e){var a,r=n(2),i=n(0),o=n.n(i),s=n(23),l=n(1),c=n.n(l),u=n(38),d=n(7),p=n(26),h=n(683),f=n(684),m=n(685),g=n(55),v=n(104),b=n(283),y=n(44),w=n(141);!function(e){e.Members="members",e.Settings="settings",e.GroupSync="groupsync"}(a||(a={}));var x=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!1,isSyncEnabled:d.a.buildInfo.isEnterprise},n}return r.c(t,e),t.prototype.componentDidMount=function(){return r.b(this,void 0,void 0,function(){return r.d(this,function(e){switch(e.label){case 0:return[4,this.fetchTeam()];case 1:return e.sent(),[2]}})})},t.prototype.fetchTeam=function(){return r.b(this,void 0,void 0,function(){var e,t,n,a;return r.d(this,function(r){switch(r.label){case 0:return e=this.props,t=e.loadTeam,n=e.teamId,this.setState({isLoading:!0}),[4,t(n)];case 1:return a=r.sent(),this.setState({isLoading:!1}),[2,a]}})})},t.prototype.getCurrentPage=function(){var e=["members","settings","groupsync"],t=this.props.pageName;return c.a.includes(e,t)?t:e[0]},t.prototype.renderPage=function(){var e=this.state.isSyncEnabled;switch(this.getCurrentPage()){case a.Members:return o.a.createElement(h.a,{syncEnabled:e});case a.Settings:return o.a.createElement(f.a,null);case a.GroupSync:return e&&o.a.createElement(m.a,null)}return null},t.prototype.render=function(){var e=this.props,t=e.team,n=e.navModel;return o.a.createElement(p.a,{navModel:n},o.a.createElement(p.a.Contents,{isLoading:this.state.isLoading},t&&0!==Object.keys(t).length&&this.renderPage()))},t}(i.PureComponent);var S={loadTeam:g.e};t.a=Object(u.hot)(e)(Object(s.b)(function(e){var t=Object(w.a)(e.location),n=Object(w.b)(e.location)||"members",a=Object(b.b)(n);return{navModel:Object(y.a)(e.navIndex,"team-"+n+"-"+t,a),teamId:t,pageName:n,team:Object(v.c)(e.team,t)}},S)(x))}).call(this,n(74)(e))},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(132),l=n(282),c=n(6),u=n(201),d=n(55),p=n(104),h=n(75),f=function(e){function t(t){var n=e.call(this,t)||this;return n.onSearchQueryChange=function(e){n.props.setSearchMemberQuery(e)},n.onToggleAdding=function(){n.setState({isAdding:!n.state.isAdding})},n.onUserSelected=function(e){n.setState({newTeamMember:e})},n.onAddUserToTeam=function(){return a.b(n,void 0,void 0,function(){return a.d(this,function(e){return this.props.addTeamMember(this.state.newTeamMember.id),this.setState({newTeamMember:null}),[2]})})},n.state={isAdding:!1,newTeamMember:null},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.props.loadTeamMembers()},t.prototype.onRemoveMember=function(e){this.props.removeTeamMember(e.userId)},t.prototype.renderLabels=function(e){return e?i.a.createElement("td",null,e.map(function(e){return i.a.createElement(u.a,{key:e,label:e,removeIcon:!1,count:0,onClick:function(){}})})):i.a.createElement("td",null)},t.prototype.renderMember=function(e,t){var n=this;return i.a.createElement("tr",{key:e.userId},i.a.createElement("td",{className:"width-4 text-center"},i.a.createElement("img",{className:"filter-table__avatar",src:e.avatarUrl})),i.a.createElement("td",null,e.login),i.a.createElement("td",null,e.email),t&&this.renderLabels(e.labels),i.a.createElement("td",{className:"text-right"},i.a.createElement(c.DeleteButton,{onConfirm:function(){return n.onRemoveMember(e)}})))},t.prototype.render=function(){var e=this,t=this.state.isAdding,n=this.props,a=n.searchMemberQuery,r=n.members,o=n.syncEnabled;return i.a.createElement("div",null,i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(h.a,{labelClassName:"gf-form--has-input-icon gf-form--grow",inputClassName:"gf-form-input",placeholder:"Search members",value:a,onChange:this.onSearchQueryChange})),i.a.createElement("div",{className:"page-action-bar__spacer"}),i.a.createElement("button",{className:"btn btn-primary pull-right",onClick:this.onToggleAdding,disabled:t},"Add member")),i.a.createElement(s.a,{in:t},i.a.createElement("div",{className:"cta-form"},i.a.createElement("button",{className:"cta-form__close btn btn-transparent",onClick:this.onToggleAdding},i.a.createElement("i",{className:"fa fa-close"})),i.a.createElement("h5",null,"Add team member"),i.a.createElement("div",{className:"gf-form-inline"},i.a.createElement(l.a,{onSelected:this.onUserSelected,className:"min-width-30"}),this.state.newTeamMember&&i.a.createElement("button",{className:"btn btn-primary gf-form-btn",type:"submit",onClick:this.onAddUserToTeam},"Add to team")))),i.a.createElement("div",{className:"admin-list-table"},i.a.createElement("table",{className:"filter-table filter-table--hover form-inline"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Email"),o&&i.a.createElement("th",null),i.a.createElement("th",{style:{width:"1%"}}))),i.a.createElement("tbody",null,r&&r.map(function(t){return e.renderMember(t,o)})))))},t}(r.PureComponent);var m={loadTeamMembers:d.g,addTeamMember:d.c,removeTeamMember:d.j,setSearchMemberQuery:d.k};t.a=Object(o.b)(function(e){return{members:Object(p.e)(e.team),searchMemberQuery:Object(p.a)(e.team)}},m)(f)},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(6),l=n(203),c=n(55),u=n(141),d=n(104),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeName=function(e){n.setState({name:e.target.value})},n.onChangeEmail=function(e){n.setState({email:e.target.value})},n.onUpdate=function(e){var t=n.state,a=t.name,r=t.email;e.preventDefault(),n.props.updateTeam(a,r)},n.state={name:t.team.name,email:t.team.email},n}return a.c(t,e),t.prototype.render=function(){var e=this.props.team,t=this.state,n=t.name,a=t.email;return i.a.createElement("div",null,i.a.createElement("h3",{className:"page-sub-heading"},"Team Settings"),i.a.createElement("form",{name:"teamDetailsForm",className:"gf-form-group",onSubmit:this.onUpdate},i.a.createElement("div",{className:"gf-form max-width-30"},i.a.createElement(s.FormLabel,null,"Name"),i.a.createElement("input",{type:"text",required:!0,value:n,className:"gf-form-input max-width-22",onChange:this.onChangeName})),i.a.createElement("div",{className:"gf-form max-width-30"},i.a.createElement(s.FormLabel,{tooltip:"This is optional and is primarily used to set the team profile avatar (via gravatar service)"},"Email"),i.a.createElement("input",{type:"email",className:"gf-form-input max-width-22",value:a,placeholder:"team@email.com",onChange:this.onChangeEmail})),i.a.createElement("div",{className:"gf-form-button-row"},i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Update"))),i.a.createElement(l.a,{resourceUri:"teams/"+e.id}))},t}(i.a.Component);var h={updateTeam:c.m};t.a=Object(o.b)(function(e){var t=Object(u.a)(e.location);return{team:Object(d.c)(e.team,t)}},h)(p)},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(132),l=n(6),c=n(55),u=n(104),d="Sync LDAP or OAuth groups with your Grafana teams.",p=function(e){function t(t){var n=e.call(this,t)||this;return n.onToggleAdding=function(){n.setState({isAdding:!n.state.isAdding})},n.onNewGroupIdChanged=function(e){n.setState({newGroupId:e.target.value})},n.onAddGroup=function(e){e.preventDefault(),n.props.addTeamGroup(n.state.newGroupId),n.setState({isAdding:!1,newGroupId:""})},n.onRemoveGroup=function(e){n.props.removeTeamGroup(e.groupId)},n.state={isAdding:!1,newGroupId:""},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.fetchTeamGroups()},t.prototype.fetchTeamGroups=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadTeamGroups()];case 1:return e.sent(),[2]}})})},t.prototype.isNewGroupValid=function(){return this.state.newGroupId.length>1},t.prototype.renderGroup=function(e){var t=this;return i.a.createElement("tr",{key:e.groupId},i.a.createElement("td",null,e.groupId),i.a.createElement("td",{style:{width:"1%"}},i.a.createElement("a",{className:"btn btn-danger btn-mini",onClick:function(){return t.onRemoveGroup(e)}},i.a.createElement("i",{className:"fa fa-remove"}))))},t.prototype.render=function(){var e=this,t=this.state,n=t.isAdding,a=t.newGroupId,r=this.props.groups;return i.a.createElement("div",null,i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("h3",{className:"page-sub-heading"},"External group sync"),i.a.createElement(l.Tooltip,{placement:"auto",content:d},i.a.createElement("div",{className:"page-sub-heading-icon"},i.a.createElement("i",{className:"gicon gicon-question gicon--has-hover"}))),i.a.createElement("div",{className:"page-action-bar__spacer"}),r.length>0&&i.a.createElement("button",{className:"btn btn-primary pull-right",onClick:this.onToggleAdding},i.a.createElement("i",{className:"fa fa-plus"})," Add group")),i.a.createElement(s.a,{in:n},i.a.createElement("div",{className:"cta-form"},i.a.createElement("button",{className:"cta-form__close btn btn-transparent",onClick:this.onToggleAdding},i.a.createElement("i",{className:"fa fa-close"})),i.a.createElement("h5",null,"Add External Group"),i.a.createElement("form",{className:"gf-form-inline",onSubmit:this.onAddGroup},i.a.createElement("div",{className:"gf-form"},i.a.createElement("input",{type:"text",className:"gf-form-input width-30",value:a,onChange:this.onNewGroupIdChanged,placeholder:"cn=ops,ou=groups,dc=grafana,dc=org"})),i.a.createElement("div",{className:"gf-form"},i.a.createElement("button",{className:"btn btn-primary gf-form-btn",type:"submit",disabled:!this.isNewGroupValid()},"Add group"))))),0===r.length&&!n&&i.a.createElement("div",{className:"empty-list-cta"},i.a.createElement("div",{className:"empty-list-cta__title"},"There are no external groups to sync with"),i.a.createElement("button",{onClick:this.onToggleAdding,className:"empty-list-cta__button btn btn-xlarge btn-primary"},i.a.createElement("i",{className:"gicon gicon-add-team"}),"Add Group"),i.a.createElement("div",{className:"empty-list-cta__pro-tip"},i.a.createElement("i",{className:"fa fa-rocket"})," ",d,i.a.createElement("a",{className:"text-link empty-list-cta__pro-tip-link",href:"http://docs.grafana.org/auth/enhanced_ldap/",target:"_blank"},"Learn more"))),r.length>0&&i.a.createElement("div",{className:"admin-list-table"},i.a.createElement("table",{className:"filter-table filter-table--hover form-inline"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"External Group ID"),i.a.createElement("th",{style:{width:"1%"}}))),i.a.createElement("tbody",null,r.map(function(t){return e.renderGroup(t)})))))},t}(r.PureComponent);var h={loadTeamGroups:c.f,addTeamGroup:c.b,removeTeamGroup:c.i};t.a=Object(o.b)(function(e){return{groups:Object(u.d)(e.team)}},h)(p)},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(38),l=n(26),c=n(6),u=n(131),d=n(55),p=n(104),h=n(44),f=n(75),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deleteTeam=function(e){t.props.deleteTeam(e.id)},t.onSearchQueryChange=function(e){t.props.setSearchQuery(e)},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.fetchTeams()},t.prototype.fetchTeams=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadTeams()];case 1:return e.sent(),[2]}})})},t.prototype.renderTeam=function(e){var t=this,n="org/teams/edit/"+e.id;return i.a.createElement("tr",{key:e.id},i.a.createElement("td",{className:"width-4 text-center link-td"},i.a.createElement("a",{href:n},i.a.createElement("img",{className:"filter-table__avatar",src:e.avatarUrl}))),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:n},e.name)),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:n},e.email)),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:n},e.memberCount)),i.a.createElement("td",{className:"text-right"},i.a.createElement(c.DeleteButton,{onConfirm:function(){return t.deleteTeam(e)}})))},t.prototype.renderEmptyList=function(){return i.a.createElement("div",{className:"page-container page-body"},i.a.createElement(u.a,{model:{title:"You haven't created any teams yet.",buttonIcon:"fa fa-plus",buttonLink:"org/teams/new",buttonTitle:" New team",proTip:"Assign folder and dashboard permissions to teams instead of users to ease administration.",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"}}))},t.prototype.renderTeamList=function(){var e=this,t=this.props,n=t.teams,a=t.searchQuery;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(f.a,{labelClassName:"gf-form--has-input-icon gf-form--grow",inputClassName:"gf-form-input",placeholder:"Search teams",value:a,onChange:this.onSearchQueryChange})),i.a.createElement("div",{className:"page-action-bar__spacer"}),i.a.createElement("a",{className:"btn btn-primary",href:"org/teams/new"},"New team")),i.a.createElement("div",{className:"admin-list-table"},i.a.createElement("table",{className:"filter-table filter-table--hover form-inline"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"Members"),i.a.createElement("th",{style:{width:"1%"}}))),i.a.createElement("tbody",null,n.map(function(t){return e.renderTeam(t)})))))},t.prototype.renderList=function(){return this.props.teamsCount>0?this.renderTeamList():this.renderEmptyList()},t.prototype.render=function(){var e=this.props,t=e.hasFetched,n=e.navModel;return i.a.createElement(l.a,{navModel:n},i.a.createElement(l.a.Contents,{isLoading:!t},t&&this.renderList()))},t}(r.PureComponent);var g={loadTeams:d.h,deleteTeam:d.d,setSearchQuery:d.l};t.a=Object(s.hot)(e)(Object(o.b)(function(e){return{navModel:Object(h.a)(e.navIndex,"teams"),teams:Object(p.f)(e.teams),searchQuery:Object(p.b)(e.teams),teamsCount:Object(p.g)(e.teams),hasFetched:e.teams.hasFetched}},g)(m))}).call(this,n(74)(e))},function(e,t,n){"use strict";(function(e){var a,r=n(2),i=n(0),o=n.n(i),s=n(688),l=n.n(s),c=n(23),u=n(38),d=n(37),p=n(44),h=n(386),f=n(156),m=n(26),g=n(132),v=n(689),b=n(7),y=n(9),w=n(131),x=n(6),S=n(75);!function(e){e.Name="name",e.Role="role"}(a||(a={}));var k={name:"",role:d.OrgRole.Viewer},C=function(e){function t(t){var n=e.call(this,t)||this;return n.onSearchQueryChange=function(e){n.props.setSearchQuery(e)},n.onToggleAdding=function(){n.setState({isAdding:!n.state.isAdding})},n.onAddApiKey=function(e){return r.b(n,void 0,void 0,function(){var t;return r.d(this,function(n){return e.preventDefault(),t=function(e){var t=window.location.origin+b.a.appSubUrl,n=l.a.renderToString(o.a.createElement(v.a,{apiKey:e,rootPath:t}));y.b.emit("show-modal",{templateHtml:n})},this.props.addApiKey(this.state.newApiKey,t),this.setState(function(e){return r.a({},e,{newApiKey:k,isAdding:!1})}),[2]})})},n.onApiKeyStateUpdate=function(e,t){var a=e.currentTarget.value;n.setState(function(e){var n=r.a({},e.newApiKey);return n[t]=a,r.a({},e,{newApiKey:n})})},n.state={isAdding:!1,newApiKey:k},n}return r.c(t,e),t.prototype.componentDidMount=function(){this.fetchApiKeys()},t.prototype.fetchApiKeys=function(){return r.b(this,void 0,void 0,function(){return r.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadApiKeys()];case 1:return e.sent(),[2]}})})},t.prototype.onDeleteApiKey=function(e){this.props.deleteApiKey(e.id)},t.prototype.renderEmptyList=function(){var e=this.state.isAdding;return o.a.createElement(o.a.Fragment,null,!e&&o.a.createElement(w.a,{model:{title:"You haven't added any API Keys yet.",buttonIcon:"fa fa-plus",buttonLink:"#",onClick:this.onToggleAdding,buttonTitle:" New API Key",proTip:"Remember you can provide view-only API access to other applications.",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"}}),this.renderAddApiKeyForm())},t.prototype.renderAddApiKeyForm=function(){var e=this,t=this.state,n=t.newApiKey,r=t.isAdding;return o.a.createElement(g.a,{in:r},o.a.createElement("div",{className:"cta-form"},o.a.createElement("button",{className:"cta-form__close btn btn-transparent",onClick:this.onToggleAdding},o.a.createElement("i",{className:"fa fa-close"})),o.a.createElement("h5",null,"Add API Key"),o.a.createElement("form",{className:"gf-form-group",onSubmit:this.onAddApiKey},o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form max-width-21"},o.a.createElement("span",{className:"gf-form-label"},"Key name"),o.a.createElement("input",{type:"text",className:"gf-form-input",value:n.name,placeholder:"Name",onChange:function(t){return e.onApiKeyStateUpdate(t,a.Name)}})),o.a.createElement("div",{className:"gf-form"},o.a.createElement("span",{className:"gf-form-label"},"Role"),o.a.createElement("span",{className:"gf-form-select-wrapper"},o.a.createElement("select",{className:"gf-form-input gf-size-auto",value:n.role,onChange:function(t){return e.onApiKeyStateUpdate(t,a.Role)}},Object.keys(d.OrgRole).map(function(e){return o.a.createElement("option",{key:e,label:e,value:e},e)})))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"btn gf-form-btn btn-primary"},"Add"))))))},t.prototype.renderApiKeyList=function(){var e=this,t=this.state.isAdding,n=this.props,a=n.apiKeys,r=n.searchQuery;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"page-action-bar"},o.a.createElement("div",{className:"gf-form gf-form--grow"},o.a.createElement(S.a,{labelClassName:"gf-form--has-input-icon gf-form--grow",inputClassName:"gf-form-input",placeholder:"Search keys",value:r,onChange:this.onSearchQueryChange})),o.a.createElement("div",{className:"page-action-bar__spacer"}),o.a.createElement("button",{className:"btn btn-primary pull-right",onClick:this.onToggleAdding,disabled:t},"Add API key")),this.renderAddApiKeyForm(),o.a.createElement("h3",{className:"page-heading"},"Existing Keys"),o.a.createElement("table",{className:"filter-table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Role"),o.a.createElement("th",{style:{width:"34px"}}))),a.length>0?o.a.createElement("tbody",null,a.map(function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.role),o.a.createElement("td",null,o.a.createElement(x.DeleteButton,{onConfirm:function(){return e.onDeleteApiKey(t)}})))})):null))},t.prototype.render=function(){var e=this.props,t=e.hasFetched,n=e.navModel,a=e.apiKeysCount;return o.a.createElement(m.a,{navModel:n},o.a.createElement(m.a.Contents,{isLoading:!t},t&&(a>0?this.renderApiKeyList():this.renderEmptyList())))},t}(i.PureComponent);var E={loadApiKeys:f.d,deleteApiKey:f.c,setSearchQuery:f.e,addApiKey:f.b};t.a=Object(u.hot)(e)(Object(c.b)(function(e){return{navModel:Object(p.a)(e.navIndex,"apikeys"),apiKeys:Object(h.a)(e.apiKeys),searchQuery:e.apiKeys.searchQuery,apiKeysCount:Object(h.b)(e.apiKeys),hasFetched:e.apiKeys.hasFetched}},E)(C))}).call(this,n(74)(e))},,function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){return r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h2",{className:"modal-header-title"},r.a.createElement("i",{className:"fa fa-key"}),r.a.createElement("span",{className:"p-l-1"},"API Key Created")),r.a.createElement("a",{className:"modal-header-close","ng-click":"dismiss();"},r.a.createElement("i",{className:"fa fa-remove"}))),r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"gf-form-group"},r.a.createElement("div",{className:"gf-form"},r.a.createElement("span",{className:"gf-form-label"},"Key"),r.a.createElement("span",{className:"gf-form-label"},e.apiKey))),r.a.createElement("div",{className:"grafana-info-box",style:{border:0}},"You will only be able to view this key here once! It is not stored in this form. So be sure to copy it now.",r.a.createElement("br",null),r.a.createElement("br",null),"You can authenticate request using the Authorization HTTP header, example:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("pre",{className:"small"},'curl -H "Authorization: Bearer ',e.apiKey,'" ',e.rootPath,"/api/dashboards/home"))))}},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(26),c=n(284),u=n(721),d=n(86),p=n(44),h=n(297),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentDidMount=function(){this.fetchPlugins()},t.prototype.fetchPlugins=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadPlugins()];case 1:return e.sent(),[2]}})})},t.prototype.render=function(){var e=this.props,t=e.hasFetched,n=e.navModel,a=e.plugins,r=e.layoutMode,o=e.setPluginsLayoutMode,s=e.setPluginsSearchQuery,d=e.searchQuery;return i.a.createElement(l.a,{navModel:n},i.a.createElement(l.a.Contents,{isLoading:!t},i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{searchQuery:d,layoutMode:r,onSetLayoutMode:function(e){return o(e)},setSearchQuery:function(e){return s(e)},linkButton:{href:"https://grafana.com/plugins?utm_source=grafana_plugin_list",title:"Find more plugins on Grafana.com"}}),t&&a&&a&&i.a.createElement(u.a,{plugins:a,layoutMode:r}))))},t}(r.PureComponent);var m={loadPlugins:d.c,setPluginsLayoutMode:d.d,setPluginsSearchQuery:d.e};t.a=Object(o.hot)(e)(Object(s.b)(function(e){return{navModel:Object(p.a)(e.navIndex,"plugins"),plugins:Object(h.b)(e.plugins),layoutMode:Object(h.a)(e.plugins),searchQuery:Object(h.c)(e.plugins),hasFetched:e.plugins.hasFetched}},m)(f))}).call(this,n(74)(e))},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(26),c=n(9),u=n(44),d=n(87),p=n(204),h=function(e){function t(t){var n=e.call(this,t)||this;return n.onTitleChange=function(e){n.props.setFolderTitle(e.target.value)},n.onSave=function(e){return a.b(n,void 0,void 0,function(){return a.d(this,function(t){switch(t.label){case 0:return e.preventDefault(),e.stopPropagation(),this.setState({isLoading:!0}),[4,this.props.saveFolder(this.props.folder)];case 1:return t.sent(),this.setState({isLoading:!1}),[2]}})})},n.onDelete=function(e){e.stopPropagation(),e.preventDefault(),c.b.emit("confirm-modal",{title:"Delete",text:"Do you want to delete this folder and all its dashboards?",icon:"fa-trash",yesText:"Delete",onConfirm:function(){n.props.deleteFolder(n.props.folder.uid)}})},n.state={isLoading:!1},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.props.getFolderByUid(this.props.folderUid)},t.prototype.render=function(){var e=this.props,t=e.navModel,n=e.folder;return i.a.createElement(l.a,{navModel:t},i.a.createElement(l.a.Contents,{isLoading:this.state.isLoading},i.a.createElement("h2",{className:"page-sub-heading"},"Folder Settings"),i.a.createElement("div",{className:"section gf-form-group"},i.a.createElement("form",{name:"folderSettingsForm",onSubmit:this.onSave},i.a.createElement("div",{className:"gf-form"},i.a.createElement("label",{className:"gf-form-label width-7"},"Name"),i.a.createElement("input",{type:"text",className:"gf-form-input width-30",value:n.title,onChange:this.onTitleChange})),i.a.createElement("div",{className:"gf-form-button-row"},i.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!n.canSave||!n.hasChanged},"Save"),i.a.createElement("button",{className:"btn btn-danger",onClick:this.onDelete,disabled:!n.canSave},"Delete"))))))},t}(r.PureComponent),f={getFolderByUid:d.d,saveFolder:d.g,setFolderTitle:d.h,deleteFolder:d.c};t.a=Object(o.hot)(e)(Object(s.b)(function(e){var t=e.location.routeParams.uid;return{navModel:Object(u.a)(e.navIndex,"folder-settings-"+t,Object(p.b)(2)),folderUid:t,folder:e.folder}},f)(h))}).call(this,n(74)(e))},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(26),c=n(6),u=n(132),d=n(44),p=n(87),h=n(204),f=n(294),m=n(295),g=n(285),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onOpenAddPermissions=function(){n.setState({isAdding:!0})},n.onRemoveItem=function(e){n.props.removeFolderPermission(e)},n.onPermissionChanged=function(e,t){n.props.updateFolderPermission(e,t)},n.onAddPermission=function(e){return n.props.addFolderPermission(e)},n.onCancelAddPermission=function(){n.setState({isAdding:!1})},n.state={isAdding:!1},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.props.getFolderByUid(this.props.folderUid),this.props.getFolderPermissions(this.props.folderUid)},t.prototype.render=function(){var e=this.props,t=e.navModel,n=e.folder,a=this.state.isAdding;if(0===n.id)return i.a.createElement(l.a,{navModel:t},i.a.createElement(l.a.Contents,{isLoading:!0},i.a.createElement("span",null)));var r={title:n.title,url:n.url,id:n.id};return i.a.createElement(l.a,{navModel:t},i.a.createElement(l.a.Contents,null,i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("h3",{className:"page-sub-heading"},"Folder Permissions"),i.a.createElement(c.Tooltip,{placement:"auto",content:i.a.createElement(g.a,null)},i.a.createElement("div",{className:"page-sub-heading-icon"},i.a.createElement("i",{className:"gicon gicon-question gicon--has-hover"}))),i.a.createElement("div",{className:"page-action-bar__spacer"}),i.a.createElement("button",{className:"btn btn-primary pull-right",onClick:this.onOpenAddPermissions,disabled:a},"Add Permission")),i.a.createElement(u.a,{in:a},i.a.createElement(m.a,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),i.a.createElement(f.a,{items:n.permissions,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:r})))},t}(r.PureComponent),b={getFolderByUid:p.d,getFolderPermissions:p.e,updateFolderPermission:p.i,removeFolderPermission:p.f,addFolderPermission:p.b};t.a=Object(o.hot)(e)(Object(s.b)(function(e){var t=e.location.routeParams.uid;return{navModel:Object(d.a)(e.navIndex,"folder-permissions-"+t,Object(h.b)(1)),folderUid:t,folder:e.folder}},b)(v))}).call(this,n(74)(e))},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(38),l=n(26),c=n(284),u=n(131),d=n(722),p=n(50),h=n(44),f=n(105),m={title:"There are no data sources defined yet",buttonIcon:"gicon gicon-add-datasources",buttonLink:"datasources/new",buttonTitle:"Add data source",proTip:"You can also define data sources through configuration files.",proTipLink:"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list",proTipLinkTitle:"Learn more",proTipTarget:"_blank"},g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentDidMount=function(){this.fetchDataSources()},t.prototype.fetchDataSources=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadDataSources()];case 1:return[2,e.sent()]}})})},t.prototype.render=function(){var e=this.props,t=e.dataSources,n=e.dataSourcesCount,a=e.navModel,r=e.layoutMode,o=e.searchQuery,s=e.setDataSourcesSearchQuery,p=e.setDataSourcesLayoutMode,h=e.hasFetched;return i.a.createElement(l.a,{navModel:a},i.a.createElement(l.a.Contents,{isLoading:!h},i.a.createElement(i.a.Fragment,null,h&&0===n&&i.a.createElement(u.a,{model:m}),h&&n>0&&[i.a.createElement(c.a,{layoutMode:r,searchQuery:o,onSetLayoutMode:function(e){return p(e)},setSearchQuery:function(e){return s(e)},linkButton:{href:"datasources/new",title:"Add data source"},key:"action-bar"}),i.a.createElement(d.a,{dataSources:t,layoutMode:r,key:"list"})])))},t}(r.PureComponent);var v={loadDataSources:p.j,setDataSourcesSearchQuery:p.n,setDataSourcesLayoutMode:p.m};t.a=Object(s.hot)(e)(Object(o.b)(function(e){return{navModel:Object(h.a)(e.navIndex,"datasources"),dataSources:Object(f.d)(e.dataSources),layoutMode:Object(f.f)(e.dataSources),dataSourcesCount:Object(f.e)(e.dataSources),searchQuery:Object(f.g)(e.dataSources),hasFetched:e.dataSources.hasFetched}},v)(g))}).call(this,n(74)(e))},,,,,,,,function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(38),l=n(26),c=n(50),u=n(44),d=n(105),p=n(75),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDataSourceTypeClicked=function(e){t.props.addDataSource(e)},t.onSearchQueryChange=function(e){t.props.setDataSourceTypeSearchQuery(e)},t}return a.c(t,e),t.prototype.componentDidMount=function(){this.props.loadDataSourceTypes()},t.prototype.render=function(){var e=this,t=this.props,n=t.navModel,a=t.dataSourceTypes,r=t.dataSourceTypeSearchQuery,o=t.isLoading;return i.a.createElement(l.a,{navModel:n},i.a.createElement(l.a.Contents,{isLoading:o},i.a.createElement("h2",{className:"add-data-source-header"},"Choose data source type"),i.a.createElement("div",{className:"add-data-source-search"},i.a.createElement(p.a,{labelClassName:"gf-form--has-input-icon",inputClassName:"gf-form-input width-20",value:r,onChange:this.onSearchQueryChange,placeholder:"Filter by name or type"})),i.a.createElement("div",{className:"add-data-source-grid"},a.map(function(t,n){return i.a.createElement("div",{onClick:function(){return e.onDataSourceTypeClicked(t)},className:"add-data-source-grid-item",key:t.id+"-"+n},i.a.createElement("img",{className:"add-data-source-grid-item-logo",src:t.info.logos.small}),i.a.createElement("span",{className:"add-data-source-grid-item-text"},t.name))}))))},t}(r.PureComponent);var f={addDataSource:c.a,loadDataSourceTypes:c.i,setDataSourceTypeSearchQuery:c.l};t.a=Object(s.hot)(e)(Object(o.b)(function(e){return{navModel:Object(u.a)(e.navIndex,"datasources"),dataSourceTypes:Object(d.c)(e.dataSources),isLoading:e.dataSources.isLoadingDataSources}},f)(h))}).call(this,n(74)(e))},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(111),c=n.n(l),u=n(26),d=n(703),p=n(704),h=n(723),f=n(9),m=n(95),g=n(44),v=n(177),b=function(e){function t(t){var n=e.call(this,t)||this;if(n.onRoleChange=function(e,t){var r=a.a({},t,{role:e});n.props.updateUser(r)},n.onRemoveUser=function(e){f.b.emit("confirm-modal",{title:"Delete",text:"Are you sure you want to delete user "+e.login+"?",yesText:"Delete",icon:"fa-warning",onConfirm:function(){n.props.removeUser(e.userId)}})},n.onShowInvites=function(){n.setState(function(e){return{showInvites:!e.showInvites}})},n.props.externalUserMngInfo){var r=new c.a;n.externalUserMngInfoHtml=r.render(n.props.externalUserMngInfo)}return n.state={showInvites:!1},n}return a.c(t,e),t.prototype.componentDidMount=function(){this.fetchUsers(),this.fetchInvitees()},t.prototype.fetchUsers=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadUsers()];case 1:return[2,e.sent()]}})})},t.prototype.fetchInvitees=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadInvitees()];case 1:return[2,e.sent()]}})})},t.prototype.renderTable=function(){var e=this,t=this.props,n=t.invitees,a=t.users;return this.state.showInvites?i.a.createElement(h.a,{invitees:n}):i.a.createElement(p.a,{users:a,onRoleChange:function(t,n){return e.onRoleChange(t,n)},onRemoveUser:function(t){return e.onRemoveUser(t)}})},t.prototype.render=function(){var e=this.props,t=e.navModel,n=e.hasFetched,a=this.externalUserMngInfoHtml;return i.a.createElement(u.a,{navModel:t},i.a.createElement(u.a.Contents,{isLoading:!n},i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{onShowInvites:this.onShowInvites,showInvites:this.state.showInvites}),a&&i.a.createElement("div",{className:"grafana-info-box",dangerouslySetInnerHTML:{__html:a}}),n&&this.renderTable())))},t}(r.PureComponent);var y={loadUsers:m.c,loadInvitees:m.b,setUsersSearchQuery:m.f,updateUser:m.g,removeUser:m.d};t.a=Object(o.hot)(e)(Object(s.b)(function(e){return{navModel:Object(g.a)(e.navIndex,"users"),users:Object(v.c)(e.users),searchQuery:Object(v.d)(e.users),invitees:Object(v.a)(e.users),externalUserMngInfo:e.users.externalUserMngInfo,hasFetched:e.users.hasFetched}},y)(b))}).call(this,n(74)(e))},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(13),l=n.n(s),c=n(95),u=n(177),d=n(75),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.canInvite,n=e.externalUserMngLinkName,a=e.externalUserMngLinkUrl,r=e.searchQuery,o=e.pendingInvitesCount,s=e.setUsersSearchQuery,c=e.onShowInvites,u=e.showInvites,p=l()({btn:!0,"toggle-btn":!0,active:u}),h=l()({btn:!0,"toggle-btn":!0,active:!u});return i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(d.a,{labelClassName:"gf-form--has-input-icon",inputClassName:"gf-form-input width-20",value:r,onChange:s,placeholder:"Filter by name or type"}),o>0&&i.a.createElement("div",{style:{marginLeft:"1rem"}},i.a.createElement("button",{className:h,key:"users",onClick:c},"Users"),i.a.createElement("button",{className:p,onClick:c,key:"pending-invites"},"Pending Invites (",o,")")),i.a.createElement("div",{className:"page-action-bar__spacer"}),t&&i.a.createElement("a",{className:"btn btn-primary",href:"org/users/invite"},i.a.createElement("span",null,"Invite")),a&&i.a.createElement("a",{className:"btn btn-primary",href:a,target:"_blank"},i.a.createElement("i",{className:"fa fa-external-link-square"})," ",n)))},t}(r.PureComponent);var h={setUsersSearchQuery:c.f};t.a=Object(o.b)(function(e){return{searchQuery:Object(u.d)(e.users),pendingInvitesCount:Object(u.b)(e.users),externalUserMngLinkName:e.users.externalUserMngLinkName,externalUserMngLinkUrl:e.users.externalUserMngLinkUrl,canInvite:e.users.canInvite}},h)(p)},function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.users,n=e.onRoleChange,a=e.onRemoveUser;return r.a.createElement("table",{className:"filter-table form-inline"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Login"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Seen"),r.a.createElement("th",null,"Role"),r.a.createElement("th",{style:{width:"34px"}}))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:e.userId+"-"+t},r.a.createElement("td",{className:"width-4 text-center"},r.a.createElement("img",{className:"filter-table__avatar",src:e.avatarUrl})),r.a.createElement("td",null,e.login),r.a.createElement("td",null,r.a.createElement("span",{className:"ellipsis"},e.email)),r.a.createElement("td",null,e.lastSeenAtAge),r.a.createElement("td",null,r.a.createElement("div",{className:"gf-form-select-wrapper width-12"},r.a.createElement("select",{value:e.role,className:"gf-form-input",onChange:function(t){return n(t.target.value,e)}},["Viewer","Editor","Admin"].map(function(e,t){return r.a.createElement("option",{value:e,key:e+"-"+t},e)})))),r.a.createElement("td",null,r.a.createElement("div",{onClick:function(){return a(e)},className:"btn btn-danger btn-mini"},r.a.createElement("i",{className:"fa fa-remove"}))))})))}},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(26),c=n(706),u=n(44),d=n(141),p=n(50),h=n(86),f=n(54),m=n(105),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onImport=function(e,n){var a=t.props,r=a.dataSource,i=a.importDashboard,o={pluginId:e.pluginId,path:e.path,overwrite:n,inputs:[]};r&&o.inputs.push({name:"*",type:"datasource",pluginId:r.type,value:r.name}),i(o,e.title)},t.onRemove=function(e){t.props.removeDashboard(e.importedUri)},t}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e,t,n;return a.d(this,function(a){switch(a.label){case 0:return e=this.props,t=e.loadDataSource,n=e.pageId,[4,t(n)];case 1:return a.sent(),this.props.loadPluginDashboards(),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.dashboards,a=t.navModel,r=t.isLoading;return i.a.createElement(l.a,{navModel:a},i.a.createElement(l.a.Contents,{isLoading:r},i.a.createElement(c.a,{dashboards:n,onImport:function(t,n){return e.onImport(t,n)},onRemove:function(t){return e.onRemove(t)}})))},t}(r.PureComponent);var v={importDashboard:f.i,loadDataSource:p.h,loadPluginDashboards:h.b,removeDashboard:f.k};t.a=Object(o.hot)(e)(Object(s.b)(function(e){var t=Object(d.a)(e.location);return{navModel:Object(u.a)(e.navIndex,"datasource-dashboards-"+t),pageId:t,dashboards:e.plugins.dashboards,dataSource:Object(m.a)(e.dataSources,t),isLoading:e.plugins.isLoadingPluginDashboards}},v)(g))}).call(this,n(74)(e))},function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.dashboards,n=e.onImport,a=e.onRemove;return r.a.createElement("table",{className:"filter-table"},r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:e.dashboardId+"-"+t},r.a.createElement("td",{className:"width-1"},r.a.createElement("i",{className:"icon-gf icon-gf-dashboard"})),r.a.createElement("td",null,e.imported?r.a.createElement("a",{href:e.importedUrl},e.title):r.a.createElement("span",null,e.title)),r.a.createElement("td",{style:{textAlign:"right"}},e.imported?r.a.createElement("button",{className:"btn btn-secondary btn-small",onClick:function(){return n(e,!0)}},function(e){return e.revision!==e.importedRevision?"Update":"Re-import"}(e)):r.a.createElement("button",{className:"btn btn-secondary btn-small",onClick:function(){return n(e,!1)}},"Import"),e.imported&&r.a.createElement("button",{className:"btn btn-danger btn-small",onClick:function(){return a(e)}},r.a.createElement("i",{className:"fa fa-trash"}))))})))}},function(e,t,n){"use strict";(function(e){var a,r=n(2),i=n(0),o=n.n(i),s=n(38),l=n(23),c=n(26),u=n(708),d=n(709),p=n(710),h=n(9),f=n(14),m=n(102),g=n(105),v=n(50),b=n(44),y=n(141),w=n(288);!function(e){e.Alpha="alpha",e.Beta="beta"}(a||(a={}));var x=function(e){function t(t){var n=e.call(this,t)||this;return n.onSubmit=function(e){return r.b(n,void 0,void 0,function(){return r.d(this,function(t){switch(t.label){case 0:return e.preventDefault(),[4,this.props.updateDataSource(r.a({},this.state.dataSource,{name:this.props.dataSource.name}))];case 1:return t.sent(),this.testDataSource(),[2]}})})},n.onTest=function(e){return r.b(n,void 0,void 0,function(){return r.d(this,function(t){return e.preventDefault(),this.testDataSource(),[2]})})},n.onDelete=function(){h.b.emit("confirm-modal",{title:"Delete",text:"Are you sure you want to delete this data source?",yesText:"Delete",icon:"fa-trash",onConfirm:function(){n.confirmDelete()}})},n.confirmDelete=function(){n.props.deleteDataSource()},n.onModelChange=function(e){n.setState({dataSource:e})},n.state={dataSource:{}},n}return r.c(t,e),t.prototype.componentDidMount=function(){return r.b(this,void 0,void 0,function(){var e,t,n;return r.d(this,function(a){switch(a.label){case 0:return e=this.props,t=e.loadDataSource,n=e.pageId,[4,t(n)];case 1:return a.sent(),[2]}})})},t.prototype.isReadOnly=function(){return!0===this.props.dataSource.readOnly},t.prototype.shouldRenderInfoBox=function(){var e=this.props.dataSourceMeta.state;return e===a.Alpha||e===a.Beta},t.prototype.getInfoText=function(){switch(this.props.dataSourceMeta.state){case a.Alpha:return"This plugin is marked as being in alpha state, which means it is in early development phase and updates will include breaking changes.";case a.Beta:return"This plugin is marked as being in a beta development state. This means it is in currently in active development and could be missing important features."}return null},t.prototype.renderIsReadOnlyMessage=function(){return o.a.createElement("div",{className:"grafana-info-box span8"},"This datasource was added by config and cannot be modified using the UI. Please contact your server admin to update this datasource.")},t.prototype.testDataSource=function(){return r.b(this,void 0,void 0,function(){var e,t=this;return r.d(this,function(n){switch(n.label){case 0:return[4,Object(m.a)().get(this.state.dataSource.name)];case 1:return(e=n.sent()).testDatasource?(this.setState({isTesting:!0,testingMessage:"Testing...",testingStatus:"info"}),Object(f.a)().withNoBackendCache(function(){return r.b(t,void 0,void 0,function(){var t,n,a;return r.d(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.testDatasource()];case 1:return t=r.sent(),this.setState({isTesting:!1,testingStatus:t.status,testingMessage:t.message}),[3,3];case 2:return n=r.sent(),a="",a=n.statusText?"HTTP Error "+n.statusText:n.message,this.setState({isTesting:!1,testingStatus:"error",testingMessage:a}),[3,3];case 3:return[2]}})})}),[2]):[2]}})})},Object.defineProperty(t.prototype,"hasDataSource",{get:function(){return Object.keys(this.props.dataSource).length>0},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props,n=t.dataSource,a=t.dataSourceMeta,r=t.navModel,i=t.setDataSourceName,s=t.setIsDefault,l=this.state,h=l.testingMessage,f=l.testingStatus;return o.a.createElement(c.a,{navModel:r},o.a.createElement(c.a.Contents,{isLoading:!this.hasDataSource},this.hasDataSource&&o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.onSubmit},this.isReadOnly()&&this.renderIsReadOnlyMessage(),this.shouldRenderInfoBox()&&o.a.createElement("div",{className:"grafana-info-box"},this.getInfoText()),o.a.createElement(d.a,{dataSourceName:n.name,isDefault:n.isDefault,onDefaultChange:function(e){return s(e)},onNameChange:function(e){return i(e)}}),a.module&&o.a.createElement(u.a,{dataSource:n,dataSourceMeta:a,onModelChange:this.onModelChange}),o.a.createElement("div",{className:"gf-form-group"},h&&o.a.createElement("div",{className:"alert-"+f+" alert"},o.a.createElement("div",{className:"alert-icon"},"error"===f?o.a.createElement("i",{className:"fa fa-exclamation-triangle"}):o.a.createElement("i",{className:"fa fa-check"})),o.a.createElement("div",{className:"alert-body"},o.a.createElement("div",{className:"alert-title"},h)))),o.a.createElement(p.a,{onSubmit:function(t){return e.onSubmit(t)},isReadOnly:this.isReadOnly(),onDelete:this.onDelete,onTest:function(t){return e.onTest(t)}})))))},t}(i.PureComponent);var S={deleteDataSource:v.g,loadDataSource:v.h,setDataSourceName:v.k,updateDataSource:v.p,setIsDefault:v.o};t.a=Object(s.hot)(e)(Object(l.b)(function(e){var t=Object(y.a)(e.location),n=Object(g.a)(e.dataSources,t);return{navModel:Object(b.a)(e.navIndex,"datasource-settings-"+t,Object(w.b)("settings")),dataSource:Object(g.a)(e.dataSources,t),dataSourceMeta:Object(g.b)(e.dataSources,n.type),pageId:t}},S)(x))}).call(this,n(74)(e))},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(1),s=n.n(o),l=n(62),c=function(e){function t(t){var n=e.call(this,t)||this;return n.onModelChanged=function(e){n.props.onModelChange(e)},n.scopeProps={ctrl:{datasourceMeta:t.dataSourceMeta,current:s.a.cloneDeep(t.dataSource)},onModelChanged:n.onModelChanged},n}return a.c(t,e),t.prototype.componentDidMount=function(){if(this.element){var e=Object(l.a)();this.component=e.load(this.element,this.scopeProps,'<plugin-component type="datasource-config-ctrl" />')}},t.prototype.componentDidUpdate=function(e){this.props.dataSource!==e.dataSource&&(this.scopeProps.ctrl.current=s.a.cloneDeep(this.props.dataSource),this.component.digest())},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.render=function(){var e=this;return i.a.createElement("div",{ref:function(t){return e.element=t}})},t}(r.PureComponent);t.a=c},function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(6);t.a=function(e){var t=e.dataSourceName,n=e.isDefault,a=e.onDefaultChange,o=e.onNameChange;return r.a.createElement("div",{className:"gf-form-group"},r.a.createElement("div",{className:"gf-form-inline"},r.a.createElement("div",{className:"gf-form max-width-30",style:{marginRight:"3px"}},r.a.createElement(i.FormLabel,{tooltip:"The name is used when you select the data source in panels. The Default data source is preselected in new panels."},"Name"),r.a.createElement("input",{className:"gf-form-input max-width-23",type:"text",value:t,placeholder:"Name",onChange:function(e){return o(e.target.value)},required:!0})),r.a.createElement(i.Switch,{label:"Default",checked:n,onChange:function(e){return a(e.target.checked)}})))}},function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.isReadOnly,n=e.onDelete,a=e.onSubmit,i=e.onTest;return r.a.createElement("div",{className:"gf-form-button-row"},!t&&r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:t,onClick:function(e){return a(e)}},"Save & Test"),t&&r.a.createElement("button",{type:"submit",className:"btn btn-success",onClick:i},"Test"),r.a.createElement("button",{type:"submit",className:"btn btn-danger",disabled:t,onClick:n},"Delete"),r.a.createElement("a",{className:"btn btn-inverse",href:"/datasources"},"Back"))}},function(e,t,n){"use strict";(function(e){var a=n(2),r=n(0),i=n.n(r),o=n(38),s=n(23),l=n(26),c=n(712),u=n(203),d=n(178),p=n(44),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onOrgNameChange=function(e){t.props.setOrganizationName(e)},t.onUpdateOrganization=function(){t.props.updateOrganization()},t}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){return a.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadOrganization()];case 1:return e.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.navModel,a=t.organization,r=0===Object.keys(a).length;return i.a.createElement(l.a,{navModel:n},i.a.createElement(l.a.Contents,{isLoading:r},!r&&i.a.createElement("div",null,i.a.createElement(c.a,{onOrgNameChange:function(t){return e.onOrgNameChange(t)},onSubmit:this.onUpdateOrganization,orgName:a.name}),i.a.createElement(u.b,{resourceUri:"org"}))))},t}(r.PureComponent);var f={loadOrganization:d.b,setOrganizationName:d.c,updateOrganization:d.d};t.a=Object(o.hot)(e)(Object(s.b)(function(e){return{navModel:Object(p.a)(e.navIndex,"org-settings"),organization:e.organization.organization}},f)(h))}).call(this,n(74)(e))},function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.onSubmit,n=e.onOrgNameChange,a=e.orgName;return r.a.createElement("div",null,r.a.createElement("h3",{className:"page-sub-heading"},"Organization profile"),r.a.createElement("form",{name:"orgForm",className:"gf-form-group",onSubmit:function(e){e.preventDefault(),t()}},r.a.createElement("div",{className:"gf-form-inline"},r.a.createElement("div",{className:"gf-form max-width-28"},r.a.createElement("span",{className:"gf-form-label"},"Organization name"),r.a.createElement("input",{className:"gf-form-input",type:"text",onChange:function(e){n(e.target.value)},value:a}))),r.a.createElement("div",{className:"gf-form-button-row"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"))))}},,,,,,,,,function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(13),o=n.n(i),s=function(e){var t=e.plugin;return r.a.createElement("li",{className:"card-item-wrapper"},r.a.createElement("a",{className:"card-item",href:"plugins/"+t.id+"/edit"},r.a.createElement("div",{className:"card-item-header"},r.a.createElement("div",{className:"card-item-type"},r.a.createElement("i",{className:"icon-gf icon-gf-"+t.type}),t.type),t.hasUpdate&&r.a.createElement("div",{className:"card-item-notice"},r.a.createElement("span",{"bs-tooltip":"plugin.latestVersion"},"Update available!"))),r.a.createElement("div",{className:"card-item-body"},r.a.createElement("figure",{className:"card-item-figure"},r.a.createElement("img",{src:t.info.logos.small})),r.a.createElement("div",{className:"card-item-details"},r.a.createElement("div",{className:"card-item-name"},t.name),r.a.createElement("div",{className:"card-item-sub-name"},"By "+t.info.author.name)))))},l=n(112);t.a=function(e){var t=e.plugins,n=e.layoutMode,a=o()({"card-section":!0,"card-list-layout-grid":n===l.a.Grid,"card-list-layout-list":n===l.a.List});return r.a.createElement("section",{className:a},r.a.createElement("ol",{className:"card-list"},t.map(function(e,t){return r.a.createElement(s,{plugin:e,key:e.name+"-"+t})})))}},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(13),s=n.n(o),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.dataSource;return i.a.createElement("li",{className:"card-item-wrapper"},i.a.createElement("a",{className:"card-item",href:"datasources/edit/"+e.id},i.a.createElement("div",{className:"card-item-header"},i.a.createElement("div",{className:"card-item-type"},e.type)),i.a.createElement("div",{className:"card-item-body"},i.a.createElement("figure",{className:"card-item-figure"},i.a.createElement("img",{src:e.typeLogoUrl,alt:e.name})),i.a.createElement("div",{className:"card-item-details"},i.a.createElement("div",{className:"card-item-name"},e.name,e.isDefault&&i.a.createElement("span",{className:"btn btn-secondary btn-mini card-item-label"},"default")),i.a.createElement("div",{className:"card-item-sub-name"},e.url)))))},t}(r.PureComponent),c=n(112),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.dataSources,n=e.layoutMode,a=s()({"card-section":!0,"card-list-layout-grid":n===c.a.Grid,"card-list-layout-list":n===c.a.List});return i.a.createElement("section",{className:a},i.a.createElement("ol",{className:"card-list"},t.map(function(e,t){return i.a.createElement(l,{dataSource:e,key:e.id+"-"+t})})))},t}(r.PureComponent);t.a=u},function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),o=n(23),s=n(95),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.copyUrlRef=Object(r.createRef)(),t.copyToClipboard=function(){var e=t.copyUrlRef.current;e&&(e.select(),document.execCommand("copy"))},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.invitee,n=e.revokeInvite;return i.a.createElement("tr",null,i.a.createElement("td",null,t.email),i.a.createElement("td",null,t.name),i.a.createElement("td",{className:"text-right"},i.a.createElement("button",{className:"btn btn-inverse btn-mini",onClick:this.copyToClipboard},i.a.createElement("textarea",{readOnly:!0,value:t.url,style:{position:"absolute",right:-1e3},ref:this.copyUrlRef}),i.a.createElement("i",{className:"fa fa-clipboard"})," Copy Invite")," "),i.a.createElement("td",null,i.a.createElement("button",{className:"btn btn-danger btn-mini",onClick:function(){return n(t.code)}},i.a.createElement("i",{className:"fa fa-remove"}))))},t}(r.PureComponent),c={revokeInvite:s.e},u=Object(o.b)(function(){return{}},c)(l),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.invitees;return i.a.createElement("table",{className:"filter-table form-inline"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"Name"),i.a.createElement("th",null),i.a.createElement("th",{style:{width:"34px"}}))),i.a.createElement("tbody",null,e.map(function(e,t){return i.a.createElement(u,{key:e.id+"-"+t,invitee:e})})))},t}(r.PureComponent);t.a=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),function(e){"use strict";var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};function a(){e(".dropdown-backdrop").remove(),e(t).each(function(){r(e(this)).removeClass("open")})}function r(t){var n,a=t.attr("data-target");return a||(a=(a=t.attr("href"))&&/#[A-Za-z]/.test(a)&&a.replace(/.*(?=#[^\s]*$)/,"")),(n=a&&e(a))&&n.length||(n=t.parent()),n}n.prototype={constructor:n,toggle:function(t){var n,i,o=e(this);if(!o.is(".disabled, :disabled"))return i=(n=r(o)).hasClass("open"),a(),i||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",a),n.toggleClass("open")),o.focus(),!1},keydown:function(n){var a,i,o,s,l;if(/(38|40|27)/.test(n.keyCode)&&(a=e(this),n.preventDefault(),n.stopPropagation(),!a.is(".disabled, :disabled"))){if(!(s=(o=r(a)).hasClass("open"))||s&&27==n.keyCode)return 27==n.which&&o.find(t).focus(),a.click();(i=e("[role=menu] li:not(.divider):visible a",o)).length&&(l=i.index(i.filter(":focus")),38==n.keyCode&&l>0&&l--,40==n.keyCode&&l<i.length-1&&l++,~l||(l=0),i.eq(l).focus())}}};var i=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var a=e(this),r=a.data("dropdown");r||a.data("dropdown",r=new n(this)),"string"==typeof t&&r[t].call(a)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=i,this},e(document).on("click.dropdown.data-api",a).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var a=e(this),r=a.data("modal"),i=e.extend({},e.fn.modal.defaults,a.data(),"object"==typeof n&&n);r||a.data("modal",r=new t(this,i)),"string"==typeof n?r[n]():i.show&&r.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),a=n.attr("href"),r=e(n.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),i=r.data("modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},r.data(),n.data());t.preventDefault(),r.modal(i).one("hide",function(){n.focus()})})}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,a){var r,i,o,s,l;for(this.type=t,this.$element=e(n),this.options=this.getOptions(a),this.enabled=!0,l=(o=this.options.trigger.split(" ")).length;l--;)"click"==(s=o[l])?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=s&&(r="hover"==s?"mouseenter":"focus",i="hover"==s?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return(t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n,a=e.fn[this.type].defaults,r={};if(this._options&&e.each(this._options,function(e,t){a[e]!=t&&(r[e]=t)},this),!(n=e(t.currentTarget)[this.type](r).data(this.type)).options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},show:function(){var t,n,a,r,i,o,s=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(s),s.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),i="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),a=t[0].offsetWidth,r=t[0].offsetHeight,i){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-a/2};break;case"top":o={top:n.top-r,left:n.left+n.width/2-a/2};break;case"left":o={top:n.top+n.height/2-r/2,left:n.left-a};break;case"right":o={top:n.top+n.height/2-r/2,left:n.left+n.width};break;case"topLeft":o={top:n.top-r,left:n.left+n.width/2-.1*a};break;case"topRight":o={top:n.top-r,left:n.left+n.width/2-.9*a};break;case"rightTop":o={top:n.top+n.height/2-.1*r,left:n.left+n.width};break;case"rightBottom":o={top:n.top+n.height/2-.9*r,left:n.left+n.width};break;case"bottomLeft":o={top:n.top+n.height,left:n.left+n.width/2-.1*a};break;case"bottomRight":o={top:n.top+n.height,left:n.left+n.width/2-.9*a};break;case"leftTop":o={top:n.top+n.height/2-.1*r,left:n.left-a};break;case"leftBottom":o={top:n.top+n.height/2-.9*r,left:n.left-a}}this.applyPlacement(o,i),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,a,r,i,o=this.tip(),s=o[0].offsetWidth,l=o[0].offsetHeight;o.offset(e).addClass(t).addClass("in"),n=o[0].offsetWidth,a=o[0].offsetHeight,"top"==t&&a!=l&&(e.top=e.top+l-a,i=!0),"bottom"==t||"top"==t?(r=0,e.left<0&&(r=-2*e.left,e.left=0,o.offset(e),n=o[0].offsetWidth,a=o[0].offsetHeight),this.replaceArrow(r-s+n,n,"left")):this.replaceArrow(a-l,a,"top"),i&&o.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){var t=this.tip(),n=e.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return t.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?function(){var n=setTimeout(function(){t.off(e.support.transition.end).detach()},500);t.one(e.support.transition.end,function(){clearTimeout(n),t.detach()})}():t.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var a=e(this),r=a.data("tooltip"),i="object"==typeof n&&n;r||a.data("tooltip",r=new t(this,i)),"string"==typeof n&&r[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,a,r=this.element,i=r.closest("ul:not(.dropdown-menu)"),o=r.attr("data-target");o||(o=(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(t=i.find(".active:last a")[0],a=e.Event("show",{relatedTarget:t}),r.trigger(a),a.isDefaultPrevented()||(n=e(o),this.activate(r.parent("li"),i),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,a){var r=n.find("> .active"),i=a&&e.support.transition&&r.hasClass("fade");function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),i?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),a&&a()}i?r.one(e.support.transition.end,o):o(),r.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var a=e(this),r=a.data("tab");r||a.data("tab",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source)?this.process(n):this},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),(t=this.sorter(t)).length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],a=[],r=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?a.push(t):r.push(t):n.push(t);return n.concat(a,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t?e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"}):e},render:function(t){var n=this;return t=e(t).map(function(t,a){return(t=e(n.options.item).attr("data-value",a)).find("a").html(n.highlighter(a)),t[0]}),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active").next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active").prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown&&(!e.shiftKey||40!==e.keyCode)){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27,57]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}13===e.keyCode&&void 0===this.$menu.find(".active").attr("data-value")?this.$element.submit():(e.stopPropagation(),e.preventDefault())},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var a=e(this),r=a.data("typeahead"),i="object"==typeof n&&n;r||a.data("typeahead",r=new t(this,i)),"string"==typeof n&&r[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);n.data("typeahead")||n.typeahead(n.data())})}(window.jQuery),function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,n=e(document).height(),a=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,o=i.bottom,s=i.top;"object"!=typeof i&&(o=s=i),"function"==typeof s&&(s=i.top()),"function"==typeof o&&(o=i.bottom()),t=!(null!=this.unpin&&a+this.unpin<=r.top)&&(null!=o&&r.top+this.$element.height()>=n-o?"bottom":null!=s&&a<=s&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?r.top-a:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(t?"-"+t:"")))}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var a=e(this),r=a.data("affix"),i="object"==typeof n&&n;r||a.data("affix",r=new t(this,i)),"string"==typeof n&&r[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery)},function(e,t){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.position","ui.bootstrap.dateparser","ui.bootstrap.datepicker"]),angular.module("ui.bootstrap.tpls",["template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html"]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e){return"static"===(function(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}(e,"position")||"static")}return{position:function(t){var a=this.offset(t),r={top:0,left:0},i=function(t){for(var a=e[0],r=t.offsetParent||a;r&&r!==a&&n(r);)r=r.offsetParent;return r||a}(t[0]);i!=e[0]&&((r=this.offset(angular.element(i))).top+=i.clientTop-i.scrollTop,r.left+=i.clientLeft-i.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:a.top-r.top,left:a.left-r.left}},offset:function(n){var a=n[0].getBoundingClientRect();return{width:a.width||n.prop("offsetWidth"),height:a.height||n.prop("offsetHeight"),top:a.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:a.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,a){var r,i,o,s,l=n.split("-"),c=l[0],u=l[1]||"center";r=a?this.offset(e):this.position(e),i=t.prop("offsetWidth"),o=t.prop("offsetHeight");var d={center:function(){return r.left+r.width/2-i/2},left:function(){return r.left},right:function(){return r.left+r.width}},p={center:function(){return r.top+r.height/2-o/2},top:function(){return r.top},bottom:function(){return r.top+r.height}};switch(c){case"right":s={top:p[u](),left:d[c]()};break;case"left":s={top:p[u](),left:r.left-i};break;case"bottom":s={top:p[c](),left:d[u]()};break;default:s={top:r.top-o,left:d[u]()}}return s}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$log","$locale","orderByFilter",function(e,t,n){var a=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var r={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)}},MMM:{regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:t.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:t.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e}},hh:{regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e}},H:{regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e}},h:{regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e}},mm:{regex:"[0-5][0-9]",apply:function(e){this.minutes=+e}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e}},sss:{regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e}},ss:{regex:"[0-5][0-9]",apply:function(e){this.seconds=+e}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e}},a:{regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)}}};this.parse=function(i,o,s){if(!angular.isString(i)||!o)return i;o=(o=t.DATETIME_FORMATS[o]||o).replace(a,"\\$&"),this.parsers[o]||(this.parsers[o]=function(e){var t=[],a=e.split("");return angular.forEach(r,function(n,r){var i=e.indexOf(r);if(i>-1){e=e.split(""),a[i]="("+n.regex+")",e[i]="$";for(var o=i+1,s=i+r.length;o<s;o++)a[o]="",e[o]="$";e=e.join(""),t.push({index:i,apply:n.apply})}}),{regex:new RegExp("^"+a.join("")+"$"),map:n(t,"index")}}(o));var l=this.parsers[o],c=l.regex,u=l.map,d=i.match(c);if(d&&d.length){var p,h;angular.isDate(s)&&!isNaN(s.getTime())?p={year:s.getFullYear(),month:s.getMonth(),date:s.getDate(),hours:s.getHours(),minutes:s.getMinutes(),seconds:s.getSeconds(),milliseconds:s.getMilliseconds()}:(s&&e.warn("dateparser:","baseDate is not a valid date"),p={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var f=1,m=d.length;f<m;f++){var g=u[f-1];g.apply&&g.apply.call(p,d[f])}return function(e,t,n){if(n<1)return!1;if(1===t&&n>28)return 29===n&&(e%4==0&&e%100!=0||e%400==0);if(3===t||5===t||8===t||10===t)return n<31;return!0}(p.year,p.month,p.date)&&(h=new Date(p.year,p.month,p.date,p.hours,p.minutes,p.seconds,p.milliseconds||0)),h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig","$datepickerSuppressError",function(e,t,n,a,r,i,o,s){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(n,r){l[n]=angular.isDefined(t[n])?r<6?a(t[n])(e.$parent):e.$parent.$eval(t[n]):o[n]}),angular.forEach(["minDate","maxDate"],function(a){t[a]?e.$parent.$watch(n(t[a]),function(e){l[a]=e?new Date(e):null,l.refreshView()}):l[a]=o[a]?new Date(o[a]):null}),angular.forEach(["minMode","maxMode"],function(a){t[a]?e.$parent.$watch(n(t[a]),function(n){l[a]=angular.isDefined(n)?n:t[a],e[a]=l[a],("minMode"==a&&l.modes.indexOf(e.datepickerMode)<l.modes.indexOf(l[a])||"maxMode"==a&&l.modes.indexOf(e.datepickerMode)>l.modes.indexOf(l[a]))&&(e.datepickerMode=l[a])}):(l[a]=o[a]||null,e[a]=l[a])}),e.datepickerMode=e.datepickerMode||o.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,function(e){e&&(c.$isEmpty(c.$modelValue)||c.$invalid)&&(l.activeDate=e,l.refreshView())})):this.activeDate=new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)&&(e.activeDateId=t.uid,!0)},this.init=function(e){(c=e).$render=function(){l.render()}},this.render=function(){if(c.$viewValue){var e=new Date(c.$viewValue);!isNaN(e)?this.activeDate=e:s||r.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$viewValue?new Date(c.$viewValue):null;c.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$viewValue?new Date(c.$viewValue):null;return{date:e,label:i(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},this.fixTimeZone=function(e){var t=e.getHours();e.setHours(23===t?t+2:0)},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$viewValue?new Date(c.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){l.element[0].focus()};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),l.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(e,t,n,a){var r=a[0],i=a[1];r.init(i)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,a,r){t.showWeeks=r.showWeeks,r.step={months:1},r.element=n;var i=[31,28,31,30,31,30,31,31,30,31,30,31];function o(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?i[t]:29}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}r._refreshView=function(){var n=r.activeDate.getFullYear(),a=r.activeDate.getMonth(),i=new Date(n,a,1),o=r.startingDay-i.getDay(),l=o>0?7-o:-o,c=new Date(i);l>0&&c.setDate(1-l);for(var u=function(e,t){for(var n,a=new Array(t),i=new Date(e),o=0;o<t;)n=new Date(i),r.fixTimeZone(n),a[o++]=n,i.setDate(i.getDate()+1);return a}(c,42),d=0;d<42;d++)u[d]=angular.extend(r.createDateObject(u[d],r.formatDay),{secondary:u[d].getMonth()!==a,uid:t.uniqueId+"-"+d});t.labels=new Array(7);for(var p=0;p<7;p++)t.labels[p]={abbr:e(u[p].date,r.formatDayHeader),full:e(u[p].date,"EEEE")};if(t.title=e(r.activeDate,r.formatDayTitle),t.rows=r.split(u,7),t.showWeeks){t.weekNumbers=[];for(var h=(11-r.startingDay)%7,f=t.rows.length,m=0;m<f;m++)t.weekNumbers.push(s(t.rows[m][h].date))}},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},r.handleKeyDown=function(e,t){var n=r.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var a=r.activeDate.getMonth()+("pageup"===e?-1:1);r.activeDate.setMonth(a,1),n=Math.min(o(r.activeDate.getFullYear(),r.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=o(r.activeDate.getFullYear(),r.activeDate.getMonth()));r.activeDate.setDate(n)},r.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,a,r){r.step={years:1},r.element=n,r._refreshView=function(){for(var n,a=new Array(12),i=r.activeDate.getFullYear(),o=0;o<12;o++)n=new Date(i,o,1),r.fixTimeZone(n),a[o]=angular.extend(r.createDateObject(n,r.formatMonth),{uid:t.uniqueId+"-"+o});t.title=e(r.activeDate,r.formatMonthTitle),t.rows=r.split(a,3)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},r.handleKeyDown=function(e,t){var n=r.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var a=r.activeDate.getFullYear()+("pageup"===e?-1:1);r.activeDate.setFullYear(a)}else"home"===e?n=0:"end"===e&&(n=11);r.activeDate.setMonth(n)},r.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,a){var r=a.yearRange;function i(e){return parseInt((e-1)/r,10)*r+1}a.step={years:r},a.element=t,a._refreshView=function(){for(var t,n=new Array(r),o=0,s=i(a.activeDate.getFullYear());o<r;o++)t=new Date(s+o,0,1),a.fixTimeZone(t),n[o]=angular.extend(a.createDateObject(t,a.formatYear),{uid:e.uniqueId+"-"+o});e.title=[n[0].label,n[r-1].label].join(" - "),e.rows=a.split(n,5)},a.compare=function(e,t){return e.getFullYear()-t.getFullYear()},a.handleKeyDown=function(e,t){var n=a.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*a.step.years:"home"===e?n=i(a.activeDate.getFullYear()):"end"===e&&(n=i(a.activeDate.getFullYear())+r-1),a.activeDate.setFullYear(n)},a.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).directive("datepickerPopup",["$compile","$parse","$document","$rootScope","$position","dateFilter","dateParser","datepickerPopupConfig","$timeout",function(e,t,n,a,r,i,o,s,l){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(c,u,d,p){var h,f=angular.isDefined(d.closeOnDateSelection)?c.$parent.$eval(d.closeOnDateSelection):s.closeOnDateSelection,m=angular.isDefined(d.datepickerAppendToBody)?c.$parent.$eval(d.datepickerAppendToBody):s.appendToBody,g=angular.isDefined(d.onOpenFocus)?c.$parent.$eval(d.onOpenFocus):s.onOpenFocus,v=angular.isDefined(d.datepickerPopupTemplateUrl)?d.datepickerPopupTemplateUrl:s.datepickerPopupTemplateUrl,b=angular.isDefined(d.datepickerTemplateUrl)?d.datepickerTemplateUrl:s.datepickerTemplateUrl,y={};c.showButtonBar=angular.isDefined(d.showButtonBar)?c.$parent.$eval(d.showButtonBar):s.showButtonBar,c.getText=function(e){return c[e+"Text"]||s[e+"Text"]},c.isDisabled=function(e){return"today"===e&&(e=new Date),c.watchData.minDate&&c.compare(e,y.minDate)<0||c.watchData.maxDate&&c.compare(e,y.maxDate)>0},c.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())};var w=!1;if(s.html5Types[d.type]?(h=s.html5Types[d.type],w=!0):(h=d.datepickerPopup||s.datepickerPopup,d.$observe("datepickerPopup",function(e,t){var n=e||s.datepickerPopup;if(n!==h&&(h=n,p.$modelValue=null,!h))throw new Error("datepickerPopup must have a date format specified.")})),!h)throw new Error("datepickerPopup must have a date format specified.");if(w&&d.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");function S(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}x.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":v});var k=angular.element(x.children()[0]);if(k.attr("template-url",b),w&&"month"===d.type&&(k.attr("datepicker-mode",'"month"'),k.attr("min-mode","month")),d.datepickerOptions){var C=c.$parent.$eval(d.datepickerOptions);C&&C.initDate&&(c.initDate=C.initDate,k.attr("init-date","initDate"),delete C.initDate),angular.forEach(C,function(e,t){k.attr(S(t),e)})}c.watchData={},angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(e){if(d[e]){var n=t(d[e]);if(c.$parent.$watch(n,function(t){c.watchData[e]=t,"minDate"!==e&&"maxDate"!==e||(y[e]=new Date(t))}),k.attr(S(e),"watchData."+e),"datepickerMode"===e){var a=n.assign;c.$watch("watchData."+e,function(e,t){angular.isFunction(a)&&e!==t&&a(c.$parent,e)})}}}),d.dateDisabled&&k.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),d.showWeeks&&k.attr("show-weeks",d.showWeeks),d.customClass&&k.attr("custom-class","customClass({ date: date, mode: mode })"),w?p.$formatters.push(function(e){return c.date=e,e}):(p.$$parserName="date",p.$validators.date=function(e,t){var n=e||t;if(!d.ngRequired&&!n)return!0;if(angular.isNumber(n)&&(n=new Date(n)),n){if(angular.isDate(n)&&!isNaN(n))return!0;if(angular.isString(n)){var a=o.parse(n,h);return!isNaN(a)}return!1}return!0},p.$parsers.unshift(function(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=o.parse(e,h,c.date);return isNaN(t)?void 0:t}}),p.$formatters.push(function(e){return c.date=e,p.$isEmpty(e)?e:i(e,h)})),c.dateSelection=function(e){angular.isDefined(e)&&(c.date=e);var t=c.date?i(c.date,h):null;u.val(t),p.$setViewValue(t),f&&(c.isOpen=!1,u[0].focus())},p.$viewChangeListeners.push(function(){c.date=o.parse(p.$viewValue,h,c.date)});var E=function(e){!c.isOpen||u[0].contains(e.target)||x[0].contains(e.target)||c.$apply(function(){c.isOpen=!1})},T=function(e){27===e.which&&c.isOpen?(e.preventDefault(),e.stopPropagation(),c.$apply(function(){c.isOpen=!1}),u[0].focus()):40!==e.which||c.isOpen||(e.preventDefault(),e.stopPropagation(),c.$apply(function(){c.isOpen=!0}))};u.bind("keydown",T),c.keydown=function(e){27===e.which&&(c.isOpen=!1,u[0].focus())},c.$watch("isOpen",function(e){e?(c.position=m?r.offset(u):r.position(u),c.position.top=c.position.top+u.prop("offsetHeight"),l(function(){g&&c.$broadcast("datepicker.focus"),n.bind("click",E)},0,!1)):n.unbind("click",E)}),c.select=function(e){if("today"===e){var t=new Date;angular.isDate(c.date)?(e=new Date(c.date)).setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):e=new Date(t.setHours(0,0,0,0))}c.dateSelection(e)},c.close=function(){c.isOpen=!1,u[0].focus()};var M=e(x)(c);x.remove(),m?n.find("body").append(M):u.after(M),c.$on("$destroy",function(){!0===c.isOpen&&(a.$$phase||c.$apply(function(){c.isOpen=!1})),M.remove(),u.unbind("keydown",T),n.unbind("click",E)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/datepicker/popup.html"}}}),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-primary pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}])},function(e,t){
/**
 * AngularStrap - Twitter Bootstrap directives for AngularJS
 * @version v0.7.5 - 2013-07-21
 * @link http://mgcrea.github.com/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("$strap.config",[]).value("$strapConfig",{}),angular.module("$strap.filters",["$strap.config"]),angular.module("$strap.directives",["$strap.config"]),angular.module("$strap",["$strap.filters","$strap.directives","$strap.config"]),angular.module("$strap.directives").factory("$modal",["$rootScope","$compile","$http","$timeout","$q","$templateCache","$strapConfig",function(e,t,n,a,r,i,o){return function(s){return new function(s){var l=angular.extend({show:!0},o.modal,s),c=l.scope?l.scope:e.$new(),u=l.template;return r.when(l.templateHtml||i.get(u)||n.get(u,{cache:!0}).then(function(e){return e.data})).then(function(e){var n=c.$id;u&&(n+=u.replace(".html","").replace(/[\/|\.|:]/g,"-"));var r=$('<div class="modal hide" tabindex="-1"></div>').attr("id",n).html(e);return l.modalClass&&r.addClass(l.modalClass),$("body").append(r),a(function(){t(r)(c)}),c.$modal=function(e){r.modal(e)},angular.forEach(["show","hide"],function(e){c[e]=function(){r.modal(e)}}),c.dismiss=c.hide,angular.forEach(["show","shown","hide","hidden"],function(e){r.on(e,function(t){c.$emit("modal-"+e,t)})}),r.on("shown",function(e){$("input[autofocus], textarea[autofocus]",r).first().trigger("focus")}),r.on("hidden",function(e){l.persist||c.$destroy()}),c.$on("$destroy",function(){r.remove()}),r.modal(l),r})}(s)}}]),angular.module("$strap.directives").directive("bsTooltip",["$parse","$compile",function(e,t){return{restrict:"A",scope:!0,link:function(t,n,a,r){var i=e(a.bsTooltip),o=(i.assign,i(t));t.$watch(a.bsTooltip,function(e,t){e!==t&&(o=e)}),n.on("show",function(e){$(".tooltip.in").each(function(){var e=$(this),t=e.data("tooltip");t&&!t.$element.is(n)&&e.tooltip("hide")})}),n.tooltip({title:function(){return angular.isFunction(o)?o.apply(null,arguments):o},html:!0,container:"body"}),n.data("tooltip").show=function(){var e=$.fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),e},t._tooltip=function(e){n.tooltip(e)},t.hide=function(){n.tooltip("hide")},t.show=function(){n.tooltip("show")},t.dismiss=t.hide}}}]),angular.module("$strap.directives").directive("bsTypeahead",["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,a,r){var i=e(a.bsTypeahead),o=(i.assign,i(t));t.$watch(a.bsTypeahead,function(e,t){e!==t&&(o=e)}),n.attr("data-provide","typeahead"),n.typeahead({source:function(e){return angular.isFunction(o)?o.apply(null,arguments):o},minLength:a.minLength||1,items:a.items,updater:function(e){return r&&t.$apply(function(){r.$setViewValue(e)}),t.$emit("typeahead-updated",e),e}});var s=n.data("typeahead");s.lookup=function(e){var t;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(t=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source)?this.process(t):this},a.matchAll&&(s.matcher=function(e){return!0}),"0"===a.minLength&&setTimeout(function(){n.on("focus",function(){0===n.val().length&&setTimeout(n.typeahead.bind(n,"lookup"),200)})})}}}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var a={"./af":484,"./af.js":484,"./ar":485,"./ar-dz":486,"./ar-dz.js":486,"./ar-kw":487,"./ar-kw.js":487,"./ar-ly":488,"./ar-ly.js":488,"./ar-ma":489,"./ar-ma.js":489,"./ar-sa":490,"./ar-sa.js":490,"./ar-tn":491,"./ar-tn.js":491,"./ar.js":485,"./az":492,"./az.js":492,"./be":493,"./be.js":493,"./bg":494,"./bg.js":494,"./bm":495,"./bm.js":495,"./bn":496,"./bn.js":496,"./bo":497,"./bo.js":497,"./br":498,"./br.js":498,"./bs":499,"./bs.js":499,"./ca":500,"./ca.js":500,"./cs":501,"./cs.js":501,"./cv":502,"./cv.js":502,"./cy":503,"./cy.js":503,"./da":504,"./da.js":504,"./de":505,"./de-at":506,"./de-at.js":506,"./de-ch":507,"./de-ch.js":507,"./de.js":505,"./dv":508,"./dv.js":508,"./el":509,"./el.js":509,"./en-SG":510,"./en-SG.js":510,"./en-au":511,"./en-au.js":511,"./en-ca":512,"./en-ca.js":512,"./en-gb":513,"./en-gb.js":513,"./en-ie":514,"./en-ie.js":514,"./en-il":515,"./en-il.js":515,"./en-nz":516,"./en-nz.js":516,"./eo":517,"./eo.js":517,"./es":518,"./es-do":519,"./es-do.js":519,"./es-us":520,"./es-us.js":520,"./es.js":518,"./et":521,"./et.js":521,"./eu":522,"./eu.js":522,"./fa":523,"./fa.js":523,"./fi":524,"./fi.js":524,"./fo":525,"./fo.js":525,"./fr":526,"./fr-ca":527,"./fr-ca.js":527,"./fr-ch":528,"./fr-ch.js":528,"./fr.js":526,"./fy":529,"./fy.js":529,"./ga":530,"./ga.js":530,"./gd":531,"./gd.js":531,"./gl":532,"./gl.js":532,"./gom-latn":533,"./gom-latn.js":533,"./gu":534,"./gu.js":534,"./he":535,"./he.js":535,"./hi":536,"./hi.js":536,"./hr":537,"./hr.js":537,"./hu":538,"./hu.js":538,"./hy-am":539,"./hy-am.js":539,"./id":540,"./id.js":540,"./is":541,"./is.js":541,"./it":542,"./it-ch":543,"./it-ch.js":543,"./it.js":542,"./ja":544,"./ja.js":544,"./jv":545,"./jv.js":545,"./ka":546,"./ka.js":546,"./kk":547,"./kk.js":547,"./km":548,"./km.js":548,"./kn":549,"./kn.js":549,"./ko":550,"./ko.js":550,"./ku":551,"./ku.js":551,"./ky":552,"./ky.js":552,"./lb":553,"./lb.js":553,"./lo":554,"./lo.js":554,"./lt":555,"./lt.js":555,"./lv":556,"./lv.js":556,"./me":557,"./me.js":557,"./mi":558,"./mi.js":558,"./mk":559,"./mk.js":559,"./ml":560,"./ml.js":560,"./mn":561,"./mn.js":561,"./mr":562,"./mr.js":562,"./ms":563,"./ms-my":564,"./ms-my.js":564,"./ms.js":563,"./mt":565,"./mt.js":565,"./my":566,"./my.js":566,"./nb":567,"./nb.js":567,"./ne":568,"./ne.js":568,"./nl":569,"./nl-be":570,"./nl-be.js":570,"./nl.js":569,"./nn":571,"./nn.js":571,"./pa-in":572,"./pa-in.js":572,"./pl":573,"./pl.js":573,"./pt":574,"./pt-br":575,"./pt-br.js":575,"./pt.js":574,"./ro":576,"./ro.js":576,"./ru":577,"./ru.js":577,"./sd":578,"./sd.js":578,"./se":579,"./se.js":579,"./si":580,"./si.js":580,"./sk":581,"./sk.js":581,"./sl":582,"./sl.js":582,"./sq":583,"./sq.js":583,"./sr":584,"./sr-cyrl":585,"./sr-cyrl.js":585,"./sr.js":584,"./ss":586,"./ss.js":586,"./sv":587,"./sv.js":587,"./sw":588,"./sw.js":588,"./ta":589,"./ta.js":589,"./te":590,"./te.js":590,"./tet":591,"./tet.js":591,"./tg":592,"./tg.js":592,"./th":593,"./th.js":593,"./tl-ph":594,"./tl-ph.js":594,"./tlh":595,"./tlh.js":595,"./tr":596,"./tr.js":596,"./tzl":597,"./tzl.js":597,"./tzm":598,"./tzm-latn":599,"./tzm-latn.js":599,"./tzm.js":598,"./ug-cn":600,"./ug-cn.js":600,"./uk":601,"./uk.js":601,"./ur":602,"./ur.js":602,"./uz":603,"./uz-latn":604,"./uz-latn.js":604,"./uz.js":603,"./vi":605,"./vi.js":605,"./x-pseudo":606,"./x-pseudo.js":606,"./yo":607,"./yo.js":607,"./zh-cn":608,"./zh-cn.js":608,"./zh-hk":609,"./zh-hk.js":609,"./zh-tw":610,"./zh-tw.js":610};function r(e){var t=i(e);return n(t)}function i(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=1100},,,,,,,,function(e,t){!function(e){"use strict";var t={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(e,t){t.hide().fadeIn()}};function n(t,n){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.widthClass=n.widthClass||"width-9",this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input class="gf-form-input '+this.widthClass+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(n)}function a(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}n.prototype={constructor:n,add:function(t,n){var a=this;if(!(a.options.maxTags&&a.itemsArray.length>=a.options.maxTags)&&(!1===t||t)){if("object"==typeof t&&!a.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(a.isSelect&&!a.multiple&&a.itemsArray.length>0&&a.remove(a.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var r=t.split(",");if(r.length>1){for(var o=0;o<r.length;o++)this.add(r[o],!0);return void(n||a.pushVal())}}var s=a.options.itemValue(t),l=a.options.itemText(t),c=a.options.tagClass(t),u=e.grep(a.itemsArray,function(e){return a.options.itemValue(e)===s})[0];if(u){if(a.options.onTagExists){var d=e(".tag",a.$container).filter(function(){return e(this).data("item")===u});a.options.onTagExists(t,d)}}else{a.itemsArray.push(t);var p=e('<span class="tag '+i(c)+'">'+i(l)+'<span data-role="remove"></span></span>');if(p.data("item",t),a.findInputWrapper().before(p),p.after(" "),a.isSelect&&!e('option[value="'+escape(s)+'"]',a.$element)[0]){var h=e("<option selected>"+i(l)+"</option>");h.data("item",t),h.attr("value",s),a.$element.append(h)}n||a.pushVal(),a.options.maxTags===a.itemsArray.length&&a.$container.addClass("bootstrap-tagsinput-max"),a.$element.trigger(e.Event("itemAdded",{item:t}))}}}},remove:function(t,n){var a=this;a.objectItems&&(t="object"==typeof t?e.grep(a.itemsArray,function(e){return a.options.itemValue(e)==a.options.itemValue(t)})[0]:e.grep(a.itemsArray,function(e){return a.options.itemValue(e)==t})[0]),t&&(e(".tag",a.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",a.$element).filter(function(){return e(this).data("item")===t}).remove(),a.itemsArray.splice(e.inArray(t,a.itemsArray),1)),n||a.pushVal(),a.options.maxTags>a.itemsArray.length&&a.$container.removeClass("bootstrap-tagsinput-max"),a.$element.trigger(e.Event("itemRemoved",{item:t}))},removeAll:function(){for(e(".tag",this.$container).remove(),e("option",this.$element).remove();this.itemsArray.length>0;)this.itemsArray.pop();this.pushVal(),this.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var n=e(this),a=n.data("item"),r=t.options.itemValue(a),o=t.options.itemText(a),s=t.options.tagClass(a);(n.attr("class",null),n.addClass("tag "+i(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=i(o),t.isSelect)&&e("option",t.$element).filter(function(){return e(this).data("item")===a}).attr("value",r)})},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(n,!0).trigger("change")},build:function(n){var r=this;r.options=e.extend({},t,n);var i=r.options.typeahead||{};r.objectItems&&(r.options.freeInput=!1),a(r.options,"itemValue"),a(r.options,"itemText"),a(r.options,"tagClass"),r.options.source&&(i.source=r.options.source),i.source&&e.fn.typeahead&&(!function(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}(i,"source"),r.$input.typeahead({source:function(t,n){function a(e){for(var t=[],a=0;a<e.length;a++){var i=r.options.itemText(e[a]);o[i]=e[a],t.push(i)}n(t)}this.map={};var o=this.map,s=i.source(t);e.isFunction(s.success)?s.success(a):e.when(s).then(a)},updater:function(e){r.add(this.map[e])},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}})),r.$container.on("click",e.proxy(function(e){r.$input.focus()},r)),r.$container.on("blur","input",e.proxy(function(t){var n=e(t.target);r.add(n.val()),n.val(""),t.preventDefault()},r)),r.$container.on("keydown","input",e.proxy(function(t){var n=e(t.target),a=r.findInputWrapper();switch(t.which){case 8:if(0===o(n[0])){var i=a.prev();i&&r.remove(i.data("item"))}break;case 46:if(0===o(n[0])){var s=a.next();s&&r.remove(s.data("item"))}break;case 37:var l=a.prev();0===n.val().length&&l[0]&&(l.before(a),n.focus());break;case 39:var c=a.next();0===n.val().length&&c[0]&&(c.after(a),n.focus());break;default:r.options.freeInput&&e.inArray(t.which,r.options.confirmKeys)>=0&&(r.add(n.val()),n.val(""),t.preventDefault())}n.attr("size",Math.max(this.inputSize,n.val().length))},r)),r.$container.on("click","[data-role=remove]",e.proxy(function(t){r.remove(e(t.target).closest(".tag").data("item")),t.stopPropagation()},r)),r.options.itemValue===t.itemValue&&("INPUT"===r.$element[0].tagName?r.add(r.$element.val()):e("option",r.$element).each(function(){r.add(e(this).attr("value"),!0)}))},destroy:function(){this.$container.off("keypress","input"),this.$container.off("click","[role=remove]"),this.$container.remove(),this.$element.removeData("tagsinput"),this.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],n=this.$container[0];t&&t.parentNode!==n;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(t,a){var r=[];return this.each(function(){var i=e(this).data("tagsinput");if(i){var o=i[t](a);void 0!==o&&r.push(o)}else i=new n(this,t),e(this).data("tagsinput",i),r.push(i),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof t?r.length>1?r:r[0]:r},e.fn.tagsinput.Constructor=n;var r=e("<div />");function i(e){return e?r.text(e).html():""}function o(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}e(function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery)},function(e,t,n){var a=n(1110);a.keys().forEach(function(e){a(e)})},function(e,t,n){var a={"./core/components/help/help.html":1111,"./core/components/manage_dashboards/manage_dashboards.html":1112,"./core/components/navbar/navbar.html":1113,"./core/components/search/search.html":1114,"./core/components/search/search_results.html":1115,"./features/admin/partials/admin_home.html":1116,"./features/admin/partials/edit_org.html":1117,"./features/admin/partials/edit_user.html":1118,"./features/admin/partials/new_user.html":1119,"./features/admin/partials/orgs.html":1120,"./features/admin/partials/settings.html":1121,"./features/admin/partials/stats.html":1122,"./features/admin/partials/styleguide.html":1123,"./features/admin/partials/users.html":1124,"./features/alerting/partials/alert_howto.html":1125,"./features/alerting/partials/alert_tab.html":1126,"./features/alerting/partials/notification_edit.html":1127,"./features/alerting/partials/notifications_list.html":1128,"./features/annotations/partials/editor.html":1129,"./features/annotations/partials/event_editor.html":1130,"./features/dashboard/components/DashExportModal/template.html":1131,"./features/dashboard/components/DashLinks/editor.html":1132,"./features/dashboard/components/DashboardSettings/template.html":1133,"./features/dashboard/components/ExportDataModal/template.html":1134,"./features/dashboard/components/FolderPicker/template.html":1135,"./features/dashboard/components/RowOptions/template.html":1136,"./features/dashboard/components/ShareModal/template.html":1137,"./features/dashboard/components/SubMenu/template.html":1138,"./features/dashboard/components/TimePicker/settings.html":1139,"./features/dashboard/components/TimePicker/template.html":1140,"./features/dashboard/components/VersionHistory/template.html":1141,"./features/datasources/partials/http_settings.html":1142,"./features/datasources/partials/tls_auth_settings.html":1143,"./features/folders/partials/create_folder.html":1144,"./features/folders/partials/folder_dashboards.html":1145,"./features/manage-dashboards/components/MoveToFolderModal/template.html":1146,"./features/manage-dashboards/partials/dashboard_import.html":1147,"./features/manage-dashboards/partials/dashboard_list.html":1148,"./features/manage-dashboards/partials/snapshot_list.html":1149,"./features/org/partials/invite.html":1150,"./features/org/partials/newOrg.html":1151,"./features/org/partials/select_org.html":1152,"./features/panel/panellinks/module.html":1153,"./features/panel/partials/general_tab.html":1154,"./features/panel/partials/panelTime.html":1155,"./features/panel/partials/query_editor_row.html":1156,"./features/playlist/partials/playlist.html":1157,"./features/playlist/partials/playlist_search.html":1158,"./features/playlist/partials/playlists.html":1159,"./features/plugins/import_list/import_list.html":1160,"./features/plugins/partials/plugin_edit.html":1161,"./features/plugins/partials/plugin_page.html":1162,"./features/plugins/partials/update_instructions.html":1163,"./features/profile/partials/change_password.html":1164,"./features/profile/partials/profile.html":1165,"./features/teams/partials/create_team.html":1166,"./features/templating/partials/editor.html":1167,"./partials/confirm_modal.html":1168,"./partials/edit_json.html":1169,"./partials/error.html":1170,"./partials/login.html":1171,"./partials/modal.html":1172,"./partials/reset_password.html":1173,"./partials/signup_invited.html":1174,"./partials/signup_step2.html":1175,"./partials/valueSelectDropdown.html":1176,"./plugins/datasource/cloudwatch/partials/annotations.editor.html":1177,"./plugins/datasource/cloudwatch/partials/config.html":1178,"./plugins/datasource/cloudwatch/partials/query.editor.html":1179,"./plugins/datasource/cloudwatch/partials/query.parameter.html":1180,"./plugins/datasource/elasticsearch/partials/annotations.editor.html":1181,"./plugins/datasource/elasticsearch/partials/bucket_agg.html":1182,"./plugins/datasource/elasticsearch/partials/config.html":1183,"./plugins/datasource/elasticsearch/partials/metric_agg.html":1184,"./plugins/datasource/elasticsearch/partials/pipeline_variables.html":1185,"./plugins/datasource/elasticsearch/partials/query.editor.html":1186,"./plugins/datasource/grafana-azure-monitor-datasource/partials/annotations.editor.html":1187,"./plugins/datasource/grafana-azure-monitor-datasource/partials/config.html":1188,"./plugins/datasource/grafana-azure-monitor-datasource/partials/query.editor.html":1189,"./plugins/datasource/grafana-live/partials/query.editor.html":1190,"./plugins/datasource/grafana/partials/annotations.editor.html":1191,"./plugins/datasource/grafana/partials/query.editor.html":1192,"./plugins/datasource/graphite/partials/annotations.editor.html":1193,"./plugins/datasource/graphite/partials/config.html":1194,"./plugins/datasource/graphite/partials/query.editor.html":1195,"./plugins/datasource/influxdb/partials/annotations.editor.html":1196,"./plugins/datasource/influxdb/partials/config.html":1197,"./plugins/datasource/influxdb/partials/query.editor.html":1198,"./plugins/datasource/loki/partials/config.html":1199,"./plugins/datasource/mssql/partials/annotations.editor.html":1200,"./plugins/datasource/mssql/partials/config.html":1201,"./plugins/datasource/mssql/partials/query.editor.html":1202,"./plugins/datasource/mysql/partials/annotations.editor.html":1203,"./plugins/datasource/mysql/partials/config.html":1204,"./plugins/datasource/mysql/partials/query.editor.html":1205,"./plugins/datasource/opentsdb/partials/annotations.editor.html":1206,"./plugins/datasource/opentsdb/partials/config.html":1207,"./plugins/datasource/opentsdb/partials/query.editor.html":1208,"./plugins/datasource/postgres/partials/annotations.editor.html":1209,"./plugins/datasource/postgres/partials/config.html":1210,"./plugins/datasource/postgres/partials/query.editor.html":1211,"./plugins/datasource/prometheus/partials/annotations.editor.html":1212,"./plugins/datasource/prometheus/partials/config.html":1213,"./plugins/datasource/prometheus/partials/query.editor.html":1214,"./plugins/datasource/stackdriver/partials/annotations.editor.html":1215,"./plugins/datasource/stackdriver/partials/config.html":1216,"./plugins/datasource/stackdriver/partials/query.editor.html":1217,"./plugins/datasource/stackdriver/partials/query.filter.html":1218,"./plugins/datasource/testdata/partials/query.editor.html":1219,"./plugins/panel/alertlist/editor.html":1220,"./plugins/panel/alertlist/module.html":1221,"./plugins/panel/dashlist/editor.html":1222,"./plugins/panel/dashlist/module.html":1223,"./plugins/panel/gettingstarted/editor.html":1224,"./plugins/panel/gettingstarted/module.html":1225,"./plugins/panel/graph/axes_editor.html":1226,"./plugins/panel/graph/tab_display.html":1227,"./plugins/panel/graph/tab_legend.html":1228,"./plugins/panel/graph/tab_thresholds_time_regions.html":1229,"./plugins/panel/graph/thresholds_form.html":1230,"./plugins/panel/graph/time_regions_form.html":1231,"./plugins/panel/heatmap/module.html":1232,"./plugins/panel/heatmap/partials/axes_editor.html":1233,"./plugins/panel/heatmap/partials/display_editor.html":1234,"./plugins/panel/pluginlist/editor.html":1235,"./plugins/panel/pluginlist/module.html":1236,"./plugins/panel/singlestat/editor.html":1237,"./plugins/panel/singlestat/mappings.html":1238,"./plugins/panel/singlestat/module.html":1239,"./plugins/panel/table/column_options.html":1240,"./plugins/panel/table/editor.html":1241,"./plugins/panel/table/module.html":1242,"./plugins/panel/text/editor.html":1243,"./plugins/panel/text/module.html":1244};function r(e){var t=i(e);return n(t)}function i(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=1110},function(e,t){var n="public/app/core/components/help/help.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body>\n\t<div class=modal-header>\n\t\t<h2 class=modal-header-title>\n\t\t\t<i class="fa fa-keyboard-o"></i>\n\t\t\t<span class=p-l-1>Shortcuts</span>\n\t\t</h2>\n\t\t<a class=modal-header-close ng-click=ctrl.dismiss();>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n\t<div class="modal-content help-modal">\n\n\t\t<p class=small style=position:absolute;top:13px;right:44px>\n\t\t\t<span class=shortcut-table-key>mod</span> =\n\t\t\t<span class=muted>CTRL on windows or linux and CMD key on Mac</span>\n\t\t</p>\n\n\t\t<div ng-repeat="(category, shortcuts) in ctrl.shortcuts" class=shortcut-category>\n\t\t\t<table class=shortcut-table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th class=shortcut-table-category-header colspan=2>{{category}}</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr ng-repeat="shortcut in shortcuts">\n\t\t\t\t\t\t<td class=shortcut-table-keys>\n              <span class=shortcut-table-key ng-repeat="key in shortcut.keys track by $index" ng-bind-html=key>\n              </span>\n            </td>\n\t\t\t\t\t\t<td class=shortcut-table-description>{{shortcut.description}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tbody>\n\t\t\t</tbody></tbody></table>\n\t\t</div>\n\n\t\t<div class=clearfix></div>\n\t</div>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/core/components/manage_dashboards/manage_dashboards.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=dashboard-list>\n  <div class="page-action-bar page-action-bar--narrow" ng-hide="ctrl.folderId && !ctrl.hasFilters && ctrl.sections.length === 0">\n    <label class="gf-form gf-form--grow gf-form--has-input-icon">\n      <input type=text class="gf-form-input max-width-30" placeholder="Find Dashboard by name" tabindex=1 give-focus=true ng-model=ctrl.query.query ng-model-options="{ debounce: 500 }" spellcheck=false ng-change=ctrl.onQueryChange() />\n      <i class="gf-form-input-icon fa fa-search"></i>\n    </label>\n    <div class=page-action-bar__spacer></div>\n    <a class="btn btn-primary" ng-href={{ctrl.createDashboardUrl()}} ng-if="ctrl.hasEditPermissionInFolders || ctrl.canSave">\n      New Dashboard\n    </a>\n    <a class="btn btn-inverse" href=dashboards/folder/new ng-if="!ctrl.folderId && ctrl.isEditor">\n      New Folder\n    </a>\n    <a class="btn btn-inverse" href={{ctrl.importDashboardUrl()}} ng-if="ctrl.hasEditPermissionInFolders || ctrl.canSave">\n      Import\n    </a>\n  </div>\n\n  <div class="page-action-bar page-action-bar--narrow" ng-show=ctrl.hasFilters>\n    <div class=gf-form-inline>\n      <div class=gf-form ng-show="ctrl.query.tag.length > 0">\n        <label class="gf-form-label width-4">\n          Tags\n        </label>\n        <div class="gf-form-input gf-form-input--plaintext" ng-show="ctrl.query.tag.length > 0">\n          <span ng-repeat="tagName in ctrl.query.tag">\n            <a ng-click="ctrl.removeTag(tagName, $event)" tag-color-from-name=tagName class="tag label label-tag">\n              <i class="fa fa-remove"></i>&nbsp;{{tagName}}\n            </a>\n          </span>\n        </div>\n      </div>\n      <div class=gf-form ng-show=ctrl.query.starred>\n        <label class=gf-form-label>\n          <a class=pointer ng-click=ctrl.removeStarred()>\n            <i class="fa fa-fw fa-check"></i> Starred\n          </a>\n        </label>\n      </div>\n      <div class=gf-form>\n        <label class=gf-form-label>\n          <a class=pointer ng-click=ctrl.clearFilters() bs-tooltip="\'Clear current search query and filters\'">\n            <i class="fa fa-remove"></i>&nbsp;Clear\n          </a>\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <div class=search-results ng-show="ctrl.hasFilters && ctrl.sections.length === 0">\n    <em class=muted>\n      No dashboards matching your query were found.\n    </em>\n  </div>\n\n\t<div class=search-results ng-show="!ctrl.folderId && !ctrl.hasFilters && ctrl.sections.length === 0">\n    <em class=muted>\n        No dashboards found.\n    </em>\n  </div>\n\n  <div class=search-results ng-show="ctrl.sections.length > 0">\n    <div class=search-results-filter-row>\n      <gf-form-checkbox on-change=ctrl.onSelectAllChanged() checked=ctrl.selectAllChecked switch-class=gf-form-checkbox--transparent />\n      <div class=search-results-filter-row__filters>\n        <div class=gf-form-select-wrapper ng-show="!(ctrl.canMove || ctrl.canDelete)">\n          <select class="search-results-filter-row__filters-item gf-form-input" ng-model=ctrl.selectedStarredFilter ng-options="t.text disable when t.disabled for t in ctrl.starredFilterOptions" ng-change=ctrl.onStarredFilterChange() />\n        </div>\n        <div class=gf-form-select-wrapper ng-show="!(ctrl.canMove || ctrl.canDelete)">\n          <select class="search-results-filter-row__filters-item gf-form-input" ng-model=ctrl.selectedTagFilter ng-options="t.term disable when t.disabled for t in ctrl.tagFilterOptions" ng-change=ctrl.onTagFilterChange() />\n        </div>\n        <div class=gf-form-button-row ng-show="ctrl.canMove || ctrl.canDelete">\n          <button type=button class="btn gf-form-button btn-inverse" ng-disabled=!ctrl.canMove ng-click=ctrl.moveTo() bs-tooltip="ctrl.canMove ? \'\' : \'Select a dashboard to move (cannot move folders)\'" data-placement=bottom>\n          <i class="fa fa-exchange"></i>&nbsp;&nbsp;Move\n          </button>\n          <button type=button class="btn gf-form-button btn-danger" ng-click=ctrl.delete() ng-disabled=!ctrl.canDelete>\n            <i class="fa fa-trash"></i>&nbsp;&nbsp;Delete\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=search-results-container>\n      <dashboard-search-results results=ctrl.sections editable=true on-selection-changed=ctrl.selectionChanged() on-tag-selected=ctrl.filterByTag($tag) />\n    </div>\n  </div>\n\n</div>\n\n<div ng-if="ctrl.canSave && ctrl.folderId && !ctrl.hasFilters && ctrl.sections.length === 0">\n  <empty-list-cta model="{\n    title: \'This folder doesn\\\'t have any dashboards yet\',\n    buttonIcon: \'gicon gicon-dashboard-new\',\n    buttonLink: \'dashboard/new?folderId={{ctrl.folderId}}\',\n    buttonTitle: \'Create Dashboard\',\n    proTip: \'Add/move dashboards to your folder at ->\',\n    proTipLink: \'dashboards\',\n    proTipLinkTitle: \'Manage dashboards\',\n    proTipTarget: \'\'\n  }"/>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/core/components/navbar/navbar.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=page-nav>\n  <div class=page-breadcrumbs>\n    <a class="breadcrumb-item active" href=/ >\n      <i class="fa fa-home"></i>\n    </a>\n    <a class=breadcrumb-item ng-href={{::item.url}} ng-repeat="item in ctrl.model.breadcrumbs">\n      {{::item.text}}\n    </a>\n  </div>\n</div>\n\n<dashboard-search></dashboard-search>\n')}]),e.exports=n},function(e,t){var n="public/app/core/components/search/search.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=search-backdrop ng-if=ctrl.isOpen></div>\n\n<div class=search-container ng-if=ctrl.isOpen>\n\n\t<div class=search-field-wrapper>\n\t\t<div class="search-field-icon pointer" ng-click=ctrl.closeSearch()><i class="fa fa-search"></i></div>\n\n\t\t<input type=text placeholder="Find dashboards by name" give-focus=ctrl.giveSearchFocus tabindex=1 ng-keydown=ctrl.keyDown($event) ng-model=ctrl.query.query ng-model-options="{ debounce: 500 }" spellcheck=false ng-change=ctrl.search() />\n\n\t\t<div class=search-field-spacer></div>\n\t</div>\n\n\t<div class=search-dropdown>\n    <div class=search-dropdown__col_1>\n      <div class=search-results-scroller>\n        <div class=search-results-container grafana-scrollbar>\n          <h6 ng-show="!ctrl.isLoading && ctrl.results.length === 0">No dashboards matching your query were found.</h6>\n          <dashboard-search-results results=ctrl.results on-tag-selected=ctrl.filterByTag($tag) on-folder-expanding=ctrl.folderExpanding() on-folder-expanded=ctrl.folderExpanded($folder) />\n        </div>\n      </div>\n    </div>\n\n    <div class=search-dropdown__col_2>\n      <div class=search-filter-box ng-click=ctrl.onFilterboxClick()>\n        <div class=search-filter-box__header>\n          <i class="fa fa-filter"></i>\n          Filter by:\n          <a class="pointer pull-right small" ng-click=ctrl.clearSearchFilter()>\n            <i class="fa fa-remove"></i> Clear\n          </a>\n        </div>\n\n        <tag-filter tags=ctrl.query.tag tagoptions=ctrl.getTags onchange=ctrl.onTagFiltersChanged>\n        </tag-filter>\n      </div>\n\n      <div class=search-filter-box ng-if="ctrl.isEditor || ctrl.hasEditPermissionInFolders">\n        <a href=dashboard/new class=search-filter-box-link>\n          <i class="gicon gicon-dashboard-new"></i> New dashboard\n        </a>\n        <a href=dashboards/folder/new class=search-filter-box-link ng-if=ctrl.isEditor>\n          <i class="gicon gicon-folder-new"></i> New folder\n        </a>\n        <a href=dashboard/import class=search-filter-box-link ng-if="ctrl.isEditor || ctrl.hasEditPermissionInFolders">\n          <i class="gicon gicon-dashboard-import"></i> Import dashboard\n        </a>\n        <a class=search-filter-box-link target=_blank href="https://grafana.com/dashboards?utm_source=grafana_search">\n          <img src=public/img/icn-dashboard-tiny.svg width=20 /> Find dashboards on Grafana.com\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/core/components/search/search_results.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-repeat="section in ctrl.results" class=search-section>\n  <div class="search-section__header pointer" ng-hide=section.hideHeader ng-class="{\'selected\': section.selected}" ng-click=ctrl.toggleFolderExpand(section)>\n    <div ng-click="ctrl.toggleSelection(section, $event)" class=center-vh>\n      <gf-form-checkbox ng-show=ctrl.editable on-change=ctrl.selectionChanged($event) checked=section.checked switch-class=gf-form-checkbox--transparent>\n      </gf-form-checkbox>\n    </div>\n    <i class=search-section__header__icon ng-class=section.icon></i>\n    <span class=search-section__header__text>{{::section.title}}</span>\n    <a ng-show=section.url href={{section.url}} class=search-section__header__link>\n      <i class="fa fa-cog"></i>\n    </a>\n    <i class="fa fa-angle-down search-section__header__toggle" ng-show=section.expanded></i>\n    <i class="fa fa-angle-right search-section__header__toggle" ng-hide=section.expanded></i>\n  </div>\n\n  <div class=search-section__header ng-show=section.hideHeader></div>\n\n  <div ng-if=section.expanded>\n    <a ng-repeat="item in section.items" class="search-item search-item--indent" ng-class="{\'selected\': item.selected}" ng-href={{::item.url}}>\n      <div ng-click="ctrl.toggleSelection(item, $event)" class=center-vh>\n        <gf-form-checkbox ng-show=ctrl.editable on-change=ctrl.selectionChanged() checked=item.checked switch-class=gf-form-checkbox--transparent>\n        </gf-form-checkbox>\n      </div>\n      <span class=search-item__icon>\n        <i class="gicon mini gicon-dashboard-list"></i>\n      </span>\n      <span class=search-item__body ng-click=ctrl.onItemClick(item)>\n        <div class=search-item__body-title>{{::item.title}}</div>\n        <span class=search-item__body-folder-title>{{::item.folderTitle}}</span>\n      </span>\n      <span class=search-item__tags>\n        <span ng-click="ctrl.selectTag(tag, $event)" ng-repeat="tag in item.tags" tag-color-from-name=tag class="label label-tag">\n          {{tag}}\n        </span>\n      </span>\n    </a>\n  </div>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/admin_home.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n\n  <div class="grafana-info-box span8">\n    Grafana is a multi-tenant system where most can be configured per organization. These\n    admin pages are for server admins where you can manage orgs, & all users across all orgs.\n  </div>\n\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/edit_org.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n\t<h2 class=page-sub-heading>Edit Organization</h2>\n\n\t<form name=orgDetailsForm class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Name</span>\n\t\t\t<input type=text required ng-model=org.name class="gf-form-input max-width-14">\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary" ng-click=update() ng-show=!createMode>Update</button>\n\t\t</div>\n\t</form>\n\n\t<h3 class=page-heading>Organization Users</h3>\n\n\t<table class=filter-table>\n\t\t<tr>\n\t\t\t<th>Username</th>\n\t\t\t<th>Email</th>\n\t\t\t<th>Role</th>\n\t\t\t<th></th>\n\t\t</tr>\n\t\t<tr ng-repeat="orgUser in orgUsers">\n\t\t\t<td>{{orgUser.login}}</td>\n\t\t\t<td>{{orgUser.email}}</td>\n\t\t\t<td>\n        <div class=gf-form>\n          <span class=gf-form-select-wrapper>\n              <select type=text ng-model=orgUser.role class="gf-form-input max-width-8" ng-options="f for f in [\'Viewer\', \'Editor\', \'Admin\']" ng-change=updateOrgUser(orgUser)>\n              </select>\n          </span>\n        </div>\n\t\t\t</td>\n\t\t\t<td style=width:1%>\n\t\t\t\t<a ng-click=removeOrgUser(orgUser) class="btn btn-danger btn-mini">\n\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/edit_user.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n\n\t<div class=page-sub-heading>\n\t\t<h2>Edit User</h2>\n\t</div>\n\n\t<form name=userForm class=gf-form-group>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">Name</span>\n\t\t\t\t<input type=text required ng-model=user.name class="gf-form-input max-width-25">\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">Email</span>\n\t\t\t\t<input type=email ng-model=user.email class="gf-form-input max-width-25">\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">Username</span>\n\t\t\t\t<input type=text ng-model=user.login class="gf-form-input max-width-25">\n\t\t\t</div>\n\n\t\t\t<div class=gf-form-button-row>\n\t\t\t\t<button type=submit class="btn btn-primary" ng-click=update() ng-show=!createMode>Update</button>\n\t\t\t</div>\n\t</form>\n\n\t<h3 class=page-heading>Change password</h3>\n\n\t<form name=passwordForm class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">New password</span>\n\t\t\t\t<input type=password required ng-minlength=4 ng-model=password class="gf-form-input max-width-25">\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary" ng-click=setPassword()>Update</button>\n\t\t</div>\n\t</form>\n\n\t<h3 class=page-heading>Permissions</h3>\n\n\t<form name=passwordForm class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t<gf-form-switch class=gf-form label="Grafana Admin" checked=permissions.isGrafanaAdmin switch-class=max-width-6></gf-form-switch>\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary" ng-click=updatePermissions()>Update</button>\n\t\t</div>\n\t</form>\n\n\t<h3 class=page-heading>Organizations</h3>\n\n\t<form name=addOrgForm class=gf-form-group>\n\t\t<div class=gf-form-inline>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class=gf-form-label>Add</span>\n\t\t\t\t<input type=text ng-model=newOrg.name bs-typeahead=searchOrgs required class="gf-form-input max-width-20" placeholder="organization name">\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n        \t<span class=gf-form-label>Role</span>\n        \t<span class=gf-form-select-wrapper>\n            \t<select type=text ng-model=newOrg.role class="gf-form-input width-10" ng-options="f for f in [\'Viewer\', \'Editor\', \'Admin\']"></select>\n        \t</span>\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n\t\t\t\t<button class="btn btn-primary gf-form-btn" ng-click=addOrgUser()>Add</button>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n\n\t<table class=filter-table>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>Name</th>\n\t\t\t\t<th>Role</th>\n\t\t\t\t<th></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tr ng-repeat="org in orgs">\n\t\t\t<td>\n\t\t\t\t{{org.name}} <span class="label label-info" ng-show="org.orgId === user.orgId">Current</span>\n\t\t\t</td>\n\t\t\t<td>\n        <div class=gf-form>\n            <span class=gf-form-select-wrapper>\n                <select type=text ng-model=org.role class="gf-form-input max-width-12" ng-options="f for f in [\'Viewer\', \'Editor\', \'Admin\']" ng-change=updateOrgUser(org)>\n                </select>\n            </span>\n        </div>\n\t\t\t</td>\n\t\t\t<td style=width:1%>\n\t\t\t\t<a ng-click=removeOrgUser(org) class="btn btn-danger btn-mini">\n\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/new_user.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n\t<div class=page-sub-heading>\n\t\t<h1>Add new user</h1>\n\t</div>\n\n\t<form name=userForm class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Name</span>\n\t\t\t<input type=text required ng-model=user.name class="gf-form-input max-width-20">\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Email</span>\n\t\t\t<input type=email ng-model=user.email class="gf-form-input max-width-20">\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Username</span>\n\t\t\t<input type=text ng-model=user.login class="gf-form-input max-width-20">\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Password</span>\n\t\t\t<input type=password required ng-model=user.password class="gf-form-input max-width-20">\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary" ng-click=create()>Create</button>\n\t\t</div>\n\t</form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/orgs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n  <div class=page-action-bar>\n    <div class=page-action-bar__spacer></div>\n    <a class="page-header__cta btn btn-primary" href=org/new>\n      New org\n    </a>\n  </div>\n\n  <table class="filter-table form-inline filter-table--hover">\n    <thead>\n      <tr>\n        <th>Id</th>\n        <th>Name</th>\n        <th style=width:1%></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="org in orgs">\n        <td class=link-td>\n          <a href=admin/orgs/edit/{{org.id}}>\n            {{org.id}}\n          </a>\n        </td>\n        <td class=link-td>\n          <a href=admin/orgs/edit/{{org.id}}>\n            {{org.name}}\n          </a>\n        </td>\n        <td class=text-right>\n          <a ng-click=deleteOrg(org) class="btn btn-danger btn-small">\n            <i class="fa fa-remove"></i>\n          </a>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/settings.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n\n\t<div class="grafana-info-box span8" style="margin:20px 0 25px 0">\n\t\tThese system settings are defined in grafana.ini or custom.ini (or overridden in ENV variables).\n\t\tTo change these you currently need to restart grafana.\n\t</div>\n\n\t<table class=filter-table>\n\t\t<tr ng-repeat-start="(secName, secValue) in settings">\n\t\t\t<td class=admin-settings-section>{{secName}}</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr ng-repeat="(keyName, keyValue) in secValue" ng-repeat-end>\n\t\t\t<td style=padding-left:25px>{{keyName}}</td>\n\t\t\t<td>{{keyValue}}</td>\n\t\t</tr>\n\t</table>\n</div>\n\n\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/stats.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n\t<table class="filter-table form-inline">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>Name</th>\n\t\t\t\t<th>Value</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td>Total dashboards</td>\n\t\t\t\t<td>{{ctrl.stats.dashboards}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Total users</td>\n\t\t\t\t<td>{{ctrl.stats.users}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Active users (seen last 14 days)</td>\n\t\t\t\t<td>{{ctrl.stats.activeUsers}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Total organizations</td>\n\t\t\t\t<td>{{ctrl.stats.orgs}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Total datasources</td>\n\t\t\t\t<td>{{ctrl.stats.datasources}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Total playlists</td>\n\t\t\t\t<td>{{ctrl.stats.playlists}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Total snapshots</td>\n\t\t\t\t<td>{{ctrl.stats.snapshots}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Total dashboard tags</td>\n\t\t\t\t<td>{{ctrl.stats.tags}}</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Total starred dashboards</td>\n\t\t\t\t<td>{{ctrl.stats.stars}}</td>\n\t\t\t</tr>\n      <tr>\n\t\t\t\t<td>Total alerts</td>\n\t\t\t\t<td>{{ctrl.stats.alerts}}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/styleguide.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n\n\t<h3 class=page-heading>Buttons</h3>\n\n\t<div class=tab-pane>\n\t\t<div ng-repeat="variant in ctrl.buttonVariants" class=row>\n\t\t\t<div ng-repeat="btnSize in ctrl.buttonSizes" class="style-guide-button-list p-a-2 col-md-4">\n\t\t\t\t<button ng-repeat="buttonName in ctrl.buttonNames" class="btn btn{{variant}}{{buttonName}} {{btnSize}}">\n\t\t\t\t\tbtn{{variant}}{{buttonName}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<h3 class=page-heading>Forms</h3>\n\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<label class=gf-form-label>Label</label>\n\t\t\t<input type=text class=gf-form-input />\n\t\t</div>\n\t</div>\n\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/admin/partials/users.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n\t<div class=page-action-bar>\n    <label class="gf-form gf-form--grow gf-form--has-input-icon">\n      <input type=text class="gf-form-input max-width-30" placeholder="Find user by name/login/email" tabindex=1 give-focus=true ng-model=ctrl.query ng-model-options="{ debounce: 500 }" spellcheck=false ng-change=ctrl.getUsers() />\n      <i class="gf-form-input-icon fa fa-search"></i>\n    </label>\n    <div class=page-action-bar__spacer></div>\n    <a class="btn btn-primary" href=admin/users/create>\n      New user\n    </a>\n  </div>\n\n  <div class=admin-list-table>\n    <table class="filter-table form-inline filter-table--hover">\n      <thead>\n        <tr>\n          <th></th>\n          <th>Login</th>\n          <th>Email</th>\n          <th>\n            Seen\n            <tip>Time since user was seen using Grafana</tip>\n          </th>\n          <th></th>\n          <th style=width:1%></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="user in ctrl.users">\n          <td class="width-4 text-center link-td">\n            <a href=admin/users/edit/{{user.id}}>\n              <img class=filter-table__avatar ng-src={{user.avatarUrl}}>\n            </a>\n          </td>\n          <td class=link-td>\n            <a href=admin/users/edit/{{user.id}}>\n              {{user.login}}\n            </a>\n          </td>\n          <td class=link-td>\n            <a href=admin/users/edit/{{user.id}}>\n              {{user.email}}\n            </a>\n          </td>\n          <td class=link-td>\n            <a href=admin/users/edit/{{user.id}}>\n              {{user.lastSeenAtAge}}\n            </a>\n          </td>\n          <td class=link-td>\n            <a href=admin/users/edit/{{user.id}}>\n              <i class="fa fa-shield" ng-show=user.isAdmin bs-tooltip="\'Grafana Admin\'"></i>\n            </a>\n          </td>\n          <td class=text-right>\n            <a ng-click=ctrl.deleteUser(user) class="btn btn-danger btn-small">\n              <i class="fa fa-remove"></i>\n            </a>\n          </td>\n        </tr>\n      </tbody>\n\n    </table>\n  </div>\n\n  <div class=admin-list-paging ng-if=ctrl.showPaging>\n    <ol>\n      <li ng-repeat="page in ctrl.pages">\n        <button class="btn btn-small" ng-class="{\'btn-secondary\': page.current, \'btn-inverse\': !page.current}" ng-click=ctrl.navigateToPage(page)>{{page.page}}</button>\n      </li>\n    </ol>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/alerting/partials/alert_howto.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body>\n\t<div class=modal-header>\n\t\t<h2 class=modal-header-title>\n\t\t\t<i class="fa fa-info-circle"></i>\n\t\t\t<span class=p-l-1>Adding an Alert</span>\n\t\t</h2>\n\n\t\t<a class=modal-header-close ng-click=dismiss();>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n\n\t<div class=modal-content>\n\t\t<div class=text-center>\n\t\t\t<img src=public/img/alert_howto_new.png>\n\t\t</div>\n\t\t<p class="p-a-2 text-center offset-lg-1 col-lg-10">\n\t\t\tAlerts are added and configured in the <strong>Alert Tab</strong> of any dashboard\n\t\t\tgraph panel, letting you build and visualize an alert using existing queries.\n\t\t\t<br> <br>\n\t\t\tTo persist your alert rule changes remember to save the dashboard.\n\t\t\t<br>\n\t\t\t<br>\n\t\t</p>\n\t</div>\n\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/alerting/partials/alert_tab.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if=ctrl.panel.alert>\n  <div class="alert alert-error m-b-2" ng-show=ctrl.error>\n    <i class="fa fa-warning"></i> {{ctrl.error}}\n  </div>\n  <div class=panel-options-group>\n    <div class=panel-options-group__body>\n      <div class=gf-form-group>\n        <h4 class=section-heading>Rule</h4>\n        <div class=gf-form-inline>\n          <div class=gf-form>\n            <span class="gf-form-label width-6">Name</span>\n            <input type=text class="gf-form-input width-20" ng-model=ctrl.alert.name>\n          </div>\n          <div class=gf-form>\n            <span class="gf-form-label width-9">Evaluate every</span>\n            <input class="gf-form-input max-width-6" type=text ng-model=ctrl.alert.frequency>\n          </div>\n          <div class="gf-form max-width-11">\n            <label class="gf-form-label width-5">For</label>\n            <input type=text class="gf-form-input max-width-6" ng-model=ctrl.alert.for spellcheck=false placeholder=5m>\n            <info-popover mode=right-absolute>\n              If an alert rule has a configured For and the query violates the configured\n              threshold it\n              will first go from OK to Pending.\n              Going from OK to Pending Grafana will not send any notifications. Once the alert\n              rule\n              has\n              been firing for more than For duration, it will change to Alerting and send alert\n              notifications.\n            </info-popover>\n          </div>\n        </div>\n      </div>\n\n      <div class=gf-form-group>\n        <h4 class=section-heading>Conditions</h4>\n        <div class=gf-form-inline ng-repeat="conditionModel in ctrl.conditionModels">\n          <div class=gf-form>\n            <metric-segment-model css-class="query-keyword width-5" ng-if=$index property=conditionModel.operator.type options=ctrl.evalOperators custom=false></metric-segment-model>\n            <span class="gf-form-label query-keyword width-5" ng-if="$index===0">WHEN</span>\n          </div>\n          <div class=gf-form>\n            <query-part-editor class="gf-form-label query-part width-9" part=conditionModel.reducerPart handle-event="ctrl.handleReducerPartEvent(conditionModel, $event)">\n            </query-part-editor>\n            <span class="gf-form-label query-keyword">OF</span>\n          </div>\n          <div class=gf-form>\n            <query-part-editor class="gf-form-label query-part" part=conditionModel.queryPart handle-event="ctrl.handleQueryPartEvent(conditionModel, $event)">\n            </query-part-editor>\n          </div>\n          <div class=gf-form>\n            <metric-segment-model property=conditionModel.evaluator.type options=ctrl.evalFunctions custom=false css-class=query-keyword on-change=ctrl.evaluatorTypeChanged(conditionModel.evaluator)></metric-segment-model>\n            <input class="gf-form-input max-width-9" type=number step=any ng-hide="conditionModel.evaluator.params.length === 0" ng-model=conditionModel.evaluator.params[0] ng-change=ctrl.evaluatorParamsChanged() />\n            <label class="gf-form-label query-keyword" ng-show="conditionModel.evaluator.params.length === 2">TO</label>\n            <input class="gf-form-input max-width-9" type=number step=any ng-if="conditionModel.evaluator.params.length === 2" ng-model=conditionModel.evaluator.params[1] ng-change=ctrl.evaluatorParamsChanged() />\n          </div>\n          <div class=gf-form>\n            <label class=gf-form-label>\n              <a class=pointer tabindex=1 ng-click=ctrl.removeCondition($index)>\n                <i class="fa fa-trash"></i>\n              </a>\n            </label>\n          </div>\n        </div>\n\n        <div class=gf-form>\n          <label class="gf-form-label dropdown">\n            <a class="pointer dropdown-toggle" data-toggle=dropdown>\n              <i class="fa fa-plus"></i>\n            </a>\n            <ul class=dropdown-menu role=menu>\n              <li ng-repeat="ct in ctrl.conditionTypes" role=menuitem>\n                <a ng-click=ctrl.addCondition(ct.value);>{{ct.text}}</a>\n              </li>\n            </ul>\n          </label>\n        </div>\n      </div>\n\n      <div class=gf-form-group>\n        <h4 class=section-heading>No Data & Error Handling</h4>\n        <div class=gf-form-inline>\n          <div class=gf-form>\n            <span class="gf-form-label width-15">If no data or all values are null</span>\n          </div>\n          <div class=gf-form>\n            <span class="gf-form-label query-keyword">SET STATE TO</span>\n            <div class=gf-form-select-wrapper>\n              <select class=gf-form-input ng-model=ctrl.alert.noDataState ng-options="f.value as f.text for f in ctrl.noDataModes">\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class=gf-form-inline>\n          <div class=gf-form>\n            <span class="gf-form-label width-15">If execution error or timeout</span>\n          </div>\n          <div class=gf-form>\n            <span class="gf-form-label query-keyword">SET STATE TO</span>\n            <div class=gf-form-select-wrapper>\n              <select class=gf-form-input ng-model=ctrl.alert.executionErrorState ng-options="f.value as f.text for f in ctrl.executionErrorModes">\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=panel-options-group>\n    <div class=panel-options-group__header>Notifications</div>\n    <div class=panel-options-group__body>\n      <div class=gf-form-inline>\n        <div class=gf-form>\n          <span class="gf-form-label width-8">Send to</span>\n        </div>\n        <div class=gf-form ng-repeat="nc in ctrl.alertNotifications">\n          <span class=gf-form-label ng-style="{\'background-color\': nc.bgColor }">\n            <i class={{nc.iconClass}}></i>&nbsp;{{nc.name}}&nbsp;\n            <i class="fa fa-remove pointer muted" ng-click=ctrl.removeNotification(nc) ng-if="nc.isDefault === false"></i>\n          </span>\n        </div>\n        <div class=gf-form>\n          <metric-segment segment=ctrl.addNotificationSegment get-options=ctrl.getNotifications() on-change=ctrl.notificationAdded()></metric-segment>\n        </div>\n      </div>\n      <div class="gf-form gf-form--v-stretch">\n        <span class="gf-form-label width-8">Message</span>\n        <textarea class=gf-form-input rows=10 ng-model=ctrl.alert.message placeholder="Notification message details..."></textarea>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/alerting/partials/notification_edit.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n\n  <h3 class=page-sub-heading ng-hide=ctrl.isNew>Edit Notification Channel</h3>\n  <h3 class=page-sub-heading ng-show=ctrl.isNew>New Notification Channel</h3>\n\n  <form name=ctrl.theForm ng-if=ctrl.notifiers>\n    <div class=gf-form-group>\n      <div class=gf-form>\n        <span class="gf-form-label width-12">Name</span>\n        <input type=text required class="gf-form-input max-width-15" ng-model=ctrl.model.name required>\n      </div>\n      <div class=gf-form>\n        <span class="gf-form-label width-12">Type</span>\n        <div class="gf-form-select-wrapper width-15">\n          <select class=gf-form-input ng-model=ctrl.model.type ng-options="t.type as t.name for t in ctrl.notifiers" ng-change="ctrl.typeChanged(notification, $index)">\n          </select>\n        </div>\n      </div>\n      <gf-form-switch class=gf-form label="Send on all alerts" label-class=width-14 checked=ctrl.model.isDefault tooltip="Use this notification for all alerts">\n      </gf-form-switch>\n      <gf-form-switch class=gf-form label="Include image" label-class=width-14 checked=ctrl.model.settings.uploadImage tooltip="Captures an image and include it in the notification">\n      </gf-form-switch>\n      <gf-form-switch class=gf-form label="Disable Resolve Message" label-class=width-14 checked=ctrl.model.disableResolveMessage tooltip="Disable the resolve message [OK] that is sent when alerting state returns to false">\n      </gf-form-switch>\n      <gf-form-switch class=gf-form label="Send reminders" label-class=width-14 checked=ctrl.model.sendReminder tooltip="Send additional notifications for triggered alerts">\n      </gf-form-switch>\n      <div class=gf-form-inline>\n        <div class=gf-form ng-if=ctrl.model.sendReminder>\n          <span class="gf-form-label width-12">Send reminder every\n            <info-popover mode=right-normal position="top center">\n              Specify how often reminders should be sent, e.g. every 30s, 1m, 10m, 30m or 1h etc.\n            </info-popover>\n          </span>\n          <input type=text placeholder="Select or specify custom" class="gf-form-input width-15" ng-model=ctrl.model.frequency bs-typeahead=ctrl.getFrequencySuggestion data-min-length=0 ng-required=ctrl.model.sendReminder>\n        </div>\n      </div>\n      <div class=gf-form>\n          <span class="alert alert-info width-30" ng-if=ctrl.model.sendReminder>\n            Alert reminders are sent after rules are evaluated. Therefore a reminder can never be sent more frequently than a configured alert rule evaluation interval.\n          </span>\n        </div>\n    </div>\n\n    <div class=gf-form-group ng-include src=ctrl.notifierTemplateId>\n    </div>\n\n    <div class="gf-form-group gf-form-button-row">\n\t\t\t<button type=submit ng-click=ctrl.save() class="btn btn-primary width-7">Save</button>\n\t\t\t<button type=submit ng-click=ctrl.testNotification() class="btn btn-secondary width-7">Send Test</button>\n\t\t\t<a href=alerting/notifications class="btn btn-inverse">Back</a>\n    </div>\n  </form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/alerting/partials/notifications_list.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n\n  <div ng-if=ctrl.notifications.length>\n    <div class=page-action-bar>\n      <div class=page-action-bar__spacer>\n      </div>\n\n      <a href=alerting/notification/new class="btn btn-primary">\n        New channel\n      </a>\n    </div>\n\n    <table class="filter-table filter-table--hover">\n      <thead>\n        <th style=min-width:200px>\n          <strong>Name</strong>\n        </th>\n        <th style=min-width:100px>Type</th>\n        <th style=width:1%></th>\n      </thead>\n      <tbody>\n        <tr ng-repeat="notification in ctrl.notifications">\n          <td class=link-td>\n            <a href=alerting/notification/{{notification.id}}/edit>\n              {{notification.name}}\n            </a>\n          </td>\n          <td class=link-td>\n            <a href=alerting/notification/{{notification.id}}/edit>\n              {{notification.type}}\n            </a>\n          </td>\n          <td class=text-right>\n            <span class="btn btn-secondary btn-small" ng-show="notification.isDefault == true">\n              default\n            </span>\n            <a ng-click=ctrl.deleteNotification(notification.id) class="btn btn-danger btn-small">\n              <i class="fa fa-remove"></i>\n            </a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div ng-if="ctrl.notifications.length === 0">\n    <empty-list-cta model="{\n      title: \'There are no notification channels defined yet\',\n      buttonIcon: \'gicon gicon-add-alert-notification-channel\',\n      buttonLink: \'alerting/notification/new\',\n      buttonTitle: \'Add channel\',\n      proTip: \'You can include images in your alert notifications.\',\n      proTipLink: \'http://docs.grafana.org/alerting/notifications/\',\n      proTipLinkTitle: \'Learn more\',\n      proTipTarget: \'_blank\'\n    }"/>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/annotations/partials/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div ng-controller=AnnotationsEditorCtrl>\n\t<h3 class=dashboard-settings__header>\n\t\t<a ng-click=ctrl.backToList()>Annotations</a>\n\t\t<span ng-show="ctrl.mode === \'new\'">&gt; New</span>\n\t\t<span ng-show="ctrl.mode === \'edit\'">&gt; Edit</span>\n\t</h3>\n\n\t<div ng-if="ctrl.mode === \'list\'">\n\t\t<div class=page-action-bar ng-if="ctrl.annotations.length > 1">\n\t\t\t<div class=page-action-bar__spacer></div>\n\t\t\t<a type=button class="btn btn-primary" ng-click=ctrl.setupNew();><i class="fa fa-plus"></i> New</a>\n\t\t</div>\n\n\t\t<table class="filter-table filter-table--hover">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Query name</th>\n\t\t\t\t\t<th>Data source</th>\n\t\t\t\t\t<th colspan=3></th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr ng-repeat="annotation in ctrl.annotations track by annotation.name">\n\t\t\t\t\t<td style=width:90% ng-hide=annotation.builtIn class=pointer ng-click=ctrl.edit(annotation)>\n\t\t\t\t\t\t<i class="fa fa-comment" style=color:{};></i> &nbsp;\n\t\t\t\t\t\t{{annotation.name}}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style=width:90% ng-show=annotation.builtIn class=pointer ng-click=ctrl.edit(annotation)>\n\t\t\t\t\t\t<i class="gicon gicon-annotation"></i> &nbsp;\n\t\t\t\t\t\t<em class=muted>{{annotation.name}} (Built-in)</em>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=pointer ng-click=ctrl.edit(annotation)>\n\t\t\t\t\t\t{{annotation.datasource || \'Default\'}}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style=width:1%><i ng-click=ctrl.move($index,-1) ng-hide=$first class="pointer fa fa-arrow-up"></i></td>\n\t\t\t\t\t<td style=width:1%><i ng-click=ctrl.move($index,1) ng-hide=$last class="pointer fa fa-arrow-down"></i></td>\n\t\t\t\t\t<td style=width:1%>\n\t\t\t\t\t\t<a ng-click=ctrl.removeAnnotation(annotation) class="btn btn-danger btn-mini" ng-hide=annotation.builtIn>\n\t\t\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\n\t\t\x3c!-- empty list cta, there is always one built in query --\x3e\n\t\t<div ng-if="ctrl.annotations.length === 1" class=p-t-2>\n\t\t\t<div class=empty-list-cta>\n\t\t\t\t<div class=empty-list-cta__title>There are no custom annotation queries added yet</div>\n\t\t\t\t<a ng-click=ctrl.setupNew() class="empty-list-cta__button btn btn-xlarge btn-primary">\n\t\t\t\t\t<i class="gicon gicon-add-annotation"></i>\n\t\t\t\t\tAdd Annotation Query\n\t\t\t\t</a>\n\t\t\t\t<div class=grafana-info-box>\n\t\t\t\t\t<h5>What are Annotations?</h5>\n\t\t\t\t\t<p>\n\t\t\t\t\tAnnotations provide a way to integrate event data into your graphs. They are visualized as vertical lines and icons\n\t\t\t\t\ton all graph panels. When you hover over an annotation icon you can get event text &amp; tags for the event. You can add annotation events\n\t\t\t\t\tdirectly from grafana by holding CTRL or CMD + click on graph (or drag region). These will be stored in Grafana\'s annotation database.\n\t\t\t\t\t</p>\n\t\t\t\t\tCheckout the <a class=external-link target=_blank href=http://docs.grafana.org/reference/annotations/ >Annotations documentation</a> for more information.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=annotations-basic-settings ng-if="ctrl.mode === \'edit\' || ctrl.mode === \'new\'">\n\t\t<div class=gf-form-group>\n\t\t\t<h5 class=section-heading>General</h5>\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<div class=gf-form>\n\t\t\t\t\t<span class="gf-form-label width-7">Name</span>\n\t\t\t\t\t<input type=text class="gf-form-input width-20" ng-model=ctrl.currentAnnotation.name placeholder=name>\n\t\t\t\t</div>\n\t\t\t\t<div class=gf-form>\n\t\t\t\t\t<span class="gf-form-label width-7">Data source</span>\n\t\t\t\t\t<div class=gf-form-select-wrapper>\n\t\t\t\t\t\t<select class=gf-form-input ng-model=ctrl.currentAnnotation.datasource ng-options="f.name as f.name for f in ctrl.datasources" ng-change=ctrl.datasourceChanged()></select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=gf-form-group>\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<gf-form-switch class=gf-form label=Enabled checked=ctrl.currentAnnotation.enable label-class=width-7>\n\t\t\t\t</gf-form-switch>\n\t\t\t\t<gf-form-switch class=gf-form label=Hidden tooltip="Hides the annotation query toggle from showing at the top of the dashboard" checked=ctrl.currentAnnotation.hide label-class=width-7>\n\t\t\t\t</gf-form-switch>\n\t\t\t\t<div class=gf-form>\n\t\t\t\t\t<label class="gf-form-label width-9">Color</label>\n\t\t\t\t\t<span class=gf-form-label>\n\t\t\t\t\t\t<color-picker color=ctrl.currentAnnotation.iconColor onchange=ctrl.onColorChange></color-picker>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<h5 class=section-heading>Query</h5>\n\t\t<rebuild-on-change property=ctrl.currentDatasource>\n\t\t\t<plugin-component type=annotations-query-ctrl>\n\t\t\t</plugin-component>\n\t\t</rebuild-on-change>\n\n\t\t<div class=gf-form>\n\t\t\t<div class="gf-form-button-row p-y-0">\n\t\t\t\t<button ng-show="ctrl.mode === \'new\'" type=button class="btn gf-form-button btn-primary" ng-click=ctrl.add()>Add</button>\n\t\t\t\t<button ng-show="ctrl.mode === \'edit\'" type=button class="btn btn-primary pull-left" ng-click=ctrl.update()>Update</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/annotations/partials/event_editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=graph-annotation>\n\t<div class=graph-annotation__header>\n\t\t<div class=graph-annotation__user bs-tooltip="\'Created by {{ctrl.login}}\'">\n\t\t</div>\n\n\t\t<div class=graph-annotation__title>\n\t\t\t<span ng-if=!ctrl.event.id>Add Annotation</span>\n\t\t\t<span ng-if=ctrl.event.id>Edit Annotation</span>\n\t\t</div>\n\n    <div class=graph-annotation__time>{{ctrl.timeFormated}}</div>\n\t</div>\n\n\t<form name=ctrl.form class="graph-annotation__body text-center">\n\t\t<div style=display:inline-block>\n\t\t\t<div class="gf-form gf-form--v-stretch">\n\t\t\t\t<span class="gf-form-label width-7">Description</span>\n\t\t\t\t<textarea class="gf-form-input width-20" rows=2 ng-model=ctrl.event.text placeholder=Description></textarea>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-7">Tags</span>\n\t\t\t\t<bootstrap-tagsinput ng-model=ctrl.event.tags tagclass="label label-tag" placeholder="add tags">\n\t\t\t\t</bootstrap-tagsinput>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form-button-row>\n\t\t\t\t<button type=submit class="btn btn-primary" ng-click=ctrl.save()>Save</button>\n\t\t\t\t<button ng-if=ctrl.event.id type=submit class="btn btn-danger" ng-click=ctrl.delete()>Delete</button>\n\t\t\t\t<a class=btn-text ng-click=ctrl.close();>Cancel</a>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/DashExportModal/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=share-modal-header>\n\t<div class=share-modal-big-icon>\n\t\t<i class="fa fa-cloud-upload"></i>\n\t</div>\n\t<div>\n\t\t<gf-form-switch class=gf-form label="Export for sharing externally" label-class=width-16 checked=ctrl.shareExternally tooltip="Useful for sharing dashboard publicly on grafana.com. Will templatize data source names. Can then only be used with the specific dashboard import API.">\n\t\t</gf-form-switch>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=button class="btn gf-form-btn width-10 btn-primary" ng-click=ctrl.saveDashboardAsFile()>\n\t\t\t\t<i class="fa fa-save"></i> Save to file\n\t\t\t</button>\n\t\t\t<button type=button class="btn gf-form-btn width-10 btn-secondary" ng-click=ctrl.viewJson()>\n\t\t\t\t<i class="fa fa-file-text-o"></i> View JSON\n\t\t\t</button>\n\t\t\t<a class="btn btn-link" ng-click=ctrl.dismiss()>Cancel</a>\n\t\t</div>\n\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/DashLinks/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<h3 class=dashboard-settings__header>\n  <a ng-click=ctrl.backToList()>Dashboard Links</a>\n  <span ng-show="ctrl.mode === \'new\'">&gt; New</span>\n  <span ng-show="ctrl.mode === \'edit\'">&gt; Edit</span>\n</h3>\n\n<div ng-if="ctrl.mode == \'list\'">\n  <div ng-if="ctrl.dashboard.links.length === 0">\n    <div class=empty-list-cta>\n      <div class=empty-list-cta__title>\n        There are no dashboard links added yet\n      </div>\n      <a ng-click=ctrl.setupNew() class="empty-list-cta__button btn btn-xlarge btn-primary">\n        <i class="gicon gicon-add-link"></i>\n        Add Dashboard Link\n      </a>\n      <div class=grafana-info-box>\n        <h5>What are Dashboard Links?</h5>\n        <p>\n\t\t\t\t\tDashboard Links allow you to place links to other dashboards and web sites directly in below the dashboard header.\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="ctrl.dashboard.links.length > 0">\n    <div class=page-action-bar>\n      <div class=page-action-bar__spacer></div>\n      <a type=button class="btn btn-primary" ng-click=ctrl.setupNew()>\n        <i class="fa fa-plus"></i> New</a>\n    </div>\n    <table class="filter-table filter-table--hover">\n      <thead>\n        <tr>\n          <th>Type</th>\n          <th>Info</th>\n          <th colspan=3></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="link in ctrl.dashboard.links">\n          <td class=pointer ng-click=ctrl.editLink(link)>\n            <i class="fa fa-fw fa-external-link"></i>\n            {{link.type}}\n          </td>\n          <td>\n            <div ng-if=link.title>\n              {{link.title}}\n            </div>\n            <div ng-if="!link.title && link.url">\n              {{link.url}}\n            </div>\n            <span ng-if="!link.title && link.tags" ng-repeat="tag in link.tags" tag-color-from-name=tag class="label label-tag" style=margin-right:6px>\n              {{tag}}\n            </span>\n          </td>\n          <td style=width:1%>\n            <i ng-click="ctrl.moveLink($index, -1)" ng-hide=$first class="pointer fa fa-arrow-up"></i>\n          </td>\n          <td style=width:1%>\n            <i ng-click="ctrl.moveLink($index, 1)" ng-hide=$last class="pointer fa fa-arrow-down"></i>\n          </td>\n          <td style=width:1%>\n            <a ng-click=ctrl.deleteLink($index) class="btn btn-danger btn-mini" ng-hide=annotation.builtIn>\n              <i class="fa fa-remove"></i>\n            </a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<div ng-if="ctrl.mode == \'edit\' || ctrl.mode == \'new\'">\n  <div class=gf-form-group>\n    <div class=gf-form-group>\n      <div class=gf-form>\n        <span class="gf-form-label width-8">Type</span>\n        <div class="gf-form-select-wrapper width-10">\n          <select class=gf-form-input ng-model=ctrl.link.type ng-options="f for f in [\'dashboards\',\'link\']"></select>\n        </div>\n      </div>\n\n      <div class=gf-form ng-show="ctrl.link.type === \'dashboards\'">\n        <span class="gf-form-label width-8">With tags</span>\n        <bootstrap-tagsinput ng-model=ctrl.link.tags tagclass="label label-tag" placeholder="add tags" style=margin-right:.25rem></bootstrap-tagsinput>\n      </div>\n\n      <gf-form-switch ng-show="ctrl.link.type === \'dashboards\'" class=gf-form label="As dropdown" checked=ctrl.link.asDropdown switch-class=max-width-4 label-class=width-8></gf-form-switch>\n      <div class=gf-form ng-show="ctrl.link.type === \'dashboards\' && ctrl.link.asDropdown">\n        <span class="gf-form-label width-8">Title</span>\n        <input type=text ng-model=ctrl.link.title class="gf-form-input max-width-10" ng-model-onblur>\n      </div>\n      <div ng-show="ctrl.link.type === \'link\'">\n        <div class=gf-form>\n          <li class="gf-form-label width-8">Url</li>\n          <input type=text ng-model=ctrl.link.url class="gf-form-input width-20" ng-model-onblur>\n        </div>\n\n        <div class=gf-form>\n          <span class="gf-form-label width-8">Title</span>\n          <input type=text ng-model=ctrl.link.title class="gf-form-input width-20" ng-model-onblur>\n        </div>\n\n        <div class=gf-form>\n          <span class="gf-form-label width-8">Tooltip</span>\n          <input type=text ng-model=ctrl.link.tooltip class="gf-form-input width-20" placeholder="Open dashboard" ng-model-onblur>\n        </div>\n\n        <div class=gf-form>\n          <span class="gf-form-label width-8">Icon</span>\n          <div class="gf-form-select-wrapper width-20">\n            <select class=gf-form-input ng-model=ctrl.link.icon ng-options="k as k for (k, v) in ctrl.iconMap"></select>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=gf-form-group>\n      <h5 class=section-heading>Include</h5>\n      <div>\n        <gf-form-switch class=gf-form label="Time range" checked=ctrl.link.keepTime switch-class=max-width-6 label-class=width-9></gf-form-switch>\n        <gf-form-switch class=gf-form label="Variable values" checked=ctrl.link.includeVars switch-class=max-width-6 label-class=width-9></gf-form-switch>\n        <gf-form-switch class=gf-form label="Open in new tab" checked=ctrl.link.targetBlank switch-class=max-width-6 label-class=width-9></gf-form-switch>\n      </div>\n    </div>\n  </div>\n  <button class="btn btn-primary" ng-if="ctrl.mode == \'new\'" ng-click=ctrl.addLink()>\n    Add\n  </button>\n  <button class="btn btn-primary" ng-if="ctrl.mode == \'edit\'" ng-click=ctrl.saveLink()>\n    Update\n  </button>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/DashboardSettings/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<aside class=dashboard-settings__aside>\n\t<h2 class=dashboard-settings__aside-header>\n\t\t<i class="fa fa-cog"></i>\n\t\tSettings\n\t</h2>\n\n\t<a href={{::section.url}} class=dashboard-settings__nav-item ng-class="{active: ctrl.viewId === section.id}" ng-repeat="section in ctrl.sections">\n    <i class={{::section.icon}}></i>\n\t\t{{::section.title}}\n\t</a>\n\n\t<div class=dashboard-settings__aside-actions>\n    <button class="btn btn-primary" ng-click=ctrl.saveDashboard() ng-show=ctrl.canSave>\n\t\t\tSave\n\t\t</button>\n\t\t<button class="btn btn-inverse" ng-click=ctrl.openSaveAsModal() ng-show=ctrl.canSaveAs>\n\t\t\tSave As...\n\t\t</button>\n\t\t<button class="btn btn-danger" ng-click=ctrl.deleteDashboard() ng-show=ctrl.canDelete>\n\t\t\tDelete\n\t\t</button>\n\t</div>\n</aside>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'settings\'">\n\t<h3 class=dashboard-settings__header>\n\t\tGeneral\n\t</h3>\n\n\t<div class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label width-7">Name</label>\n\t\t\t<input type=text class="gf-form-input width-30" ng-model=ctrl.dashboard.title>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label width-7">Description</label>\n\t\t\t<input type=text class="gf-form-input width-30" ng-model=ctrl.dashboard.description>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label width-7">\n\t\t\t\tTags\n\t\t\t\t<info-popover mode=right-normal>Press enter to add a tag</info-popover>\n\t\t\t</label>\n\t\t\t<bootstrap-tagsinput ng-model=ctrl.dashboard.tags tagclass="label label-tag" placeholder="add tags">\n\t\t\t</bootstrap-tagsinput>\n\t\t</div>\n\t\t<folder-picker initial-title=ctrl.dashboard.meta.folderTitle initial-folder-id=ctrl.dashboard.meta.folderId on-change=ctrl.onFolderChange($folder) enable-create-new=true is-valid-selection=true label-class=width-7 dashboard-id=ctrl.dashboard.id>\n\t\t</folder-picker>\n\t\t<gf-form-switch class=gf-form label=Editable tooltip="Uncheck, then save and reload to disable all dashboard editing" checked=ctrl.dashboard.editable label-class=width-7>\n\t\t</gf-form-switch>\n\t</div>\n\n\t<gf-time-picker-settings dashboard=ctrl.dashboard></gf-time-picker-settings>\n\n\t<h5 class=section-heading>Panel Options</h5>\n\t<div class=gf-form>\n\t\t<label class="gf-form-label width-11">\n\t\t\tGraph Tooltip\n\t\t\t<info-popover mode=right-normal>\n\t\t\t\tCycle between options using Shortcut: CTRL+O or CMD+O\n\t\t\t</info-popover>\n\t\t</label>\n\t\t<div class=gf-form-select-wrapper>\n\t\t\t<select ng-model=ctrl.dashboard.graphTooltip class=gf-form-input ng-options="f.value as f.text for f in [{value: 0, text: \'Default\'}, {value: 1, text: \'Shared crosshair\'},{value: 2, text: \'Shared Tooltip\'}]"></select>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'annotations\'" ng-include="\'public/app/features/annotations/partials/editor.html\'">\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'templating\'" ng-include="\'public/app/features/templating/partials/editor.html\'">\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'links\'">\n\t<dash-links-editor dashboard=ctrl.dashboard></dash-links-editor>\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'versions\'">\n\t<gf-dashboard-history dashboard=dashboard></gf-dashboard-history>\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'dashboard_json\'">\n\t<h3 class=dashboard-settings__header>JSON Model</h3>\n  <div class=dashboard-settings__subheader>\n    The JSON Model below is data structure that defines the dashboard. Including settings, panel settings & layout,\n    queries etc.\n  </div>\n\n\t<div class=gf-form>\n\t\t<code-editor content=ctrl.json data-mode=json data-max-lines=30></code-editor>\n\t</div>\n\n  <div class=gf-form-button-row>\n    <button class="btn btn-primary" ng-click=ctrl.saveDashboardJson() ng-show=ctrl.canSave>\n      Save Changes\n    </button>\n  </div>\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'permissions\'">\n  <dashboard-permissions ng-if="ctrl.dashboard && !ctrl.hasUnsavedFolderChange" dashboardid=ctrl.dashboard.id backendsrv=ctrl.backendSrv folder=ctrl.getFolder() />\n  <div ng-if=ctrl.hasUnsavedFolderChange>\n    <h5>You have changed folder, please save to view permissions.</h5>\n  </div>\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'404\'">\n  <h3 class=dashboard-settings__header>Settings view not found</h3>\n\n  <div>\n    <h5>The settings page could not be found or you do not have permission to access it</h5>\n  </div>\n</div>\n\n<div class=dashboard-settings__content ng-if="ctrl.viewId === \'make_editable\'">\n  <h3 class=dashboard-settings__header>Make Editable</h3>\n\n  <button class="btn btn-primary" ng-click=ctrl.makeEditable()>\n    Make Editable\n  </button>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/ExportDataModal/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body>\n  <div class=modal-header>\n    <h2 class=modal-header-title>\n      Export CSV\n    </h2>\n\n    <a class=modal-header-close ng-click=ctrl.dismiss();>\n      <i class="fa fa-remove"></i>\n    </a>\n  </div>\n\n  <div class=modal-content>\n    <div class=p-t-2>\n      <div class=gf-form ng-hide="ctrl.panel === \'table\'">\n        <label class="gf-form-label width-10">Mode</label>\n        <div class=gf-form-select-wrapper>\n          <select class=gf-form-input ng-model=ctrl.asRows ng-options="f.value as f.text for f in [{text: \'Series as rows\', value: true}, {text: \'Series as columns\', value: false}]">\n          </select>\n        </div>\n      </div>\n      <div class=gf-form ng-hide="ctrl.panel === \'table\'">\n        <label class="gf-form-label width-10">Date Time Format</label>\n        <input type=text class=gf-form-input ng-model=ctrl.dateTimeFormat>\n      </div>\n      <gf-form-switch class=gf-form label="Excel CSV Dialect" label-class=width-10 switch-class=max-width-6 checked=ctrl.excel>\n      </gf-form-switch>\n    </div>\n\n    <div class="gf-form-button-row text-center">\n      <a class="btn btn-primary" ng-click=ctrl.export();>Export</a>\n      <a class=btn-text ng-click=ctrl.dismiss();>Cancel</a>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/FolderPicker/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-inline>\n  <div class=gf-form>\n    <label class="gf-form-label {{ctrl.labelClass}}">Folder</label>\n    <div class=dropdown ng-hide=ctrl.createNewFolder>\n      <gf-form-dropdown model=ctrl.folder get-options=ctrl.getOptions($query) on-change=ctrl.onFolderChange($option)>\n      </gf-form-dropdown>\n    </div>\n    <input type=text class="gf-form-input max-width-10" ng-if=ctrl.createNewFolder give-focus=ctrl.createNewFolder ng-model=ctrl.newFolderName ng-model-options="{ debounce: 400 }" ng-change=ctrl.newFolderNameChanged() />\n  </div>\n  <div class=gf-form ng-if=ctrl.createNewFolder>\n    <button class="btn btn-inverse" ng-click=ctrl.createFolder($event) ng-disabled="!ctrl.newFolderNameTouched || ctrl.hasValidationError">\n      <i class="fa fa-fw fa-save"></i>&nbsp;Create\n    </button>\n  </div>\n  <div class=gf-form ng-if=ctrl.createNewFolder>\n    <button class="btn btn-inverse" ng-click=ctrl.cancelCreateFolder($event)>\n      Cancel\n  </button>\n  </div>\n</div>\n<div class=gf-form-inline ng-if="ctrl.newFolderNameTouched && ctrl.hasValidationError">\n  <div class="gf-form gf-form--grow">\n    <label class="gf-form-label text-warning gf-form-label--grow">\n      <i class="fa fa-warning"></i>\n      {{ctrl.validationError}}\n    </label>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/RowOptions/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body>\n\t<div class=modal-header>\n\t\t<h2 class=modal-header-title>\n\t\t\t<i class="fa fa-copy"></i>\n\t\t\t<span class=p-l-1>Row Options</span>\n\t\t</h2>\n\n\t\t<a class=modal-header-close ng-click=ctrl.dismiss();>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n\t<form name=ctrl.saveForm ng-submit=ctrl.save() class="modal-content text-center" novalidate>\n\t\t<div class=section>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-7">Title</span>\n\t\t\t\t<input type=text class="gf-form-input max-width-13" ng-model=ctrl.row.title>\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-7">Repeat for</span>\n\t\t\t\t<dash-repeat-option panel=ctrl.row></dash-repeat-option>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form-button-row>\n\t\t\t\t<button type=submit class="btn btn-primary" ng-click=ctrl.update()>Update</button>\n\t\t\t\t<button type=button class="btn btn-inverse" ng-click=ctrl.dismiss()>Cancel</button>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/ShareModal/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body ng-controller=ShareModalCtrl ng-init=init()>\n\n\t<div class=modal-header>\n\t\t<h2 class=modal-header-title>\n\t\t\t<i class="fa fa-share-square-o"></i>\n\t\t\t<span class=p-l-1>{{modalTitle}}</span>\n\t\t</h2>\n\n\t\t<ul class=gf-tabs>\n\t\t\t<li class=gf-tabs-item ng-repeat="tab in tabs">\n\t\t\t\t<a class=gf-tabs-link ng-click="editor.index = $index" ng-class="{active: editor.index === $index}">\n\t\t\t\t\t{{::tab.title}}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<a class=modal-header-close ng-click=dismiss();>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n\t<div class=modal-content ng-repeat="tab in tabs" ng-if="editor.index == $index">\n\t\t<div ng-include src=tab.src class=share-modal-body></div>\n\t</div>\n\n</div>\n\n<script type=text/ng-template id=shareEmbed.html>\n\t<div class="share-modal-header">\n\t\t<div class="share-modal-big-icon">\n\t\t\t<i class="fa fa-code"></i>\n\t\t</div>\n\t\t<div class="share-modal-content">\n\t\t\t<p class="share-modal-info-text">\n\t\t\t\tThe html code below can be pasted and included in another web page. Unless anonymous access\n\t\t\t\tis enabled the user viewing that page need to be signed into grafana for the graph to load.\n\t\t\t</p>\n\n\t\t\t<div ng-include src="\'shareLinkOptions.html\'"></div>\n\n\t\t\t<div class="gf-form-group gf-form--grow">\n\t\t\t\t<div class="gf-form">\n\t\t\t\t\t<textarea rows="5" data-share-panel-url class="gf-form-input" ng-model=\'iframeHtml\'></textarea>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type=text/ng-template id=shareExport.html>\n\t<dash-export-modal dismiss="dismiss()"></dash-export-modal>\n<\/script>\n\n<script type=text/ng-template id=shareLinkOptions.html>\n\t<div class="gf-form-group">\n\t\t<gf-form-switch class="gf-form"\n\t\t\tlabel="Current time range" label-class="width-12" switch-class="max-width-6"\n\t\t\tchecked="options.forCurrent" on-change="buildUrl()">\n\t\t</gf-form-switch>\n\t\t<gf-form-switch class="gf-form"\n\t\t\tlabel="Template variables" label-class="width-12" switch-class="max-width-6"\n\t\t\tchecked="options.includeTemplateVars" on-change="buildUrl()">\n\t\t</gf-form-switch>\n\t\t<div class="gf-form">\n\t\t\t<span class="gf-form-label width-12">Theme</span>\n\t\t\t<div class="gf-form-select-wrapper width-10">\n\t\t\t\t<select class="gf-form-input" ng-model="options.theme" ng-options="f as f for f in [\'current\', \'dark\', \'light\']" ng-change="buildUrl()"></select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type=text/ng-template id=shareLink.html>\n\t<div class="share-modal-header">\n\t\t<div class="share-modal-big-icon">\n\t\t\t<i class="fa fa-link"></i>\n\t\t</div>\n\t\t<div class="share-modal-content">\n\t\t\t<p class="share-modal-info-text">\n\t\t\t\tCreate a direct link to this dashboard or panel, customized with the options below.\n\t\t\t</p>\n\t\t\t<div ng-include src="\'shareLinkOptions.html\'"></div>\n\t\t\t<div>\n\t\t\t\t<div class="gf-form-group">\n\t\t\t\t\t<div class="gf-form-inline">\n\t\t\t\t\t\t<div class="gf-form gf-form--grow">\n\t\t\t\t\t\t\t<input type="text" data-share-panel-url class="gf-form-input" ng-model="shareUrl"></input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="gf-form">\n\t\t\t\t\t\t\t<button class="btn btn-inverse" clipboard-button="getShareUrl()"><i class="fa fa-clipboard"></i> Copy</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="gf-form" ng-show="modeSharePanel">\n\t\t\t\t<a href="{{imageUrl}}" target="_blank"><i class="fa fa-camera"></i> Direct link rendered image</a>\n\t\t\t</div>\n\t\t</div>\n<\/script>\n\n<script type=text/ng-template id=shareSnapshot.html>\n\t<div class="ng-cloak" ng-cloak ng-controller="ShareSnapshotCtrl" ng-init="init()">\n\t\t<div class="share-modal-header">\n\t\t\t<div class="share-modal-big-icon">\n\t\t\t\t<i ng-if="loading" class="fa fa-spinner fa-spin"></i>\n\t\t\t\t<i ng-if="!loading" class="icon-gf icon-gf-snapshot"></i>\n\t\t\t</div>\n      <div class="share-modal-content">\n        <div ng-if="step === 1">\n          <p class="share-modal-info-text">\n            A snapshot is an instant way to share an interactive dashboard publicly.\n            When created, we <strong>strip sensitive data</strong> like queries (metric, template and annotation) and panel links,\n            leaving only the visible metric data and series names embedded into your dashboard.\n          </p>\n          <p class="share-modal-info-text">\n            Keep in mind, your <strong>snapshot can be viewed by anyone</strong> that has the link and can reach the URL.\n            Share wisely.\n          </p>\n        </div>\n\n\t\t\t\t<div class="share-modal-header" ng-if="step === 3">\n\t\t\t\t\t<p class="share-modal-info-text">\n\t\t\t\t\t\tThe snapshot has now been deleted. If it you have already accessed it once, It might take up to an hour before it is removed from\n\t\t\t\t\t\tbrowser caches or CDN caches.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="gf-form-group share-modal-options">\n\t\t\t\t\t<div class="gf-form" ng-if="step === 1">\n\t\t\t\t\t\t<span class="gf-form-label width-12">Snapshot name</span>\n\t\t\t\t\t\t<input type="text" ng-model="snapshot.name" class="gf-form-input max-width-15" >\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="gf-form" ng-if="step === 1">\n\t\t\t\t\t\t<span class="gf-form-label width-12">Expire</span>\n\t\t\t\t\t\t<div class="gf-form-select-wrapper max-width-15">\n\t\t\t\t\t\t\t<select class="gf-form-input" ng-model="snapshot.expires" ng-options="f.value as f.text for f in expireOptions"></select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="gf-form" ng-if="step === 2" style="margin-top: 40px">\n\t\t\t\t\t\t<div class="gf-form-row">\n\t\t\t\t\t\t\t<a href="{{snapshotUrl}}" class="large share-modal-link" target="_blank">\n\t\t\t\t\t\t\t\t<i class="fa fa-external-link-square"></i>\n\t\t\t\t\t\t\t\t{{snapshotUrl}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<button class="btn btn-inverse" clipboard-button="getSnapshotUrl()"><i class="fa fa-clipboard"></i> Copy Link</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div ng-if="step === 1">\n\t\t\t\t\t<p class="share-modal-info-text">\n\t\t\t\t\t\tYou may need to configure the timeout value if it takes a long time to collect your dashboard\'s metrics.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="gf-form-group share-modal-options">\n\t\t\t\t\t<div class="gf-form" ng-if="step === 1">\n\t\t\t\t\t\t<span class="gf-form-label width-12">Timeout (seconds)</span>\n\t\t\t\t\t\t<input type="number" ng-model="snapshot.timeoutSeconds" class="gf-form-input max-width-15" >\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div ng-if="step === 1" class="gf-form-button-row">\n\t\t\t\t\t<button class="btn gf-form-btn width-10 btn-primary" ng-click="createSnapshot()" ng-disabled="loading">\n\t\t\t\t\t\t<i class="fa fa-save"></i>\n\t\t\t\t\t\tLocal Snapshot\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn gf-form-btn width-16 btn-secondary" ng-if="externalEnabled" ng-click="createSnapshot(true)" ng-disabled="loading">\n\t\t\t\t\t\t<i class="fa fa-cloud-upload"></i>\n\t\t\t\t\t\t{{sharingButtonText}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<a class="btn btn-link" ng-click="dismiss()">Cancel</a>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="pull-right" ng-if="step === 2" style="padding: 5px">\n\t\t\t\t\tDid you make a mistake? <a class="pointer" ng-click="deleteSnapshot()" target="_blank">delete snapshot.</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>\n<\/script>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/SubMenu/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=submenu-controls>\n  <div ng-repeat="variable in ctrl.variables" ng-hide="variable.hide === 2" class="submenu-item gf-form-inline">\n    <div class=gf-form>\n      <label class="gf-form-label template-variable" ng-hide="variable.hide === 1">\n        {{variable.label || variable.name}}\n      </label>\n      <value-select-dropdown ng-if="variable.type !== \'adhoc\' && variable.type !== \'textbox\'" dashboard=ctrl.dashboard variable=variable on-updated=ctrl.variableUpdated(variable)></value-select-dropdown>\n      <input type=text ng-if="variable.type === \'textbox\'" ng-model=variable.query class="gf-form-input width-12" ng-blur="variable.current.value != variable.query && variable.updateOptions() && ctrl.variableUpdated(variable);" ng-keydown="$event.keyCode === 13 && variable.current.value != variable.query && variable.updateOptions() && ctrl.variableUpdated(variable);">\n    </div>\n    <ad-hoc-filters ng-if="variable.type === \'adhoc\'" variable=variable dashboard=ctrl.dashboard></ad-hoc-filters>\n  </div>\n\n  <div ng-if="ctrl.dashboard.annotations.list.length > 0">\n    <div ng-repeat="annotation in ctrl.dashboard.annotations.list" ng-hide=annotation.hide class=submenu-item ng-class="{\'annotation-disabled\': !annotation.enable}">\n\t\t\t<gf-form-switch class=gf-form label={{annotation.name}} checked=annotation.enable on-change=ctrl.annotationStateChanged()></gf-form-switch>\n    </div>\n  </div>\n\n  <div class="gf-form gf-form--grow">\n  </div>\n\n  <div ng-if="ctrl.dashboard.links.length > 0">\n    <dash-links-container links=ctrl.dashboard.links dashboard=ctrl.dashboard class=gf-form-inline></dash-links-container>\n  </div>\n\n  <div class=clearfix></div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/TimePicker/settings.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n\t<h5 class=section-heading>Time Options</h5>\n\n  <div class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label width-10">Timezone</label>\n\t\t\t<div class=gf-form-select-wrapper>\n\t\t\t\t<select ng-model=ctrl.dashboard.timezone class=gf-form-input ng-options="f.value as f.text for f in [{value: \'\', text: \'Default\'}, {value: \'browser\', text: \'Local browser time\'},{value: \'utc\', text: \'UTC\'}]"></select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Auto-refresh</span>\n\t\t\t<input type=text class="gf-form-input max-width-25" ng-model=ctrl.panel.refresh_intervals array-join>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Now delay now-</span>\n\t\t\t<input type=text class="gf-form-input max-width-25" ng-model=ctrl.panel.nowDelay placeholder=0m valid-time-span bs-tooltip="\'Enter 1m to ignore the last minute (because it can contain incomplete metrics)\'" data-placement=right>\n\t\t</div>\n\n\t\t<gf-form-switch class=gf-form label="Hide time picker" checked=ctrl.panel.hidden label-class=width-10></gf-form-switch>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/TimePicker/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=navbar-buttons>\n  <button class="btn navbar-button navbar-button--tight" ng-click=ctrl.move(-1) ng-if=ctrl.isAbsolute>\n\t\t<i class="fa fa-chevron-left"></i>\n\t</button>\n\n\t<button bs-tooltip=ctrl.tooltip data-placement=bottom ng-click=ctrl.openDropdown() class="btn navbar-button gf-timepicker-nav-btn">\n\t\t<i class="fa fa-clock-o"></i>\n\t\t<span ng-bind=ctrl.rangeString></span>\n\t\t<span ng-show=ctrl.isUtc class=gf-timepicker-utc>UTC</span>\n\t\t<span ng-show=ctrl.dashboard.refresh class=text-warning>&nbsp; Refresh every {{ctrl.dashboard.refresh}}</span>\n\t</button>\n\n  <button class="btn navbar-button navbar-button--tight" ng-click=ctrl.move(1) ng-if=ctrl.isAbsolute>\n\t\t<i class="fa fa-chevron-right"></i>\n\t</button>\n\n  <button class="btn navbar-button navbar-button--zoom" bs-tooltip="\'Time range zoom out <br> CTRL+Z\'" data-placement=bottom ng-click=ctrl.zoom(2)>\n\t\t<i class="fa fa-search-minus"></i>\n\t</button>\n\n  <button class="btn navbar-button navbar-button--refresh" ng-click=ctrl.timeSrv.refreshDashboard()>\n\t\t<i class="fa fa-refresh"></i>\n\t</button>\n</div>\n\n<div ng-if=ctrl.isOpen class=gf-timepicker-dropdown>\n  <div class=popover-box>\n    <div class=popover-box__header>\n      <span class=popover-box__title>Quick ranges</span>\n    </div>\n    <div class="popover-box__body gf-timepicker-relative-section">\n      <ul ng-repeat="group in ctrl.timeOptions">\n        <li bindonce ng-repeat="option in group" ng-class="{active: option.active}">\n          <a ng-click=ctrl.setRelativeFilter(option) bo-text=option.display></a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class=popover-box>\n    <div class=popover-box__header>\n      <span class=popover-box__title>Custom range</span>\n    </div>\n    <form name=timeForm class="popover-box__body gf-timepicker-absolute-section">\n      <label class=small>From:</label>\n      <div class=gf-form-inline>\n        <div class="gf-form max-width-28">\n          <input type=text class="gf-form-input input-large" ng-model=ctrl.editTimeRaw.from input-datetime>\n        </div>\n        <div class=gf-form>\n          <button class="btn gf-form-btn btn-secondary" type=button ng-click="openFromPicker=!openFromPicker">\n            <i class="fa fa-calendar"></i>\n          </button>\n        </div>\n      </div>\n\n      <div ng-if=openFromPicker>\n        <datepicker ng-model=ctrl.absolute.fromJs class=gf-timepicker-component show-weeks=false starting-day=ctrl.firstDayOfWeek ng-change=ctrl.absoluteFromChanged()></datepicker>\n      </div>\n\n\n      <label class=small>To:</label>\n      <div class=gf-form-inline>\n        <div class="gf-form max-width-28">\n          <input type=text class="gf-form-input input-large" ng-model=ctrl.editTimeRaw.to input-datetime>\n        </div>\n        <div class=gf-form>\n          <button class="btn gf-form-btn btn-secondary" type=button ng-click="openToPicker=!openToPicker">\n            <i class="fa fa-calendar"></i>\n          </button>\n        </div>\n      </div>\n\n      <div ng-if=openToPicker>\n        <datepicker ng-model=ctrl.absolute.toJs class=gf-timepicker-component show-weeks=false starting-day=ctrl.firstDayOfWeek ng-change=ctrl.absoluteToChanged()></datepicker>\n      </div>\n\n      <label class=small>Refreshing every:</label>\n      <div class=gf-form-inline>\n        <div class="gf-form max-width-28">\n          <select ng-model=ctrl.refresh.value class="gf-form-input input-medium" ng-options="f.value as f.text for f in ctrl.refresh.options"></select>\n        </div>\n        <div class=gf-form>\n          <button type=submit class="btn gf-form-btn btn-primary" ng-click=ctrl.applyCustom(); ng-disabled=!timeForm.$valid>Apply</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/dashboard/components/VersionHistory/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<h3 class=dashboard-settings__header>\n  <a ng-click="ctrl.switchMode(\'list\')">Versions</a>\n  <span ng-show="ctrl.mode === \'compare\'">\n    &gt; Comparing {{ctrl.baseInfo.version}}\n    <i class="fa fa-arrows-h"></i>\n    {{ctrl.newInfo.version}}\n    <cite class=muted ng-if=ctrl.isNewLatest>(Latest)</cite>\n  </span>\n</h3>\n\n<div ng-if="ctrl.mode === \'list\'">\n  <div ng-if=ctrl.loading>\n    <i class="fa fa-spinner fa-spin"></i>\n    <em>Fetching history list&hellip;</em>\n  </div>\n\n  <div ng-if=!ctrl.loading>\n    <div class=gf-form-group>\n      <table class=filter-table>\n        <thead>\n          <tr>\n            <th class=width-4></th>\n            <th class=width-4>Version</th>\n            <th class=width-14>Date</th>\n            <th class=width-10>Updated By</th>\n            <th>Notes</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="revision in ctrl.revisions">\n            <td class=filter-table__switch-cell bs-tooltip="!revision.checked && ctrl.canCompare ? \'You can only compare 2 versions at a time\' : \'\'" data-placement=right>\n              <gf-form-checkbox switch-class=gf-form-switch--table-cell checked=revision.checked on-change=ctrl.revisionSelectionChanged() ng-disabled="!revision.checked && ctrl.canCompare">\n              </gf-form-checkbox>\n            </td>\n            <td class=text-center>{{revision.version}}</td>\n            <td>{{revision.createdDateString}}</td>\n            <td>{{revision.createdBy}}</td>\n            <td>{{revision.message}}</td>\n            <td class=text-right>\n              <a class="btn btn-inverse btn-small" ng-show="revision.version !== ctrl.dashboard.version" ng-click=ctrl.restore(revision.version)>\n                <i class="fa fa-history"></i>&nbsp;&nbsp;Restore\n              </a>\n              <a class="btn btn-outline-disabled btn-small" ng-show="revision.version === ctrl.dashboard.version">\n                <i class="fa fa-check"></i>&nbsp;&nbsp;Latest\n              </a>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div ng-if=ctrl.appending>\n        <i class="fa fa-spinner fa-spin"></i>\n        <em>Fetching more entries&hellip;</em>\n      </div>\n\n      <div class=gf-form-group>\n        <div class=gf-form-button-row>\n          <button type=button class="btn gf-form-button btn-inverse" ng-if="ctrl.revisions.length >= ctrl.limit" ng-click=ctrl.addToLog() ng-disabled=ctrl.isLastPage()>\n            Show more versions\n          </button>\n          <button type=button class="btn btn-primary" ng-if="ctrl.revisions.length > 1" ng-disabled=!ctrl.canCompare ng-click=ctrl.getDiff(ctrl.diff) bs-tooltip="ctrl.canCompare ? \'\' : \'Select 2 versions to start comparing\'" data-placement=bottom>\n            <i class="fa fa-code-fork"></i>&nbsp;&nbsp;Compare versions\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div ng-if="ctrl.mode === \'compare\'">\n  <div ng-if=ctrl.loading>\n    <i class="fa fa-spinner fa-spin"></i>\n    <em>Fetching changes&hellip;</em>\n  </div>\n\n  <div ng-if=!ctrl.loading>\n    <button type=button class="btn btn-danger pull-right" ng-click=ctrl.restore(ctrl.baseInfo.version) ng-if=ctrl.isNewLatest>\n      <i class="fa fa-history"></i>&nbsp;&nbsp;Restore to version {{ctrl.baseInfo.version}}\n    </button>\n    <section>\n      <p class="small muted">\n      <strong>Version {{ctrl.newInfo.version}}</strong> updated by\n      <span>{{ctrl.newInfo.createdBy}} </span>\n      <span>{{ctrl.newInfo.ageString}}</span>\n      <span> - {{ctrl.newInfo.message}}</span>\n      </p>\n      <p class="small muted">\n      <strong>Version {{ctrl.baseInfo.version}}</strong> updated by\n      <span>{{ctrl.baseInfo.createdBy}} </span>\n      <span>{{ctrl.baseInfo.ageString}}</span>\n      <span> - {{ctrl.baseInfo.message}}</span>\n      </p>\n    </section>\n\n    <div id=delta diff-delta>\n      <div class=delta-basic compile=ctrl.delta.basic></div>\n    </div>\n\n    <div class=gf-form-button-row>\n      <button class="btn btn-secondary" ng-click="ctrl.getDiff(\'json\')">View JSON Diff</button>\n    </div>\n\n    <div class=delta-html ng-show="ctrl.diff === \'json\'" compile=ctrl.delta.json></div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/datasources/partials/http_settings.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n\t<h3 class=page-heading>HTTP</h3>\n  <div class=gf-form-group>\n    <div class=gf-form-inline>\n      <div class="gf-form max-width-30">\n        <span class="gf-form-label width-10">URL</span>\n        <input class=gf-form-input type=text ng-model=current.url placeholder={{suggestUrl}} bs-typeahead=getSuggestUrls min-length=0 ng-pattern="/^(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/" required>\n        <info-popover mode=right-absolute>\n          <p>Specify a complete HTTP URL (for example http://your_server:8080)</p>\n          <span ng-show="current.access === \'direct\'">\n            Your access method is <em>Browser</em>, this means the URL\n            needs to be accessible from the browser.\n          </span>\n          <span ng-show="current.access === \'proxy\'">\n            Your access method is <em>Server</em>, this means the URL\n            needs to be accessible from the grafana backend/server.\n          </span>\n        </info-popover>\n      </div>\n\t\t</div>\n\n\t\t<div class=gf-form-inline ng-if=showAccessOption>\n\t\t\t<div class="gf-form max-width-30">\n\t\t\t\t<span class="gf-form-label width-10">Access</span>\n\t\t\t\t<div class="gf-form-select-wrapper max-width-24">\n\t\t\t\t\t<select class=gf-form-input ng-model=current.access ng-options="f.key as f.value for f in [{key: \'proxy\', value: \'Server (Default)\'}, { key: \'direct\', value: \'Browser\'}]"></select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label query-keyword pointer" ng-click=toggleAccessHelp()>\n\t\t\t\t\tHelp&nbsp;\n\t\t\t\t\t<i class="fa fa-caret-down" ng-show=showAccessHelp></i>\n\t\t\t\t\t<i class="fa fa-caret-right" ng-hide=showAccessHelp>&nbsp;</i>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="grafana-info-box m-t-2" ng-show=showAccessHelp>\n\t\t\t<p>\n\t\t\tAccess mode controls how requests to the data source will be handled.\n\t\t\t<strong><i>Server</i></strong> should be the preferred way if nothing else stated.\n\t\t\t</p>\n\t\t\t<div class=alert-title>Server access mode (Default):</div>\n\t\t\t<p>\n\t\t\tAll requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source\n\t\t\tand by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements.\n\t\t\tThe URL needs to be accessible from the grafana backend/server if you select this access mode.\n\t\t\t</p>\n\t\t\t<div class=alert-title>Browser access mode:</div>\n\t\t\t<p>\n\t\t\tAll requests will be made from the browser directly to the data source and may be subject to\n\t\t\tCross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this\n\t\t\taccess mode.\n\t\t</p></div>\n\n\t\t<div class=gf-form-inline ng-if="current.access==\'proxy\'">\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">Whitelisted Cookies</span>\n\t\t\t\t<bootstrap-tagsinput ng-model=current.jsonData.keepCookies width-class=width-20 tagclass="label label-tag" placeholder="Add Name">\n\t\t\t\t</bootstrap-tagsinput>\n\t\t\t\t<info-popover mode=right-absolute>\n\t\t\t\t\tGrafana Proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.\n\t\t\t\t</info-popover>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<h3 class=page-heading>Auth</h3>\n\t<div class=gf-form-group>\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-checkbox class=gf-form label="Basic Auth" checked=current.basicAuth label-class=width-10 switch-class=max-width-6></gf-form-checkbox>\n\t\t\t<gf-form-checkbox class=gf-form label="With Credentials" tooltip="Whether credentials such as cookies or auth\n\t\t\t  headers should be sent with cross-site requests." checked=current.withCredentials label-class=width-11 switch-class=max-width-6></gf-form-checkbox>\n\t\t</div>\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-checkbox class=gf-form ng-if="current.access==\'proxy\'" label="TLS Client Auth" label-class=width-10 checked=current.jsonData.tlsAuth switch-class=max-width-6></gf-form-checkbox>\n\t\t\t<gf-form-checkbox class=gf-form ng-if="current.access==\'proxy\'" label="With CA Cert" tooltip="Needed for\n\t\t\t  verifing self-signed TLS Certs" checked=current.jsonData.tlsAuthWithCACert label-class=width-11 switch-class=max-width-6></gf-form-checkbox>\n\t\t</div>\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-checkbox class=gf-form ng-if="current.access==\'proxy\'" label="Skip TLS Verify" label-class=width-10 checked=current.jsonData.tlsSkipVerify switch-class=max-width-6></gf-form-checkbox>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-group ng-if=current.basicAuth>\n\t\t<h6>Basic Auth Details</h6>\n\t\t<div class=gf-form ng-if=current.basicAuth>\n\t\t\t<span class="gf-form-label width-10">User</span>\n\t\t\t<input class="gf-form-input max-width-21" type=text ng-model=current.basicAuthUser placeholder=user required>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Password</span>\n\t\t\t<input class="gf-form-input max-width-21" type=password ng-model=current.basicAuthPassword placeholder=password required>\n\t\t</div>\n\t</div>\n\n<datasource-tls-auth-settings current=current ng-if="(current.jsonData.tlsAuth || current.jsonData.tlsAuthWithCACert) && current.access==\'proxy\'">\n</datasource-tls-auth-settings></div>')}]),e.exports=n},function(e,t){var n="public/app/features/datasources/partials/tls_auth_settings.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n  <div class=gf-form>\n    <h6>TLS Auth Details</h6>\n    <info-popover mode=header>TLS Certs are encrypted and stored in the Grafana database.</info-popover>\n  </div>\n  <div ng-if=current.jsonData.tlsAuthWithCACert>\n    <div class=gf-form-inline>\n      <div class="gf-form gf-form--v-stretch"><label class="gf-form-label width-7">CA Cert</label></div>\n      <div class="gf-form gf-form--grow" ng-if=!current.secureJsonFields.tlsCACert>\n        <textarea rows=7 class="gf-form-input gf-form-textarea" ng-model=current.secureJsonData.tlsCACert placeholder="Begins with -----BEGIN CERTIFICATE-----"></textarea>\n      </div>\n\n      <div class=gf-form ng-if=current.secureJsonFields.tlsCACert>\n        <input type=text class="gf-form-input max-width-12" disabled=disabled value=configured />\n        <a class="btn btn-secondary gf-form-btn" href=# ng-click="current.secureJsonFields.tlsCACert = false">reset</a>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if=current.jsonData.tlsAuth>\n    <div class=gf-form-inline>\n      <div class="gf-form gf-form--v-stretch"><label class="gf-form-label width-7">Client Cert</label></div>\n      <div class="gf-form gf-form--grow" ng-if=!current.secureJsonFields.tlsClientCert>\n        <textarea rows=7 class="gf-form-input gf-form-textarea" ng-model=current.secureJsonData.tlsClientCert placeholder="Begins with -----BEGIN CERTIFICATE-----" required></textarea>\n      </div>\n      <div class=gf-form ng-if=current.secureJsonFields.tlsClientCert>\n        <input type=text class="gf-form-input max-width-12" disabled=disabled value=configured />\n        <a class="btn btn-secondary gf-form-btn" href=# ng-click="current.secureJsonFields.tlsClientCert = false">reset</a>\n      </div>\n    </div>\n\n    <div class=gf-form-inline>\n      <div class="gf-form gf-form--v-stretch"><label class="gf-form-label width-7">Client Key</label></div>\n      <div class="gf-form gf-form--grow" ng-if=!current.secureJsonFields.tlsClientKey>\n        <textarea rows=7 class="gf-form-input gf-form-textarea" ng-model=current.secureJsonData.tlsClientKey placeholder="Begins with -----BEGIN RSA PRIVATE KEY-----" required></textarea>\n      </div>\n      <div class=gf-form ng-if=current.secureJsonFields.tlsClientKey>\n        <input type=text class="gf-form-input max-width-12" disabled=disabled value=configured />\n        <a class="btn btn-secondary gf-form-btn" href=# ng-click="current.secureJsonFields.tlsClientKey = false">reset</a>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/folders/partials/create_folder.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body" ng-cloak>\n\n\t<h3 class=page-sub-heading>New Dashboard Folder</h3>\n\n  <form name=ctrl.saveForm ng-submit=ctrl.create() novalidate>\n\t\t<div class=gf-form-inline>\n\t\t\t<div class="gf-form gf-form--grow">\n\t\t\t\t<label class="gf-form-label width-10">Name</label>\n\t\t\t\t<input type=text class=gf-form-input ng-model=ctrl.title give-focus=true ng-change=ctrl.titleChanged() ng-model-options="{ debounce: 400 }" ng-class="{\'validation-error\': ctrl.nameExists || !ctrl.dash.title}">\n\t\t\t\t<label class="gf-form-label text-success" ng-if="ctrl.titleTouched && !ctrl.hasValidationError">\n\t\t\t\t\t<i class="fa fa-check"></i>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=gf-form-inline ng-if=ctrl.hasValidationError>\n\t\t\t<div class="gf-form offset-width-10 gf-form--grow">\n\t\t\t\t<label class="gf-form-label text-warning gf-form-label--grow">\n\t\t\t\t\t<i class="fa fa-warning"></i>\n\t\t\t\t\t{{ctrl.validationError}}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary width-12" ng-disabled="!ctrl.titleTouched || ctrl.hasValidationError">\n\t\t\t\t<i class="fa fa-save"></i> Create\n\t\t\t</button>\n\t\t</div>\n\t</form>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/folders/partials/folder_dashboards.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header ng-if=ctrl.navModel model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n    <manage-dashboards ng-if="ctrl.folderId && ctrl.uid" folder-id=ctrl.folderId folder-uid=ctrl.uid />\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/manage-dashboards/components/MoveToFolderModal/template.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body>\n  <div class=modal-header>\n    <h2 class=modal-header-title>\n\t\t\t<i class="gicon gicon-folder-new"></i>\n      <span class=p-l-1>Choose Dashboard Folder</span>\n    </h2>\n\n    <a class=modal-header-close ng-click=ctrl.dismiss();>\n      <i class="fa fa-remove"></i>\n    </a>\n  </div>\n\n  <form name=ctrl.saveForm ng-submit=ctrl.save() class="modal-content folder-modal" novalidate>\n    <p>Move the {{ctrl.dashboards.length}} selected dashboards to the following folder:</p>\n\n    <div class=p-t-2>\n      <div class=gf-form>\n          <folder-picker on-load=ctrl.onFolderChange($folder) on-change=ctrl.onFolderChange($folder) enter-folder-creation=ctrl.onEnterFolderCreation() exit-folder-creation=ctrl.onExitFolderCreation() enable-create-new=true label-class=width-7>\n          </folder-picker>\n      </div>\n    </div>\n    <div class="gf-form-button-row text-center">\n      <button type=submit class="btn btn-primary" ng-disabled="ctrl.saveForm.$invalid || !ctrl.isValidFolderSelection">Move</button>\n      <a class=btn-text ng-click=ctrl.dismiss();>Cancel</a>\n    </div>\n  </form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/manage-dashboards/partials/dashboard_import.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body" ng-cloak>\n  <div ng-if="ctrl.step === 1">\n\n    <form class=page-action-bar>\n      <div class=page-action-bar__spacer></div>\n      <dash-upload on-upload=ctrl.onUpload(dash)></dash-upload>\n    </form>\n\n    <h5 class=section-heading>Grafana.com Dashboard</h5>\n\n    <div class=gf-form-group>\n      <div class="gf-form gf-form--grow">\n        <input type=text class="gf-form-input max-width-30" ng-model=ctrl.gnetUrl placeholder="Paste Grafana.com dashboard url or id" ng-blur=ctrl.checkGnetDashboard()>\n      </div>\n      <div class=gf-form ng-if=ctrl.gnetError>\n        <label class="gf-form-label text-warning">\n          <i class="fa fa-warning"></i>\n          {{ctrl.gnetError}}\n        </label>\n      </div>\n    </div>\n\n    <h5 class=section-heading>Or paste JSON</h5>\n\n    <div class=gf-form-group>\n      <div class=gf-form>\n        <textarea rows=10 data-share-panel-url="" class=gf-form-input ng-model=ctrl.jsonText></textarea>\n      </div>\n      <button type=button class="btn btn-secondary" ng-click=ctrl.loadJsonText()>\n        <i class="fa fa-paste"></i>\n        Load\n      </button>\n      <span ng-if=ctrl.parseError class="text-error p-l-1">\n        <i class="fa fa-warning"></i>\n        {{ctrl.parseError}}\n      </span>\n    </div>\n  </div>\n\n  <div ng-if="ctrl.step === 2">\n    <div class=gf-form-group ng-if=ctrl.dash.gnetId>\n      <h3 class=section-heading>\n        Importing Dashboard from\n        <a href=https://grafana.com/dashboards/{{ctrl.dash.gnetId}} class=external-link target=_blank>Grafana.com</a>\n      </h3>\n\n      <div class=gf-form>\n        <label class="gf-form-label width-15">Published by</label>\n        <label class="gf-form-label width-15">{{ctrl.gnetInfo.orgName}}</label>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-15">Updated on</label>\n        <label class="gf-form-label width-15">{{ctrl.gnetInfo.updatedAt | date : \'yyyy-MM-dd HH:mm:ss\'}}</label>\n      </div>\n    </div>\n\n    <h3 class=section-heading>\n      Options\n    </h3>\n\n    <div class=gf-form-group>\n      <div class=gf-form-inline>\n        <div class="gf-form gf-form--grow">\n          <label class="gf-form-label width-15">Name</label>\n          <input type=text class=gf-form-input ng-model=ctrl.dash.title give-focus=true ng-change=ctrl.titleChanged() ng-class="{\'validation-error\': ctrl.nameExists || !ctrl.dash.title}">\n          <label class="gf-form-label text-success" ng-if="ctrl.titleTouched && !ctrl.hasNameValidationError">\n            <i class="fa fa-check"></i>\n          </label>\n        </div>\n      </div>\n\n      <div class=gf-form-inline ng-if=ctrl.hasNameValidationError>\n        <div class="gf-form offset-width-15 gf-form--grow">\n          <label class="gf-form-label text-warning gf-form-label--grow">\n            <i class="fa fa-warning"></i>\n            {{ctrl.nameValidationError}}\n          </label>\n        </div>\n      </div>\n\n      <div class=gf-form-inline>\n        <div class="gf-form gf-form--grow">\n          <folder-picker label-class=width-15 initial-folder-id=ctrl.folderId initial-title=ctrl.initialFolderTitle on-change=ctrl.onFolderChange($folder) on-load=ctrl.onFolderChange($folder) enter-folder-creation=ctrl.onEnterFolderCreation() exit-folder-creation=ctrl.onExitFolderCreation() enable-create-new=true>\n          </folder-picker>\n        </div>\n      </div>\n\n      <div class=gf-form-inline>\n        <div class="gf-form gf-form--grow">\n          <span class="gf-form-label width-15">\n            Unique identifier (uid)\n            <info-popover mode=right-normal>\n                The unique identifier (uid) of a dashboard can be used for uniquely identify a dashboard between multiple Grafana installs.\n                The uid allows having consistent URL’s for accessing dashboards so changing the title of a dashboard will not break any\n                bookmarked links to that dashboard.\n            </info-popover>\n          </span>\n          <input type=text class=gf-form-input disabled=disabled ng-model=ctrl.autoGenerateUidValue ng-if=ctrl.autoGenerateUid>\n          <a class="btn btn-secondary gf-form-btn" href=# ng-click="ctrl.autoGenerateUid = false" ng-if=ctrl.autoGenerateUid>change</a>\n          <input type=text class=gf-form-input maxlength=40 placeholder="optional, will be auto-generated if empty" ng-model=ctrl.dash.uid ng-change=ctrl.uidChanged() ng-if=!ctrl.autoGenerateUid>\n          <label class="gf-form-label text-success" ng-if="!ctrl.autoGenerateUid && !ctrl.hasUidValidationError">\n            <i class="fa fa-check"></i>\n          </label>\n        </div>\n      </div>\n\n      <div class=gf-form-inline ng-if=ctrl.hasUidValidationError>\n        <div class="gf-form offset-width-15 gf-form--grow">\n          <label class="gf-form-label text-warning gf-form-label--grow">\n            <i class="fa fa-warning"></i>\n            {{ctrl.uidValidationError}}\n          </label>\n        </div>\n      </div>\n\n      <div ng-repeat="input in ctrl.inputs">\n        <div class=gf-form>\n          <label class="gf-form-label width-15">\n            {{input.label}}\n            <info-popover mode=right-normal>\n              {{input.info}}\n            </info-popover>\n          </label>\n          \x3c!-- Data source input --\x3e\n          <div class=gf-form-select-wrapper style=width:100% ng-if="input.type === \'datasource\'">\n            <select class=gf-form-input ng-model=input.value ng-options="v.value as v.text for v in input.options" ng-change=ctrl.inputValueChanged()>\n              <option value="" ng-hide=input.value>{{input.info}}</option>\n            </select>\n          </div>\n          \x3c!-- Constant input --\x3e\n          <input ng-if="input.type === \'constant\'" type=text class=gf-form-input ng-model=input.value placeholder={{input.default}} ng-change=ctrl.inputValueChanged()>\n          <label class="gf-form-label text-success" ng-show=input.value>\n            <i class="fa fa-check"></i>\n          </label>\n        </div>\n      </div>\n    </div>\n\n    <div class=gf-form-button-row>\n      <button type=button class="btn btn-primary width-12" ng-click=ctrl.saveDashboard() ng-hide="ctrl.nameExists || ctrl.uidExists" ng-disabled=!ctrl.isValid()>\n        <i class="fa fa-save"></i> Import\n      </button>\n      <button type=button class="btn btn-danger width-12" ng-click=ctrl.saveDashboard() ng-show="ctrl.nameExists || ctrl.uidExists" ng-disabled=!ctrl.isValid()>\n        <i class="fa fa-save"></i> Import (Overwrite)\n      </button>\n      <a class="btn btn-link" ng-click=ctrl.back()>Cancel</a>\n    </div>\n\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/manage-dashboards/partials/dashboard_list.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n  <manage-dashboards/>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/manage-dashboards/partials/snapshot_list.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n   <table class=filter-table>\n    <thead>\n      <th><strong>Name</strong></th>\n      <th><strong>Snapshot url</strong></th>\n      <th style=width:70px></th>\n      <th style=width:30px></th>\n      <th style=width:25px></th>\n\t\t</thead>\n\t\t<tr ng-repeat="snapshot in ctrl.snapshots">\n      <td>\n        <a href={{snapshot.url}}>{{snapshot.name}}</a>\n      </td>\n      <td>\n        <a href={{snapshot.url}}>{{snapshot.url}}</a>\n      </td>\n      <td>\n        <span class=query-keyword ng-if=snapshot.external>External</span>\n      </td>\n      <td class=text-center>\n        <a href={{snapshot.url}} class="btn btn-inverse btn-mini">\n          <i class="fa fa-eye"></i>\n          View\n        </a>\n      </td>\n      <td class=text-right>\n        <a ng-click=ctrl.removeSnapshot(snapshot) class="btn btn-danger btn-mini">\n          <i class="fa fa-remove"></i>\n        </a>\n      </td>\n    </tr>\n  </table>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/org/partials/invite.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body" ng-cloak>\n\n\t<h2 class=page-sub-heading>Invite User</h2>\n\n\t<div class=p-b-2>\n\t\tSend invite or add existing Grafana user to the organization\n\t\t<span class=highlight-word>{{contextSrv.user.orgName}}</span>\n\t</div>\n\n\t<form name=ctrl.inviteForm>\n\t\t<div class=gf-form-group>\n\t\t\t<div class="gf-form max-width-30">\n\t\t\t\t<span class="gf-form-label width-10">Email or Username</span>\n\t\t\t\t<input type=text ng-model=ctrl.invite.loginOrEmail required class=gf-form-input placeholder=email@test.com>\n\t\t\t</div>\n\t\t\t<div class="gf-form max-width-30">\n\t\t\t\t<span class="gf-form-label width-10">Name</span>\n\t\t\t\t<input type=text ng-model=ctrl.invite.name class=gf-form-input placeholder="name (optional)">\n\t\t\t</div>\n\t\t\t<div class="gf-form max-width-30">\n        <span class="gf-form-label width-10">Role</span>\n\t\t\t\t<select ng-model=ctrl.invite.role class=gf-form-input ng-options="f for f in [\'Viewer\', \'Editor\', \'Admin\']">\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t<gf-form-switch class=gf-form label="Send invite email" checked=ctrl.invite.sendEmail label-class=width-10></gf-form-switch>\n\n\t\t\t<div class=gf-form-button-row>\n\t\t\t\t<button type=submit class="btn btn-primary" ng-click=ctrl.sendInvite();>Invite</button>\n\t\t\t\t<a class="btn btn-inverse" href=org/users>Back</a>\n\t\t\t</div>\n\t</div></form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/org/partials/newOrg.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body" ng-form=playlistEditForm>\n\t<h2 class=page-sub-heading>\n\t\tNew Organization\n\t</h2>\n\n\t<p class=playlist-description>Each organization contains their own dashboards, data sources and configuration, and cannot be shared between orgs. While users may belong to more than one, multiple organization are most frequently used in multi-tenant deployments. </p>\n\n\t<form>\n\t\t<div class=gf-form-group>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">Org. name</span>\n\t\t\t\t<input type=text ng-model=newOrg.name required class="gf-form-input max-width-21" placeholder="organization name">\n\t\t\t</div>\n\t\t\t<br>\n\t\t\t<div class=gf-form-buttons-row>\n\t\t\t\t<button type=submit class="btn btn-primary" ng-click=createOrg()>Create</button>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/org/partials/select_org.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n\n\t<div class=signup>\n\t\t<div class=login-form>\n\n\t\t\t<div class=modal-tagline>\n\t\t\t\tYou have been added to another Organization due to an open invitation!\n\n\t\t\t\tPlease select which organization you want to <br>\n\t\t\t\tuse right now (you can change this later at any time).\n\t\t\t</div>\n\n\t\t\t<div style="display:inline-block;width:400px;margin:30px 0">\n\t\t\t\t<div ng-repeat="org in orgs">\n\t\t\t\t\t<a ng-click=setUsingOrg(org) class="btn btn-primary">\n\t\t\t\t\t\t{{org.name}} ({{org.role}})\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/panel/panellinks/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n\t<div class=gf-form-group ng-repeat="link in panel.links">\n\t\t<div class=section>\n\t\t\t<div class="gf-form max-width-25">\n\t\t\t\t<span class="gf-form-label width-7">Type</span>\n\t\t\t\t<div class="gf-form-select-wrapper gf-form--grow">\n\t\t\t\t\t<select class=gf-form-input ng-model=link.type ng-options="f for f in [\'dashboard\',\'absolute\']"></select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="gf-form max-width-25">\n\t\t\t\t<span class="gf-form-label width-7" ng-show="link.type === \'dashboard\'">Dashboard</span>\n\t\t\t\t<input ng-show="link.type === \'dashboard\'" type=text ng-model=link.dashboard bs-typeahead=searchDashboards class=gf-form-input ng-blur=dashboardChanged(link)>\n\n\t\t\t\t<span class="gf-form-label width-7" ng-show="link.type === \'absolute\'">Url</span>\n\t\t\t\t<input ng-show="link.type === \'absolute\'" type=text ng-model=link.url class="gf-form-input max-width-14">\n\t\t\t</div>\n\n\t\t\t<div class="gf-form max-width-25">\n\t\t\t\t<div class="gf-form-label width-7">Title</div>\n\t\t\t\t<input type=text ng-model=link.title class=gf-form-input>\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class=section>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">Url params</span>\n\t\t\t\t<input type=text ng-model=link.params class="gf-form-input width-10">\n\t\t\t</div>\n\n\t\t\t<gf-form-switch class=gf-form label-class=width-10 label="Include time range" checked=link.keepTime></gf-form-switch>\n\t\t\t<gf-form-switch class=gf-form label-class=width-10 label="Include variables" checked=link.includeVars></gf-form-switch>\n\t\t\t<gf-form-switch class=gf-form label-class=width-10 label="Open in new tab " checked=link.targetBlank></gf-form-switch>\n\t\t</div>\n\n\t\t<div class=section>\n\t\t\t<div class=gf-form>\n\t\t\t\t<button class="btn btn-inverse gf-form-btn" ng-click=deleteLink(link)><i class="fa fa-trash"></i> Remove Link</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=editor-row>\n\t<button class="btn btn-inverse" ng-click=addLink()><i class="fa fa-plus"></i> Add link</button>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/panel/partials/general_tab.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=panel-options-group>\n  \x3c!-- <div class="panel&#45;option&#45;section__header">Information</div> --\x3e\n  <div class=panel-options-group__body>\n    <div class=section>\n      <div class=gf-form>\n        <span class="gf-form-label width-7">Title</span>\n        <input type=text class="gf-form-input width-25" ng-model=ctrl.panel.title ng-model-onblur>\n      </div>\n      <gf-form-switch class=gf-form label-class=width-7 switch-class=max-width-6 label=Transparent checked=ctrl.panel.transparent on-change=ctrl.render()></gf-form-switch>\n    </div>\n    <div class=section>\n      <div class="gf-form gf-form--v-stretch">\n        <span class="gf-form-label width-7">Description</span>\n        <textarea class="gf-form-input width-25" rows=5 ng-model=ctrl.panel.description ng-model-onblur placeholder="Panel description, supports markdown & links"></textarea>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=panel-options-group>\n  <div class=panel-options-group__header>Repeating</div>\n  <div class=panel-options-group__body>\n    <div class=section>\n      <div class=gf-form>\n        <span class="gf-form-label width-9">Repeat</span>\n        <dash-repeat-option panel=ctrl.panel></dash-repeat-option>\n      </div>\n      <div class=gf-form ng-show=ctrl.panel.repeat>\n        <span class="gf-form-label width-9">Direction</span>\n        <select class=gf-form-input ng-model=ctrl.panel.repeatDirection ng-options="f.value as f.text for f in [{value: \'v\', text: \'Vertical\'}, {value: \'h\', text: \'Horizontal\'}]">\n          <option value=""></option>\n        </select>\n      </div>\n      <div class=gf-form ng-show="ctrl.panel.repeat && ctrl.panel.repeatDirection == \'h\'">\n        <span class="gf-form-label width-9">Max per row</span>\n        <select class=gf-form-input ng-model=ctrl.panel.maxPerRow ng-options="f for f in [2,3,4,6,12,24]">\n          <option value=""></option>\n        </select>\n      </div>\n      <div class=gf-form-hint>\n        <div class="gf-form-hint-text muted">\n          Note: You may need to change the variable selection to see this in action.\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=panel-options-group>\n  <div class=panel-options-group__header>Drilldown Links</div>\n  <div class=panel-options-group__body>\n    <panel-links-editor panel=ctrl.panel></panel-links-editor>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/panel/partials/panelTime.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n\t<div class=gf-form>\n\t\t<span class=gf-form-label>\n\t\t\t<i class="fa fa-clock-o"></i>\n\t\t</span>\n\n\t\t<span class="gf-form-label width-12">Override relative time</span>\n\t\t<span class="gf-form-label width-6">Last</span>\n\n\t\t<input type=text class="gf-form-input max-width-8" placeholder=1h empty-to-null ng-model=ctrl.panel.timeFrom valid-time-span ng-change=ctrl.refresh() ng-model-onblur>\n\t</div>\n\n\t<div class=gf-form>\n\t\t<span class=gf-form-label>\n\t\t\t<i class="fa fa-clock-o"></i>\n\t\t</span>\n\t\t<span class="gf-form-label width-12">Add time shift</span>\n\t\t<span class="gf-form-label width-6">Amount</span>\n\t\t<input type=text class="gf-form-input max-width-8" placeholder=1h empty-to-null ng-model=ctrl.panel.timeShift valid-time-span ng-change=ctrl.refresh() ng-model-onblur>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>\n\t\t\t\t<i class="fa fa-clock-o"></i>\n\t\t\t</span>\n\t\t</div>\n\t\t<gf-form-switch class="gf-form max-width-30" label="Hide time override info" label-class=width-12 checked=ctrl.panel.hideTimeOverride switch-class=max-width-6 on-change=ctrl.refresh()>\n\t\t</gf-form-switch>\n\t</div>\n</div>\n\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/panel/partials/query_editor_row.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<div ng-transclude class=gf-form-query-content></div>\n\n")}]),e.exports=n},function(e,t){var n="public/app/features/playlist/partials/playlist.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body" ng-form=ctrl.playlistEditForm>\n\n\t<h3 class=page-sub-heading ng-hide=ctrl.isNew>Edit Playlist</h3>\n\t<h3 class=page-sub-heading ng-show=ctrl.isNew>New Playlist</h3>\n\n\t<p class=playlist-description>A playlist rotates through a pre-selected list of Dashboards. A Playlist can be a great way to build situational awareness, or just show off your metrics to your team or visitors.</p>\n\n\t<div class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-7">Name</span>\n\t\t\t<input type=text required ng-model=ctrl.playlist.name class="gf-form-input max-width-21">\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-7">Interval</span>\n\t\t\t<input type=text required ng-model=ctrl.playlist.interval placeholder=5m class="gf-form-input max-width-21">\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-group>\n\t\t<h3 class=page-headering>Dashboards</h3>\n\n\t\t<table class="filter-table playlist-available-list">\n\t\t\t<tr ng-repeat="playlistItem in ctrl.playlistItems">\n\t\t\t\t<td ng-if="playlistItem.type === \'dashboard_by_id\'">\n\t\t\t\t\t<i class="icon-gf icon-gf-dashboard"></i>&nbsp;&nbsp;{{playlistItem.title}}\n\t\t\t\t</td>\n\t\t\t\t<td ng-if="playlistItem.type === \'dashboard_by_tag\'">\n\t\t\t\t\t<a class="search-result-tag label label-tag" tag-color-from-name=playlistItem.title>\n\t\t\t\t\t\t<i class="fa fa-tag"></i>\n\t\t\t\t\t\t<span>{{playlistItem.title}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</td>\n\n\t\t\t\t<td class=selected-playlistitem-settings>\n\t\t\t\t\t<button class="btn btn-inverse btn-mini" ng-hide=$first ng-click=ctrl.movePlaylistItemUp(playlistItem)>\n\t\t\t\t\t\t<i class="fa fa-arrow-up"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn btn-inverse btn-mini" ng-hide=$last ng-click=ctrl.movePlaylistItemDown(playlistItem)>\n\t\t\t\t\t\t<i class="fa fa-arrow-down"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn btn-inverse btn-mini" ng-click=ctrl.removePlaylistItem(playlistItem)>\n\t\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr ng-if="ctrl.playlistItems.length === 0">\n\t\t\t\t<td><em>Playlist is empty, add dashboards below.</em></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\n\t<div class=gf-form-group>\n\t\t<h3 class=page-headering>Add dashboards</h3>\n\t\t<playlist-search class=playlist-search-container search-started=ctrl.searchStarted(promise)></playlist-search>\n\n\t\t<div ng-if="ctrl.filteredDashboards.length > 0">\n\t\t\t<table class="filter-table playlist-available-list">\n\t\t\t\t<tr ng-repeat="playlistItem in ctrl.filteredDashboards">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<i class="icon-gf icon-gf-dashboard"></i>\n\t\t\t\t\t\t&nbsp;&nbsp;{{playlistItem.title}}\n\t\t\t\t\t\t<i class="fa fa-star" ng-show=playlistItem.isStarred></i>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=add-dashboard>\n\t\t\t\t\t\t<button class="btn btn-inverse btn-mini pull-right" ng-click=ctrl.addPlaylistItem(playlistItem)>\n\t\t\t\t\t\t\t<i class="fa fa-plus"></i>\n\t\t\t\t\t\t\tAdd to playlist\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t<div class=playlist-search-results-container ng-if="ctrl.filteredTags.length > 0;">\n\t\t\t<table class="filter-table playlist-available-list">\n\t\t\t\t<tr ng-repeat="tag in ctrl.filteredTags">\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<a class="search-result-tag label label-tag" tag-color-from-name=tag.term>\n\t\t\t\t\t\t\t<i class="fa fa-tag"></i>\n\t\t\t\t\t\t\t<span>{{tag.term}} &nbsp;({{tag.count}})</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=add-dashboard>\n\t\t\t\t\t\t<button class="btn btn-inverse btn-mini pull-right" ng-click=ctrl.addTagPlaylistItem(tag)>\n\t\t\t\t\t\t\t<i class="fa fa-plus"></i>\n\t\t\t\t\t\t\tAdd to playlist\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\n\t<div class=clearfix></div>\n\n\t<div class=gf-form-button-row>\n\t\t<a class="btn btn-primary" ng-show=ctrl.isNew ng-disabled="ctrl.playlistEditForm.$invalid || ctrl.isPlaylistEmpty()" ng-click="ctrl.savePlaylist(ctrl.playlist, ctrl.playlistItems)">Create</a>\n\t\t<a class="btn btn-primary" ng-show=!ctrl.isNew ng-disabled="ctrl.playlistEditForm.$invalid || ctrl.isPlaylistEmpty()" ng-click="ctrl.savePlaylist(ctrl.playlist, ctrl.playlistItems)">Save</a>\n\t\t<a class=btn-text ng-click=ctrl.backToList()>Cancel</a>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/playlist/partials/playlist_search.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=playlist-search-field-wrapper>\n  <span style=position:relative>\n    <input type=text placeholder="Find dashboards by name" tabindex=1 ng-keydown=ctrl.keyDown($event) ng-model=ctrl.query.query ng-model-options="{ debounce: 500 }" spellcheck=false ng-change=ctrl.searchDashboards() />\n\t\t<div class=playlist-search-switches>\n\t\t\t<i class="fa fa-filter"></i>\n\t\t\t<a class=pointer href="javascript:void 0;" ng-click=ctrl.showStarred() tabindex=2>\n\t\t\t\t<i class="fa fa-remove" ng-show=ctrl.query.starred></i>\n\t\t\t\tstarred\n\t\t\t</a> |\n\t\t\t<a class=pointer href="javascript:void 0;" ng-click=ctrl.getTags() tabindex=3>\n\t\t\t\t<i class="fa fa-remove" ng-show=ctrl.tagsMode></i>\n\t\t\t\ttags\n\t\t\t</a>\n\t\t\t<span ng-if=ctrl.query.tag.length>\n\t\t\t\t|\n\t\t\t\t<span ng-repeat="tagName in ctrl.query.tag">\n\t\t\t\t\t<a ng-click="ctrl.removeTag(tagName, $event)" tag-color-from-name=ctrl.tagName class="label label-tag">\n\t\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t\t\t{{tagName}}\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>\n\t</span>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/playlist/partials/playlists.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n  <div ng-if="ctrl.playlists.length > 0">\n    <div class=page-action-bar>\n      <div class=page-action-bar__spacer></div>\n      <a class="btn btn-primary pull-right" href=playlists/create>\n        New playlist\n      </a>\n    </div>\n\n    <table class="filter-table filter-table--hover">\n      <thead>\n        <th><strong>Name</strong></th>\n        <th style=width:100px></th>\n        <th style=width:78px></th>\n      </thead>\n      <tr ng-repeat="playlist in ctrl.playlists">\n        <td class=link-td>\n          <a href=playlists/edit/{{playlist.id}}>{{playlist.name}}</a>\n        </td>\n        <td class=dropdown>\n          <button class="btn btn-inverse btn-small" data-toggle=dropdown>\n            Start playlist\n            <i class="fa fa-caret-down"></i>\n          </button>\n          <ul class=dropdown-menu role=menu>\n            <li>\n              <a href={{playlist.startUrl}}>\n                <i class="fa fa-play"></i> In Normal mode\n              </a>\n              <a href="{{playlist.startUrl}}?kiosk=tv">\n                <i class="fa fa-play"></i> In TV mode\n              </a>\n              <a href="{{playlist.startUrl}}?kiosk=tv&autofitpanels">\n                <i class="fa fa-play"></i> In TV mode <span class=muted>(with auto fit panels)</span>\n              </a>\n              <a href={{playlist.startUrl}}?kiosk>\n                <i class="fa fa-play"></i> In Kiosk mode\n              </a>\n              <a ng-href={{playlist.startUrl}}?kiosk&autofitpanels>\n                <i class="fa fa-play"></i> In Kiosk mode <span class=muted>(with auto fit panels)</span>\n              </a>\n            </li>\n          </ul>\n        </td>\n        <td class=text-right>\n          <a ng-click=ctrl.removePlaylist(playlist) class="btn btn-danger btn-small">\n            <i class="fa fa-remove"></i>\n          </a>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div ng-if="ctrl.playlists.length === 0">\n    <empty-list-cta model="{\n      title: \'There are no playlists created yet\',\n      buttonIcon: \'fa fa-plus\',\n      buttonLink: \'playlists/create\',\n      buttonTitle: \' Create Playlist\',\n      proTip: \'You can use playlists to cycle dashboards on TVs without user control\',\n      proTipLink: \'http://docs.grafana.org/reference/playlist/\',\n      proTipLinkTitle: \'Learn more\',\n      proTipTarget: \'_blank\'\n    }"/>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/plugins/import_list/import_list.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group ng-if=ctrl.dashboards.length>\n\t<table class=filter-table>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="dash in ctrl.dashboards">\n\t\t\t\t<td class=width-1>\n\t\t\t\t\t<i class="icon-gf icon-gf-dashboard"></i>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<a href={{dash.importedUrl}} ng-show=dash.imported>\n\t\t\t\t\t\t{{dash.title}}\n\t\t\t\t\t</a>\n\t\t\t\t\t<span ng-show=!dash.imported>{{dash.title}}</span>\n\t\t\t\t</td>\n\t\t\t\t<td style=text-align:right>\n\t\t\t\t\t<button class="btn btn-secondary btn-small" ng-click="ctrl.import(dash, false)" ng-show=!dash.imported>\n\t\t\t\t\t\tImport\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn btn-secondary btn-small" ng-click="ctrl.import(dash, true)" ng-show=dash.imported>\n            <span ng-if="dash.revision !== dash.importedRevision">Update</span>\n            <span ng-if="dash.revision === dash.importedRevision">Re-import</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn btn-danger btn-small" ng-click=ctrl.remove(dash) ng-show=dash.imported>\n\t\t\t\t\t\t<i class="fa fa-trash"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/plugins/partials/plugin_edit.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-if=ctrl.navModel>\n  <page-header model=ctrl.navModel></page-header>\n\n  <div class="page-container page-body">\n    <div class=sidebar-container>\n      <div class="tab-content sidebar-content" ng-if="ctrl.tab === \'readme\'">\n        <div ng-bind-html=ctrl.readmeHtml class=markdown-html>\n        </div>\n      </div>\n\n      <div class="tab-content sidebar-content" ng-if="ctrl.tab === \'config\'">\n        <div ng-if=ctrl.model.id>\n          <plugin-component type=app-config-ctrl></plugin-component>\n\n          <div class=gf-form-button-row>\n            <button type=submit class="btn btn-primary" ng-click=ctrl.enable() ng-show=!ctrl.model.enabled>Enable</button>\n            <button type=submit class="btn btn-primary" ng-click=ctrl.update() ng-show=ctrl.model.enabled>Update</button>\n            <button type=submit class="btn btn-danger" ng-click=ctrl.disable() ng-show=ctrl.model.enabled>Disable</button>\n          </div>\n        </div>\n      </div>\n\n      <div class="tab-content sidebar-content" ng-if="ctrl.tab === \'dashboards\'">\n        <dashboard-import-list plugin=ctrl.model></dashboard-import-list>\n      </div>\n\n      <aside class=page-sidebar>\n        <section class=page-sidebar-section>\n          <h4>Version</h4>\n          <span>{{ctrl.model.info.version}}</span>\n          <div ng-show=ctrl.model.hasUpdate>\n            <a ng-click=ctrl.updateAvailable() bs-tooltip=ctrl.model.latestVersion>Update Available!</a>\n          </div>\n        </section>\n        <section class=page-sidebar-section ng-show="ctrl.model.type === \'app\'">\n          <h5>Includes\n          <ul class="ui-list plugin-info-list">\n            <li ng-repeat="plug in ctrl.includes" class=plugin-info-list-item>\n              <i class={{plug.icon}}></i>\n              {{plug.name}}\n            </li>\n          </ul>\n        </h5></section>\n        <section class=page-sidebar-section>\n          <h5>Dependencies\n          <ul class="ui-list plugin-info-list">\n            <li class=plugin-info-list-item>\n              <img src=public/img/grafana_icon.svg>\n              Grafana {{ctrl.model.dependencies.grafanaVersion}}\n            </li>\n            <li ng-repeat="plugDep in ctrl.model.dependencies.plugins" class=plugin-info-list-item>\n              <i class={{plugDep.icon}}></i>\n              {{plugDep.name}} {{plugDep.version}}\n            </li>\n          </ul>\n        </h5></section>\n        <section class=page-sidebar-section>\n          <h5>Links\n          <ul class=ui-list>\n            <li ng-repeat="link in ctrl.model.info.links">\n              <a href={{link.url}} class=external-link target=_blank>{{link.name}}</a>\n            </li>\n          </ul>\n        </h5></section>\n      </aside>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/plugins/partials/plugin_page.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<div ng-if=ctrl.navModel>\n  <page-header model=ctrl.navModel></page-header>\n\n  <div class=page-container>\n    <div ng-if=ctrl.page>\n      <plugin-component type=app-page>\n      </plugin-component>\n    </div>\n  </div>\n</div>\n")}]),e.exports=n},function(e,t){var n="public/app/features/plugins/partials/update_instructions.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body>\n\t<div class=modal-header>\n\t\t<h2 class=modal-header-title>\n\t\t\t<i class="fa fa-cloud-download"></i>\n\t\t\t<span class=p-l-1>Update Plugin</span>\n\t\t</h2>\n\n\t\t<a class=modal-header-close ng-click=dismiss();>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n\t<div class=modal-content>\n\t\t<div class=gf-form-group>\n\t\t\t<p>Type the following on the command line to update {{plugin.name}}.</p>\n\t\t\t<pre><code>grafana-cli plugins update {{plugin.id}}</code></pre>\n\t\t\t<span class=small>Check out {{plugin.name}} on <a href=https://grafana.com/plugins/{{plugin.id}}>Grafana.com</a> for README and changelog. If you do not have access to the command line, ask your Grafana administator.</span>\n\t\t</div>\n\t\t<p class=pluginlist-none-installed><img class=pluginlist-inline-logo src=public/img/grafana_icon.svg><strong>Pro tip</strong>: To update all plugins at once, type <code class=code--small>grafana-cli plugins update-all</code> on the command line.</p></div>\n\t</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/profile/partials/change_password.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n\t<h2 class=page-sub-heading>\n\t\tChange your password\n\t</h2>\n\n\t<div ng-if="ldapEnabled || authProxyEnabled">\n\t\tYou cannot change password when ldap or auth proxy authentication is enabled.\n\t</div>\n\n\t<form name=userForm class=gf-form-group ng-hide="ldapEnabled || authProxyEnabled">\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Old Password</span>\n\t\t\t<input class="gf-form-input max-width-21" type=password required ng-model=command.oldPassword>\n\t\t</div>\n\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">New Password</span>\n\t\t\t<input class="gf-form-input max-width-21" type=password required ng-minlength=4 ng-model=command.newPassword>\n\t\t</div>\n\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Confirm Password</span>\n\t\t\t<input class="gf-form-input max-width-21" type=password required ng-minlength=4 ng-model=command.confirmNew>\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary" ng-click=changePassword()>Change Password</button>\n\t\t\t<a class=btn-text href=profile>Cancel</a>\n\t\t</div>\n\t</form>\n\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/features/profile/partials/profile.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body">\n  <h3 class=page-sub-heading>User Profile</h3>\n\n  <form name=ctrl.userForm class=gf-form-group>\n\n    <div class="gf-form max-width-30">\n      <span class="gf-form-label width-8">Name</span>\n      <input class="gf-form-input max-width-22" type=text required ng-model=ctrl.user.name>\n    </div>\n    <div class="gf-form max-width-30">\n      <span class="gf-form-label width-8">Email</span>\n      <input class="gf-form-input max-width-22" type=email ng-readonly=ctrl.readonlyLoginFields required ng-model=ctrl.user.email>\n      <i ng-if=ctrl.readonlyLoginFields class="fa fa-lock gf-form-icon--right-absolute" bs-tooltip="\'Login Details Locked - managed in another system.\'"></i>\n    </div>\n    <div class="gf-form max-width-30">\n      <span class="gf-form-label width-8">Username</span>\n      <input class="gf-form-input max-width-22" type=text ng-readonly=ctrl.readonlyLoginFields required ng-model=ctrl.user.login>\n      <i ng-if=ctrl.readonlyLoginFields class="fa fa-lock gf-form-icon--right-absolute" bs-tooltip="\'Login Details Locked - managed in another system.\'"></i>\n    </div>\n    <div class=gf-form-button-row>\n      <button type=submit class="btn btn-primary" ng-click=ctrl.update()>Save</button>\n    </div>\n  </form>\n\n  <prefs-control resource-uri="\'user\'"></prefs-control>\n\n  <h3 class=page-heading ng-show=ctrl.showTeamsList>Teams</h3>\n  <div class=gf-form-group ng-show=ctrl.showTeamsList>\n    <table class="filter-table form-inline">\n      <thead>\n        <tr>\n          <th></th>\n          <th>Name</th>\n          <th>Email</th>\n          <th>Members</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="team in ctrl.teams">\n          <td class="width-4 text-center"><img class=filter-table__avatar src={{team.avatarUrl}}></td>\n          <td>{{team.name}}</td>\n          <td>{{team.email}}</td>\n          <td>{{team.memberCount}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <h3 class=page-heading ng-show=ctrl.showOrgsList>Organizations</h3>\n  <div class=gf-form-group ng-show=ctrl.showOrgsList>\n    <table class="filter-table form-inline">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Role</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="org in ctrl.orgs">\n          <td>{{org.name}}</td>\n          <td>{{org.role}}</td>\n          <td class=text-right>\n            <span class="btn btn-primary btn-mini" ng-show="org.orgId === contextSrv.user.orgId">\n              Current\n            </span>\n            <a ng-click=ctrl.setUsingOrg(org) class="btn btn-inverse btn-mini" ng-show="org.orgId !== contextSrv.user.orgId">\n              Select\n            </a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>')}]),e.exports=n},function(e,t){var n="public/app/features/teams/partials/create_team.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=ctrl.navModel></page-header>\n\n<div class="page-container page-body" ng-cloak>\n\t<h3 class=page-sub-heading>New Team</h3>\n\n\t<form name=ctrl.saveForm class=gf-form-group ng-submit=ctrl.create()>\n\t\t<div class="gf-form max-width-30">\n\t\t\t<span class="gf-form-label width-10">Name</span>\n\t\t\t<input type=text required ng-model=ctrl.name class="gf-form-input max-width-22" give-focus=true>\n\t\t</div>\n\t\t<div class="gf-form max-width-30">\n\t\t\t<span class="gf-form-label width-10">\n\t\t\t\tEmail\n\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\tThis is optional and is primarily used for allowing custom team avatars.\n\t\t\t\t</info-popover>\n\t\t\t</span>\n\t\t\t<input class="gf-form-input max-width-22" type=email ng-model=ctrl.email placeholder=email@test.com>\n\t\t</div>\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary width-12">\n\t\t\t\t<i class="fa fa-save"></i> Create\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/features/templating/partials/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-controller=VariableEditorCtrl ng-init=init()>\n\n\t<h3 class=dashboard-settings__header>\n\t\t<a ng-click="setMode(\'list\')">Variables</a>\n\t\t<span ng-show="mode === \'new\'">&gt; New</span>\n\t\t<span ng-show="mode === \'edit\'">&gt; Edit</span>\n\t</h3>\n\n\t<div ng-if="mode === \'list\'">\n\n\t\t<div ng-if="variables.length === 0">\n\t\t\t<div class=empty-list-cta>\n\t\t\t\t<div class=empty-list-cta__title>There are no variables added yet</div>\n\t\t\t\t<a ng-click="setMode(\'new\')" class="empty-list-cta__button btn btn-xlarge btn-primary">\n\t\t\t\t\t<i class="gicon gicon-add-variable"></i>\n\t\t\t\t\tAdd variable\n\t\t\t\t</a>\n\t\t\t\t<div class=grafana-info-box>\n\t\t\t\t\t<h5>What do variables do?</h5>\n\t\t\t\t\t<p>Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server or sensor\n\t\t\t\t\t\tnames\n\t\t\t\t\t\tin your metric queries you can use variables in their place. Variables are shown as dropdown select boxes at the\n\t\t\t\t\t\ttop of\n\t\t\t\t\t\tthe dashboard. These dropdowns make it easy to change the data being displayed in your dashboard.\n\n\t\t\t\t\t\tCheck out the\n\t\t\t\t\t\t<a class=external-link href=http://docs.grafana.org/reference/templating/ target=_blank>\n\t\t\t\t\t\t\tTemplating documentation\n\t\t\t\t\t\t</a> for more information.\n\t\t\t\t</p></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if=variables.length>\n\t\t\t<div class=page-action-bar>\n\t\t\t\t<div class=page-action-bar__spacer></div>\n\t\t\t\t<a type=button class="btn btn-primary" ng-click="setMode(\'new\');"><i class="fa fa-plus"></i> New</a>\n\t\t\t</div>\n\n\t\t\t<table class="filter-table filter-table--hover">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Variable</th>\n\t\t\t\t\t\t<th>Definition</th>\n\t\t\t\t\t\t<th colspan=5></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr ng-repeat="variable in variables">\n\t\t\t\t\t\t<td style=width:1%>\n\t\t\t\t\t\t\t<span ng-click=edit(variable) class="pointer template-variable">\n\t\t\t\t\t\t\t\t${{variable.name}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td style=max-width:200px ng-click=edit(variable) class="pointer max-width">\n\t\t\t\t\t\t\t{{variable.definition ? variable.definition : variable.query}}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td style=width:1%><i ng-click=_.move(variables,$index,$index-1) ng-hide=$first class="pointer fa fa-arrow-up"></i></td>\n\t\t\t\t\t\t<td style=width:1%><i ng-click=_.move(variables,$index,$index+1) ng-hide=$last class="pointer fa fa-arrow-down"></i></td>\n\t\t\t\t\t\t<td style=width:1%>\n\t\t\t\t\t\t\t<a ng-click=duplicate(variable) class="btn btn-inverse btn-mini">\n\t\t\t\t\t\t\t\tDuplicate\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td style=width:1%>\n\t\t\t\t\t\t\t<a ng-click=removeVariable(variable) class="btn btn-danger btn-mini">\n\t\t\t\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\n\t<form ng-if="mode === \'edit\' || mode === \'new\'" name=ctrl.form>\n\t\t<h5 class=section-heading>General</h5>\n\t\t<div class=gf-form-group>\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<div class="gf-form max-width-19">\n\t\t\t\t\t<span class="gf-form-label width-6">Name</span>\n\t\t\t\t\t<input type=text class=gf-form-input name=name placeholder=name ng-model=current.name required ng-pattern=namePattern>\n\t\t\t\t</div>\n\t\t\t\t<div class="gf-form max-width-19">\n\t\t\t\t\t<span class="gf-form-label width-6">\n\t\t\t\t\t\tType\n\t\t\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\t\t\t{{variableTypes[current.type].description}}\n\t\t\t\t\t\t</info-popover>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="gf-form-select-wrapper max-width-17">\n\t\t\t\t\t\t<select class=gf-form-input ng-model=current.type ng-options="k as v.name for (k, v) in variableTypes" ng-change=typeChanged()></select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form ng-show=ctrl.form.name.$error.pattern>\n\t\t\t\t<span class="gf-form-label gf-form-label--error">Template names cannot begin with \'__\', that\'s reserved for\n\t\t\t\t\tGrafana\'s global variables</span>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<div class="gf-form max-width-19">\n\t\t\t\t\t<span class="gf-form-label width-6">Label</span>\n\t\t\t\t\t<input type=text class=gf-form-input ng-model=current.label placeholder="optional display name">\n\t\t\t\t</div>\n\t\t\t\t<div class="gf-form max-width-19">\n\t\t\t\t\t<span class="gf-form-label width-6">Hide</span>\n\t\t\t\t\t<div class="gf-form-select-wrapper max-width-15">\n\t\t\t\t\t\t<select class=gf-form-input ng-model=current.hide ng-options="f.value as f.text for f in hideOptions"></select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="current.type === \'interval\'" class=gf-form-group>\n\t\t\t<h5 class=section-heading>Interval Options</h5>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-9">Values</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=current.query placeholder=1m,10m,1h,6h,1d,7d ng-model-onblur ng-change=runQuery() required>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<gf-form-switch class=gf-form label="Auto Option" label-class=width-9 checked=current.auto on-change=runQuery()>\n\t\t\t\t</gf-form-switch>\n\n\t\t\t\t<div class=gf-form>\n\t\t\t\t\t<span class="gf-form-label width-9" ng-show=current.auto>\n\t\t\t\t\t\tStep count <tip>How many times should the current time range be divided to calculate the value</tip>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="gf-form-select-wrapper max-width-10" ng-show=current.auto>\n\t\t\t\t\t\t<select class=gf-form-input ng-model=current.auto_count ng-options="f for f in [1,2,3,4,5,10,20,30,40,50,100,200,300,400,500]" ng-change=runQuery()></select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=gf-form>\n\t\t\t\t\t<span class=gf-form-label ng-show=current.auto>\n\t\t\t\t\t\tMin interval <tip>The calculated value will not go below this threshold</tip>\n\t\t\t\t\t</span>\n\t\t\t\t\t<input type=text class="gf-form-input max-width-10" ng-show=current.auto ng-model=current.auto_min ng-change=runQuery() placeholder=10s>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="current.type === \'custom\'" class=gf-form-group>\n\t\t\t<h5 class=section-heading>Custom Options</h5>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-14">Values separated by comma</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=current.query ng-blur=runQuery() placeholder="1, 10, 20, myvalue, escaped\\,value" required>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="current.type === \'constant\'" class=gf-form-group>\n\t\t\t<h5 class=section-heading>Constant options</h5>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class=gf-form-label>Value</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=current.query ng-blur=runQuery() placeholder="your metric prefix">\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="current.type === \'textbox\'" class=gf-form-group>\n\t\t\t<h5 class=section-heading>Text options</h5>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class=gf-form-label>Default value</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=current.query ng-blur=runQuery() placeholder="default value, if any">\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="current.type === \'query\'" class=gf-form-group>\n\t\t\t<h5 class=section-heading>Query Options</h5>\n\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<div class="gf-form max-width-21">\n\t\t\t\t\t<span class="gf-form-label width-10">Data source</span>\n\t\t\t\t\t<div class="gf-form-select-wrapper max-width-14">\n\t\t\t\t\t\t<select class=gf-form-input ng-model=current.datasource ng-options="f.value as f.name for f in datasources" ng-change=datasourceChanged() required>\n\t\t\t\t\t\t\t<option value="" ng-if=false></option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="gf-form max-width-22">\n\t\t\t\t\t<span class="gf-form-label width-10">\n\t\t\t\t\t\tRefresh\n\t\t\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\t\t\tWhen to update the values of this variable.\n\t\t\t\t\t\t</info-popover>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="gf-form-select-wrapper width-15">\n\t\t\t\t\t\t<select class=gf-form-input ng-model=current.refresh ng-options="f.value as f.text for f in refreshOptions"></select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<rebuild-on-change property=currentDatasource>\n\t\t\t\t<variable-query-editor-loader>\n\t\t\t\t</variable-query-editor-loader>\n\t\t\t</rebuild-on-change>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-10">\n\t\t\t\t\tRegex\n\t\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\t\tOptional, if you want to extract part of a series name or metric node segment.\n\t\t\t\t\t</info-popover>\n\t\t\t\t</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=current.regex placeholder=/.*-(.*)-.*/ ng-model-onblur ng-change=runQuery()>\n\t\t\t</div>\n\t\t\t<div class="gf-form max-width-21">\n\t\t\t\t<span class="gf-form-label width-10">\n\t\t\t\t\tSort\n\t\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\t\tHow to sort the values of this variable.\n\t\t\t\t\t</info-popover>\n\t\t\t\t</span>\n\t\t\t\t<div class="gf-form-select-wrapper max-width-14">\n\t\t\t\t\t<select class=gf-form-input ng-model=current.sort ng-options="f.value as f.text for f in sortOptions" ng-change=runQuery()></select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-show="current.type === \'datasource\'" class=gf-form-group>\n\t\t\t<h5 class=section-heading>Data source options</h5>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-12">Type</label>\n\t\t\t\t<div class="gf-form-select-wrapper max-width-18">\n\t\t\t\t\t<select class=gf-form-input ng-model=current.query ng-options="f.value as f.text for f in datasourceTypes" ng-change=runQuery()></select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-12">\n\t\t\t\t\tInstance name filter\n\t\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\t\tRegex filter for which data source instances to choose from in\n\t\t\t\t\t\tthe variable value dropdown. Leave empty for all.\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\tExample: <code>/^prod/</code>\n\n\t\t\t\t\t</info-popover>\n\t\t\t\t</label>\n\t\t\t\t<input type=text class="gf-form-input max-width-18" ng-model=current.regex placeholder=/.*-(.*)-.*/ ng-model-onblur ng-change=runQuery()>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="current.type === \'adhoc\'" class=gf-form-group>\n\t\t\t<h5 class=section-heading>Options</h5>\n\t\t\t<div class="gf-form max-width-21">\n\t\t\t\t<span class="gf-form-label width-8">Data source</span>\n\t\t\t\t<div class="gf-form-select-wrapper max-width-14">\n\t\t\t\t\t<select class=gf-form-input ng-model=current.datasource ng-options="f.value as f.name for f in datasources" required ng-change=validate()>\n\t\t\t\t\t\t<option value="" ng-if=false></option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section gf-form-group" ng-show=variableTypes[current.type].supportsMulti>\n\t\t\t<h5 class=section-heading>Selection Options</h5>\n\t\t\t<div class=section>\n\t\t\t\t<gf-form-switch class=gf-form label=Multi-value label-class=width-10 tooltip="Enables multiple values to be selected at the same time" checked=current.multi on-change=runQuery()>\n\t\t\t\t</gf-form-switch>\n\t\t\t\t<gf-form-switch class=gf-form label="Include All option" label-class=width-10 checked=current.includeAll on-change=runQuery()>\n\t\t\t\t</gf-form-switch>\n\t\t\t</div>\n\t\t\t<div class=gf-form ng-if=current.includeAll>\n\t\t\t\t<span class="gf-form-label width-10">Custom all value</span>\n\t\t\t\t<input type=text class="gf-form-input max-width-15" ng-model=current.allValue placeholder="blank = auto">\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=gf-form-group ng-if="current.type === \'query\'">\n\t\t\t<h5>Value groups/tags (Experimental feature)</h5>\n\t\t\t<gf-form-switch class=gf-form label=Enabled label-class=width-10 checked=current.useTags on-change=runQuery()>\n\t\t\t</gf-form-switch>\n\t\t\t<div class="gf-form last" ng-if=current.useTags>\n\t\t\t\t<span class="gf-form-label width-10">Tags query</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=current.tagsQuery placeholder="metric name or tags query" ng-model-onblur>\n\t\t\t</div>\n\t\t\t<div class=gf-form ng-if=current.useTags>\n\t\t\t\t<li class="gf-form-label width-10">Tag values query</li>\n\t\t\t\t<input type=text class=gf-form-input ng-model=current.tagValuesQuery placeholder=apps.$tag.* ng-model-onblur>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=gf-form-group ng-show=current.options.length>\n\t\t\t<h5>Preview of values</h5>\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<div class=gf-form ng-repeat="option in current.options | limitTo: optionsLimit">\n\t\t\t\t\t<span class=gf-form-label>{{option.text}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=gf-form ng-if="current.options.length > optionsLimit">\n\t\t\t\t\t<a class="gf-form-label btn-secondary" ng-click=showMoreOptions()>Show more</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="alert alert-info gf-form-group" ng-if=infoText>\n\t\t\t{{infoText}}\n\t\t</div>\n\n\t\t<div class="gf-form-button-row p-y-0">\n\t\t\t<button type=submit class="btn btn-primary" ng-show="mode === \'edit\'" ng-click=update();>Update</button>\n\t\t\t<button type=submit class="btn btn-primary" ng-show="mode === \'new\'" ng-click=add();>Add</button>\n\t\t</div>\n\n\t</form>\n</div>')}]),e.exports=n},function(e,t){var n="public/app/partials/confirm_modal.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-body ng-cloak>\n\t<div class=modal-header>\n\t\t<h2 class=modal-header-title>\n\t\t\t<i class="fa {{icon}}"></i>\n\t\t\t<span class=p-l-1>\n\t\t\t\t{{title}}\n\t\t\t</span>\n\t\t</h2>\n\n\t\t<a class=modal-header-close ng-click=dismiss();>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n\t<div class="modal-content text-center">\n\n\t\t<div class=confirm-modal-text>\n\t\t\t{{text}}\n\t\t\t<div class=confirm-modal-text2 ng-show=text2>\n\t\t\t\t{{text2}}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=modal-content-confirm-text ng-if=confirmText>\n\t\t\t<input type=text class="gf-form-input width-16" style=display:inline-block placeholder="Type {{confirmText}} to confirm" ng-model=confirmInput ng-change=updateConfirmText(confirmInput)>\n\t\t</div>\n\n\t\t<div class=confirm-modal-buttons>\n\t\t\t<button ng-show=onAltAction type=button class="btn btn-primary" ng-click=dismiss();onAltAction();>{{altActionText}}</button>\n\t\t\t<button type=button class="btn btn-danger" ng-click=onConfirm();dismiss(); ng-disabled=!confirmTextValid give-focus=true>{{yesText}}</button>\n\t\t\t<button type=button class="btn btn-inverse" ng-click=dismiss()>{{noText}}</button>\n\t\t</div>\n\t</div>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/partials/edit_json.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-controller=JsonEditorCtrl>\n\t<div class=tabbed-view-header>\n\t\t<h2 class=tabbed-view-title>\n\t\t\tJSON\n\t\t</h2>\n\n\t\t<button class=tabbed-view-close-btn ng-click=dismiss()>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</button>\n\t</div>\n\n\t<div class=tabbed-view-body>\n\t\t<div class=gf-form>\n\t\t\t<code-editor content=json data-mode=json data-max-lines=20></code-editor>\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=button class="btn btn-primary" ng-show=canUpdate ng-click="update(); dismiss();">Update</button>\n\t\t\t<button class="btn btn-secondary" ng-if=canCopy clipboard-button=getContentForClipboard()>\n\t\t\t\t<i class="fa fa-clipboard"></i>&nbsp;Copy to Clipboard\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/partials/error.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n  <div class="panel-container error-container">\n    <div class="error-column graph-box">\n      <div class=error-row>\n        <div class="error-column error-space-between graph-percentage">\n          <p>100%</p>\n          <p>80%</p>\n          <p>60%</p>\n          <p>40%</p>\n          <p>20%</p>\n          <p>0%</p>\n        </div>\n        <div class="error-column image-box">\n          <img src=public/img/graph404.svg width=100%>\n          <div class="error-row error-space-between">\n            <p class=graph-text>Then</p>\n            <p class=graph-text>Now</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="error-column info-box">\n      <div class="error-row current-box">\n        <p class=current-text>current</p>\n      </div>\n      <div class=error-row style=flex:1>\n        <i class="fa fa-minus error-minus"></i>\n        <div class="error-column error-space-between error-full-width">\n          <div class="error-row error-space-between">\n            <p>Chances you are on the page you are looking for.</p>\n            <p class=left-margin>0%</p>\n          </div>\n          <div>\n            <h3>Sorry for the inconvenience</h3>\n            <p>Please go back to your\n            <a href={{appSubUrl}}/ class=error-link>home dashboard</a> and try again.</p>\n            <p>If the error persists, seek help on the\n            <a href=https://community.grafana.com target=_blank class=error-link>community site</a>.</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <span class=react-resizable-handle style=cursor:default></span>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/partials/login.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="login container">\n  <div class=login-content>\n    <div class=login-branding>\n      <img class=logo-icon src=public/img/grafana_icon.svg alt=Grafana />\n      <div class=logo-wordmark />\n    </div>\n    <div class=login-outer-box>\n      <div class=login-inner-box id=login-view>\n        <form name=loginForm class="login-form-group gf-form-group" ng-hide=disableLoginForm>\n          <div class=login-form>\n            <input type=text name=username class="gf-form-input login-form-input" required ng-model=formModel.user placeholder={{loginHint}} autofocus autofill-event-fix>\n          </div>\n          <div class=login-form>\n            <input type=password name=password class="gf-form-input login-form-input" required ng-model=formModel.password id=inputPassword placeholder=password>\n          </div>\n          <div class=login-button-group>\n            <button type=submit class="btn btn-large p-x-2" ng-if=!loggingIn ng-click=submit(); ng-class="{\'btn-inverse\': !loginForm.$valid, \'btn-primary\': loginForm.$valid}">\n              Log In\n            </button>\n            <button type=submit class="btn btn-large p-x-2 btn-inverse btn-loading" ng-if=loggingIn>\n              Logging In<span>.</span><span>.</span><span>.</span>\n            </button>\n            <div class="small login-button-forgot-password" ng-hide="ldapEnabled || authProxyEnabled">\n              <a href=user/password/send-reset-email>\n                Forgot your password?\n              </a>\n            </div>\n          </div>\n        </form>\n        <div class="text-center login-divider" ng-show=oauthEnabled>\n          <div>\n            <div class=login-divider-line>\n            </div>\n          </div>\n          <div>\n            <span class=login-divider-text>\n              <span ng-hide=disableLoginForm>or</span>\n            </span>\n          </div>\n          <div>\n            <div class=login-divider-line>\n            </div>\n          </div>\n        </div>\n        <div class=clearfix></div>\n        <div class="login-oauth text-center" ng-show=oauthEnabled>\n          <a class="btn btn-medium btn-service btn-service--google login-btn" href=login/google target=_self ng-if=oauth.google>\n            <i class="btn-service-icon fa fa-google"></i>\n            Sign in with Google\n          </a>\n          <a class="btn btn-medium btn-service btn-service--github login-btn" href=login/github target=_self ng-if=oauth.github>\n            <i class="btn-service-icon fa fa-github"></i>\n            Sign in with GitHub\n          </a>\n          <a class="btn btn-medium btn-service btn-service--gitlab login-btn" href=login/gitlab target=_self ng-if=oauth.gitlab>\n            <i class="btn-service-icon fa fa-gitlab"></i>\n            Sign in with GitLab\n          </a>\n          <a class="btn btn-medium btn-service btn-service--grafanacom login-btn" href=login/grafana_com target=_self ng-if=oauth.grafana_com>\n            <i class=btn-service-icon></i>\n            Sign in with Grafana.com\n          </a>\n          <a class="btn btn-medium btn-service btn-service--oauth login-btn" href=login/generic_oauth target=_self ng-if=oauth.generic_oauth>\n            <i class="btn-service-icon fa fa-sign-in"></i>\n            Sign in with {{oauth.generic_oauth.name}}\n          </a>\n        </div>\n        <div class=login-signup-box ng-show=!disableUserSignUp>\n          <div class="login-signup-title p-r-1">\n            New to Grafana?\n          </div>\n          <a href=signup class="btn btn-medium btn-signup btn-p-x-2">\n            Sign Up\n          </a>\n        </div>\n      </div>\n      <div class="login-inner-box remove hidden" id=change-password-view>\n        <div class="text-left login-change-password-info">\n          <h5>Change Password</h5>\n          Before you can get started with awesome dashboards we need you to make your account more secure by changing your password.\n          <br/>You can change your password again later.\n        </div>\n        <form class="login-form-group gf-form-group">\n          <div class=login-form>\n            <input type=password id=newPassword name=newPassword class="gf-form-input login-form-input" required ng-model=command.newPassword placeholder="New password">\n          </div>\n          <div class=login-form>\n            <input type=password name=confirmNew class="gf-form-input login-form-input" required ng-model=command.confirmNew placeholder="Confirm new password">\n          </div>\n          <div class="login-button-group login-button-group--right text-right">\n            <a class="btn btn-link" ng-click=skip();>\n              Skip\n              <info-popover mode=no-padding>\n                If you skip you will be prompted to change password next time you login.\n              </info-popover>\n            </a>\n            <button type=submit class="btn btn-large p-x-2" ng-click=changePassword(); ng-class="{\'btn-inverse\': !loginForm.$valid, \'btn-primary\': loginForm.$valid}">\n              Save\n            </button>\n          </div>\n        </form>\n      </div>\n      <div class=clearfix></div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/partials/modal.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=modal-header>\n  <button type=button class=close data-dismiss=modal aria-hidden=true>×</button>\n  <h3>{{modal.title}}</h3>\n</div>\n<div class=modal-body>\n\n  <div ng-bind-html=modal.body></div>\n\n</div>\n<div class=modal-footer>\n  <button type=button class="btn btn-danger" ng-click=dismiss()>Close</button>\n</div>')}]),e.exports=n},function(e,t){var n="public/app/partials/reset_password.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n\t<div class=signup>\n\t\t<h3 class=p-b-1>Reset password</h3>\n\n\t\t<div ng-if="ldapEnabled || authProxyEnabled">\n\t\t\tYou cannot reset password when LDAP or Auth Proxy authentication is enabled.\n\t\t</div>\n\t\t<div ng-if=disableLoginForm>\n\t\t\tYou cannot reset password when login form is disabled.\n\t\t</div>\n\t\t<form name=sendResetForm class="login-form gf-form-group" ng-show="mode === \'send\'" ng-hide="ldapEnabled || authProxyEnabled || disableLoginForm">\n\t\t\t<div class=gf-form>\n\t\t\t\t\t<span class="gf-form-label width-7">User</span>\n\t\t\t\t\t<input type=text name=username class="gf-form-input max-width-14" required ng-model=formModel.userOrEmail placeholder="email or username">\n\t\t\t</div>\n\t\t\t<div class=gf-form-button-row>\n\t\t\t\t<button type=submit class="btn btn-primary" ng-click=sendResetEmail(); ng-disabled=!sendResetForm.$valid>\n\t\t\t\t\tReset Password\n\t\t\t\t</button>\n\t\t\t\t<a href=login class="btn btn-inverse">\n\t\t\t\t\tBack\n\t\t\t\t</a>\n\n\t\t\t</div>\n\t\t</form>\n\t\t<div ng-show="mode === \'email-sent\'">\n\t\t\tAn email with a reset link has been sent to the email address. <br>\n\t\t\tYou should receive it shortly.\n\t\t\t<div class=p-t-1>\n\t\t\t\t<a href=login class="btn btn-primary p-t-1">\n\t\t\t\t\tLogin\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t\t<form name=resetForm class="login-form gf-form-group" ng-show="mode === \'reset\'">\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-9">New Password</span>\n\t\t\t\t<input type=password name=NewPassword class="gf-form-input max-width-14" required ng-minlength=4 ng-model=formModel.newPassword placeholder=password watch-change="formModel.newPassword = inputValue;">\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-9">Confirm Password</span>\n\t\t\t\t<input type=password name=ConfirmPassword class="gf-form-input max-width-14" required ng-minlength=4 ng-model=formModel.confirmPassword placeholder="confirm password">\n\t\t\t</div>\n\t\t\t<div class=signup__password-strength>\n\t\t\t\t<password-strength password=formModel.newPassword></password-strength>\n\t\t\t</div>\n\t\t\t<div class=gf-form-button-row>\n\t\t\t\t<button type=submit class="btn btn-primary" ng-click=submitReset(); ng-disabled=!resetForm.$valid>\n\t\t\t\t\tReset Password\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/partials/signup_invited.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n\t<h3 class=page-sub-heading>Hello {{greeting}}.</h3>\n\n\t<div class="modal-tagline p-b-2">\n\t\t<em>{{invitedBy}}</em> has invited you to join Grafana and the organization <span class=highlight-word>{{contextSrv.user.orgName}}</span><br>Please complete the following to accept your invitation and continue:\n\t</div>\n\n\t<form name=inviteForm class="login-form gf-form-group">\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-7">Email</span>\n\t\t\t<input type=email name=email class="gf-form-input max-width-21" required ng-model=formModel.email placeholder=Email>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-7">Name</span>\n\t\t\t<input type=text name=name class="gf-form-input max-width-21" ng-model=formModel.name placeholder="Name (optional)">\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-7">Username</span>\n\t\t\t<input type=text name=username class="gf-form-input max-width-21" required ng-model=formModel.username placeholder=Username>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-7">Password</span>\n\t\t\t<input type=password name=password class="gf-form-input max-width-21" required ng-model=formModel.password id=inputPassword placeholder=password>\n\t\t</div>\n\n\t\t<div style=margin-left:7.5rem;width:254px>\n\t\t\t<password-strength password=formModel.password></password-strength>\n\t\t</div>\n\n\t\t<div class=gf-form-button-row>\n\t\t\t<button type=submit class="btn btn-primary" ng-click=submit(); ng-disable=!inviteForm.$valid>\n\t\t\t\tSign Up\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</div>\n\n\n')}]),e.exports=n},function(e,t){var n="public/app/partials/signup_step2.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<page-header model=navModel></page-header>\n\n<div class="page-container page-body">\n  <div class=signup>\n    <h3 class=p-b-1>You\'re almost there.</h3>\n    <div class=p-b-1>\n      We just need a couple of more bits of<br> information to finish creating your account.\n    </div>\n    <form name=signUpForm class="login-form gf-form-group">\n      <div class=gf-form ng-if=verifyEmailEnabled>\n        <span class="gf-form-label width-9">\n          Email code<tip>Email verification code (sent to your email)</tip>\n        </span>\n        <input type=text class="gf-form-input max-width-14" ng-model=formModel.code required>\n      </div>\n\n      <div class=gf-form ng-if=!autoAssignOrg>\n        <span class="gf-form-label width-9">Org. name</span>\n        <input type=text name=orgName class="gf-form-input max-width-14" ng-model=formModel.orgName placeholder="Name your organization">\n      </div>\n\n      <div class=gf-form>\n        <span class="gf-form-label width-9">Your name</span>\n        <input type=text name=name class="gf-form-input max-width-14" ng-model=formModel.name placeholder=(optional)>\n      </div>\n      <div class=gf-form>\n        <span class="gf-form-label width-9">Email</span>\n        <input type=text class="gf-form-input max-width-14" required ng-model=formModel.username placeholder=Email autocomplete=off>\n      </div>\n      <div class=gf-form>\n        <span class="gf-form-label width-9">Password</span>\n        <input type=password class="gf-form-input max-width-14" required ng-model=formModel.password id=inputPassword placeholder=password autocomplete=off>\n      </div>\n\n      <div class=signup__password-strength>\n        <password-strength password=formModel.password></password-strength>\n      </div>\n\n      <div class="gf-form-button-row p-t-3">\n        <button type=submit class="btn btn-primary" ng-click=ctrl.submit(); ng-disabled=!signUpForm.$valid>\n          Sign Up\n        </button>\n        <a href=login class="btn btn-inverse">\n            Back\n        </a>\n      </div>\n    </form>\n  </div>\n</div>')}]),e.exports=n},function(e,t){var n="public/app/partials/valueSelectDropdown.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=variable-link-wrapper>\n\t<a ng-click=vm.show() class=variable-value-link>\n\t\t{{vm.linkText}}\n\t\t<span ng-repeat="tag in vm.selectedTags" bs-tooltip=tag.valuesText data-placement=bottom>\n\t\t\t<span class=label-tag tag-color-from-name=tag.text>\n\t\t\t\t&nbsp;&nbsp;<i class="fa fa-tag"></i>&nbsp;\n\t\t\t\t{{tag.text}}\n\t\t\t</span>\n\t\t</span>\n\t\t<i class="fa fa-caret-down" style=font-size:12px></i>\n\t</a>\n\n\t<input type=text class=gf-form-input style=display:none ng-keydown=vm.keyDown($event) ng-model=vm.search.query ng-change=vm.queryChanged()>\n\n\t<div class=variable-value-dropdown ng-if=vm.dropdownVisible ng-class="{\'multi\': vm.variable.multi, \'single\': !vm.variable.multi}">\n\t\t<div class=variable-options-wrapper>\n\t\t\t<div class=variable-options-column>\n\t\t\t\t<a class=variable-options-column-header ng-if=vm.variable.multi ng-class="{\'many-selected\': vm.selectedValues.length > 1}" bs-tooltip="\'Clear selections\'" data-placement=top ng-click=vm.clearSelections()>\n\t\t\t\t\t<span class=variable-option-icon></span>\n\t\t\t\t\tSelected ({{vm.selectedValues.length}})\n\t\t\t\t</a>\n\t\t\t\t<a class="variable-option pointer" ng-repeat="option in vm.search.options" ng-class="{\'selected\': option.selected, \'highlighted\': $index === vm.highlightIndex}" ng-click="vm.selectValue(option, $event)">\n\t\t\t\t\t<span class=variable-option-icon></span>\n\t\t\t\t\t<span>{{option.text}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class=variable-options-column ng-if=vm.tags.length>\n\t\t\t\t<div class="variable-options-column-header text-center">\n\t\t\t\t\tTags\n\t\t\t\t</div>\n\t\t\t\t<a class="variable-option-tag pointer" ng-repeat="tag in vm.tags" ng-click="vm.selectTag(tag, $event)" ng-class="{\'selected\': tag.selected}">\n\t\t\t\t\t<span class="fa fa-fw variable-option-icon"></span>\n\t\t\t\t\t<span class=label-tag tag-color-from-name=tag.text>{{tag.text}}&nbsp;&nbsp;<i class="fa fa-tag"></i>&nbsp;</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/cloudwatch/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<cloudwatch-query-parameter target=ctrl.annotation datasource=ctrl.datasource></cloudwatch-query-parameter>\n\n<div class=editor-row style="padding:2rem 0">\n\t<div class=section>\n\t\t<h5>Prefix matching</h5>\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-switch class=gf-form label=Enable checked=ctrl.annotation.prefixMatching switch-class=max-width-6></gf-form-switch>\n\t\t\t<div class=gf-form ng-if=ctrl.annotation.prefixMatching>\n\t\t\t\t<span class=gf-form-label>Action</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=ctrl.annotation.actionPrefix>\n\t\t\t</div>\n\t\t\t<div class=gf-form ng-if=ctrl.annotation.prefixMatching>\n\t\t\t\t<span class=gf-form-label>Alarm Name</span>\n\t\t\t\t<input type=text class=gf-form-input ng-model=ctrl.annotation.alarmNamePrefix>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/cloudwatch/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<h3 class=page-heading>CloudWatch details</h3>\n\n<div class="gf-form-group max-width-30">\n  <div class="gf-form gf-form-select-wrapper">\n    <label class="gf-form-label width-13">Auth Provider</label>\n    <select class="gf-form-input gf-max-width-13" ng-model=ctrl.current.jsonData.authType ng-options="f.value as f.name for f in ctrl.authTypes"></select>\n  </div>\n\n  <div class=gf-form ng-show=\'ctrl.current.jsonData.authType == "credentials"\'>\n    <label class="gf-form-label width-13">Credentials profile name</label>\n    <input type=text class="gf-form-input max-width-18" ng-model=ctrl.current.database placeholder=default>\n    <info-popover mode=right-absolute>\n      Credentials profile name, as specified in ~/.aws/credentials, leave blank for default\n    </info-popover>\n  </div>\n\n  <div class=gf-form ng-show=\'ctrl.current.jsonData.authType == "keys"\'>\n    <label class="gf-form-label width-13">Access key ID </label>\n    <label class="gf-form-label width-13" ng-show=ctrl.accessKeyExist>Configured</label>\n    <a class="btn btn-secondary gf-form-btn" type=submit ng-click=ctrl.resetAccessKey() ng-show=ctrl.accessKeyExist>Reset</a>\n    <input type=text class="gf-form-input max-width-18" ng-hide=ctrl.accessKeyExist ng-model=ctrl.current.secureJsonData.accessKey>\n  </div>\n\n  <div class=gf-form ng-show=\'ctrl.current.jsonData.authType == "keys"\'>\n    <label class="gf-form-label width-13">Secret access key</label>\n    <label class="gf-form-label width-13" ng-show=ctrl.secretKeyExist>Configured</label>\n    <a class="btn btn-secondary gf-form-btn" type=submit ng-click=ctrl.resetSecretKey() ng-show=ctrl.secretKeyExist>Reset</a>\n    <input type=text class="gf-form-input max-width-18" ng-hide=ctrl.secretKeyExist ng-model=ctrl.current.secureJsonData.secretKey>\n  </div>\n\n  <div class=gf-form ng-show=\'ctrl.current.jsonData.authType == "arn"\'>\n    <label class="gf-form-label width-13">Assume Role ARN</label>\n    <input type=text class="gf-form-input max-width-18" ng-model=ctrl.current.jsonData.assumeRoleArn placeholder=arn:aws:iam:*>\n    <info-popover mode=right-absolute>\n      ARN of Assume Role\n    </info-popover>\n  </div>\n\n  <div class=gf-form>\n    <label class="gf-form-label width-13">Default Region</label>\n    <div class="gf-form-select-wrapper max-width-18 gf-form-select-wrapper--has-help-icon">\n      <select class=gf-form-input ng-model=ctrl.current.jsonData.defaultRegion ng-options="region for region in ctrl.regions"></select>\n      <info-popover mode=right-absolute>\n        Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region.\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form>\n    <label class="gf-form-label width-13">Custom Metrics</label>\n    <input type=text class="gf-form-input max-width-18" ng-model=ctrl.current.jsonData.customMetricsNamespaces placeholder=Namespace1,Namespace2>\n    <info-popover mode=right-absolute>\n      Namespaces of Custom Metrics\n    </info-popover>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/cloudwatch/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<query-editor-row query-ctrl=ctrl can-collapse=false>\n\t<cloudwatch-query-parameter target=ctrl.target datasource=ctrl.datasource on-change=ctrl.refresh()></cloudwatch-query-parameter>\n</query-editor-row>\n\n")}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/cloudwatch/partials/query.parameter.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-inline ng-if="target.expression.length === 0">\n\t<div class=gf-form>\n\t\t<label class="gf-form-label query-keyword width-8">Metric</label>\n\n\t\t<metric-segment segment=regionSegment get-options=getRegions() on-change=regionChanged()></metric-segment>\n\t\t<metric-segment segment=namespaceSegment get-options=getNamespaces() on-change=namespaceChanged()></metric-segment>\n\t\t<metric-segment segment=metricSegment get-options=getMetrics() on-change=metricChanged()></metric-segment>\n\t</div>\n\n\t<div class=gf-form>\n\t\t<label class="gf-form-label query-keyword">Stats</label>\n\t</div>\n\n\t<div class=gf-form ng-repeat="segment in statSegments">\n\t\t<metric-segment segment=segment get-options="getStatSegments(segment, $index)" on-change="statSegmentChanged(segment, $index)"></metric-segment>\n\t</div>\n\n\t<div class="gf-form gf-form--grow">\n\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t</div>\n</div>\n\n<div class=gf-form-inline ng-if="target.expression.length === 0">\n\t<div class=gf-form>\n\t\t<label class="gf-form-label query-keyword width-8">Dimensions</label>\n\t\t<metric-segment ng-repeat="segment in dimSegments" segment=segment get-options="getDimSegments(segment, $index)" on-change="dimSegmentChanged(segment, $index)"></metric-segment>\n\t</div>\n\n\t<div class="gf-form gf-form--grow">\n\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t</div>\n</div>\n\n<div class=gf-form-inline ng-if="target.statistics.length === 1">\n\t<div class=gf-form>\n\t\t<label class="gf-form-label query-keyword width-8">\n\t\t\tId\n\t\t\t<info-popover mode="right-normal ">Id can include numbers, letters, and underscore, and must start with a lowercase letter.</info-popover>\n\t\t</label>\n\t\t<input type="text " class=gf-form-input ng-model="target.id " spellcheck=false ng-pattern=/^[a-z][a-zA-Z0-9_]*$/ ng-model-onblur ng-change="onChange() ">\n\t</div>\n\t<div class="gf-form max-width-30">\n\t\t<label class="gf-form-label query-keyword width-7">Expression</label>\n\t\t<input type="text " class=gf-form-input ng-model="target.expression\n\t " spellcheck=false ng-model-onblur ng-change="onChange() ">\n\t</div>\n</div>\n\n<div class=gf-form-inline>\n\t<div class=gf-form>\n\t\t<label class="gf-form-label query-keyword width-8">\n\t\t\tMin period\n\t\t\t<info-popover mode="right-normal ">Minimum interval between points in seconds</info-popover>\n\t\t</label>\n\t\t<input type="text " class=gf-form-input ng-model="target.period " spellcheck=false placeholder="auto\n\t " ng-model-onblur ng-change="onChange() "/>\n\t</div>\n\t<div class="gf-form max-width-30">\n\t\t<label class="gf-form-label query-keyword width-7">Alias</label>\n\t\t<input type="text " class=gf-form-input ng-model="target.alias " spellcheck=false ng-model-onblur ng-change="onChange() ">\n\t\t<info-popover mode="right-absolute ">\n\t\t\tAlias replacement variables:\n\t\t\t<ul ng-non-bindable>\n\t\t\t\t<li>{{metric}}</li>\n\t\t\t\t<li>{{stat}}</li>\n\t\t\t\t<li>{{namespace}}</li>\n\t\t\t\t<li>{{region}}</li>\n\t\t\t\t<li>{{period}}</li>\n\t\t\t\t<li>{{YOUR_DIMENSION_NAME}}</li>\n\t\t\t</ul>\n\t\t</info-popover>\n\t</div>\n\t<div class=gf-form>\n\t\t<gf-form-switch class=gf-form label="HighRes " label-class="width-5 " checked="target.highResolution " on-change="onChange() ">\n\t\t</gf-form-switch>\n\t</div>\n\n\t<div class="gf-form gf-form--grow">\n\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/elasticsearch/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n\t<div class=gf-form ng-if=ctrl.annotation.index>\n\t\t<span class="gf-form-label width-14">Index name</span>\n\t\t<input type=text class="gf-form-input max-width-20" ng-model=ctrl.annotation.index placeholder=events-*>\n\t</div>\n\t<div class=gf-form-group>\n\t\t<div class=gf-form>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.annotation.query placeholder="Elasticsearch lucene query">\n\t\t</div>\n\t</div>\n</div>\n\n<div class=gf-form-group>\n\t<h6>Field mappings</h6>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>Time</span>\n\t\t\t<input type=text class="gf-form-input max-width-14" ng-model=ctrl.annotation.timeField placeholder=@timestamp>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>Text</span>\n\t\t\t<input type=text class="gf-form-input max-width-14" ng-model=ctrl.annotation.textField placeholder="">\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>Tags</span>\n\t\t\t<input type=text class="gf-form-input max-width-10" ng-model=ctrl.annotation.tagsField placeholder=tags>\n\t\t</div>\n\t\t<div class=gf-form ng-show=ctrl.annotation.titleField>\n\t\t\t<span class=gf-form-label>Title <em class=muted>(deprecated)</em></span>\n\t\t\t<input type=text class="gf-form-input max-width-16" ng-model=ctrl.annotation.titleField placeholder=desc>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/elasticsearch/partials/bucket_agg.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-inline>\n\t<div class=gf-form>\n\t\t<label class="gf-form-label query-keyword width-7">\n\t\t\t<span ng-show=isFirst>Group by</span>\n\t\t\t<span ng-hide=isFirst>Then by</span>\n\t\t</label>\n\n\t\t<gf-form-dropdown model=agg.type lookup-text=true get-options=getBucketAggTypes() on-change=onTypeChanged() allow-custom=false label-mode=true css-class=width-10>\n\t\t</gf-form-dropdown>\n\t\t<gf-form-dropdown ng-if=agg.field model=agg.field get-options=getFieldsInternal() on-change=onChange() allow-custom=false label-mode=true css-class=width-12>\n\t\t</gf-form-dropdown>\n\t</div>\n\n\t<div class="gf-form gf-form--grow">\n\t\t<label class="gf-form-label gf-form-label--grow">\n\t\t\t<a ng-click=toggleOptions()>\n\t\t\t\t<i class="fa fa-caret-down" ng-show=showOptions></i>\n\t\t\t\t<i class="fa fa-caret-right" ng-hide=showOptions></i>\n\t\t\t\t{{settingsLinkText}}\n\t\t\t</a>\n\t\t</label>\n\t</div>\n\n\t<div class=gf-form>\n\t\t<label class=gf-form-label ng-if=isFirst>\n\t\t\t<a class=pointer ng-click=addBucketAgg()><i class="fa fa-plus"></i></a>\n\t\t</label>\n\t\t<label class=gf-form-label ng-if="bucketAggCount > 1">\n\t\t\t<a class=pointer ng-click=removeBucketAgg()><i class="fa fa-minus"></i></a>\n\t\t</label>\n\t</div>\n</div>\n\n<div class=gf-form-group ng-if=showOptions>\n\t<div ng-if="agg.type === \'date_histogram\'">\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Interval</label>\n\t\t\t<gf-form-dropdown model=agg.settings.interval get-options=getIntervalOptions() on-change=onChangeInternal() allow-custom=true label-mode=true css-class=width-12>\n\t\t\t</gf-form-dropdown>\n\t\t</div>\n\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Min Doc Count</label>\n\t\t\t<input type=number class="gf-form-input max-width-12" ng-model=agg.settings.min_doc_count ng-blur=onChangeInternal()>\n\t\t</div>\n\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">\n\t\t\t\tTrim edges\n\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\tTrim the edges on the timeseries datapoints\n\t\t\t\t</info-popover>\n\t\t\t</label>\n\t\t\t<input class="gf-form-input max-width-12" type=number ng-model=agg.settings.trimEdges ng-change=onChangeInternal()>\n\t\t</div>\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">\n\t\t\t\tOffset\n\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\tChange the start value of each bucket by the specified positive (+) or negative offset (-) duration, such as 1h for an hour, or 1d for a day\n\t\t\t\t</info-popover>\n\t\t\t</label>\n\t\t\t<input class="gf-form-input max-width-12" type=text ng-model=agg.settings.offset ng-change=onChangeInternal()>\n\t\t</div>\n\n\t</div>\n\n\t<div ng-if="agg.type === \'histogram\'">\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Interval</label>\n\t\t\t<input type=number class="gf-form-input max-width-12" ng-model=agg.settings.interval ng-blur=onChangeInternal()>\n\t\t</div>\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Min Doc Count</label>\n\t\t\t<input type=number class="gf-form-input max-width-12" ng-model=agg.settings.min_doc_count ng-blur=onChangeInternal()>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="agg.type === \'terms\'">\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Order</label>\n\t\t\t<gf-form-dropdown model=agg.settings.order lookup-text=true get-options=getOrderOptions() on-change=onChangeInternal() label-mode=true css-class=width-12>\n\t\t\t</gf-form-dropdown>\n\t\t</div>\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Size</label>\n\t\t\t<gf-form-dropdown model=agg.settings.size lookup-text=true get-options=getSizeOptions() on-change=onChangeInternal() label-mode=true allow-custom=true css-class=width-12>\n\t\t\t</gf-form-dropdown>\n\t\t</div>\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Min Doc Count</label>\n\t\t\t<input type=number class="gf-form-input max-width-12" ng-model=agg.settings.min_doc_count ng-blur=onChangeInternal()>\n\t\t</div>\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Order By</label>\n\t\t\t<gf-form-dropdown model=agg.settings.orderBy lookup-text=true get-options=getOrderByOptions() on-change=onChangeInternal() label-mode=true css-class=width-12>\n\t\t\t</gf-form-dropdown>\n\t\t</div>\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">\n\t\t\t\tMissing\n\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\tThe missing parameter defines how documents that are missing a value should be treated. By default they will be ignored but it is also possible to treat them as if they had a value\n\t\t\t\t</info-popover>\n\t\t\t</label>\n\t\t\t<input type=text class="gf-form-input max-width-12" empty-to-null ng-model=agg.settings.missing ng-blur=onChangeInternal() spellcheck=false>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="agg.type === \'filters\'">\n\t\t<div class="gf-form-inline offset-width-7" ng-repeat="filter in agg.settings.filters">\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-10">Query {{$index + 1}}</label>\n\t\t\t\t<input type=text class="gf-form-input max-width-12" ng-model=filter.query spellcheck=false placeholder="Lucene query" ng-blur=onChangeInternal()>\n\t\t\t\t<label class="gf-form-label width-10">Label {{$index + 1}}</label>\n\t\t\t\t<input type=text class="gf-form-input max-width-12" ng-model=filter.label spellcheck=false placeholder=Label ng-blur=onChangeInternal()>\n\t\t\t</div>\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class=gf-form-label ng-if=$first>\n\t\t\t\t\t<a class=pointer ng-click=addFiltersQuery()><i class="fa fa-plus"></i></a>\n\t\t\t\t</label>\n\t\t\t\t<label class=gf-form-label ng-if=!$first>\n\t\t\t\t\t<a class=pointer ng-click=removeFiltersQuery(filter)><i class="fa fa-minus"></i></a>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="agg.type === \'geohash_grid\'">\n\t\t<div class="gf-form offset-width-7">\n\t\t\t<label class="gf-form-label width-10">Precision</label>\n\t\t\t<input type=number class="gf-form-input max-width-12" ng-model=agg.settings.precision spellcheck=false placeholder=3 ng-blur=onChangeInternal()>\n\t\t</div>\n\t</div>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/elasticsearch/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<datasource-http-settings current=ctrl.current suggest-url=http://localhost:9200>\n</datasource-http-settings>\n\n<h3 class=page-heading>Elasticsearch details</h3>\n\n<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-25">\n\t\t\t<span class="gf-form-label width-9">Index name</span>\n\t\t\t<input class=gf-form-input type=text ng-model=ctrl.current.database placeholder="" required>\n\t\t</div>\n\n\t\t<div class="gf-form width-14">\n      <span class="gf-form-label width-9">Pattern</span>\n      <span class=gf-form-select-wrapper>\n          <select class="gf-form-input gf-size-auto" ng-model=ctrl.current.jsonData.interval ng-options="f.value as f.name for f in ctrl.indexPatternTypes" ng-change=ctrl.indexPatternTypeChanged()></select>\n      </span>\n\t\t</div>\n\t</div>\n\n\t<div class="gf-form max-width-25">\n\t\t<span class="gf-form-label width-9">Time field name</span>\n\t\t<input class=gf-form-input type=text ng-model=ctrl.current.jsonData.timeField placeholder="" required ng-init="">\n\t</div>\n\n\t<div class=gf-form>\n    <span class="gf-form-label width-9">Version</span>\n    <span class=gf-form-select-wrapper>\n        <select class="gf-form-input gf-size-auto" ng-model=ctrl.current.jsonData.esVersion ng-options="f.value as f.name for f in ctrl.esVersions"></select>\n    </span>\n\t</div>\n    <div class="gf-form max-width-30" ng-if="ctrl.current.jsonData.esVersion>=56">\n        <span class="gf-form-label width-15">Max concurrent Shard Requests</span>\n        <input class=gf-form-input type=text ng-model=ctrl.current.jsonData.maxConcurrentShardRequests placeholder="" required>\n    </div>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-9">Min time interval</span>\n\t\t\t<input type=text class="gf-form-input width-6" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=10s>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\n\t\t\t\tfor example <code>1m</code> if your data is written every minute.\n\t\t\t</info-popover>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/elasticsearch/partials/metric_agg.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-inline ng-class="{\'gf-form-disabled\': agg.hide}">\n\t<div class=gf-form>\n\t\t<label class="gf-form-label query-keyword width-7">\n\t\t\tMetric\n\t\t\t&nbsp;\n\t\t\t<a ng-click=toggleShowMetric() bs-tooltip="\'Click to toggle show / hide metric\'">\n\t\t\t\t<i class="fa fa-eye" ng-hide=agg.hide></i>\n\t\t\t\t<i class="fa fa-eye-slash" ng-show=agg.hide></i>\n\t\t\t</a>\n\t\t</label>\n\t</div>\n\n\t<div class=gf-form>\n\t\t<metric-segment-model property=agg.type options=metricAggTypes on-change=onTypeChange() custom=false css-class=width-10></metric-segment-model>\n\t\t<metric-segment-model ng-if=aggDef.requiresField property=agg.field get-options=getFieldsInternal() on-change=onChange() css-class=width-12></metric-segment-model>\n\t\t<metric-segment-model ng-if="aggDef.isPipelineAgg && !aggDef.supportsMultipleBucketPaths" property=agg.pipelineAgg options=pipelineAggOptions on-change=onChangeInternal() custom=false css-class=width-12></metric-segment-model>\n\t</div>\n\n  <div class="gf-form gf-form--grow" ng-if="aggDef.isPipelineAgg && aggDef.supportsMultipleBucketPaths">\n\t\t<label class="gf-form-label gf-form-label--grow">\n\t\t\t<a ng-click=toggleVariables()>\n\t\t\t\t<i class="fa fa-caret-down" ng-show=showVariables></i>\n\t\t\t\t<i class="fa fa-caret-right" ng-hide=showVariables></i>\n        {{variablesLinkText}}\n\t\t\t</a>\n\t\t</label>\n\t</div>\n\n\t<div class="gf-form gf-form--grow">\n\t\t<label class="gf-form-label gf-form-label--grow">\n\t\t\t<a ng-click=toggleOptions() ng-if=settingsLinkText>\n\t\t\t\t<i class="fa fa-caret-down" ng-show=showOptions></i>\n\t\t\t\t<i class="fa fa-caret-right" ng-hide=showOptions></i>\n\t\t\t\t\t{{settingsLinkText}}\n\t\t\t</a>\n\t\t</label>\n\t</div>\n\n\t<div class=gf-form>\n\t\t<label class=gf-form-label ng-if=isFirst>\n\t\t\t<a class=pointer ng-click=addMetricAgg()><i class="fa fa-plus"></i></a>\n\t\t</label>\n\t\t<label class=gf-form-label ng-if=!isSingle>\n\t\t\t<a class=pointer ng-click=removeMetricAgg()><i class="fa fa-minus"></i></a>\n\t\t</label>\n\t</div>\n</div>\n\n<div class=gf-form-group ng-if=showVariables>\n\t<elastic-pipeline-variables variables=agg.pipelineVariables options=pipelineAggOptions on-change=onChangeInternal() />\n  <div class="gf-form offset-width-7">\n    <label class="gf-form-label width-10">\n      Script\n      <info-popover mode=right-normal>\n        Elasticsearch v5.0 and above: Scripting language is Painless. Use <i>params.&lt;var&gt;</i> to reference a variable.<br/><br/>\n        Elasticsearch pre-v5.0: Scripting language is per default Groovy if not changed. For Groovy use <i>&lt;var&gt;</i> to reference a variable.\n      </info-popover>\n    </label>\n    <input type=text class="gf-form-input max-width-24" empty-to-null ng-model=agg.settings.script ng-blur=onChangeInternal() spellcheck=false placeholder="params.var1 / params.var2">\n  </div>\n</div>\n\n<div class=gf-form-group ng-if=showOptions>\n\t<div class="gf-form offset-width-7" ng-if="agg.type === \'derivative\'">\n\t\t<label class="gf-form-label width-10">Unit</label>\n\t\t<input type=text class="gf-form-input max-width-12" ng-model=agg.settings.unit ng-blur=onChangeInternal() spellcheck=false>\n\t</div>\n\n  <div ng-if="agg.type === \'moving_avg\'">\n    <div class="gf-form offset-width-7">\n      <label class="gf-form-label width-10">Model</label>\n      <metric-segment-model property=agg.settings.model options=movingAvgModelTypes on-change=onChangeClearInternal() custom=false css-class=width-12></metric-segment-model>\n    </div>\n\n    <div class="gf-form offset-width-7">\n      <label class="gf-form-label width-10">Window</label>\n      <input type=number class="gf-form-input max-width-12" ng-model=agg.settings.window ng-blur=onChangeInternal() spellcheck=false>\n    </div>\n\n    <div class="gf-form offset-width-7">\n      <label class="gf-form-label width-10">Predict</label>\n      <input type=number class="gf-form-input max-width-12" ng-model=agg.settings.predict ng-blur=onChangeInternal() spellcheck=false>\n    </div>\n\n\n    <div class="gf-form offset-width-7" ng-repeat="setting in modelSettings">\n      <label class="gf-form-label width-10">{{setting.text}}</label>\n      <input type=number class="gf-form-input max-width-12" ng-model=agg.settings.settings[setting.value] ng-blur=onChangeInternal() spellcheck=false>\n    </div>\n\n    <gf-form-switch ng-if="agg.settings.model == \'holt_winters\'" class="gf-form offset-width-7" label=Pad label-class=width-10 checked=agg.settings.settings.pad on-change=onChangeInternal()></gf-form-switch>\n    <gf-form-switch ng-if="agg.settings.model.match(\'ewma|holt_winters|holt\') !== null" class="gf-form offset-width-7" label=Minimize label-class=width-10 checked=agg.settings.minimize on-change=onChangeInternal()></gf-form-switch>\n  </div>\n\n  <div class="gf-form offset-width-7" ng-if="agg.type === \'percentiles\'">\n    <label class="gf-form-label width-10">Percentiles</label>\n    <input type=text class="gf-form-input max-width-12" ng-model=agg.settings.percents array-join ng-blur=onChange()>\n  </div>\n  <div class="gf-form offset-width-7" ng-if="agg.type === \'raw_document\'">\n    <label class="gf-form-label width-10">Size</label>\n    <input type=number class="gf-form-input max-width-12" ng-model=agg.settings.size ng-blur=onChange()>\n  </div>\n\n\n  <div class="gf-form offset-width-7" ng-if="agg.type === \'cardinality\'">\n    <label class="gf-form-label width-10">Precision threshold</label>\n    <input type=number class="gf-form-input max-width-12" ng-model=agg.settings.precision_threshold ng-blur=onChange()>\n  </div>\n\n  <div ng-if="agg.type === \'extended_stats\'">\n    <gf-form-switch ng-repeat="stat in extendedStats" class="gf-form offset-width-7" label={{stat.text}} label-class=width-10 checked=agg.meta[stat.value] on-change=onChangeInternal()></gf-form-switch>\n\n    <div class="gf-form offset-width-7">\n      <label class="gf-form-label width-10">Sigma</label>\n      <input type=number class="gf-form-input max-width-12" placeholder=3 ng-model=agg.settings.sigma ng-blur=onChange()>\n    </div>\n  </div>\n\n  <div class="gf-form offset-width-7" ng-if=aggDef.supportsInlineScript>\n    <label class="gf-form-label width-10">Script</label>\n    <input type=text class="gf-form-input max-width-12" empty-to-null ng-model=agg.inlineScript ng-blur=onChangeInternal() spellcheck=false placeholder="_value * 1">\n  </div>\n\n  <div class="gf-form offset-width-7" ng-if=aggDef.supportsMissing>\n\t\t<label class="gf-form-label width-10">\n\t\t\tMissing\n\t\t\t<tip>The missing parameter defines how documents that are missing a value should be treated. By default they will be ignored but it is also possible to treat them as if they had a value</tip>\n\t\t</label>\n\t\t<input type=number class="gf-form-input max-width-12" empty-to-null ng-model=agg.settings.missing ng-blur=onChangeInternal() spellcheck=false>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/elasticsearch/partials/pipeline_variables.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div ng-repeat="var in variables">\n  <div class="gf-form offset-width-7" ng-if="$index === 0">\n    <label class="gf-form-label width-10">Variables</label>\n    <input type=text class="gf-form-input max-width-12" ng-model=var.name placeholder="Variable name" ng-blur=onChangeInternal() spellcheck=false>\n    <metric-segment-model property=var.pipelineAgg options=options on-change=onChangeInternal() custom=false css-class=width-12></metric-segment-model>\n    <label class=gf-form-label>\n      <a class=pointer ng-click=remove($index)><i class="fa fa-minus"></i></a>\n    </label>\n    <label class=gf-form-label>\n      <a class=pointer ng-click=add()><i class="fa fa-plus"></i></a>\n    </label>\n  </div>\n  <div class="gf-form offset-width-17" ng-if="$index !== 0">\n    <input type=text class="gf-form-input max-width-12" ng-model=var.name placeholder="Variable name" ng-blur=onChangeInternal() spellcheck=false>\n    <metric-segment-model property=var.pipelineAgg options=options on-change=onChangeInternal() custom=false css-class=width-12></metric-segment-model>\n    <label class=gf-form-label>\n      <a class=pointer ng-click=remove($index)><i class="fa fa-minus"></i></a>\n    </label>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/elasticsearch/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=true>\n\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<label class="gf-form-label query-keyword width-7">Query</label>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.target.query spellcheck=false placeholder="Lucene query" ng-blur=ctrl.refresh()>\n\t\t</div>\n\t\t<div class="gf-form max-width-15">\n\t\t\t<label class="gf-form-label query-keyword">Alias</label>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder="alias patterns" ng-blur=ctrl.refresh()>\n\t\t</div>\n\t</div>\n\n\t<div ng-repeat="agg in ctrl.target.metrics">\n\t\t<elastic-metric-agg target=ctrl.target index=$index get-fields=ctrl.getFields($fieldType) on-change=ctrl.queryUpdated() es-version=ctrl.esVersion>\n\t\t</elastic-metric-agg>\n\t</div>\n\n\t<div ng-repeat="agg in ctrl.target.bucketAggs">\n\t\t<elastic-bucket-agg target=ctrl.target index=$index get-fields=ctrl.getFields($fieldType) on-change=ctrl.queryUpdated()>\n\t\t</elastic-bucket-agg>\n\t</div>\n\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/grafana-azure-monitor-datasource/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n  <div class=gf-form>\n    <label class="gf-form-label query-keyword width-9">Service</label>\n    <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n      <select class="gf-form-input service-dropdown" ng-model=ctrl.annotation.queryType ng-options="f as f for f in [\'Application Insights\', \'Azure Monitor\', \'Azure Log Analytics\']"></select>\n    </div>\n  </div>\n  <div ng-show="ctrl.annotation.queryType === \'Azure Log Analytics\'">\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Workspace</label>\n        <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n          <select class="gf-form-input min-width-12" ng-model=ctrl.annotation.workspace ng-options="f.value as f.text for f in ctrl.workspaces"></select>\n        </div>\n      </div>\n      <div class=gf-form>\n        <div class=width-1></div>\n      </div>\n      <div class=gf-form>\n        <button class="btn btn-primary width-10" ng-click=ctrl.panelCtrl.refresh()>Run</button>\n      </div>\n      <div class=gf-form>\n        <label class=gf-form-label>(Run Query: Shift+Enter, Trigger Suggestion: Ctrl+Space)</label>\n      </div>\n    </div>\n    <kusto-monaco-editor content=ctrl.annotation.rawQuery get-schema=ctrl.datasource.azureLogAnalyticsDatasource.getSchema(ctrl.annotation.workspace) default-time-field=TimeGenerated plugin-base-url={{ctrl.datasource.meta.baseUrl}}></kusto-monaco-editor>\n  </div>\n\n  <div class=gf-form-inline ng-show="ctrl.annotation.queryType !== \'Azure Log Analytics\'">\n    <div class="gf-form gf-form--grow">\n      <label class=gf-form-label>No annotations support for {{ctrl.annotation.queryType}}</label>\n    </div>\n  </div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword" ng-click="ctrl.showHelp = !ctrl.showHelp">\n        Show Help\n        <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n      </label>\n    </div>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showHelp>\n    <pre class="gf-form-pre alert alert-info" ng-show="ctrl.annotation.queryType === \'Azure Log Analytics\'"><h6>Annotation Query Format</h6>\nAn annotation is an event that is overlaid on top of graphs. The query can have up to three columns per row, the datetime column is mandatory. Annotation rendering is expensive so it is important to limit the number of rows returned.\n\n- column with the datetime type.\n- column with alias: <b>Text</b> or <b>text</b> for the annotation text\n- column with alias: <b>Tags</b> or <b>tags</b> for annotation tags. This is should return a comma separated string of tags e.g. \'tag1,tag2\'\n\nMacros:\n    - $__timeFilter() -&gt; TimeGenerated &ge; datetime(2018-06-05T18:09:58.907Z) and TimeGenerated &le; datetime(2018-06-05T20:09:58.907Z)\n    - $__timeFilter(datetimeColumn) -&gt;  datetimeColumn  &ge; datetime(2018-06-05T18:09:58.907Z) and datetimeColumn &le; datetime(2018-06-05T20:09:58.907Z)\n\n    Or build your own conditionals using these built-in variables which just return the values:\n    - $__from -&gt;  datetime(2018-06-05T18:09:58.907Z)\n    - $__to -&gt; datetime(2018-06-05T20:09:58.907Z)\n    - $__interval -&gt; 5m\n</pre>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/grafana-azure-monitor-datasource/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<h3 class=page-heading>Azure Monitor API Details</h3>\n\n<div class=gf-form-group>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Azure Cloud</span>\n      <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n        <select class=gf-form-input ng-model=ctrl.current.jsonData.cloudName ng-options="f.value as f.text for f in [{value: \'azuremonitor\', text: \'Azure\'}, {value: \'govazuremonitor\', text: \'Azure US Government\'}, {value: \'germanyazuremonitor\', text: \'Azure Germany\'}, {value: \'chinaazuremonitor\', text: \'Azure China\'}]" ng-change=ctrl.refresh()></select>\n      </div>\n      <info-popover mode=right-normal>\n        <p>Choose an Azure Cloud.</p>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Subscription Id</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.jsonData.subscriptionId placeholder=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX>\n      <info-popover mode=right-absolute>\n        <p>In the Azure Portal, navigate to Subscriptions -> Choose subscription -> Overview -> Subscription ID.</p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Tenant Id</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.jsonData.tenantId placeholder=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX>\n      <info-popover mode=right-absolute>\n        <p>In the Azure Portal, navigate to Azure Active Directory -> Properties -> Directory ID.</p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Client Id</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.jsonData.clientId placeholder=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX>\n      <info-popover mode=right-absolute>\n        <p>In the Azure Portal, navigate to Azure Active Directory -> App Registrations -> Choose your app ->\n          Application ID.</p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form-inline ng-if=!ctrl.current.secureJsonFields.clientSecret>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Client Secret</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.secureJsonData.clientSecret placeholder="">\n      <info-popover mode=right-absolute>\n        <p>To create a new key, log in to Azure Portal, navigate to Azure Active Directory -> App Registrations ->\n          Choose your\n          app -> Keys.</p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form ng-if=ctrl.current.secureJsonFields.clientSecret>\n    <span class="gf-form-label width-9">Client Secret</span>\n    <input type=text class="gf-form-input max-width-12" disabled=disabled value=configured>\n    <a class="btn btn-secondary gf-form-btn" href=# ng-click="ctrl.current.secureJsonFields.clientSecret = false">reset</a>\n  </div>\n</div>\n\n<h3 class=page-heading>Azure Log Analytics API Details</h3>\n\n<div class="grafana-info-box ng-scope">\n  The Azure Log Analytics support is marked as being in a preview development state. This means it is in currently in active development and major changes might be made - depending on feedback from users.\n</div>\n\n<div class=gf-form-group>\n  <gf-form-switch class=gf-form label="Same details as Azure Monitor API" label-class=width-19 switch-class=max-width-6 checked=ctrl.current.jsonData.azureLogAnalyticsSameAs on-change=ctrl.onSameAsToggle()>\n  </gf-form-switch>\n</div>\n\n<div class=gf-form-group ng-show=!ctrl.current.jsonData.azureLogAnalyticsSameAs>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Subscription Id</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.jsonData.logAnalyticsSubscriptionId placeholder=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX />\n      <info-popover mode=right-absolute>\n        <p>In the Azure Portal, navigate to Subscriptions -> Choose subscription -> Overview -> Subscription ID.</p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Tenant Id</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.jsonData.logAnalyticsTenantId placeholder=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX />\n      <info-popover mode=right-absolute>\n        <p>In the Azure Portal, navigate to Azure Active Directory -> Properties -> Directory ID.</p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Client Id</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.jsonData.logAnalyticsClientId placeholder=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX>\n      <info-popover mode=right-absolute>\n        <p>In the Azure Portal, navigate to Azure Active Directory -> App Registrations -> Choose your app ->\n          Application ID.\n        </p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form-inline ng-if=!ctrl.current.secureJsonFields.logAnalyticsClientSecret>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Client Secret</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.secureJsonData.logAnalyticsClientSecret placeholder=""/>\n      <info-popover mode=right-absolute>\n        <p>To create a new key, log in to Azure Portal, navigate to Azure Active Directory -> App Registrations ->\n          Choose your\n          app -> Keys.</p>\n        <a target=_blank href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal>**Click\n          here for detailed instructions on setting up an Azure Active Directory (AD) application.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form ng-if=ctrl.current.secureJsonFields.logAnalyticsClientSecret>\n    <span class="gf-form-label width-9">Client Secret</span>\n    <input type=text class="gf-form-input max-width-12" disabled=disabled value=configured>\n    <a class="btn btn-secondary gf-form-btn" href=# ng-click="ctrl.current.secureJsonFields.logAnalyticsClientSecret = false">reset</a>\n  </div>\n</div>\n<div class=gf-form-group>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Default Workspace</span>\n      <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n        <select class=gf-form-input ng-model=ctrl.current.jsonData.logAnalyticsDefaultWorkspace ng-options="f.value as f.text for f in ctrl.workspaces" ng-disabled=!ctrl.workspaces></select>\n      </div>\n      <info-popover mode=right-normal>\n        <p>Choose the default/preferred Workspace for Azure Log Analytics queries.</p>\n      </info-popover>\n    </div>\n  </div>\n</div>\n<div class=gf-form-group ng-if=ctrl.showMinVersionWarning()>\n  <div class="alert alert-error">\n    <p>\n      The Azure Log Analytics feature requires Grafana 5.2.0 or greater. Download a new version of\n      Grafana\n      <a class=external-link target=_blank href=https://grafana.com/get>here</a>.\n    </p>\n  </div>\n</div>\n\n<h3 class=page-heading>Application Insights Details</h3>\n\n<div class=gf-form-group>\n  <div class=gf-form-inline ng-if=!ctrl.current.secureJsonFields.appInsightsApiKey>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">API Key</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.secureJsonData.appInsightsApiKey placeholder=""/>\n      <info-popover mode=right-absolute>\n        <p>Section 2 of the Quickstart guide shows where to find/create the API Key:</p>\n        <a target=_blank href=https://dev.applicationinsights.io/quickstart/ >**Click here to open the Application\n          Insights Quickstart.**</a>\n      </info-popover>\n    </div>\n  </div>\n  <div class=gf-form ng-if=ctrl.current.secureJsonFields.appInsightsApiKey>\n    <span class="gf-form-label width-9">API Key</span>\n    <input type=text class="gf-form-input max-width-12" disabled=disabled value=configured>\n    <a class="btn btn-secondary gf-form-btn" href=# ng-click="ctrl.current.secureJsonFields.appInsightsApiKey = false">reset</a>\n  </div>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Application Id</span>\n      <input class="gf-form-input width-30" type=text ng-model=ctrl.current.jsonData.appInsightsAppId placeholder=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx>\n      <info-popover mode=right-absolute>\n        <p>Section 2 of the Quickstart guide shows where to find the Application ID:</p>\n        <a target=_blank href=https://dev.applicationinsights.io/quickstart/ >**Click here to open the Application\n          Insights Quickstart.**</a>\n      </info-popover>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/grafana-azure-monitor-datasource/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=false has-text-edit-mode="ctrl.target.queryType === \'Application Insights\'">\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword width-9">Service</label>\n      <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n        <select class="gf-form-input service-dropdown" ng-model=ctrl.target.queryType ng-options="f as f for f in [\'Application Insights\', \'Azure Monitor\', \'Azure Log Analytics\']" ng-change=ctrl.onQueryTypeChange()></select>\n      </div>\n    </div>\n    <div class="gf-form gf-form--grow">\n      <div class="gf-form-label gf-form-label--grow"></div>\n    </div>\n  </div>\n  <div ng-if="ctrl.target.queryType === \'Azure Monitor\'">\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Resource Group</label>\n        <gf-form-dropdown model=ctrl.target.azureMonitor.resourceGroup allow-custom=true lookup-text=true get-options=ctrl.getResourceGroups($query) on-change=ctrl.onResourceGroupChange() css-class=min-width-12>\n        </gf-form-dropdown>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Namespace</label>\n        <gf-form-dropdown model=ctrl.target.azureMonitor.metricDefinition allow-custom=true lookup-text=true get-options=ctrl.getMetricDefinitions($query) on-change=ctrl.onMetricDefinitionChange() css-class=min-width-20>\n        </gf-form-dropdown>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Resource Name</label>\n        <gf-form-dropdown model=ctrl.target.azureMonitor.resourceName allow-custom=true lookup-text=true get-options=ctrl.getResourceNames($query) on-change=ctrl.onResourceNameChange() css-class=min-width-12>\n        </gf-form-dropdown>\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Metric</label>\n        <gf-form-dropdown model=ctrl.target.azureMonitor.metricName allow-custom=true lookup-text=true get-options=ctrl.getMetricNames($query) on-change=ctrl.onMetricNameChange() css-class=min-width-12>\n        </gf-form-dropdown>\n      </div>\n      <div class="gf-form gf-form--grow aggregation-dropdown-wrapper">\n        <label class="gf-form-label query-keyword width-9">Aggregation</label>\n        <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n          <select class="gf-form-input width-11" ng-model=ctrl.target.azureMonitor.aggregation ng-options="f as f for f in ctrl.target.azureMonitor.aggOptions" ng-change=ctrl.refresh()></select>\n        </div>\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Time Grain</label>\n        <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent timegrainunit-dropdown-wrapper">\n          <select class=gf-form-input ng-model=ctrl.target.azureMonitor.timeGrain ng-options="f.value as f.text for f in ctrl.target.azureMonitor.timeGrains" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class=gf-form ng-show="ctrl.target.azureMonitor.timeGrain.trim() === \'auto\'">\n        <label class=gf-form-label>Auto Interval</label>\n        <label class=gf-form-label>{{ctrl.getAutoInterval()}}</label>\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n    <div class=gf-form-inline ng-show="ctrl.target.azureMonitor.dimensions.length > 0">\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Dimension</label>\n        <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n          <select class="gf-form-input min-width-12" ng-model=ctrl.target.azureMonitor.dimension ng-options="f.value as f.text for f in ctrl.target.azureMonitor.dimensions" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-3">eq</label>\n        <input type=text class="gf-form-input width-17" ng-model=ctrl.target.azureMonitor.dimensionFilter spellcheck=false placeholder=auto ng-blur=ctrl.refresh()>\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Legend Format</label>\n        <input type=text class="gf-form-input width-30" ng-model=ctrl.target.azureMonitor.alias spellcheck=false placeholder="alias patterns (see help for more info)" ng-blur=ctrl.refresh()>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="ctrl.target.queryType === \'Azure Log Analytics\'">\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-9">Workspace</label>\n        <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n          <select class="gf-form-input min-width-12" ng-model=ctrl.target.azureLogAnalytics.workspace ng-options="f.value as f.text for f in ctrl.workspaces" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class=gf-form>\n        <div class=width-1></div>\n      </div>\n      <div class=gf-form>\n        <button class="btn btn-primary width-10" ng-click=ctrl.refresh()>Run</button>\n      </div>\n      <div class=gf-form>\n        <label class=gf-form-label>(Run Query: Shift+Enter, Trigger Suggestion: Ctrl+Space)</label>\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    \x3c!-- <kusto-monaco-editor content="ctrl.target.azureLogAnalytics.query" on-change="ctrl.refresh()" get-schema="ctrl.getAzureLogAnalyticsSchema()"\n      default-time-field="TimeGenerated" plugin-base-url={{ctrl.datasource.meta.baseUrl}}></kusto-monaco-editor> --\x3e\n\n    <div class="gf-form gf-form--grow">\n      <kusto-editor class="gf-form gf-form--grow" query=ctrl.target.azureLogAnalytics.query change=ctrl.onLogAnalyticsQueryChange execute=ctrl.onLogAnalyticsQueryExecute variables=ctrl.templateVariables getschema=ctrl.getAzureLogAnalyticsSchema />\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">Format As</label>\n        <div class=gf-form-select-wrapper>\n          <select class="gf-form-input gf-size-auto" ng-model=ctrl.target.azureLogAnalytics.resultFormat ng-options="f.value as f.text for f in ctrl.resultFormats" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword" ng-click="ctrl.showHelp = !ctrl.showHelp">\n          Show Help\n          <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n          <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n        </label>\n      </div>\n      <div class=gf-form ng-show=ctrl.lastQuery>\n        <label class="gf-form-label query-keyword" ng-click="ctrl.showLastQuery = !ctrl.showLastQuery">\n          Raw Query\n          <i class="fa fa-caret-down" ng-show=ctrl.showLastQuery></i>\n          <i class="fa fa-caret-right" ng-hide=ctrl.showLastQuery></i>\n        </label>\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form ng-show=ctrl.showLastQuery>\n      <pre class=gf-form-pre>{{ctrl.lastQuery}}</pre>\n    </div>\n    <div class=gf-form ng-show=ctrl.showHelp>\n      <pre class="gf-form-pre alert alert-info">\n    Format as Table:\n    - return any set of columns\n\n    Format as Time series:\n    - Requires a column of type datetime\n    - returns the first column with a numeric datatype as the value\n    - (Optional: returns the first column with type string to represent the series name. If no column is found the column name of the value column is used as series name)\n\n    Example Time Series Query:\n\n    AzureActivity\n    | where $__timeFilter()\n    | summarize count() by Category, bin(TimeGenerated, 60min)\n    | order by TimeGenerated asc\n\n    Macros:\n    - $__timeFilter() -&gt; TimeGenerated &ge; datetime(2018-06-05T18:09:58.907Z) and TimeGenerated &le; datetime(2018-06-05T20:09:58.907Z)\n    - $__timeFilter(datetimeColumn) -&gt;  datetimeColumn  &ge; datetime(2018-06-05T18:09:58.907Z) and datetimeColumn &le; datetime(2018-06-05T20:09:58.907Z)\n    - $__escapeMulti($myTemplateVar) -&gt; $myTemplateVar should be a multi-value template variables that contains illegal characters\n    - $__contains(aColumn, $myTemplateVar) -&gt; aColumn in ($myTemplateVar)\n      If using the All option, then check the Include All Option checkbox and in the Custom all value field type in: all. If All is chosen -&gt; 1 == 1\n\n    Or build your own conditionals using these built-in variables which just return the values:\n    - $__from -&gt;  datetime(2018-06-05T18:09:58.907Z)\n    - $__to -&gt; datetime(2018-06-05T20:09:58.907Z)\n    - $__interval -&gt; 5m\n\n    Examples:\n    - ¡ where $__timeFilter\n    - | where TimeGenerated &ge; $__from and TimeGenerated &le; $__to\n    - | summarize count() by Category, bin(TimeGenerated, $__interval)\n      </pre>\n    </div>\n\n  </div>\n\n  <div ng-if="ctrl.target.queryType === \'Application Insights\'">\n    <div ng-show=!ctrl.target.appInsights.rawQuery>\n      <div class=gf-form-inline>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">Metric</label>\n          <gf-form-dropdown model=ctrl.target.appInsights.metricName allow-custom=true lookup-text=true get-options=ctrl.getAppInsightsMetricNames($query) on-change=ctrl.onAppInsightsMetricNameChange() css-class=min-width-20>\n          </gf-form-dropdown>\n        </div>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">Aggregation</label>\n          <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n            <select class=gf-form-input ng-model=ctrl.target.appInsights.aggregation ng-options="f as f for f in ctrl.target.appInsights.aggOptions" ng-change=ctrl.refresh()></select>\n          </div>\n        </div>\n        <div class="gf-form gf-form--grow">\n          <div class="gf-form-label gf-form-label--grow"></div>\n        </div>\n      </div>\n      <div class=gf-form-inline>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">Group By</label>\n          <gf-form-dropdown allow-custom=true ng-hide="ctrl.target.appInsights.groupBy !== \'none\'" model=ctrl.target.appInsights.groupBy lookup-text=true get-options=ctrl.getAppInsightsGroupBySegments($query) on-change=ctrl.refresh() css-class=min-width-20>\n          </gf-form-dropdown>\n          <label class="gf-form-label min-width-20 pointer" ng-hide="ctrl.target.appInsights.groupBy === \'none\'" ng-click=ctrl.resetAppInsightsGroupBy()>{{ctrl.target.appInsights.groupBy}}\n            <i class="fa fa-remove"></i>\n          </label>\n        </div>\n        <div class=gf-form-inline>\n          <div class=gf-form>\n            <label class="gf-form-label query-keyword width-9">Filter</label>\n            <input type=text class="gf-form-input width-17" ng-model=ctrl.target.appInsights.filter spellcheck=false placeholder="your/groupby eq \'a_value\'" ng-blur=ctrl.refresh()>\n          </div>\n        </div>\n        <div class="gf-form gf-form--grow">\n          <div class="gf-form-label gf-form-label--grow"></div>\n        </div>\n      </div>\n\n      <div class=gf-form-inline>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">Time Grain</label>\n          <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">\n            <select class=gf-form-input ng-model=ctrl.target.appInsights.timeGrainType ng-options="f as f for f in [\'auto\', \'none\', \'specific\']" ng-change=ctrl.updateTimeGrainType()></select>\n          </div>\n        </div>\n        <div class=gf-form ng-hide="ctrl.target.appInsights.timeGrainType === \'auto\' || ctrl.target.appInsights.timeGrainType === \'none\'">\n          <input type=text class="gf-form-input width-3" ng-model=ctrl.target.appInsights.timeGrain spellcheck=false placeholder="" ng-blur=ctrl.refresh()>\n        </div>\n        <div class=gf-form ng-hide="ctrl.target.appInsights.timeGrainType === \'auto\' || ctrl.target.appInsights.timeGrainType === \'none\'">\n          <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent timegrainunit-dropdown-wrapper">\n            <select class=gf-form-input ng-model=ctrl.target.appInsights.timeGrainUnit ng-options="f as f for f in [\'minute\', \'hour\', \'day\', \'month\', \'year\']" ng-change=ctrl.refresh()></select>\n          </div>\n        </div>\n        <div class=gf-form ng-hide="ctrl.target.appInsights.timeGrainType !== \'auto\'">\n          <label class=gf-form-label>Auto Interval</label>\n          <label class=gf-form-label>{{ctrl.getAppInsightsAutoInterval()}}</label>\n        </div>\n        <div class="gf-form gf-form--grow">\n          <div class="gf-form-label gf-form-label--grow"></div>\n        </div>\n      </div>\n      <div class=gf-form-inline>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">Legend Format</label>\n          <input type=text class="gf-form-input width-30" ng-model=ctrl.target.appInsights.alias spellcheck=false placeholder="alias patterns (see help for more info)" ng-blur=ctrl.refresh()>\n        </div>\n\n        <div class="gf-form gf-form--grow">\n          <div class="gf-form-label gf-form-label--grow"></div>\n        </div>\n      </div>\n    </div>\n    <div ng-show=ctrl.target.appInsights.rawQuery>\n      \x3c!-- <div class="gf-form">\n        <textarea rows="3" class="gf-form-input" ng-model="ctrl.target.appInsights.rawQueryString" spellcheck="false"\n          placeholder="Application Insights Query" ng-model-onblur ng-change="ctrl.refresh()"></textarea>\n      </div> --\x3e\n      <div class="gf-form gf-form--grow">\n        <kusto-editor class="gf-form gf-form--grow" query=ctrl.target.appInsights.rawQueryString placeholder="\'Application Insights Query\'" change=ctrl.onAppInsightsQueryChange execute=ctrl.onAppInsightsQueryExecute variables=ctrl.templateVariables getschema=ctrl.getAppInsightsQuerySchema />\n      </div>\n      <div class=gf-form-inline>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">X-axis</label>\n          <gf-form-dropdown model=ctrl.target.appInsights.xaxis allow-custom=true placeholder="eg. \'timestamp\'" get-options=ctrl.getAppInsightsColumns($query) on-change=ctrl.onAppInsightsColumnChange() css-class=min-width-20>\n          </gf-form-dropdown>\n        </div>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">Y-axis(es)</label>\n          <gf-form-dropdown model=ctrl.target.appInsights.yaxis allow-custom=true get-options=ctrl.getAppInsightsColumns($query) on-change=ctrl.onAppInsightsColumnChange() css-class=min-width-20>\n          </gf-form-dropdown>\n        </div>\n        <div class="gf-form gf-form--grow">\n          <div class="gf-form-label gf-form-label--grow"></div>\n        </div>\n      </div>\n      <div class=gf-form-inline>\n        <div class=gf-form>\n          <label class="gf-form-label query-keyword width-9">Split On</label>\n          <gf-form-dropdown model=ctrl.target.appInsights.spliton allow-custom=true get-options=ctrl.getAppInsightsColumns($query) on-change=ctrl.onAppInsightsColumnChange() css-class=min-width-20>\n          </gf-form-dropdown>\n        </div>\n        <div class="gf-form gf-form--grow">\n          <div class="gf-form-label gf-form-label--grow"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=gf-form ng-show=ctrl.lastQueryError>\n    <pre class="gf-form-pre alert alert-error">{{ctrl.lastQueryError}}</pre>\n  </div>\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/grafana-live/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=false>\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<label class="gf-form-label width-8">Stream</label>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.target.stream spellcheck=false placeholder=metric>\n\t\t</div>\n\t</div>\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/grafana/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-9">\n\t\t\t\tFilter by\n\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>Dashboard: This will fetch annotation and alert state changes for whole dashboard and show them only on the event\'s originating panel.</li>\n\t\t\t\t\t\t<li>All: This will fetch any annotation events that match the tags filter.</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</info-popover>\n\t\t\t</span>\n\t\t\t<div class="gf-form-select-wrapper width-8">\n\t\t\t\t<select class=gf-form-input ng-model=ctrl.annotation.type ng-options="f.value as f.text for f in ctrl.types">\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>Max limit</span>\n\t\t\t<div class=gf-form-select-wrapper>\n\t\t\t\t<select class=gf-form-input ng-model=ctrl.annotation.limit ng-options="f for f in [10,50,100,200,300,500,1000,2000]">\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form ng-if="ctrl.annotation.type === \'tags\'">\n\t\t\t<gf-form-switch class=gf-form label="Match any" label-class=width-9 checked=ctrl.annotation.matchAny on-change=ctrl.refresh() tooltip="By default Grafana will only show annotation that matches all tags in the query. Enabling this will make Grafana return any annotation with the tags you specify."></gf-form-switch>\n\t\t</div>\n\t\t<div class=gf-form ng-if="ctrl.annotation.type === \'tags\'">\n\t\t\t<span class=gf-form-label>Tags</span>\n\t\t\t<bootstrap-tagsinput ng-model=ctrl.annotation.tags tagclass="label label-tag" placeholder="add tags">\n\t\t\t</bootstrap-tagsinput>\n\t\t</div>\n\t</div>\n</div>\n\n\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/grafana/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=false>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<label class=gf-form-label>Test data: random walk</label>\n\t\t</div>\n\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/graphite/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n  <div class=gf-form>\n    <span class="gf-form-label width-12">Graphite query</span>\n    <input type=text class=gf-form-input ng-model=ctrl.annotation.target placeholder="Example: statsd.application.counters.*.count">\n  </div>\n\n\t<h5 class=section-heading>Or</h5>\n\n  <div class=gf-form>\n    <span class="gf-form-label width-12">Graphite events tags</span>\n    <input type=text class=gf-form-input ng-model=ctrl.annotation.tags placeholder="Example: event_tag_name">\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/graphite/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<datasource-http-settings current=ctrl.current suggest-url=http://localhost:8080>\n</datasource-http-settings>\n\n<h3 class=page-heading>Graphite details</h3>\n\n<div class=gf-form-group>\n\t<div class=gf-form>\n\t\t<span class="gf-form-label width-8">\n      Version\n      <info-popover mode=right-normal position="top center">\n        This option controls what functions are available in the Graphite query editor.\n      </info-popover>\n    </span>\n    <span class=gf-form-select-wrapper>\n        <select class="gf-form-input gf-size-auto" ng-model=ctrl.current.jsonData.graphiteVersion ng-options="f.value as f.name for f in ctrl.graphiteVersions"></select>\n    </span>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/graphite/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl has-text-edit-mode=true>\n\n  <div class=gf-form ng-show=ctrl.target.textEditor>\n    <input type=text class=gf-form-input ng-model=ctrl.target.target spellcheck=false ng-blur=ctrl.targetTextChanged()>\n  </div>\n\n  <div ng-hide=ctrl.target.textEditor>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label width-6 query-keyword">Series</label>\n      </div>\n\n      <div ng-if=ctrl.queryModel.seriesByTagUsed ng-repeat="tag in ctrl.queryModel.tags" class=gf-form>\n        <gf-form-dropdown model=tag.key allow-custom=true label-mode=true debounce=true placeholder="Tag key" css-class=query-segment-key get-options="ctrl.getTags($index, $query)" on-change="ctrl.tagChanged(tag, $index)"/>\n        <gf-form-dropdown model=tag.operator label-mode=true css-class=query-segment-operator get-options=ctrl.getTagOperators() on-change="ctrl.tagChanged(tag, $index)" min-input-width=30 />\n        <gf-form-dropdown model=tag.value allow-custom=true label-mode=true debounce=true css-class=query-segment-value placeholder="Tag value" get-options="ctrl.getTagValues(tag, $index, $query)" on-change="ctrl.tagChanged(tag, $index)"/>\n        <label class="gf-form-label query-keyword" ng-if=ctrl.showDelimiter($index)>AND</label>\n      </div>\n\n      <div ng-if=ctrl.queryModel.seriesByTagUsed ng-repeat="segment in ctrl.addTagSegments" role=menuitem class=gf-form>\n        <metric-segment segment=segment get-options=ctrl.getTagsAsSegments($query) on-change=ctrl.addNewTag(segment) debounce=true />\n      </div>\n\n      <div ng-if=!ctrl.queryModel.seriesByTagUsed ng-repeat="segment in ctrl.segments" role=menuitem class=gf-form>\n        <metric-segment segment=segment get-options="ctrl.getAltSegments($index, $query)" on-change="ctrl.segmentValueChanged(segment, $index)"/>\n      </div>\n\n      <div ng-if=ctrl.paused class=gf-form>\n        <a ng-click=ctrl.unpause() class="gf-form-label query-part"><i class="fa fa-play"></i></a>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label width-6 query-keyword">Functions</label>\n      </div>\n\n      <div ng-repeat="func in ctrl.queryModel.functions" class=gf-form>\n        <span graphite-func-editor class="gf-form-label query-part" ng-hide=func.hidden></span>\n      </div>\n\n      <div class="gf-form dropdown">\n        <span graphite-add-func></span>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n  </div>\n\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/influxdb/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=gf-form-group>\n\t<div class=gf-form>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.annotation.query placeholder="select text from events where $timeFilter limit 1000">\n\t</div>\n</div>\n\n<h5 class=section-heading>Field mappings <tip>If your influxdb query returns more than one field you need to specify the column names below. An annotation event is composed of a title, tags, and an additional text field.</tip></h5>\n<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-4">Text</span>\n\t\t\t<input type=text class="gf-form-input max-width-10" ng-model=ctrl.annotation.textColumn placeholder="">\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-4">Tags</span>\n\t\t\t<input type=text class="gf-form-input max-width-10" ng-model=ctrl.annotation.tagsColumn placeholder="">\n\t\t</div>\n\t\t<div class=gf-form ng-show=ctrl.annotation.titleColumn>\n\t\t\t<span class="gf-form-label width-4">Title <em class=muted>(deprecated)</em></span>\n\t\t\t<input type=text class="gf-form-input max-width-10" ng-model=ctrl.annotation.titleColumn placeholder="">\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/influxdb/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<datasource-http-settings current=ctrl.current suggest-url=http://localhost:8086>\n</datasource-http-settings>\n\n<h3 class=page-heading>InfluxDB Details</h3>\n\n<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-30">\n\t\t\t<span class="gf-form-label width-10">Database</span>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder="" required>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-15">\n\t\t\t<span class="gf-form-label width-10">User</span>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder="">\n\t\t</div>\n\t\t<div class="gf-form max-width-15">\n\t\t\t<span class="gf-form-label width-10">Password</span>\n\t\t\t<input type=password class=gf-form-input ng-model=ctrl.current.password placeholder="">\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class=gf-form-group>\n\t<div class=grafana-info-box>\n\t\t<h5>Database Access</h5>\n\t\t<p>\n\t\t\tSetting the database for this datasource does not deny access to other databases.  The InfluxDB query syntax allows\n\t\t\tswitching the database in the query.  For example:\n\t\t\t<code>SHOW MEASUREMENTS ON _internal</code> or <code>SELECT * FROM "_internal".."database" LIMIT 10</code>\n\t\t\t<br/><br/>\n\t\t\tTo support data isolation and security, make sure appropriate permissions are configured in InfluxDB.\n\t\t</p>\n\t</div>\n</div>\n\n<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>Min time interval</span>\n\t\t\t<input type=text class="gf-form-input width-6" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=10s>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\n\t\t\t\tfor example <code>1m</code> if your data is written every minute.\n\t\t\t</info-popover>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/influxdb/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=true has-text-edit-mode=true>\n  <div ng-if=ctrl.target.rawQuery>\n    <div class=gf-form>\n      <textarea rows=3 class=gf-form-input ng-model=ctrl.target.query spellcheck=false placeholder="InfluxDB Query" ng-model-onblur ng-change=ctrl.refresh()></textarea>\n    </div>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword">FORMAT AS</label>\n        <div class=gf-form-select-wrapper>\n          <select class="gf-form-input gf-size-auto" ng-model=ctrl.target.resultFormat ng-options="f.value as f.text for f in ctrl.resultFormats" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class="gf-form max-width-25" ng-hide="ctrl.target.resultFormat === \'table\'">\n        <label class="gf-form-label query-keyword">ALIAS BY</label>\n        <input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder="Naming pattern" ng-blur=ctrl.refresh() />\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if=!ctrl.target.rawQuery>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">FROM</label>\n\n        <metric-segment segment=ctrl.policySegment get-options=ctrl.getPolicySegments() on-change=ctrl.policyChanged()></metric-segment>\n        <metric-segment segment=ctrl.measurementSegment get-options=ctrl.getMeasurements($query) on-change=ctrl.measurementChanged()></metric-segment>\n      </div>\n\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword">WHERE</label>\n      </div>\n\n      <div class=gf-form ng-repeat="segment in ctrl.tagSegments">\n        <metric-segment segment=segment get-options="ctrl.getTagsOrValues(segment, $index)" on-change="ctrl.tagSegmentUpdated(segment, $index)"></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline ng-repeat="selectParts in ctrl.queryModel.selectModels">\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7"> <span ng-show="$index === 0">SELECT</span>&nbsp; </label>\n      </div>\n\n      <div class=gf-form ng-repeat="part in selectParts">\n        <query-part-editor class="gf-form-label query-part" part=part handle-event="ctrl.handleSelectPartEvent(selectParts, part, $event)">\n        </query-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <label class=dropdown dropdown-typeahead2=ctrl.selectMenu dropdown-typeahead-on-select="ctrl.addSelectPart(selectParts, $item, $subItem)" button-template-class="gf-form-label query-part">\n        </label>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">\n          <span>GROUP BY</span>\n        </label>\n\n        <query-part-editor ng-repeat="part in ctrl.queryModel.groupByParts" part=part class="gf-form-label query-part" handle-event="ctrl.handleGroupByPartEvent(part, $index, $event)">\n        </query-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <metric-segment segment=ctrl.groupBySegment get-options=ctrl.getGroupByOptions() on-change="ctrl.groupByAction(part, $index)"></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline ng-if="ctrl.target.orderByTime === \'DESC\'">\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">ORDER BY</label>\n        <label class="gf-form-label pointer" ng-click=ctrl.removeOrderByTime()>time <span class=query-keyword>DESC</span> <i class="fa fa-remove"></i></label>\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline ng-if=ctrl.target.limit>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">LIMIT</label>\n        <input type=text class="gf-form-input width-9" ng-model=ctrl.target.limit spellcheck=false placeholder="No Limit" ng-blur=ctrl.refresh() />\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline ng-if=ctrl.target.slimit>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">SLIMIT</label>\n        <input type=text class="gf-form-input width-9" ng-model=ctrl.target.slimit spellcheck=false placeholder="No Limit" ng-blur=ctrl.refresh() />\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline ng-if=ctrl.target.tz>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">tz</label>\n        <input type=text class="gf-form-input width-9" ng-model=ctrl.target.tz spellcheck=false placeholder="No Timezone" ng-blur=ctrl.refresh() />\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-7">FORMAT AS</label>\n        <div class=gf-form-select-wrapper>\n          <select class="gf-form-input gf-size-auto" ng-model=ctrl.target.resultFormat ng-options="f.value as f.text for f in ctrl.resultFormats" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline ng-hide="ctrl.target.resultFormat === \'table\'">\n      <div class="gf-form max-width-30">\n        <label class="gf-form-label query-keyword width-7">ALIAS BY</label>\n        <input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder="Naming pattern" ng-blur=ctrl.refresh() />\n      </div>\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n  </div>\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/loki/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<datasource-http-settings current=ctrl.current no-direct-access=true>\n</datasource-http-settings>\n\n<div class=gf-form-group>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-8">Maximum lines</span>\n      <input type=text class="gf-form-input width-8" ng-model=ctrl.current.jsonData.maxLines spellcheck=false placeholder=1000>\n      <info-popover mode=right-absolute>\n        Loki queries must contain a limit of the maximum number of lines returned (default: 1000).\n        Increase this limit to have a bigger result set for ad-hoc analysis.\n        Decrease this limit if your browser becomes sluggish when displaying the log results.\n      </info-popover>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/mssql/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=gf-form-group>\n  <div class=gf-form-inline>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<textarea rows=10 class=gf-form-input ng-model=ctrl.annotation.rawQuery spellcheck=false placeholder="query expression" data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.panelCtrl.refresh()></textarea>\n\t\t</div>\n\t</div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword" ng-click="ctrl.showHelp = !ctrl.showHelp">\n        Show Help\n        <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n      </label>\n\t\t</div>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showHelp>\n\t\t<pre class="gf-form-pre alert alert-info"><h6>Annotation Query Format</h6>\nAn annotation is an event that is overlaid on top of graphs. The query can have up to three columns per row, the <b>time</b> column is mandatory. Annotation rendering is expensive so it is important to limit the number of rows returned.\n\n- column with alias: <b>time</b> for the annotation event time. Use epoch time or any native date data type.\n- column with alias: <b>text</b> for the annotation text.\n- column with alias: <b>tags</b> for annotation tags. This is a comma separated string of tags e.g. \'tag1,tag2\'.\n\n\nMacros:\n- $__time(column) -&gt; column AS time\n- $__timeEpoch(column) -&gt; DATEDIFF(second, \'1970-01-01\', column) AS time\n- $__timeFilter(column) -&gt; column BETWEEN \'2017-04-21T05:01:17Z\' AND \'2017-04-21T05:01:17Z\'\n- $__unixEpochFilter(column) -&gt; column &gt;= 1492750877 AND column &lt;= 1492750877\n- $__unixEpochNanoFilter(column) -&gt;  column &gt;= 1494410783152415214 AND column &lt;= 1494497183142514872\n\nOr build your own conditionals using these macros which just return the values:\n- $__timeFrom() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__timeTo() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__unixEpochFrom() -&gt; 1492750877\n- $__unixEpochTo() -&gt; 1492750877\n- $__unixEpochNanoFrom() -&gt;  1494410783152415214\n- $__unixEpochNanoTo() -&gt;  1494497183142514872\n\t\t</pre>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/mssql/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<h3 class=page-heading>MSSQL Connection</h3>\n\n<div class=gf-form-group>\n\t<div class="gf-form max-width-30">\n\t\t<span class="gf-form-label width-7">Host</span>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.current.url placeholder=localhost:1433 bs-typeahead="{{[\'localhost\', \'localhost:1433\']}}" required>\n\t</div>\n\n\t<div class="gf-form max-width-30">\n\t\t<span class="gf-form-label width-7">Database</span>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder="database name" required>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-15">\n\t\t\t<span class="gf-form-label width-7">User</span>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder=user>\n\t\t</div>\n\t\t<div class="gf-form max-width-15" ng-if=!ctrl.current.secureJsonFields.password>\n\t\t\t<span class="gf-form-label width-7">Password</span>\n\t\t\t<input type=password class=gf-form-input ng-model=ctrl.current.secureJsonData.password placeholder=password>\n\t\t</div>\n\t\t<div class="gf-form max-width-19" ng-if=ctrl.current.secureJsonFields.password>\n\t\t\t<span class="gf-form-label width-7">Password</span>\n\t\t\t<input type=text class=gf-form-input disabled=disabled value=configured>\n\t\t\t<a class="btn btn-secondary gf-form-btn" href=# ng-click="ctrl.current.secureJsonFields.password = false">reset</a>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form>\n\t\t<label class="gf-form-label width-7">Encrypt</label>\n\t\t<div class="gf-form-select-wrapper max-width-15 gf-form-select-wrapper--has-help-icon">\n\t\t\t<select class=gf-form-input ng-model=ctrl.current.jsonData.encrypt ng-options="mode for mode in [\'disable\', \'false\', \'true\']" ng-init=ctrl.current.jsonData.encrypt></select>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tDetermines whether or to which extent a secure SSL TCP/IP connection will be negotiated with the server.\n\t\t\t\t<ul>\n\t\t\t\t\t<li><i>disable</i> - Data sent between client and server is not encrypted.</li>\n\t\t\t\t\t<li><i>false</i> - Data sent between client and server is not encrypted beyond the login packet. (default)</li>\n\t\t\t\t\t<li><i>true</i> - Data sent between client and server is encrypted.</li>\n\t\t\t\t</ul>\n\t\t\t\tIf you\'re using an older version of Microsoft SQL Server like 2008 and 2008R2 you may need to disable encryption to be able to connect.\n\t\t\t</info-popover>\n\t\t</div>\n\t</div>\n</div>\n\n<b>Connection limits</b>\n\n<div class=gf-form-group>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max open</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxOpenConns placeholder=unlimited>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum number of open connections to the database. If <i>Max idle connections</i> is greater than 0 and the\n\t\t\t<i>Max open connections</i> is less than <i>Max idle connections</i>, then <i>Max idle connections</i> will be\n\t\t\treduced to match the <i>Max open connections</i> limit. If set to 0, there is no limit on the number of open\n\t\t\tconnections.\n\t\t</info-popover>\n\t</div>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max idle</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxIdleConns placeholder=2>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum number of connections in the idle connection pool. If <i>Max open connections</i> is greater than 0 but\n\t\t\tless than the <i>Max idle connections</i>, then the <i>Max idle connections</i> will be reduced to match the\n\t\t\t<i>Max open connections</i> limit. If set to 0, no idle connections are retained.\n\t\t</info-popover>\n\t</div>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max lifetime</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.connMaxLifetime placeholder=14400>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.\n\t\t</info-popover>\n\t</div>\n</div>\n\n<h3 class=page-heading>MSSQL details</h3>\n\n<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-9">Min time interval</span>\n\t\t\t<input type=text class="gf-form-input width-6" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=1m>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\n\t\t\t\tfor example <code>1m</code> if your data is written every minute.\n\t\t\t</info-popover>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=gf-form-group>\n\t<div class=grafana-info-box>\n\t\t<h5>User Permission</h5>\n\t\t<p>\n\t\t\tThe database user should only be granted SELECT permissions on the specified database &amp; tables you want to query.\n\t\t\tGrafana does not validate that queries are safe so queries can contain any SQL statement. For example, statements\n\t\t\tlike <code>USE otherdb;</code> and <code>DROP TABLE user;</code> would be executed. To protect against this we\n\t\t\t<strong>Highly</strong> recommmend you create a specific MSSQL user with restricted permissions.\n\t\t</p>\n\t</div>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/mssql/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=false>\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<code-editor content=ctrl.target.rawSql datasource=ctrl.datasource on-change=ctrl.panelCtrl.refresh() data-mode=sqlserver>\n\t\t\t</code-editor>\n\t\t</div>\n\t</div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n\t\t\t<label class="gf-form-label query-keyword">Format as</label>\n\t\t\t<div class=gf-form-select-wrapper>\n\t\t\t\t<select class="gf-form-input gf-size-auto" ng-model=ctrl.target.format ng-options="f.value as f.text for f in ctrl.formats" ng-change=ctrl.refresh()></select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=gf-form>\n      <label class="gf-form-label query-keyword" ng-click="ctrl.showHelp = !ctrl.showHelp">\n        Show Help\n        <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n      </label>\n\t\t</div>\n\t\t<div class=gf-form ng-show=ctrl.lastQueryMeta>\n      <label class="gf-form-label query-keyword" ng-click="ctrl.showLastQuerySQL = !ctrl.showLastQuerySQL">\n        Generated SQL\n        <i class="fa fa-caret-down" ng-show=ctrl.showLastQuerySQL></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showLastQuerySQL></i>\n      </label>\n\t\t</div>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form ng-show=ctrl.showLastQuerySQL>\n\t\t<pre class=gf-form-pre>{{ctrl.lastQueryMeta.sql}}</pre>\n\t</div>\n\n\t<div class=gf-form ng-show=ctrl.showHelp>\n\t\t<pre class="gf-form-pre alert alert-info">Time series:\n- return column named time (in UTC), as a unix time stamp or any sql native date data type. You can use the macros below.\n- any other columns returned will be the time point values.\nOptional:\n  - return column named <i>metric</i> to represent the series name.\n  - If multiple value columns are returned the metric column is used as prefix.\n  - If no column named metric is found the column name of the value column is used as series name\n\nResultsets of time series queries need to be sorted by time.\n\nTable:\n- return any set of columns\n\nMacros:\n- $__time(column) -&gt; column AS time\n- $__timeEpoch(column) -&gt; DATEDIFF(second, \'1970-01-01\', column) AS time\n- $__timeFilter(column) -&gt; column BETWEEN \'2017-04-21T05:01:17Z\' AND \'2017-04-21T05:01:17Z\'\n- $__unixEpochFilter(column) -&gt; column &gt;= 1492750877 AND column &lt;= 1492750877\n- $__unixEpochNanoFilter(column) -&gt;  column &gt;= 1494410783152415214 AND column &lt;= 1494497183142514872\n- $__timeGroup(column, \'5m\'[, fillvalue]) -&gt; CAST(ROUND(DATEDIFF(second, \'1970-01-01\', column)/300.0, 0) as bigint)*300.\n     by setting fillvalue grafana will fill in missing values according to the interval\n     fillvalue can be either a literal value, NULL or previous; previous will fill in the previous seen value or NULL if none has been seen yet\n- $__timeGroupAlias(column, \'5m\'[, fillvalue]) -&gt; CAST(ROUND(DATEDIFF(second, \'1970-01-01\', column)/300.0, 0) as bigint)*300 AS [time]\n- $__unixEpochGroup(column,\'5m\') -&gt; FLOOR(column/300)*300\n- $__unixEpochGroupAlias(column,\'5m\') -&gt; FLOOR(column/300)*300 AS [time]\n\nExample of group by and order by with $__timeGroup:\nSELECT\n  $__timeGroup(date_time_col, \'1h\') AS time,\n  sum(value) as value\nFROM yourtable\nGROUP BY $__timeGroup(date_time_col, \'1h\')\nORDER BY 1\n\nOr build your own conditionals using these macros which just return the values:\n- $__timeFrom() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__timeTo() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__unixEpochFrom() -&gt; 1492750877\n- $__unixEpochTo() -&gt; 1492750877\n- $__unixEpochNanoFrom() -&gt;  1494410783152415214\n- $__unixEpochNanoTo() -&gt;  1494497183142514872\n\t\t</pre>\n\t</div>\n\n\t\n\n\t<div class=gf-form ng-show=ctrl.lastQueryError>\n\t\t<pre class="gf-form-pre alert alert-error">{{ctrl.lastQueryError}}</pre>\n\t</div>\n\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/mysql/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=gf-form-group>\n  <div class=gf-form-inline>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<textarea rows=10 class=gf-form-input ng-model=ctrl.annotation.rawQuery spellcheck=false placeholder="query expression" data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.panelCtrl.refresh()></textarea>\n\t\t</div>\n\t</div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword" ng-click="ctrl.showHelp = !ctrl.showHelp">\n        Show Help\n        <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n      </label>\n\t\t</div>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showHelp>\n\t\t<pre class="gf-form-pre alert alert-info"><h6>Annotation Query Format</h6>\nAn annotation is an event that is overlaid on top of graphs. The query can have up to three columns per row, the <i>time</i> or <i>time_sec</i> column is mandatory. Annotation rendering is expensive so it is important to limit the number of rows returned.\n\n- column with alias: <b>time</b> or <i>time_sec</i> for the annotation event time. Use epoch time or any native date data type.\n- column with alias: <b>text</b> for the annotation text\n- column with alias: <b>tags</b> for annotation tags. This is a comma separated string of tags e.g. \'tag1,tag2\'\n\n\nMacros:\n- $__time(column) -&gt; UNIX_TIMESTAMP(column) as time (or as time_sec)\n- $__timeEpoch(column) -&gt; UNIX_TIMESTAMP(column) as time (or as time_sec)\n- $__timeFilter(column) -&gt; column BETWEEN FROM_UNIXTIME(1492750877) AND FROM_UNIXTIME(1492750877)\n- $__unixEpochFilter(column) -&gt;  time_unix_epoch &gt; 1492750877 AND time_unix_epoch &lt; 1492750877\n- $__unixEpochNanoFilter(column) -&gt;  column &gt;= 1494410783152415214 AND column &lt;= 1494497183142514872\n\nOr build your own conditionals using these macros which just return the values:\n- $__timeFrom() -&gt; FROM_UNIXTIME(1492750877)\n- $__timeTo() -&gt;  FROM_UNIXTIME(1492750877)\n- $__unixEpochFrom() -&gt;  1492750877\n- $__unixEpochTo() -&gt;  1492750877\n- $__unixEpochNanoFrom() -&gt;  1494410783152415214\n- $__unixEpochNanoTo() -&gt;  1494497183142514872\n\t\t</pre>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/mysql/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<h3 class=page-heading>MySQL Connection</h3>\n\n<div class=gf-form-group>\n\t<div class="gf-form max-width-30">\n\t\t<span class="gf-form-label width-7">Host</span>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.current.url placeholder=localhost:3306 bs-typeahead="{{[\'localhost:3306\', \'localhost:3307\']}}" required>\n\t</div>\n\n\t<div class="gf-form max-width-30">\n\t\t<span class="gf-form-label width-7">Database</span>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder="database name" required>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-15">\n\t\t\t<span class="gf-form-label width-7">User</span>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder=user>\n\t\t</div>\n\t\t<div class="gf-form max-width-15">\n\t\t\t<span class="gf-form-label width-7">Password</span>\n\t\t\t<input type=password class=gf-form-input ng-model=ctrl.current.password placeholder=password>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-group>\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-checkbox class=gf-form label="TLS Client Auth" label-class=width-10 checked=ctrl.current.jsonData.tlsAuth switch-class=max-width-6></gf-form-checkbox>\n\t\t\t<gf-form-checkbox class=gf-form label="With CA Cert" tooltip="Needed for\n\t\t\t\tverifing self-signed TLS Certs" checked=ctrl.current.jsonData.tlsAuthWithCACert label-class=width-11 switch-class=max-width-6></gf-form-checkbox>\n\t\t</div>\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-checkbox class=gf-form label="Skip TLS Verify" label-class=width-10 checked=ctrl.current.jsonData.tlsSkipVerify switch-class=max-width-6></gf-form-checkbox>\n\t\t</div>\n\t</div>\n\n<datasource-tls-auth-settings current=ctrl.current ng-if="(ctrl.current.jsonData.tlsAuth || ctrl.current.jsonData.tlsAuthWithCACert)">\n</datasource-tls-auth-settings>\n\n<b>Connection limits</b>\n\n<div class=gf-form-group>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max open</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxOpenConns placeholder=unlimited>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum number of open connections to the database. If <i>Max idle connections</i> is greater than 0 and the\n\t\t\t<i>Max open connections</i> is less than <i>Max idle connections</i>, then <i>Max idle connections</i> will be\n\t\t\treduced to match the <i>Max open connections</i> limit. If set to 0, there is no limit on the number of open\n\t\t\tconnections.\n\t\t</info-popover>\n\t</div>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max idle</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxIdleConns placeholder=2>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum number of connections in the idle connection pool. If <i>Max open connections</i> is greater than 0 but\n\t\t\tless than the <i>Max idle connections</i>, then the <i>Max idle connections</i> will be reduced to match the\n\t\t\t<i>Max open connections</i> limit. If set to 0, no idle connections are retained.\n\t\t</info-popover>\n\t</div>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max lifetime</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.connMaxLifetime placeholder=14400>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.<br/><br/>\n\t\t\tThis should always be lower than configured <a href=https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_wait_timeout target=_blank>wait_timeout</a> in MySQL.\n\t\t</info-popover>\n\t</div>\n</div>\n\n<h3 class=page-heading>MySQL details</h3>\n\n<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-9">Min time interval</span>\n\t\t\t<input type=text class="gf-form-input width-6" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=1m>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\n\t\t\t\tfor example <code>1m</code> if your data is written every minute.\n\t\t\t</info-popover>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=gf-form-group>\n\t<div class=grafana-info-box>\n\t\t<h5>User Permission</h5>\n\t\t<p>\n\t\t\tThe database user should only be granted SELECT permissions on the specified database &amp; tables you want to query.\n\t\t\tGrafana does not validate that queries are safe so queries can contain any SQL statement. For example, statements\n\t\t\tlike <code>USE otherdb;</code> and <code>DROP TABLE user;</code> would be executed. To protect against this we\n\t\t\t<strong>Highly</strong> recommmend you create a specific MySQL user with restricted permissions.\n\n\t\t\tCheckout the <a class=external-link target=_blank href=http://docs.grafana.org/features/datasources/mysql/ >MySQL Data Source Docs</a> for more information.\n\t\t</p>\n\t</div>\n</div>\n</div>')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/mysql/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl has-text-edit-mode=true>\n\n  <div ng-if=ctrl.target.rawQuery>\n    <div class=gf-form-inline>\n      <div class="gf-form gf-form--grow">\n        <code-editor content=ctrl.target.rawSql datasource=ctrl.datasource on-change=ctrl.panelCtrl.refresh() data-mode=sql>\n        </code-editor>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if=!ctrl.target.rawQuery>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">FROM</label>\n        <metric-segment segment=ctrl.tableSegment get-options=ctrl.getTableSegments() on-change=ctrl.tableChanged()></metric-segment>\n\n        <label class="gf-form-label query-keyword width-7">Time column</label>\n        <metric-segment segment=ctrl.timeColumnSegment get-options=ctrl.getTimeColumnSegments() on-change=ctrl.timeColumnChanged()></metric-segment>\n\n        <label class="gf-form-label query-keyword width-9">\n          Metric column\n          <info-popover mode=right-normal>Column to be used as metric name for the value column.</info-popover>\n        </label>\n        <metric-segment segment=ctrl.metricColumnSegment get-options=ctrl.getMetricColumnSegments() on-change=ctrl.metricColumnChanged()></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n\n    </div>\n\n    <div class=gf-form-inline ng-repeat="selectParts in ctrl.selectParts">\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">\n          <span ng-show="$index === 0">SELECT</span>&nbsp;\n        </label>\n      </div>\n\n      <div class=gf-form ng-repeat="part in selectParts">\n        <sql-part-editor class="gf-form-label sql-part" part=part handle-event="ctrl.handleSelectPartEvent(selectParts, part, $event)">\n        </sql-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <label class=dropdown dropdown-typeahead2=ctrl.selectMenu dropdown-typeahead-on-select="ctrl.addSelectPart(selectParts, $item, $subItem)" button-template-class="gf-form-label query-part">\n        </label>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">WHERE</label>\n      </div>\n\n      <div class=gf-form ng-repeat="part in ctrl.whereParts">\n        <sql-part-editor class="gf-form-label sql-part" part=part handle-event="ctrl.handleWherePartEvent(ctrl.whereParts, part, $event, $index)">\n        </sql-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <metric-segment segment=ctrl.whereAdd get-options=ctrl.getWhereOptions() on-change="ctrl.addWhereAction(part, $index)"></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">\n          <span>GROUP BY</span>\n        </label>\n\n        <sql-part-editor ng-repeat="part in ctrl.groupParts" part=part class="gf-form-label sql-part" handle-event="ctrl.handleGroupPartEvent(part, $index, $event)">\n        </sql-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <metric-segment segment=ctrl.groupAdd get-options=ctrl.getGroupOptions() on-change="ctrl.addGroupAction(part, $index)"></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n  </div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword">Format as</label>\n      <div class=gf-form-select-wrapper>\n        <select class="gf-form-input gf-size-auto" ng-model=ctrl.target.format ng-options="f.value as f.text for f in ctrl.formats" ng-change=ctrl.refresh()></select>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword pointer" ng-click=ctrl.toggleEditorMode() ng-show="ctrl.panelCtrl.panel.type !== \'table\'">\n        <span ng-show=ctrl.target.rawQuery>Query Builder</span>\n        <span ng-hide=ctrl.target.rawQuery>Edit SQL</span>\n      </label>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword pointer" ng-click="ctrl.showHelp = !ctrl.showHelp">\n        Show Help\n        <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n      </label>\n    </div>\n    <div class=gf-form ng-show=ctrl.lastQueryMeta>\n      <label class="gf-form-label query-keyword pointer" ng-click="ctrl.showLastQuerySQL = !ctrl.showLastQuerySQL">\n        Generated SQL\n        <i class="fa fa-caret-down" ng-show=ctrl.showLastQuerySQL></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showLastQuerySQL></i>\n      </label>\n    </div>\n    <div class="gf-form gf-form--grow">\n      <div class="gf-form-label gf-form-label--grow"></div>\n    </div>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showLastQuerySQL>\n    <pre class=gf-form-pre>{{ctrl.lastQueryMeta.sql}}</pre>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showHelp>\n    <pre class="gf-form-pre alert alert-info">Time series:\n- return column named time or time_sec (in UTC), as a unix time stamp or any sql native date data type. You can use the macros below.\n- return column(s) with numeric datatype as values\nOptional:\n  - return column named <i>metric</i> to represent the series name.\n  - If multiple value columns are returned the metric column is used as prefix.\n  - If no column named metric is found the column name of the value column is used as series name\n\nResultsets of time series queries need to be sorted by time.\n\nTable:\n- return any set of columns\n\nMacros:\n- $__time(column) -&gt; UNIX_TIMESTAMP(column) as time_sec\n- $__timeEpoch(column) -&gt; UNIX_TIMESTAMP(column) as time_sec\n- $__timeFilter(column) -&gt; column BETWEEN FROM_UNIXTIME(1492750877) AND FROM_UNIXTIME(1492750877)\n- $__unixEpochFilter(column) -&gt;  time_unix_epoch &gt; 1492750877 AND time_unix_epoch &lt; 1492750877\n- $__unixEpochNanoFilter(column) -&gt;  column &gt;= 1494410783152415214 AND column &lt;= 1494497183142514872\n- $__timeGroup(column,\'5m\'[, fillvalue]) -&gt; cast(cast(UNIX_TIMESTAMP(column)/(300) as signed)*300 as signed)\n     by setting fillvalue grafana will fill in missing values according to the interval\n     fillvalue can be either a literal value, NULL or previous; previous will fill in the previous seen value or NULL if none has been seen yet\n- $__timeGroupAlias(column,\'5m\') -&gt; cast(cast(UNIX_TIMESTAMP(column)/(300) as signed)*300 as signed) AS "time"\n- $__unixEpochGroup(column,\'5m\') -&gt; column DIV 300 * 300\n- $__unixEpochGroupAlias(column,\'5m\') -&gt; column DIV 300 * 300 AS "time"\n\nExample of group by and order by with $__timeGroup:\nSELECT\n  $__timeGroupAlias(timestamp_col, \'1h\'),\n  sum(value_double) as value\nFROM yourtable\nGROUP BY 1\nORDER BY 1\n\nOr build your own conditionals using these macros which just return the values:\n- $__timeFrom() -&gt; FROM_UNIXTIME(1492750877)\n- $__timeTo() -&gt;  FROM_UNIXTIME(1492750877)\n- $__unixEpochFrom() -&gt;  1492750877\n- $__unixEpochTo() -&gt;  1492750877\n- $__unixEpochNanoFrom() -&gt;  1494410783152415214\n- $__unixEpochNanoTo() -&gt;  1494497183142514872\n    </pre>\n  </div>\n\n  \n\n  <div class=gf-form ng-show=ctrl.lastQueryError>\n    <pre class="gf-form-pre alert alert-error">{{ctrl.lastQueryError}}</pre>\n  </div>\n\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/opentsdb/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n  <div class=gf-form>\n    <span class="gf-form-label width-13">OpenTSDB metrics query</span>\n    <input type=text class=gf-form-input ng-model=ctrl.annotation.target placeholder=events.eventname>\n  </div>\n  <gf-form-switch class=gf-form label="Show Global Annotations?" checked=ctrl.annotation.isGlobal switch-class=max-width-6 label-class=width-13></gf-form-switch>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/opentsdb/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<datasource-http-settings current=ctrl.current suggest-url=http://localhost:4242></datasource-http-settings>\n\n<h5>OpenTSDB settings</h5>\n<div class=gf-form>\n  <span class="gf-form-label width-7">\n    Version\n  </span>\n  <span class=gf-form-select-wrapper>\n    <select class="gf-form-input gf-size-auto" ng-model=ctrl.current.jsonData.tsdbVersion ng-options="v.value as v.name for v in ctrl.tsdbVersions"></select>\n  </span>\n</div>\n<div class=gf-form>\n  <span class="gf-form-label width-7">\n    Resolution\n  </span>\n  <span class=gf-form-select-wrapper>\n    <select class="gf-form-input gf-size-auto" ng-model=ctrl.current.jsonData.tsdbResolution ng-options="v.value as v.name for v in ctrl.tsdbResolutions"></select>\n  </span>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/opentsdb/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=false>\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-25">\n\t\t\t<label class="gf-form-label query-keyword width-8">\n\t\t\t\tMetric\n\t\t\t\t<label class=gf-form-label bs-tooltip=ctrl.errors.metric style=color:#e5bd1c ng-show=ctrl.errors.metric>\n\t\t\t\t\t<i class="fa fa-warning"></i>\n\t\t\t\t</label>\n\t\t\t</label>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.target.metric spellcheck=false bs-typeahead=ctrl.suggestMetrics placeholder="metric name" data-min-length=0 data-items=100 ng-blur=ctrl.targetBlur()>\n\t\t\t\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label query-keyword">\n\t\t\t\tAggregator\n\t\t\t\t<a bs-tooltip=ctrl.errors.aggregator style=color:#e5bd1c ng-show=ctrl.errors.aggregator>\n\t\t\t\t\t<i class="fa fa-warning"></i>\n\t\t\t\t</a>\n\t\t\t</label>\n\t\t\t<div class="gf-form-select-wrapper max-width-15">\n\t\t\t\t<select ng-model=ctrl.target.aggregator class=gf-form-input ng-options="agg for agg in ctrl.aggregators" ng-change=ctrl.targetBlur()>\n\t\t \t </select>\n\t\t\t</div>\n\t\t</div>\n\t\t\t<div class="gf-form max-width-20">\n\t\t\t\t<label class="gf-form-label query-keyword width-6">\n\t\t\t\t\tAlias:\n\t\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\t\tUse patterns like $tag_tagname to replace part of the alias for a tag value\n\t\t\t\t\t</info-popover>\n\t\t\t\t</label>\n\t\t\t\t<input type=text class=gf-form-input ng-model=ctrl.target.alias spellcheck=false placeholder="series alias" data-min-length=0 data-items=100 ng-blur=ctrl.targetBlur()>\n\t\t\t</div>\n\n\t\t\t<div class="gf-form gf-form--grow">\n\t\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-25">\n\t\t\t<label class="gf-form-label query-keyword width-8">Down sample</label>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.target.downsampleInterval ng-model-onblur ng-change=ctrl.targetBlur() placeholder=interval>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tblank for auto, or for example <code>1m</code>\n\t\t\t</info-popover>\n\t\t</div>\n\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label query-keyword">Aggregator</label>\n\t\t\t<div class=gf-form-select-wrapper>\n\t\t\t\t<select ng-model=ctrl.target.downsampleAggregator class=gf-form-input ng-options="agg for agg in ctrl.aggregators" ng-change=ctrl.targetBlur()>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=gf-form ng-if="ctrl.tsdbVersion >= 2">\n\t\t\t<label class="gf-form-label query-keyword width-6">Fill</label>\n\t\t\t<div class=gf-form-select-wrapper>\n\t\t\t\t<select ng-model=ctrl.target.downsampleFillPolicy class=gf-form-input ng-options="agg for agg in ctrl.fillPolicies" ng-change=ctrl.targetBlur()>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<gf-form-switch class=gf-form label="Disable downsampling" label-class=query-keyword checked=ctrl.target.disableDownsampling on-change=ctrl.targetBlur()>\n\t\t</gf-form-switch>\n\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline ng-if="ctrl.tsdbVersion >= 2">\n\t\t<div class=gf-form>\n\n\t\t\t<label class="gf-form-label query-keyword width-8">\n\t\t\t\tFilters\n\t\t\t\t<info-popover mode=right-normal>\n\t\t\t\t\tFilters does not work with tags, either of the two will work but not both.\n\t\t\t\t</info-popover>\n\t\t\t</label>\n\n\t\t\t<div ng-repeat="fil in ctrl.target.filters track by $index" class=gf-form-label>\n\t\t\t\t{{fil.tagk}}&nbsp;=&nbsp;{{fil.type}}&#40;{{fil.filter}}&#41;&nbsp;&#44&nbsp;groupBy&nbsp;=&nbsp;{{fil.groupBy}}\n\t\t\t\t<a ng-click="ctrl.editFilter(fil, $index)">\n\t\t\t\t\t<i class="fa fa-pencil"></i>\n\t\t\t\t</a>\n\t\t\t\t<a ng-click=ctrl.removeFilter($index)>\n\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<label class="gf-form-label query-keyword" ng-hide=ctrl.addFilterMode>\n\t\t\t\t<a ng-click=ctrl.addFilter()>\n\t\t\t\t\t<i class="fa fa-plus"></i>\n\t\t\t\t</a>\n\t\t\t</label>\n \t\t</div>\n\n\t\t<div class=gf-form-inline ng-show=ctrl.addFilterMode>\n\t\t\t<div class=gf-form>\n\t\t\t\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagKeys data-min-length=0 data-items=100 ng-model=ctrl.target.currentFilterKey placeholder=key>\n\t\t\t\t\n\t\t\t</div>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label query-keyword">Type</label>\n\t\t\t\t<div class=gf-form-select-wrapper>\n\t\t\t\t\t<select ng-model=ctrl.target.currentFilterType class=gf-form-input ng-options="filType for filType in ctrl.filterTypes">\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagValues data-min-length=0 data-items=100 ng-model=ctrl.target.currentFilterValue placeholder=filter>\n\t\t\t\t\n\t\t\t</div>\n\n      <gf-form-switch class=gf-form label="Group by" label-class=query-keyword checked=ctrl.target.currentFilterGroupBy on-change=ctrl.targetBlur()>\n\t\t\t</gf-form-switch>\n\n\t\t\t<div class=gf-form ng-show=ctrl.addFilterMode>\n\t\t\t\t<label class=gf-form-label ng-show=ctrl.errors.filters>\n\t\t\t\t\t<a bs-tooltip=ctrl.errors.filters style=color:#e5bd1c>\n\t\t\t\t\t\t<i class="fa fa-warning"></i>\n\t\t\t\t\t</a>\n\t\t\t\t</label>\n\t\t\t\t<label class=gf-form-label>\n\t\t\t\t\t<a ng-click=ctrl.addFilter() ng-hide=ctrl.errors.filters>add filter</a>\n\t\t\t\t\t<a ng-click=ctrl.closeAddFilterMode()>\n\t\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t\t</a>\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label query-keyword width-8">\n\t\t\t\tTags\n\t\t\t\t<info-popover mode=right-normal ng-if="ctrl.tsdbVersion >= 2">\n\t\t\t\t\tPlease use filters, tags are deprecated in opentsdb 2.2\n\t\t\t\t</info-popover>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class=gf-form ng-repeat="(key, value) in ctrl.target.tags track by $index" class=gf-form>\n\t\t\t<label class=gf-form-label>\n\t\t\t\t{{key}}&nbsp;=&nbsp;{{value}}\n\t\t\t\t<a ng-click="ctrl.editTag(key, value)">\n\t\t\t\t\t<i class="fa fa-pencil"></i>\n\t\t\t\t</a>\n\t\t\t\t<a ng-click=ctrl.removeTag(key)>\n\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t</a>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class=gf-form ng-hide=ctrl.addTagMode>\n\t\t\t<label class="gf-form-label query-keyword">\n\t\t\t\t<a ng-click=ctrl.addTag()><i class="fa fa-plus"></i></a>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class=gf-form ng-show=ctrl.addTagMode>\n\t\t\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagKeys data-min-length=0 data-items=100 ng-model=ctrl.target.currentTagKey placeholder=key>\n\t\t\t\n\n\t\t\t<input type=text class=gf-form-input spellcheck=false bs-typeahead=ctrl.suggestTagValues data-min-length=0 data-items=100 ng-model=ctrl.target.currentTagValue placeholder=value>\n\t\t\t\n\n\t\t\t<label class=gf-form-label ng-show=ctrl.errors.tags>\n\t\t\t\t<a bs-tooltip=ctrl.errors.tags style=color:#e5bd1c>\n\t\t\t\t\t<i class="fa fa-warning"></i>\n\t\t\t\t</a>\n\t\t\t</label>\n\t\t\t<label class=gf-form-label>\n\t\t\t\t<a ng-click=ctrl.addTag() ng-hide=ctrl.errors.tags>add tag</a>\n\t\t\t\t<a ng-click=ctrl.closeAddTagMode()><i class="fa fa-remove"></i></a>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<gf-form-switch class=gf-form label=Rate label-class="width-8 query-keyword" checked=ctrl.target.shouldComputeRate on-change=ctrl.targetBlur()>\n\t\t</gf-form-switch>\n\n\t\t<gf-form-switch ng-hide=!ctrl.target.shouldComputeRate class=gf-form label=Counter label-class=query-keyword checked=ctrl.target.isCounter on-change=ctrl.targetBlur()>\n\t\t</gf-form-switch>\n\n\n\t\t<div class=gf-form ng-hide="!ctrl.target.isCounter || !ctrl.target.shouldComputeRate">\n\t\t\t<label class="gf-form-label query-keyword">Counter Max</label>\n\t\t\t<input type=text class=gf-form-input ng-disabled=!ctrl.target.shouldComputeRate ng-model=ctrl.target.counterMax spellcheck=false placeholder="max value" ng-model-onblur ng-blur=ctrl.targetBlur()>\n\t\t\t\n\n\t\t\t<label class="gf-form-label query-keyword">Reset Value</label>\n\t\t\t<input type=text class="tight-form-input input-small" ng-disabled=!ctrl.target.shouldComputeRate ng-model=ctrl.target.counterResetValue spellcheck=false placeholder="reset value" ng-model-onblur ng-blur=ctrl.targetBlur()>\n\t\t\t\n\t\t</div>\n\n\t\t<div class=gf-form ng-if="ctrl.tsdbVersion > 2">\n\t\t\t<gf-form-switch class=gf-form label="Explicit tags" label-class="width-8 query-keyword" checked=ctrl.target.explicitTags on-change=ctrl.targetBlur()>\n\t\t\t</gf-form-switch>\n\t\t</div>\n\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n</query-editor-row>\n\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/postgres/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=gf-form-group>\n  <div class=gf-form-inline>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<textarea rows=10 class=gf-form-input ng-model=ctrl.annotation.rawQuery spellcheck=false placeholder="query expression" data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.panelCtrl.refresh()></textarea>\n\t\t</div>\n\t</div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword" ng-click="ctrl.showHelp = !ctrl.showHelp">\n        Show Help\n        <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n      </label>\n\t\t</div>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showHelp>\n\t\t<pre class="gf-form-pre alert alert-info"><h6>Annotation Query Format</h6>\nAn annotation is an event that is overlaid on top of graphs. The query can have up to three columns per row, the time column is mandatory. Annotation rendering is expensive so it is important to limit the number of rows returned.\n\n- column with alias: <b>time</b> for the annotation event time. Use epoch time or any native date data type.\n- column with alias: <b>text</b> for the annotation text\n- column with alias: <b>tags</b> for annotation tags. This is a comma separated string of tags e.g. \'tag1,tag2\'\n\n\nMacros:\n- $__time(column) -&gt; column as "time"\n- $__timeEpoch -&gt; extract(epoch from column) as "time"\n- $__timeFilter(column) -&gt; column BETWEEN \'2017-04-21T05:01:17Z\' AND \'2017-04-21T05:01:17Z\'\n- $__unixEpochFilter(column) -&gt;  column &gt;= 1492750877 AND column &lt;= 1492750877\n- $__unixEpochNanoFilter(column) -&gt;  column &gt;= 1494410783152415214 AND column &lt;= 1494497183142514872\n\nOr build your own conditionals using these macros which just return the values:\n- $__timeFrom() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__timeTo() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__unixEpochFrom() -&gt;  1492750877\n- $__unixEpochTo() -&gt;  1492750877\n- $__unixEpochNanoFrom() -&gt;  1494410783152415214\n- $__unixEpochNanoTo() -&gt;  1494497183142514872\n\t\t</pre>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/postgres/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<h3 class=page-heading>PostgreSQL Connection</h3>\n\n<div class=gf-form-group>\n\t<div class="gf-form max-width-30">\n\t\t<span class="gf-form-label width-7">Host</span>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.current.url placeholder=localhost:5432 bs-typeahead="{{[\'localhost:5432\', \'localhost:5433\']}}" required>\n\t</div>\n\n\t<div class="gf-form max-width-30">\n\t\t<span class="gf-form-label width-7">Database</span>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.current.database placeholder="database name" required>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class="gf-form max-width-15">\n\t\t\t<span class="gf-form-label width-7">User</span>\n\t\t\t<input type=text class=gf-form-input ng-model=ctrl.current.user placeholder=user>\n\t\t</div>\n\t\t<div class="gf-form max-width-15" ng-if=!ctrl.current.secureJsonFields.password>\n\t\t\t<span class="gf-form-label width-7">Password</span>\n\t\t\t<input type=password class=gf-form-input ng-model=ctrl.current.secureJsonData.password placeholder=password>\n    </div>\n    <div class="gf-form max-width-19" ng-if=ctrl.current.secureJsonFields.password>\n      <span class="gf-form-label width-7">Password</span>\n      <input type=text class=gf-form-input disabled=disabled value=configured>\n      <a class="btn btn-secondary gf-form-btn" href=# ng-click="ctrl.current.secureJsonFields.password = false">reset</a>\n    </div>\n\t</div>\n\t<div class=gf-form>\n\t\t<label class="gf-form-label width-7">SSL Mode</label>\n\t\t<div class="gf-form-select-wrapper max-width-15 gf-form-select-wrapper--has-help-icon">\n\t\t\t<select class=gf-form-input ng-model=ctrl.current.jsonData.sslmode ng-options="mode for mode in [\'disable\', \'require\', \'verify-ca\', \'verify-full\']" ng-init=ctrl.current.jsonData.sslmode></select>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tThis option determines whether or with what priority a secure SSL TCP/IP connection will be negotiated with the server.\n\t\t\t</info-popover>\n\t\t</div>\n\t</div>\n</div>\n\n<b>Connection limits</b>\n\n<div class=gf-form-group>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max open</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxOpenConns placeholder=unlimited>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum number of open connections to the database. If <i>Max idle connections</i> is greater than 0 and the\n\t\t\t<i>Max open connections</i> is less than <i>Max idle connections</i>, then <i>Max idle connections</i> will be\n\t\t\treduced to match the <i>Max open connections</i> limit. If set to 0, there is no limit on the number of open\n\t\t\tconnections.\n\t\t</info-popover>\n\t</div>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max idle</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.maxIdleConns placeholder=2>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum number of connections in the idle connection pool. If <i>Max open connections</i> is greater than 0 but\n\t\t\tless than the <i>Max idle connections</i>, then the <i>Max idle connections</i> will be reduced to match the\n\t\t\t<i>Max open connections</i> limit. If set to 0, no idle connections are retained.\n\t\t</info-popover>\n\t</div>\n\t<div class="gf-form max-width-15">\n\t\t<span class="gf-form-label width-7">Max lifetime</span>\n\t\t<input type=number min=0 class=gf-form-input ng-model=ctrl.current.jsonData.connMaxLifetime placeholder=14400>\n\t\t<info-popover mode=right-absolute>\n\t\t\tThe maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.\n\t\t</info-popover>\n\t</div>\n</div>\n\n<h3 class=page-heading>PostgreSQL details</h3>\n\n<div class=gf-form-group>\n\t<div class=gf-form>\n\t\t<span class="gf-form-label width-9">\n\t\t\tVersion\n\t\t\t<info-popover mode=right-normal position="top center">\n\t\t\t\tThis option controls what functions are available in the PostgreSQL query builder.\n\t\t\t</info-popover>\n\t\t</span>\n\t\t<span class=gf-form-select-wrapper>\n\t\t\t<select class="gf-form-input gf-size-auto" ng-model=ctrl.current.jsonData.postgresVersion ng-options="f.value as f.name for f in ctrl.postgresVersions"></select>\n\t\t</span>\n\t</div>\n\t<div class=gf-form>\n\t\t<gf-form-switch class=gf-form label=TimescaleDB label-class=width-9 checked=ctrl.current.jsonData.timescaledb switch-class=max-width-6></gf-form-switch>\n    <label class="gf-form-label query-keyword pointer" ng-click=ctrl.toggleTimescaleDBHelp()>\n      Help&nbsp;\n      <i class="fa fa-caret-down" ng-show=ctrl.showTimescaleDBHelp></i>\n      <i class="fa fa-caret-right" ng-hide=ctrl.showTimescaleDBHelp>&nbsp;</i>\n    </label>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-9">Min time interval</span>\n\t\t\t<input type=text class="gf-form-input width-6" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=1m>\n\t\t\t<info-popover mode=right-absolute>\n\t\t\t\tA lower limit for the auto group by time interval. Recommended to be set to write frequency,\n\t\t\t\tfor example <code>1m</code> if your data is written every minute.\n\t\t\t</info-popover>\n\t\t</div>\n\t</div>\n<div class="grafana-info-box alert alert-info" ng-show=ctrl.showTimescaleDBHelp>\n  <div class=alert-body>\n    <p>\n\t\t\t<a href=https://github.com/timescale/timescaledb class=pointer target=_blank>TimescaleDB</a> is a time-series database built as a PostgreSQL extension. If enabled, Grafana will use <code>time_bucket</code> in the <code>$__timeGroup</code> macro and display TimescaleDB specific aggregate functions in the query builder.\n    </p>\n  </div>\n</div>\n\n</div>\n\n\n<div class=gf-form-group>\n\t<div class=grafana-info-box>\n\t\t<h5>User Permission</h5>\n\t\t<p>\n\t\t\tThe database user should only be granted SELECT permissions on the specified database &amp; tables you want to query.\n\t\t\tGrafana does not validate that queries are safe so queries can contain any SQL statement. For example, statements\n\t\t\tlike <code>DELETE FROM user;</code> and <code>DROP TABLE user;</code> would be executed. To protect against this we\n\t\t\t<strong>Highly</strong> recommmend you create a specific PostgreSQL user with restricted permissions.\n\t\t</p>\n\t</div>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/postgres/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl has-text-edit-mode=true>\n\n  <div ng-if=ctrl.target.rawQuery>\n    <div class=gf-form-inline>\n      <div class="gf-form gf-form--grow">\n        <code-editor content=ctrl.target.rawSql datasource=ctrl.datasource on-change=ctrl.panelCtrl.refresh() data-mode=sql>\n        </code-editor>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if=!ctrl.target.rawQuery>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">FROM</label>\n        <metric-segment segment=ctrl.tableSegment get-options=ctrl.getTableSegments() on-change=ctrl.tableChanged()></metric-segment>\n\n        <label class="gf-form-label query-keyword width-7">Time column</label>\n        <metric-segment segment=ctrl.timeColumnSegment get-options=ctrl.getTimeColumnSegments() on-change=ctrl.timeColumnChanged()></metric-segment>\n\n        <label class="gf-form-label query-keyword width-9">\n          Metric column\n          <info-popover mode=right-normal>Column to be used as metric name for the value column.</info-popover>\n        </label>\n        <metric-segment segment=ctrl.metricColumnSegment get-options=ctrl.getMetricColumnSegments() on-change=ctrl.metricColumnChanged()></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n\n    </div>\n\n    <div class=gf-form-inline ng-repeat="selectParts in ctrl.selectParts">\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">\n          <span ng-show="$index === 0">SELECT</span>&nbsp;\n        </label>\n      </div>\n\n      <div class=gf-form ng-repeat="part in selectParts">\n        <sql-part-editor class="gf-form-label sql-part" part=part handle-event="ctrl.handleSelectPartEvent(selectParts, part, $event)">\n        </sql-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <label class=dropdown dropdown-typeahead2=ctrl.selectMenu dropdown-typeahead-on-select="ctrl.addSelectPart(selectParts, $item, $subItem)" button-template-class="gf-form-label query-part">\n        </label>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">WHERE</label>\n      </div>\n\n      <div class=gf-form ng-repeat="part in ctrl.whereParts">\n        <sql-part-editor class="gf-form-label sql-part" part=part handle-event="ctrl.handleWherePartEvent(ctrl.whereParts, part, $event, $index)">\n        </sql-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <metric-segment segment=ctrl.whereAdd get-options=ctrl.getWhereOptions() on-change="ctrl.addWhereAction(part, $index)"></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label query-keyword width-6">\n          <span>GROUP BY</span>\n        </label>\n\n        <sql-part-editor ng-repeat="part in ctrl.groupParts" part=part class="gf-form-label sql-part" handle-event="ctrl.handleGroupPartEvent(part, $index, $event)">\n        </sql-part-editor>\n      </div>\n\n      <div class=gf-form>\n        <metric-segment segment=ctrl.groupAdd get-options=ctrl.getGroupOptions() on-change="ctrl.addGroupAction(part, $index)"></metric-segment>\n      </div>\n\n      <div class="gf-form gf-form--grow">\n        <div class="gf-form-label gf-form-label--grow"></div>\n      </div>\n    </div>\n\n  </div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword">Format as</label>\n      <div class=gf-form-select-wrapper>\n        <select class="gf-form-input gf-size-auto" ng-model=ctrl.target.format ng-options="f.value as f.text for f in ctrl.formats" ng-change=ctrl.refresh()></select>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword pointer" ng-click=ctrl.toggleEditorMode() ng-show="ctrl.panelCtrl.panel.type !== \'table\'">\n        <span ng-show=ctrl.target.rawQuery>Query Builder</span>\n        <span ng-hide=ctrl.target.rawQuery>Edit SQL</span>\n      </label>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label query-keyword pointer" ng-click="ctrl.showHelp = !ctrl.showHelp">\n        Show Help\n        <i class="fa fa-caret-down" ng-show=ctrl.showHelp></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showHelp></i>\n      </label>\n    </div>\n    <div class=gf-form ng-show=ctrl.lastQueryMeta>\n      <label class="gf-form-label query-keyword pointer" ng-click="ctrl.showLastQuerySQL = !ctrl.showLastQuerySQL">\n        Generated SQL\n        <i class="fa fa-caret-down" ng-show=ctrl.showLastQuerySQL></i>\n        <i class="fa fa-caret-right" ng-hide=ctrl.showLastQuerySQL></i>\n      </label>\n    </div>\n    <div class="gf-form gf-form--grow">\n      <div class="gf-form-label gf-form-label--grow"></div>\n    </div>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showLastQuerySQL>\n    <pre class=gf-form-pre>{{ctrl.lastQueryMeta.sql}}</pre>\n  </div>\n\n  <div class=gf-form ng-show=ctrl.showHelp>\n    <pre class="gf-form-pre alert alert-info">Time series:\n- return column named <i>time</i> (UTC in seconds or timestamp)\n- return column(s) with numeric datatype as values\nOptional:\n  - return column named <i>metric</i> to represent the series name.\n  - If multiple value columns are returned the metric column is used as prefix.\n  - If no column named metric is found the column name of the value column is used as series name\n\nResultsets of time series queries need to be sorted by time.\n\nTable:\n- return any set of columns\n\nMacros:\n- $__time(column) -&gt; column as "time"\n- $__timeEpoch -&gt; extract(epoch from column) as "time"\n- $__timeFilter(column) -&gt; column BETWEEN \'2017-04-21T05:01:17Z\' AND \'2017-04-21T05:01:17Z\'\n- $__unixEpochFilter(column) -&gt;  column &gt;= 1492750877 AND column &lt;= 1492750877\n- $__unixEpochNanoFilter(column) -&gt;  column &gt;= 1494410783152415214 AND column &lt;= 1494497183142514872\n- $__timeGroup(column,\'5m\'[, fillvalue]) -&gt; (extract(epoch from column)/300)::bigint*300\n     by setting fillvalue grafana will fill in missing values according to the interval\n     fillvalue can be either a literal value, NULL or previous; previous will fill in the previous seen value or NULL if none has been seen yet\n- $__timeGroupAlias(column,\'5m\') -&gt; (extract(epoch from column)/300)::bigint*300 AS "time"\n- $__unixEpochGroup(column,\'5m\') -&gt; floor(column/300)*300\n- $__unixEpochGroupAlias(column,\'5m\') -&gt; floor(column/300)*300 AS "time"\n\nExample of group by and order by with $__timeGroup:\nSELECT\n  $__timeGroup(date_time_col, \'1h\'),\n  sum(value) as value\nFROM yourtable\nGROUP BY time\nORDER BY time\n\nOr build your own conditionals using these macros which just return the values:\n- $__timeFrom() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__timeTo() -&gt;  \'2017-04-21T05:01:17Z\'\n- $__unixEpochFrom() -&gt;  1492750877\n- $__unixEpochTo() -&gt;  1492750877\n- $__unixEpochNanoFrom() -&gt;  1494410783152415214\n- $__unixEpochNanoTo() -&gt;  1494497183142514872\n    </pre>\n  </div>\n\n  \n\n  <div class=gf-form ng-show=ctrl.lastQueryError>\n    <pre class="gf-form-pre alert alert-error">{{ctrl.lastQueryError}}</pre>\n  </div>\n\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/prometheus/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n\t<div class=gf-form>\n\t\t<span class="gf-form-label width-10">Search expression</span>\n\t\t<input type=text class=gf-form-input ng-model=ctrl.annotation.expr placeholder=ALERTS>\n\t</div>\n\t<div class=gf-form>\n\t\t<span class="gf-form-label width-10">step</span>\n\t\t<input type=text class="gf-form-input max-width-6" ng-model=ctrl.annotation.step placeholder=60s>\n\t</div>\n</div>\n\n<div class=gf-form-group>\n\t<h5 class=section-heading>Field formats</h5>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-5">Title</span>\n\t\t\t<input type=text class="gf-form-input max-width-9" ng-model=ctrl.annotation.titleFormat placeholder=alertname>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-5">Tags</span>\n\t\t\t<input type=text class="gf-form-input max-width-9" ng-model=ctrl.annotation.tagKeys placeholder=label1,label2>\n\t\t</div>\n\t\t<div class=gf-form-inline>\n\t\t\t<div class=gf-form>\n\t\t\t\t<span class="gf-form-label width-5">Text</span>\n\t\t\t\t<input type=text class="gf-form-input max-width-9" ng-model=ctrl.annotation.textFormat placeholder=instance>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<h5 class=section-heading>Other options</h5>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<gf-form-switch class=gf-form label="Series value as timestamp" label-class=width-14 checked=ctrl.annotation.useValueForTime tooltip="The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000.">\n\t\t\t</gf-form-switch>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/prometheus/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<datasource-http-settings current=ctrl.current suggest-url=http://localhost:9090>\n</datasource-http-settings>\n\n<div class=gf-form-group>\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-8">Scrape interval</span>\n      <input type=text class="gf-form-input width-8" ng-model=ctrl.current.jsonData.timeInterval spellcheck=false placeholder=15s>\n      <info-popover mode=right-absolute>\n        Set this to your global scrape interval defined in your Prometheus config file. This will be used as a lower limit for the\n        Prometheus step query parameter.\n      </info-popover>\n    </div>\n  </div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <span class="gf-form-label width-8">Query timeout</span>\n      <input type=text class="gf-form-input width-8" ng-model=ctrl.current.jsonData.queryTimeout spellcheck=false placeholder=60s>\n      <info-popover mode=right-absolute>\n        Set the Prometheus query timeout.\n      </info-popover>\n    </div>\n  </div>\n\n  <div class=gf-form>\n    <label class="gf-form-label width-8">HTTP Method</label>\n    <div class="gf-form-select-wrapper width-8 gf-form-select-wrapper--has-help-icon">\n      <select class=gf-form-input ng-model=ctrl.current.jsonData.httpMethod ng-options="method for method in [\'GET\', \'POST\']"></select>\n      <info-popover mode=right-absolute>\n        Specify the HTTP Method to query Prometheus. (POST is only available in Prometheus >= v2.1.0)\n      </info-popover>\n    </div>\n  </div>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/prometheus/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl can-collapse=true has-text-edit-mode=false>\n  <div class=gf-form-inline>\n    <div class="gf-form gf-form--grow">\n      <code-editor content=ctrl.target.expr datasource=ctrl.datasource on-change=ctrl.refreshMetricData() get-completer=ctrl.getCompleter() data-mode=prometheus code-editor-focus=ctrl.isLastQuery>\n      </code-editor>\n    </div>\n  </div>\n\n  <div class=gf-form-inline>\n    <div class=gf-form>\n      <label class=gf-form-label>Legend</label>\n      <input type=text class=gf-form-input ng-model=ctrl.target.legendFormat spellcheck=false placeholder="legend format" data-min-length=0 data-items=1000 ng-model-onblur ng-change=ctrl.refreshMetricData()>\n      \n      <info-popover mode=right-absolute>\n        Controls the name of the time series, using name or pattern. For example\n        <span ng-non-bindable>{{hostname}}</span> will be replaced with label value for the label hostname.\n      </info-popover>\n    </div>\n\n    <div class=gf-form>\n      <label class="gf-form-label width-6">Min step</label>\n      <input type=text class="gf-form-input width-8" ng-model=ctrl.target.interval data-placement=right spellcheck=false placeholder={{ctrl.panelCtrl.interval}} data-min-length=0 data-items=100 ng-model-onblur ng-change=ctrl.refreshMetricData() />\n      <info-popover mode=right-absolute>\n        Leave blank for auto handling based on time range and panel width. Note that the actual dates used in the query will be adjusted\n        to a multiple of the interval step.\n      </info-popover>\n    </div>\n\n    <div class=gf-form>\n      <label class=gf-form-label>Resolution</label>\n      <div class="gf-form-select-wrapper max-width-15">\n        <select ng-model=ctrl.target.intervalFactor class=gf-form-input ng-options="r.factor as r.label for r in ctrl.resolutions" ng-change=ctrl.refreshMetricData()>\n        </select>\n      </div>\n    </div>\n\n    <div class="gf-form gf-form--grow">\n      <label class="gf-form-label width-5">Format</label>\n      <div class="gf-form-select-wrapper width-8">\n        <select class="gf-form-input gf-size-auto" ng-model=ctrl.target.format ng-options="f.value as f.text for f in ctrl.formats" ng-change=ctrl.refresh()></select>\n      </div>\n      <gf-form-switch class=gf-form label=Instant label-class=width-5 checked=ctrl.target.instant on-change=ctrl.refresh()>\n      </gf-form-switch>\n      <label class="gf-form-label gf-form-label--grow">\n        <a href={{ctrl.linkToPrometheus}} target=_blank bs-tooltip="\'Link to Graph in Prometheus\'">\n          <i class="fa fa-share-square-o"></i>\n        </a>\n      </label>\n    </div>\n  </div>\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/stackdriver/partials/annotations.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<stackdriver-annotation-query-editor target=ctrl.annotation.target on-query-change=(ctrl.onQueryChange) datasource=ctrl.datasource template-srv=ctrl.templateSrv></stackdriver-annotation-query-editor>\n")}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/stackdriver/partials/config.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n  <div class=grafana-info-box>\n    <h4>Stackdriver Authentication</h4>\n    <p>There are two ways to authenticate the Stackdriver plugin - either by uploading a Service Account key file, or by\n      automatically retrieving credentials from the Google metadata server. The latter option is only available\n      when running Grafana on a GCE virtual machine.</p>\n\n    <h5>Uploading a Service Account Key File</h5>\n    <p>\n      First you need to create a Google Cloud Platform (GCP) Service Account for\n      the Project you want to show data for. A Grafana datasource integrates with one GCP Project. If you want to\n      visualize data from multiple GCP Projects then you need to create one datasource per GCP Project.\n    </p>\n    <p>\n      The <strong>Monitoring Viewer</strong> role provides all the permissions that Grafana needs. The following API\n      needs to be enabled on GCP for the datasource to work: <a class=external-link target=_blank href=https://console.cloud.google.com/apis/library/monitoring.googleapis.com>Monitoring\n        API</a>\n    </p>\n\n    <h5>GCE Default Service Account</h5>\n    <p>\n      If Grafana is running on a Google Compute Engine (GCE) virtual machine, it is possible for Grafana to\n      automatically retrieve the default project id and authentication token from the metadata server. In order for this to\n      work, you need to make sure that you have a service account that is setup as the default account for the virtual\n      machine and that the service account has been given read access to the Stackdriver Monitoring API.\n    </p>\n\n    <p>Detailed instructions on how to create a Service Account can be found <a class=external-link target=_blank href=http://docs.grafana.org/datasources/stackdriver/ >in\n        the documentation.</a>\n    </p>\n  </div>\n</div>\n\n<div class=gf-form-group>\n  <div class=gf-form>\n    <h3>Authentication</h3>\n    <info-popover mode=header>Upload your Service Account key file or paste in the contents of the file. The file\n      contents will be encrypted and saved in the Grafana database.</info-popover>\n  </div>\n\n  <div class=gf-form-inline>\n    <div class="gf-form max-width-30">\n      <span class="gf-form-label width-10">Authentication Type</span>\n      <div class="gf-form-select-wrapper max-width-24">\n        <select class=gf-form-input ng-model=ctrl.current.jsonData.authenticationType ng-options="f.key as f.value for f in ctrl.authenticationTypes"></select>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="ctrl.current.jsonData.authenticationType === ctrl.defaultAuthenticationType && !ctrl.current.jsonData.clientEmail && !ctrl.inputDataValid">\n    <div class=gf-form-group ng-if=!ctrl.inputDataValid>\n      <div class=gf-form>\n        <form>\n          <dash-upload on-upload=ctrl.onUpload(dash) btn-text="Upload Service Account key file"></dash-upload>\n        </form>\n      </div>\n    </div>\n    <div class=gf-form-group>\n      <h5 class=section-heading ng-if=!ctrl.inputDataValid>Or paste Service Account key JSON</h5>\n      <div class=gf-form ng-if=!ctrl.inputDataValid>\n        <textarea rows=10 data-share-panel-url="" class=gf-form-input ng-model=ctrl.jsonText ng-paste=ctrl.onPasteJwt($event)></textarea>\n      </div>\n      <div ng-repeat="valError in ctrl.validationErrors" class="text-error p-l-1">\n        <i class="fa fa-warning"></i>\n        {{valError}}\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=gf-form-group ng-if="ctrl.current.jsonData.authenticationType === ctrl.defaultAuthenticationType && (ctrl.inputDataValid || ctrl.current.jsonData.clientEmail)">\n  <h6>Uploaded Key Details</h6>\n\n  <div class=gf-form>\n    <span class="gf-form-label width-10">Project</span>\n    <input class="gf-form-input width-40" disabled=disabled type=text ng-model=ctrl.current.jsonData.defaultProject />\n  </div>\n  <div class=gf-form>\n    <span class="gf-form-label width-10">Client Email</span>\n    <input class="gf-form-input width-40" disabled=disabled type=text ng-model=ctrl.current.jsonData.clientEmail />\n  </div>\n  <div class=gf-form>\n    <span class="gf-form-label width-10">Token URI</span>\n    <input class="gf-form-input width-40" disabled=disabled type=text ng-model=ctrl.current.jsonData.tokenUri />\n  </div>\n  <div class=gf-form ng-if=ctrl.current.secureJsonFields.privateKey>\n    <span class="gf-form-label width-10">Private Key</span>\n    <input type=text class="gf-form-input max-width-12" disabled=disabled value=configured>\n  </div>\n\n  <div class="gf-form width-18">\n    <a class="btn btn-secondary gf-form-btn" href=# ng-click=ctrl.resetValidationMessages()>Reset Service\n      Account Key </a>\n    <info-popover mode=right-normal>\n      Reset to clear the uploaded key and upload a new file.\n    </info-popover>\n  </div>\n</div>\n\n<p class=gf-form-label ng-hide="ctrl.current.secureJsonFields.privateKey || ctrl.current.jsonData.authenticationType !== ctrl.defaultAuthenticationType"><i class="fa fa-save"></i> Do not forget to save your changes after uploading a file.</p>\n\n<p class=gf-form-label ng-show="ctrl.current.jsonData.authenticationType !== ctrl.defaultAuthenticationType"><i class="fa fa-save"></i>\n  Verify GCE default service account by clicking Save & Test</p>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/stackdriver/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<query-editor-row query-ctrl=ctrl has-text-edit-mode=false>\n  <stackdriver-query-editor target=ctrl.target events=ctrl.panelCtrl.events datasource=ctrl.datasource template-srv=ctrl.templateSrv on-query-change=(ctrl.onQueryChange) on-execute-query=(ctrl.onExecuteQuery)></stackdriver-query-editor>\n</query-editor-row>\n")}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/stackdriver/partials/query.filter.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-inline>\n  <div class=gf-form>\n    <span class="gf-form-label query-keyword width-9">Filter</span>\n    <div class=gf-form ng-repeat="segment in ctrl.filterSegments.filterSegments">\n      <metric-segment segment=segment get-options="ctrl.getFilters(segment, $index)" on-change="ctrl.filterSegmentUpdated(segment, $index)"></metric-segment>\n    </div>\n  </div>\n  <div class="gf-form gf-form--grow"><div class="gf-form-label gf-form-label--grow"></div></div>\n</div>\n<div class=gf-form-inline ng-hide=ctrl.hideGroupBys>\n  <div class=gf-form>\n    <span class="gf-form-label query-keyword width-9">Group By</span>\n    <div class=gf-form ng-repeat="segment in ctrl.groupBySegments">\n      <metric-segment segment=segment get-options=ctrl.getGroupBys(segment) on-change="ctrl.groupByChanged(segment, $index)"></metric-segment>\n    </div>\n  </div>\n  <div class="gf-form gf-form--grow"><div class="gf-form-label gf-form-label--grow"></div></div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/datasource/testdata/partials/query.editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<query-editor-row query-ctrl=ctrl has-text-edit-mode=false>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label query-keyword width-7">Scenario</label>\n\t\t\t<div class="gf-form-select-wrapper width-15">\n\t\t\t\t<select class=gf-form-input ng-model=ctrl.target.scenarioId ng-options="v.id as v.name for v in ctrl.scenarioList" ng-change=ctrl.scenarioChanged()></select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="gf-form gf-form gf-form--grow" ng-if=ctrl.scenario.stringInput>\n\t\t\t<label class="gf-form-label query-keyword">String Input</label>\n      <input type=text class=gf-form-input placeholder={{ctrl.scenario.stringInput}} ng-model=ctrl.target.stringInput ng-change=ctrl.refresh() ng-model-onblur>\n\t\t</div>\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label query-keyword">Alias</label>\n\t\t\t<input type=text class="gf-form-input max-width-7" placeholder=optional ng-model=ctrl.target.alias ng-change=ctrl.refresh() ng-model-onblur>\n\t\t</div>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n\t<div class=gf-form-inline ng-if="ctrl.scenario.id === \'manual_entry\'">\n\t\t<div class="gf-form gf-form">\n\t\t\t<label class="gf-form-label query-keyword width-7">New value</label>\n      <input type=number class="gf-form-input width-15" placeholder=value ng-model=ctrl.newPointValue>\n\t\t\t<label class="gf-form-label query-keyword">Time</label>\n      <input type=string class="gf-form-input width-12" placeholder=time ng-model=ctrl.newPointTime input-datetime>\n\t\t\t<button class="btn btn-secondary gf-form-btn" ng-click=ctrl.addPoint()>Add</button>\n\t\t\t<label class="gf-form-label query-keyword">All values</label>\n\t\t\t<gf-form-dropdown css-class=width-12 model=ctrl.selectedPoint get-options=ctrl.getPoints() on-change=ctrl.pointSelected($option)>\n\t\t\t</gf-form-dropdown>\n\t\t</div>\n\t\t<div class="gf-form gf-form" ng-if="ctrl.selectedPoint.value !== null">\n\t\t\t<button class="btn btn-danger gf-form-btn" ng-click=ctrl.deletePoint()>Delete</button>\n\t\t</div>\n\t\t<div class="gf-form gf-form--grow">\n\t\t\t<div class="gf-form-label gf-form-label--grow"></div>\n\t\t</div>\n\t</div>\n</query-editor-row>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/alertlist/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Options</h5>\n    <div class=gf-form>\n      <span class="gf-form-label width-8">Show</span>\n      <div class="gf-form-select-wrapper max-width-15">\n        <select class=gf-form-input ng-model=ctrl.panel.show ng-options="f.value as f.text for f in ctrl.showOptions" ng-change=ctrl.onRefresh()></select>\n      </div>\n    </div>\n    <div class=gf-form>\n      <span class="gf-form-label width-8">Max items</span>\n      <input type=text class="gf-form-input max-width-15" ng-model=ctrl.panel.limit ng-change=ctrl.onRefresh() />\n    </div>\n    <div class=gf-form ng-show="ctrl.panel.show === \'current\'">\n      <span class="gf-form-label width-8">Sort order</span>\n      <div class="gf-form-select-wrapper max-width-15">\n        <select class=gf-form-input ng-model=ctrl.panel.sortOrder ng-options="f.value as f.text for f in ctrl.sortOrderOptions" ng-change=ctrl.onRefresh()></select>\n      </div>\n    </div>\n    <gf-form-switch class=gf-form label="Alerts from this dashboard" label-class=width-18 checked=ctrl.panel.onlyAlertsOnDashboard on-change=ctrl.updateStateFilter()></gf-form-switch>\n  </div>\n  <div class="section gf-form-group" ng-show="ctrl.panel.show === \'current\'">\n    <h5 class=section-heading>Filter</h5>\n    <div class=gf-form>\n      <span class="gf-form-label width-8">Alert name</span>\n      <input type=text class="gf-form-input max-width-15" ng-model=ctrl.panel.nameFilter placeholder="Alert name query" ng-change=ctrl.onRefresh() />\n    </div>\n    <div class=gf-form>\n      <span class="gf-form-label width-8">Dashboard title</span>\n      <input type=text class=gf-form-input placeholder="Dashboard title query" ng-model=ctrl.panel.dashboardFilter ng-change=ctrl.onRefresh() ng-model-onblur>\n    </div>\n    <div class=gf-form>\n      <folder-picker initial-folder-id=ctrl.panel.folderId on-change=ctrl.onFolderChange($folder) label-class=width-8 initial-title="\'All\'" enable-reset=true>\n      </folder-picker>\n    </div>\n    <div class=gf-form>\n        <span class="gf-form-label width-8">Dashboard tags</span>\n        <bootstrap-tagsinput ng-model=ctrl.panel.dashboardTags tagclass="label label-tag" placeholder="add tags" on-tags-updated=ctrl.refresh()>\n        </bootstrap-tagsinput>\n    </div>\n  </div>\n  <div class="section gf-form-group" ng-show="ctrl.panel.show === \'current\'">\n    <h5 class=section-heading>State filter</h5>\n    <gf-form-switch class=gf-form label=Ok label-class=width-10 checked="ctrl.stateFilter[\'ok\']" on-change=ctrl.updateStateFilter()></gf-form-switch>\n    <gf-form-switch class=gf-form label=Paused label-class=width-10 checked="ctrl.stateFilter[\'paused\']" on-change=ctrl.updateStateFilter()></gf-form-switch>\n    <gf-form-switch class=gf-form label="No data" label-class=width-10 checked="ctrl.stateFilter[\'no_data\']" on-change=ctrl.updateStateFilter()></gf-form-switch>\n    <gf-form-switch class=gf-form label="Execution error" label-class=width-10 checked="ctrl.stateFilter[\'execution_error\']" on-change=ctrl.updateStateFilter()></gf-form-switch>\n    <gf-form-switch class=gf-form label=Alerting label-class=width-10 checked="ctrl.stateFilter[\'alerting\']" on-change=ctrl.updateStateFilter()></gf-form-switch>\n    <gf-form-switch class=gf-form label=Pending label-class=width-10 checked="ctrl.stateFilter[\'pending\']" on-change=ctrl.updateStateFilter()></gf-form-switch>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/alertlist/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=panel-alert-list>\n  <div class=panel-alert-list__no-alerts ng-show=ctrl.noAlertsMessage>\n    {{ctrl.noAlertsMessage}}\n  </div>\n\n  <section ng-if="ctrl.panel.show === \'current\'">\n    <ol class=alert-rule-list>\n      <li class=alert-rule-item ng-repeat="alert in ctrl.currentAlerts">\n        <div class="alert-rule-item__icon {{alert.stateModel.stateClass}}">\n          <i class={{alert.stateModel.iconClass}}></i>\n        </div>\n        <div class=alert-rule-item__body>\n          <div class=alert-rule-item__header>\n            <p class=alert-rule-item__name>\n              <a href="{{alert.url}}?panelId={{alert.panelId}}&fullscreen&edit&tab=alert">\n                {{alert.name}}\n              </a>\n            </p>\n            <div class=alert-rule-item__text>\n              <span class={{alert.stateModel.stateClass}}>{{alert.stateModel.text}}</span>\n              <span class=alert-rule-item__time>for {{alert.newStateDateAgo}}</span>\n            </div>\n          </div>\n        </div>\n      </li>\n    </ol>\n  </section>\n\n  <section ng-if="ctrl.panel.show === \'changes\'">\n    <ol class=alert-rule-list>\n      <li class=alert-rule-item ng-repeat="al in ctrl.alertHistory">\n        <div class="alert-rule-item__icon {{al.stateModel.stateClass}}">\n          <i class={{al.stateModel.iconClass}}></i>\n        </div>\n        <div class=alert-rule-item__body>\n          <div class=alert-rule-item__header>\n            <p class=alert-rule-item__name>{{al.alertName}}</p>\n            <div class=alert-rule-item__text>\n              <span class={{al.stateModel.stateClass}}>{{al.stateModel.text}}</span>\n            </div>\n          </div>\n          <span class=alert-rule-item__info>{{al.info}}</span>\n        </div>\n        <div class=alert-rule-item__time>\n          <span>{{al.time}}</span>\n        </div>\n      </li>\n    </ol>\n  </section>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/dashlist/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Options</h5>\n\n    <gf-form-switch class=gf-form label=Starred label-class=width-9 checked=ctrl.panel.starred on-change=ctrl.refresh()></gf-form-switch>\n    <gf-form-switch class=gf-form label="Recently viewed" label-class=width-9 checked=ctrl.panel.recent on-change=ctrl.refresh()></gf-form-switch>\n    <gf-form-switch class=gf-form label=Search label-class=width-9 checked=ctrl.panel.search on-change=ctrl.refresh()></gf-form-switch>\n\n    <gf-form-switch class=gf-form label="Show headings" label-class=width-9 checked=ctrl.panel.headings on-change=ctrl.refresh()></gf-form-switch>\n\n    <div class=gf-form>\n      <span class="gf-form-label width-9">Max items</span>\n      <input class="gf-form-input max-width-5" type=number ng-model=ctrl.panel.limit ng-model-onblur ng-change=ctrl.refresh()>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Search</h5>\n\n    <div class=gf-form>\n      <span class="gf-form-label width-6">Query</span>\n      <input type=text class=gf-form-input placeholder="title query" ng-model=ctrl.panel.query ng-change=ctrl.refresh() ng-model-onblur>\n    </div>\n\n    <div class=gf-form>\n      <folder-picker initial-folder-id=ctrl.panel.folderId on-change=ctrl.onFolderChange($folder) label-class=width-6 initial-title="\'All\'" enable-reset=true>\n\t\t\t</folder-picker>\n    </div>\n\n    <div class=gf-form>\n      <span class="gf-form-label width-6">Tags</span>\n      <bootstrap-tagsinput ng-model=ctrl.panel.tags tagclass="label label-tag" placeholder="add tags" on-tags-updated=ctrl.refresh()>\n      </bootstrap-tagsinput>\n    </div>\n  </div>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/dashlist/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div>\n  <div class=dashlist ng-repeat="group in ctrl.groups">\n    <div class=dashlist-section ng-if=group.show>\n      <h6 class=dashlist-section-header ng-show=ctrl.panel.headings>\n        {{group.header}}\n      </h6>\n      <div class=dashlist-item ng-repeat="dash in group.list">\n        <a class="dashlist-link dashlist-link-{{dash.type}}" href={{dash.url}}>\n          <span class=dashlist-title>\n            {{dash.title}}\n          </span>\n          <span class=dashlist-star ng-click="ctrl.starDashboard(dash, $event)">\n            <i class=fa ng-class="{\'fa-star\': dash.isStarred, \'fa-star-o\': dash.isStarred === false}"></i>\n          </span>\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/gettingstarted/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Mode</span>\n\t\t\t<div class="gf-form-select-wrapper max-width-10">\n\t\t\t\t<select class=gf-form-input ng-model=ctrl.panel.mode ng-options="f for f in ctrl.modes" ng-change=ctrl.refresh()></select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=gf-form ng-show="ctrl.panel.mode === \'recently viewed\'">\n\t\t\t<span class=gf-form-label>\n\t\t\t\t<i class="grafana-tip fa fa-question-circle ng-scope" bs-tooltip="\'WARNING: This list will be cleared when clearing browser cache\'" data-original-title="" title=""></i>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline ng-if="ctrl.panel.mode === \'search\'">\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Search options</span>\n\t\t\t<span class=gf-form-label>Query</span>\n\n\t\t\t<input type=text class=gf-form-input placeholder="title query" ng-model=ctrl.panel.query ng-change=ctrl.refresh() ng-model-onblur>\n\n\t\t</div>\n\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>Tags</span>\n\n\t\t\t<bootstrap-tagsinput ng-model=ctrl.panel.tags tagclass="label label-tag" placeholder="add tags" on-tags-updated=ctrl.refresh()>\n\t\t\t</bootstrap-tagsinput>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Limit number to</span>\n\t\t\t<input class=gf-form-input type=number ng-model=ctrl.panel.limit ng-model-onblur ng-change=ctrl.refresh()>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/gettingstarted/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=dashlist ng-if=ctrl.checksDone>\n  <div class=dashlist-section>\n\t\t<button class=dashlist-cta-close-btn ng-click=ctrl.dismiss()>\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</button>\n\t\t<ul class=progress-tracker>\n\t\t\t<li class=progress-step ng-repeat="step in ctrl.steps" ng-class=step.cssClass>\n\t\t\t\t<a class=progress-link ng-href={{step.href}} target={{step.target}} title={{step.note}}>\n\t\t\t\t\t<span class=progress-marker ng-class=step.cssClass><i class={{step.icon}}></i></span>\n\t\t\t\t\t<span class=progress-text ng-href={{step.href}} target={{step.target}}>{{step.title}}</span>\n\t\t\t\t</a>\n\t\t\t\t<a class="btn progress-step-cta" ng-href={{step.href}} target={{step.target}}>{{step.cta}}</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/graph/axes_editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n\t<div class="section gf-form-group" ng-repeat="yaxis in ctrl.panel.yaxes">\n\n\t\t<h5 class=section-heading ng-show="$index === 0">Left Y</h5>\n\t\t<h5 class=section-heading ng-show="$index === 1">Right Y</h5>\n\n\t\t<gf-form-switch class=gf-form label=Show label-class=width-6 checked=yaxis.show on-change=ctrl.render()></gf-form-switch>\n\n\t\t<div ng-if=yaxis.show>\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-6">Unit</label>\n\t\t\t\t<div class="gf-form-dropdown-typeahead max-width-20" ng-model=yaxis.format dropdown-typeahead2=ctrl.unitFormats dropdown-typeahead-on-select="ctrl.setUnitFormat(yaxis, $subItem)"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-6">Scale</label>\n\t\t\t\t<div class="gf-form-select-wrapper max-width-20">\n\t\t\t\t\t<select class=gf-form-input ng-model=yaxis.logBase ng-options="v as k for (k, v) in ctrl.logScales" ng-change=ctrl.render()></select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form-inline>\n\t\t\t\t<div class=gf-form>\n\t\t\t\t\t<label class="gf-form-label width-6">Y-Min</label>\n\t\t\t\t\t<input type=text class="gf-form-input width-5" placeholder=auto empty-to-null ng-model=yaxis.min ng-change=ctrl.render() ng-model-onblur>\n\t\t\t\t</div>\n\t\t\t\t<div class=gf-form>\n\t\t\t\t\t<label class="gf-form-label width-6">Y-Max</label>\n\t\t\t\t\t<input type=text class="gf-form-input width-5" placeholder=auto empty-to-null ng-model=yaxis.max ng-change=ctrl.render() ng-model-onblur>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t<div ng-if=yaxis.show>\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-6">Decimals</label>\n\t\t\t\t<input type=number class="gf-form-input max-width-20" placeholder=auto empty-to-null bs-tooltip="\'Override automatic decimal precision for y-axis\'" data-placement=right ng-model=yaxis.decimals ng-change=ctrl.render() ng-model-onblur>\n\t\t\t</div>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-6">Label</label>\n\t\t\t\t<input type=text class="gf-form-input max-width-20" ng-model=yaxis.label ng-change=ctrl.render() ng-model-onblur>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="section gf-form-group">\n\t\t<h5 class=section-heading>X-Axis</h5>\n\t\t<gf-form-switch class=gf-form label=Show label-class=width-6 checked=ctrl.panel.xaxis.show on-change=ctrl.render()></gf-form-switch>\n\n\t\t<div class=gf-form>\n\t\t\t<label class="gf-form-label width-6">Mode</label>\n\t\t\t<div class="gf-form-select-wrapper max-width-15">\n\t\t\t\t<select class=gf-form-input ng-model=ctrl.panel.xaxis.mode ng-options="v as k for (k, v) in ctrl.xAxisModes" ng-change=ctrl.xAxisModeChanged()> </select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- Series mode --\x3e\n\t\t<div class=gf-form ng-if="ctrl.panel.xaxis.mode === \'series\'">\n\t\t\t<label class="gf-form-label width-6">Value</label>\n      <metric-segment-model property=ctrl.panel.xaxis.values[0] options=ctrl.xAxisStatOptions on-change=ctrl.xAxisValueChanged() custom=false css-class=width-10 select-mode=true></metric-segment-model>\n\t\t</div>\n\n\t\t\x3c!-- Histogram mode --\x3e\n\t\t<div class=gf-form ng-if="ctrl.panel.xaxis.mode === \'histogram\'">\n\t\t\t<label class="gf-form-label width-6">Buckets</label>\n\t\t\t<input type=number class="gf-form-input max-width-8" ng-model=ctrl.panel.xaxis.buckets placeholder=auto ng-change=ctrl.render() ng-model-onblur bs-tooltip="\'Number of buckets\'" data-placement=right>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<br/>\n\t\t\t<h5 class=section-heading>Y-Axes</h5>\n\t\t\t<gf-form-switch class=gf-form label=Align tooltip="Align left and right Y-axes" label-class=width-6 switch-class=width-5 checked=ctrl.panel.yaxis.align on-change=ctrl.render()></gf-form-switch>\n\t\t\t<div class=gf-form ng-show=ctrl.panel.yaxis.align>\n\t\t\t\t<label class="gf-form-label width-6">\n\t\t\t\t\tLevel\n\t\t\t\t</label>\n\t\t\t\t<input type=number class="gf-form-input width-5" placeholder=0 ng-model=ctrl.panel.yaxis.alignLevel ng-change=ctrl.render() ng-model-onblur bs-tooltip="\'Alignment of Y-axes are based on this value, starting from Y=0\'" data-placement=right>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/graph/tab_display.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Draw Modes</h5>\n    <gf-form-switch class=gf-form label=Bars label-class=width-5 checked=ctrl.panel.bars on-change=ctrl.render()></gf-form-switch>\n    <gf-form-switch class=gf-form label=Lines label-class=width-5 checked=ctrl.panel.lines on-change=ctrl.render()></gf-form-switch>\n    <gf-form-switch class=gf-form label=Points label-class=width-5 checked=ctrl.panel.points on-change=ctrl.render()></gf-form-switch>\n  </div>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Mode Options</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Fill</label>\n      <div class="gf-form-select-wrapper max-width-5">\n        <select class=gf-form-input ng-model=ctrl.panel.fill ng-options="f for f in [0,1,2,3,4,5,6,7,8,9,10]" ng-change=ctrl.render() ng-disabled=!ctrl.panel.lines></select>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Line Width</label>\n      <div class="gf-form-select-wrapper max-width-5">\n        <select class=gf-form-input ng-model=ctrl.panel.linewidth ng-options="f for f in [0,1,2,3,4,5,6,7,8,9,10]" ng-change=ctrl.render() ng-disabled=!ctrl.panel.lines></select>\n      </div>\n    </div>\n    <gf-form-switch ng-disabled=!ctrl.panel.lines class=gf-form label=Staircase label-class=width-8 checked=ctrl.panel.steppedLine on-change=ctrl.render()>\n    </gf-form-switch>\n    <div class=gf-form ng-if=ctrl.panel.points>\n      <label class="gf-form-label width-8">Point Radius</label>\n      <div class="gf-form-select-wrapper max-width-5">\n        <select class=gf-form-input ng-model=ctrl.panel.pointradius ng-options="f for f in [0.5,1,2,3,4,5,6,7,8,9,10]" ng-change=ctrl.render()></select>\n      </div>\n    </div>\n  </div>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Hover tooltip</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-9">Mode</label>\n      <div class="gf-form-select-wrapper max-width-8">\n        <select class=gf-form-input ng-model=ctrl.panel.tooltip.shared ng-options="f.value as f.text for f in [{text: \'All series\', value: true}, {text: \'Single\', value: false}]" ng-change=ctrl.render()></select>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-9">Sort order</label>\n      <div class="gf-form-select-wrapper max-width-8">\n        <select class=gf-form-input ng-model=ctrl.panel.tooltip.sort ng-options="f.value as f.text for f in [{text: \'None\', value: 0}, {text: \'Increasing\', value: 1}, {text: \'Decreasing\', value: 2}]" ng-change=ctrl.render()></select>\n      </div>\n    </div>\n    <div class=gf-form ng-show=ctrl.panel.stack>\n      <label class="gf-form-label width-9">Stacked value</label>\n      <div class="gf-form-select-wrapper max-width-8">\n        <select class=gf-form-input ng-model=ctrl.panel.tooltip.value_type ng-options="f for f in [\'cumulative\',\'individual\']" ng-change=ctrl.render()></select>\n      </div>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Stacking & Null value</h5>\n    <gf-form-switch class=gf-form label=Stack label-class=width-7 checked=ctrl.panel.stack on-change=ctrl.refresh()>\n    </gf-form-switch>\n    <gf-form-switch class=gf-form ng-show=ctrl.panel.stack label=Percent label-class=width-7 checked=ctrl.panel.percentage on-change=ctrl.render()>\n    </gf-form-switch>\n    <div class=gf-form>\n      <label class="gf-form-label width-7">Null value</label>\n      <div class=gf-form-select-wrapper>\n        <select class="gf-form-input max-width-9" ng-model=ctrl.panel.nullPointMode ng-options="f for f in [\'connected\', \'null\', \'null as zero\']" ng-change=ctrl.render()></select>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div>\n  <div class=gf-form-inline ng-repeat="override in ctrl.panel.seriesOverrides" ng-controller=SeriesOverridesCtrl>\n    <div class=gf-form>\n      <label class=gf-form-label>alias or regex</label>\n    </div>\n    <div class="gf-form width-15">\n      <input type=text ng-model=override.alias bs-typeahead=getSeriesNames ng-blur=ctrl.render() data-min-length=0 data-items=100 class="gf-form-input width-15"/>\n    </div>\n    <div class=gf-form ng-repeat="option in currentOverrides">\n      <label class=gf-form-label>\n        <i class="pointer fa fa-remove" ng-click=removeOverride(option)></i>\n        <span ng-show="option.propertyName === \'color\'">\n          Color: <i class="fa fa-circle" ng-style={color:option.value}></i>\n        </span>\n        <span ng-show="option.propertyName !== \'color\'"> {{ option.name }}: {{ option.value }} </span>\n      </label>\n    </div>\n\n    <div class=gf-form>\n      <span class=dropdown dropdown-typeahead2=overrideMenu dropdown-typeahead-on-select="setOverride($item, $subItem)" button-template-class=gf-form-label>\n      </span>\n    </div>\n\n    <div class="gf-form gf-form--grow">\n      <div class="gf-form-label gf-form-label--grow"></div>\n    </div>\n\n    <div class=gf-form>\n      <label class=gf-form-label>\n        <i class="fa fa-trash pointer" ng-click=ctrl.removeSeriesOverride(override)></i>\n      </label>\n    </div>\n  </div>\n  <div class=gf-form-button-row>\n    <button class="btn btn-inverse" ng-click=ctrl.addSeriesOverride()>\n      <i class="fa fa-plus"></i>&nbsp;Add series override<tip>Regex match example: /server[0-3]/i </tip>\n    </button>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/graph/tab_legend.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n\t<div class="section gf-form-group">\n\t\t<h5 class=section-heading>Options</h5>\n\t\t<gf-form-switch class=gf-form label=Show label-class=width-7 checked=ctrl.panel.legend.show on-change=ctrl.render()>\n\t\t</gf-form-switch>\n\t\t<gf-form-switch class=gf-form label="As Table" label-class=width-7 checked=ctrl.panel.legend.alignAsTable on-change=ctrl.render()>\n\t\t</gf-form-switch>\n\t\t<gf-form-switch class=gf-form label="To the right" label-class=width-7 checked=ctrl.panel.legend.rightSide on-change=ctrl.render()>\n\t\t</gf-form-switch>\n\t\t<div ng-if=ctrl.panel.legend.rightSide class=gf-form>\n\t\t\t<label class="gf-form-label width-7">Width</label>\n\t\t\t<input type=number class="gf-form-input max-width-5" placeholder=250 bs-tooltip="\'Set a min-width for the legend side table/block\'" data-placement=right ng-model=ctrl.panel.legend.sideWidth ng-change=ctrl.render() ng-model-onblur>\n\t\t</div>\n\t</div>\n\n\t<div class="section gf-form-group">\n\t\t<h5 class=section-heading>Values</h5>\n\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-switch class=gf-form label=Min label-class=width-4 checked=ctrl.panel.legend.min on-change=ctrl.legendValuesOptionChanged()>\n\t\t\t</gf-form-switch>\n\n\t\t\t<gf-form-switch class="gf-form max-width-12" label=Max label-class=width-6 switch-class=max-width-5 checked=ctrl.panel.legend.max on-change=ctrl.legendValuesOptionChanged()>\n\t\t\t</gf-form-switch>\n\t\t</div>\n\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-switch class=gf-form label=Avg label-class=width-4 checked=ctrl.panel.legend.avg on-change=ctrl.legendValuesOptionChanged()>\n\t\t\t</gf-form-switch>\n\n\t\t\t<gf-form-switch class="gf-form max-width-12" label=Current label-class=width-6 switch-class=max-width-5 checked=ctrl.panel.legend.current on-change=ctrl.legendValuesOptionChanged()>\n\t\t\t</gf-form-switch>\n\t\t</div>\n\n\t\t<div class=gf-form-inline>\n\t\t\t<gf-form-switch class=gf-form label=Total label-class=width-4 checked=ctrl.panel.legend.total on-change=ctrl.legendValuesOptionChanged()>\n\t\t\t</gf-form-switch>\n\n\t\t\t<div class=gf-form>\n\t\t\t\t<label class="gf-form-label width-6">Decimals</label>\n\t\t\t\t<input type=number class="gf-form-input width-5" placeholder=auto bs-tooltip="\'Override automatic decimal precision for legend and tooltips\'" data-placement=right ng-model=ctrl.panel.decimals ng-change=ctrl.render() ng-model-onblur>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="section gf-form-group">\n\t\t<h5 class=section-heading>Hide series</h5>\n\t\t<gf-form-switch class=gf-form label="With only nulls" label-class=width-10 checked=ctrl.panel.legend.hideEmpty on-change=ctrl.render()>\n\t\t</gf-form-switch>\n\t\t<gf-form-switch class=gf-form label="With only zeros" label-class=width-10 checked=ctrl.panel.legend.hideZero on-change=ctrl.render()>\n\t\t</gf-form-switch>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/graph/tab_thresholds_time_regions.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<graph-threshold-form panel-ctrl=ctrl></graph-threshold-form>\n<graph-time-region-form panel-ctrl=ctrl></graph-time-region-form>")}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/graph/thresholds_form.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<div class=gf-form-group>\n  <p class=muted ng-show=ctrl.disabled>\n    Visual thresholds options <strong>disabled.</strong>\n    Visit the Alert tab update your thresholds. <br>\n    To re-enable thresholds, the alert rule must be deleted from this panel.\n  </p>\n  <div ng-class=\"{'thresholds-form-disabled': ctrl.disabled}\">\n    <div class=gf-form-inline ng-repeat=\"threshold in ctrl.panel.thresholds\">\n      <div class=gf-form>\n        <label class=gf-form-label>T{{$index+1}}</label>\n      </div>\n\n      <div class=gf-form>\n        <div class=gf-form-select-wrapper>\n          <select class=gf-form-input ng-model=threshold.op ng-options=\"f for f in ['gt', 'lt']\" ng-change=ctrl.render() ng-disabled=ctrl.disabled></select>\n        </div>\n        <input type=number ng-model=threshold.value class=\"gf-form-input width-8\" ng-change=ctrl.render() placeholder=value ng-disabled=ctrl.disabled>\n      </div>\n\n      <div class=gf-form>\n        <label class=gf-form-label>Color</label>\n        <div class=gf-form-select-wrapper>\n          <select class=gf-form-input ng-model=threshold.colorMode ng-options=\"f for f in ['custom', 'critical', 'warning', 'ok']\" ng-change=ctrl.render() ng-disabled=ctrl.disabled>\n          </select>\n        </div>\n      </div>\n\n      <gf-form-switch class=gf-form label=Fill checked=threshold.fill on-change=ctrl.render() ng-disabled=ctrl.disabled></gf-form-switch>\n\n      <div class=gf-form ng-if=\"threshold.fill && threshold.colorMode === 'custom'\">\n        <label class=gf-form-label>Fill color</label>\n        <span class=gf-form-label>\n          <color-picker color=threshold.fillColor onchange=ctrl.onFillColorChange($index)></color-picker>\n        </span>\n      </div>\n\n      <gf-form-switch class=gf-form label=Line checked=threshold.line on-change=ctrl.render() ng-disabled=ctrl.disabled></gf-form-switch>\n\n      <div class=gf-form ng-if=\"threshold.line && threshold.colorMode === 'custom'\">\n        <label class=gf-form-label>Line color</label>\n        <span class=gf-form-label>\n          <color-picker color=threshold.lineColor onchange=ctrl.onLineColorChange($index)></color-picker>\n        </span>\n      </div>\n\n      <div class=gf-form>\n        <label class=gf-form-label>Y-Axis</label>\n        <div class=gf-form-select-wrapper>\n          <select class=gf-form-input ng-model=threshold.yaxis ng-init=\"threshold.yaxis = threshold.yaxis === 'left' || threshold.yaxis === 'right' ? threshold.yaxis : 'left'\" ng-options=\"f for f in ['left', 'right']\" ng-change=ctrl.render() ng-disabled=ctrl.disabled>\n          </select>\n        </div>\n      </div>\n\n      <div class=gf-form>\n        <label class=gf-form-label>\n          <a class=pointer ng-click=ctrl.removeThreshold($index) ng-disabled=ctrl.disabled>\n            <i class=\"fa fa-trash\"></i>\n          </a>\n        </label>\n      </div>\n    </div>\n\n    <div class=gf-form-button-row>\n      <button class=\"btn btn-inverse\" ng-click=ctrl.addThreshold() ng-disabled=ctrl.disabled>\n        <i class=\"fa fa-plus\"></i>&nbsp;Add Threshold\n      </button>\n    </div>\n  </div>\n</div>")}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/graph/time_regions_form.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<div class=gf-form-group>\n  <div class=gf-form-inline ng-repeat=\"timeRegion in ctrl.panel.timeRegions\">\n    <div class=gf-form>\n      <label class=gf-form-label>T{{$index+1}}</label>\n    </div>\n\n    <div class=gf-form>\n      <label class=gf-form-label>From</label>\n      <div class=gf-form-select-wrapper>\n        <select class=\"gf-form-input width-6\" ng-model=timeRegion.fromDayOfWeek ng-options=\"f.d as f.value for f in [{d: undefined, value: 'Any'}, {d:1, value: 'Mon'}, {d:2, value: 'Tue'}, {d:3, value: 'Wed'}, {d:4, value: 'Thu'}, {d:5, value: 'Fri'}, {d:6, value: 'Sat'}, {d:7, value: 'Sun'}]\" ng-change=ctrl.render()></select>\n      </div>\n      <input type=text ng-maxlength=5 ng-model=timeRegion.from class=\"gf-form-input width-5\" ng-change=ctrl.render() placeholder=hh:mm>\n      <label class=gf-form-label>To</label>\n      <div class=gf-form-select-wrapper>\n        <select class=\"gf-form-input width-6\" ng-model=timeRegion.toDayOfWeek ng-options=\"f.d as f.value for f in [{d: undefined, value: 'Any'}, {d:1, value: 'Mon'}, {d:2, value: 'Tue'}, {d:3, value: 'Wed'}, {d:4, value: 'Thu'}, {d:5, value: 'Fri'}, {d:6, value: 'Sat'}, {d:7, value: 'Sun'}]\" ng-change=ctrl.render()></select>\n      </div>\n      <input type=text ng-maxlength=5 ng-model=timeRegion.to class=\"gf-form-input width-5\" ng-change=ctrl.render() placeholder=hh:mm>\n    </div>\n\n    <div class=gf-form>\n      <label class=gf-form-label>Color</label>\n      <div class=gf-form-select-wrapper>\n        <select class=gf-form-input ng-model=timeRegion.colorMode ng-options=\"f.key as f.value for f in ctrl.colorModes\" ng-change=ctrl.render()>\n        </select>\n      </div>\n    </div>\n\n    <gf-form-switch class=gf-form label=Fill checked=timeRegion.fill on-change=ctrl.render()></gf-form-switch>\n\n    <div class=gf-form ng-if=\"timeRegion.fill && timeRegion.colorMode === 'custom'\">\n      <label class=gf-form-label>Fill color</label>\n      <span class=gf-form-label>\n        <color-picker color=timeRegion.fillColor onchange=ctrl.onFillColorChange($index)></color-picker>\n      </span>\n    </div>\n\n    <gf-form-switch class=gf-form label=Line checked=timeRegion.line on-change=ctrl.render()></gf-form-switch>\n\n    <div class=gf-form ng-if=\"timeRegion.line && timeRegion.colorMode === 'custom'\">\n      <label class=gf-form-label>Line color</label>\n      <span class=gf-form-label>\n        <color-picker color=timeRegion.lineColor onchange=ctrl.onLineColorChange($index)></color-picker>\n      </span>\n    </div>\n\n    <div class=gf-form>\n      <label class=gf-form-label>\n        <a class=pointer ng-click=ctrl.removeTimeRegion($index)>\n          <i class=\"fa fa-trash\"></i>\n        </a>\n      </label>\n    </div>\n  </div>\n\n  <div class=gf-form-button-row>\n    <button class=\"btn btn-inverse\" ng-click=ctrl.addTimeRegion()>\n      <i class=\"fa fa-plus\"></i>&nbsp;Add time region<tip>All configured time regions refers to UTC time</tip>\n    </button>\n  </div>\n</div>")}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/heatmap/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<div class=heatmap-wrapper>\n\t<div class=heatmap-canvas-wrapper>\n\n\t\t<div class=datapoints-warning ng-if=ctrl.dataWarning>\n\t\t\t<span class=small bs-tooltip=ctrl.dataWarning.tip>{{ctrl.dataWarning.title}}</span>\n\t\t</div>\n\n\t\t<div class=heatmap-panel ng-dblclick=ctrl.zoomOut()></div>\n\t</div>\n\t<div class=heatmap-legend-wrapper ng-if=ctrl.panel.legend.show>\n\t\t<heatmap-legend></heatmap-legend>\n\t</div>\n</div>\n<div class=clearfix></div>\n")}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/heatmap/partials/axes_editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Y Axis</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Unit</label>\n      <div class="gf-form-dropdown-typeahead width-12" ng-model=ctrl.panel.yAxis.format dropdown-typeahead2=editor.unitFormats dropdown-typeahead-on-select=editor.setUnitFormat($subItem)>\n      </div>\n    </div>\n    <div ng-if="ctrl.panel.dataFormat == \'timeseries\'">\n      <div class=gf-form>\n        <label class="gf-form-label width-8">Scale</label>\n        <div class="gf-form-select-wrapper width-12">\n          <select class=gf-form-input ng-model=ctrl.panel.yAxis.logBase ng-options="v as k for (k, v) in editor.logScales" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-8">Y-Min</label>\n        <input type=text class="gf-form-input width-12" placeholder=auto empty-to-null ng-model=ctrl.panel.yAxis.min ng-change=ctrl.render() ng-model-onblur>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-8">Y-Max</label>\n        <input type=text class="gf-form-input width-12" placeholder=auto empty-to-null ng-model=ctrl.panel.yAxis.max ng-change=ctrl.render() ng-model-onblur>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Decimals</label>\n      <input type=number class="gf-form-input width-12" placeholder=auto data-placement=right bs-tooltip="\'Override automatic decimal precision for axis.\'" ng-model=ctrl.panel.yAxis.decimals ng-change=ctrl.render() ng-model-onblur>\n    </div>\n    <div class=gf-form ng-if="ctrl.panel.dataFormat == \'tsbuckets\'">\n      <label class="gf-form-label width-8">Bucket bound</label>\n      <div class="gf-form-select-wrapper max-width-12">\n        <select class=gf-form-input ng-model=ctrl.panel.yBucketBound ng-options="v as k for (k, v) in editor.yBucketBoundModes" ng-change=ctrl.render() data-placement=right bs-tooltip="\'Use series label as an upper or lower bucket bound.\'">\n        </select>\n      </div>\n    </div>\n  </div>\n\n  <div class="section gf-form-group" ng-if="ctrl.panel.dataFormat == \'timeseries\'">\n    <h5 class=section-heading>Buckets</h5>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label width-5">Y Axis</label>\n      </div>\n      <div class=gf-form ng-show="ctrl.panel.yAxis.logBase === 1">\n        <label class="gf-form-label width-5">Buckets</label>\n        <input type=number class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'Number of buckets for Y axis.\'" ng-model=ctrl.panel.yBucketNumber ng-change=ctrl.refresh() ng-model-onblur>\n      </div>\n      <div class=gf-form ng-show="ctrl.panel.yAxis.logBase === 1">\n        <label class="gf-form-label width-4">Size</label>\n        <input type=number class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'Size of bucket. Has priority over Buckets option.\'" ng-model=ctrl.panel.yBucketSize ng-change=ctrl.refresh() ng-model-onblur>\n      </div>\n      <div class=gf-form ng-show="ctrl.panel.yAxis.logBase !== 1">\n        <label class="gf-form-label width-10">Split Factor</label>\n        <input type=number class="gf-form-input width-9" placeholder=1 data-placement=right bs-tooltip="\'For log scales only. By default Y values is splitted by integer powers of log base (1, 2, 4, 8, 16, ... for log2). This option allows to split each default bucket into specified number of buckets.\'" ng-model=ctrl.panel.yAxis.splitFactor ng-change=ctrl.refresh() ng-model-onblur>\n        \n      </div>\n    </div>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label width-5">X Axis</label>\n        <label class="gf-form-label width-5">Buckets</label>\n        <input type=number class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'Number of buckets for X axis.\'" ng-model=ctrl.panel.xBucketNumber ng-change=ctrl.refresh() ng-model-onblur>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-4">Size</label>\n        <input type=text class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'Size of bucket. Number or interval (10s, 5m, 1h, etc). Supported intervals: ms, s, m, h, d, w, M, y. Has priority over Buckets option.\'" ng-model=ctrl.panel.xBucketSize ng-change=ctrl.refresh() ng-model-onblur>\n      </div>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Data format</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-5">Format</label>\n      <div class="gf-form-select-wrapper max-width-15">\n        <select class=gf-form-input ng-model=ctrl.panel.dataFormat ng-options="v as k for (k, v) in editor.dataFormats" ng-change=ctrl.render() data-placement=right bs-tooltip="\'Time series: create heatmap from regular time series. <br>Time series buckets: use histogram data returned from data source. Each series represents bucket which upper/lower bound is a series label.\'">\n        </select>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/heatmap/partials/display_editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Colors</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-9">Mode</label>\n      <div class="gf-form-select-wrapper width-8">\n        <select class="input-small gf-form-input" ng-model=ctrl.panel.color.mode ng-options="s for s in ctrl.colorModes" ng-change=ctrl.render()></select>\n      </div>\n    </div>\n\n    <div ng-show="ctrl.panel.color.mode === \'opacity\'">\n      <div class=gf-form>\n        <label class="gf-form-label width-9">Color</label>\n        <span class=gf-form-label>\n          <color-picker color=ctrl.panel.color.cardColor onchange=ctrl.onCardColorChange></color-picker>\n        </span>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-9">Scale</label>\n        <div class="gf-form-select-wrapper width-8">\n          <select class="input-small gf-form-input" ng-model=ctrl.panel.color.colorScale ng-options="s for s in ctrl.opacityScales" ng-change=ctrl.render()></select>\n        </div>\n      </div>\n      <div class=gf-form ng-if="ctrl.panel.color.colorScale === \'sqrt\'">\n        <label class="gf-form-label width-9">Exponent</label>\n        <input type=number class="gf-form-input width-8" placeholder=auto data-placement=right bs-tooltip="\'\'" ng-model=ctrl.panel.color.exponent ng-change=ctrl.refresh() ng-model-onblur>\n      </div>\n    </div>\n\n    <div ng-show="ctrl.panel.color.mode === \'spectrum\'">\n      <div class=gf-form>\n        <label class="gf-form-label width-9">Scheme</label>\n        <div class="gf-form-select-wrapper width-8">\n          <select class="input-small gf-form-input" ng-model=ctrl.panel.color.colorScheme ng-options="s.value as s.name for s in ctrl.colorSchemes" ng-change=ctrl.render()></select>\n        </div>\n      </div>\n    </div>\n\n    <div class=gf-form>\n      <color-legend></color-legend>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Color scale</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Min</label>\n      <input type=number ng-model=ctrl.panel.color.min class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'\'" ng-change=ctrl.refresh() ng-model-onblur>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Max</label>\n      <input type=number ng-model=ctrl.panel.color.max class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'\'" ng-change=ctrl.refresh() ng-model-onblur>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Legend</h5>\n    <gf-form-switch class=gf-form label-class=width-8 label="Show legend" checked=ctrl.panel.legend.show on-change=ctrl.render()>\n    </gf-form-switch>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Buckets</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Space</label>\n      <input type=number class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'\'" ng-model=ctrl.panel.cards.cardPadding ng-change=ctrl.refresh() ng-model-onblur>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Round</label>\n      <input type=number class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'\'" ng-model=ctrl.panel.cards.cardRound ng-change=ctrl.refresh() ng-model-onblur>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Tooltip</h5>\n    <gf-form-switch class=gf-form label-class=width-8 label="Show tooltip" checked=ctrl.panel.tooltip.show on-change=ctrl.render()>\n    </gf-form-switch>\n    <div ng-if=ctrl.panel.tooltip.show>\n      <gf-form-switch class=gf-form label-class=width-8 label=Histogram checked=ctrl.panel.tooltip.showHistogram on-change=ctrl.render()>\n      </gf-form-switch>\n      <div class=gf-form>\n        <label class="gf-form-label width-8">Decimals</label>\n        <input type=number class="gf-form-input width-5" placeholder=auto data-placement=right bs-tooltip="\'Max decimal precision for tooltip.\'" ng-model=ctrl.panel.tooltipDecimals ng-change=ctrl.render() ng-model-onblur>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/pluginlist/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=gf-form-group>\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Mode</span>\n\t\t\t<div class="gf-form-select-wrapper max-width-10">\n\t\t\t\t<select class=gf-form-input ng-model=ctrl.panel.mode ng-options="f for f in ctrl.modes" ng-change=ctrl.refresh()></select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=gf-form ng-show="ctrl.panel.mode === \'recently viewed\'">\n\t\t\t<span class=gf-form-label>\n\t\t\t\t<i class="grafana-tip fa fa-question-circle ng-scope" bs-tooltip="\'WARNING: This list will be cleared when clearing browser cache\'" data-original-title="" title=""></i>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline ng-if="ctrl.panel.mode === \'search\'">\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Search options</span>\n\t\t\t<span class=gf-form-label>Query</span>\n\n\t\t\t<input type=text class=gf-form-input placeholder="title query" ng-model=ctrl.panel.query ng-change=ctrl.refresh() ng-model-onblur>\n\n\t\t</div>\n\n\t\t<div class=gf-form>\n\t\t\t<span class=gf-form-label>Tags</span>\n\n\t\t\t<bootstrap-tagsinput ng-model=ctrl.panel.tags tagclass="label label-tag" placeholder="add tags" on-tags-updated=ctrl.refresh()>\n\t\t\t</bootstrap-tagsinput>\n\t\t</div>\n\t</div>\n\n\t<div class=gf-form-inline>\n\t\t<div class=gf-form>\n\t\t\t<span class="gf-form-label width-10">Limit number to</span>\n\t\t\t<input class=gf-form-input type=number ng-model=ctrl.panel.limit ng-model-onblur ng-change=ctrl.refresh()>\n\t\t</div>\n\t</div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/pluginlist/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=pluginlist>\n  <div class=pluginlist-section ng-repeat="category in ctrl.viewModel">\n    <h6 class=pluginlist-section-header>\n      {{category.header}}\n    </h6>\n    <div class=pluginlist-item ng-repeat="plugin in category.list">\n      <a class="pluginlist-link pluginlist-link-{{plugin.state}} pointer" href={{plugin.defaultNavUrl}}>\n        <span>\n          <img ng-src={{plugin.info.logos.small}} class=pluginlist-image>\n          <span class=pluginlist-title>{{plugin.name}}</span>\n          <span class=pluginlist-version>v{{plugin.info.version}}</span>\n        </span>\n        <span class="pluginlist-message pluginlist-message--update" ng-show=plugin.hasUpdate ng-click="ctrl.updateAvailable(plugin, $event)" bs-tooltip="\'New version: \' + plugin.latestVersion">\n          Update available!\n        </span>\n        <span class="pluginlist-message pluginlist-message--enable" ng-show="!plugin.enabled && !plugin.hasUpdate">\n          Enable now\n        </span>\n        <span class="pluginlist-message pluginlist-message--no-update" ng-show="plugin.enabled && !plugin.hasUpdate">\n          Up to date\n        </span>\n      </a>\n    </div>\n    <div class=pluginlist-item ng-show="category.list.length === 0">\n      <a class="pluginlist-link pluginlist-link-{{plugin.state}}" href=https://grafana.com/plugins>\n        <span class=pluginlist-none-installed>None installed. <span class=pluginlist-emphasis>Browse Grafana.com</span></span>\n      </a>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/singlestat/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Value</h5>\n\n    <div class=gf-form-inline>\n      <div class=gf-form ng-show="ctrl.dataType === \'timeseries\'">\n        <label class="gf-form-label width-6">Stat</label>\n        <div class="gf-form-select-wrapper width-12">\n          <select class=gf-form-input ng-model=ctrl.panel.valueName ng-options="f.value as f.text for f in ctrl.valueNameOptions" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class=gf-form ng-show="ctrl.dataType === \'table\'">\n        <label class="gf-form-label width-6">Column</label>\n        <div class="gf-form-select-wrapper width-12">\n          <select class=gf-form-input ng-model=ctrl.panel.tableColumn ng-options="f for f in ctrl.tableColumnOptions" ng-change=ctrl.refresh()></select>\n        </div>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-6">Font size</label>\n        <div class=gf-form-select-wrapper>\n          <select class=gf-form-input ng-model=ctrl.panel.valueFontSize ng-options="f for f in ctrl.fontSizes" ng-change=ctrl.render()></select>\n        </div>\n      </div>\n    </div>\n\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label width-6">Prefix</label>\n        <input type=text class="gf-form-input width-12" ng-model=ctrl.panel.prefix ng-change=ctrl.render() ng-model-onblur>\n        <label class="gf-form-label width-6">Font size</label>\n        <div class=gf-form-select-wrapper>\n          <select class=gf-form-input ng-model=ctrl.panel.prefixFontSize ng-options="f for f in ctrl.fontSizes" ng-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></select>\n        </div>\n      </div>\n    </div>\n\n    <div class=gf-form>\n      <label class="gf-form-label width-6">Postfix</label>\n      <input type=text class="gf-form-input width-12" ng-model=ctrl.panel.postfix ng-change=ctrl.render() ng-model-onblur>\n      <label class="gf-form-label width-6">Font size</label>\n      <div class=gf-form-select-wrapper>\n        <select class="input-small gf-form-input" ng-model=ctrl.panel.postfixFontSize ng-options="f for f in ctrl.fontSizes" ng-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></select>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-6">Unit</label>\n      <div class="gf-form-dropdown-typeahead width-18" ng-model=ctrl.panel.format dropdown-typeahead2=ctrl.unitFormats dropdown-typeahead-on-select=ctrl.setUnitFormat($subItem)></div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-6">Decimals</label>\n      <input type=number class="gf-form-input width-18" placeholder=auto data-placement=right bs-tooltip="\'Override automatic decimal precision for legend and tooltips\'" ng-model=ctrl.panel.decimals ng-change=ctrl.refresh() ng-model-onblur>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Coloring</h5>\n    <div class=gf-form-inline>\n      <gf-form-switch class=gf-form label-class=width-8 label=Background checked=ctrl.panel.colorBackground on-change=ctrl.render()></gf-form-switch>\n      <gf-form-switch class=gf-form label-class=width-6 label=Value checked=ctrl.panel.colorValue on-change=ctrl.render()></gf-form-switch>\n    </div>\n    <div class=gf-form-inline>\n      <gf-form-switch class=gf-form label-class=width-8 label=Prefix checked=ctrl.panel.colorPrefix on-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></gf-form-switch>\n      <gf-form-switch class=gf-form label-class=width-6 label=Postfix checked=ctrl.panel.colorPostfix on-change=ctrl.render() ng-disabled=!ctrl.canModifyText()></gf-form-switch>\n    </div>\n    <div class=gf-form-inline>\n      <div class="gf-form max-width-21">\n        <label class="gf-form-label width-8">Thresholds\n          <tip>Define two threshold values&lt;br /&gt; 50,80 will produce: value &lt; 50 = Green, 50 &lt;= value &lt; 80 = Yellow, value &gt;= 80 = Red</tip>\n        </label>\n        <input type=text class=gf-form-input ng-model=ctrl.panel.thresholds ng-blur=ctrl.render() placeholder=50,80>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Colors</label>\n      <span class=gf-form-label ng-repeat="color in ctrl.panel.colors track by $index">\n        <color-picker color=color onchange=ctrl.onColorChange($index)></color-picker>\n      </span>\n      <span class=gf-form-label>\n        <a ng-click=ctrl.invertColorOrder()>\n          Invert\n        </a>\n      </span>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Spark lines</h5>\n    <gf-form-switch class=gf-form label-class=width-9 label=Show checked=ctrl.panel.sparkline.show on-change=ctrl.render()></gf-form-switch>\n    <div ng-if=ctrl.panel.sparkline.show>\n      <gf-form-switch class=gf-form label-class=width-9 label="Full height" checked=ctrl.panel.sparkline.full on-change=ctrl.render()></gf-form-switch>\n      <div class=gf-form>\n        <label class="gf-form-label width-9">Line Color</label>\n        <span class=gf-form-label>\n          <color-picker color=ctrl.panel.sparkline.lineColor onchange=ctrl.onSparklineColorChange></color-picker>\n        </span>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-9">Fill Color</label>\n        <span class=gf-form-label>\n          <color-picker color=ctrl.panel.sparkline.fillColor onchange=ctrl.onSparklineFillChange></color-picker>\n        </span>\n      </div>\n    </div>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Gauge</h5>\n    <gf-form-switch class=gf-form label-class=width-10 switch-class=max-width-6 label=Show checked=ctrl.panel.gauge.show on-change=ctrl.render()></gf-form-switch>\n    <div ng-if=ctrl.panel.gauge.show>\n      <div class=gf-form>\n        <label class="gf-form-label width-10">Min</label>\n        <input type=number class="gf-form-input width-6" placeholder=0 data-placement=right ng-model=ctrl.panel.gauge.minValue ng-change=ctrl.refresh() ng-model-onblur>\n        <label class="gf-form-label alert-state-critical" ng-show=ctrl.invalidGaugeRange>\n          &nbsp; <i class="fa fa-warning"></i>\n          Min value is bigger than max.\n        </label>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-10">Max</label>\n        <input type=number class="gf-form-input width-6" placeholder=0 data-placement=right ng-model=ctrl.panel.gauge.maxValue ng-change=ctrl.refresh() ng-model-onblur>\n      </div>\n      <gf-form-switch class=gf-form label-class=width-10 switch-class=max-width-6 label="Threshold labels" checked=ctrl.panel.gauge.thresholdLabels on-change=ctrl.render()></gf-form-switch>\n      <gf-form-switch class=gf-form label-class=width-10 switch-class=max-width-6 label="Threshold markers" checked=ctrl.panel.gauge.thresholdMarkers on-change=ctrl.render()></gf-form-switch>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/singlestat/mappings.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n  <div class=gf-form-group>\n    <div class=gf-form>\n        <span class=gf-form-label>\n          Type\n        </span>\n        <div class=gf-form-select-wrapper>\n          <select class=gf-form-input ng-model=ctrl.panel.mappingType ng-options="f.value as f.name for f in ctrl.panel.mappingTypes" ng-change=ctrl.render()></select>\n        </div>\n    </div>\n  </div>\n</div>\n<div class=editor-row ng-if="ctrl.panel.mappingType==1">\n  <h5 class=page-heading>Set value mappings</h5>\n  <div class=gf-form-group>\n    <div class=gf-form ng-repeat="map in ctrl.panel.valueMaps">\n      <span class=gf-form-label>\n        <i class="fa fa-remove pointer" ng-click=ctrl.removeValueMap(map)></i>\n      </span>\n      <input type=text ng-model=map.value placeholder=value class="gf-form-input max-width-6" ng-blur=ctrl.render()>\n      <span class=gf-form-label>\n        <i class="fa fa-arrow-right"></i>\n      </span>\n      <input type=text placeholder=text ng-model=map.text class="gf-form-input max-width-8" ng-blur=ctrl.render()>\n    </div>\n\n    <div class=gf-form-button-row>\n      <button class="btn btn-inverse" ng-click=ctrl.addValueMap();>\n        <i class="fa fa-plus"></i>\n        Add a value mapping\n      </button>\n    </div>\n  </div>\n</div>\n<div class=editor-row ng-if="ctrl.panel.mappingType==2">\n  <h5 class=page-heading>Set range mappings</h5>\n  <div class=gf-form-group>\n    <div class=gf-form ng-repeat="rangeMap in ctrl.panel.rangeMaps">\n        <span class=gf-form-label>\n          <i class="fa fa-remove pointer" ng-click=ctrl.removeRangeMap(rangeMap)></i>\n        </span>\n        <span class=gf-form-label>From</span>\n        <input type=text ng-model=rangeMap.from class="gf-form-input max-width-6" ng-blur=ctrl.render()>\n        <span class=gf-form-label>To</span>\n        <input type=text ng-model=rangeMap.to class="gf-form-input max-width-6" ng-blur=ctrl.render()>\n        <span class=gf-form-label>Text</span>\n        <input type=text ng-model=rangeMap.text class="gf-form-input max-width-8" ng-blur=ctrl.render()>\n    </div>\n\n    <div class=gf-form-button-row>\n      <button class="btn btn-inverse" ng-click=ctrl.addRangeMap()>\n        <i class="fa fa-plus"></i>\n        Add a range mapping\n      </button>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/singlestat/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<div class=singlestat-panel>\n\n</div>\n")}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/table/column_options.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=edit-tab-content ng-repeat="style in editor.panel.styles">\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Options</h5>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label width-12">Apply to columns named</label>\n        <input type=text placeholder="Name or regex" class="gf-form-input width-13" ng-model=style.pattern bs-tooltip="\'Specify regex using /my.*regex/ syntax\'" bs-typeahead=editor.getColumnNames ng-blur=editor.render() data-min-length=0 data-items=100 ng-model-onblur data-placement=right>\n      </div>\n    </div>\n    <div class=gf-form ng-if="style.type !== \'hidden\'">\n      <label class="gf-form-label width-12">Column Header</label>\n      <input type=text class="gf-form-input width-12" ng-model=style.alias ng-change=editor.render() ng-model-onblur placeholder="Override header label">\n    </div>\n    <gf-form-switch class=gf-form label-class=width-12 label="Render value as link" checked=style.link change=editor.render()></gf-form-switch>\n  </div>\n\n  <div class="section gf-form-group">\n    <h5 class=section-heading>Type</h5>\n\n    <div class=gf-form>\n      <label class="gf-form-label width-10">Type</label>\n      <div class="gf-form-select-wrapper width-16">\n        <select class=gf-form-input ng-model=style.type ng-options="c.value as c.text for c in editor.columnTypes" ng-change=editor.render()></select>\n      </div>\n    </div>\n    <div class=gf-form ng-if="style.type === \'date\'">\n      <label class="gf-form-label width-10">Date Format</label>\n      <gf-form-dropdown model=style.dateFormat css-class="gf-form-input width-16" lookup-text=true get-options=editor.dateFormats on-change=editor.render() allow-custom=true>\n      </gf-form-dropdown>\n    </div>\n\n    <div ng-if="style.type === \'string\'">\n      <gf-form-switch class=gf-form label-class=width-10 ng-if="style.type === \'string\'" label="Sanitize HTML" checked=style.sanitize change=editor.render()></gf-form-switch>\n    </div>\n    <div ng-if="style.type === \'string\'">\n      <gf-form-switch class=gf-form label-class=width-10 ng-if="style.type === \'string\'" label="Preserve Formatting" checked=style.preserveFormat change=editor.render()></gf-form-switch>\n    </div>\n\n    <div ng-if="style.type === \'number\'">\n      <div class=gf-form>\n        <label class="gf-form-label width-10">Unit</label>\n        <div class="gf-form-dropdown-typeahead width-16" ng-model=style.unit dropdown-typeahead2=editor.unitFormats dropdown-typeahead-on-select="editor.setUnitFormat(style, $subItem)"></div>\n      </div>\n      <div class=gf-form>\n        <label class="gf-form-label width-10">Decimals</label>\n        <input type=number class="gf-form-input width-4" data-placement=right ng-model=style.decimals ng-change=editor.render() ng-model-onblur>\n      </div>\n    </div>\n  </div>\n\n  <div class="section gf-form-group" ng-if="style.type === \'string\'">\n    <h5 class=section-heading>Value Mappings</h5>\n    <div class=editor-row>\n      <div class=gf-form-group>\n        <div class=gf-form>\n          <span class=gf-form-label>\n            Type\n          </span>\n          <div class=gf-form-select-wrapper>\n            <select class=gf-form-input ng-model=style.mappingType ng-options="c.value as c.text for c in editor.mappingTypes" ng-change=editor.render()></select>\n          </div>\n        </div>\n        <div class=gf-form-group ng-if="style.mappingType==1">\n          <div class=gf-form ng-repeat="map in style.valueMaps">\n            <span class=gf-form-label>\n              <i class="fa fa-remove pointer" ng-click="editor.removeValueMap(style, $index)"></i>\n            </span>\n            <input type=text class="gf-form-input max-width-6" ng-model=map.value placeholder=Value ng-blur=editor.render()>\n            <label class=gf-form-label>\n              <i class="fa fa-arrow-right"></i>\n            </label>\n            <input type=text class="gf-form-input max-width-8" ng-model=map.text placeholder=Text ng-blur=editor.render()>\n          </div>\n          <div class=gf-form>\n            <label class=gf-form-label>\n              <a class=pointer ng-click=editor.addValueMap(style)><i class="fa fa-plus"></i></a>\n            </label>\n          </div>\n        </div>\n        <div class=gf-form-group ng-if="style.mappingType==2">\n          <div class=gf-form ng-repeat="rangeMap in style.rangeMaps">\n            <span class=gf-form-label>\n              <i class="fa fa-remove pointer" ng-click="editor.removeRangeMap(style, $index)"></i>\n            </span>\n            <span class=gf-form-label>From</span>\n            <input type=text ng-model=rangeMap.from class="gf-form-input max-width-6" ng-blur=editor.render()>\n            <span class=gf-form-label>To</span>\n            <input type=text ng-model=rangeMap.to class="gf-form-input max-width-6" ng-blur=editor.render()>\n            <span class=gf-form-label>Text</span>\n            <input type=text ng-model=rangeMap.text class="gf-form-input max-width-8" ng-blur=editor.render()>\n          </div>\n          <div class=gf-form>\n            <label class=gf-form-label>\n              <a class=pointer ng-click=editor.addRangeMap(style)><i class="fa fa-plus"></i></a>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="section gf-form-group" ng-if="[\'number\', \'string\'].indexOf(style.type) !== -1">\n    <h5 class=section-heading>Thresholds</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Thresholds\n        <tip>Comma separated values</tip>\n      </label>\n      <input type=text class="gf-form-input width-10" ng-model=style.thresholds placeholder=50,80 ng-blur=editor.render() array-join>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Color Mode</label>\n      <div class="gf-form-select-wrapper width-10">\n        <select class=gf-form-input ng-model=style.colorMode ng-options="c.value as c.text for c in editor.colorModes" ng-change=editor.render()></select>\n      </div>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Colors</label>\n      <span class=gf-form-label>\n        <color-picker color=style.colors[0] onchange=editor.onColorChange($index,0)></color-picker>\n      </span>\n      <span class=gf-form-label>\n        <color-picker color=style.colors[1] onchange=editor.onColorChange($index,1)></color-picker>\n      </span>\n      <span class=gf-form-label>\n        <color-picker color=style.colors[2] onchange=editor.onColorChange($index,2)></color-picker>\n      </span>\n      <div class=gf-form-label>\n        <a class=pointer ng-click=editor.invertColorOrder($index)>Invert</a>\n      </div>\n    </div>\n  </div>\n\n  <div class="section gf-form-group" ng-if=style.link>\n    <h5 class=section-heading>Link</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-9">\n        Url\n        <info-popover mode=right-normal>\n          <p>Specify an URL (relative or absolute)</p>\n          <span>\n            Use special variables to specify cell values:\n            <br>\n            <em>${__cell}</em> refers to current cell value\n            <br>\n            <em>${__cell_n}</em> refers to Nth column value in current row. Column indexes are started from 0. For instance,\n            <em>${__cell_1}</em> refers to second column\'s value.\n            <br>\n            <em>${__cell:raw}</em> syntax. By default values are URI encoded. If the value is a complete URL you can disable all encoding using\n          </span>\n        </info-popover>\n      </label>\n      <input type=text class="gf-form-input width-29" ng-model=style.linkUrl ng-blur=editor.render() ng-model-onblur data-placement=right>\n    </div>\n    <div class=gf-form>\n      <label class="gf-form-label width-9">\n        Tooltip\n        <info-popover mode=right-normal>\n          <p>Specify text for link tooltip.</p>\n          <span>\n              This title appears when user hovers pointer over the cell with link. Use the same variables as for URL.\n          </span>\n        </info-popover>\n      </label>\n      <input type=text class="gf-form-input width-29" ng-model=style.linkTooltip ng-blur=editor.render() ng-model-onblur data-placement=right>\n    </div>\n    <gf-form-switch class=gf-form label-class=width-9 label="Open in new tab" checked=style.linkTargetBlank></gf-form-switch>\n  </div>\n\n  <div class=clearfix></div>\n  <div class=gf-form-group>\n    <button class="btn btn-danger btn-small" ng-click=editor.removeColumnStyle(style)>\n      <i class="fa fa-trash"></i> Remove Rule\n    </button>\n  </div>\n\n  <hr>\n</div>\n\n<div class=gf-form-button-row>\n  <button class="btn btn-inverse" ng-click=editor.addColumnStyle()>\n    <i class="fa fa-plus"></i>&nbsp;Add column style\n  </button>\n</div>\n\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/table/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class=editor-row>\n\t<div class="section gf-form-group">\n\t\t<h5 class=section-heading>Data</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-10">Table Transform</label>\n      <div class="gf-form-select-wrapper max-width-15">\n        <select class=gf-form-input ng-model=editor.panel.transform ng-options="k as v.description for (k, v) in editor.transformers" ng-change=editor.transformChanged()></select>\n      </div>\n    </div>\n    <div class=gf-form-inline>\n      <div class=gf-form>\n        <label class="gf-form-label width-10">Columns</label>\n      </div>\n\t\t\t<div class=gf-form ng-repeat="column in editor.panel.columns">\n\t\t\t\t<label class=gf-form-label>\n\t\t\t\t\t<i class="pointer fa fa-remove" ng-click=editor.removeColumn(column)></i>\n\t\t\t\t\t<span>{{column.text}}</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=gf-form ng-show=editor.canSetColumns>\n\t\t\t\t<metric-segment segment=editor.addColumnSegment get-options=editor.getColumnOptions() on-change=editor.addColumn()></metric-segment>\n\t\t\t</div>\n\t\t\t<div class=gf-form ng-hide=editor.canSetColumns>\n\t\t\t\t<label class=gf-form-label>\n\t\t\t\t\tAuto\n\t\t\t\t\t<info-popover mode=right-normal ng-if=editor.columnsHelpMessage>\n\t\t\t\t\t\t{{editor.columnsHelpMessage}}\n\t\t\t\t\t</info-popover>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="section gf-form-group">\n\t\t<h5 class=section-heading>Paging</h5>\n    <div class=gf-form>\n      <label class="gf-form-label width-8">Rows per page</label>\n      <input type=number class="gf-form-input width-7" placeholder=100 data-placement=right ng-model=editor.panel.pageSize ng-change=editor.render() ng-model-onblur>\n    </div>\n    <gf-form-switch class=gf-form label-class=width-8 switch-class=max-width-7 label=Scroll checked=editor.panel.scroll on-change=editor.render()></gf-form-switch>\n    <div class="gf-form max-width-17">\n      <label class="gf-form-label width-8">Font size</label>\n      <div class="gf-form-select-wrapper width-7">\n        <select class=gf-form-input ng-model=editor.panel.fontSize ng-options="f for f in editor.fontSizes" ng-change=editor.render()></select>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/table/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div class=table-panel-container>\n\t<div class=table-panel-header-bg ng-show=ctrl.table.rows.length></div>\n\t<div class=table-panel-scroll ng-show=ctrl.table.rows.length>\n\t\t<table class=table-panel-table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th ng-repeat="col in ctrl.table.columns" ng-if=!col.hidden>\n\t\t\t\t\t\t<div class="table-panel-table-header-inner pointer" ng-click="ctrl.toggleColumnSort(col, $index)">\n\t\t\t\t\t\t\t{{col.title}}\n\t\t\t\t\t\t\t<span class=table-panel-table-header-controls ng-if=col.sort>\n\t\t\t\t\t\t\t\t<i class="fa fa-caret-down" ng-show=col.desc></i>\n\t\t\t\t\t\t\t\t<i class="fa fa-caret-up" ng-hide=col.desc></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>\n<div class=datapoints-warning ng-show="ctrl.table.rows.length===0">\n\t<span class=small>\n\t\tNo data to show <tip>Nothing returned by data query</tip>\n\t</span>\n</div>\n<div class=table-panel-footer>\n</div>\n')}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/text/editor.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,"<div class=gf-form-inline>\n\t<div class=gf-form>\n\t\t<span class=gf-form-label>Mode</span>\n\t\t<span class=gf-form-select-wrapper>\n\t\t\t<select class=gf-form-input ng-model=ctrl.panel.mode ng-options=\"f for f in ['html','markdown']\"></select>\n\t\t</span>\n\t</div>\n</div>\n\n<div class=gf-form-inline>\n\t<div class=\"gf-form gf-form--grow\">\n\t\t<code-editor content=ctrl.panel.content on-change=ctrl.render() data-mode=markdown data-max-lines=20>\n\t\t</code-editor>\n\t</div>\n</div>\n")}]),e.exports=n},function(e,t){var n="public/app/plugins/panel/text/module.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<p class="markdown-html panel-text-content" ng-bind-html=ctrl.content ng-show=ctrl.content>\n</p>\n')}]),e.exports=n},,function(e,t){ace.define("ace/theme/grafana-dark",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!0,t.cssClass="gf-code-dark",t.cssText=".gf-code-dark .ace_gutter {  background: #2f3129;  color: #8f908a  }  .gf-code-dark .ace_print-margin {  width: 1px;  background: #555651  }  .gf-code-dark {  background-color: #09090b;  color: #e0e0e0  }  .gf-code-dark .ace_cursor {  color: #f8f8f0  }  .gf-code-dark .ace_marker-layer .ace_selection {  background: #49483e  }  .gf-code-dark.ace_multiselect .ace_selection.ace_start {  box-shadow: 0 0 3px 0px #272822;  }  .gf-code-dark .ace_marker-layer .ace_step {  background: rgb(102, 82, 0)  }  .gf-code-dark .ace_marker-layer .ace_bracket {  margin: -1px 0 0 -1px;  border: 1px solid #49483e  }  .gf-code-dark .ace_marker-layer .ace_active-line {  background: #202020  }  .gf-code-dark .ace_gutter-active-line {  background-color: #272727  }  .gf-code-dark .ace_marker-layer .ace_selected-word {  border: 1px solid #49483e  }  .gf-code-dark .ace_invisible {  color: #52524d  }  .gf-code-dark .ace_entity.ace_name.ace_tag,  .gf-code-dark .ace_keyword,  .gf-code-dark .ace_meta.ace_tag,  .gf-code-dark .ace_storage {  color: #66d9ef  }  .gf-code-dark .ace_punctuation,  .gf-code-dark .ace_punctuation.ace_tag {  color: #fff  }  .gf-code-dark .ace_constant.ace_character,  .gf-code-dark .ace_constant.ace_language,  .gf-code-dark .ace_constant.ace_numeric,  .gf-code-dark .ace_constant.ace_other {  color: #fe85fc  }  .gf-code-dark .ace_invalid {  color: #f8f8f0;  background-color: #f92672  }  .gf-code-dark .ace_invalid.ace_deprecated {  color: #f8f8f0;  background-color: #ae81ff  }  .gf-code-dark .ace_support.ace_constant,  .gf-code-dark .ace_support.ace_function {  color: #59e6e3  }  .gf-code-dark .ace_fold {  background-color: #a6e22e;  border-color: #f8f8f2  }  .gf-code-dark .ace_storage.ace_type,  .gf-code-dark .ace_support.ace_class,  .gf-code-dark .ace_support.ace_type {  font-style: italic;  color: #66d9ef  }  .gf-code-dark .ace_entity.ace_name.ace_function,  .gf-code-dark .ace_entity.ace_other,  .gf-code-dark .ace_entity.ace_other.ace_attribute-name,  .gf-code-dark .ace_variable {  color: #a6e22e  }  .gf-code-dark .ace_variable.ace_parameter {  font-style: italic;  color: #fd971f  }  .gf-code-dark .ace_string {  color: #74e680  }  .gf-code-dark .ace_paren {    color: #f0a842  }  .gf-code-dark .ace_operator {    color: #FFF  }  .gf-code-dark .ace_comment {  color: #75715e  }  .gf-code-dark .ace_indent-guide {  background: url(data:image/png;base64,ivborw0kggoaaaansuheugaaaaeaaaaccayaaaczgbynaaaaekleqvqimwpq0fd0zxbzd/wpaajvaoxesgneaaaaaelftksuqmcc) right repeat-y  }",e("../lib/dom").importCssString(t.cssText,t.cssClass)})},,,,,,,,,,,,,,,,,,function(e,t){!function(){var e=document,t=e.createElement("STYLE"),n="addEventListener"in e,a=function(t,a){n?e.addEventListener(t,a):e.attachEvent("on"+t,a)},r=function(e){t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e};e.getElementsByTagName("HEAD")[0].appendChild(t),a("mousedown",function(){r(":focus{outline:0 !important}::-moz-focus-inner{border:0;}")}),a("keydown",function(){r("")})}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){ace.define("ace/mode/prometheus_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var a=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,i=function(){var e=this.createKeywordMapper({"support.function":"abs|absent|ceil|changes|clamp_max|clamp_min|count_scalar|day_of_month|day_of_week|days_in_month|delta|deriv|drop_common_labels|exp|floor|histogram_quantile|holt_winters|hour|idelta|increase|irate|label_replace|ln|log2|log10|minute|month|predict_linear|rate|resets|round|scalar|sort|sort_desc|sqrt|time|vector|year|avg_over_time|min_over_time|max_over_time|sum_over_time|count_over_time|quantile_over_time|stddev_over_time|stdvar_over_time",keyword:"count|count_values|min|max|avg|sum|stddev|stdvar|bottomk|topk|quantile","constant.language":"true|false|null|__name__|job"},"identifier",!0);this.$rules={start:[{token:"string",regex:/"(?:[^"\\]|\\.)*?"/},{token:"string",regex:"'.*?'"},{token:"constant.numeric",regex:"[-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language",regex:"\\d+[smhdwy]"},{token:"keyword.operator.binary",regex:"\\+|\\-|\\*|\\/|%|\\^|==|!=|<=|>=|<|>|and|or|unless"},{token:"keyword.other",regex:"keep_common|offset|bool"},{token:"keyword.control",regex:"by|without|on|ignoring|group_left|group_right",next:"start-label-list-matcher"},{token:"variable",regex:"\\$[A-Za-z0-9_]+"},{token:e,regex:"[a-zA-Z_:][a-zA-Z0-9_:]*"},{token:"paren.lparen",regex:"[[(]"},{token:"paren.lparen.label-matcher",regex:"{",next:"start-label-matcher"},{token:"paren.rparen",regex:"[\\])]"},{token:"paren.rparen.label-matcher",regex:"}"},{token:"text",regex:"\\s+"}],"start-label-matcher":[{token:"entity.name.tag.label-matcher",regex:"[a-zA-Z_][a-zA-Z0-9_]*"},{token:"keyword.operator.label-matcher",regex:"=~|=|!~|!="},{token:"string.quoted.label-matcher",regex:"\"[^\"]*\"|'[^']*'"},{token:"punctuation.operator.label-matcher",regex:","},{token:"paren.rparen.label-matcher",regex:"}",next:"start"}],"start-label-list-matcher":[{token:"paren.lparen.label-list-matcher",regex:"[(]"},{token:"entity.name.tag.label-list-matcher",regex:"[a-zA-Z_][a-zA-Z0-9_]*"},{token:"punctuation.operator.label-list-matcher",regex:","},{token:"paren.rparen.label-list-matcher",regex:"[)]",next:"start"}]},this.normalizeRules()};a.inherits(i,r),t.PrometheusHighlightRules=i}),ace.define("ace/mode/prometheus_completions",["require","exports","module","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var a=e("../lib/lang"),r=["by","without","keep_common","offset","bool","and","or","unless","ignoring","on","group_left","group_right","count","count_values","min","max","avg","sum","stddev","stdvar","bottomk","topk","quantile"].map(function(e){return{caption:e,value:e,meta:"keyword",score:Number.MAX_VALUE}});var i=[{name:"abs()",value:"abs",def:"abs(v instant-vector)",docText:"Returns the input vector with all sample values converted to their absolute value."},{name:"absent()",value:"absent",def:"absent(v instant-vector)",docText:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{name:"ceil()",value:"ceil",def:"ceil(v instant-vector)",docText:"Rounds the sample values of all elements in `v` up to the nearest integer."},{name:"changes()",value:"changes",def:"changes(v range-vector)",docText:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{name:"clamp_max()",value:"clamp_max",def:"clamp_max(v instant-vector, max scalar)",docText:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{name:"clamp_min()",value:"clamp_min",def:"clamp_min(v instant-vector, min scalar)",docText:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{name:"count_scalar()",value:"count_scalar",def:"count_scalar(v instant-vector)",docText:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{name:"day_of_month()",value:"day_of_month",def:"day_of_month(v=vector(time()) instant-vector)",docText:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{name:"day_of_week()",value:"day_of_week",def:"day_of_week(v=vector(time()) instant-vector)",docText:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{name:"days_in_month()",value:"days_in_month",def:"days_in_month(v=vector(time()) instant-vector)",docText:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{name:"delta()",value:"delta",def:"delta(v range-vector)",docText:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{name:"deriv()",value:"deriv",def:"deriv(v range-vector)",docText:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{name:"drop_common_labels()",value:"drop_common_labels",def:"drop_common_labels(instant-vector)",docText:"Drops all labels that have the same name and value across all series in the input vector."},{name:"exp()",value:"exp",def:"exp(v instant-vector)",docText:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{name:"floor()",value:"floor",def:"floor(v instant-vector)",docText:"Rounds the sample values of all elements in `v` down to the nearest integer."},{name:"histogram_quantile()",value:"histogram_quantile",def:"histogram_quantile(φ float, b instant-vector)",docText:"Calculates the φ-quantile (0 ≤ φ ≤ 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{name:"holt_winters()",value:"holt_winters",def:"holt_winters(v range-vector, sf scalar, tf scalar)",docText:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{name:"hour()",value:"hour",def:"hour(v=vector(time()) instant-vector)",docText:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{name:"idelta()",value:"idelta",def:"idelta(v range-vector)",docText:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{name:"increase()",value:"increase",def:"increase(v range-vector)",docText:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{name:"irate()",value:"irate",def:"irate(v range-vector)",docText:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{name:"label_replace()",value:"label_replace",def:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",docText:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{name:"ln()",value:"ln",def:"ln(v instant-vector)",docText:"calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{name:"log2()",value:"log2",def:"log2(v instant-vector)",docText:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{name:"log10()",value:"log10",def:"log10(v instant-vector)",docText:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{name:"minute()",value:"minute",def:"minute(v=vector(time()) instant-vector)",docText:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{name:"month()",value:"month",def:"month(v=vector(time()) instant-vector)",docText:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{name:"predict_linear()",value:"predict_linear",def:"predict_linear(v range-vector, t scalar)",docText:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{name:"rate()",value:"rate",def:"rate(v range-vector)",docText:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{name:"resets()",value:"resets",def:"resets(v range-vector)",docText:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{name:"round()",value:"round",def:"round(v instant-vector, to_nearest=1 scalar)",docText:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{name:"scalar()",value:"scalar",def:"scalar(v instant-vector)",docText:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{name:"sort()",value:"sort",def:"sort(v instant-vector)",docText:"Returns vector elements sorted by their sample values, in ascending order."},{name:"sort_desc()",value:"sort_desc",def:"sort_desc(v instant-vector)",docText:"Returns vector elements sorted by their sample values, in descending order."},{name:"sqrt()",value:"sqrt",def:"sqrt(v instant-vector)",docText:"Calculates the square root of all elements in `v`."},{name:"time()",value:"time",def:"time()",docText:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{name:"vector()",value:"vector",def:"vector(s scalar)",docText:"Returns the scalar `s` as a vector with no labels."},{name:"year()",value:"year",def:"year(v=vector(time()) instant-vector)",docText:"Returns the year for each of the given times in UTC."},{name:"avg_over_time()",value:"avg_over_time",def:"avg_over_time(range-vector)",docText:"The average value of all points in the specified interval."},{name:"min_over_time()",value:"min_over_time",def:"min_over_time(range-vector)",docText:"The minimum value of all points in the specified interval."},{name:"max_over_time()",value:"max_over_time",def:"max_over_time(range-vector)",docText:"The maximum value of all points in the specified interval."},{name:"sum_over_time()",value:"sum_over_time",def:"sum_over_time(range-vector)",docText:"The sum of all values in the specified interval."},{name:"count_over_time()",value:"count_over_time",def:"count_over_time(range-vector)",docText:"The count of all values in the specified interval."},{name:"quantile_over_time()",value:"quantile_over_time",def:"quantile_over_time(scalar, range-vector)",docText:"The φ-quantile (0 ≤ φ ≤ 1) of the values in the specified interval."},{name:"stddev_over_time()",value:"stddev_over_time",def:"stddev_over_time(range-vector)",docText:"The population standard deviation of the values in the specified interval."},{name:"stdvar_over_time()",value:"stdvar_over_time",def:"stdvar_over_time(range-vector)",docText:"The population standard variance of the values in the specified interval."}].map(function(e){return{caption:e.name,value:e.value,docHTML:function(e){var t=a.escapeHTML(e.docText);return t=function(e){return e=(e=e.replace(/```(.+)```/,"<pre>$1</pre>")).replace(/`([^`]+)`/,"<code>$1</code>")}(function(e,t){for(var n=[],a=0,r=0,i=t=t||60,o="",s=0;s<e.length;s++)" "===e[s]?a=s:s>=i&&0!=a&&(o=e.slice(r,a),n.push(o),r=a+1,i=s+t,a=0);return o=e.slice(r),n.push(o),n.join("&nbsp<br>")}(t,40)),["<b>",a.escapeHTML(e.def),"</b>","<hr></hr>",t,"<br>&nbsp"].join("")}(e),meta:"function",score:Number.MAX_VALUE}}),o=function(){};(function(){this.getCompletions=function(e,t,n,a,o){var s=t.getTokenAt(n.row,n.column);if("entity.name.tag.label-matcher"===s.type||"string.quoted.label-matcher"===s.type||"entity.name.tag.label-list-matcher"===s.type)return o(null,[]);o(null,r.concat(i))}}).call(o.prototype),t.PrometheusCompletions=o}),ace.define("ace/mode/behaviour/prometheus",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(e,t,n){"use strict";var a=e("../../lib/oop"),r=(e("../behaviour").Behaviour,e("./cstyle").CstyleBehaviour);e("../../token_iterator").TokenIterator;var i=function(){this.inherit(r),this.add("braces","insertion",function(e,t,n,a,i){if("{"==i){var o=n.getSelectionRange(),s=a.doc.getTextRange(o);if(""!==s&&n.getWrapBehavioursEnabled())return function(e,t,n,a){var r=e.end.row-e.start.row;return{text:n+t+a,selection:[0,e.start.column+1,r,e.end.column+(r?0:1)]}}(o,s,"{","}");if(r.isSaneInsertion(n,a))return{text:"{}",selection:[1,1]}}else if("}"==i){var l=n.getCursorPosition(),c=a.doc.getLine(l.row);if("}"==c.substring(l.column,l.column+1))if(null!==a.$findOpeningBracket("}",{column:l.column+1,row:l.row})&&r.isAutoInsertedClosing(l,c,i))return{text:"",selection:[1,1]}}}),this.add("braces","deletion",function(e,t,n,a,r){var i=a.doc.getTextRange(r);if(!r.isMultiLine()&&"{"==i&&"}"==a.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2))return r.end.column++,r})};a.inherits(i,r),t.PrometheusBehaviour=i}),ace.define("ace/mode/prometheus",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/prometheus_highlight_rules"],function(e,t,n){"use strict";var a=e("../lib/oop"),r=e("./text").Mode,i=e("./prometheus_highlight_rules").PrometheusHighlightRules,o=e("./prometheus_completions").PrometheusCompletions,s=e("./behaviour/prometheus").PrometheusBehaviour,l=function(){this.HighlightRules=i,this.$behaviour=new s,this.$completer=new o,this.completer=this.$completer};a.inherits(l,r),function(){this.$id="ace/mode/prometheus"}.call(l.prototype),t.Mode=l})},function(e,t){ace.define("ace/snippets/prometheus",["require","exports","module"],function(e,t,n){"use strict";t.snippets=[{content:"rate(${1:metric}[${2:range}])",name:"rate()",scope:"prometheus",tabTrigger:"r"}],t.scope="prometheus"})},,,,function(e,t){!function(e){var t=10,n=.95;var a={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};e.plot.plugins.push({init:function(a){var r=null,i=null,o=null,s=null,l=null,c=!1,u=null,d=null,p=[];function h(t,n,a){c||(c=!0,r=t.getCanvas(),i=e(r).parent(),u=t.getOptions(),t.setData(function(t){for(var n=0,a=0,r=0,i=u.series.pie.combine.color,o=[],s=0;s<t.length;++s){var l=t[s].data;e.isArray(l)&&1==l.length&&(l=l[0]),e.isArray(l)?!isNaN(parseFloat(l[1]))&&isFinite(l[1])?l[1]=+l[1]:l[1]=0:l=!isNaN(parseFloat(l))&&isFinite(l)?[1,+l]:[1,0],t[s].data=[l]}for(var s=0;s<t.length;++s)n+=t[s].data[0][1];for(var s=0;s<t.length;++s){var l=t[s].data[0][1];l/n<=u.series.pie.combine.threshold&&(a+=l,r++,i||(i=t[s].color))}for(var s=0;s<t.length;++s){var l=t[s].data[0][1];(r<2||l/n>u.series.pie.combine.threshold)&&o.push({data:[[1,l]],color:t[s].color,label:t[s].label,angle:l*Math.PI*2/n,percent:l/(n/100)})}return r>1&&o.push({data:[[1,a]],color:i,label:u.series.pie.combine.label,angle:a*Math.PI*2/n,percent:a/(n/100)}),o}(t.getData())))}function f(a,r){if(i){var p=a.getPlaceholder().width(),h=a.getPlaceholder().height(),f=i.children().filter(".legend").children().width()||0;d=r,c=!1,o=Math.min(p,h/u.series.pie.tilt)/2,l=h/2+u.series.pie.offset.top,s=p/2,"auto"==u.series.pie.offset.left?u.legend.position.match("w")?s+=f/2:s-=f/2:s+=u.series.pie.offset.left,s<o?s=o:s>p-o&&(s=p-o);var g=a.getData(),v=0;do{v>0&&(o*=n),v+=1,b(),u.series.pie.tilt<=.8&&y()}while(!w()&&v<t);v>=t&&(b(),i.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),a.setSeries&&a.insertLegend&&(a.setSeries(g),a.insertLegend())}function b(){d.clearRect(0,0,p,h),i.children().filter(".pieLabel, .pieLabelBackground").remove()}function y(){var e=u.series.pie.shadow.left,t=u.series.pie.shadow.top,n=u.series.pie.shadow.alpha,a=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius;if(!(a>=p/2-e||a*u.series.pie.tilt>=h/2-t||a<=10)){d.save(),d.translate(e,t),d.globalAlpha=n,d.fillStyle="#000",d.translate(s,l),d.scale(1,u.series.pie.tilt);for(var r=1;r<=10;r++)d.beginPath(),d.arc(0,0,a,0,2*Math.PI,!1),d.fill(),a-=r;d.restore()}}function w(){var t=Math.PI*u.series.pie.startAngle,n=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius;d.save(),d.translate(s,l),d.scale(1,u.series.pie.tilt),d.save();for(var a=t,r=0;r<g.length;++r)g[r].startAngle=a,c(g[r].angle,g[r].color,!0);if(d.restore(),u.series.pie.stroke.width>0){for(d.save(),d.lineWidth=u.series.pie.stroke.width,a=t,r=0;r<g.length;++r)c(g[r].angle,u.series.pie.stroke.color,!1);d.restore()}return m(d),d.restore(),!u.series.pie.label.show||function(){for(var n=t,a=u.series.pie.label.radius>1?u.series.pie.label.radius:o*u.series.pie.label.radius,r=0;r<g.length;++r){if(g[r].percent>=100*u.series.pie.label.threshold&&!c(g[r],n,r))return!1;n+=g[r].angle}return!0;function c(t,n,r){if(0==t.data[0][1])return!0;var o,c=u.legend.labelFormatter,d=u.series.pie.label.formatter;o=c?c(t.label,t):t.label,d&&(o=d(o,t));var f=(n+t.angle+n)/2,m=s+Math.round(Math.cos(f)*a),g=l+Math.round(Math.sin(f)*a)*u.series.pie.tilt,v="<span class='pieLabel' id='pieLabel"+r+"' style='position:absolute;top:"+g+"px;left:"+m+"px;'>"+o+"</span>";i.append(v);var b=i.children("#pieLabel"+r),y=g-b.height()/2,w=m-b.width()/2;if(b.css("top",y),b.css("left",w),0-y>0||0-w>0||h-(y+b.height())<0||p-(w+b.width())<0)return!1;if(0!=u.series.pie.label.background.opacity){var x=u.series.pie.label.background.color;null==x&&(x=t.color);var S="top:"+y+"px;left:"+w+"px;";e("<div class='pieLabelBackground' style='position:absolute;width:"+b.width()+"px;height:"+b.height()+"px;"+S+"background-color:"+x+";'></div>").css("opacity",u.series.pie.label.background.opacity).insertBefore(b)}return!0}}();function c(e,t,r){e<=0||isNaN(e)||(r?d.fillStyle=t:(d.strokeStyle=t,d.lineJoin="round"),d.beginPath(),Math.abs(e-2*Math.PI)>1e-9&&d.moveTo(0,0),d.arc(0,0,n,a,a+e/2,!1),d.arc(0,0,n,a+e/2,a+e,!1),d.closePath(),a+=e,r?d.fill():d.stroke())}}}function m(e){if(u.series.pie.innerRadius>0){e.save();var t=u.series.pie.innerRadius>1?u.series.pie.innerRadius:o*u.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=u.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=u.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore()}}function g(e,t){for(var n=!1,a=-1,r=e.length,i=r-1;++a<r;i=a)(e[a][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[a][1])&&t[0]<(e[i][0]-e[a][0])*(t[1]-e[a][1])/(e[i][1]-e[a][1])+e[a][0]&&(n=!n);return n}function v(e){y("plothover",e)}function b(e){y("plotclick",e)}function y(e,t){var n=a.offset(),r=function(e,t){for(var n,r,i=a.getData(),c=a.getOptions(),u=c.series.pie.radius>1?c.series.pie.radius:o*c.series.pie.radius,p=0;p<i.length;++p){var h=i[p];if(h.pie.show){if(d.save(),d.beginPath(),d.moveTo(0,0),d.arc(0,0,u,h.startAngle,h.startAngle+h.angle/2,!1),d.arc(0,0,u,h.startAngle+h.angle/2,h.startAngle+h.angle,!1),d.closePath(),n=e-s,r=t-l,d.isPointInPath){if(d.isPointInPath(e-s,t-l))return d.restore(),{datapoint:[h.percent,h.data],dataIndex:0,series:h,seriesIndex:p}}else if(g([[0,0],[u*Math.cos(h.startAngle),u*Math.sin(h.startAngle)],[u*Math.cos(h.startAngle+h.angle/4),u*Math.sin(h.startAngle+h.angle/4)],[u*Math.cos(h.startAngle+h.angle/2),u*Math.sin(h.startAngle+h.angle/2)],[u*Math.cos(h.startAngle+h.angle/1.5),u*Math.sin(h.startAngle+h.angle/1.5)],[u*Math.cos(h.startAngle+h.angle),u*Math.sin(h.startAngle+h.angle)]],[n,r]))return d.restore(),{datapoint:[h.percent,h.data],dataIndex:0,series:h,seriesIndex:p};d.restore()}}return null}(parseInt(t.pageX-n.left),parseInt(t.pageY-n.top));if(u.grid.autoHighlight)for(var c=0;c<p.length;++c){var h=p[c];h.auto!=e||r&&h.series==r.series||w(h.series)}r&&function(e,t){var n=x(e);-1==n?(p.push({series:e,auto:t}),a.triggerRedrawOverlay()):t||(p[n].auto=!1)}(r.series,e);var f={pageX:t.pageX,pageY:t.pageY};i.trigger(e,[f,r])}function w(e){null==e&&(p=[],a.triggerRedrawOverlay());var t=x(e);-1!=t&&(p.splice(t,1),a.triggerRedrawOverlay())}function x(e){for(var t=0;t<p.length;++t)if(p[t].series==e)return t;return-1}a.hooks.processOptions.push(function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"==t.series.pie.label.show&&(t.legend.show?t.series.pie.label.show=!1:t.series.pie.label.show=!0),"auto"==t.series.pie.radius&&(t.series.pie.label.show?t.series.pie.radius=.75:t.series.pie.radius=1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))}),a.hooks.bindEvents.push(function(e,t){var n=e.getOptions();n.series.pie.show&&(n.grid.hoverable&&t.unbind("mousemove").mousemove(v),n.grid.clickable&&t.unbind("click").click(b))}),a.hooks.processDatapoints.push(function(e,t,n,a){e.getOptions().series.pie.show&&h(e)}),a.hooks.drawOverlay.push(function(e,t){e.getOptions().series.pie.show&&function(e,t){var n=e.getOptions(),a=n.series.pie.radius>1?n.series.pie.radius:o*n.series.pie.radius;t.save(),t.translate(s,l),t.scale(1,n.series.pie.tilt);for(var r=0;r<p.length;++r)i(p[r].series);function i(e){e.angle<=0||isNaN(e.angle)||(t.fillStyle="rgba(255, 255, 255, "+n.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(e.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,a,e.startAngle,e.startAngle+e.angle/2,!1),t.arc(0,0,a,e.startAngle+e.angle/2,e.startAngle+e.angle,!1),t.closePath(),t.fill())}m(t),t.restore()}(e,t)}),a.hooks.draw.push(function(e,t){e.getOptions().series.pie.show&&f(e,t)})},options:a,name:"pie",version:"1.1"})}(jQuery)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1444},,,function(e,t,n){"use strict";A.$inject=["$route","$location","$injector","$rootScope","contextSrv"],Z.$inject=["$routeProvider","$locationProvider"],dt.$inject=["playlistSrv","contextSrv","$timeout","$rootScope","$location"],It.$inject=["$compile","datasourceSrv","$rootScope","$q","$http","$templateCache","$timeout"],Ft.$inject=["templateSrv"],jt.$inject=["$rootScope","$q","$location","$timeout","contextSrv","dashboardSrv","$window"],Wt.$inject=["$compile","$sanitize","linkSrv"],fn.$inject=["$scope","$rootScope","$location","$timeout","timeSrv","templateSrv","linkSrv"],Nn.$inject=["$routeProvider"],In.$inject=["$compile"],Ln.$inject=["dynamicDirectiveSrv"],Bn.$inject=["variableSrv"],la.$inject=["timer","$location"],n.r(t);n(725);var a=n(172),r=n(1),i=n.n(r),o=n(10),s=n.n(o),l=n(8),c=n.n(l),u=(n(894),n(896),n(898),n(900),n(0)),d=n.n(u),p=n(15),h=n.n(p),f=(n(905),n(906),n(907),n(7)),m=n(4),g=n.n(m),v=null;var b=function(){if(null!==v)return v;if("undefined"!=typeof document){var e=document.createElement("div"),t={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(t).map(function(n){e.style[n]=t[n]}),document.body.appendChild(e),v=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else v=0;return v||0}()>0,y=function(e,t){void 0===t&&(t=document.body),b&&t.classList.add(e)},w=n(5),x=n(17),S=n(58),k=function(){function e(e,t,n,a,r,i){e.appEvent("dashboard-fetch-start"),t.uid||t.slug?"script"===t.type||"snapshot"===t.type||t.uid?n.loadDashboard(t.type,t.slug,t.uid).then(function(n){if(n.meta.url){var a=S.a.stripBaseFromUrl(n.meta.url);if(a!==r.path())return void r.path(a).replace()}n.meta.autofitpanels=t.autofitpanels,n.meta.kiosk=t.kiosk,e.initDashboard(n,e)}):a.getDashboardBySlug(t.slug).then(function(e){e&&r.path(S.a.stripBaseFromUrl(e.meta.url)).replace()}):a.get("/api/dashboards/home").then(function(t){if(t.redirectUri){var n=S.a.stripBaseFromUrl(t.redirectUri);r.path(n)}else{var a=t.meta;a.canSave=a.canShare=a.canStar=!1,e.initDashboard(t,e)}})}return e.$inject=["$scope","$routeParams","dashboardLoaderSrv","backendSrv","$location","$browser"],e}(),C=function(){function e(e,t){e.initDashboard({meta:{canStar:!1,canShare:!1,isNew:!0,folderId:Number(t.folderId)},dashboard:{title:"New dashboard",panels:[{type:"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}]}},e)}return e.$inject=["$scope","$routeParams"],e}();w.c.controller("LoadDashboardCtrl",k),w.c.controller("NewDashboardCtrl",C);var E=n(2),T=n(23),M=n(63),_=n(200);function A(e,t,n,a,r){return{restrict:"E",template:"",link:function(i,o){var s=e.current.locals.roles;s&&s.length&&(s.some(function(e){return r.hasRole(e)})||t.url("/"));var l=e.current.locals.component;l.default&&(l=l.default);var c={$injector:n,$rootScope:a,$scope:i,routeInfo:e.current.$$route.routeInfo};document.body.classList.add("is-react"),h.a.render(function(e,t,n){return d.a.createElement(T.a,{store:e},d.a.createElement(t,E.a({},n)))}(M.b,Object(_.a)(l),c),o[0]),i.$on("$destroy",function(){document.body.classList.remove("is-react"),h.a.unmountComponentAtNode(o[0])})}}}w.c.directive("reactContainer",A);var D=[];var N=n(678),P=n(680),O=n(682),I=n(686),$=n(687),F=n(690),q=n(691),R=n(692),L=n(9),j=function(){function e(e,t,n,a){this.backendSrv=e,this.$location=t,this.validationSrv=n,this.title="",this.titleTouched=!1,this.navModel=a.getNav("dashboards","manage-dashboards",0)}return e.$inject=["backendSrv","$location","validationSrv","navModelSrv"],e.prototype.create=function(){var e=this;if(!this.hasValidationError)return this.backendSrv.createFolder({title:this.title}).then(function(t){L.b.emit("alert-success",["Folder Created","OK"]),e.$location.url(S.a.stripBaseFromUrl(t.url))})},e.prototype.titleChanged=function(){var e=this;this.titleTouched=!0,this.validationSrv.validateNewFolderName(this.title).then(function(){e.hasValidationError=!1}).catch(function(t){e.hasValidationError=!0,e.validationError=t.message})},e}(),U=function(){function e(e){this.backendSrv=e}return e.prototype.load=function(e,t,n){return e.navModel={main:{icon:"fa fa-folder-open",id:"manage-folder",subTitle:"Manage folder dashboards & permissions",url:"",text:"",breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:"manage-folder-dashboards"===n,icon:"fa fa-fw fa-th-large",id:"manage-folder-dashboards",text:"Dashboards",url:"dashboards"},{active:"manage-folder-permissions"===n,icon:"fa fa-fw fa-lock",id:"manage-folder-permissions",text:"Permissions",url:"dashboards/permissions"},{active:"manage-folder-settings"===n,icon:"fa fa-fw fa-cog",id:"manage-folder-settings",text:"Settings",url:"dashboards/settings"}]}},this.backendSrv.getFolderByUid(t).then(function(t){e.folderId=t.id;var n=t.title,a=t.url;e.navModel.main.text=n;var r=e.navModel.main.children.find(function(e){return"manage-folder-dashboards"===e.id});(r.url=a,t.canAdmin)?(e.navModel.main.children.find(function(e){return"manage-folder-permissions"===e.id}).url=a+"/permissions",e.navModel.main.children.find(function(e){return"manage-folder-settings"===e.id}).url=a+"/settings"):e.navModel.main.children=[r];return t})},e}(),V=function(){function e(e,t,n,a){(this.backendSrv=e,this.$routeParams=n,this.$routeParams.uid)&&(this.uid=n.uid,new U(this.backendSrv).load(this,this.uid,"manage-folder-dashboards").then(function(e){var t=S.a.stripBaseFromUrl(e.url);t!==a.path()&&a.path(t).replace()}))}return e.$inject=["backendSrv","navModelSrv","$routeParams","$location"],e}(),B=function(){function e(e,t,n,a,r){this.backendSrv=e,this.validationSrv=t,this.$location=a,this.navModel=n.getNav("create","import"),this.step=1,this.nameExists=!1,this.uidExists=!1,this.autoGenerateUid=!0,this.autoGenerateUidValue="auto-generated",this.folderId=r.folderId?Number(r.folderId)||0:null,this.initialFolderTitle="Select a folder",r.gnetId&&(this.gnetUrl=r.gnetId,this.checkGnetDashboard())}return e.$inject=["backendSrv","validationSrv","navModelSrv","$location","$routeParams"],e.prototype.onUpload=function(e){if(this.dash=e,this.dash.id=null,this.step=2,this.inputs=[],this.dash.__inputs)for(var t=0,n=this.dash.__inputs;t<n.length;t++){var a=n[t],r={name:a.name,label:a.label,info:a.description,value:a.value,type:a.type,pluginId:a.pluginId,options:[]};"datasource"===a.type?this.setDatasourceOptions(a,r):r.info||(r.info="Specify a string constant"),this.inputs.push(r)}this.inputsValid=0===this.inputs.length,this.titleChanged(),this.uidChanged(!0)},e.prototype.setDatasourceOptions=function(e,t){var n=i.a.filter(f.a.datasources,function(t){return t.type===e.pluginId});0===n.length?t.info="No data sources of type "+e.pluginName+" found":t.info||(t.info="Select a "+e.pluginName+" data source"),t.options=n.map(function(e){return{text:e.name,value:e.name}})},e.prototype.inputValueChanged=function(){this.inputsValid=!0;for(var e=0,t=this.inputs;e<t.length;e++){t[e].value||(this.inputsValid=!1)}},e.prototype.titleChanged=function(){var e=this;this.titleTouched=!0,this.nameExists=!1,this.validationSrv.validateNewDashboardName(this.folderId,this.dash.title).then(function(){e.nameExists=!1,e.hasNameValidationError=!1}).catch(function(t){"EXISTING"===t.type&&(e.nameExists=!0),e.hasNameValidationError=!0,e.nameValidationError=t.message})},e.prototype.uidChanged=function(e){var t=this;this.uidExists=!1,this.hasUidValidationError=!1,!0===e&&this.dash.uid&&(this.autoGenerateUidValue="value set"),this.backendSrv.getDashboardByUid(this.dash.uid).then(function(e){t.uidExists=!0,t.hasUidValidationError=!0,t.uidValidationError="Dashboard named '"+e.dashboard.title+"' in folder '"+e.meta.folderTitle+"' has the same uid"}).catch(function(e){e.isHandled=!0})},e.prototype.onFolderChange=function(e){this.folderId=e.id,this.titleChanged()},e.prototype.onEnterFolderCreation=function(){this.inputsValid=!1},e.prototype.onExitFolderCreation=function(){this.inputValueChanged()},e.prototype.isValid=function(){return this.inputsValid&&null!==this.folderId},e.prototype.saveDashboard=function(){var e=this,t=this.inputs.map(function(e){return{name:e.name,type:e.type,pluginId:e.pluginId,value:e.value}});return this.backendSrv.post("api/dashboards/import",{dashboard:this.dash,overwrite:!0,inputs:t,folderId:this.folderId}).then(function(t){var n=S.a.stripBaseFromUrl(t.importedUrl);e.$location.url(n)})},e.prototype.loadJsonText=function(){try{this.parseError="";var e=JSON.parse(this.jsonText);this.onUpload(e)}catch(e){return console.log(e),void(this.parseError=e.message)}},e.prototype.checkGnetDashboard=function(){var e=this;this.gnetError="";var t,n=/(^\d+$)|dashboards\/(\d+)/.exec(this.gnetUrl);return n&&n[1]?t=n[1]:n&&n[2]?t=n[2]:this.gnetError="Could not find dashboard",this.backendSrv.get("api/gnet/dashboards/"+t).then(function(t){e.gnetInfo=t,t.json.gnetId=t.id,e.onUpload(t.json)}).catch(function(t){t.isHandled=!0,e.gnetError=t.data.message||t})},e.prototype.back=function(){this.gnetUrl="",this.step=1,this.gnetError="",this.gnetInfo=""},e}(),Q=n(693),z=n(701),H=n(702),G=n(705),W=n(707),Y=n(711),K=n(393),X=n(208),J=n(37);function Z(e,t){t.html5Mode(!0),e.when("/",{template:"<react-container />",pageClass:"page-dashboard",routeInfo:J.DashboardRouteInfo.Home,reloadOnSearch:!1,resolve:{component:function(){return X.a}}}).when("/d/:uid/:slug",{template:"<react-container />",pageClass:"page-dashboard",routeInfo:J.DashboardRouteInfo.Normal,reloadOnSearch:!1,resolve:{component:function(){return X.a}}}).when("/d/:uid",{template:"<react-container />",pageClass:"page-dashboard",reloadOnSearch:!1,routeInfo:J.DashboardRouteInfo.Normal,resolve:{component:function(){return X.a}}}).when("/dashboard/:type/:slug",{template:"<react-container />",pageClass:"page-dashboard",routeInfo:J.DashboardRouteInfo.Normal,reloadOnSearch:!1,resolve:{component:function(){return X.a}}}).when("/dashboard/new",{template:"<react-container />",pageClass:"page-dashboard",routeInfo:J.DashboardRouteInfo.New,reloadOnSearch:!1,resolve:{component:function(){return X.a}}}).when("/d-solo/:uid/:slug",{template:"<react-container />",pageClass:"dashboard-solo",routeInfo:J.DashboardRouteInfo.Normal,resolve:{component:function(){return K.a}}}).when("/dashboard-solo/:type/:slug",{template:"<react-container />",pageClass:"dashboard-solo",routeInfo:J.DashboardRouteInfo.Normal,resolve:{component:function(){return K.a}}}).when("/dashboard/import",{templateUrl:"public/app/features/manage-dashboards/partials/dashboard_import.html",controller:B,controllerAs:"ctrl"}).when("/datasources",{template:"<react-container />",resolve:{component:function(){return Q.a}}}).when("/datasources/edit/:id/",{template:"<react-container />",resolve:{component:function(){return W.a}}}).when("/datasources/edit/:id/dashboards",{template:"<react-container />",resolve:{component:function(){return G.a}}}).when("/datasources/new",{template:"<react-container />",resolve:{component:function(){return z.a}}}).when("/dashboards",{templateUrl:"public/app/features/manage-dashboards/partials/dashboard_list.html",controller:"DashboardListCtrl",controllerAs:"ctrl"}).when("/dashboards/folder/new",{templateUrl:"public/app/features/folders/partials/create_folder.html",controller:j,controllerAs:"ctrl"}).when("/dashboards/f/:uid/:slug/permissions",{template:"<react-container />",resolve:{component:function(){return R.a}}}).when("/dashboards/f/:uid/:slug/settings",{template:"<react-container />",resolve:{component:function(){return q.a}}}).when("/dashboards/f/:uid/:slug",{templateUrl:"public/app/features/folders/partials/folder_dashboards.html",controller:V,controllerAs:"ctrl"}).when("/dashboards/f/:uid",{templateUrl:"public/app/features/folders/partials/folder_dashboards.html",controller:V,controllerAs:"ctrl"}).when("/explore",{template:"<react-container />",reloadOnSearch:!1,resolve:{roles:function(){return f.a.viewersCanEdit?[]:["Editor","Admin"]},component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,1469))}}}).when("/org",{template:"<react-container />",resolve:{component:function(){return Y.a}}}).when("/org/new",{templateUrl:"public/app/features/org/partials/newOrg.html",controller:"NewOrgCtrl"}).when("/org/users",{template:"<react-container />",resolve:{component:function(){return H.a}}}).when("/org/users/invite",{templateUrl:"public/app/features/org/partials/invite.html",controller:"UserInviteCtrl",controllerAs:"ctrl"}).when("/org/apikeys",{template:"<react-container />",resolve:{roles:function(){return["Editor","Admin"]},component:function(){return $.a}}}).when("/org/teams",{template:"<react-container />",resolve:{roles:function(){return["Editor","Admin"]},component:function(){return I.a}}}).when("/org/teams/new",{templateUrl:"public/app/features/teams/partials/create_team.html",controller:"CreateTeamCtrl",controllerAs:"ctrl"}).when("/org/teams/edit/:id/:page?",{template:"<react-container />",resolve:{roles:function(){return["Admin"]},component:function(){return O.a}}}).when("/profile",{templateUrl:"public/app/features/profile/partials/profile.html",controller:"ProfileCtrl",controllerAs:"ctrl"}).when("/profile/password",{templateUrl:"public/app/features/profile/partials/change_password.html",controller:"ChangePasswordCtrl"}).when("/profile/select-org",{templateUrl:"public/app/features/org/partials/select_org.html",controller:"SelectOrgCtrl"}).when("/admin",{templateUrl:"public/app/features/admin/partials/admin_home.html",controller:"AdminHomeCtrl",controllerAs:"ctrl"}).when("/admin/settings",{templateUrl:"public/app/features/admin/partials/settings.html",controller:"AdminSettingsCtrl",controllerAs:"ctrl"}).when("/admin/users",{templateUrl:"public/app/features/admin/partials/users.html",controller:"AdminListUsersCtrl",controllerAs:"ctrl"}).when("/admin/users/create",{templateUrl:"public/app/features/admin/partials/new_user.html",controller:"AdminEditUserCtrl"}).when("/admin/users/edit/:id",{templateUrl:"public/app/features/admin/partials/edit_user.html",controller:"AdminEditUserCtrl"}).when("/admin/orgs",{templateUrl:"public/app/features/admin/partials/orgs.html",controller:"AdminListOrgsCtrl",controllerAs:"ctrl"}).when("/admin/orgs/edit/:id",{templateUrl:"public/app/features/admin/partials/edit_org.html",controller:"AdminEditOrgCtrl",controllerAs:"ctrl"}).when("/admin/stats",{template:"<react-container />",resolve:{component:function(){return N.a}}}).when("/login",{templateUrl:"public/app/partials/login.html",controller:"LoginCtrl",pageClass:"login-page sidemenu-hidden"}).when("/invite/:code",{templateUrl:"public/app/partials/signup_invited.html",controller:"InvitedCtrl",pageClass:"sidemenu-hidden"}).when("/signup",{templateUrl:"public/app/partials/signup_step2.html",controller:"SignUpCtrl",pageClass:"sidemenu-hidden"}).when("/user/password/send-reset-email",{templateUrl:"public/app/partials/reset_password.html",controller:"ResetPasswordCtrl",pageClass:"sidemenu-hidden"}).when("/user/password/reset",{templateUrl:"public/app/partials/reset_password.html",controller:"ResetPasswordCtrl",pageClass:"sidemenu-hidden"}).when("/dashboard/snapshots",{templateUrl:"public/app/features/manage-dashboards/partials/snapshot_list.html",controller:"SnapshotListCtrl",controllerAs:"ctrl"}).when("/plugins",{template:"<react-container />",resolve:{component:function(){return F.a}}}).when("/plugins/:pluginId/edit",{templateUrl:"public/app/features/plugins/partials/plugin_edit.html",controller:"PluginEditCtrl",controllerAs:"ctrl"}).when("/plugins/:pluginId/page/:slug",{templateUrl:"public/app/features/plugins/partials/plugin_page.html",controller:"AppPageCtrl",controllerAs:"ctrl"}).when("/styleguide/:page?",{controller:"StyleGuideCtrl",controllerAs:"ctrl",templateUrl:"public/app/features/admin/partials/styleguide.html"}).when("/alerting",{redirectTo:"/alerting/list"}).when("/alerting/list",{template:"<react-container />",reloadOnSearch:!1,resolve:{component:function(){return P.a}}}).when("/alerting/notifications",{templateUrl:"public/app/features/alerting/partials/notifications_list.html",controller:"AlertNotificationsListCtrl",controllerAs:"ctrl"}).when("/alerting/notification/new",{templateUrl:"public/app/features/alerting/partials/notification_edit.html",controller:"AlertNotificationEditCtrl",controllerAs:"ctrl"}).when("/alerting/notification/:id/edit",{templateUrl:"public/app/features/alerting/partials/notification_edit.html",controller:"AlertNotificationEditCtrl",controllerAs:"ctrl"}).otherwise({templateUrl:"public/app/partials/error.html",controller:"ErrorCtrl"}),function(e){for(var t=0,n=D;t<n.length;t++)(0,n[t])(e)}(e)}var ee=n(103),te=n.n(ee),ne=n(6),ae=n(197),re=n(14),ie=n(140),oe=n(102),se=n(196),le=n(62),ce=n(175),ue=n(718),de=n(221);var pe=function(){var e={};return function e(t,n,a){for(var r=0,i=n;r<i.length;r++){var o=i[r];t[o.id]=E.a({},o,{parentItem:a}),o.children&&e(t,o.children,o)}}(e,f.a.bootData.navTree),e}(),he=n(266),fe=n(199),me={url:"",path:"",query:{},routeParams:{},replace:!1,lastUpdated:0},ge=n(195),ve={appNotifications:[]},be={navIndex:function(e,t){switch(void 0===e&&(e=pe),t.type){case de.a.UpdateNavIndex:for(var n={},a=t.payload,r=0,i=a.children;r<i.length;r++){var o=i[r];n[o.id]=E.a({},o,{parentItem:a})}return E.a({},e,n)}return e},location:function(e,t){switch(void 0===e&&(e=me),t.type){case he.a.UpdateLocation:var n=t.payload,a=n.path,r=n.routeParams,o=n.replace,s=t.payload.query||e.query;return t.payload.partial&&(s=i.a.defaults(s,e.query),s=i.a.omitBy(s,i.a.isNull)),{url:Object(fe.a)(a||e.path,s),path:a||e.path,query:E.a({},s),routeParams:r||e.routeParams,replace:!0===o,lastUpdated:(new Date).getTime()}}return e},appNotifications:function(e,t){switch(void 0===e&&(e=ve),t.type){case ge.a.AddAppNotification:return E.a({},e,{appNotifications:e.appNotifications.concat([t.payload])});case ge.a.ClearAppNotification:return E.a({},e,{appNotifications:e.appNotifications.filter(function(e){return e.id!==t.payload})})}return e}},ye=n(155),we=n(53),xe={items:[],searchQuery:"",isLoading:!1};var Se={alertRules:function(e,t){switch(void 0===e&&(e=xe),t.type){case ye.a.LoadAlertRules:return E.a({},e,{isLoading:!0});case ye.a.LoadedAlertRules:var n=t.payload.map(function(e){return function(e,t){var n=we.a.getStateDisplayModel(t);return e.stateText=n.text,e.stateIcon=n.iconClass,e.stateClass=n.stateClass,e.stateAge=g()(e.newStateDate).fromNow().replace(" ago",""),"paused"!==e.state&&(e.executionError&&(e.info="Execution Error: "+e.executionError),e.evalData&&e.evalData.noData&&(e.info="Query returned no data")),e}(e,e.state)});return E.a({},e,{items:n,isLoading:!1});case ye.a.SetSearchQuery:return E.a({},e,{searchQuery:t.payload})}return e}},ke=n(55),Ce={teams:[],searchQuery:"",hasFetched:!1},Ee={team:{},members:[],groups:[],searchMemberQuery:""},Te={teams:function(e,t){switch(void 0===e&&(e=Ce),t.type){case ke.a.LoadTeams:return E.a({},e,{hasFetched:!0,teams:t.payload});case ke.a.SetSearchQuery:return E.a({},e,{searchQuery:t.payload})}return e},team:function(e,t){switch(void 0===e&&(e=Ee),t.type){case ke.a.LoadTeam:return E.a({},e,{team:t.payload});case ke.a.LoadTeamMembers:return E.a({},e,{members:t.payload});case ke.a.SetSearchMemberQuery:return E.a({},e,{searchMemberQuery:t.payload});case ke.a.LoadTeamGroups:return E.a({},e,{groups:t.payload})}return e}},Me=n(156),_e={keys:[],searchQuery:"",hasFetched:!1},Ae={apiKeys:function(e,t){switch(void 0===e&&(e=_e),t.type){case Me.a.LoadApiKeys:return E.a({},e,{hasFetched:!0,keys:t.payload});case Me.a.SetApiKeysSearchQuery:return E.a({},e,{searchQuery:t.payload})}return e}},De=n(87);function Ne(e){return e.map(Pe).sort(function(e,t){return t.sortRank-e.sortRank||e.name.localeCompare(t.name)})}function Pe(e){var t=e;return t.sortRank=0,t.userId>0?(t.name=t.userLogin,t.sortRank=10):t.teamId>0?(t.name=t.team,t.sortRank=20):t.role&&(t.icon="fa fa-fw fa-street-view",t.name=t.role,t.sortRank=30,"Editor"===t.role&&(t.sortRank+=1)),t.inherited&&(t.sortRank+=100),t}var Oe={id:0,uid:"loading",title:"loading",url:"",canSave:!1,hasChanged:!1,version:1,permissions:[]},Ie={folder:function(e,t){switch(void 0===e&&(e=Oe),t.type){case De.a.LoadFolder:return E.a({},e,t.payload,{hasChanged:!1});case De.a.SetFolderTitle:return E.a({},e,{title:t.payload,hasChanged:t.payload.trim().length>0});case De.a.LoadFolderPermissions:return E.a({},e,{permissions:Ne(t.payload)})}return e}},$e=n(54),Fe=n(56),qe=n(133),Re={initPhase:J.DashboardInitPhase.NotStarted,isInitSlow:!1,model:null,permissions:[]},Le={dashboard:Object(Fe.c)(Re).addMapper({filter:$e.j,mapper:function(e,t){return E.a({},e,{permissions:Ne(t.payload)})}}).addMapper({filter:$e.e,mapper:function(e){return E.a({},e,{initPhase:J.DashboardInitPhase.Fetching})}}).addMapper({filter:$e.f,mapper:function(e){return E.a({},e,{initPhase:J.DashboardInitPhase.Services})}}).addMapper({filter:$e.g,mapper:function(e){return E.a({},e,{isInitSlow:!0})}}).addMapper({filter:$e.d,mapper:function(e,t){return E.a({},e,{initPhase:J.DashboardInitPhase.Failed,isInitSlow:!1,initError:t.payload,model:new qe.a({title:"Dashboard init failed"},{canSave:!1,canEdit:!1})})}}).addMapper({filter:$e.c,mapper:function(e,t){return E.a({},e,{initPhase:J.DashboardInitPhase.Completed,model:t.payload,isInitSlow:!1})}}).addMapper({filter:$e.b,mapper:function(e,t){return e.model.destroy(),E.a({},e,{initPhase:J.DashboardInitPhase.NotStarted,model:null,isInitSlow:!1,initError:null})}}).create()},je=n(64),Ue=n(40),Ve={from:"now-6h",to:"now"},Be=function(){return{StartPage:void 0,containerWidth:0,datasourceInstance:null,requestedDatasourceName:null,datasourceError:null,datasourceLoading:null,datasourceMissing:!1,exploreDatasources:[],history:[],queries:[],initialized:!1,queryTransactions:[],queryIntervals:{interval:"15s",intervalMs:15e3},range:Ve,scanning:!1,scanRange:null,showingGraph:!0,showingLogs:!0,showingTable:!0,supportsGraph:null,supportsLogs:null,supportsTable:null,queryKeys:[]}},Qe={split:null,left:Be(),right:Be()},ze=Object(Fe.c)({}).addMapper({filter:Ue.b,mapper:function(e,t){var n=e.queries,a=e.queryTransactions,r=t.payload,i=r.index,o=r.query,s=n.slice(0,i+1).concat([E.a({},o)],n.slice(i+1)),l=a.map(function(e){return e.rowIndex>i?E.a({},e,{rowIndex:e.rowIndex+1}):e});return E.a({},e,{queries:s,logsHighlighterExpressions:void 0,queryTransactions:l,queryKeys:Object(je.k)(s,e.datasourceInstance)})}}).addMapper({filter:Ue.c,mapper:function(e,t){var n=e.queries,a=e.queryTransactions,r=t.payload,i=r.query,o=r.index,s=E.a({},i,Object(je.h)(o)),l=n.slice();l[o]=s;var c=a.filter(function(e){return e.rowIndex!==o});return E.a({},e,{queries:l,queryTransactions:c,queryKeys:Object(je.k)(l,e.datasourceInstance)})}}).addMapper({filter:Ue.d,mapper:function(e,t){var n=e.range,a=e.datasourceInstance,r="1s";a&&a.interval&&(r=a.interval);var i=t.payload.width,o=Object(je.j)(n,r,i);return E.a({},e,{containerWidth:i,queryIntervals:o})}}).addMapper({filter:Ue.e,mapper:function(e,t){return E.a({},e,{range:t.payload.range})}}).addMapper({filter:Ue.f,mapper:function(e){var t=Object(je.g)();return E.a({},e,{queries:t.slice(),queryTransactions:[],showingStartPage:Boolean(e.StartPage),queryKeys:Object(je.k)(t,e.datasourceInstance)})}}).addMapper({filter:Ue.g,mapper:function(e,t){var n=t.payload.expressions;return E.a({},e,{logsHighlighterExpressions:n})}}).addMapper({filter:Ue.h,mapper:function(e,t){var n=t.payload,a=n.containerWidth,r=n.eventBridge,i=n.exploreDatasources,o=n.queries,s=n.range,l=n.ui;return E.a({},e,{containerWidth:a,eventBridge:r,exploreDatasources:i,range:s,queries:o,initialized:!0,queryKeys:Object(je.k)(o,e.datasourceInstance)},l)}}).addMapper({filter:Ue.F,mapper:function(e,t){var n=t.payload.datasourceInstance;return E.a({},e,{datasourceInstance:n,queryKeys:Object(je.k)(e.queries,n)})}}).addMapper({filter:Ue.j,mapper:function(e,t){return E.a({},e,{datasourceError:t.payload.error,datasourceLoading:!1})}}).addMapper({filter:Ue.k,mapper:function(e){return E.a({},e,{datasourceMissing:!0,datasourceLoading:!1})}}).addMapper({filter:Ue.l,mapper:function(e,t){return E.a({},e,{datasourceLoading:!0,requestedDatasourceName:t.payload.requestedDatasourceName})}}).addMapper({filter:Ue.m,mapper:function(e,t){var n=e.containerWidth,a=e.range,r=t.payload,i=r.StartPage,o=r.datasourceInstance,s=r.history,l=r.showingStartPage,c=r.supportsGraph,u=r.supportsLogs,d=r.supportsTable,p=Object(je.j)(a,o.interval,n);return E.a({},e,{queryIntervals:p,StartPage:i,datasourceInstance:o,history:s,showingStartPage:l,supportsGraph:c,supportsLogs:u,supportsTable:d,datasourceLoading:!1,datasourceMissing:!1,datasourceError:null,logsHighlighterExpressions:void 0,queryTransactions:[]})}}).addMapper({filter:Ue.n,mapper:function(e,t){var n,a,r=e.queries,i=e.queryTransactions,o=t.payload,s=o.modification,l=o.index,c=o.modifier;return void 0===l?(n=r.map(function(e,t){return E.a({},c(E.a({},e),s),Object(je.h)(t))}),a=[]):(n=r.map(function(e,t){return t===l?E.a({},c(E.a({},e),s),Object(je.h)(t)):e}),a=i.map(function(e){return null!=e.hints&&e.rowIndex===l&&(e.hints=e.hints.filter(function(e){return e.fix.action!==s})),e}).filter(function(e){return s.preventSubmit||e.rowIndex!==l})),E.a({},e,{queries:n,queryKeys:Object(je.k)(n,e.datasourceInstance),queryTransactions:a})}}).addMapper({filter:Ue.p,mapper:function(e,t){var n=t.payload.queryTransactions;return E.a({},e,{queryTransactions:n,showingStartPage:!1})}}).addMapper({filter:Ue.q,mapper:function(e,t){var n=e.queryTransactions,a=t.payload,r=a.resultType,i=a.rowIndex,o=a.transaction,s=n.filter(function(e){return!(e.resultType===r&&e.rowIndex===i)}).concat([o]);return E.a({},e,{queryTransactions:s,showingStartPage:!1})}}).addMapper({filter:Ue.r,mapper:function(e,t){var n=e.datasourceInstance,a=e.queryIntervals,r=t.payload,i=r.history,o=r.queryTransactions,s=Object(je.e)(o,n,a.intervalMs);return E.a({},e,s,{history:i,queryTransactions:o,showingStartPage:!1})}}).addMapper({filter:Ue.s,mapper:function(e,t){var n=e.datasourceInstance,a=e.queries,r=e.queryIntervals,i=e.queryTransactions,o=e.queryKeys,s=t.payload.index;if(a.length<=1)return e;var l=a.slice(0,s).concat(a.slice(s+1)),c=o.slice(0,s).concat(o.slice(s+1)),u=i.filter(function(e){return l.some(function(t){return t.key===e.query.key})}),d=Object(je.e)(u,n,r.intervalMs);return E.a({},e,d,{queries:l,logsHighlighterExpressions:void 0,queryTransactions:u,queryKeys:c})}}).addMapper({filter:Ue.u,mapper:function(e){return E.a({},e,{queryTransactions:[]})}}).addMapper({filter:Ue.v,mapper:function(e,t){return E.a({},e,{scanRange:t.payload.range})}}).addMapper({filter:Ue.w,mapper:function(e,t){return E.a({},e,{scanning:!0,scanner:t.payload.scanner})}}).addMapper({filter:Ue.x,mapper:function(e){var t=e.queryTransactions.filter(function(e){return e.scanning&&!e.done});return E.a({},e,{queryTransactions:t,scanning:!1,scanRange:void 0,scanner:void 0})}}).addMapper({filter:Ue.y,mapper:function(e,t){var n=t.payload.queries;return E.a({},e,{queries:n.slice(),queryKeys:Object(je.k)(n,e.datasourceInstance)})}}).addMapper({filter:Ue.G,mapper:function(e,t){return E.a({},e,t.payload)}}).addMapper({filter:Ue.B,mapper:function(e){var t=!e.showingGraph,n=e.queryTransactions;return t||(n=e.queryTransactions.filter(function(e){return"Graph"!==e.resultType})),E.a({},e,{queryTransactions:n})}}).addMapper({filter:Ue.D,mapper:function(e){var t=!e.showingLogs,n=e.queryTransactions;return t||(n=e.queryTransactions.filter(function(e){return"Logs"!==e.resultType})),E.a({},e,{queryTransactions:n})}}).addMapper({filter:Ue.E,mapper:function(e){if(!e.showingTable)return E.a({},e,{queryTransactions:e.queryTransactions});var t=e.queryTransactions.filter(function(e){return"Table"!==e.resultType}),n=Object(je.e)(t,e.datasourceInstance,e.queryIntervals.intervalMs);return E.a({},e,n,{queryTransactions:t})}}).addMapper({filter:Ue.o,mapper:function(e,t){var n=t.payload.queries;return E.a({},e,{queries:n,queryKeys:Object(je.k)(n,e.datasourceInstance)})}}).addMapper({filter:Ue.C,mapper:function(e,t){var n=t.payload.hiddenLogLevels;return E.a({},e,{hiddenLogLevels:Array.from(n)})}}).create(),He={explore:function(e,t){var n;switch(void 0===e&&(e=Qe),t.type){case Ue.a.SplitClose:return E.a({},e,{split:!1});case Ue.a.SplitOpen:return E.a({},e,{split:!0,right:t.payload.itemState});case Ue.a.InitializeExploreSplit:return E.a({},e,{split:!0});case Ue.a.ResetExplore:return Qe}if(t.payload){var a=t.payload.exploreId;if(void 0!==a){var r=e[a];return E.a({},e,((n={})[a]=ze(r,t),n))}}return e}},Ge=n(86),We=n(112),Ye={plugins:[],searchQuery:"",layoutMode:We.a.Grid,hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1},Ke={plugins:function(e,t){switch(void 0===e&&(e=Ye),t.type){case Ge.a.LoadPlugins:return E.a({},e,{hasFetched:!0,plugins:t.payload});case Ge.a.SetPluginsSearchQuery:return E.a({},e,{searchQuery:t.payload});case Ge.a.SetLayoutMode:return E.a({},e,{layoutMode:t.payload});case Ge.a.LoadPluginDashboards:return E.a({},e,{dashboards:[],isLoadingPluginDashboards:!0});case Ge.a.LoadedPluginDashboards:return E.a({},e,{dashboards:t.payload,isLoadingPluginDashboards:!1})}return e}},Xe=n(50),Je={dataSources:[],dataSource:{},layoutMode:We.a.List,searchQuery:"",dataSourcesCount:0,dataSourceTypes:[],dataSourceTypeSearchQuery:"",hasFetched:!1,isLoadingDataSources:!1,dataSourceMeta:{}},Ze={dataSources:Object(Fe.c)(Je).addMapper({filter:Xe.f,mapper:function(e,t){return E.a({},e,{hasFetched:!0,dataSources:t.payload,dataSourcesCount:t.payload.length})}}).addMapper({filter:Xe.b,mapper:function(e,t){return E.a({},e,{dataSource:t.payload})}}).addMapper({filter:Xe.n,mapper:function(e,t){return E.a({},e,{searchQuery:t.payload})}}).addMapper({filter:Xe.m,mapper:function(e,t){return E.a({},e,{layoutMode:t.payload})}}).addMapper({filter:Xe.d,mapper:function(e){return E.a({},e,{dataSourceTypes:[],isLoadingDataSources:!0})}}).addMapper({filter:Xe.e,mapper:function(e,t){return E.a({},e,{dataSourceTypes:t.payload,isLoadingDataSources:!1})}}).addMapper({filter:Xe.l,mapper:function(e,t){return E.a({},e,{dataSourceTypeSearchQuery:t.payload})}}).addMapper({filter:Xe.c,mapper:function(e,t){return E.a({},e,{dataSourceMeta:t.payload})}}).addMapper({filter:Xe.k,mapper:function(e,t){return E.a({},e,{dataSource:E.a({},e.dataSource,{name:t.payload})})}}).addMapper({filter:Xe.o,mapper:function(e,t){return E.a({},e,{dataSource:E.a({},e.dataSource,{isDefault:t.payload})})}}).create()},et=n(95),tt={invitees:[],users:[],searchQuery:"",canInvite:!f.a.disableLoginForm&&!f.a.externalUserMngLinkName,externalUserMngInfo:f.a.externalUserMngInfo,externalUserMngLinkName:f.a.externalUserMngLinkName,externalUserMngLinkUrl:f.a.externalUserMngLinkUrl,hasFetched:!1},nt={users:function(e,t){switch(void 0===e&&(e=tt),t.type){case et.a.LoadUsers:return E.a({},e,{hasFetched:!0,users:t.payload});case et.a.LoadInvitees:return E.a({},e,{hasFetched:!0,invitees:t.payload});case et.a.SetUsersSearchQuery:return E.a({},e,{searchQuery:t.payload})}return e}},at={orgId:f.a.bootData.user.orgId},rt={user:function(e,t){return void 0===e&&(e=at),e}},it=n(178),ot={organization:{}},st={organization:function(e,t){switch(void 0===e&&(e=ot),t.type){case it.a.LoadOrganization:return E.a({},e,{organization:t.payload});case it.a.SetOrganizationName:return E.a({},e,{organization:E.a({},e.organization,{name:t.payload})})}return e}},lt=E.a({},be,Se,Te,Ae,Ie,Le,He,Ke,Ze,nt,rt,st);var ct=function(){function e(e,t,n,a,r,o,s,l,c,u,d){Object(le.b)(d),Object(re.b)(s),Object(oe.b)(c),Object(ie.b)(l),Object(se.b)(u),function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.d,t=Object(ce.c)(lt);Object(M.a)(Object(ce.e)(t,{},e(Object(ce.a)(ue.a))))}(),e.init=function(){e.contextSrv=r,e.appSubUrl=f.a.appSubUrl,e._=i.a,ae.a.init(f.a,n),t.init(),o.init()},n.colors=ne.colors,n.onAppEvent=function(e,t,a){var r=n.$on(e,t),i=this;1!==i.$id||a||console.log("warning rootScope onAppEvent called without localscope"),a&&(i=a),i.$on("$destroy",r)},n.appEvent=function(e,t){n.$emit(e,t),L.b.emit(e,t)},e.init()}return e.$inject=["$scope","utilSrv","$rootScope","$controller","contextSrv","bridgeSrv","backendSrv","timeSrv","datasourceSrv","keybindingSrv","angularLoader"],e}();function ut(e,t,n){switch(e.removeClass("view-mode--tv"),e.removeClass("view-mode--kiosk"),e.removeClass("view-mode--inactive"),t){case"tv":e.removeClass("sidemenu-open"),e.addClass("view-mode--tv");break;case"1":case!0:e.removeClass("sidemenu-open"),e.addClass("view-mode--kiosk");break;default:e.toggleClass("sidemenu-open",n)}}function dt(e,t,n,a,r){return{restrict:"E",controller:ct,link:function(e,t){var n,a,i=s()("body");s.a.fn.modal.Constructor.prototype.enforceFocus=function(){},s()(".preloader").remove(),n=e.contextSrv.sidemenu,i.toggleClass("sidemenu-open",n),L.b.on("toggle-sidemenu",function(){n=e.contextSrv.sidemenu,i.toggleClass("sidemenu-open")}),L.b.on("toggle-sidemenu-mobile",function(){i.toggleClass("sidemenu-open--xs")}),L.b.on("toggle-sidemenu-hidden",function(){i.toggleClass("sidemenu-hidden")}),L.b.on("playlist-started",function(){t.toggleClass("view-mode--playlist",!0)}),L.b.on("playlist-stopped",function(){t.toggleClass("view-mode--playlist",!1)}),-1!==document.cookie.indexOf("renderKey")&&i.addClass("body--phantomjs"),e.$on("$routeChangeSuccess",function(e,t){a&&i.removeClass(a),t.$$route&&(a=t.$$route.pageClass)&&i.addClass(a),i.removeClass("sidemenu-open--xs"),s()("#tooltip, .tooltip").remove(),ut(i,t.params.kiosk,n);for(var r=0,o=te.a.drops;r<o.length;r++){o[r].destroy()}L.b.emit("hide-dash-search")}),L.b.on("toggle-kiosk-mode",function(e){var t=r.search();switch(e&&e.exit&&(t.kiosk="1"),t.kiosk){case"tv":t.kiosk=!0,L.b.emit("alert-success",["Press ESC to exit Kiosk mode"]);break;case"1":case!0:delete t.kiosk;break;default:t.kiosk="tv"}r.search(t),ut(i,t.kiosk,n)});var o=(new Date).getTime(),l=!0,c=3e5;function u(){l&&i.hasClass("page-dashboard")&&(new Date).getTime()-o>c&&(l=!1,i.addClass("view-mode--inactive"),i.removeClass("sidemenu-open"))}function d(){o=(new Date).getTime(),l||(l=!0,i.removeClass("view-mode--inactive"),i.toggleClass("sidemenu-open",n))}i.mousemove(d),i.keydown(d),document.addEventListener("wheel",d,{capture:!0,passive:!0}),document.addEventListener("visibilitychange",d),setInterval(u,2e3),L.b.on("toggle-view-mode",function(){o=0,u()}),i.click(function(n){var a=s()(n.target);if(0!==a.parents().length){i.find(".dropdown-menu-open").removeClass("dropdown-menu-open");var r=a.closest("[data-click-hide]");if(r.length){var o=r.parent();r.detach(),setTimeout(function(){o.append(r)},100)}i.find(".search-container").length>0&&0===a.parents(".search-results-container, .search-field-wrapper").length&&e.$apply(function(){e.appEvent("hide-dash-search")});var l=t.find(".popover");if(l.length>0&&0===a.parents(".graph-legend").length&&l.hide(),t.find(".gf-timepicker-dropdown").length>0){var c=a.parents(".gf-timepicker-dropdown").length>0,u=a.parents(".gf-timepicker-nav").length>0,d=a.parents('td[id^="datepicker-"]').length>0,p=a.parents('button[id^="datepicker-"]').length>0;if(u||c||d||p)return;e.$apply(function(){e.appEvent("closeTimepicker")})}}})}}}w.c.directive("grafanaApp",dt);n(378);var pt=n(33),ht=function(){function e(e,t,n,a){var r=this;e.variableTypes=pt.d,e.ctrl={},e.namePattern=/^(?!__).*$/,e._=i.a,e.optionsLimit=20,e.refreshOptions=[{value:0,text:"Never"},{value:1,text:"On Dashboard Load"},{value:2,text:"On Time Range Change"}],e.sortOptions=[{value:0,text:"Disabled"},{value:1,text:"Alphabetical (asc)"},{value:2,text:"Alphabetical (desc)"},{value:3,text:"Numerical (asc)"},{value:4,text:"Numerical (desc)"},{value:5,text:"Alphabetical (case-insensitive, asc)"},{value:6,text:"Alphabetical (case-insensitive, desc)"}],e.hideOptions=[{value:0,text:""},{value:1,text:"Label"},{value:2,text:"Variable"}],e.init=function(){e.mode="list",e.variables=n.variables,e.reset(),e.$watch("mode",function(t){"new"===t&&e.reset()})},e.setMode=function(t){e.mode=t},e.add=function(){e.isValid()&&(n.addVariable(e.current),e.update())},e.isValid=function(){if(!e.ctrl.form.$valid)return!1;if(!e.current.name.match(/^\w+$/))return L.b.emit("alert-warning",["Validation","Only word and digit characters are allowed in variable names"]),!1;var t=i.a.find(e.variables,{name:e.current.name});return t&&t!==e.current?(L.b.emit("alert-warning",["Validation","Variable with the same name already exists"]),!1):"query"!==e.current.type||!i.a.isString(e.current.query)||!e.current.query.match(new RegExp("\\$"+e.current.name+"(/| |$)"))||(L.b.emit("alert-warning",["Validation","Query cannot contain a reference to itself. Variable: $"+e.current.name]),!1)},e.validate=function(){e.infoText="","adhoc"===e.current.type&&null!==e.current.datasource&&(e.infoText="Adhoc filters are applied automatically to all queries that target this datasource",t.get(e.current.datasource).then(function(t){t.getTagKeys||(e.infoText="This datasource does not support adhoc filters yet.")}))},e.runQuery=function(){return e.optionsLimit=20,n.updateOptions(e.current).catch(function(e){e.data&&e.data.message&&(e.message=e.data.message),L.b.emit("alert-error",["Templating","Template variables could not be initialized: "+e.message])})},e.onQueryChange=function(t,n){e.current.query=t,e.current.definition=n,e.runQuery()},e.edit=function(n){e.current=n,e.currentIsNew=!1,e.mode="edit",e.validate(),t.get(e.current.datasource).then(function(t){e.currentDatasource=t})},e.duplicate=function(t){var a=i.a.cloneDeep(t.getSaveModel());e.current=n.createVariableFromModel(a),e.current.name="copy_of_"+t.name,n.addVariable(e.current)},e.update=function(){e.isValid()&&e.runQuery().then(function(){e.reset(),e.mode="list",a.updateIndex()})},e.reset=function(){e.currentIsNew=!0,e.current=n.createVariableFromModel({type:"query"}),e.datasources=i.a.filter(t.getMetricSources(),function(e){return!e.meta.mixed&&null!==e.value}),e.datasourceTypes=i()(e.datasources).uniqBy("meta.id").map(function(e){return{text:e.meta.name,value:e.meta.id}}).value()},e.typeChanged=function(){var t=e.current;e.current=n.createVariableFromModel({type:e.current.type}),e.current.name=t.name,e.current.hide=t.hide,e.current.label=t.label;var a=i.a.indexOf(this.variables,t);-1!==a&&(this.variables[a]=e.current),e.validate()},e.removeVariable=function(e){n.removeVariable(e)},e.showMoreOptions=function(){e.optionsLimit+=20},e.datasourceChanged=function(){return E.b(r,void 0,void 0,function(){return E.d(this,function(n){return t.get(e.current.datasource).then(function(t){e.current.query="",e.currentDatasource=t}),[2]})})}}return e.$inject=["$scope","datasourceSrv","variableSrv","templateSrv"],e}();w.c.controller("VariableEditorCtrl",ht);var ft=n(93),mt=function(){function e(){}return e.prototype._linkTo=function(e,t){t<=0&&e.inputEdges.push(this),t>=0&&e.outputEdges.push(this),e.edges.push(this)},e.prototype.link=function(e,t){if(!e)throw Error("inputNode is required");if(!t)throw Error("outputNode is required");return this.unlink(),this.inputNode=e,this.outputNode=t,this._linkTo(e,1),this._linkTo(t,-1),this},e.prototype.unlink=function(){var e,t=this.inputNode,n=this.outputNode;t&&n&&((e=t.edges.indexOf(this))>-1&&t.edges.splice(e,1),(e=n.edges.indexOf(this))>-1&&n.edges.splice(e,1),(e=t.outputEdges.indexOf(this))>-1&&t.outputEdges.splice(e,1),(e=n.inputEdges.indexOf(this))>-1&&n.inputEdges.splice(e,1),this.inputNode=null,this.outputNode=null)},e}(),gt=function(){function e(e){this.name=e,this.edges=[],this.inputEdges=[],this.outputEdges=[]}return e.prototype.getEdgeFrom=function(e){return e?"object"==typeof e?this.inputEdges.find(function(t){return t.inputNode.name===e.name}):this.inputEdges.find(function(t){return t.inputNode.name===e}):null},e.prototype.getEdgeTo=function(e){return e?"object"==typeof e?this.outputEdges.find(function(t){return t.outputNode.name===e.name}):this.outputEdges.find(function(t){return t.outputNode.name===e}):null},e.prototype.getOptimizedInputEdges=function(){var e=this,t=[];return this.inputEdges.forEach(function(n){n.inputNode.inputEdges.map(function(e){return e.inputNode}).forEach(function(n){var a=n.getEdgeTo(e.name);a&&t.push(a)})}),this.inputEdges.filter(function(e){return-1===t.indexOf(e)})},e}(),vt=function(){function e(){this.nodes={}}return e.prototype.createNode=function(e){var t=new gt(e);return this.nodes[e]=t,t},e.prototype.createNodes=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.createNode(e))}),n},e.prototype.link=function(e,t){var n=this,a=[],r=[],i=[],o=[];a=e instanceof Array?e:[e],r=t instanceof Array?t:[t];for(var s=0;s<a.length;s++){if("string"==typeof(c=a[s])){var l=this.getNode(c);if(!l)throw Error("cannot link input node named "+c+" since it doesn't exist in graph");i.push(l)}else i.push(c)}for(s=0;s<r.length;s++){var c;if("string"==typeof(c=r[s])){var u=this.getNode(c);if(!u)throw Error("cannot link output node named "+c+" since it doesn't exist in graph");o.push(u)}else o.push(c)}var d=[];return i.forEach(function(e){o.forEach(function(t){d.push(n.createEdge().link(e,t))})}),d},e.prototype.createEdge=function(){return new mt},e.prototype.getNode=function(e){return this.nodes[e]},e}(),bt=function(){function e(e,t,n,a,r){this.$q=e,this.$location=t,this.$injector=n,this.templateSrv=a,this.timeSrv=r}return e.$inject=["$q","$location","$injector","templateSrv","timeSrv"],e.prototype.init=function(e){var t=this;this.dashboard=e,this.dashboard.events.on("time-range-updated",this.onTimeRangeUpdated.bind(this)),this.dashboard.events.on("template-variable-value-updated",this.updateUrlParamsWithCurrentVariables.bind(this)),this.variables=e.templating.list=e.templating.list.map(this.createVariableFromModel.bind(this)),this.templateSrv.init(this.variables,this.timeSrv.timeRange());for(var n=0,a=this.variables;n<a.length;n++){a[n].initLock=this.$q.defer()}var r=this.$location.search();return this.$q.all(this.variables.map(function(e){return t.processVariable(e,r)})).then(function(){t.templateSrv.updateIndex()})},e.prototype.onTimeRangeUpdated=function(e){var t=this;this.templateSrv.updateTimeRange(e);var n=this.variables.filter(function(e){return 2===e.refresh}).map(function(e){var n=e.options.slice();return e.updateOptions().then(function(){c.a.toJson(n)!==c.a.toJson(e.options)&&t.dashboard.templateVariableValueUpdated()})});return this.$q.all(n).then(function(){t.dashboard.startRefresh()})},e.prototype.processVariable=function(e,t){for(var n=this,a=[],r=0,i=this.variables;r<i.length;r++){var o=i[r];e.dependsOn(o)&&a.push(o.initLock.promise)}return this.$q.all(a).then(function(){var n=t["var-"+e.name];return void 0!==n?e.setValueFromUrl(n).then(e.initLock.resolve):1===e.refresh||2===e.refresh?e.updateOptions().then(e.initLock.resolve):void e.initLock.resolve()}).finally(function(){n.templateSrv.variableInitialized(e),delete e.initLock})},e.prototype.createVariableFromModel=function(e){var t=pt.d[e.type].ctor;if(!t)throw{message:"Unable to find variable constructor for "+e.type};return this.$injector.instantiate(t,{model:e})},e.prototype.addVariable=function(e){this.variables.push(e),this.templateSrv.updateIndex(),this.dashboard.updateSubmenuVisibility()},e.prototype.removeVariable=function(e){var t=i.a.indexOf(this.variables,e);this.variables.splice(t,1),this.templateSrv.updateIndex(),this.dashboard.updateSubmenuVisibility()},e.prototype.updateOptions=function(e){return e.updateOptions()},e.prototype.variableUpdated=function(e,t){var n=this;if(e.initLock)return this.$q.when();var a=this.createGraph().getNode(e.name),r=[];return a&&(r=a.getOptimizedInputEdges().map(function(e){return n.updateOptions(n.variables.find(function(t){return t.name===e.inputNode.name}))})),this.$q.all(r).then(function(){t&&(n.dashboard.templateVariableValueUpdated(),n.dashboard.startRefresh())})},e.prototype.selectOptionsForCurrentValue=function(e){var t,n,a,r,o=[];for(t=0;t<e.options.length;t++)if((r=e.options[t]).selected=!1,i.a.isArray(e.current.value))for(n=0;n<e.current.value.length;n++)a=e.current.value[n],r.value===a&&(r.selected=!0,o.push(r));else r.value===e.current.value&&(r.selected=!0,o.push(r));return o},e.prototype.validateVariableSelectionState=function(e){if(e.current||(e.current={}),i.a.isArray(e.current.value)){var t=this.selectOptionsForCurrentValue(e);return t=0===t.length?e.options[0]:{value:i.a.map(t,function(e){return e.value}),text:i.a.map(t,function(e){return e.text}).join(" + ")},e.setValue(t)}var n=i.a.find(e.options,{text:e.current.text});return n?e.setValue(n):e.options.length?e.setValue(e.options[0]):Promise.resolve()},e.prototype.setOptionFromUrl=function(e,t){var n=this.$q.when();return e.refresh&&(n=e.updateOptions()),n.then(function(){var n=i.a.find(e.options,function(e){return e.text===t||e.value===t}),a=t,r=t;if(!n&&i.a.isArray(t)){a=[];for(var o=function(n){var r=i.a.find(e.options,function(e){return e.value===t[n]});r&&a.push(r.text)},s=0;s<t.length;s++)o(s)}return n=n||{text:a,value:r},e.setValue(n)})},e.prototype.setOptionAsCurrent=function(e,t){return e.current=i.a.cloneDeep(t),i.a.isArray(e.current.text)&&e.current.text.length>0?e.current.text=e.current.text.join(" + "):i.a.isArray(e.current.value)&&"$__all"!==e.current.value[0]&&(e.current.text=e.current.value.join(" + ")),this.selectOptionsForCurrentValue(e),this.variableUpdated(e)},e.prototype.updateUrlParamsWithCurrentVariables=function(){var e=this.$location.search();i.a.each(e,function(t,n){0===n.indexOf("var-")&&delete e[n]}),this.templateSrv.fillVariableValuesForUrl(e),this.$location.search(e)},e.prototype.setAdhocFilter=function(e){var t=i.a.find(this.variables,{type:"adhoc",datasource:e.datasource});t||(t=this.createVariableFromModel({name:"Filters",type:"adhoc",datasource:e.datasource}),this.addVariable(t));var n=t.filters,a=i.a.find(n,{key:e.key,value:e.value});a||(a={key:e.key,value:e.value},n.push(a)),a.operator=e.operator,this.variableUpdated(t,!0)},e.prototype.createGraph=function(){var e=this,t=new vt;return this.variables.forEach(function(e){t.createNode(e.name)}),this.variables.forEach(function(n){e.variables.forEach(function(e){n!==e&&n.dependsOn(e)&&t.link(n.name,e.name)})}),t},e}();w.c.service("variableSrv",bt);var yt=n(19),wt=function(){function e(e,t,n,a){this.model=e,this.timeSrv=t,this.templateSrv=n,this.variableSrv=a,this.defaults={type:"interval",name:"",hide:0,label:"",refresh:2,options:[],current:{},query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",auto:!1,auto_min:"10s",auto_count:30,skipUrlSync:!1},Object(pt.a)(this,e,this.defaults),this.refresh=2}return e.$inject=["model","timeSrv","templateSrv","variableSrv"],e.prototype.getSaveModel=function(){return Object(pt.a)(this.model,this,this.defaults),this.model},e.prototype.setValue=function(e){return this.updateAutoValue(),this.variableSrv.setOptionAsCurrent(this,e)},e.prototype.updateAutoValue=function(){if(this.auto){this.options.length&&"auto"!==this.options[0].text&&this.options.unshift({text:"auto",value:"$__auto_interval_"+this.name});var e=yt.a.calculateInterval(this.timeSrv.timeRange(),this.auto_count,this.auto_min);this.templateSrv.setGrafanaVariable("$__auto_interval_"+this.name,e.interval),this.templateSrv.setGrafanaVariable("$__auto_interval",e.interval)}},e.prototype.updateOptions=function(){return this.options=i.a.map(this.query.match(/(["'])(.*?)\1|\w+/g),function(e){return{text:(e=e.replace(/["']+/g,"")).trim(),value:e.trim()}}),this.updateAutoValue(),this.variableSrv.validateVariableSelectionState(this)},e.prototype.dependsOn=function(e){return!1},e.prototype.setValueFromUrl=function(e){return this.updateAutoValue(),this.variableSrv.setOptionFromUrl(this,e)},e.prototype.getValueForUrl=function(){return this.current.value},e}();pt.d.interval={name:"Interval",ctor:wt,description:"Define a timespan interval (ex 1m, 1h, 1d)"};var xt=function(){function e(e,t,n,a,r){this.model=e,this.datasourceSrv=t,this.templateSrv=n,this.variableSrv=a,this.timeSrv=r,this.defaults={type:"query",label:null,query:"",regex:"",sort:0,datasource:null,refresh:0,hide:0,name:"",multi:!1,includeAll:!1,allValue:null,options:[],current:{},tags:[],useTags:!1,tagsQuery:"",tagValuesQuery:"",skipUrlSync:!1,definition:""},Object(pt.a)(this,e,this.defaults)}return e.$inject=["model","datasourceSrv","templateSrv","variableSrv","timeSrv"],e.prototype.getSaveModel=function(){return Object(pt.a)(this.model,this,this.defaults),0!==this.refresh&&(this.model.options=[]),this.model},e.prototype.setValue=function(e){return this.variableSrv.setOptionAsCurrent(this,e)},e.prototype.setValueFromUrl=function(e){return this.variableSrv.setOptionFromUrl(this,e)},e.prototype.getValueForUrl=function(){return"All"===this.current.text?"All":this.current.value},e.prototype.updateOptions=function(){return this.datasourceSrv.get(this.datasource).then(this.updateOptionsFromMetricFindQuery.bind(this)).then(this.updateTags.bind(this)).then(this.variableSrv.validateVariableSelectionState.bind(this.variableSrv,this))},e.prototype.updateTags=function(e){var t=this;return this.useTags?this.metricFindQuery(e,this.tagsQuery).then(function(n){t.tags=[];for(var a=0;a<n.length;a++)t.tags.push(n[a].text);return e}):(delete this.tags,e)},e.prototype.getValuesForTag=function(e){var t=this;return this.datasourceSrv.get(this.datasource).then(function(n){var a=t.tagValuesQuery.replace("$tag",e);return t.metricFindQuery(n,a).then(function(e){return i.a.map(e,function(e){return e.text})})})},e.prototype.updateOptionsFromMetricFindQuery=function(e){var t=this;return this.metricFindQuery(e,this.query).then(function(n){return t.options=t.metricNamesToVariableValues(n),t.includeAll&&t.addAllOption(),t.options.length||t.options.push({text:"None",value:"",isNone:!0}),e})},e.prototype.metricFindQuery=function(e,t){var n={range:void 0,variable:this};return 2===this.refresh&&(n.range=this.timeSrv.timeRange()),e.metricFindQuery(t,n)},e.prototype.addAllOption=function(){this.options.unshift({text:"All",value:"$__all"})},e.prototype.metricNamesToVariableValues=function(e){var t,n,a,r;for(n=[],this.regex&&(t=yt.a.stringToJsRegex(this.templateSrv.replace(this.regex,{},"regex"))),a=0;a<e.length;a++){var o=e[a],s=void 0===o.text||null===o.text?o.value:o.text,l=void 0===o.value||null===o.value?o.text:o.value;if(i.a.isNumber(l)&&(l=l.toString()),i.a.isNumber(s)&&(s=s.toString()),t){if(!(r=t.exec(l)))continue;r.length>1&&(l=r[1],s=r[1])}n.push({text:s,value:l})}return n=i.a.uniqBy(n,"value"),this.sortVariableValues(n,this.sort)},e.prototype.sortVariableValues=function(e,t){if(0===t)return e;var n=Math.ceil(t/2),a=t%2==0;return 1===n?e=i.a.sortBy(e,"text"):2===n?e=i.a.sortBy(e,function(e){var t=e.text.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)}):3===n&&(e=i.a.sortBy(e,function(e){return i.a.toLower(e.text)})),a&&(e=e.reverse()),e},e.prototype.dependsOn=function(e){return Object(pt.b)(this.query,this.datasource,this.regex,e.name)},e}();pt.d.query={name:"Query",ctor:xt,description:"Variable values are fetched from a datasource query",supportsMulti:!0};var St=function(){function e(e,t,n,a){this.model=e,this.datasourceSrv=t,this.variableSrv=n,this.templateSrv=a,this.defaults={type:"datasource",name:"",hide:0,label:"",current:{},regex:"",options:[],query:"",refresh:1,skipUrlSync:!1},Object(pt.a)(this,e,this.defaults),this.refresh=1}return e.$inject=["model","datasourceSrv","variableSrv","templateSrv"],e.prototype.getSaveModel=function(){return Object(pt.a)(this.model,this,this.defaults),this.model.options=[],this.model},e.prototype.setValue=function(e){return this.variableSrv.setOptionAsCurrent(this,e)},e.prototype.updateOptions=function(){var e,t=[],n=this.datasourceSrv.getMetricSources({skipVariables:!0});this.regex&&(e=this.templateSrv.replace(this.regex,null,"regex"),e=yt.a.stringToJsRegex(e));for(var a=0;a<n.length;a++){var r=n[a];r.meta.id===this.query&&(e&&!e.exec(r.name)||t.push({text:r.name,value:r.name}))}return 0===t.length&&t.push({text:"No data sources found",value:""}),this.options=t,this.variableSrv.validateVariableSelectionState(this)},e.prototype.dependsOn=function(e){return!!this.regex&&Object(pt.b)(this.regex,e.name)},e.prototype.setValueFromUrl=function(e){return this.variableSrv.setOptionFromUrl(this,e)},e.prototype.getValueForUrl=function(){return this.current.value},e}();pt.d.datasource={name:"Datasource",ctor:St,description:"Enabled you to dynamically switch the datasource for multiple panels"};var kt=function(){function e(e,t){this.model=e,this.variableSrv=t,this.defaults={type:"custom",name:"",label:"",hide:0,options:[],current:{},query:"",includeAll:!1,multi:!1,allValue:null,skipUrlSync:!1},Object(pt.a)(this,e,this.defaults)}return e.$inject=["model","variableSrv"],e.prototype.setValue=function(e){return this.variableSrv.setOptionAsCurrent(this,e)},e.prototype.getSaveModel=function(){return Object(pt.a)(this.model,this,this.defaults),this.model},e.prototype.updateOptions=function(){return this.options=i.a.map(this.query.match(/(?:\\,|[^,])+/g),function(e){return{text:(e=e.replace("\\,",",")).trim(),value:e.trim()}}),this.includeAll&&this.addAllOption(),this.variableSrv.validateVariableSelectionState(this)},e.prototype.addAllOption=function(){this.options.unshift({text:"All",value:"$__all"})},e.prototype.dependsOn=function(e){return!1},e.prototype.setValueFromUrl=function(e){return this.variableSrv.setOptionFromUrl(this,e)},e.prototype.getValueForUrl=function(){return"All"===this.current.text?"All":this.current.value},e}();pt.d.custom={name:"Custom",ctor:kt,description:"Define variable values manually",supportsMulti:!0};var Ct=function(){function e(e,t){this.model=e,this.variableSrv=t,this.defaults={type:"constant",name:"",hide:2,label:"",query:"",current:{},options:[],skipUrlSync:!1},Object(pt.a)(this,e,this.defaults)}return e.$inject=["model","variableSrv"],e.prototype.getSaveModel=function(){return Object(pt.a)(this.model,this,this.defaults),this.model},e.prototype.setValue=function(e){this.variableSrv.setOptionAsCurrent(this,e)},e.prototype.updateOptions=function(){return this.options=[{text:this.query.trim(),value:this.query.trim()}],this.setValue(this.options[0]),Promise.resolve()},e.prototype.dependsOn=function(e){return!1},e.prototype.setValueFromUrl=function(e){return this.variableSrv.setOptionFromUrl(this,e)},e.prototype.getValueForUrl=function(){return this.current.value},e}();pt.d.constant={name:"Constant",ctor:Ct,description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share"};var Et=function(){function e(e){this.model=e,this.defaults={type:"adhoc",name:"",label:"",hide:0,datasource:null,filters:[],skipUrlSync:!1},Object(pt.a)(this,e,this.defaults)}return e.$inject=["model"],e.prototype.setValue=function(e){return Promise.resolve()},e.prototype.getSaveModel=function(){return Object(pt.a)(this.model,this,this.defaults),this.model},e.prototype.updateOptions=function(){return Promise.resolve()},e.prototype.dependsOn=function(e){return!1},e.prototype.setValueFromUrl=function(e){var t=this;return i.a.isArray(e)||(e=[e]),this.filters=e.map(function(e){var n=e.split("|").map(function(e){return t.unescapeDelimiter(e)});return{key:n[0],operator:n[1],value:n[2]}}),Promise.resolve()},e.prototype.getValueForUrl=function(){var e=this;return this.filters.map(function(t){return[t.key,t.operator,t.value].map(function(t){return e.escapeDelimiter(t)}).join("|")})},e.prototype.escapeDelimiter=function(e){return e.replace(/\|/g,"__gfp__")},e.prototype.unescapeDelimiter=function(e){return e.replace(/__gfp__/g,"|")},e.prototype.setFilters=function(e){this.filters=e},e}();pt.d.adhoc={name:"Ad hoc filters",ctor:Et,description:"Add key/value filters on the fly"};var Tt=function(){function e(e,t){this.model=e,this.variableSrv=t,this.defaults={type:"textbox",name:"",hide:2,label:"",query:"",current:{},options:[],skipUrlSync:!1},Object(pt.a)(this,e,this.defaults)}return e.$inject=["model","variableSrv"],e.prototype.getSaveModel=function(){return Object(pt.a)(this.model,this,this.defaults),this.model},e.prototype.setValue=function(e){this.variableSrv.setOptionAsCurrent(this,e)},e.prototype.updateOptions=function(){return this.options=[{text:this.query.trim(),value:this.query.trim()}],this.current=this.options[0],Promise.resolve()},e.prototype.dependsOn=function(e){return!1},e.prototype.setValueFromUrl=function(e){return this.query=e,this.variableSrv.setOptionFromUrl(this,e)},e.prototype.getValueForUrl=function(){return this.current.value},e}();pt.d.textbox={name:"Text box",ctor:Tt,description:"Define a textbox variable, where users can enter any arbitrary string"},w.c.factory("templateSrv",function(){return ft.a});var Mt=n(111),_t=n.n(Mt),At=function(){function e(e,t,n,a,r,i){this.$scope=e,this.$rootScope=t,this.backendSrv=n,this.$sce=a,this.$routeParams=r,this.pluginId=r.pluginId,this.preUpdateHook=function(){return Promise.resolve()},this.postUpdateHook=function(){return Promise.resolve()},this.init()}return e.$inject=["$scope","$rootScope","backendSrv","$sce","$routeParams","navModelSrv"],e.prototype.setNavModel=function(e){var t="readme";(this.navModel={main:{img:e.info.logos.large,subTitle:e.info.author.name,url:"",text:e.name,breadcrumbs:[{title:"Plugins",url:"plugins"}],children:[{icon:"fa fa-fw fa-file-text-o",id:"readme",text:"Readme",url:"plugins/"+this.model.id+"/edit?tab=readme"}]}},"app"===e.type)&&(this.navModel.main.children.push({icon:"gicon gicon-cog",id:"config",text:"Config",url:"plugins/"+this.model.id+"/edit?tab=config"}),i.a.find(e.includes,{type:"dashboard"})&&this.navModel.main.children.push({icon:"gicon gicon-dashboard",id:"dashboards",text:"Dashboards",url:"plugins/"+this.model.id+"/edit?tab=dashboards"}),t="config");this.tab=this.$routeParams.tab||t;for(var n=0,a=this.navModel.main.children;n<a.length;n++){var r=a[n];r.id===this.tab&&(r.active=!0)}},e.prototype.init=function(){var e=this;return this.backendSrv.get("/api/plugins/"+this.pluginId+"/settings").then(function(t){return e.model=t,e.pluginIcon=e.getPluginIcon(e.model.type),e.model.dependencies.plugins.forEach(function(t){t.icon=e.getPluginIcon(t.type)}),e.includes=i.a.map(t.includes,function(t){return t.icon=e.getPluginIcon(t.type),t}),e.setNavModel(e.model),e.initReadme()})},e.prototype.initReadme=function(){var e=this;return this.backendSrv.get("/api/plugins/"+this.pluginId+"/markdown/readme").then(function(t){var n=new _t.a({linkify:!0});e.readmeHtml=e.$sce.trustAsHtml(n.render(t))})},e.prototype.getPluginIcon=function(e){switch(e){case"datasource":return"icon-gf icon-gf-datasources";case"panel":return"icon-gf icon-gf-panel";case"app":return"icon-gf icon-gf-apps";case"page":return"icon-gf icon-gf-endpoint-tiny";case"dashboard":return"icon-gf icon-gf-dashboard";default:return"icon-gf icon-gf-apps"}},e.prototype.update=function(){var e=this;this.preUpdateHook().then(function(){var t=i.a.extend({enabled:e.model.enabled,pinned:e.model.pinned,jsonData:e.model.jsonData,secureJsonData:e.model.secureJsonData},{});return e.backendSrv.post("/api/plugins/"+e.pluginId+"/settings",t)}).then(this.postUpdateHook).then(function(e){window.location.href=window.location.href})},e.prototype.importDashboards=function(){return Promise.resolve()},e.prototype.setPreUpdateHook=function(e){this.preUpdateHook=e},e.prototype.setPostUpdateHook=function(e){this.postUpdateHook=e},e.prototype.updateAvailable=function(){var e=this.$scope.$new(!0);e.plugin=this.model,this.$rootScope.appEvent("show-modal",{src:"public/app/features/plugins/partials/update_instructions.html",scope:e})},e.prototype.enable=function(){this.model.enabled=!0,this.model.pinned=!0,this.update()},e.prototype.disable=function(){this.model.enabled=!1,this.model.pinned=!1,this.update()},e}();c.a.module("grafana.controllers").controller("PluginEditCtrl",At);var Dt={},Nt=function(){function e(e,t,n,a){this.backendSrv=e,this.$routeParams=t,this.$rootScope=n,this.navModelSrv=a,this.pluginId=t.pluginId,Dt[this.pluginId]?this.initPage(Dt[this.pluginId]):this.loadPluginInfo()}return e.$inject=["backendSrv","$routeParams","$rootScope","navModelSrv"],e.prototype.initPage=function(e){if(this.appModel=e,this.page=i.a.find(e.includes,{slug:this.$routeParams.slug}),Dt[this.pluginId]=e,!this.page)return this.$rootScope.appEvent("alert-error",["App Page Not Found",""]),void(this.navModel=this.navModelSrv.getNotFoundNav());var t=this.navModelSrv.getNav("plugin-page-"+e.id);this.navModel={main:{img:e.info.logos.large,subTitle:e.name,url:"",text:this.page.name,breadcrumbs:[{title:e.name,url:t.main.url}]}}},e.prototype.loadPluginInfo=function(){var e=this;this.backendSrv.get("/api/plugins/"+this.pluginId+"/settings").then(function(t){e.initPage(t)})},e}();c.a.module("grafana.controllers").controller("AppPageCtrl",Nt);var Pt=function(){function e(e,t,n){var a=this;this.backendSrv=t,this.$rootScope=n,this.dashboards=[],t.get("/api/plugins/"+this.plugin.id+"/dashboards").then(function(e){a.dashboards=e}),L.b.on("dashboard-list-import-all",this.importAll.bind(this),e)}return e.$inject=["$scope","backendSrv","$rootScope"],e.prototype.importAll=function(e){return this.importNext(0).then(function(){e.resolve("All dashboards imported")}).catch(function(t){e.reject(t)})},e.prototype.importNext=function(e){var t=this;return this.import(this.dashboards[e],!0).then(function(){return e+1<t.dashboards.length?new Promise(function(n){setTimeout(function(){t.importNext(e+1).then(function(){n()})},500)}):Promise.resolve()})},e.prototype.import=function(e,t){var n=this,a={pluginId:this.plugin.id,path:e.path,overwrite:t,inputs:[]};return this.datasource&&a.inputs.push({name:"*",type:"datasource",pluginId:this.datasource.type,value:this.datasource.name}),this.backendSrv.post("/api/dashboards/import",a).then(function(t){n.$rootScope.appEvent("alert-success",["Dashboard Imported",e.title]),i.a.extend(e,t)})},e.prototype.remove=function(e){var t=this;this.backendSrv.delete("/api/dashboards/"+e.importedUri).then(function(){t.$rootScope.appEvent("alert-success",["Dashboard Deleted",e.title]),e.imported=!1})},e}();w.c.directive("dashboardImportList",function(){return{restrict:"E",templateUrl:"public/app/features/plugins/import_list/import_list.html",controller:Pt,bindToController:!0,controllerAs:"ctrl",scope:{plugin:"=",datasource:"="}}});var Ot=n(113);function It(e,t,n,a,r,o,s){function l(e,t){if(e)return 0===e.indexOf("public")?e:t+"/"+e}function u(e,t){var n={name:"panel-plugin-"+e.panel.type,bindings:{dashboard:"=",panel:"=",row:"="},attrs:{dashboard:"dashboard",panel:"panel",class:"panel-height-helper"}},i=f.a.panels[e.panel.type],s=Promise.resolve(null);return i&&(s=Object(Ot.a)(i.module).then(function(e){return e.PanelCtrl})),s.then(function(e){return n.Component=e,!e||e.registered?n:e.templatePromise?e.templatePromise.then(function(e){return n}):(i&&(e.templateUrl=l(e.templateUrl,i.baseUrl)),e.templatePromise=function(e){if(e.template)return a.when(e.template);var t=o.get(e.templateUrl);return t?a.when(t):r.get(e.templateUrl).then(function(e){return e.data})}(e).then(function(t){return e.templateUrl=null,e.template='<grafana-panel ctrl="ctrl" class="panel-height-helper">'+t+"</grafana-panel>",n}),e.templatePromise)})}function d(t,n,a,r){if(r.notFound)n.empty();else{if(!r.Component)throw{message:"Failed to find exported plugin component for "+r.name};if(!r.Component.registered){var o=a.$normalize(r.name),s=function(e){return e.Component.templateUrl=l(e.Component.templateUrl,e.baseUrl),function(){return{templateUrl:e.Component.templateUrl,template:e.Component.template,restrict:"E",controller:e.Component,controllerAs:"ctrl",bindToController:!0,scope:e.bindings,link:function(e,t,n,a){a.link&&a.link(e,t,n,a),a.init&&a.init()}}}}(r);w.c.directive(o,s),r.Component.registered=!0}!function(t,n,a){var r=c.a.element(document.createElement(a.name));i.a.each(a.attrs,function(e,t){r.attr(t,e)}),e(r)(t),n.empty(),setTimeout(function(){t.$applyAsync(function(){n.append(r),setTimeout(function(){t.$applyAsync(function(){t.$broadcast("component-did-mount")})})})})}(t,n,r)}}return{restrict:"E",link:function(e,t,n){(function(e,t){switch(t.type){case"query-ctrl":var n=e.ctrl.datasource;return a.when({baseUrl:n.meta.baseUrl,name:"query-ctrl-"+n.meta.id,bindings:{target:"=",panelCtrl:"=",datasource:"="},attrs:{target:"ctrl.target","panel-ctrl":"ctrl",datasource:"ctrl.datasource"},Component:n.pluginExports.QueryCtrl});case"annotations-query-ctrl":return Object(Ot.a)(e.ctrl.currentDatasource.meta.module).then(function(t){return{baseUrl:e.ctrl.currentDatasource.meta.baseUrl,name:"annotations-query-ctrl-"+e.ctrl.currentDatasource.meta.id,bindings:{annotation:"=",datasource:"="},attrs:{annotation:"ctrl.currentAnnotation",datasource:"ctrl.currentDatasource"},Component:t.AnnotationsQueryCtrl}});case"datasource-config-ctrl":var r=e.ctrl.datasourceMeta;return Object(Ot.a)(r.module).then(function(t){return t.ConfigCtrl?(e.$watch("ctrl.current",function(){e.onModelChanged(e.ctrl.current)},!0),{baseUrl:r.baseUrl,name:"ds-config-"+r.id,bindings:{meta:"=",current:"="},attrs:{meta:"ctrl.datasourceMeta",current:"ctrl.current"},Component:t.ConfigCtrl}):{notFound:!0}});case"app-config-ctrl":var i=e.ctrl.model;return Object(Ot.a)(i.module).then(function(e){return{baseUrl:i.baseUrl,name:"app-config-"+i.id,bindings:{appModel:"=",appEditCtrl:"="},attrs:{"app-model":"ctrl.model","app-edit-ctrl":"ctrl"},Component:e.ConfigCtrl}});case"app-page":var o=e.ctrl.appModel;return Object(Ot.a)(o.module).then(function(t){return{baseUrl:o.baseUrl,name:"app-page-"+o.id+"-"+e.ctrl.page.slug,bindings:{appModel:"="},attrs:{"app-model":"ctrl.appModel"},Component:t[e.ctrl.page.component]}});case"panel":return u(e);default:return a.reject({message:"Could not find component type: "+t.type})}})(e,n).then(function(a){d(e,t,n,a)}).catch(function(e){console.log("Plugin component error",e)})}}}w.c.directive("pluginComponent",It);var $t=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:t.query},n}return E.c(t,e),t.prototype.handleChange=function(e){this.setState({value:e.target.value})},t.prototype.handleBlur=function(e){this.props.onChange(e.target.value,e.target.value)},t.prototype.render=function(){var e=this;return d.a.createElement("div",{className:"gf-form"},d.a.createElement("span",{className:"gf-form-label width-10"},"Query"),d.a.createElement("input",{type:"text",className:"gf-form-input",value:this.state.value,onChange:function(t){return e.handleChange(t)},onBlur:function(t){return e.handleBlur(t)},placeholder:"metric name or tags query",required:!0}))},t}(u.PureComponent);function Ft(e){var t=this;return{restrict:"E",link:function(n,a){return E.b(t,void 0,void 0,function(){var t,r;return E.d(this,function(i){switch(i.label){case 0:return[4,function(e){return E.b(this,void 0,void 0,function(){var t;return E.d(this,function(n){switch(n.label){case 0:return[4,Object(Ot.a)(e)];case 1:return(t=n.sent())&&t.VariableQueryEditor?[2,t.VariableQueryEditor]:[2,$t]}})})}(n.currentDatasource.meta.module)];case 1:return t=i.sent(),r={datasource:n.currentDatasource,query:n.current.query,onChange:n.onQueryChange,templateSrv:e},h.a.render(d.a.createElement(t,E.a({},r)),a[0]),n.$on("$destroy",function(){h.a.unmountComponentAtNode(a[0])}),[2]}})})}}}w.c.directive("variableQueryEditorLoader",Ft);var qt=n(69),Rt=n(291);Object(qt.a)("dashboardGrid",Rt.b,[["dashboard",{watchDepth:"reference"}]]);var Lt=function(){function e(e,t,n,a,r,i,o,s){var l=this;this.$location=a,this.$timeout=i,this.contextSrv=o,this.$rootScope=s,this.$location=a,this.$window=r,this.current=e,this.originalPath=a.path(),this.scope=t,t.onAppEvent("dashboard-saved",function(){l.original=l.current.getSaveModelClone(),l.originalPath=a.path()}),r.onbeforeunload=function(){if(!l.ignoreChanges())return l.hasChanges()?"There are unsaved changes to this dashboard":void 0},t.$on("$locationChangeStart",function(e,t){return l.originalPath===a.path()||(!!l.ignoreChanges()||(l.hasChanges()&&(e.preventDefault(),l.next=t,l.$timeout(function(){l.open_modal()})),!1))}),n?this.$timeout(function(){l.original=e.getSaveModelClone()},n):this.original=e.getSaveModelClone()}return e.$inject=["dashboard","scope","originalCopyDelay","$location","$window","$timeout","contextSrv","$rootScope"],e.prototype.ignoreChanges=function(){if(!this.original)return!0;if(!this.contextSrv.isEditor)return!0;if(!this.current||!this.current.meta)return!0;var e=this.current.meta;return!e.canSave||e.fromScript||e.fromFile},e.prototype.cleanDashboardFromIgnoredChanges=function(e){var t=new qe.a(e);t.expandRows();var n=t.getSaveModelClone();return n.time=0,n.refresh=0,n.schemaVersion=0,delete n.iteration,n.panels=i.a.filter(n.panels,function(e){return!e.repeatPanelId&&(e.scopedVars=null,e.legend&&(delete e.legend.sort,delete e.legend.sortDesc),!0)}),i.a.each(n.templating.list,function(e){e.current=null,e.options=null,e.filters=null}),n},e.prototype.hasChanges=function(){var e=this.cleanDashboardFromIgnoredChanges(this.current.getSaveModelClone()),t=this.cleanDashboardFromIgnoredChanges(this.original),n=i.a.find(e.nav,{type:"timepicker"}),a=i.a.find(t.nav,{type:"timepicker"});return n&&a&&(n.now=a.now),c.a.toJson(e,!0)!==c.a.toJson(t,!0)},e.prototype.discardChanges=function(){this.original=null,this.gotoNext()},e.prototype.open_modal=function(){this.$rootScope.appEvent("show-modal",{templateHtml:'<unsaved-changes-modal dismiss="dismiss()"></unsaved-changes-modal>',modalClass:"modal--narrow confirm-modal"})},e.prototype.saveChanges=function(){var e=this,t=this,n=this.$rootScope.$on("dashboard-saved",function(){n(),e.$timeout(function(){t.gotoNext()})});this.$rootScope.appEvent("save-dashboard")},e.prototype.gotoNext=function(){var e=this.$location.absUrl().length-this.$location.url().length,t=this.next.substring(e);this.$location.url(t)},e}();function jt(e,t,n,a,r,i,o){this.init=function(t,i){return this.tracker=new Lt(t,i,1e3,n,o,a,r,e),this.tracker}}c.a.module("grafana.services").service("unsavedChangesSrv",jt);var Ut=n(35),Vt=n(152),Bt=function(){function e(e,t,n,a,r,i,o,s,l){this.backendSrv=e,this.dashboardSrv=t,this.datasourceSrv=n,this.$http=a,this.$q=r,this.$timeout=i,this.$routeParams=s,this.$rootScope=l}return e.$inject=["backendSrv","dashboardSrv","datasourceSrv","$http","$q","$timeout","contextSrv","$routeParams","$rootScope"],e.prototype._dashboardLoadFailed=function(e,t){return{meta:{canStar:!1,isSnapshot:t=t||!1,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:e}}},e.prototype.loadDashboard=function(e,t,n){var a,r=this;return(a="script"===e?this._loadScriptedDashboard(t):"snapshot"===e?this.backendSrv.get("/api/snapshots/"+t).catch(function(){return r._dashboardLoadFailed("Snapshot not found",!0)}):this.backendSrv.getDashboardByUid(n).then(function(e){if(e.meta.isFolder)throw r.$rootScope.appEvent("alert-error",["Dashboard not found"]),new Error("Dashboard not found");return e}).catch(function(){return r._dashboardLoadFailed("Not found",!0)})).then(function(e){return!0!==e.meta.dashboardNotFound&&Vt.a.addDashboardImpression(e.dashboard.id),e}),a},e.prototype._loadScriptedDashboard=function(e){var t=this,n="public/dashboards/"+e.replace(/\.(?!js)/,"/")+"?"+(new Date).getTime();return this.$http({url:n,method:"GET"}).then(this._executeScript.bind(this)).then(function(e){return{meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e.data}},function(e){return console.log("Script dashboard error "+e),t.$rootScope.appEvent("alert-error",["Script Error","Please make sure it exists and returns a valid dashboard"]),t._dashboardLoadFailed("Scripted dashboard")})},e.prototype._executeScript=function(e){var t=this,n={dashboardSrv:this.dashboardSrv,datasourceSrv:this.datasourceSrv,$q:this.$q},a=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",e.data)(this.$routeParams,yt.a,Ut,i.a,g.a,window,document,s.a,s.a,n);if(i.a.isFunction(a)){var r=this.$q.defer();return a(function(e){t.$timeout(function(){r.resolve({data:e})})}),r.promise}return{data:a}},e}();c.a.module("grafana.services").service("dashboardLoaderSrv",Bt);var Qt=n(68),zt=function(){function e(e,t,n){var a=this;this.backendSrv=e,this.$rootScope=t,this.$location=n,this.onRemovePanel=function(e){var t=a.getCurrent();Object(Qt.f)(t,t.getPanelById(e),!0)},this.onPanelChangeView=function(e){var t=a.$location.search();if(e.fullscreen===t.fullscreen&&!!e.edit==!!t.edit)return delete t.fullscreen,delete t.edit,delete t.panelId,void a.$location.search(t);e.fullscreen?t.fullscreen=!0:delete t.fullscreen,e.edit?t.edit=!0:delete t.edit,e.panelId||0===e.panelId?t.panelId=e.panelId:delete t.panelId,a.$location.search(t)},L.a.on("save-dashboard",this.saveDashboard.bind(this),t),L.a.on("panel-change-view",this.onPanelChangeView),L.a.on("remove-panel",this.onRemovePanel)}return e.$inject=["backendSrv","$rootScope","$location"],e.prototype.create=function(e,t){return new qe.a(e,t)},e.prototype.setCurrent=function(e){this.dashboard=e},e.prototype.getCurrent=function(){return this.dashboard},e.prototype.handleSaveDashboardError=function(e,t,n){var a=this;(t=t||{}).overwrite=!0,n.data&&"version-mismatch"===n.data.status&&(n.isHandled=!0,this.$rootScope.appEvent("confirm-modal",{title:"Conflict",text:"Someone else has updated this dashboard.",text2:"Would you still like to save this dashboard?",yesText:"Save & Overwrite",icon:"fa-warning",onConfirm:function(){a.save(e,t)}})),n.data&&"name-exists"===n.data.status&&(n.isHandled=!0,this.$rootScope.appEvent("confirm-modal",{title:"Conflict",text:"A dashboard with the same name in selected folder already exists.",text2:"Would you still like to save this dashboard?",yesText:"Save & Overwrite",icon:"fa-warning",onConfirm:function(){a.save(e,t)}})),n.data&&"plugin-dashboard"===n.data.status&&(n.isHandled=!0,this.$rootScope.appEvent("confirm-modal",{title:"Plugin Dashboard",text:n.data.message,text2:"Your changes will be lost when you update the plugin. Use Save As to create custom version.",yesText:"Overwrite",icon:"fa-warning",altActionText:"Save As",onAltAction:function(){a.showSaveAsModal()},onConfirm:function(){a.save(e,{overwrite:!0})}}))},e.prototype.postSave=function(e,t){this.dashboard.version=t.version,this.$rootScope.appEvent("dashboard-saved",this.dashboard),this.$rootScope.appEvent("alert-success",["Dashboard saved"]);var n=S.a.stripBaseFromUrl(t.url);return n!==this.$location.path()&&this.$location.url(n).replace(),this.dashboard},e.prototype.save=function(e,t){return(t=t||{}).folderId=t.folderId>=0?t.folderId:this.dashboard.meta.folderId||e.folderId,this.backendSrv.saveDashboard(e,t).then(this.postSave.bind(this,e)).catch(this.handleSaveDashboardError.bind(this,e,t))},e.prototype.saveDashboard=function(e,t){return t&&this.setCurrent(this.create(t,this.dashboard.meta)),this.dashboard.meta.provisioned?this.showDashboardProvisionedModal():this.dashboard.meta.canSave||!0===e.makeEditable?"New dashboard"===this.dashboard.title?this.showSaveAsModal():this.dashboard.version>0?this.showSaveModal():this.save(this.dashboard.getSaveModelClone(),e):Promise.resolve()},e.prototype.saveJSONDashboard=function(e){return this.save(JSON.parse(e),{})},e.prototype.showDashboardProvisionedModal=function(){this.$rootScope.appEvent("show-modal",{templateHtml:'<save-provisioned-dashboard-modal dismiss="dismiss()"></save-provisioned-dashboard-modal>'})},e.prototype.showSaveAsModal=function(){this.$rootScope.appEvent("show-modal",{templateHtml:'<save-dashboard-as-modal dismiss="dismiss()"></save-dashboard-as-modal>',modalClass:"modal--narrow"})},e.prototype.showSaveModal=function(){this.$rootScope.appEvent("show-modal",{templateHtml:'<save-dashboard-modal dismiss="dismiss()"></save-dashboard-modal>',modalClass:"modal--narrow"})},e.prototype.starDashboard=function(e,t){var n=this;return(t?this.backendSrv.delete("/api/user/stars/dashboard/"+e).then(function(){return!1}):this.backendSrv.post("/api/user/stars/dashboard/"+e).then(function(){return!0})).then(function(t){return n.dashboard&&n.dashboard.id===e&&(n.dashboard.meta.isStarred=t),t})},e}();w.c.service("dashboardSrv",zt);var Ht={"external link":"fa-external-link",dashboard:"fa-th-large",question:"fa-question",info:"fa-info",bolt:"fa-bolt",doc:"fa-file-text-o",cloud:"fa-cloud"},Gt=function(){function e(e,t){this.iconMap=Ht,this.dashboard.links=this.dashboard.links||[],this.mode="list",e.$on("$destroy",function(){t.appEvent("dash-links-updated")})}return e.$inject=["$scope","$rootScope"],e.prototype.backToList=function(){this.mode="list"},e.prototype.setupNew=function(){this.mode="new",this.link={type:"dashboards",icon:"external link"}},e.prototype.addLink=function(){this.dashboard.links.push(this.link),this.mode="list",this.dashboard.updateSubmenuVisibility()},e.prototype.editLink=function(e){this.link=e,this.mode="edit",console.log(this.link)},e.prototype.saveLink=function(){this.backToList()},e.prototype.moveLink=function(e,t){i.a.move(this.dashboard.links,e,e+t)},e.prototype.deleteLink=function(e){this.dashboard.links.splice(e,1),this.dashboard.updateSubmenuVisibility()},e}();function Wt(e,t,n){return{restrict:"E",link:function(a,r){var i=a.link,o=a.dashboard,s='<div class="gf-form"><a class="pointer gf-form-label" data-placement="bottom"'+(i.asDropdown?' ng-click="fillDropdown(link)" data-toggle="dropdown"':"")+"><i></i> <span></span></a>";function l(){var e=n.getAnchorInfo(i),o=r.find("a");r.find("span").text(e.title),i.asDropdown||(o.attr("href",e.href),function(){var e=r.find("a"),n=t(e.parent().html());e.parent().html(n)}()),o.attr("data-placement","bottom"),o.tooltip({title:t(a.link.tooltip),html:!0,container:"body"})}i.asDropdown&&(s+='<ul class="dropdown-menu" role="menu"><li ng-repeat="dash in link.searchHits"><a href="{{dash.url}}" target="{{dash.target}}">{{dash.title}}</a></li></ul>'),s+="</div>",r.html(s),e(r.contents())(a),r.find("i").attr("class","fa fa-fw "+a.link.icon),r.find("a").attr("target",a.link.target),i.asDropdown&&a.$last&&r.find(".dropdown-menu").addClass("pull-right"),l(),o.events.on("refresh",l,a)}}}c.a.module("grafana.directives").directive("dashLinksEditor",function(){return{restrict:"E",controller:Gt,templateUrl:"public/app/features/dashboard/components/DashLinks/editor.html",bindToController:!0,controllerAs:"ctrl",scope:{dashboard:"="}}});var Yt=function(){function e(e,t,n,a,r,o){var s=r.getCurrent().id;function l(t){return"dashboards"===t.type?t.tags?t.asDropdown?n.when([{title:t.title,tags:t.tags,keepTime:t.keepTime,includeVars:t.includeVars,target:t.targetBlank?"_blank":"_self",icon:"fa fa-bars",asDropdown:!0}]):e.searchDashboards(t,7):(console.log("Dashboard link missing tag"),n.when([])):"link"===t.type?n.when([{url:t.url,title:t.title,icon:Ht[t.icon],tooltip:t.tooltip,target:t.targetBlank?"_blank":"_self",keepTime:t.keepTime,includeVars:t.includeVars}]):n.when([])}function c(){var t=i.a.map(e.links,l);n.all(t).then(function(t){e.generatedLinks=i.a.flatten(t)})}e.searchDashboards=function(e,t){return a.search({tag:e.tags,limit:t}).then(function(t){return i.a.reduce(t,function(t,n){return n.id!==s&&t.push({title:n.title,url:n.url,target:"_self"===e.target?"":e.target,icon:"fa fa-th-large",keepTime:e.keepTime,includeVars:e.includeVars}),t},[])})},e.fillDropdown=function(t){e.searchDashboards(t,100).then(function(e){i.a.each(e,function(e){e.url=o.getLinkUrl(e)}),t.searchHits=e})},c(),t.onAppEvent("dash-links-updated",c,e)}return e.$inject=["$scope","$rootScope","$q","backendSrv","dashboardSrv","linkSrv"],e}();c.a.module("grafana.directives").directive("dashLinksContainer",function(){return{scope:{links:"=",dashboard:"="},restrict:"E",controller:"DashLinksContainerCtrl",template:'<dash-link ng-repeat="link in generatedLinks" link="link"></dash-link>',link:function(){}}}),c.a.module("grafana.directives").directive("dashLink",Wt),c.a.module("grafana.directives").controller("DashLinksContainerCtrl",Yt);var Kt=function(){function e(e){this.datasourceSrv=e}return e.prototype.makeExportable=function(e){var t=this;e.cleanUpRepeats();var n=e.getSaveModelClone();n.id=null,e.processRepeats();for(var a=[],r={},o={},s=[],l={},c=0,u=n.templating.list;c<u.length;c++){var d=u[c];l[d.name]=d}for(var p=function(e){var n=e.datasource,a=null;n&&0===n.indexOf("$")&&(a=l[n.substring(1)])&&a.current&&(n=a.current.value),s.push(t.datasourceSrv.get(n).then(function(t){if(!t.meta.builtIn&&(r["datasource"+t.meta.id]={type:"datasource",id:t.meta.id,name:t.meta.name,version:t.meta.info.version||"1.0.0"},!a)){var n="DS_"+t.name.replace(" ","_").toUpperCase();o[n]={name:n,label:t.name,description:"",type:"datasource",pluginId:t.meta.id,pluginName:t.meta.name},e.datasource="${"+n+"}"}}))},h=function(e){if(void 0!==e.datasource&&p(e),e.targets)for(var t=0,n=e.targets;t<n.length;t++){var a=n[t];void 0!==a.datasource&&p(a)}var i=f.a.panels[e.type];i&&(r["panel"+i.id]={type:"panel",id:i.id,name:i.name,version:i.info.version})},m=0,g=n.panels;m<g.length;m++){var v=g[m];if(h(v),void 0!==v.collapsed&&!0===v.collapsed&&v.panels)for(var b=0,y=v.panels;b<y.length;b++){h(y[b])}}for(var w=0,x=n.templating.list;w<x.length;w++){"query"===(d=x[w]).type&&(p(d),d.options=[],d.current={},d.refresh=d.refresh>0?d.refresh:1)}for(var S=0,k=n.annotations.list;S<k.length;S++){var C=k[S];p(C)}return r.grafana={type:"grafana",id:"grafana",name:"Grafana",version:f.a.buildInfo.version},Promise.all(s).then(function(){i.a.each(o,function(e,t){a.push(e)});for(var e=0,t=n.templating.list;e<t.length;e++){var s=t[e];if("constant"===s.type){var l="VAR_"+s.name.replace(" ","_").toUpperCase();a.push({name:l,type:"constant",label:s.label||s.name,value:s.current.value,description:""}),s.query="${"+l+"}",s.options[0]=s.current={value:s.query,text:s.query}}}var c={};return c.__inputs=a,c.__requires=i.a.sortBy(r,["id"]),i.a.defaults(c,n),c}).catch(function(e){return console.log("Export failed:",e),{error:e}})},e}(),Xt=function(){function e(e,t,n,a){this.dashboardSrv=e,this.$scope=n,this.$rootScope=a,this.exporter=new Kt(t),this.dash=this.dashboardSrv.getCurrent()}return e.$inject=["dashboardSrv","datasourceSrv","$scope","$rootScope"],e.prototype.saveDashboardAsFile=function(){var e=this;this.shareExternally?this.exporter.makeExportable(this.dash).then(function(t){e.$scope.$apply(function(){e.openSaveAsDialog(t)})}):this.openSaveAsDialog(this.dash.getSaveModelClone())},e.prototype.viewJson=function(){var e=this;this.shareExternally?this.exporter.makeExportable(this.dash).then(function(t){e.$scope.$apply(function(){e.openJsonModal(t)})}):this.openJsonModal(this.dash.getSaveModelClone())},e.prototype.openSaveAsDialog=function(e){var t=new Blob([c.a.toJson(e,!0)],{type:"application/json;charset=utf-8"});Object(a.saveAs)(t,e.title+"-"+(new Date).getTime()+".json")},e.prototype.openJsonModal=function(e){var t={object:e,enableCopy:!0};this.$rootScope.appEvent("show-modal",{src:"public/app/partials/edit_json.html",model:t}),this.dismiss()},e}();w.c.directive("dashExportModal",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/DashExportModal/template.html",controller:Xt,bindToController:!0,controllerAs:"ctrl",scope:{dismiss:"&"}}});n(379);var Jt=n(207),Zt=function(){function e(){this.asRows=!0,this.dateTimeFormat="YYYY-MM-DDTHH:mm:ssZ",this.excel=!1}return e.prototype.export=function(){"table"===this.panel?Jt.exportTableDataToCsv(this.data,this.excel):this.asRows?Jt.exportSeriesListToCsv(this.data,this.dateTimeFormat,this.excel):Jt.exportSeriesListToCsvColumns(this.data,this.dateTimeFormat,this.excel),this.dismiss()},e.prototype.dismiss=function(){L.b.emit("hide-modal")},e}();c.a.module("grafana.directives").directive("exportDataModal",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/ExportDataModal/template.html",controller:Zt,controllerAs:"ctrl",scope:{panel:"<",data:"<"},bindToController:!0}});var en=function(){function e(e,t,n){this.backendSrv=e,this.validationSrv=t,this.contextSrv=n,this.rootName="General",this.isEditor=this.contextSrv.isEditor,this.labelClass||(this.labelClass="width-7"),this.loadInitialValue()}return e.$inject=["backendSrv","validationSrv","contextSrv"],e.prototype.getOptions=function(e){var t=this,n={query:e,type:"dash-folder",permission:"Edit"};return this.backendSrv.get("api/search",n).then(function(n){return!t.isEditor||""!==e&&"g"!==e.toLowerCase()&&"ge"!==e.toLowerCase()&&"gen"!==e.toLowerCase()&&"gene"!==e.toLowerCase()&&"gener"!==e.toLowerCase()&&"genera"!==e.toLowerCase()&&"general"!==e.toLowerCase()||n.unshift({title:t.rootName,id:0}),t.isEditor&&t.enableCreateNew&&""===e&&n.unshift({title:"-- New Folder --",id:-1}),t.enableReset&&""===e&&""!==t.initialTitle&&n.unshift({title:t.initialTitle,id:null}),i.a.map(n,function(e){return{text:e.title,value:e.id}})})},e.prototype.onFolderChange=function(e){if(e){if(-1===e.value)return this.createNewFolder=!0,void this.enterFolderCreation()}else e={value:0,text:this.rootName};this.onChange({$folder:{id:e.value,title:e.text}})},e.prototype.newFolderNameChanged=function(){var e=this;this.newFolderNameTouched=!0,this.validationSrv.validateNewFolderName(this.newFolderName).then(function(){e.hasValidationError=!1}).catch(function(t){e.hasValidationError=!0,e.validationError=t.message})},e.prototype.createFolder=function(e){var t=this;return e&&(e.stopPropagation(),e.preventDefault()),this.backendSrv.createFolder({title:this.newFolderName}).then(function(e){L.b.emit("alert-success",["Folder Created","OK"]),t.closeCreateFolder(),t.folder={text:e.title,value:e.id},t.onFolderChange(t.folder)})},e.prototype.cancelCreateFolder=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.closeCreateFolder(),this.loadInitialValue()},e.prototype.closeCreateFolder=function(){this.exitFolderCreation(),this.createNewFolder=!1,this.hasValidationError=!1,this.validationError=null,this.newFolderName="",this.newFolderNameTouched=!1},e.prototype.loadInitialValue=function(){var e=this,t={text:this.initialTitle,value:null},n={text:this.rootName,value:0};this.getOptions("").then(function(a){var r;(e.initialFolderId?r=i.a.find(a,{value:e.initialFolderId}):e.enableReset&&e.initialTitle&&null===e.initialFolderId&&(r=t),r)||(r=e.isEditor?n:!!e.dashboardId?t:a.length>0?a[0]:t);e.folder=r,e.folder.value!==e.initialFolderId&&e.onChange({$folder:{id:e.folder.value,title:e.folder.text}})})},e}();w.c.directive("folderPicker",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/FolderPicker/template.html",controller:en,bindToController:!0,controllerAs:"ctrl",scope:{initialTitle:"<",initialFolderId:"<",labelClass:"@",rootName:"@",onChange:"&",onCreateFolder:"&",enterFolderCreation:"&",exitFolderCreation:"&",enableCreateNew:"@",enableReset:"@",dashboardId:"<?"}}});var tn=function(){function e(e,t,n,a,r,i){this.$route=e,this.$rootScope=t,this.$location=n,this.$q=a,this.historySrv=r,this.$scope=i,this.appending=!1,this.diff="basic",this.limit=10,this.loading=!1,this.max=2,this.mode="list",this.start=0,this.canCompare=!1,this.$rootScope.onAppEvent("dashboard-saved",this.onDashboardSaved.bind(this),i),this.resetFromSource()}return e.$inject=["$route","$rootScope","$location","$q","historySrv","$scope"],e.prototype.onDashboardSaved=function(){this.resetFromSource()},e.prototype.switchMode=function(e){this.mode=e,"list"===this.mode&&this.reset()},e.prototype.dismiss=function(){this.$rootScope.appEvent("hide-dash-editor")},e.prototype.addToLog=function(){this.start=this.start+this.limit,this.getLog(!0)},e.prototype.revisionSelectionChanged=function(){var e=i.a.filter(this.revisions,{checked:!0}).length;this.canCompare=2===e},e.prototype.formatDate=function(e){return this.dashboard.formatDate(e)},e.prototype.formatBasicDate=function(e){var t="browser"===this.dashboard.timezone?g()():g.a.utc();return("browser"===this.dashboard.timezone?g()(e):g.a.utc(e)).from(t)},e.prototype.getDiff=function(e){var t=this;if(this.diff=e,this.mode="compare",this.delta[this.diff])return this.$q.when(this.delta[this.diff]);var n=i.a.filter(this.revisions,{checked:!0});this.newInfo=n[0],this.baseInfo=n[1],this.isNewLatest=this.newInfo.version===this.dashboard.version,this.loading=!0;var a={new:{dashboardId:this.dashboard.id,version:this.newInfo.version},base:{dashboardId:this.dashboard.id,version:this.baseInfo.version},diffType:e};return this.historySrv.calculateDiff(a).then(function(e){t.delta[t.diff]=e}).catch(function(){t.mode="list"}).finally(function(){t.loading=!1})},e.prototype.getLog=function(e){var t=this;void 0===e&&(e=!1),this.loading=!e,this.appending=e;var n={limit:this.limit,start:this.start};return this.historySrv.getHistoryList(this.dashboard,n).then(function(n){for(var a=0,r=n;a<r.length;a++){var i=r[a];i.createdDateString=t.formatDate(i.created),i.ageString=t.formatBasicDate(i.created),i.checked=!1}t.revisions=e?t.revisions.concat(n):n}).catch(function(e){t.loading=!1}).finally(function(){t.loading=!1,t.appending=!1})},e.prototype.isLastPage=function(){return i.a.find(this.revisions,function(e){return 1===e.version})},e.prototype.reset=function(){this.delta={basic:"",json:""},this.diff="basic",this.mode="list",this.revisions=i.a.map(this.revisions,function(e){return i.a.extend({},e,{checked:!1})}),this.canCompare=!1,this.start=0,this.isNewLatest=!1},e.prototype.resetFromSource=function(){return this.revisions=[],this.getLog().then(this.reset.bind(this))},e.prototype.restore=function(e){this.$rootScope.appEvent("confirm-modal",{title:"Restore version",text:"",text2:"Are you sure you want to restore the dashboard to version "+e+"? All unsaved changes will be lost.",icon:"fa-history",yesText:"Yes, restore to version "+e,onConfirm:this.restoreConfirm.bind(this,e)})},e.prototype.restoreConfirm=function(e){var t=this;return this.loading=!0,this.historySrv.restoreDashboard(this.dashboard,e).then(function(n){t.$location.url(S.a.stripBaseFromUrl(n.url)).replace(),t.$route.reload(),t.$rootScope.appEvent("alert-success",["Dashboard restored","Restored from version "+e])}).catch(function(){t.mode="list",t.loading=!1})},e}();c.a.module("grafana.directives").directive("gfDashboardHistory",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/VersionHistory/template.html",controller:tn,bindToController:!0,controllerAs:"ctrl",scope:{dashboard:"="}}});var nn=function(){function e(e){this.backendSrv=e}return e.$inject=["backendSrv"],e.prototype.getHistoryList=function(e,t){var n=e&&e.id?e.id:void 0;return n?this.backendSrv.get("api/dashboards/id/"+n+"/versions",t):Promise.resolve([])},e.prototype.calculateDiff=function(e){return this.backendSrv.post("api/dashboards/calculate-diff",e)},e.prototype.restoreDashboard=function(e,t){var n=e&&e.id?e.id:void 0,a="api/dashboards/id/"+n+"/restore";return n&&i.a.isNumber(t)?this.backendSrv.post(a,{version:t}):Promise.resolve({})},e}();w.c.service("historySrv",nn);n(381),n(380);var an=n(130);var rn=function(){function e(t,n,a){var r=this;this.$scope=t,this.$rootScope=n,this.timeSrv=a,this.$scope.ctrl=this,n.onAppEvent("shift-time-forward",function(){return r.move(1)},t),n.onAppEvent("shift-time-backward",function(){return r.move(-1)},t),n.onAppEvent("closeTimepicker",this.openDropdown.bind(this),t),this.dashboard.on("refresh",this.onRefresh.bind(this),t),this.panel=this.dashboard.timepicker,i.a.defaults(this.panel,e.defaults),this.firstDayOfWeek=g.a.localeData().firstDayOfWeek(),this.onRefresh()}return e.$inject=["$scope","$rootScope","timeSrv"],e.prototype.onRefresh=function(){var e=c.a.copy(this.timeSrv.timeRange()),t=c.a.copy(e.raw);this.dashboard.isTimezoneUtc()?this.isUtc=!0:(e.from.local(),e.to.local(),g.a.isMoment(t.from)&&t.from.local(),g.a.isMoment(t.to)&&t.to.local(),this.isUtc=!1),this.rangeString=an.b(t),this.absolute={fromJs:e.from.toDate(),toJs:e.to.toDate()},this.tooltip=this.dashboard.formatDate(e.from)+" <br>to<br>",this.tooltip+=this.dashboard.formatDate(e.to),this.timeRaw=t,this.isAbsolute=g.a.isMoment(this.timeRaw.to)},e.prototype.zoom=function(e){this.$rootScope.appEvent("zoom-out",2)},e.prototype.move=function(e){var t,n,a=this.timeSrv.timeRange(),r=(a.to.valueOf()-a.from.valueOf())/2;-1===e?(t=a.to.valueOf()-r,n=a.from.valueOf()-r):1===e?(t=a.to.valueOf()+r,n=a.from.valueOf()+r,t>Date.now()&&a.to<Date.now()&&(t=Date.now(),n=a.from.valueOf())):(t=a.to.valueOf(),n=a.from.valueOf()),this.timeSrv.setTime({from:g.a.utc(n),to:g.a.utc(t)})},e.prototype.openDropdown=function(){this.isOpen?this.closeDropdown():(this.onRefresh(),this.editTimeRaw=this.timeRaw,this.timeOptions=an.c(this.panel,this.rangeString),this.refresh={value:this.dashboard.refresh,options:i.a.map(this.panel.refresh_intervals,function(e){return{text:e,value:e}})},this.refresh.options.unshift({text:"off"}),this.isOpen=!0,this.$rootScope.appEvent("timepickerOpen"))},e.prototype.closeDropdown=function(){this.isOpen=!1,this.$rootScope.appEvent("timepickerClosed")},e.prototype.applyCustom=function(){this.refresh.value!==this.dashboard.refresh&&this.timeSrv.setAutoRefresh(this.refresh.value),this.timeSrv.setTime(this.editTimeRaw),this.closeDropdown()},e.prototype.absoluteFromChanged=function(){this.editTimeRaw.from=this.getAbsoluteMomentForTimezone(this.absolute.fromJs)},e.prototype.absoluteToChanged=function(){this.editTimeRaw.to=this.getAbsoluteMomentForTimezone(this.absolute.toJs)},e.prototype.getAbsoluteMomentForTimezone=function(e){return this.dashboard.isTimezoneUtc()?g()(e).utc():g()(e)},e.prototype.setRelativeFilter=function(e){var t={from:e.from,to:e.to};this.panel.nowDelay&&"now"===t.to&&(t.to="now-"+this.panel.nowDelay),this.timeSrv.setTime(t),this.closeDropdown()},e.tooltipFormat="MMM D, YYYY HH:mm:ss",e.defaults={time_options:["5m","15m","1h","6h","12h","24h","2d","7d","30d"],refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},e}();c.a.module("grafana.directives").directive("gfTimePickerSettings",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/TimePicker/settings.html",controller:rn,bindToController:!0,controllerAs:"ctrl",scope:{dashboard:"="}}}),c.a.module("grafana.directives").directive("gfTimePicker",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/TimePicker/template.html",controller:rn,bindToController:!0,controllerAs:"ctrl",scope:{dashboard:"="}}}),c.a.module("grafana.directives").directive("inputDatetime",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){var r="YYYY-MM-DD HH:mm:ss";a.$parsers.push(function(t){return-1!==t.indexOf("now")?Ut.isValid(t)?(a.$setValidity("error",!0),t):void a.$setValidity("error",!1):(n=e.ctrl.isUtc?g.a.utc(t,r):g()(t,r)).isValid()?(a.$setValidity("error",!0),n):void a.$setValidity("error",!1);var n}),a.$formatters.push(function(e){return g.a.isMoment(e)?e.format(r):e})}}});var on='\n<div class="modal-body">\n  <div class="modal-header">\n    <h2 class="modal-header-title">\n      <i class="fa fa-exclamation"></i>\n      <span class="p-l-1">Unsaved changes</span>\n    </h2>\n\n    <a class="modal-header-close" ng-click="ctrl.dismiss();">\n      <i class="fa fa-remove"></i>\n    </a>\n  </div>\n\n  <div class="modal-content text-center">\n\n    <div class="confirm-modal-text">\n      Do you want to save your changes?\n    </div>\n\n    <div class="confirm-modal-buttons">\n      <button type="button" class="btn btn-primary" ng-click="ctrl.save()">Save</button>\n      <button type="button" class="btn btn-danger" ng-click="ctrl.discard()">Discard</button>\n      <button type="button" class="btn btn-inverse" ng-click="ctrl.dismiss()">Cancel</button>\n    </div>\n  </div>\n</div>\n',sn=function(){function e(e){this.unsavedChangesSrv=e}return e.$inject=["unsavedChangesSrv"],e.prototype.discard=function(){this.dismiss(),this.unsavedChangesSrv.tracker.discardChanges()},e.prototype.save=function(){this.dismiss(),this.unsavedChangesSrv.tracker.saveChanges()},e}();w.c.directive("unsavedChangesModal",function(){return{restrict:"E",template:on,controller:sn,bindToController:!0,controllerAs:"ctrl",scope:{dismiss:"&"}}});var ln='\n<div class="modal-body">\n\t<div class="modal-header">\n\t\t<h2 class="modal-header-title">\n\t\t\t<i class="fa fa-copy"></i>\n\t\t\t<span class="p-l-1">Save As...</span>\n\t\t</h2>\n\n\t\t<a class="modal-header-close" ng-click="ctrl.dismiss();">\n\t\t\t<i class="fa fa-remove"></i>\n\t\t</a>\n\t</div>\n\n\t<form name="ctrl.saveForm" class="modal-content" novalidate>\n\t\t<div class="p-t-2">\n\t\t\t<div class="gf-form">\n\t\t\t\t<label class="gf-form-label width-7">New name</label>\n\t\t\t\t<input type="text" class="gf-form-input" ng-model="ctrl.clone.title" give-focus="true" required>\n\t\t\t</div>\n      <div class="gf-form">\n        <folder-picker initial-folder-id="ctrl.folderId"\n                       on-change="ctrl.onFolderChange($folder)"\n                       enter-folder-creation="ctrl.onEnterFolderCreation()"\n                       exit-folder-creation="ctrl.onExitFolderCreation()"\n                       enable-create-new="true"\n                       label-class="width-7"\n                       dashboard-id="ctrl.clone.id">\n        </folder-picker>\n      </div>\n\t\t</div>\n\n\t\t<div class="gf-form-button-row text-center">\n\t\t\t<button type="submit" class="btn btn-primary" ng-click="ctrl.save()" ng-disabled="!ctrl.isValidFolderSelection">Save</button>\n\t\t\t<a class="btn-text" ng-click="ctrl.dismiss();">Cancel</a>\n\t\t</div>\n\t</form>\n</div>\n',cn=function(){function e(e){this.dashboardSrv=e,this.isValidFolderSelection=!0;var t=this.dashboardSrv.getCurrent();this.clone=t.getSaveModelClone(),this.clone.id=null,this.clone.uid="",this.clone.title+=" Copy",this.clone.editable=!0,this.clone.hideControls=!1,this.folderId=t.meta.folderId,t.id>0&&this.clone.panels.forEach(function(e){"graph"===e.type&&e.alert&&delete e.thresholds,delete e.alert}),delete this.clone.autoUpdate}return e.$inject=["dashboardSrv"],e.prototype.save=function(){return this.dashboardSrv.save(this.clone,{folderId:this.folderId}).then(this.dismiss)},e.prototype.keyDown=function(e){13===e.keyCode&&this.save()},e.prototype.onFolderChange=function(e){this.folderId=e.id},e.prototype.onEnterFolderCreation=function(){this.isValidFolderSelection=!1},e.prototype.onExitFolderCreation=function(){this.isValidFolderSelection=!0},e}();w.c.directive("saveDashboardAsModal",function(){return{restrict:"E",template:ln,controller:cn,bindToController:!0,controllerAs:"ctrl",scope:{dismiss:"&"}}});var un='\n<div class="modal-body">\n  <div class="modal-header">\n    <h2 class="modal-header-title">\n      <i class="fa fa-save"></i>\n      <span class="p-l-1">Save changes</span>\n    </h2>\n\n    <a class="modal-header-close" ng-click="ctrl.dismiss();">\n      <i class="fa fa-remove"></i>\n    </a>\n  </div>\n\n  <form name="ctrl.saveForm" ng-submit="ctrl.save()" class="modal-content" novalidate>\n    <div class="p-t-1">\n      <div class="gf-form-group" ng-if="ctrl.timeChange || ctrl.variableValueChange">\n\t\t    <gf-form-switch class="gf-form"\n\t\t\t    label="Save current time range" ng-if="ctrl.timeChange" label-class="width-12" switch-class="max-width-6"\n\t\t\t    checked="ctrl.saveTimerange" on-change="buildUrl()">\n\t\t    </gf-form-switch>\n\t\t    <gf-form-switch class="gf-form"\n\t\t\t    label="Save current variables" ng-if="ctrl.variableValueChange" label-class="width-12" switch-class="max-width-6"\n\t\t\t    checked="ctrl.saveVariables" on-change="buildUrl()">\n\t\t    </gf-form-switch>\n\t    </div>\n      <div class="gf-form">\n        <label class="gf-form-hint">\n          <input\n            type="text"\n            name="message"\n            class="gf-form-input"\n            placeholder="Add a note to describe your changes &hellip;"\n            give-focus="true"\n            ng-model="ctrl.message"\n            ng-model-options="{allowInvalid: true}"\n            ng-maxlength="this.max"\n            maxlength="64"\n            autocomplete="off" />\n          <small class="gf-form-hint-text muted" ng-cloak>\n            <span ng-class="{\'text-error\': ctrl.saveForm.message.$invalid && ctrl.saveForm.message.$dirty }">\n              {{ctrl.message.length || 0}}\n            </span>\n            / {{ctrl.max}} characters\n          </small>\n        </label>\n      </div>\n    </div>\n\n    <div class="gf-form-button-row text-center">\n      <button\n        id="saveBtn"\n        type="submit"\n        class="btn btn-primary"\n        ng-class="{\'btn-primary--processing\': ctrl.isSaving}"\n        ng-disabled="ctrl.saveForm.$invalid || ctrl.isSaving"\n      >\n        <span ng-if="!ctrl.isSaving">Save</span>\n        <span ng-if="ctrl.isSaving === true">Saving...</span>\n      </button>\n      <button class="btn btn-inverse" ng-click="ctrl.dismiss();">Cancel</button>\n    </div>\n  </form>\n</div>\n',dn=function(){function e(e){this.dashboardSrv=e,this.saveVariables=!1,this.saveTimerange=!1,this.current=[],this.originalCurrent=[],this.timeChange=!1,this.variableValueChange=!1,this.message="",this.max=64,this.isSaving=!1,this.timeChange=this.dashboardSrv.getCurrent().hasTimeChanged(),this.variableValueChange=this.dashboardSrv.getCurrent().hasVariableValuesChanged()}return e.$inject=["dashboardSrv"],e.prototype.save=function(){if(this.saveForm.$valid){var e={saveVariables:this.saveVariables,saveTimerange:this.saveTimerange,message:this.message},t=this.dashboardSrv.getCurrent().getSaveModelClone(e);return this.isSaving=!0,this.dashboardSrv.save(t,e).then(this.postSave.bind(this,e))}},e.prototype.postSave=function(e){e.saveVariables&&this.dashboardSrv.getCurrent().resetOriginalVariables(),e.saveTimerange&&this.dashboardSrv.getCurrent().resetOriginalTime(),this.dismiss()},e}();w.c.directive("saveDashboardModal",function(){return{restrict:"E",template:un,controller:dn,bindToController:!0,controllerAs:"ctrl",scope:{dismiss:"&"}}});var pn='\n<div class="modal-body">\n  <div class="modal-header">\n    <h2 class="modal-header-title">\n      <i class="fa fa-save"></i><span class="p-l-1">Cannot save provisioned dashboard</span>\n    </h2>\n\n    <a class="modal-header-close" ng-click="ctrl.dismiss();">\n      <i class="fa fa-remove"></i>\n    </a>\n  </div>\n\n  <div class="modal-content">\n    <small>\n      This dashboard cannot be saved from Grafana\'s UI since it has been provisioned from another source.\n      Copy the JSON or save it to a file below. Then you can update your dashboard in corresponding provisioning source.<br/>\n      <i>See <a class="external-link" href="http://docs.grafana.org/administration/provisioning/#dashboards" target="_blank">\n      documentation</a> for more information about provisioning.</i>\n    </small>\n    <div class="p-t-2">\n      <div class="gf-form">\n        <code-editor content="ctrl.dashboardJson" data-mode="json" data-max-lines=15></code-editor>\n      </div>\n      <div class="gf-form-button-row">\n        <button class="btn btn-primary" clipboard-button="ctrl.getJsonForClipboard()">\n          <i class="fa fa-clipboard"></i>&nbsp;Copy JSON to Clipboard\n        </button>\n        <button class="btn btn-secondary" clipboard-button="ctrl.save()">\n          <i class="fa fa-save"></i>&nbsp;Save JSON to file\n        </button>\n        <a class="btn btn-link" ng-click="ctrl.dismiss();">Cancel</a>\n      </div>\n    </div>\n  </div>\n</div>\n',hn=function(){function e(e){this.dash=e.getCurrent().getSaveModelClone(),delete this.dash.id,this.dashboardJson=c.a.toJson(this.dash,!0)}return e.$inject=["dashboardSrv"],e.prototype.save=function(){var e=new Blob([c.a.toJson(this.dash,!0)],{type:"application/json;charset=utf-8"});Object(a.saveAs)(e,this.dash.title+"-"+(new Date).getTime()+".json")},e.prototype.getJsonForClipboard=function(){return this.dashboardJson},e}();function fn(e,t,n,a,r,i,o){e.options={forCurrent:!0,includeTemplateVars:!0,theme:"current"},e.editor={index:e.tabIndex||0},e.init=function(){e.panel=e.model&&e.model.panel?e.model.panel:e.panel,e.dashboard=e.model&&e.model.dashboard?e.model.dashboard:e.dashboard,e.modeSharePanel=!!e.panel,e.tabs=[{title:"Link",src:"shareLink.html"}],e.modeSharePanel?(e.modalTitle="Share Panel",e.tabs.push({title:"Embed",src:"shareEmbed.html"})):e.modalTitle="Share",e.dashboard.meta.isSnapshot||e.tabs.push({title:"Snapshot",src:"shareSnapshot.html"}),e.dashboard.meta.isSnapshot||e.modeSharePanel||e.tabs.push({title:"Export",src:"shareExport.html"}),e.buildUrl()},e.buildUrl=function(){var t=n.absUrl(),a=t.indexOf("?");-1!==a&&(t=t.substring(0,a));var s=c.a.copy(n.search()),l=r.timeRange();s.from=l.from.valueOf(),s.to=l.to.valueOf(),s.orgId=f.a.bootData.user.orgId,e.options.includeTemplateVars&&i.fillVariableValuesForUrl(s),e.options.forCurrent||(delete s.from,delete s.to),"current"!==e.options.theme&&(s.theme=e.options.theme),e.modeSharePanel?(s.panelId=e.panel.id,s.fullscreen=!0):(delete s.panelId,delete s.fullscreen),e.shareUrl=o.addParamsToUrl(t,s);var u=t.replace(f.a.appSubUrl+"/dashboard/",f.a.appSubUrl+"/dashboard-solo/");u=u.replace(f.a.appSubUrl+"/d/",f.a.appSubUrl+"/d-solo/"),delete s.fullscreen,delete s.edit,u=o.addParamsToUrl(u,s),e.iframeHtml='<iframe src="'+u+'" width="450" height="200" frameborder="0"></iframe>',e.imageUrl=u.replace(f.a.appSubUrl+"/dashboard-solo/",f.a.appSubUrl+"/render/dashboard-solo/"),e.imageUrl=e.imageUrl.replace(f.a.appSubUrl+"/d-solo/",f.a.appSubUrl+"/render/d-solo/"),e.imageUrl+="&width=1000&height=500"+e.getLocalTimeZone()},e.getLocalTimeZone=function(){var e="&tz=UTC"+encodeURIComponent(g()().format("Z"));if(!window.Intl)return e;var t=window.Intl.DateTimeFormat();if(!t.resolvedOptions)return e;var n=t.resolvedOptions();return n.timeZone?"&tz="+encodeURIComponent(n.timeZone):e},e.getShareUrl=function(){return e.shareUrl}}w.c.directive("saveProvisionedDashboardModal",function(){return{restrict:"E",template:pn,controller:hn,bindToController:!0,controllerAs:"ctrl",scope:{dismiss:"&"}}}),c.a.module("grafana.controllers").controller("ShareModalCtrl",fn);var mn=function(){function e(e,t,n,a,r,o){e.snapshot={name:e.dashboard.title,expires:0,timeoutSeconds:4},e.step=1,e.expireOptions=[{text:"1 Hour",value:3600},{text:"1 Day",value:86400},{text:"7 Days",value:604800},{text:"Never",value:0}],e.accessOptions=[{text:"Anyone with the link",value:1},{text:"Organization users",value:2},{text:"Public on the web",value:3}],e.init=function(){a.get("/api/snapshot/shared-options").then(function(t){e.sharingButtonText=t.externalSnapshotName,e.externalEnabled=t.externalEnabled})},e.apiUrl="/api/snapshots",e.createSnapshot=function(t){e.dashboard.snapshot={timestamp:new Date},t||(e.dashboard.snapshot.originalUrl=n.absUrl()),e.loading=!0,e.snapshot.external=t,e.dashboard.startRefresh(),r(function(){e.saveSnapshot(t)},1e3*e.snapshot.timeoutSeconds)},e.saveSnapshot=function(t){var n=e.dashboard.getSaveModelClone();e.scrubDashboard(n);var r={dashboard:n,name:n.title,expires:e.snapshot.expires,external:t};a.post(e.apiUrl,r).then(function(t){e.loading=!1,e.deleteUrl=t.deleteUrl,e.snapshotUrl=t.url,e.step=2},function(){e.loading=!1})},e.getSnapshotUrl=function(){return e.snapshotUrl},e.scrubDashboard=function(t){if(t.title=e.snapshot.name,t.time=o.timeRange(),i.a.each(t.panels,function(e){e.targets=[],e.links=[],e.datasource=null}),t.annotations.list=i.a.chain(t.annotations.list).filter(function(e){return e.enable}).map(function(e){return{name:e.name,enable:e.enable,iconColor:e.iconColor,snapshotData:e.snapshotData,type:e.type,builtIn:e.builtIn,hide:e.hide}}).value(),i.a.each(t.templating.list,function(e){e.query="",e.options=e.current,e.refresh=!1}),e.modeSharePanel){var n=e.panel.getSaveModel();n.gridPos.w=24,n.gridPos.x=0,n.gridPos.y=0,n.gridPos.h=20,t.panels=[n]}delete e.dashboard.snapshot,e.dashboard.forEachPanel(function(e){delete e.snapshotData}),i.a.each(e.dashboard.annotations.list,function(e){delete e.snapshotData})},e.deleteSnapshot=function(){a.get(e.deleteUrl).then(function(){e.step=3})}}return e.$inject=["$scope","$rootScope","$location","backendSrv","$timeout","timeSrv"],e}();c.a.module("grafana.controllers").controller("ShareSnapshotCtrl",mn);var gn=function(){function e(e,t,n,a,r){this.uiSegmentSrv=e,this.datasourceSrv=t,this.$q=n,this.variableSrv=a,this.removeTagFilterSegment=e.newSegment({fake:!0,value:"-- remove filter --"}),this.buildSegmentModel(),this.dashboard.events.on("template-variable-value-updated",this.buildSegmentModel.bind(this),r)}return e.$inject=["uiSegmentSrv","datasourceSrv","$q","variableSrv","$scope"],e.prototype.buildSegmentModel=function(){this.segments=[],this.variable.value&&i.a.isArray(this.variable.value);for(var e=0,t=this.variable.filters;e<t.length;e++){var n=t[e];this.segments.length>0&&this.segments.push(this.uiSegmentSrv.newCondition("AND")),void 0!==n.key&&void 0!==n.value&&(this.segments.push(this.uiSegmentSrv.newKey(n.key)),this.segments.push(this.uiSegmentSrv.newOperator(n.operator)),this.segments.push(this.uiSegmentSrv.newKeyValue(n.value)))}this.segments.push(this.uiSegmentSrv.newPlusButton())},e.prototype.getOptions=function(e,t){var n=this;return"operator"===e.type?this.$q.when(this.uiSegmentSrv.newOperators(["=","!=","<",">","=~","!~"])):"condition"===e.type?this.$q.when([this.uiSegmentSrv.newSegment("AND")]):this.datasourceSrv.get(this.variable.datasource).then(function(a){var r={},o=null;return"value"!==e.type?o=a.getTagKeys?a.getTagKeys():Promise.resolve([]):(r.key=n.segments[t-2].value,o=a.getTagValues?a.getTagValues(r):Promise.resolve([])),o.then(function(t){return t=i.a.map(t,function(e){return n.uiSegmentSrv.newSegment({value:e.text})}),"key"===e.type&&t.splice(0,0,c.a.copy(n.removeTagFilterSegment)),t})})},e.prototype.segmentChanged=function(e,t){this.segments[t]=e,e.value===this.removeTagFilterSegment.value?(this.segments.splice(t,3),0===this.segments.length?this.segments.push(this.uiSegmentSrv.newPlusButton()):this.segments.length>2&&(this.segments.splice(Math.max(t-1,0),1),"plus-button"!==this.segments[this.segments.length-1].type&&this.segments.push(this.uiSegmentSrv.newPlusButton()))):("plus-button"===e.type&&(t>2&&this.segments.splice(t,0,this.uiSegmentSrv.newCondition("AND")),this.segments.push(this.uiSegmentSrv.newOperator("=")),this.segments.push(this.uiSegmentSrv.newFake("select value","value","query-segment-value")),e.type="key",e.cssClass="query-segment-key"),t+1===this.segments.length&&this.segments.push(this.uiSegmentSrv.newPlusButton())),this.updateVariableModel()},e.prototype.updateVariableModel=function(){var e=[],t=-1,n=!1;this.segments.forEach(function(a){if("value"===a.type&&a.fake)n=!0;else switch(a.type){case"key":e.push({key:a.value}),t+=1;break;case"value":e[t].value=a.value;break;case"operator":e[t].operator=a.value;break;case"condition":e[t].condition=a.value}}),n||(this.variable.setFilters(e),this.variableSrv.variableUpdated(this.variable,!0))},e}(),vn='\n<div class="gf-form-inline">\n  <div class="gf-form" ng-repeat="segment in ctrl.segments">\n    <metric-segment segment="segment" get-options="ctrl.getOptions(segment, $index)"\n                    on-change="ctrl.segmentChanged(segment, $index)"></metric-segment>\n  </div>\n</div>\n';w.c.directive("adHocFilters",function(){return{restrict:"E",template:vn,controller:gn,bindToController:!0,controllerAs:"ctrl",scope:{variable:"=",dashboard:"="}}});var bn=function(){function e(){this.source=this.row,this.row=this.row.getSaveModel()}return e.prototype.update=function(){this.source.title=this.row.title,this.source.repeat=this.row.repeat,this.onUpdated(),this.dismiss()},e}();x.d.directive("rowOptions",function(){return{restrict:"E",templateUrl:"public/app/features/dashboard/components/RowOptions/template.html",controller:bn,bindToController:!0,controllerAs:"ctrl",scope:{row:"=",dismiss:"&",onUpdated:"&"}}});var yn=n(132),wn=n(294),xn=n(295),Sn=n(285),kn=n(202),Cn=function(e){function t(t){var n=e.call(this,t)||this;return n.onOpenAddPermissions=function(){n.setState({isAdding:!0})},n.onRemoveItem=function(e){n.props.removeDashboardPermission(n.props.dashboardId,e)},n.onPermissionChanged=function(e,t){n.props.updateDashboardPermission(n.props.dashboardId,e,t)},n.onAddPermission=function(e){return n.props.addDashboardPermission(n.props.dashboardId,e)},n.onCancelAddPermission=function(){n.setState({isAdding:!1})},n.state={isAdding:!1},n}return E.c(t,e),t.prototype.componentDidMount=function(){this.props.getDashboardPermissions(this.props.dashboardId)},t.prototype.render=function(){var e=this.props,t=e.permissions,n=e.folder,a=this.state.isAdding;return d.a.createElement("div",null,d.a.createElement("div",{className:"dashboard-settings__header"},d.a.createElement("div",{className:"page-action-bar"},d.a.createElement("h3",{className:"d-inline-block"},"Permissions"),d.a.createElement(ne.Tooltip,{placement:"auto",content:d.a.createElement(Sn.a,null)},d.a.createElement("div",{className:"page-sub-heading-icon"},d.a.createElement("i",{className:"gicon gicon-question gicon--has-hover"}))),d.a.createElement("div",{className:"page-action-bar__spacer"}),d.a.createElement("button",{className:"btn btn-primary pull-right",onClick:this.onOpenAddPermissions,disabled:a},"Add Permission"))),d.a.createElement(yn.a,{in:a},d.a.createElement(xn.a,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),d.a.createElement(wn.a,{items:t,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:n}))},t}(u.PureComponent),En={getDashboardPermissions:$e.h,addDashboardPermission:$e.a,removeDashboardPermission:$e.l,updateDashboardPermission:$e.m},Tn=Object(kn.a)(Cn,function(e){return{permissions:e.dashboard.permissions}},En);Object(qt.a)("dashboardPermissions",Tn,["dashboardId","folder"]);var Mn=function(){function e(e,t,n){var a=this;this.$scope=e,this.backendSrv=t,this.navModel=n.getNav("dashboards","playlists",0),t.get("/api/playlists").then(function(e){a.playlists=e.map(function(e){return e.startUrl="playlists/play/"+e.id,e})})}return e.$inject=["$scope","backendSrv","navModelSrv"],e.prototype.removePlaylistConfirmed=function(e){var t=this;i.a.remove(this.playlists,{id:e.id}),this.backendSrv.delete("/api/playlists/"+e.id).then(function(){t.$scope.appEvent("alert-success",["Playlist deleted",""])},function(){t.$scope.appEvent("alert-error",["Unable to delete playlist",""]),t.playlists.push(e)})},e.prototype.removePlaylist=function(e){var t=this;this.$scope.appEvent("confirm-modal",{title:"Delete",text:"Are you sure you want to delete playlist "+e.name+"?",yesText:"Delete",icon:"fa-trash",onConfirm:function(){t.removePlaylistConfirmed(e)}})},e}();w.c.controller("PlaylistsCtrl",Mn);var _n=function(){function e(e,t){var n=this;this.backendSrv=t,this.query={query:"",tag:[],starred:!1,limit:20},e(function(){n.query.query="",n.query.type="dash-db",n.searchDashboards()},100)}return e.$inject=["$timeout","backendSrv"],e.prototype.searchDashboards=function(){this.tagsMode=!1;var e={};e.promise=this.backendSrv.search(this.query).then(function(e){return{dashboardResult:e,tagResult:[]}}),this.searchStarted(e)},e.prototype.showStarred=function(){this.query.starred=!this.query.starred,this.searchDashboards()},e.prototype.queryHasNoFilters=function(){return""===this.query.query&&!1===this.query.starred&&0===this.query.tag.length},e.prototype.filterByTag=function(e,t){this.query.tag.push(e),this.searchDashboards(),t&&(t.stopPropagation(),t.preventDefault())},e.prototype.getTags=function(){var e={};e.promise=this.backendSrv.get("/api/dashboards/tags").then(function(e){return{dashboardResult:[],tagResult:e}}),this.searchStarted(e)},e}();w.c.directive("playlistSearch",function(){return{restrict:"E",templateUrl:"public/app/features/playlist/partials/playlist_search.html",controller:_n,bindToController:!0,controllerAs:"ctrl",scope:{searchStarted:"&"}}});var An=function(){function e(e,t,n){this.$location=e,this.$timeout=t,this.backendSrv=n,this.numberOfLoops=0}return e.$inject=["$location","$timeout","backendSrv"],e.prototype.next=function(){var e=this;if(this.$timeout.cancel(this.cancelPromise),this.index>this.dashboards.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3)return void(window.location.href=this.startUrl);this.index=0}var t=this.dashboards[this.index],n=this.$location.search(),a=i.a.pickBy(n,function(e){return null!==e});this.$timeout(function(){var n=S.a.stripBaseFromUrl(t.url);e.$location.url(n+"?"+Object(fe.b)(a))}),this.index++,this.cancelPromise=this.$timeout(function(){return e.next()},this.interval)},e.prototype.prev=function(){this.index=Math.max(this.index-2,0),this.next()},e.prototype.start=function(e){var t=this;return this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,L.b.emit("playlist-started"),this.backendSrv.get("/api/playlists/"+e).then(function(n){return t.backendSrv.get("/api/playlists/"+e+"/dashboards").then(function(e){t.dashboards=e,t.interval=yt.a.interval_to_ms(n.interval),t.next()})})},e.prototype.stop=function(){this.isPlaying&&(this.$location.search().kiosk&&L.b.emit("toggle-kiosk-mode",{exit:!0}));this.index=0,this.isPlaying=!1,this.cancelPromise&&this.$timeout.cancel(this.cancelPromise),L.b.emit("playlist-stopped")},e}();w.c.service("playlistSrv",An);var Dn=function(){function e(e,t,n,a,r){var i=this;if(this.$scope=e,this.backendSrv=t,this.$location=n,this.filteredDashboards=[],this.filteredTags=[],this.searchQuery="",this.loading=!1,this.playlist={interval:"5m"},this.playlistItems=[],this.dashboardresult=[],this.tagresult=[],this.navModel=r.getNav("dashboards","playlists",0),this.isNew=!a.current.params.id,a.current.params.id){var o=a.current.params.id;t.get("/api/playlists/"+o).then(function(e){i.playlist=e}),t.get("/api/playlists/"+o+"/items").then(function(e){i.playlistItems=e})}}return e.$inject=["$scope","backendSrv","$location","$route","navModelSrv"],e.prototype.filterFoundPlaylistItems=function(){var e=this;this.filteredDashboards=i.a.reject(this.dashboardresult,function(t){return i.a.find(e.playlistItems,function(e){return parseInt(e.value,10)===t.id})}),this.filteredTags=i.a.reject(this.tagresult,function(t){return i.a.find(e.playlistItems,function(e){return e.value===t.term})})},e.prototype.addPlaylistItem=function(e){e.value=e.id.toString(),e.type="dashboard_by_id",e.order=this.playlistItems.length+1,this.playlistItems.push(e),this.filterFoundPlaylistItems()},e.prototype.addTagPlaylistItem=function(e){var t={value:e.term,type:"dashboard_by_tag",order:this.playlistItems.length+1,title:e.term};this.playlistItems.push(t),this.filterFoundPlaylistItems()},e.prototype.removePlaylistItem=function(e){i.a.remove(this.playlistItems,function(t){return e===t}),this.filterFoundPlaylistItems()},e.prototype.savePlaylist=function(e,t){var n=this;e.items=t,(e.id?this.backendSrv.put("/api/playlists/"+e.id,e):this.backendSrv.post("/api/playlists",e)).then(function(){n.$scope.appEvent("alert-success",["Playlist saved",""]),n.$location.path("/playlists")},function(){n.$scope.appEvent("alert-error",["Unable to save playlist",""])})},e.prototype.isPlaylistEmpty=function(){return!this.playlistItems.length},e.prototype.backToList=function(){this.$location.path("/playlists")},e.prototype.searchStarted=function(e){var t=this;e.then(function(e){t.dashboardresult=e.dashboardResult,t.tagresult=e.tagResult,t.filterFoundPlaylistItems()})},e.prototype.movePlaylistItem=function(e,t){var n=this.playlistItems.indexOf(e),a=n+t;a>=0&&a<this.playlistItems.length&&(this.playlistItems.splice(n,1),this.playlistItems.splice(a,0,e))},e.prototype.movePlaylistItemUp=function(e){this.movePlaylistItem(e,-1)},e.prototype.movePlaylistItemDown=function(e){this.movePlaylistItem(e,1)},e}();function Nn(e){e.when("/playlists",{templateUrl:"public/app/features/playlist/partials/playlists.html",controllerAs:"ctrl",controller:"PlaylistsCtrl"}).when("/playlists/create",{templateUrl:"public/app/features/playlist/partials/playlist.html",controllerAs:"ctrl",controller:"PlaylistEditCtrl"}).when("/playlists/edit/:id",{templateUrl:"public/app/features/playlist/partials/playlist.html",controllerAs:"ctrl",controller:"PlaylistEditCtrl"}).when("/playlists/play/:id",{template:"",resolve:{init:["playlistSrv","$route",function(e,t){var n=t.current.params.id;e.start(n)}]}})}w.c.controller("PlaylistEditCtrl",Dn),c.a.module("grafana.routes").config(Nn);var Pn='\n<span class="panel-title">\n  <span class="icon-gf panel-alert-icon"></span>\n  <span class="panel-title-text">{{ctrl.panel.title | interpolateTemplateVars:this}}</span>\n  <span class="panel-menu-container dropdown">\n    <span class="fa fa-caret-down panel-menu-toggle" data-toggle="dropdown"></span>\n    <ul class="dropdown-menu dropdown-menu--menu panel-menu" role="menu">\n    </ul>\n  </span>\n  <span class="panel-time-info" ng-if="ctrl.timeInfo"><i class="fa fa-clock-o"></i> {{ctrl.timeInfo}}</span>\n</span>';function On(e,t){var n="",a="";if(e.divider)return'<li class="divider"></li>';if(e.submenu&&(a="dropdown-submenu"),n+='<li class="'+a+'"><a ',e.click&&(n+=' ng-click="'+e.click+'"'),e.href&&(n+=' href="'+e.href+'"'),n+='><i class="'+e.icon+'"></i>',n+='<span class="dropdown-item-text">'+e.text+"</span>",e.shortcut&&(n+='<span class="dropdown-menu-item-shortcut">'+e.shortcut+"</span>"),n+="</a>",e.submenu){n+='<ul class="dropdown-menu dropdown-menu--menu panel-menu">';for(var r=0,i=e.submenu;r<i.length;r++){n+=On(i[r],t)}n+="</ul>"}return n+="</li>"}function In(e){return{restrict:"E",template:Pn,link:function(t,n,a){var r,i,o,s,l=n.find(".panel-menu");n.click(function(a){var o=a.target.className;r&&r.$destroy(),r=t.$new();var s=function(e){for(var t="",n=0,a=e.getMenu();n<a.length;n++)t+=On(a[n],e);return t}(t.ctrl);l.html(s),e(l)(r),(o.indexOf("panel-title-text")>=0||o.indexOf("panel-title")>=0)&&function(e){i||(e.stopPropagation(),n.find("[data-toggle=dropdown]").dropdown("toggle"))}(a)}),n.mousedown(function(e){o=e.pageX,s=e.pageY}),n.mouseup(function(e){i=o!==e.pageX||s!==e.pageY})}}}x.d.directive("panelHeader",In);var $n=n(278),Fn=n.n($n),qn=c.a.module("grafana.directives");qn.directive("grafanaPanel",["$rootScope","$document","$timeout",function(e,t,n){return{restrict:"E",template:'\n  <div class="panel-container">\n      <div class="panel-header" ng-class="{\'grid-drag-handle\': !ctrl.panel.fullscreen}">\n        <span class="panel-info-corner">\n          <i class="fa"></i>\n          <span class="panel-info-corner-inner"></span>\n        </span>\n\n        <span class="panel-loading" ng-show="ctrl.loading">\n          <i class="fa fa-spinner fa-spin"></i>\n        </span>\n\n        <panel-header class="panel-title-container" panel-ctrl="ctrl"></panel-header>\n      </div>\n\n      <div class="panel-content">\n        <ng-transclude class="panel-height-helper"></ng-transclude>\n      </div>\n    </div>\n  </div>\n',transclude:!0,scope:{ctrl:"="},link:function(e,t){var a,r,i,o,l=t.find(".panel-container"),c=t.find(".panel-content"),u=t.find(".panel-info-corner"),d=e.ctrl,p=!1,h=!1;function f(){r&&r.update()}function m(){var e=d.getInfoMode();u[0].className="panel-info-corner panel-info-corner--"+e,e&&(a&&a.destroy(),a=new te.a({target:u[0],content:function(){return d.getInfoContent({mode:"tooltip"})},classes:d.error?"drop-error":"drop-help",openOn:"hover",hoverOpenDelay:100,tetherOptions:{attachment:"bottom left",targetAttachment:"top left",constraints:[{to:"window",attachment:"together",pin:!0}]}}))}d.panel.transparent&&(p=!0,l.addClass("panel-transparent",!0)),d.events.on("component-did-mount",function(){if(d.__proto__.constructor.scrollable){var e=c,t=c.find(":first").find(":first");e.addClass("baron baron__root baron__clipper panel-content--scrollable"),s()('\n            <div class="baron__track">\n              <div class="baron__bar"></div>\n            </div>\n          ').appendTo(e),t.addClass("baron__scroller"),(r=Fn()({root:e[0],scroller:t[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling"})).scroll()}}),d.events.on("panel-size-changed",function(){d.calculatePanelHeight(l[0].offsetHeight),n(function(){f(),d.render()})}),d.events.on("view-mode-changed",function(){setTimeout(function(){d.calculatePanelHeight(l[0].offsetHeight),n(function(){d.render(),f()})},10)}),d.events.on("render",function(){d.height||d.calculatePanelHeight(l[0].offsetHeight),p!==d.panel.transparent&&(l.toggleClass("panel-transparent",!0===d.panel.transparent),p=d.panel.transparent),o=void 0!==d.panel.alert,h!==o&&(l.toggleClass("panel-has-alert",o),h=o),d.alertState?(i&&l.removeClass("panel-alert-state--"+i),"ok"!==d.alertState.state&&"alerting"!==d.alertState.state&&"pending"!==d.alertState.state||l.addClass("panel-alert-state--"+d.alertState.state),i=d.alertState.state):i&&(l.removeClass("panel-alert-state--"+i),i=null)}),e.$watchGroup(["ctrl.error","ctrl.panel.description"],m),e.$watchCollection("ctrl.panel.links",m),t.on("mouseenter",function(){l.toggleClass("panel-hover-highlight",!0),d.dashboard.setPanelFocus(d.panel.id)}),t.on("mouseleave",function(){l.toggleClass("panel-hover-highlight",!1),d.dashboard.setPanelFocus(0)}),e.$on("$destroy",function(){t.off(),u.off(),a&&a.destroy(),r&&r.dispose()})}}}]),qn.directive("panelHelpCorner",["$rootScope",function(e){return{restrict:"E",template:'\n    <span class="alert-error panel-error small pointer" ng-if="ctrl.error" ng-click="ctrl.openInspector()">\n    <span data-placement="top" bs-tooltip="ctrl.error">\n    <i class="fa fa-exclamation"></i><span class="panel-error-arrow"></span>\n    </span>\n    </span>\n    ',link:function(e,t){}}}]);n(354);var Rn={};function Ln(e){return e.create({scope:{ctrl:"=",editorTab:"="},directive:function(e){var t=e.ctrl.pluginId,n=e.editorTab.title.toLowerCase().replace(" ","-").replace("&","").replace(" ","").replace(" ","-");if(Rn[t]){if(Rn[t][n])return Rn[t][n]}else Rn[t]=[];var a={fn:function(){return e.editorTab.directiveFn()},name:"panel-editor-tab-"+t+n};return Rn[t][n]=a,a}})}c.a.module("grafana.directives").directive("panelEditorTab",Ln);var jn=c.a.module("grafana.directives"),Un=function(){return function(){this.panelCtrl=this.queryCtrl.panelCtrl,this.target=this.queryCtrl.target,this.panel=this.panelCtrl.panel,this.hasTextEditMode&&this.queryCtrl.toggleEditorMode&&(this.panelCtrl.toggleEditorMode=this.queryCtrl.toggleEditorMode.bind(this.queryCtrl)),this.queryCtrl.getCollapsedText&&(this.panelCtrl.getCollapsedText=this.queryCtrl.getCollapsedText.bind(this.queryCtrl))}}();jn.directive("queryEditorRow",function(){return{restrict:"E",controller:Un,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/features/panel/partials/query_editor_row.html",transclude:!0,scope:{queryCtrl:"=",canCollapse:"=",hasTextEditMode:"="}}});var Vn='\n<div class="gf-form-select-wrapper max-width-18">\n  <select class="gf-form-input" ng-model="panel.repeat" ng-options="f.value as f.text for f in variables" ng-change="optionChanged()">\n  <option value=""></option>\n</div>\n';function Bn(e){return{restrict:"E",template:Vn,scope:{panel:"="},link:function(t,n){n.css({display:"block",width:"100%"}),t.variables=e.variables.map(function(e){return{text:e.name,value:e.name}}),0===t.variables.length&&t.variables.unshift({text:"No template variables found",value:null}),t.variables.unshift({text:"Disabled",value:null}),t.panel.repeat&&!t.panel.repeatDirection&&(t.panel.repeatDirection="h"),t.optionChanged=function(){t.panel.repeat&&(t.panel.repeatDirection="h")}}}}x.d.directive("dashRepeatOption",Bn);n(269);var Qn=function(){function e(e,t){e.panel.links=e.panel.links||[],e.addLink=function(){e.panel.links.push({type:"dashboard"})},e.searchDashboards=function(e,n){t.search({query:e}).then(function(e){var t=i.a.map(e,function(e){return e.title});n(t)})},e.dashboardChanged=function(e){t.search({query:e.dashboard}).then(function(t){var n=i.a.find(t,{title:e.dashboard});n&&(n.url?e.url=n.url:e.dashUri=n.uri,e.title=n.title)})},e.deleteLink=function(t){e.panel.links=i.a.without(e.panel.links,t)}}return e.$inject=["$scope","backendSrv"],e}();c.a.module("grafana.directives").directive("panelLinksEditor",function(){return{scope:{panel:"="},restrict:"E",controller:"PanelLinksEditorCtrl",templateUrl:"public/app/features/panel/panellinks/module.html",link:function(){}}}).controller("PanelLinksEditorCtrl",Qn);var zn=function(){function e(e,t,n){n.sidemenu=!1,e.navModel={main:{icon:"gicon gicon-branding",subTitle:"Preferences",text:"Select active organization"}},e.init=function(){e.getUserOrgs()},e.getUserOrgs=function(){t.get("/api/user/orgs").then(function(t){e.orgs=t})},e.setUsingOrg=function(e){t.post("/api/user/using/"+e.orgId).then(function(){window.location.href=f.a.appSubUrl+"/"})},e.init()}return e.$inject=["$scope","backendSrv","contextSrv"],e}();c.a.module("grafana.controllers").controller("SelectOrgCtrl",zn);var Hn=function(){function e(e,t,n,a){e.navModel=a.getNav("cfg","admin","global-orgs",1),e.newOrg={name:""},e.createOrg=function(){n.post("/api/orgs/",e.newOrg).then(function(e){n.post("/api/user/using/"+e.orgId).then(function(){window.location.href=f.a.appSubUrl+"/org"})})}}return e.$inject=["$scope","$http","backendSrv","navModelSrv"],e}();c.a.module("grafana.controllers").controller("NewOrgCtrl",Hn);var Gn=function(){function e(e,t,n){this.backendSrv=e,this.$location=n,this.navModel=t.getNav("cfg","users",0),this.invite={name:"",email:"",role:"Editor",sendEmail:!0}}return e.$inject=["backendSrv","navModelSrv","$location"],e.prototype.sendInvite=function(){var e=this;if(this.inviteForm.$valid)return this.backendSrv.post("/api/org/invites",this.invite).then(function(){e.$location.path("org/users/")})},e}();w.c.controller("UserInviteCtrl",Gn);var Wn=function(){function e(e,t,n){this.$scope=e,this.backendSrv=t,this.pages=[],this.perPage=50,this.page=1,this.showPaging=!1,this.navModel=n.getNav("cfg","admin","global-users",1),this.query="",this.getUsers()}return e.$inject=["$scope","backendSrv","navModelSrv"],e.prototype.getUsers=function(){var e=this;this.backendSrv.get("/api/users/search?perpage="+this.perPage+"&page="+this.page+"&query="+this.query).then(function(t){e.users=t.users,e.page=t.page,e.perPage=t.perPage,e.totalPages=Math.ceil(t.totalCount/t.perPage),e.showPaging=e.totalPages>1,e.pages=[];for(var n=1;n<e.totalPages+1;n++)e.pages.push({page:n,current:n===e.page})})},e.prototype.navigateToPage=function(e){this.page=e.page,this.getUsers()},e.prototype.deleteUser=function(e){var t=this;this.$scope.appEvent("confirm-modal",{title:"Delete",text:"Do you want to delete "+e.login+"?",icon:"fa-trash",yesText:"Delete",onConfirm:function(){t.backendSrv.delete("/api/admin/users/"+e.id).then(function(){t.getUsers()})}})},e}(),Yn=function(){function e(e,t,n,a,r){e.user={},e.newOrg={name:"",role:"Editor"},e.permissions={},e.navModel=r.getNav("cfg","admin","global-users",1),e.init=function(){t.id&&(e.getUser(t.id),e.getUserOrgs(t.id))},e.getUser=function(t){n.get("/api/users/"+t).then(function(n){e.user=n,e.user_id=t,e.permissions.isGrafanaAdmin=n.isGrafanaAdmin})},e.setPassword=function(){if(e.passwordForm.$valid){var t={password:e.password};n.put("/api/admin/users/"+e.user_id+"/password",t).then(function(){a.path("/admin/users")})}},e.updatePermissions=function(){var t=e.permissions;n.put("/api/admin/users/"+e.user_id+"/permissions",t).then(function(){a.path("/admin/users")})},e.create=function(){e.userForm.$valid&&n.post("/api/admin/users",e.user).then(function(){a.path("/admin/users")})},e.getUserOrgs=function(t){n.get("/api/users/"+t+"/orgs").then(function(t){e.orgs=t})},e.update=function(){e.userForm.$valid&&n.put("/api/users/"+e.user_id,e.user).then(function(){a.path("/admin/users")})},e.updateOrgUser=function(t){n.patch("/api/orgs/"+t.orgId+"/users/"+e.user_id,t).then(function(){})},e.removeOrgUser=function(t){n.delete("/api/orgs/"+t.orgId+"/users/"+e.user_id).then(function(){e.getUser(e.user_id),e.getUserOrgs(e.user_id)})},e.orgsSearchCache=[],e.searchOrgs=function(t,a){e.orgsSearchCache.length>0?a(i.a.map(e.orgsSearchCache,"name")):n.get("/api/orgs",{query:""}).then(function(t){e.orgsSearchCache=t,a(i.a.map(t,"name"))})},e.addOrgUser=function(){if(e.addOrgForm.$valid){var t=i.a.find(e.orgsSearchCache,{name:e.newOrg.name});t&&(e.newOrg.loginOrEmail=e.user.login,n.post("/api/orgs/"+t.id+"/users/",e.newOrg).then(function(){e.getUser(e.user_id),e.getUserOrgs(e.user_id)}))}},e.init()}return e.$inject=["$scope","$routeParams","backendSrv","$location","navModelSrv"],e}(),Kn=function(){function e(e,t,n){e.init=function(){e.navModel=n.getNav("cfg","admin","global-orgs",1),e.getOrgs()},e.getOrgs=function(){t.get("/api/orgs").then(function(t){e.orgs=t})},e.deleteOrg=function(n){e.appEvent("confirm-modal",{title:"Delete",text:"Do you want to delete organization "+n.name+"?",text2:"All dashboards for this organization will be removed!",icon:"fa-trash",yesText:"Delete",onConfirm:function(){t.delete("/api/orgs/"+n.id).then(function(){e.getOrgs()})}})},e.init()}return e.$inject=["$scope","backendSrv","navModelSrv"],e}(),Xn=function(){function e(e,t,n,a,r){e.init=function(){e.navModel=r.getNav("cfg","admin","global-orgs",1),t.id&&(e.getOrg(t.id),e.getOrgUsers(t.id))},e.getOrg=function(t){n.get("/api/orgs/"+t).then(function(t){e.org=t})},e.getOrgUsers=function(t){n.get("/api/orgs/"+t+"/users").then(function(t){e.orgUsers=t})},e.update=function(){e.orgDetailsForm.$valid&&n.put("/api/orgs/"+e.org.id,e.org).then(function(){a.path("/admin/orgs")})},e.updateOrgUser=function(e){n.patch("/api/orgs/"+e.orgId+"/users/"+e.userId,e)},e.removeOrgUser=function(t){n.delete("/api/orgs/"+t.orgId+"/users/"+t.userId).then(function(){e.getOrgUsers(e.org.id)})},e.init()}return e.$inject=["$scope","$routeParams","backendSrv","$location","navModelSrv"],e}(),Jn=function(){function e(e,t,n){this.$routeParams=e,this.backendSrv=t,this.buttonNames=["primary","secondary","inverse","success","warning","danger"],this.buttonSizes=["btn-small","","btn-large"],this.buttonVariants=["-"],this.navModel=n.getNav("cfg","admin","styleguide",1),this.theme=f.a.bootData.user.lightTheme?"light":"dark"}return e.$inject=["$routeParams","backendSrv","navModelSrv"],e.prototype.switchTheme=function(){this.$routeParams.theme="dark"===this.theme?"light":"dark";var e={theme:this.$routeParams.theme};this.backendSrv.put("/api/user/preferences",e).then(function(){window.location.href=window.location.href})},e}(),Zn=function(){function e(e,t,n){this.navModel=n.getNav("cfg","admin","server-settings",1),t.get("/api/admin/settings").then(function(t){e.settings=t})}return e.$inject=["$scope","backendSrv","navModelSrv"],e}(),ea=function(){function e(e){this.navModel=e.getNav("cfg","admin",1)}return e.$inject=["navModelSrv"],e}();w.c.controller("AdminListUsersCtrl",Wn),w.c.controller("AdminEditUserCtrl",Yn),w.c.controller("AdminListOrgsCtrl",Kn),w.c.controller("AdminEditOrgCtrl",Xn),w.c.controller("AdminSettingsCtrl",Zn),w.c.controller("AdminHomeCtrl",ea),w.c.controller("StyleGuideCtrl",Jn);var ta=function(){function e(e,t,n,a,r){var o=this;this.$routeParams=e,this.backendSrv=t,this.$location=n,this.$templateCache=a,this.testSeverity="critical",this.defaults={type:"email",sendReminder:!1,disableResolveMessage:!1,frequency:"15m",settings:{httpMethod:"POST",autoResolve:!0,uploadImage:!0},isDefault:!1},this.navModel=r.getNav("alerting","channels",0),this.isNew=!this.$routeParams.id,this.getFrequencySuggestion=function(){return["1m","5m","10m","15m","30m","1h"]},this.backendSrv.get("/api/alert-notifiers").then(function(e){o.notifiers=e;for(var t=0,n=o.notifiers;t<n.length;t++){var a=n[t];o.$templateCache.put(o.getNotifierTemplateId(a.type),a.optionsTemplate)}return o.$routeParams.id?o.backendSrv.get("/api/alert-notifications/"+o.$routeParams.id).then(function(e){return o.navModel.breadcrumbs.push({text:e.name}),o.navModel.node={text:e.name},e.settings=i.a.defaults(e.settings,o.defaults.settings),e}):(o.navModel.breadcrumbs.push({text:"New channel"}),o.navModel.node={text:"New channel"},i.a.defaults(o.model,o.defaults))}).then(function(e){o.model=e,o.notifierTemplateId=o.getNotifierTemplateId(o.model.type)})}return e.$inject=["$routeParams","backendSrv","$location","$templateCache","navModelSrv"],e.prototype.save=function(){var e=this;this.theForm.$valid&&(this.model.id?this.backendSrv.put("/api/alert-notifications/"+this.model.id,this.model).then(function(t){e.model=t,x.b.emit("alert-success",["Notification updated",""])}).catch(function(e){e.data&&e.data.error&&x.b.emit("alert-error",[e.data.error])}):this.backendSrv.post("/api/alert-notifications",this.model).then(function(t){x.b.emit("alert-success",["Notification created",""]),e.$location.path("alerting/notifications")}).catch(function(e){e.data&&e.data.error&&x.b.emit("alert-error",[e.data.error])}))},e.prototype.getNotifierTemplateId=function(e){return"notifier-options-"+e},e.prototype.typeChanged=function(){this.model.settings=i.a.defaults({},this.defaults.settings),this.notifierTemplateId=this.getNotifierTemplateId(this.model.type)},e.prototype.testNotification=function(){if(this.theForm.$valid){var e={name:this.model.name,type:this.model.type,frequency:this.model.frequency,settings:this.model.settings};this.backendSrv.post("/api/alert-notifications/test",e).then(function(e){x.b.emit("alert-success",["Test notification sent",""])})}},e}();x.d.controller("AlertNotificationEditCtrl",ta);var na=function(){function e(e,t){this.backendSrv=e,this.loadNotifications(),this.navModel=t.getNav("alerting","channels",0)}return e.$inject=["backendSrv","navModelSrv"],e.prototype.loadNotifications=function(){var e=this;this.backendSrv.get("/api/alert-notifications").then(function(t){e.notifications=t})},e.prototype.deleteNotification=function(e){var t=this;this.backendSrv.delete("/api/alert-notifications/"+e).then(function(){t.notifications=t.notifications.filter(function(t){return t.id!==e})})},e}();x.d.controller("AlertNotificationsListCtrl",na);var aa="dash-folder",ra="dash-db",ia=function(){function e(e,t){this.$q=e,this.backendSrv=t,this.rootName="general"}return e.$inject=["$q","backendSrv"],e.prototype.validateNewDashboardName=function(e,t){return this.validate(e,t,"A dashboard in this folder with the same name already exists")},e.prototype.validateNewFolderName=function(e){return this.validate(0,e,"A folder or dashboard in the general folder with the same name already exists")},e.prototype.validate=function(e,t,n){var a=(t=(t||"").trim()).toLowerCase();if(0===t.length)return this.$q.reject({type:"REQUIRED",message:"Name is required"});if(0===e&&a===this.rootName)return this.$q.reject({type:"EXISTING",message:"This is a reserved name and cannot be used for a folder."});var r=this.$q.defer(),i=[];return i.push(this.backendSrv.search({type:aa,folderIds:[e],query:t})),i.push(this.backendSrv.search({type:ra,folderIds:[e],query:t})),this.$q.all(i).then(function(e){var t=[];e.length>0&&e[0].length>0&&(t=e[0]),e.length>1&&e[1].length>0&&(t=t.concat(e[1]));for(var i=0,o=t;i<o.length;i++){var s=o[i];if(a===s.title.toLowerCase()){r.reject({type:"EXISTING",message:n});break}}r.resolve()}),r.promise},e}();w.c.service("validationSrv",ia);var oa=function(){function e(e){this.backendSrv=e,this.isValidFolderSelection=!0}return e.$inject=["backendSrv"],e.prototype.onFolderChange=function(e){this.folder=e},e.prototype.save=function(){var e=this;return this.backendSrv.moveDashboards(this.dashboards,this.folder).then(function(t){if(t.successCount>0){var n="Dashboard"+(1===t.successCount?"":"s")+" Moved",a=t.successCount+" dashboard"+(1===t.successCount?"":"s")+" moved to "+e.folder.title;L.b.emit("alert-success",[n,a])}return t.totalCount===t.alreadyInFolderCount&&L.b.emit("alert-error",["Error","Dashboards already belongs to folder "+e.folder.title]),e.dismiss(),e.afterSave()})},e.prototype.onEnterFolderCreation=function(){this.isValidFolderSelection=!1},e.prototype.onExitFolderCreation=function(){this.isValidFolderSelection=!0},e}();w.c.directive("moveToFolderModal",function(){return{restrict:"E",templateUrl:"public/app/features/manage-dashboards/components/MoveToFolderModal/template.html",controller:oa,bindToController:!0,controllerAs:"ctrl",scope:{dismiss:"&",dashboards:"=",afterSave:"&"}}});var sa='\n<input type="file" id="dashupload" name="dashupload" class="hide" onchange="angular.element(this).scope().file_selected"/>\n<label class="btn btn-primary" for="dashupload">\n  <i class="fa fa-upload"></i>\n  {{btnText}}\n</label>\n';function la(e,t){return{restrict:"E",template:sa,scope:{onUpload:"&",btnText:"@?"},link:function(e,t){e.btnText=c.a.isDefined(e.btnText)?e.btnText:"Upload .json File";var n=window;n.File&&n.FileReader&&n.FileList&&n.Blob?t[0].addEventListener("change",function(t){for(var n=t.target.files,a=0,r=n[a];r;){var i=new FileReader;i.onload=function(t){var n;try{n=JSON.parse(t.target.result)}catch(e){return console.log(e),void L.b.emit("alert-error",["Import failed","JSON -> JS Serialization failed: "+e.message])}e.$apply(function(){e.onUpload({dash:n})})},i.readAsText(r),r=n[a+=1]}},!1):L.b.emit("alert-error",["Oops","The HTML5 File APIs are not fully supported in this browser"])}}}w.c.directive("dashUpload",la);var ca=function(){function e(e){this.navModel=e.getNav("dashboards","manage-dashboards",0)}return e.$inject=["navModelSrv"],e}(),ua=function(){function e(e,t,n,a){var r=this;this.$rootScope=e,this.backendSrv=t,this.$location=a,this.navModel=n.getNav("dashboards","snapshots",0),this.backendSrv.get("/api/dashboard/snapshots").then(function(e){var t=r.$location.absUrl().replace(a.url(),"");r.snapshots=e.map(function(e){return E.a({},e,{url:e.externalUrl||t+"/dashboard/snapshot/"+e.key})})})}return e.$inject=["$rootScope","backendSrv","navModelSrv","$location"],e.prototype.removeSnapshotConfirmed=function(e){var t=this;i.a.remove(this.snapshots,{key:e.key}),this.backendSrv.delete("/api/snapshots/"+e.key).then(function(){},function(){t.snapshots.push(e)})},e.prototype.removeSnapshot=function(e){var t=this;this.$rootScope.appEvent("confirm-modal",{title:"Delete",text:"Are you sure you want to delete snapshot "+e.name+"?",yesText:"Delete",icon:"fa-trash",onConfirm:function(){t.removeSnapshotConfirmed(e)}})},e}();w.c.controller("DashboardListCtrl",ca),w.c.controller("SnapshotListCtrl",ua);var da=function(){function e(e,t,n){this.backendSrv=e,this.$location=t,this.navModel=n.getNav("cfg","teams",0)}return e.$inject=["backendSrv","$location","navModelSrv"],e.prototype.create=function(){var e=this,t={name:this.name,email:this.email};this.backendSrv.post("/api/teams",t).then(function(t){t.teamId&&e.$location.path("/org/teams/edit/"+t.teamId)})},e}();w.c.controller("CreateTeamCtrl",da);var pa=function(){function e(e,t,n,a){this.backendSrv=e,this.contextSrv=t,this.$location=n,this.teams=[],this.orgs=[],this.showTeamsList=!1,this.showOrgsList=!1,this.readonlyLoginFields=f.a.disableLoginForm,this.getUser(),this.getUserTeams(),this.getUserOrgs(),this.navModel=a.getNav("profile","profile-settings",0)}return e.$inject=["backendSrv","contextSrv","$location","navModelSrv"],e.prototype.getUser=function(){var e=this;this.backendSrv.get("/api/user").then(function(t){e.user=t,e.user.theme=t.theme||"dark"})},e.prototype.getUserTeams=function(){var e=this;this.backendSrv.get("/api/user/teams").then(function(t){e.teams=t,e.showTeamsList=e.teams.length>0})},e.prototype.getUserOrgs=function(){var e=this;this.backendSrv.get("/api/user/orgs").then(function(t){e.orgs=t,e.showOrgsList=t.length>1})},e.prototype.setUsingOrg=function(e){this.backendSrv.post("/api/user/using/"+e.orgId).then(function(){window.location.href=f.a.appSubUrl+"/profile"})},e.prototype.update=function(){var e=this;this.userForm.$valid&&this.backendSrv.put("/api/user/",this.user).then(function(){e.contextSrv.user.name=e.user.name||e.user.login,e.oldTheme!==e.user.theme&&(window.location.href=f.a.appSubUrl+e.$location.path())})},e}();x.d.controller("ProfileCtrl",pa);var ha=function(){function e(e,t,n,a){e.command={},e.authProxyEnabled=f.a.authProxyEnabled,e.ldapEnabled=f.a.ldapEnabled,e.navModel=a.getNav("profile","change-password",0),e.changePassword=function(){e.userForm.$valid&&(e.command.newPassword===e.command.confirmNew?t.put("/api/user/password",e.command).then(function(){n.path("profile")}):e.appEvent("alert-warning",["New passwords do not match",""]))}}return e.$inject=["$scope","backendSrv","$location","navModelSrv"],e}();c.a.module("grafana.controllers").controller("ChangePasswordCtrl",ha);var fa=n(203);Object(qt.a)("prefsControl",fa.a,["resourceUri"]),x.d.directive("datasourceHttpSettings",function(){return{scope:{current:"=",suggestUrl:"@",noDirectAccess:"@"},templateUrl:"public/app/features/datasources/partials/http_settings.html",link:{pre:function(e,t,n){e.showAccessOption="true"!==e.noDirectAccess,e.showAccessHelp=!1,e.toggleAccessHelp=function(){e.showAccessHelp=!e.showAccessHelp},e.getSuggestUrls=function(){return[e.suggestUrl]}}}}}),x.d.directive("datasourceTlsAuthSettings",function(){return{scope:{current:"="},templateUrl:"public/app/features/datasources/partials/tls_auth_settings.html"}}),i.a.move=function(e,t,n){return e.splice(n,0,e.splice(t,1)[0]),e};var ma=n(1444);ma.keys().forEach(function(e){ma(e)}),(new(function(){function e(){y("no-overlay-scrollbar"),this.preBootModules=[],this.registerFunctions={},this.ngModuleDependencies=[]}return e.prototype.useModule=function(e){return this.preBootModules?this.preBootModules.push(e):i.a.extend(e,this.registerFunctions),this.ngModuleDependencies.push(e.name),e},e.prototype.init=function(){var e=this,t=c.a.module("grafana",[]);g.a.locale(f.a.bootData.user.locale),t.config(["$locationProvider","$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$provide",function(t,n,a,r,i,o){a.preAssignBindingsEnabled(!0),"development"!==f.a.buildInfo.env&&a.debugInfoEnabled(!1),i.useApplyAsync(!0),e.registerFunctions.controller=n.register,e.registerFunctions.directive=a.directive,e.registerFunctions.factory=o.factory,e.registerFunctions.service=o.service,e.registerFunctions.filter=r.register,o.decorator("$http",["$delegate","$templateCache",function(e,t){var n=e.get;return e.get=function(e,a){return e.match(/\.html$/)&&(t.get(e)||(e+="?v="+(new Date).getTime())),n(e,a)},e}])}]),this.ngModuleDependencies=["grafana.core","ngRoute","ngSanitize","$strap.directives","ang-drag-drop","grafana","pasvaz.bindonce","ui.bootstrap","ui.bootstrap.tpls","react"],i.a.each(w.a,function(t){e.useModule(t)}),w.b.config(Z),Object(x.f)(),s.a.fn.tooltip.defaults.animation=!1,c.a.bootstrap(document,this.ngModuleDependencies).invoke(function(){i.a.each(e.preBootModules,function(t){i.a.extend(t,e.registerFunctions)}),e.preBootModules=null})},e}())).init()}]);
//# sourceMappingURL=app.1ad4438ca348dc27f022.js.map