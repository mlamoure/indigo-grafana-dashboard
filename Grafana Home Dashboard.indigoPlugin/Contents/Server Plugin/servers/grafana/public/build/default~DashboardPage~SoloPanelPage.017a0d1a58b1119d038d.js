(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"8M//":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("UvM7"),a=n("NXk7"),o=n("3SGO"),i=n("KyLG"),s=n("GQ3c"),l=n("rd46"),c=n("Obii"),u=n("ZFWI"),p=n("50r9"),f=n("jL/7");function d(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){d(o,r,a,i,s,"next",e)}function s(e){d(o,r,a,i,s,"throw",e)}i(void 0)}))}}function m(e,t,n){return b.apply(this,arguments)}function b(){return(b=h(regeneratorRuntime.mark((function e(t,n,r){var i,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.b.getDashboardBySlug(t);case 2:(i=e.sent)&&(s=i.meta.url,-1!==r.indexOf("dashboard-solo")&&(s=s.replace("/d/","/d-solo/")),l=c.locationUtil.stripBaseFromUrl(s),n(Object(o.c)({path:l,partial:!0,replace:!0})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){return g.apply(this,arguments)}function g(){return(g=h(regeneratorRuntime.mark((function e(t,n,r){var l,u,p,f,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t.routeInfo,e.next=e.t0===s.DashboardRouteInfo.Home?4:e.t0===s.DashboardRouteInfo.Normal?15:e.t0===s.DashboardRouteInfo.New?29:30;break;case 4:return e.next=6,a.b.get("/api/dashboards/home");case 6:if(!(l=e.sent).redirectUri){e.next=11;break}return u=c.locationUtil.stripBaseFromUrl(l.redirectUri),n(Object(o.c)({path:u,replace:!0})),e.abrupt("return",null);case 11:return l.meta.canSave=!1,l.meta.canShare=!1,l.meta.canStar=!1,e.abrupt("return",l);case 15:if("db"!==t.urlType){e.next=18;break}return m(t.urlSlug,n,r().location.path),e.abrupt("return",null);case 18:return p=t.$injector.get("dashboardLoaderSrv"),e.next=21,p.loadDashboard(t.urlType,t.urlSlug,t.urlUid);case 21:if(f=e.sent,!t.fixUrl||!f.meta.url){e.next=28;break}if(d=c.locationUtil.stripBaseFromUrl(f.meta.url),h=r().location.path,d===h){e.next=28;break}return n(Object(o.c)({path:d,partial:!0,replace:!0})),e.abrupt("return",null);case 28:return e.abrupt("return",f);case 29:return e.abrupt("return",O(t.urlFolderId));case 30:throw{message:"Unknown route "+t.routeInfo};case 31:e.next=38;break;case 33:return e.prev=33,e.t1=e.catch(0),n(Object(i.f)({message:"Failed to fetch dashboard",error:e.t1})),console.log(e.t1),e.abrupt("return",null);case 38:case"end":return e.stop()}}),e,null,[[0,33]])})))).apply(this,arguments)}function v(e){return function(){var t=h(regeneratorRuntime.mark((function t(n,a){var c,d,h,m,b,g,v,O,E,S,j,P,k,C,x,T;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(i.g)()),setTimeout((function(){null===a().dashboard.getModel()&&n(Object(i.i)())}),500),t.next=4,y(e,n,a);case 4:if(c=t.sent){t.next=7;break}return t.abrupt("return");case 7:n(Object(i.h)()),t.prev=8,d=new l.a(c.dashboard,c.meta),t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(8),n(Object(i.f)({message:"Failed create dashboard model",error:t.t0})),console.log(t.t0),t.abrupt("return");case 17:if((h=a()).location.query.orgId||n(Object(o.c)({query:{orgId:h.user.orgId},partial:!0,replace:!0})),m=e.$injector.get("timeSrv"),b=e.$injector.get("annotationsSrv"),g=e.$injector.get("variableSrv"),v=e.$injector.get("keybindingSrv"),O=e.$injector.get("unsavedChangesSrv"),E=e.$injector.get("dashboardSrv"),m.init(d),b.init(d),h.dashboard.modifiedQueries&&(S=h.dashboard.modifiedQueries,j=S.panelId,P=S.queries,d.meta.fromExplore=!(!j||!P)),t.prev=28,Object(u.c)().featureToggles.newVariables){t.next=32;break}return t.next=32,g.init(d);case 32:if(!Object(u.c)().featureToggles.newVariables){t.next=37;break}return n(Object(p.c)(d.templating.list)),t.next=36,n(Object(p.e)());case 36:n(Object(p.b)(d));case 37:t.next=43;break;case 39:t.prev=39,t.t1=t.catch(28),n(Object(o.b)(Object(r.a)("Templating init failed",t.t1))),console.log(t.t1);case 43:try{d.processRepeats(),d.updateSubmenuVisibility(),(k=a().location.query).autofitpanels&&d.autoFitPanels(window.innerHeight,k.kiosk),O.init(d,e.$scope),v.setupDashboardBindings(e.$scope,d)}catch(e){n(Object(o.b)(Object(r.a)("Dashboard init failed",e))),console.log(e)}h.dashboard.modifiedQueries&&(C=h.dashboard.modifiedQueries,x=C.panelId,T=C.queries,w(n,d,x,T)),E.setCurrent(d),e.routeInfo!==s.DashboardRouteInfo.New&&Object(f.a)(d),n(Object(i.e)(d));case 48:case"end":return t.stop()}}),t,null,[[8,12],[28,39]])})));return function(e,n){return t.apply(this,arguments)}}()}function O(e){var t={meta:{canStar:!1,canShare:!1,isNew:!0,folderId:0},dashboard:{title:"New dashboard",panels:[{type:"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}]}};return e&&(t.meta.folderId=parseInt(e,10)),t}function w(e,t,n,r){var a=t.panels.findIndex((function(e){return e.id===n}));a>-1&&(t.panels[a].targets=r),e(Object(i.d)())}},Yuww:function(e,t,n){"use strict";var r,a=n("q1tI"),o=n.n(a),i=n("TSYQ"),s=n.n(i),l=n("jYz7"),c=n("/MKj"),u=n("LvDl"),p=n("Obii"),f=n("kDLi"),d=n("Csm0"),h=n("t8hP"),m=n("5kRJ"),b=n("NPB1"),y=n("kt0J");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.Error="Error",e.Info="Info",e.Links="Links"}(r||(r={}));var j=function(e){function t(){var e,n;v(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=w(this,(e=E(t)).call.apply(e,[this].concat(i)))).timeSrv=Object(b.a)(),n.getInfoMode=function(){var e=n.props,t=e.panel;return e.error?r.Error:t.description?r.Info:t.links&&t.links.length?r.Links:void 0},n.getInfoContent=function(){var e=n.props.panel,t=e.description||"",r=m.b.replace(t,e.scopedVars),a=Object(p.renderMarkdown)(r),i=n.props.links&&n.props.links.getLinks(e);return o.a.createElement("div",{className:"panel-info-content markdown-html"},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}}),i&&i.length>0&&o.a.createElement("ul",{className:"panel-info-corner-links"},i.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("a",{className:"panel-info-corner-links__item",href:e.href,target:e.target},e.title))}))))},n.onClickError=function(){Object(h.getLocationSrv)().update({partial:!0,query:{inspect:n.props.panel.id,tab:y.a.Error}})},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(a=[{key:"renderCornerType",value:function(e,t,n){var a=e===r.Error?"error":"info";return o.a.createElement(f.Tooltip,{content:t,placement:"top-start",theme:a},o.a.createElement("div",{className:"panel-info-corner panel-info-corner--".concat(e.toLowerCase()),onClick:n},o.a.createElement("i",{className:"fa"}),o.a.createElement("span",{className:"panel-info-corner-inner"})))}},{key:"render",value:function(){var e=this.props.error,t=this.getInfoMode();return t?t===r.Error&&e?this.renderCornerType(t,e,this.onClickError):t===r.Info||t===r.Links?this.renderCornerType(t,this.getInfoContent):null:null}}])&&O(n.prototype,a),i&&O(n,i),t}(a.Component),P=n("kDDq");function k(){var e=x(["\n    position: absolute;\n    top: 7px;\n    right: ",";\n    color: ",";\n  "]);return k=function(){return e},e}function C(){var e=x(["\n    margin-right: ",";\n    a::after {\n      display: none;\n    }\n  "]);return C=function(){return e},e}function x(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=function(e){var t="submenu"===e.type,n="divider"===e.type,r=Object(f.useTheme)(),a=Object(P.css)(C(),r.spacing.sm),i=Object(P.css)(k(),r.spacing.xs,r.colors.textWeak);return n?o.a.createElement("li",{className:"divider"}):o.a.createElement("li",{className:t?"dropdown-submenu":void 0},o.a.createElement("a",{onClick:e.onClick,href:e.href},e.iconClassName&&o.a.createElement(f.Icon,{name:e.iconClassName,className:a}),o.a.createElement("span",{className:"dropdown-item-text","aria-label":d.selectors.components.Panels.Panel.headerItems(e.text)},e.text,t&&o.a.createElement(f.Icon,{name:"angle-right",className:i})),e.shortcut&&o.a.createElement("span",{className:"dropdown-menu-item-shortcut"},o.a.createElement(f.Icon,{name:"keyboard",className:a})," ",e.shortcut)),e.children)};function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){var e,n;N(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=R(this,(e=_(t)).call.apply(e,[this].concat(a)))).renderItems=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.a.createElement("ul",{className:"dropdown-menu dropdown-menu--menu panel-menu",role:t?"":"menu"},e.map((function(e,t){return o.a.createElement(T,{key:"".concat(e.text).concat(t),type:e.type,text:e.text,iconClassName:e.iconClassName,onClick:e.onClick,shortcut:e.shortcut},e.subMenu&&n.renderItems(e.subMenu,!0))})))},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"panel-menu-container dropdown open"},this.renderItems(this.props.items))}}])&&I(n.prototype,r),a&&I(n,a),t}(a.PureComponent),M=n("MAcC"),q=n("3SGO"),V=n("iODs"),J=n("+JUD"),A=n("umNM"),Q=n("Efza"),U=n("m257");function z(e,t,n){var r=function(e){event.preventDefault(),Object(h.getLocationSrv)().update({partial:!0,query:{inspect:t.id,inspectTab:e}})},a=[];t.isEditing||a.push({text:"View",iconClassName:"eye",onClick:function(e){e.preventDefault(),V.d.dispatch(Object(q.c)({query:{viewPanel:t.id},partial:!0}))},shortcut:"v"}),e.canEditPanel(t)&&!t.isEditing&&a.push({text:"Edit",iconClassName:"edit",onClick:function(e){e.preventDefault(),V.d.dispatch(Object(q.c)({query:{editPanel:t.id},partial:!0}))},shortcut:"e"}),a.push({text:"Share",iconClassName:"share-alt",onClick:function(n){n.preventDefault(),Object(J.e)(e,t)},shortcut:"p s"}),!A.a.hasAccessToExplore()||t.plugin&&t.plugin.meta.skipDataQuery||a.push({text:"Explore",iconClassName:"compass",shortcut:"x",onClick:function(e){e.preventDefault();var n=e.ctrlKey||e.metaKey?function(e){return window.open(e)}:void 0;V.d.dispatch(Object(Q.m)(t,{getDataSourceSrv:h.getDataSourceSrv,getTimeSrv:b.a,getExploreUrl:U.k,openInNewWindow:n}))}});var o=[];t.plugin&&!t.plugin.meta.skipDataQuery&&(o.push({text:"Data",onClick:function(e){return r("data")}}),e.meta.canEdit&&o.push({text:"Query",onClick:function(e){return r("query")}})),o.push({text:"Panel JSON",onClick:function(e){return r("json")}}),a.push({type:"submenu",text:"Inspect",iconClassName:"info-circle",onClick:function(e){return r()},shortcut:"i",subMenu:o});var i=[];return!e.canEditPanel(t)||t.isViewing||t.isEditing||(i.push({text:"Duplicate",onClick:function(n){n.preventDefault(),Object(J.c)(e,t)},shortcut:"p d"}),i.push({text:"Copy",onClick:function(e){e.preventDefault(),Object(J.b)(t)}})),n&&function(){var e=n.getScope(),t=e.$$childHead.ctrl,r=t.getExtendedMenu(),a=!0,o=!1,s=void 0;try{for(var l,c=function(){var n=l.value,r={text:n.text,href:n.href,shortcut:n.shortcut};n.click&&(r.onClick=function(){e.$eval(n.click,{ctrl:t})}),i.push(r)},u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)c()}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}}(),!t.isEditing&&i.length&&a.push({type:"submenu",text:"More...",iconClassName:"cube",subMenu:i,onClick:function(e){e.preventDefault()}}),e.canEditPanel(t)&&!t.isEditing&&(a.push({type:"divider"}),a.push({text:"Remove",iconClassName:"trash-alt",onClick:function(n){n.preventDefault(),Object(J.d)(e,t,!0)},shortcut:"p r"})),a}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){var e,n;B(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=$(this,(e=G(t)).call.apply(e,[this].concat(a)))).clickCoordinates={x:0,y:0},n.state={panelMenuOpen:!1,menuItems:[]},n.eventToClickCoordinates=function(e){return{x:e.clientX,y:e.clientY}},n.onMouseDown=function(e){n.clickCoordinates=n.eventToClickCoordinates(e)},n.isClick=function(e){return Object(u.isEqual)(e,n.clickCoordinates)},n.onMenuToggle=function(e){if(n.isClick(n.eventToClickCoordinates(e))){e.stopPropagation();var t=n.props,r=z(t.dashboard,t.panel,t.angularComponent);n.setState({panelMenuOpen:!n.state.panelMenuOpen,menuItems:r})}},n.closeMenu=function(){n.setState({panelMenuOpen:!1})},n.openInspect=function(e,t){var r=n.props,a=r.updateLocation,o=r.panel;e.stopPropagation(),a({query:{inspect:o.id,inspectTab:t},partial:!0})},n.renderNotice=function(e){return o.a.createElement(f.Tooltip,{content:e.text,key:e.severity},e.inspect?o.a.createElement("div",{className:"panel-info-notice pointer",onClick:function(t){return n.openInspect(t,e.inspect)}},o.a.createElement(f.Icon,{name:"info-circle",style:{marginRight:"8px"}})):o.a.createElement("a",{className:"panel-info-notice",href:e.link,target:"_blank"},o.a.createElement(f.Icon,{name:"info-circle",style:{marginRight:"8px"}})))},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,e),n=t,(r=[{key:"renderLoadingState",value:function(){return o.a.createElement("div",{className:"panel-loading"},o.a.createElement(f.Icon,{className:"fa-spin",name:"fa fa-spinner"}))}},{key:"render",value:function(){var e=this.props,t=e.panel,n=e.scopedVars,r=e.error,a=e.isViewing,i=e.isEditing,l=e.data,c=e.alertState,u=this.state.menuItems,h=m.b.replaceWithText(t.title,n),b=s()({"panel-header":!0,"grid-drag-handle":!(a||i)}),y={},g=!0,v=!1,O=void 0;try{for(var w,E=l.series[Symbol.iterator]();!(g=(w=E.next()).done);g=!0){var S=w.value;if(S.meta&&S.meta.notices){var P=!0,k=!1,C=void 0;try{for(var x,T=S.meta.notices[Symbol.iterator]();!(P=(x=T.next()).done);P=!0){var D=x.value;y[D.severity]=D}}catch(e){k=!0,C=e}finally{try{P||null==T.return||T.return()}finally{if(k)throw C}}}}}catch(e){v=!0,O=e}finally{try{g||null==E.return||E.return()}finally{if(v)throw O}}return o.a.createElement(o.a.Fragment,null,l.state===p.LoadingState.Loading&&this.renderLoadingState(),o.a.createElement("div",{className:b},o.a.createElement(j,{panel:t,title:t.title,description:t.description,scopedVars:t.scopedVars,links:Object(M.c)(t),error:r}),o.a.createElement("div",{className:"panel-title-container",onClick:this.onMenuToggle,onMouseDown:this.onMouseDown,"aria-label":d.selectors.components.Panels.Panel.title(h)},o.a.createElement("div",{className:"panel-title"},Object.values(y).map(this.renderNotice),c&&o.a.createElement(f.Icon,{name:"alerting"===c?"heart-break":"heart",className:"icon-gf panel-alert-icon",style:{marginRight:"4px"},size:"sm"}),o.a.createElement("span",{className:"panel-title-text"},h,o.a.createElement(f.Icon,{name:"angle-down",className:"panel-menu-toggle"})),this.state.panelMenuOpen&&o.a.createElement(f.ClickOutsideWrapper,{onClick:this.closeMenu},o.a.createElement(L,{items:u})),l.request&&l.request.timeInfo&&o.a.createElement("span",{className:"panel-time-info"},o.a.createElement(f.Icon,{name:"clock-nine",size:"sm"})," ",l.request.timeInfo)))))}}])&&H(n.prototype,r),a&&H(n,a),t}(a.Component),X=n("T9PE"),Y=n("kHZm"),ee=n("ZFWI"),te=n("eXZ6");function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=se(this,le(t).call(this,e))).timeSrv=Object(b.a)(),n.onRefresh=function(){var e=n.props,t=e.panel,r=e.isInView,a=e.width;if(!r)return console.log("Refresh when panel is visible",t.id),void n.setState({refreshWhenInView:!0});var o=Object(J.a)(t,n.timeSrv.timeRange());if(n.wantsQueryExecution){if(a<0)return void console.log("Refresh skippted, no width yet... wait till we know");t.getQueryRunner().run({datasource:t.datasource,queries:t.targets,panelId:t.id,dashboardId:n.props.dashboard.id,timezone:n.props.dashboard.getTimezone(),timeRange:o.timeRange,timeInfo:o.timeInfo,maxDataPoints:t.maxDataPoints||a,minInterval:t.interval,scopedVars:t.scopedVars,cacheTimeout:t.cacheTimeout,transformations:t.transformations})}else n.onRender()},n.onRender=function(){var e={renderCounter:n.state.renderCounter+1};n.setState(e)},n.onOptionsChange=function(e){n.props.panel.updateOptions(e)},n.onFieldConfigChange=function(e){n.props.panel.updateFieldConfig(e)},n.onPanelError=function(e){n.state.errorMessage!==e&&n.setState({errorMessage:e})},n.onChangeTimeRange=function(e){n.timeSrv.setTime({from:Object(p.toUtc)(e.from),to:Object(p.toUtc)(e.to)})},n.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,data:{state:p.LoadingState.NotStarted,series:[],timeRange:p.DefaultTimeRange}},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.panel,r=t.dashboard;n.events.on(p.PanelEvents.refresh,this.onRefresh),n.events.on(p.PanelEvents.render,this.onRender),r.panelInitialized(this.props.panel),this.hasPanelSnapshot?this.setState({data:ae({},this.state.data,{state:p.LoadingState.Done,series:Object(Y.a)(n.snapshotData)}),isFirstLoad:!1}):(this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.querySubscription=n.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:function(t){return e.onDataUpdate(t)}}))}},{key:"componentWillUnmount",value:function(){this.props.panel.events.off(p.PanelEvents.refresh,this.onRefresh),this.props.panel.events.off(p.PanelEvents.render,this.onRender),this.querySubscription&&this.querySubscription.unsubscribe()}},{key:"componentDidUpdate",value:function(e){var t=this.props.isInView;t!==e.isInView&&t&&this.state.refreshWhenInView&&this.onRefresh()}},{key:"onDataUpdate",value:function(e){if(this.props.isInView){var t,n=this.state.isFirstLoad;switch(e.state){case p.LoadingState.Loading:if(this.state.data.state===p.LoadingState.Loading)return;break;case p.LoadingState.Error:var r=e.error;r&&t!==r.message&&(t=r.message);break;case p.LoadingState.Done:this.props.dashboard.snapshot&&(this.props.panel.snapshotData=e.series.map((function(e){return Object(p.toDataFrameDTO)(e)}))),n&&(n=!1)}this.setState({isFirstLoad:n,errorMessage:t,data:e})}}},{key:"renderPanel",value:function(e,t){var n=this.props,r=n.panel,a=n.plugin,i=this.state,l=i.renderCounter,c=i.data,u=i.isFirstLoad,f=ee.b.theme,d=c.state;if(d===p.LoadingState.Done&&X.a.renderingCompleted(),u&&(d===p.LoadingState.Loading||d===p.LoadingState.NotStarted))return null;var h=a.panel,m=c.timeRange||this.timeSrv.timeRange(),b=this.hasOverlayHeader()?0:f.panelHeaderHeight,y=a.noPadding?0:f.panelPadding,g=e-2*y-te.i,v=t-b-2*y-te.i,O=s()({"panel-content":!0,"panel-content--no-padding":a.noPadding}),w=r.getOptions();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:O},o.a.createElement(h,{id:r.id,data:c,timeRange:m,timeZone:this.props.dashboard.getTimezone(),options:w,fieldConfig:r.fieldConfig,transparent:r.transparent,width:g,height:v,renderCounter:l,replaceVariables:r.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange})))}},{key:"hasOverlayHeader",value:function(){var e=this.props.panel,t=this.state,n=t.errorMessage,r=t.data;return!(n||r.request&&r.request.timeInfo||e.hasTitle())}},{key:"render",value:function(){var e=this,t=this.props,n=t.dashboard,r=t.panel,a=t.isViewing,i=t.isEditing,l=t.width,c=t.height,u=t.updateLocation,p=this.state,h=p.errorMessage,m=p.data,b=r.transparent,y=s()({"panel-container":!0,"panel-container--absolute":!0,"panel-container--transparent":b,"panel-container--no-title":this.hasOverlayHeader()});return o.a.createElement("div",{className:y,"aria-label":d.selectors.components.Panels.Panel.containerByTitle(r.title)},o.a.createElement(K,{panel:r,dashboard:n,title:r.title,description:r.description,scopedVars:r.scopedVars,links:r.links,error:h,isEditing:i,isViewing:a,data:m,updateLocation:u}),o.a.createElement(f.ErrorBoundary,null,(function(t){var n=t.error;return n?(e.onPanelError(n.message||"Error in plugin"),null):e.renderPanel(l,c)})))}},{key:"hasPanelSnapshot",get:function(){var e=this.props.panel;return e.snapshotData&&e.snapshotData.length}},{key:"wantsQueryExecution",get:function(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}}])&&ie(n.prototype,r),a&&ie(n,a),t}(a.PureComponent),pe=n("KyLG");function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ye=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=he(this,me(t).call(this,e))).element=null,n.timeSrv=Object(b.a)(),n.onPanelRenderEvent=function(e){var t=n.state.alertState;e&&e.alertState&&n.props.panel.alert?n.setState({alertState:e.alertState}):e&&e.alertState&&!n.props.panel.alert?n.setState({alertState:void 0}):e&&t?n.setState({alertState:void 0}):n.forceUpdate()},n.state={data:{state:p.LoadingState.NotStarted,series:[],timeRange:p.DefaultTimeRange}},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.panel;this.loadAngularPanel();var n=t.getQueryRunner();this.querySubscription=n.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:function(t){return e.onPanelDataUpdate(t)}})}},{key:"subscribeToRenderEvent",value:function(){this.props.panel.events.on(p.PanelEvents.render,this.onPanelRenderEvent)}},{key:"onPanelDataUpdate",value:function(e){var t;if(e.state===p.LoadingState.Error){var n=e.error;n&&t!==n.message&&(t=n.message)}this.setState({data:e,errorMessage:t})}},{key:"componentWillUnmount",value:function(){this.cleanUpAngularPanel(),this.querySubscription&&this.querySubscription.unsubscribe(),this.props.panel.events.off(p.PanelEvents.render,this.onPanelRenderEvent)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.plugin,a=n.height,o=n.width,i=n.panel;e.plugin!==r&&(this.cleanUpAngularPanel(),this.loadAngularPanel()),e.width===o&&e.height===a||this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),i.events.emit(p.PanelEvents.panelSizeChanged))}},{key:"getInnerPanelHeight",value:function(){var e=this.props,t=e.plugin,n=e.height,r=ee.b.theme;return n-(this.hasOverlayHeader()?0:r.panelHeaderHeight)-2*(t.noPadding?0:r.panelPadding)-te.i}},{key:"getInnerPanelWidth",value:function(){var e=this.props,t=e.plugin,n=e.width,r=ee.b.theme;return n-2*(t.noPadding?0:r.panelPadding)-te.i}},{key:"loadAngularPanel",value:function(){var e=this.props,t=e.panel,n=e.dashboard,r=e.setPanelAngularComponent;if(this.element){var a=Object(h.getAngularLoader)();this.scopeProps={panel:t,dashboard:n,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},r({panelId:t.id,angularComponent:a.load(this.element,this.scopeProps,'<plugin-component type="panel" class="panel-height-helper"></plugin-component>')}),this.subscribeToRenderEvent()}}},{key:"cleanUpAngularPanel",value:function(){var e=this.props,t=e.angularComponent,n=e.setPanelAngularComponent,r=e.panel;t&&t.destroy(),n({panelId:r.id,angularComponent:null})}},{key:"hasOverlayHeader",value:function(){var e=this.props.panel,t=this.state,n=t.errorMessage,r=t.data;return!(n||r.request&&r.request.timeInfo||e.hasTitle())}},{key:"render",value:function(){var e,t,n,r=this,a=this.props,i=a.dashboard,l=a.panel,c=a.isViewing,u=a.isEditing,p=a.plugin,f=a.angularComponent,h=a.updateLocation,m=this.state,b=m.errorMessage,y=m.data,g=m.alertState,v=l.transparent,O=s()((e={"panel-container":!0,"panel-container--absolute":!0,"panel-container--transparent":v,"panel-container--no-title":this.hasOverlayHeader(),"panel-has-alert":void 0!==l.alert},t="panel-alert-state--".concat(g),n=void 0!==g,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),w=s()({"panel-content":!0,"panel-content--no-padding":p.noPadding});return o.a.createElement("div",{className:O,"aria-label":d.selectors.components.Panels.Panel.containerByTitle(l.title)},o.a.createElement(K,{panel:l,dashboard:i,title:l.title,description:l.description,scopedVars:l.scopedVars,angularComponent:f,links:l.links,error:b,isViewing:c,isEditing:u,data:y,updateLocation:h,alertState:g}),o.a.createElement("div",{className:w},o.a.createElement("div",{ref:function(e){return r.element=e},className:"panel-height-helper"})))}}])&&de(n.prototype,r),a&&de(n,a),t}(a.PureComponent),ge={setPanelAngularComponent:pe.n,updateLocation:q.c},ve=Object(c.connect)((function(e,t){return{angularComponent:e.dashboard.panels[t.panel.id].angularComponent}}),ge)(ye),Oe=n("J4KJ"),we=n("13X4");function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return Te}));var Ce=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=je(this,Pe(t).call(this,e))).specialPanels={},n.onMouseEnter=function(){n.props.dashboard.setPanelFocus(n.props.panel.id)},n.onMouseLeave=function(){n.props.dashboard.setPanelFocus(0)},n.state={isLazy:!e.isInView},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.initDashboardPanel(this.props.panel)}},{key:"componentDidUpdate",value:function(){this.state.isLazy&&this.props.isInView&&this.setState({isLazy:!1})}},{key:"renderPanel",value:function(e){var t=this.props,n=t.dashboard,r=t.panel,a=t.isViewing,i=t.isInView,s=t.isEditing,c=t.updateLocation;return o.a.createElement(l.a,null,(function(t){var l=t.width,u=t.height;return 0===l?null:e.angularPanelCtrl?o.a.createElement(ve,{plugin:e,panel:r,dashboard:n,isViewing:a,isEditing:s,isInView:i,width:l,height:u}):o.a.createElement(ue,{plugin:e,panel:r,dashboard:n,isViewing:a,isEditing:s,isInView:i,width:l,height:u,updateLocation:c})}))}},{key:"render",value:function(){var e=this.props,t=e.isViewing,n=e.plugin,r=this.state.isLazy;if(!n)return null;if(r)return null;var a=s()({"panel-wrapper":!0,"panel-wrapper--view":t});return o.a.createElement("div",{className:a,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.renderPanel(n))}}])&&Se(n.prototype,r),a&&Se(n,a),t}(a.PureComponent),xe={initDashboardPanel:Oe.e,updateLocation:we.b},Te=Object(c.connect)((function(e,t){var n=e.dashboard.panels[t.panel.id];return n?{plugin:n.plugin}:{plugin:null}}),xe)(Ce)},kt0J:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("kDDq"),s=n("kDLi"),l=n("Obii");function c(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n      padding-left: ",";\n      margin: "," -"," -"," -",";\n    "]);return c=function(){return e},e}var u=function(e){var t=e.tab,n=e.tabs,r=e.onSelectTab,o=e.panelData,i=Object(s.useTheme)(),c=p(i);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"muted"},function(e){var t=e.request;if(!t)return"";var n=t.targets.length,r=t.endTime?t.endTime-t.startTime:0,a=Object(l.formattedValueToString)(Object(l.getValueFormat)("ms")(r));return"".concat(n," queries with total query time of ").concat(a)}(o)),a.a.createElement(s.TabsBar,{className:c.tabsBar},n.map((function(e,n){return a.a.createElement(s.Tab,{key:"".concat(e.value,"-").concat(n),label:e.label,active:e.value===t,onChangeTab:function(){return r(e)}})}))))},p=Object(s.stylesFactory)((function(e){return{tabsBar:Object(i.css)(c(),e.spacing.md,e.spacing.lg,e.spacing.sm,e.spacing.lg,e.spacing.lg)}}));var f=n("LvDl"),d=n("Csm0"),h=n("HJRA"),m=n("ZFWI");function b(){var e=N(["\n      display: flex;\n      > * {\n        margin-right: ",";\n      }\n    "]);return b=function(){return e},e}function y(){var e=N(["\n      flex-grow: 1;\n      min-width: 300px;\n      margin-right: ",";\n    "]);return y=function(){return e},e}function g(){var e=N(["\n      margin-top: 19px;\n    "]);return g=function(){return e},e}function v(){var e=N(["\n      display: flex;\n      flex-grow: 1;\n    "]);return v=function(){return e},e}function O(){var e=N(["\n      display: flex;\n      flex-wrap: wrap;\n    "]);return O=function(){return e},e}function w(){var e=N(["\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      width: 100%;\n    "]);return w=function(){return e},e}function E(){var e=N(["\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n    "]);return E=function(){return e},e}function S(){var e=N(["\n      flex-grow: 2;\n    "]);return S=function(){return e},e}function j(){var e=N(["\n      overflow: scroll;\n    "]);return j=function(){return e},e}function P(){var e=N(["\n      font-family: monospace;\n      height: 100%;\n      flex-grow: 1;\n    "]);return P=function(){return e},e}function k(){var e=N(["\n      flex-grow: 1;\n      padding: "," 0;\n    "]);return k=function(){return e},e}function C(){var e=N(["\n      flex-grow: 1;\n      padding-bottom: 16px;\n    "]);return C=function(){return e},e}function x(){var e=N(["\n      margin-left: ",";\n    "]);return x=function(){return e},e}function T(){var e=N(["\n      display: flex;\n      width: 100%;\n      flex-grow: 0;\n      align-items: center;\n      justify-content: flex-end;\n      margin-bottom: ",";\n    "]);return T=function(){return e},e}function D(){var e=N(["\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      width: 100%;\n      flex: 1 1 0;\n    "]);return D=function(){return e},e}function N(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var I,R=Object(s.stylesFactory)((function(){return{wrap:Object(i.css)(D()),toolbar:Object(i.css)(T(),m.a.theme.spacing.sm),toolbarItem:Object(i.css)(x(),m.a.theme.spacing.md),content:Object(i.css)(C()),contentQueryInspector:Object(i.css)(k(),m.a.theme.spacing.md),editor:Object(i.css)(P()),viewer:Object(i.css)(j()),dataFrameSelect:Object(i.css)(S()),tabContent:Object(i.css)(E()),dataTabContent:Object(i.css)(w()),actionsWrapper:Object(i.css)(O()),leftActions:Object(i.css)(v()),options:Object(i.css)(g()),dataDisplayOptions:Object(i.css)(y(),m.a.theme.spacing.sm),selects:Object(i.css)(b(),m.a.theme.spacing.sm)}}));function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.PanelJSON="panel",e.PanelData="data",e.DataStructure="structure"}(I||(I={}));var A=[{label:"Panel JSON",description:"The model saved in the dashboard JSON that configures how everything works.",value:I.PanelJSON},{label:"Panel data",description:"The raw model passed to the panel visualization",value:I.PanelData},{label:"DataFrame structure",description:"Response info without any values",value:I.DataStructure}],Q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=q(this,V(t).call(this,e))).onSelectChanged=function(e){var t="";e.value===I.PanelJSON&&(t=U(n.props.panel)),n.setState({text:t,show:e.value})},n.onTextChanged=function(e){var t=e.currentTarget.value;n.setState({text:t})},n.getJSONObject=function(e){return e===I.PanelData?n.props.data:e===I.DataStructure?(null===(t=n.props.data)||void 0===t?void 0:t.series)?n.props.data.series.map((function(e){var t=e.fields.map((function(e){return Object(f.chain)(e).omit("values").omit("calcs").omit("display").value()}));return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{fields:t})})):{note:"Missing Response Data"}:e===I.PanelJSON?n.props.panel.getSaveModel():{note:"Unknown Object",show:e};var t},n.getClipboardText=function(){var e=n.state.show,t=n.getJSONObject(e);return JSON.stringify(t,null,2)},n.onClipboardCopied=function(){h.a.emit(l.AppEvents.alertSuccess,["Content copied to clipboard"])},n.onApplyPanelModel=function(){var e=n.props,t=e.panel,r=e.dashboard,a=e.onClose;try{if(r.meta.canEdit){var o=JSON.parse(n.state.text);t.restoreModel(o),t.refresh(),h.a.emit(l.AppEvents.alertSuccess,["Panel model updated"])}else h.a.emit(l.AppEvents.alertError,["Unable to apply"])}catch(e){console.log("Error applyign updates",e),h.a.emit(l.AppEvents.alertError,["Invalid JSON text"])}a()},n.state={show:I.PanelJSON,text:U(e.panel)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,e),n=t,(r=[{key:"renderPanelJSON",value:function(e){return a.a.createElement(s.TextArea,{spellCheck:!1,value:this.state.text,onChange:this.onTextChanged,className:e.editor})}},{key:"render",value:function(){var e=this.props.dashboard,t=this.state.show,n=A.find((function(e){return e.value===t})),r=t===I.PanelJSON,o=e.meta.canEdit,i=R();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:i.toolbar,"aria-label":d.selectors.components.PanelInspector.Json.content},a.a.createElement(s.Field,{label:"Select source",className:"flex-grow-1"},a.a.createElement(s.Select,{options:A,value:n,onChange:this.onSelectChanged})),a.a.createElement(s.ClipboardButton,{variant:"secondary",className:i.toolbarItem,getText:this.getClipboardText,onClipboardCopy:this.onClipboardCopied},"Copy to clipboard"),r&&o&&a.a.createElement(s.Button,{className:i.toolbarItem,onClick:this.onApplyPanelModel},"Apply")),a.a.createElement("div",{className:i.content},r?this.renderPanelJSON(i):a.a.createElement("div",{className:i.viewer},a.a.createElement(s.JSONFormatter,{json:this.getJSONObject(t)}))))}}])&&M(n.prototype,r),o&&M(n,o),t}(r.PureComponent);function U(e){return JSON.stringify(e.getSaveModel(),null,2)}var z=n("Xmxp"),W=n("ttS0"),B=n("GQ3c"),H=n("sCrc");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Y(this,ee(t).call(this,e))).onIssueNewQuery=function(){n.props.panel.refresh()},n.onPanelRefresh=function(){n.setState((function(e){return Z({},e,{dsQuery:{isLoading:!0,response:{}}})}))},n.onRequestError=function(e){n.onDataSourceResponse(e)},n.onDataSourceResponse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.state.isMocking?n.handleMocking(e):((e=Z({},e)).headers&&delete e.headers,e.config&&(e.request=e.config,delete e.config,delete e.request.transformRequest,delete e.request.transformResponse,delete e.request.paramSerializer,delete e.request.jsonpCallbackParam,delete e.request.headers,delete e.request.requestId,delete e.request.inspect,delete e.request.retry,delete e.request.timeout),e.data&&(e.response=e.data,delete e.config,delete e.data,delete e.status,delete e.statusText,delete e.ok,delete e.url,delete e.redirected,delete e.type,delete e.$$config),n.setState((function(t){return Z({},t,{dsQuery:{isLoading:!1,response:e}})})))},n.setFormattedJson=function(e){n.formattedJson=e},n.getTextForClipboard=function(){return JSON.stringify(n.formattedJson,null,2)},n.onClipboardSuccess=function(){z.b.emit(l.AppEvents.alertSuccess,["Content copied to clipboard"])},n.onToggleExpand=function(){n.setState((function(e){return Z({},e,{allNodesExpanded:!n.state.allNodesExpanded})}))},n.onToggleMocking=function(){n.setState((function(e){return Z({},e,{isMocking:!n.state.isMocking})}))},n.getNrOfOpenNodes=function(){return null===n.state.allNodesExpanded?3:n.state.allNodesExpanded?20:1},n.setMockedResponse=function(e){var t=e.target.value;n.setState((function(e){return Z({},e,{mockedResponse:t})}))},n.state={allNodesExpanded:null,isMocking:!1,mockedResponse:"",dsQuery:{isLoading:!1,response:{}}},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){z.b.on(B.CoreEvents.dsRequestResponse,this.onDataSourceResponse),z.b.on(B.CoreEvents.dsRequestError,this.onRequestError),this.props.panel.events.on(l.PanelEvents.refresh,this.onPanelRefresh)}},{key:"componentWillUnmount",value:function(){var e=this.props.panel;z.b.off(B.CoreEvents.dsRequestResponse,this.onDataSourceResponse),z.b.on(B.CoreEvents.dsRequestError,this.onRequestError),e.events.off(l.PanelEvents.refresh,this.onPanelRefresh)}},{key:"handleMocking",value:function(e){var t,n=this.state.mockedResponse;try{t=JSON.parse(n)}catch(e){return void z.b.emit(l.AppEvents.alertError,["R: Failed to parse mocked response"])}e.data=t}},{key:"render",value:function(){var e=this.state.allNodesExpanded,t=this.state.dsQuery,n=t.response,r=t.isLoading,o=this.getNrOfOpenNodes(),i=R(),l=Object.keys(n).length>0;return Object(H.b)(this.props.panel.plugin)?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{"aria-label":d.selectors.components.PanelInspector.Query.content},a.a.createElement("h3",{className:"section-heading"},"Query inspector"),a.a.createElement("p",{className:"small muted"},"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Hit refresh button below to trigger a new query.")),a.a.createElement("div",{className:i.toolbar},a.a.createElement(s.Button,{icon:"sync",onClick:this.onIssueNewQuery,"aria-label":d.selectors.components.PanelInspector.Query.refreshButton},"Refresh"),l&&e&&a.a.createElement(s.Button,{icon:"minus",variant:"secondary",className:i.toolbarItem,onClick:this.onToggleExpand},"Collapse all"),l&&!e&&a.a.createElement(s.Button,{icon:"plus",variant:"secondary",className:i.toolbarItem,onClick:this.onToggleExpand},"Expand all"),l&&a.a.createElement(W.a,{text:this.getTextForClipboard,onSuccess:this.onClipboardSuccess,elType:"div",className:i.toolbarItem},a.a.createElement(s.Button,{icon:"copy",variant:"secondary"},"Copy to clipboard")),a.a.createElement("div",{className:"flex-grow-1"})),a.a.createElement("div",{className:i.contentQueryInspector},r&&a.a.createElement(s.LoadingPlaceholder,{text:"Loading query inspector..."}),!r&&l&&a.a.createElement(s.JSONFormatter,{json:n,open:o,onDidRender:this.setFormattedJson}),!r&&!l&&a.a.createElement("p",{className:"muted"},"No request & response collected yet. Hit refresh button"))):null}}])&&X(n.prototype,r),o&&X(n,o),t}(r.PureComponent),re=n("t8hP"),ae=n("jYz7"),oe=n("Iab2"),ie=n("lcF4");function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(){var e=ue(["\n                    margin-bottom: 0;\n                  "]);return le=function(){return e},e}function ce(){var e=ue(["\n                    margin-bottom: 0;\n                  "]);return ce=function(){return e},e}function ue(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function pe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve,Oe=s.LegacyForms.Switch,we=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=be(this,ye(t).call(this,e))).exportCsv=function(e){var t=n.props.panel,r=n.state.transformId,a=Object(l.getTimeField)(e),o=a.timeIndex,i=a.timeField;if(i){var s=i.display;s||(s=Object(l.getDisplayProcessor)({field:i}));var c=de({},i,{type:l.FieldType.string,values:new l.FormattedVector(i.values,s)}),u=pe(e.fields);u[o]=c,e=de({},e,{fields:u})}var p=Object(l.toCSV)([e]),f=new Blob([p],{type:"application/csv;charset=utf-8"}),d=r!==l.DataTransformerID.noop?"-as-"+r.toLocaleLowerCase():"",h="".concat(t.title,"-data").concat(d,"-").concat(Object(l.dateTimeFormat)(new Date),".csv");Object(oe.saveAs)(f,h)},n.onSelectedFrameChanged=function(e){n.setState({dataFrameIndex:e.value||0})},n.onTransformationChange=function(e){n.setState({transformId:e.value,dataFrameIndex:0}),n.props.onOptionsChange(de({},n.props.options,{withTransforms:!1}))},n.renderDataOptions=function(){var e,t=n.props,r=t.options,o=t.onOptionsChange,s=t.panel,l=n.state.transformId,c=R(),u=s.getTransformations(),p=u&&u.length>0&&"join by time"!==l,f=!(null===(e=s.plugin)||void 0===e?void 0:e.fieldConfigRegistry.isEmpty());return p||f?a.a.createElement("div",{className:Object(i.cx)(c.options,c.dataDisplayOptions)},a.a.createElement(ie.a,{title:"Data display options",isOpen:!1},p&&a.a.createElement("div",{className:"gf-form-inline"},a.a.createElement(Oe,{tooltip:"Data shown in the table will be transformed using transformations defined in the panel",label:"Apply panel transformations",labelClass:"width-12",checked:!!r.withTransforms,onChange:function(){return o(de({},r,{withTransforms:!r.withTransforms}))}})),f&&a.a.createElement("div",{className:"gf-form-inline"},a.a.createElement(Oe,{tooltip:"Data shown in the table will have panel field configuration applied, for example units or display name",label:"Apply field configuration",labelClass:"width-12",checked:!!r.withFieldConfig,onChange:function(){return o(de({},r,{withFieldConfig:!r.withFieldConfig}))}})))):null},n.state={dataFrameIndex:0,transformId:l.DataTransformerID.noop,transformationOptions:(r=[{value:"Do nothing",label:"None",transformer:{id:l.DataTransformerID.noop}},{value:"join by time",label:"Join by time",transformer:{id:l.DataTransformerID.seriesToColumns,options:{byField:"Time"}}}],r)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,e),n=t,(r=[{key:"getTransformedData",value:function(){var e=this.state,t=e.transformId,n=e.transformationOptions,r=this.props.data;if(!r)return[];var a=n.find((function(e){return e.value===t}));return a&&a.transformer.id!==l.DataTransformerID.noop?Object(l.transformDataFrame)([a.transformer],r):r}},{key:"getProcessedData",value:function(){var e=this.props.options,t=this.props.data;return this.state.transformId!==l.DataTransformerID.noop&&(t=this.getTransformedData()),Object(l.applyFieldOverrides)({data:t,theme:m.a.theme,fieldConfig:e.withFieldConfig?this.props.panel.fieldConfig:{defaults:{},overrides:[]},replaceVariables:function(e){return e}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isLoading,r=t.data,o=this.state,c=o.dataFrameIndex,u=o.transformId,p=o.transformationOptions,f=R();if(n)return a.a.createElement("div",null,"Loading ",a.a.createElement(s.Icon,{name:"fa fa-spinner",className:"fa-spin",size:"lg"}));var h=this.getProcessedData();if(!h||!h.length)return a.a.createElement("div",null,"No Data");var m=h.map((function(e,t){return{value:t,label:"".concat(Object(l.getFrameDisplayName)(e)," (").concat(t,")")}}));return a.a.createElement("div",{className:f.dataTabContent,"aria-label":d.selectors.components.PanelInspector.Data.content},a.a.createElement("div",{className:f.actionsWrapper},a.a.createElement("div",{className:f.leftActions},a.a.createElement("div",{className:f.selects},r.length>1&&a.a.createElement(s.Field,{label:"Transformer",className:Object(i.css)(ce())},a.a.createElement(s.Select,{options:p,value:u,onChange:this.onTransformationChange,width:15})),m.length>1&&a.a.createElement(s.Field,{label:"Select result",className:Object(i.css)(le())},a.a.createElement(s.Select,{options:m,value:c,onChange:this.onSelectedFrameChanged,width:30}))),this.renderDataOptions()),a.a.createElement("div",{className:f.options},a.a.createElement(s.Button,{variant:"primary",onClick:function(){return e.exportCsv(h[c])}},"Download CSV"))),a.a.createElement("div",{style:{flexGrow:1}},a.a.createElement(ae.a,null,(function(e){var t=e.width,n=e.height;return 0===t?null:a.a.createElement("div",{style:{width:t,height:n}},a.a.createElement(s.Table,{width:t,height:n,data:h[c]}))}))))}}])&&me(n.prototype,r),o&&me(n,o),t}(r.PureComponent);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return ve})),n.d(t,"b",(function(){return Te})),function(e){e.Data="data",e.Meta="meta",e.Error="error",e.Stats="stats",e.JSON="json",e.Query="query"}(ve||(ve={}));var xe=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pe(this,ke(t).call(this,e))).onClose=function(){Object(re.getLocationSrv)().update({query:{inspect:null,inspectTab:null},partial:!0})},r.onToggleExpand=function(){r.setState((function(e){return{drawerWidth:"100%"===e.drawerWidth?"40%":"100%"}}))},r.onSelectTab=function(e){r.setState({currentTab:e.value||ve.Data})},r.onDataTabOptionsChange=function(e){r.setState({withTransforms:!!e.withTransforms,withFieldConfig:!!e.withFieldConfig})},r.state={isLoading:!0,last:{},data:[],currentTab:null!==(n=e.defaultTab)&&void 0!==n?n:ve.Data,drawerWidth:"50%",withTransforms:!0,withFieldConfig:!1},r}var n,r,o,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.plugin&&this.init()}},{key:"componentDidUpdate",value:function(e,t){e.plugin===this.props.plugin&&this.state.withTransforms===t.withTransforms&&this.state.withFieldConfig===t.withFieldConfig||this.init()}},{key:"init",value:function(){var e=this,t=this.props,n=t.plugin,r=t.panel,a=this.state,o=a.withTransforms,i=a.withFieldConfig;n&&!n.meta.skipDataQuery&&(this.querySubscription&&this.querySubscription.unsubscribe(),this.querySubscription=r.getQueryRunner().getData({withTransforms:o,withFieldConfig:i}).subscribe({next:function(t){return e.onUpdateData(t)}}))}},{key:"componentWillUnmount",value:function(){this.querySubscription&&this.querySubscription.unsubscribe()}},{key:"onUpdateData",value:(i=regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,p,f,d,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.series,o=t.error,i=(null===(n=t.request)||void 0===n?void 0:n.targets)||[],!a||!i.length){e.next=35;break}s=!0,c=!1,u=void 0,e.prev=7,p=a[Symbol.iterator]();case 9:if(s=(f=p.next()).done){e.next=21;break}if(!(d=f.value).meta||!d.meta.custom){e.next=18;break}return e.next=14,Object(re.getDataSourceSrv)().get(i[0].datasource);case 14:if(!((m=e.sent)&&(null===(h=m.components)||void 0===h?void 0:h.MetadataInspector))){e.next=18;break}return r=m,e.abrupt("break",21);case 18:s=!0,e.next=9;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(7),c=!0,u=e.t0;case 27:e.prev=27,e.prev=28,s||null==p.return||p.return();case 30:if(e.prev=30,!c){e.next=33;break}throw u;case 33:return e.finish(30);case 34:return e.finish(27);case 35:this.setState((function(e){return{isLoading:t.state===l.LoadingState.Loading,last:t,data:a,metaDS:r,currentTab:o?ve.Error:e.currentTab}}));case 36:case"end":return e.stop()}}),e,this,[[7,23,27,35],[28,,30,34]])})),c=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){Se(a,n,r,o,s,"next",e)}function s(e){Se(a,n,r,o,s,"throw",e)}o(void 0)}))},function(e){return c.apply(this,arguments)})},{key:"renderMetadataInspector",value:function(){var e,t=this.state,n=t.metaDS,r=t.data;return n&&(null===(e=n.components)||void 0===e?void 0:e.MetadataInspector)?a.a.createElement(n.components.MetadataInspector,{datasource:n,data:r}):a.a.createElement("div",null,"No Metadata Inspector")}},{key:"renderDataTab",value:function(){var e=this.state,t=e.last,n=e.isLoading,r=e.withFieldConfig,o=e.withTransforms;return a.a.createElement(we,{dashboard:this.props.dashboard,panel:this.props.panel,data:t.series,isLoading:n,options:{withFieldConfig:r,withTransforms:o},onOptionsChange:this.onDataTabOptionsChange})}},{key:"renderErrorTab",value:function(e){return e?e.data?a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,e.data.message),a.a.createElement(s.JSONFormatter,{json:e,open:2})):a.a.createElement("div",null,e.message):null}},{key:"renderStatsTab",value:function(){var e,t=this.state.last,n=t.request;if(!n)return null;var r=[],o=n.endTime?n.endTime-n.startTime:-1,i=(null===(e=t.timings)||void 0===e?void 0:e.dataProcessingTime)||-1,s=0,l=!0,c=!1,u=void 0;try{for(var p,f=t.series[Symbol.iterator]();!(l=(p=f.next()).done);l=!0)s+=p.value.length}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}r.push({displayName:"Total request time",value:o,unit:"ms"}),r.push({displayName:"Data processing time",value:i,unit:"ms"}),r.push({displayName:"Number of queries",value:n.targets.length}),r.push({displayName:"Total number rows",value:s});var h=[],m=!0,b=!1,y=void 0;try{for(var g,v=t.series[Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var O=g.value;O.meta&&O.meta.stats&&(h=h.concat(O.meta.stats))}}catch(e){b=!0,y=e}finally{try{m||null==v.return||v.return()}finally{if(b)throw y}}return a.a.createElement("div",{"aria-label":d.selectors.components.PanelInspector.Stats.content},this.renderStatsTable("Stats",r),this.renderStatsTable("Data source stats",h))}},{key:"renderStatsTable",value:function(e,t){if(!t||!t.length)return null;var n=this.props.dashboard;return a.a.createElement("div",{style:{paddingBottom:"16px"}},a.a.createElement("table",{className:"filter-table width-30"},a.a.createElement("tbody",null,t.map((function(e,t){return a.a.createElement("tr",{key:"".concat(e.displayName,"-").concat(t)},a.a.createElement("td",null,e.displayName),a.a.createElement("td",{style:{textAlign:"right"}},function(e,t){var n=Object(l.getDisplayProcessor)({field:{type:l.FieldType.number,config:e},theme:m.a.theme,timeZone:t});return Object(l.formattedValueToString)(n(e.value))}(e,n.getTimezone())))})))))}},{key:"drawerSubtitle",value:function(e,t){var n=this.state.last;return a.a.createElement(u,{tabs:e,tab:t,panelData:n,onSelectTab:this.onSelectTab})}},{key:"getTabs",value:function(){var e=this.props,t=e.dashboard,n=e.plugin,r=this.state.last,a=null==r?void 0:r.error,o=[];return Object(H.b)(n)&&(o.push({label:"Data",value:ve.Data}),o.push({label:"Stats",value:ve.Stats})),this.state.metaDS&&o.push({label:"Meta Data",value:ve.Meta}),o.push({label:"JSON",value:ve.JSON}),a&&a.message&&o.push({label:"Error",value:ve.Error}),t.meta.canEdit&&Object(H.b)(n)&&o.push({label:"Query",value:ve.Query}),o}},{key:"render",value:function(){var e=this.props,t=e.panel,n=e.dashboard,r=e.plugin,o=this.state.currentTab;if(!r)return null;var i=this.state,l=i.last,c=i.drawerWidth,u=R(),p=null==l?void 0:l.error,f=this.getTabs(),d=o;return f.find((function(e){return e.value===o}))||(d=ve.JSON),a.a.createElement(s.Drawer,{title:"Inspect: ".concat(t.title)||!1,subtitle:this.drawerSubtitle(f,d),width:c,onClose:this.onClose,expandable:!0},d===ve.Data&&this.renderDataTab(),a.a.createElement(s.CustomScrollbar,{autoHeightMin:"100%"},a.a.createElement(s.TabContent,{className:u.tabContent},d===ve.Meta&&this.renderMetadataInspector(),d===ve.JSON&&a.a.createElement(Q,{panel:t,dashboard:n,data:l,onClose:this.onClose}),d===ve.Error&&this.renderErrorTab(p),d===ve.Stats&&this.renderStatsTab(),d===ve.Query&&a.a.createElement(ne,{panel:t}))))}}])&&je(n.prototype,r),o&&je(n,o),t}(r.PureComponent);var Te=Object(o.connect)((function(e,t){var n=e.dashboard.panels[t.panel.id];return n?{plugin:n.plugin}:{plugin:null}}))(xe)},sCrc:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("eLz+"),a=n("eXZ6");function o(e,t,n,o){if(e===r.a.Fill)return{width:t,height:n};var i=(window.innerWidth-4*a.e)/a.f*o.gridPos.w,s=a.d*o.gridPos.h,l=Math.min(t/i,n/s);return e===r.a.Exact&&i<=t&&s<=n?{width:i,height:s}:{width:i*l,height:s*l}}function i(e){return!1===(null==e?void 0:e.meta.skipDataQuery)}}}]);
//# sourceMappingURL=default~DashboardPage~SoloPanelPage.017a0d1a58b1119d038d.js.map