{"version":3,"sources":["webpack:///./public/app/features/profile/ChangePasswordForm.tsx","webpack:///./public/app/features/profile/ChangePasswordPage.tsx"],"names":["ChangePasswordForm","onChangePassword","isSaving","ldapEnabled","config","authProxyEnabled","className","css","onSubmit","register","errors","getValues","label","invalid","oldPassword","error","message","type","name","ref","required","newPassword","validate","confirm","v","confirmNew","old","variant","disabled","href","appSubUrl","ChangePasswordPage","navModel","this","props","states","changePassword","Contents","PureComponent","hot","module","connect","state","getNavModel","navIndex"],"mappings":"wYAWO,IAAMA,EAAgC,SAAC,GAAmC,IAAjCC,EAAiC,EAAjCA,iBAAkBC,EAAe,EAAfA,SACxDC,EAAkCC,IAAlCD,YAAaE,EAAqBD,IAArBC,iBAErB,OAAIF,GAAeE,EACV,4GAGP,yBACEC,UAAWC,cAAF,MAIT,kBAAC,OAAD,CAAMC,SAAUP,IACb,YAAqC,UAAlCQ,EAAkC,EAAlCA,SAAUC,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,UACpB,OACE,oCACE,kBAAC,QAAD,CAAOC,MAAM,eAAeC,UAAWH,EAAOI,YAAaC,MAAOL,aAAF,YAAEA,EAAQI,mBAAV,aAAE,EAAqBE,SACrF,kBAAC,QAAD,CAAOC,KAAK,WAAWC,KAAK,cAAcC,IAAKV,EAAS,CAAEW,SAAU,gCAGtE,kBAAC,QAAD,CAAOR,MAAM,eAAeC,UAAWH,EAAOW,YAAaN,MAAOL,aAAF,YAAEA,EAAQW,mBAAV,aAAE,EAAqBL,SACrF,kBAAC,QAAD,CACEC,KAAK,WACLC,KAAK,cACLC,IAAKV,EAAS,CACZW,SAAU,2BACVE,SAAU,CACRC,QAAS,SAAAC,GAAC,OAAIA,IAAMb,IAAYc,YAAc,wBAC9CC,IAAK,SAAAF,GAAC,OAAIA,IAAMb,IAAYG,aAAlB,wDAMlB,kBAAC,QAAD,CAAOF,MAAM,mBAAmBC,UAAWH,EAAOe,WAAYV,MAAOL,aAAF,YAAEA,EAAQe,kBAAV,aAAE,EAAoBT,SACvF,kBAAC,QAAD,CACEC,KAAK,WACLC,KAAK,aACLC,IAAKV,EAAS,CACZW,SAAU,wCACVE,SAAU,SAAAE,GAAC,OAAIA,IAAMb,IAAYU,aAAe,6BAItD,kBAAC,kBAAD,KACE,kBAAC,SAAD,CAAQM,QAAQ,UAAUC,SAAU1B,GAApC,mBAGA,kBAAC,aAAD,CAAYyB,QAAQ,YAAYE,KAAI,UAAKzB,IAAO0B,UAAZ,aAApC,kB,8kCC7CT,IAAMC,EAAb,6E,UAAA,O,kOAAA,M,EAAA,G,EAAA,gCACW,IACCC,EAAaC,KAAKC,MAAlBF,SACR,OACE,kBAAC,IAAD,CAAMA,SAAUA,GACd,kBAAC,IAAD,MACG,WAAqBG,GAArB,IAAGC,EAAH,EAAGA,eAAH,OACC,kBAAC,IAAKC,SAAN,KACE,wBAAI/B,UAAU,oBAAd,wBACA,kBAAC,IAAD,CAAoBL,iBAAkBmC,EAAgBlC,SAAUiC,EAAOC,2B,2BATrF,GAAwCE,iBA0BzBC,wBAAIC,EAAJD,CAAYE,mBAR3B,SAAyBC,GACvB,MAAO,CACLV,SAAUW,YAAYD,EAAME,SAAP,sBAIE,GAEAH,CAA6CV,K","file":"65.017a0d1a58b1119d038d.js","sourcesContent":["import React, { FC } from 'react';\nimport config from 'app/core/config';\nimport { Button, LinkButton, Form, Field, Input, HorizontalGroup } from '@grafana/ui';\nimport { ChangePasswordFields } from 'app/core/utils/UserProvider';\nimport { css } from 'emotion';\n\nexport interface Props {\n  isSaving: boolean;\n  onChangePassword: (payload: ChangePasswordFields) => void;\n}\n\nexport const ChangePasswordForm: FC<Props> = ({ onChangePassword, isSaving }) => {\n  const { ldapEnabled, authProxyEnabled } = config;\n\n  if (ldapEnabled || authProxyEnabled) {\n    return <p>You cannot change password when ldap or auth proxy authentication is enabled.</p>;\n  }\n  return (\n    <div\n      className={css`\n        max-width: 400px;\n      `}\n    >\n      <Form onSubmit={onChangePassword}>\n        {({ register, errors, getValues }) => {\n          return (\n            <>\n              <Field label=\"Old password\" invalid={!!errors.oldPassword} error={errors?.oldPassword?.message}>\n                <Input type=\"password\" name=\"oldPassword\" ref={register({ required: 'Old password is required' })} />\n              </Field>\n\n              <Field label=\"New password\" invalid={!!errors.newPassword} error={errors?.newPassword?.message}>\n                <Input\n                  type=\"password\"\n                  name=\"newPassword\"\n                  ref={register({\n                    required: 'New password is required',\n                    validate: {\n                      confirm: v => v === getValues().confirmNew || 'Passwords must match',\n                      old: v => v !== getValues().oldPassword || `New password can't be the same as the old one.`,\n                    },\n                  })}\n                />\n              </Field>\n\n              <Field label=\"Confirm password\" invalid={!!errors.confirmNew} error={errors?.confirmNew?.message}>\n                <Input\n                  type=\"password\"\n                  name=\"confirmNew\"\n                  ref={register({\n                    required: 'New password confirmation is required',\n                    validate: v => v === getValues().newPassword || 'Passwords must match',\n                  })}\n                />\n              </Field>\n              <HorizontalGroup>\n                <Button variant=\"primary\" disabled={isSaving}>\n                  Change Password\n                </Button>\n                <LinkButton variant=\"secondary\" href={`${config.appSubUrl}/profile`}>\n                  Cancel\n                </LinkButton>\n              </HorizontalGroup>\n            </>\n          );\n        }}\n      </Form>\n    </div>\n  );\n};\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { StoreState } from 'app/types';\nimport { NavModel } from '@grafana/data';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { UserProvider } from 'app/core/utils/UserProvider';\nimport Page from 'app/core/components/Page/Page';\nimport { ChangePasswordForm } from './ChangePasswordForm';\n\nexport interface Props {\n  navModel: NavModel;\n}\n\nexport class ChangePasswordPage extends PureComponent<Props> {\n  render() {\n    const { navModel } = this.props;\n    return (\n      <Page navModel={navModel}>\n        <UserProvider>\n          {({ changePassword }, states) => (\n            <Page.Contents>\n              <h3 className=\"page-sub-heading\">Change Your Password</h3>\n              <ChangePasswordForm onChangePassword={changePassword} isSaving={states.changePassword} />\n            </Page.Contents>\n          )}\n        </UserProvider>\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState) {\n  return {\n    navModel: getNavModel(state.navIndex, `change-password`),\n  };\n}\n\nconst mapDispatchToProps = {};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(ChangePasswordPage));\n"],"sourceRoot":""}