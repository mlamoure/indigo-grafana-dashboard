(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1529:function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return E}),n.d(t,"g",function(){return y}),n.d(t,"e",function(){return w}),n.d(t,"h",function(){return x}),n.d(t,"i",function(){return C}),n.d(t,"k",function(){return T}),n.d(t,"j",function(){return I}),n.d(t,"m",function(){return L}),n.d(t,"n",function(){return j}),n.d(t,"o",function(){return R}),n.d(t,"p",function(){return q}),n.d(t,"q",function(){return D}),n.d(t,"r",function(){return A}),n.d(t,"s",function(){return U}),n.d(t,"t",function(){return F}),n.d(t,"c",function(){return H}),n.d(t,"l",function(){return G});var a=n(1),r=n(2),o=n.n(r),i=n(5),s=n.n(i),l=n(65),c=n(92),u=n(67),p=n(31),m=n(89),d=n(39),h=n(1530),f=function(e,t){return function(n){n(Object(d.J)(a.a({exploreId:e},t))),n(M())}};function g(e,t){return function(n,a){var r=Object(u.h)(a().explore[e].queries,t);n(Object(d.b)({exploreId:e,index:t,query:r}))}}function v(e,t){var n=this;return function(r,o){return a.b(n,void 0,void 0,function(){var n,i,s;return a.d(this,function(a){switch(a.label){case 0:return n=null,t?[3,2]:[4,Object(c.a)().get()];case 1:return n=a.sent(),[3,4];case 2:return[4,Object(c.a)().get(t)];case 3:n=a.sent(),a.label=4;case 4:return i=o().explore[e].datasourceInstance,s=o().explore[e].queries,[4,r(k(e,s,i,n))];case 5:return a.sent(),r(Object(d.I)({exploreId:e,datasourceInstance:n})),[4,r(O(e,n))];case 6:return a.sent(),r(L(e)),[2]}})})}}function b(e,t,n,r){return function(o,i){null===t&&(t=a.a({},Object(u.h)(i().explore[e].queries))),o(Object(d.c)({exploreId:e,query:t,index:n,override:r})),r&&o(L(e))}}function E(e,t){var n=t.height,a=t.width;return Object(d.e)({exploreId:e,height:n,width:a})}function y(e,t){return function(n,a){var r=Object(h.a)(a().user),o=Object(u.l)(r,t);n(Object(d.f)({exploreId:e,range:o})),n(L(e))}}function w(e,t){return Object(d.d)({exploreId:e,refreshInterval:t})}function x(e){return function(t){t(Object(d.x)({exploreId:e})),t(Object(d.g)({exploreId:e})),t(M())}}function C(e,t,n,r,o,i,s){var l=this;return function(p,m){return a.b(l,void 0,void 0,function(){var l,f;return a.d(this,function(a){return l=Object(h.a)(m().user),f=Object(u.l)(l,r),p(function(e,t){return function(n){var a=Object(c.a)().getExternal().map(function(e){return{value:e.name,name:e.name,meta:e.meta}});n(Object(d.m)({exploreId:e,exploreDatasources:a})),a.length>=1?n(v(e,t)):n(Object(d.j)({exploreId:e}))}}(e,t)),p(Object(d.i)({exploreId:e,containerWidth:o,eventBridge:i,queries:n,range:f,ui:s})),[2]})})}}var S=function(e,t){var n="grafana.explore.history."+t.meta.id,a=l.a.getObject(n,[]);return l.a.set(u.c,t.name),Object(d.l)({exploreId:e,history:a})};function k(e,t,n,r){var o=this;return function(i){return a.b(o,void 0,void 0,function(){var o,s;return a.d(this,function(l){switch(l.label){case 0:return n?(o=t,n.meta.id!==r.meta.id?[3,1]:(o=a.h(t),[3,4])):(i(Object(d.o)({exploreId:e,queries:t})),[2]);case 1:return r.importQueries?[4,r.importQueries(t,n.meta)]:[3,3];case 2:return o=l.sent(),[3,4];case 3:o=Object(u.g)(),l.label=4;case 4:return s=o.map(function(e,n){return a.a({},e,Object(u.h)(t))}),i(Object(d.o)({exploreId:e,queries:s})),[2]}})})}}var N=function(e,t){return function(n){return a.b(void 0,void 0,void 0,function(){var r,o,i;return a.d(this,function(a){switch(a.label){case 0:r=null,n(Object(d.C)({exploreId:e})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t.testDatasource()];case 2:return o=a.sent(),r="success"===o.status?null:o.message,[3,4];case 3:return i=a.sent(),r=i&&i.statusText||"Network error",[3,4];case 4:return r?(n(Object(d.B)({exploreId:e,error:r})),[2]):(n(Object(d.D)({exploreId:e})),[2])}})})}},T=function(e){return function(t,n){return a.b(void 0,void 0,void 0,function(){var r;return a.d(this,function(a){return r=n().explore[e].datasourceInstance,t(v(e,r.name)),[2]})})}};function O(e,t){var n=this;return function(r,o){return a.b(n,void 0,void 0,function(){var n;return a.d(this,function(a){switch(a.label){case 0:return n=t.name,r(Object(d.k)({exploreId:e,requestedDatasourceName:n})),[4,r(N(e,t))];case 1:return a.sent(),n!==o().explore[e].requestedDatasourceName?[2]:(t.init&&t.init(),n!==o().explore[e].requestedDatasourceName?[2]:(r(S(e,t)),[2]))}})})}}function I(e,t,n,a){return function(r){r(Object(d.n)({exploreId:e,modification:t,index:n,modifier:a})),t.preventSubmit||r(L(e))}}function L(e,t){return void 0===t&&(t=!1),function(n,a){var r=a().explore[e],o=r.datasourceInstance,i=r.queries,s=r.showingLogs,l=r.showingGraph,c=r.showingTable,p=r.supportsGraph,m=r.supportsLogs,f=r.supportsTable,g=r.datasourceError,v=r.containerWidth,b=r.range;if(g)return Promise.resolve();if(!Object(u.n)(i))return n(Object(d.g)({exploreId:e})),n(M()),Promise.resolve();var E=o.interval,y=Object(h.a)(a().user),w=Object(u.l)(y,b.raw);n(Object(d.u)({exploreId:e,range:w}));var x=(t||c)&&f?n(_(e,"Table",{interval:E,format:"table",instant:!0,valueWithRefId:!0},function(e){return e[0]})):void 0,C=(t||l)&&p?n(_(e,"Graph",{interval:E,format:"time_series",instant:!1,maxDataPoints:v},u.o)):void 0,S=(t||s)&&m?n(_(e,"Logs",{interval:E,format:"logs"})):void 0;return n(M()),Promise.all([x,C,S])}}function _(e,t,n,r){var i=this;return function(s,l){return a.b(i,void 0,void 0,function(){var i,c,p,m,h,f,g,v,b,E=this;return a.d(this,function(y){return i=l().explore[e],c=i.datasourceInstance,p=i.eventBridge,m=i.queries,h=i.queryIntervals,f=i.range,g=i.scanning,v=c.meta.id,b=m.map(function(i,b){return a.b(E,void 0,void 0,function(){var E,y,w,x,C,S,k;return a.d(this,function(N){switch(N.label){case 0:E=Object(u.d)(i,b,t,n,f,h,g),s(Object(d.q)({exploreId:e,resultType:t,rowIndex:b,transaction:E})),N.label=1;case 1:return N.trys.push([1,3,,4]),y=Date.now(),[4,c.query(E.options)];case 2:return w=N.sent(),p.emit("data-received",w.data||[]),x=Date.now()-y,C=l().explore[e].queryTransactions,S=r?r(w.data,E,C):w.data,s(function(e,t,n,r,i,s){return function(l,c){var p=c().explore[e],m=p.datasourceInstance,h=p.history,f=p.queryTransactions,g=p.scanner,v=p.scanning;if(m.meta.id===s){var b=f.find(function(e){return e.id===t});if(b){var E;m.getQueryHints&&(E=m.getQueryHints(b.query,n));var y=f.map(function(e){return e.id===t?a.a({},e,{hints:E,latency:r,result:n,done:!0}):e}),w=Object(u.r)(h,s,i);if(l(Object(d.r)({exploreId:e,history:w,queryTransactions:y})),v)if(0===o.a.size(n)){if(!y.find(function(e){return e.scanning&&!e.done})){var x=g();l(Object(d.v)({exploreId:e,range:x}))}}else l(Object(d.x)({exploreId:e}))}}}}(e,E.id,S,x,m,v)),[3,4];case 3:return k=N.sent(),p.emit("data-error",k),s(function(e,t,n,r){return function(o,i){var s=i().explore[e],l=s.datasourceInstance,c=s.queryTransactions;if(l.meta.id===r&&!n.cancelled&&c.find(function(e){return e.id===t})){var u,p;if(console.error(n),n.data)if("string"==typeof n.data)u=n.data;else{if(!n.data.error)throw new Error("Could not handle error response");u=n.data.error,n.data.response&&(p=n.data.response)}else u=n.message?n.message:"string"==typeof n?n:"Unknown error during query transaction. Please check JS console logs.";var m=c.map(function(e){return e.id===t?a.a({},e,{error:u,errorDetails:p,done:!0}):e});o(Object(d.p)({exploreId:e,queryTransactions:m}))}}}(e,E.id,k,v)),[3,4];case 4:return[2]}})})}),[2,Promise.all(b)]})})}}function j(e,t){return function(n){n(Object(d.w)({exploreId:e,scanner:t}));var a=t();n(Object(d.v)({exploreId:e,range:a}))}}function R(e,t){return function(n,r){var o=t.map(function(t){return a.a({},t,Object(u.h)(r().explore[e].queries))});n(Object(d.y)({exploreId:e,queries:o})),n(L(e))}}function q(e){return function(t){t(Object(d.z)({itemId:e})),t(M())}}function D(){return function(e,t){var n=t().explore[m.a.left],r=t().location.query[m.a.left],o=Object(u.p)(r),i=a.a({},n,{queryTransactions:[],queries:n.queries.slice(),exploreId:m.a.right,urlState:o});e(Object(d.A)({itemState:i})),e(M())}}var P=function(e){var t=e.raw.from;s.a.isMoment(t)&&(t=t.valueOf().toString(10));var n=e.raw.to;return s.a.isMoment(n)&&(n=n.valueOf().toString(10)),{from:t,to:n}};function M(){return function(e,t){var n=t().explore,a=n.left,r=n.right,o=n.split,i={},s={datasource:a.datasourceInstance.name,queries:a.queries.map(u.f),range:P(a.range),ui:{showingGraph:a.showingGraph,showingLogs:a.showingLogs,showingTable:a.showingTable,dedupStrategy:a.dedupStrategy}};if(i.left=Object(u.q)(s,!0),o){var l={datasource:r.datasourceInstance.name,queries:r.queries.map(u.f),range:P(r.range),ui:{showingGraph:r.showingGraph,showingLogs:r.showingLogs,showingTable:r.showingTable,dedupStrategy:r.dedupStrategy}};i.right=Object(u.q)(l,!0)}e(Object(p.c)({query:i}))}}var Q=function(e){return function(t,n){return function(a){var r,o=!n;switch(e.type){case d.E.type:r={showingGraph:!n};break;case d.G.type:r={showingLogs:!n};break;case d.H.type:r={showingTable:!n}}a(e({exploreId:t})),a(f(t,r)),o&&a(L(t))}}},A=Q(d.E),U=Q(d.G),F=Q(d.H),H=function(e,t){return function(n){n(f(e,{dedupStrategy:t}))}};function G(e){return function(t,n){var r=n().explore[e];if(r.initialized){var o=r.urlState,i=r.update,s=r.containerWidth,l=r.eventBridge,c=o.datasource,p=o.queries,m=o.range,f=o.ui,g=p.map(function(e){return a.a({},e,Object(u.h)(r.queries))}),v=Object(h.a)(n().user),b=Object(u.m)(m,v);if(i.datasource){var E=Object(u.g)(p);t(C(e,c,E,b,s,l,f))}else i.range&&t(Object(d.f)({exploreId:e,range:b})),i.ui&&t(Object(d.J)(a.a({},f,{exploreId:e}))),i.queries&&t(Object(d.y)({exploreId:e,queries:g})),(i.queries||i.ui||i.range)&&t(L(e))}}}},1530:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(3),r=function(e){return Object(a.parseTimeZone)(e.timeZone)}},1531:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickToggle=function(){return t.props.onToggle(!t.props.isOpen)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.isOpen,n=t?"fa fa-caret-up":"fa fa-caret-down",a=e.loading?"explore-panel__loader explore-panel__loader--active":"explore-panel__loader";return o.a.createElement("div",{className:"explore-panel panel-container"},o.a.createElement("div",{className:"explore-panel__header",onClick:this.onClickToggle},o.a.createElement("div",{className:"explore-panel__header-buttons"},o.a.createElement("span",{className:n})),o.a.createElement("div",{className:"explore-panel__header-label"},this.props.label)),t&&o.a.createElement("div",{className:"explore-panel__body"},o.a.createElement("div",{className:a}),this.props.children))},t}(r.PureComponent);t.a=i},1532:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={error:null,errorInfo:null},n}return a.c(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},t.prototype.render=function(){return this.state.errorInfo?o.a.createElement("div",{className:"explore-container"},o.a.createElement("h3",null,"An unexpected error happened."),o.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),o.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children},t}(r.Component);t.a=i},1533:function(e,t,n){"use strict";var a=n(1),r=n(10),o=n.n(r),i=n(0),s=n.n(i),l=(n(244),n(461),n(460),n(462),n(13)),c=n.n(l),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLabel=function(e){return t.props.onClickLabel(t.props.series,e)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.hidden,n=e.series,a=c()({"graph-legend-series-hidden":t});return s.a.createElement("div",{className:"graph-legend-series "+a},s.a.createElement("div",{className:"graph-legend-icon"},s.a.createElement("i",{className:"fa fa-minus pointer",style:{color:n.color}})),s.a.createElement("a",{className:"graph-legend-alias pointer",title:n.alias,onClick:this.onClickLabel},n.alias))},t}(i.PureComponent),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLabel=function(e,n){(0,t.props.onToggleSeries)(e,!(n.ctrlKey||n.metaKey||n.shiftKey))},t}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.data,a=t.hiddenSeries,r=n||[];return s.a.createElement("div",{className:"graph-legend ps"},r.map(function(t,n){return s.a.createElement(u,{hidden:a.has(t.alias),key:t.id+"-"+n,onClickLabel:e.onClickLabel,series:t})}))},t.defaultProps={onToggleSeries:function(){}},t}(i.PureComponent);function m(e,t,n){if(t&&n&&e){var a=n-t,r=a/e/1e3;return r<=45?"%H:%M:%S":r<=7200||a<=864e5?"%H:%M":r<=8e4?"%m/%d %H:%M":r<=2419200||a<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"}var d={legend:{show:!1},series:{lines:{linewidth:1,zero:!1},shadowSize:0},grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0},selection:{mode:"x",color:"#666"}},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dynamicOptions=null,t.state={hiddenSeries:new Set,showAllTimeSeries:!1},t.onPlotSelected=function(e,n){t.props.onChangeTime&&t.props.onChangeTime({from:n.xaxis.from,to:n.xaxis.to})},t.onShowAllTimeSeries=function(){t.setState({showAllTimeSeries:!0},t.draw)},t.onToggleSeries=function(e,n){t.setState(function(t,a){var r=a.data,o=a.onToggleSeries,i=t.hiddenSeries,s=i.size===new Set(r.map(function(e){return e.alias})).size-1,l=new Set;if(n)!i.has(e.alias)&&s||(l=new Set(r.filter(function(t){return t.alias!==e.alias}).map(function(e){return e.alias})));else{var c=new Set(r.map(function(e){return e.alias}));(l=function(e,t){for(var n=new Set,a=t.values();;){var r=a.next(),o=r.value;if(r.done)return n;e.has(o)&&n.add(o)}}(new Set(i),c)).has(e.alias)?l.delete(e.alias):l.add(e.alias)}return o&&o(e.alias,l),{hiddenSeries:l}},t.draw)},t}return a.c(t,e),t.prototype.getGraphData=function(){var e=this.props.data;return this.state.showAllTimeSeries?e:e.slice(0,20)},t.prototype.componentDidMount=function(){this.draw(),this.$el=o()("#"+this.props.id),this.$el.bind("plotselected",this.onPlotSelected)},t.prototype.componentDidUpdate=function(e,t){e.data===this.props.data&&e.range===this.props.range&&e.split===this.props.split&&e.height===this.props.height&&e.width===this.props.width&&function(e,t){if(e.size!==t.size)return!1;for(var n=e.values();;){var a=n.next(),r=a.value;if(a.done)return!0;if(!t.has(r))return!1}}(t.hiddenSeries,this.state.hiddenSeries)||this.draw()},t.prototype.componentWillUnmount=function(){this.$el.unbind("plotselected",this.onPlotSelected)},t.prototype.getDynamicOptions=function(){var e=this.props,t=e.range,n=e.width,a=e.timeZone,r=(n||0)/100,o=t.from,i=t.to;return{xaxis:{mode:"time",min:o,max:i,label:"Datetime",ticks:r,timezone:a.raw,timeformat:m(r,o,i)}}},t.prototype.draw=function(){var e=this.props.userOptions,t=void 0===e?{}:e,n=this.state.hiddenSeries,r=this.getGraphData(),i=o()("#"+this.props.id),s=[{data:[[0,0]]}];r&&r.length>0&&(s=r.filter(function(e){return!n.has(e.alias)}).map(function(e){return{color:e.color,label:e.label,data:e.getFlotPairs("null")}})),this.dynamicOptions=this.getDynamicOptions();var l=a.a({},d,this.dynamicOptions,t);o.a.plot(i,s,l)},t.prototype.render=function(){var e=this.props,t=e.height,n=void 0===t?100:t,a=e.id,r=void 0===a?"graph":a,o=this.state.hiddenSeries,i=this.getGraphData();return s.a.createElement(s.a.Fragment,null,this.props.data&&this.props.data.length>20&&!this.state.showAllTimeSeries&&s.a.createElement("div",{className:"time-series-disclaimer"},s.a.createElement("i",{className:"fa fa-fw fa-warning disclaimer-icon"}),"Showing only 20 time series. ",s.a.createElement("span",{className:"show-all-time-series",onClick:this.onShowAllTimeSeries},"Show all "+this.props.data.length)),s.a.createElement("div",{id:r,className:"explore-graph",style:{height:n}}),s.a.createElement(p,{data:i,hiddenSeries:o,onToggleSeries:this.onToggleSeries}))},t}(i.PureComponent);t.a=h},1534:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),i=n(37),s=n(23),l=n(202),c=n(65),u=n(1535),p=n(1532),m=n(1536),d=n(1537),h=n(1538),f=n(1541),g=n(1529),v=n(67),b=n(167),E=n(1543),y=n(39),w=n(1545),x=n(262),C=n(1530),S=function(e){function t(t){var n=e.call(this,t)||this;return n.getRef=function(e){n.el=e},n.onChangeTime=function(e,t){n.props.scanning&&!t&&n.onStopScanning(),n.props.changeTime(n.props.exploreId,e)},n.onClickExample=function(e){n.props.setQueries(n.props.exploreId,[e])},n.onClickLabel=function(e,t){n.onModifyQueries({type:"ADD_FILTER",key:e,value:t})},n.onModifyQueries=function(e,t){var a=n.props.datasourceInstance;if(a&&a.modifyQuery){n.props.modifyQueries(n.props.exploreId,e,t,function(e,t){return a.modifyQuery(e,t)})}},n.onResize=function(e){n.props.changeSize(n.props.exploreId,e)},n.onStartScanning=function(){var e=n.scanPreviousRange;n.props.scanStart(n.props.exploreId,e)},n.scanPreviousRange=function(){return n.timepickerRef.current.move(-1,!0)},n.onStopScanning=function(){n.props.scanStopAction({exploreId:n.props.exploreId})},n.refreshExplore=function(){var e=n.props,t=e.exploreId,a=e.update;(a.queries||a.ui||a.range||a.datasource)&&n.props.refreshExplore(t)},n.renderEmptyState=function(){return o.a.createElement("div",{className:"explore-container"},o.a.createElement(w.a,null))},n.onReconnect=function(e){var t=n.props,a=t.exploreId,r=t.reconnectDatasource;e.preventDefault(),r(a)},n.exploreEvents=new b.a,n.timepickerRef=o.a.createRef(),n}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.initialized,n=e.exploreId,a=e.initialDatasource,r=e.initialQueries,o=e.initialRange,i=e.initialUI,s=this.el?this.el.offsetWidth:0;t||this.props.initializeExplore(n,a,r,o,s,this.exploreEvents,i)},t.prototype.componentWillUnmount=function(){this.exploreEvents.removeAllListeners()},t.prototype.componentDidUpdate=function(e){this.refreshExplore()},t.prototype.render=function(){var e=this,t=this.props,n=t.StartPage,a=t.datasourceInstance,r=t.datasourceError,i=t.datasourceLoading,s=t.datasourceMissing,c=t.exploreId,g=t.showingStartPage,v=t.split,b=t.supportsGraph,y=t.supportsLogs,w=t.supportsTable,C=t.queryKeys,S=v?"explore explore-split":"explore";return o.a.createElement("div",{className:S,ref:this.getRef},o.a.createElement(E.a,{exploreId:c,timepickerRef:this.timepickerRef,onChangeTime:this.onChangeTime}),i?o.a.createElement("div",{className:"explore-container"},"Loading datasource..."):null,s?this.renderEmptyState():null,o.a.createElement(x.a,{duration:r?150:5,in:!!r},o.a.createElement("div",{className:"explore-container"},o.a.createElement(u.a,{message:"Error connecting to datasource: "+r,button:{text:"Reconnect",onClick:this.onReconnect}}))),a&&o.a.createElement("div",{className:"explore-container"},o.a.createElement(h.a,{exploreEvents:this.exploreEvents,exploreId:c,queryKeys:C}),o.a.createElement(l.a,{onResize:this.onResize,disableHeight:!0},function(t){var a=t.width;return 0===a?null:o.a.createElement("main",{className:"m-t-2",style:{width:a}},o.a.createElement(p.a,null,g&&o.a.createElement(n,{onClickExample:e.onClickExample}),!g&&o.a.createElement(o.a.Fragment,null,b&&!y&&o.a.createElement(m.a,{width:a,exploreId:c}),w&&o.a.createElement(f.a,{exploreId:c,onClickCell:e.onClickLabel}),y&&o.a.createElement(d.a,{width:a,exploreId:c,onClickLabel:e.onClickLabel,onStartScanning:e.onStartScanning,onStopScanning:e.onStopScanning}))))})))},t}(o.a.PureComponent);var k={changeSize:g.f,changeTime:g.g,initializeExplore:g.i,modifyQueries:g.j,reconnectDatasource:g.k,refreshExplore:g.l,scanStart:g.n,scanStopAction:y.x,setQueries:g.o};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore,r=a.split,o=a[n],i=Object(C.a)(e.user),s=o.StartPage,l=o.datasourceError,u=o.datasourceInstance,p=o.datasourceLoading,m=o.datasourceMissing,d=o.initialized,h=o.showingStartPage,f=o.supportsGraph,g=o.supportsLogs,b=o.supportsTable,E=o.queryKeys,y=o.urlState,w=o.update,x=y||{},S=x.datasource,k=x.queries,N=x.range,T=x.ui;return{StartPage:s,datasourceError:l,datasourceInstance:u,datasourceLoading:p,datasourceMissing:m,initialized:d,showingStartPage:h,split:r,supportsGraph:f,supportsLogs:g,supportsTable:b,queryKeys:E,update:w,initialDatasource:S||c.a.get(v.c),initialQueries:Object(v.g)(k),initialRange:N?Object(v.m)(N,i).raw:v.a,initialUI:T||v.b}},k)(S))}).call(this,n(73)(e))},1535:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),r=n.n(a),o=function(e){var t=e.message,n=e.button;return r.a.createElement("div",{className:"alert-container"},r.a.createElement("div",{className:"alert-error alert"},r.a.createElement("div",{className:"alert-icon"},r.a.createElement("i",{className:"fa fa-exclamation-triangle"})),r.a.createElement("div",{className:"alert-body"},r.a.createElement("div",{className:"alert-title"},t)),n&&r.a.createElement("div",{className:"alert-button"},r.a.createElement("button",{className:"btn btn-outline-danger",onClick:n.onClick},n.text))))}},1536:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),i=n(37),s=n(23),l=n(5),c=n.n(l),u=n(1529),p=n(1533),m=n(1531),d=n(1530),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickGraphButton=function(){t.props.toggleGraph(t.props.exploreId,t.props.showingGraph)},t.onChangeTime=function(e){var n=t.props,a=n.exploreId,r=n.timeZone;(0,n.changeTime)(a,{from:r.isUtc?c.a.utc(e.from):c()(e.from),to:r.isUtc?c.a.utc(e.to):c()(e.to)})},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.exploreId,n=e.graphResult,a=e.loading,r=e.showingGraph,i=e.showingTable,s=e.range,l=e.split,c=e.width,u=e.timeZone,d=r&&i?200:400,h={from:s.from.valueOf(),to:s.to.valueOf()};return n?o.a.createElement(m.a,{label:"Graph",isOpen:r,loading:a,onToggle:this.onClickGraphButton},o.a.createElement(p.a,{data:n,height:d,id:"explore-graph-"+t,onChangeTime:this.onChangeTime,range:h,timeZone:u,split:l,width:c})):null},t}(r.PureComponent);var f={toggleGraph:u.r,changeTime:u.g};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore,r=a.split,o=a[n],i=o.graphResult,s=o.queryTransactions,l=o.range,c=o.showingGraph,u=o.showingTable;return{graphResult:i,loading:s.some(function(e){return"Graph"===e.resultType&&!e.done}),range:l,showingGraph:c,showingTable:u,split:r,timeZone:Object(d.a)(e.user)}},f)(h))}).call(this,n(73)(e))},1537:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),i=n(37),s=n(23),l=n(5),c=n.n(l),u=n(364),p=n(1529),m=n(1546),d=n(1531),h=n(39),f=n(1547),g=n(1530),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChangeTime=function(e){var n=t.props,a=n.exploreId,r=n.timeZone;(0,n.changeTime)(a,{from:r.isUtc?c.a.utc(e.from):c()(e.from),to:r.isUtc?c.a.utc(e.to):c()(e.to)})},t.onClickLogsButton=function(){t.props.toggleLogs(t.props.exploreId,t.props.showingLogs)},t.handleDedupStrategyChange=function(e){t.props.changeDedupStrategy(t.props.exploreId,e)},t.hangleToggleLogLevel=function(e){var n=t.props.exploreId;t.props.toggleLogLevelAction({exploreId:n,hiddenLogLevels:e})},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.exploreId,n=e.loading,a=e.logsHighlighterExpressions,r=e.logsResult,i=e.dedupedResult,s=e.onClickLabel,l=e.onStartScanning,c=e.onStopScanning,p=e.range,h=e.timeZone,f=e.showingLogs,g=e.scanning,v=e.scanRange,b=e.width,E=e.hiddenLogLevels;return o.a.createElement(d.a,{label:"Logs",loading:n,isOpen:f,onToggle:this.onClickLogsButton},o.a.createElement(m.a,{dedupStrategy:this.props.dedupStrategy||u.b.none,data:r,dedupedData:i,exploreId:t,highlighterExpressions:a,loading:n,onChangeTime:this.onChangeTime,onClickLabel:s,onStartScanning:l,onStopScanning:c,onDedupStrategyChange:this.handleDedupStrategyChange,onToggleLogLevel:this.hangleToggleLogLevel,range:p,timeZone:h,scanning:g,scanRange:v,width:b,hiddenLogLevels:E}))},t}(r.PureComponent);var b={toggleLogs:p.s,changeDedupStrategy:p.c,toggleLogLevelAction:h.F,changeTime:p.g};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore[n],r=a.logsHighlighterExpressions,o=a.logsResult,i=a.queryTransactions,s=a.scanning,l=a.scanRange,c=a.range,u=i.some(function(e){return"Logs"===e.resultType&&!e.done}),p=Object(f.b)(a),m=p.showingLogs,d=p.dedupStrategy,h=new Set(a.hiddenLogLevels),v=Object(f.a)(a);return{loading:u,logsHighlighterExpressions:r,logsResult:o,scanning:s,scanRange:l,showingLogs:m,range:c,timeZone:Object(g.a)(e.user),dedupStrategy:d,hiddenLogLevels:h,dedupedResult:v}},b)(v))}).call(this,n(73)(e))},1538:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),i=n(1539),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=void 0===t?"":t,a=e.exploreEvents,r=e.exploreId,s=e.queryKeys;return o.a.createElement("div",{className:n},s.map(function(e,t){return o.a.createElement(i.a,{key:e,exploreEvents:a,exploreId:r,index:t})}))},t}(r.PureComponent);t.a=s},1539:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),i=n(2),s=n.n(i),l=n(37),c=n(23),u=n(1540),p=n(1548),m=n(1529),d=n(3),h=n(39);var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onExecuteQuery=function(){var e=t.props.exploreId;t.props.runQueries(e)},t.onChangeQuery=function(e,n){var a=t.props,r=a.datasourceInstance,o=a.exploreId,i=a.index;t.props.changeQuery(o,e,i,n),e&&!n&&r.getHighlighterExpression&&0===i&&t.updateLogsHighlights(e)},t.onClickAddButton=function(){var e=t.props,n=e.exploreId,a=e.index;t.props.addQueryRow(n,a)},t.onClickClearButton=function(){t.onChangeQuery(null,!0)},t.onClickHintFix=function(e){var n=t.props,a=n.datasourceInstance,r=n.exploreId,o=n.index;if(a&&a.modifyQuery){t.props.modifyQueries(r,e,o,function(e,t){return a.modifyQuery(e,t)})}},t.onClickRemoveButton=function(){var e=t.props,n=e.exploreId,a=e.index;t.props.removeQueryRowAction({exploreId:n,index:a})},t.updateLogsHighlights=s.a.debounce(function(e){var n=t.props.datasourceInstance;if(n.getHighlighterExpression){var a=t.props.exploreId,r=[n.getHighlighterExpression(e)];t.props.highlightLogsExpressionAction({exploreId:a,expressions:r})}},500),t}return a.c(t,e),t.prototype.componentWillUnmount=function(){console.log("QueryRow will unmount")},t.prototype.render=function(){var e=this.props,t=e.datasourceInstance,n=e.history,a=e.index,r=e.query,i=e.queryTransactions,s=e.exploreEvents,l=e.range,c=e.datasourceStatus,m=i.filter(function(e){return e.rowIndex===a}),d=m.find(function(e){return void 0!==e.error}),h=function(e){var t=e.find(function(e){return e.hints&&e.hints.length>0});if(t)return t.hints[0]}(m),f=d?d.error:null,g=t.components.ExploreQueryField;return o.a.createElement("div",{className:"query-row"},o.a.createElement("div",{className:"query-row-status"},o.a.createElement(p.a,{transactions:m})),o.a.createElement("div",{className:"query-row-field flex-shrink-1"},g?o.a.createElement(g,{datasource:t,datasourceStatus:c,query:r,error:f,hint:h,history:n,onExecuteQuery:this.onExecuteQuery,onExecuteHint:this.onClickHintFix,onQueryChange:this.onChangeQuery}):o.a.createElement(u.a,{datasource:t,error:f,onQueryChange:this.onChangeQuery,onExecuteQuery:this.onExecuteQuery,initialQuery:r,exploreEvents:s,range:l})),o.a.createElement("div",{className:"gf-form-inline flex-shrink-0"},o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"gf-form-label gf-form-label--btn",onClick:this.onClickClearButton},o.a.createElement("i",{className:"fa fa-times"}))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"gf-form-label gf-form-label--btn",onClick:this.onClickAddButton},o.a.createElement("i",{className:"fa fa-plus"}))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"gf-form-label gf-form-label--btn",onClick:this.onClickRemoveButton},o.a.createElement("i",{className:"fa fa-minus"})))))},t}(r.PureComponent);var g={addQueryRow:m.a,changeQuery:m.d,highlightLogsExpressionAction:h.h,modifyQueries:m.j,removeQueryRowAction:h.s,runQueries:m.m};t.a=Object(l.hot)(e)(Object(c.b)(function(e,t){var n=t.exploreId,a=t.index,r=e.explore[n],o=r.datasourceInstance,i=r.history,s=r.queries,l=r.queryTransactions,c=r.range,u=r.datasourceError;return{datasourceInstance:o,history:i,query:s[a],queryTransactions:l,range:c,datasourceStatus:u?d.DataSourceStatus.Disconnected:d.DataSourceStatus.Connected}},g)(f))}).call(this,n(73)(e))},1540:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),i=n(5),s=n.n(i),l=n(62),c=n(131),u=(n(68),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,o,i,s,c,u=this;return a.d(this,function(p){return this.element?(e=this.props,t=e.datasource,n=e.initialQuery,r=e.exploreEvents,o=e.range,this.initTimeSrv(o),i=Object(l.a)(),'<plugin-component type="query-ctrl"> </plugin-component>',s=a.a({datasource:t.name},n),c={ctrl:{datasource:t,target:s,refresh:function(){u.props.onQueryChange(s),u.props.onExecuteQuery()},onQueryChange:function(){u.props.onQueryChange(s)},events:r,panel:{datasource:t,targets:[s]},dashboard:{}}},this.component=i.load(this.element,c,'<plugin-component type="query-ctrl"> </plugin-component>'),this.props.onQueryChange(s),[2]):[2]})})},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.initTimeSrv=function(e){Object(c.a)().init({time:{from:s()(e.from),to:s()(e.to)},refresh:!1,getTimezone:function(){return"utc"},timeRangeUpdated:function(){return console.log("refreshDashboard!")}})},t.prototype.render=function(){var e=this;return o.a.createElement("div",{className:"gf-form-query",ref:function(t){return e.element=t},style:{width:"100%"}})},t}(r.PureComponent));t.a=u},1541:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),i=n(37),s=n(23),l=n(1529),c=n(1542),u=n(1531),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickTableButton=function(){t.props.toggleTable(t.props.exploreId,t.props.showingTable)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.loading,n=e.onClickCell,a=e.showingTable,r=e.tableResult;return r?o.a.createElement(u.a,{label:"Table",loading:t,isOpen:a,onToggle:this.onClickTableButton},o.a.createElement(c.a,{data:r,loading:t,onClickCell:n})):null},t}(r.PureComponent);var m={toggleTable:l.t};t.a=Object(i.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore[n],r=a.queryTransactions,o=a.showingTable,i=a.tableResult;return{loading:r.some(function(e){return"Table"===e.resultType&&!e.done}),showingTable:o,tableResult:i}},m)(p))}).call(this,n(73)(e))},1542:function(e,t,n){"use strict";var a=n(1),r=n(2),o=n.n(r),i=n(0),s=n.n(i),l=n(1528),c=new(n(101).a),u=/^[Vv]alue #\d+/;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getCellProps=function(e,n,a){return{onClick:function(e){if(e.target&&"link"===e.target.className){var r=a.Header().props.title,o=n.row[r];t.props.onClickCell(r,o)}}}},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.loading,a=t||c,r=a.columns.map(function(e){return e.text}),i=a.columns.map(function(e){var t=e.filterable,n=e.text;return{Header:function(){return s.a.createElement("span",{title:n},n)},accessor:n,className:u.test(n)?"text-right":"",show:"Time"!==n,Cell:function(e){return s.a.createElement("span",{className:t?"link":"",title:n+": "+e.value},e.value)}}}),p=t?"The queries returned no data for a table.":"";return s.a.createElement(l.a,{columns:i,data:a.rows,getTdProps:this.getCellProps,loading:n,minRows:0,noDataText:p,resolveData:function(e){return function(e,t){return e.map(function(e){return o.a.zipObject(t,e)})}(e,r)},showPagination:Boolean(t)})},t}(i.PureComponent);t.a=p},1543:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var a,r=n(1),o=n(0),i=n.n(o),s=n(23),l=n(37),c=n(3),u=n(443),p=n(1529),m=n(1544),d=n(1530);!function(e){e.left="left",e.right="right"}(a||(a={}));var h=function(e){var t={iconSide:a.left},n=r.a({},e,{defaultOptions:t}),o=n.title,s=n.onClick,l=n.buttonClassName,c=n.iconClassName,u=n.splitted,p=n.iconSide;return i.a.createElement("button",{className:"btn navbar-button "+(l||""),onClick:s},c&&p===a.left?i.a.createElement("i",{className:""+c}):null,i.a.createElement("span",{className:"btn-title"},u?"":o),c&&p===a.right?i.a.createElement("i",{className:""+c}):null)},f=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeDatasource=function(e){return r.b(n,void 0,void 0,function(){return r.d(this,function(t){return this.props.changeDatasource(this.props.exploreId,e.value),[2]})})},n.onClearAll=function(){n.props.clearAll(n.props.exploreId)},n.onRunQuery=function(){return n.props.runQueries(n.props.exploreId)},n.onCloseTimePicker=function(){n.props.timepickerRef.current.setState({isOpen:!1})},n.onChangeRefreshInterval=function(e){var t=n.props;(0,t.changeRefreshInterval)(t.exploreId,e)},n}return r.c(t,e),t.prototype.render=function(){var e=this.props,t=e.datasourceMissing,n=e.exploreDatasources,r=e.closeSplit,o=e.exploreId,s=e.loading,l=e.range,p=e.timeZone,d=e.selectedDatasource,f=e.splitted,g=e.timepickerRef,v=e.refreshInterval,b=e.onChangeTime,E=e.split;return i.a.createElement("div",{className:f?"explore-toolbar splitted":"explore-toolbar"},i.a.createElement("div",{className:"explore-toolbar-item"},i.a.createElement("div",{className:"explore-toolbar-header"},i.a.createElement("div",{className:"explore-toolbar-header-title"},"left"===o&&i.a.createElement("span",{className:"navbar-page-btn"},i.a.createElement("i",{className:"gicon gicon-explore"}),"Explore")),f&&i.a.createElement("a",{className:"explore-toolbar-header-close",onClick:function(){return r(o)}},i.a.createElement("i",{className:"fa fa-times fa-fw"})))),i.a.createElement("div",{className:"explore-toolbar-item"},i.a.createElement("div",{className:"explore-toolbar-content"},t?null:i.a.createElement("div",{className:"explore-toolbar-content-item"},i.a.createElement("div",{className:"datasource-picker"},i.a.createElement(u.a,{onChange:this.onChangeDatasource,datasources:n,current:d}))),"left"!==o||f?null:i.a.createElement("div",{className:"explore-toolbar-content-item"},h({splitted:f,title:"Split",onClick:E,iconClassName:"fa fa-fw fa-columns icon-margin-right",iconSide:a.left})),i.a.createElement("div",{className:"explore-toolbar-content-item timepicker"},i.a.createElement(c.ClickOutsideWrapper,{onClick:this.onCloseTimePicker},i.a.createElement(m.a,{ref:g,range:l,isUtc:p.isUtc,onChangeTime:b})),i.a.createElement(c.RefreshPicker,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRunQuery,value:v,tooltip:"Refresh"}),v&&i.a.createElement(c.SetInterval,{func:this.onRunQuery,interval:v})),i.a.createElement("div",{className:"explore-toolbar-content-item"},i.a.createElement("button",{className:"btn navbar-button",onClick:this.onClearAll},"Clear All")),i.a.createElement("div",{className:"explore-toolbar-content-item"},h({splitted:f,title:"Run Query",onClick:this.onRunQuery,buttonClassName:"navbar-button--secondary",iconClassName:s?"fa fa-spinner fa-fw fa-spin run-icon":"fa fa-level-down fa-fw run-icon",iconSide:a.right})))))},t}(o.PureComponent),g={changeDatasource:p.b,changeRefreshInterval:p.e,clearAll:p.h,runQueries:p.m,closeSplit:p.p,split:p.q},v=Object(l.hot)(e)(Object(s.b)(function(e,t){var n=t.exploreId,a=e.explore.split,r=e.explore[n],o=r.datasourceInstance,i=r.datasourceMissing,s=r.exploreDatasources,l=r.queryTransactions,c=r.range,u=r.refreshInterval,p=o?s.find(function(e){return e.name===o.name}):void 0;return{datasourceMissing:i,exploreDatasources:s,loading:l.some(function(e){return!e.done}),range:c,timeZone:Object(d.a)(e.user),selectedDatasource:p,splitted:a,refreshInterval:u}},g)(f))}).call(this,n(73)(e))},1544:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),i=n(5),s=n.n(i),l=n(142),c=n(3),u=function(e,t){var n={from:t.raw.from,to:t.raw.to};return s.a.isMoment(n.from)&&(e||(n.from=n.from.local()),n.from=n.from.format(c.TIME_FORMAT)),s.a.isMoment(n.to)&&(e||(n.to=n.to.local()),n.to=n.to.format(c.TIME_FORMAT)),n},p=function(e){function t(t){var n=e.call(this,t)||this;n.handleChangeFrom=function(e){n.setState({fromRaw:e.target.value})},n.handleChangeTo=function(e){n.setState({toRaw:e.target.value})},n.handleClickApply=function(){var e,t=n.props,a=t.onChangeTime,r=t.isUtc;n.setState(function(t){var a=n.state,o=a.toRaw,i=a.fromRaw;return-1===(e={from:i,to:o}).from.indexOf("now")&&(e.from=r?s.a.utc(e.from,c.TIME_FORMAT):s()(e.from,c.TIME_FORMAT)),-1===e.to.indexOf("now")&&(e.to=r?s.a.utc(e.to,c.TIME_FORMAT):s()(e.to,c.TIME_FORMAT)),{isOpen:!1,rangeString:l.b(e)}},function(){a&&a(e)})},n.handleClickLeft=function(){return n.move(-1)},n.handleClickPicker=function(){n.setState(function(e){return{isOpen:!e.isOpen}})},n.handleClickRight=function(){return n.move(1)},n.handleClickRefresh=function(){},n.handleClickRelativeOption=function(e){var t=n.props.onChangeTime,a=l.b(e),r={from:e.from,to:e.to};n.setState({toRaw:r.to,fromRaw:r.from,isOpen:!1,rangeString:a},function(){t&&t(r)})},n.dropdownRef=function(e){n.dropdownEl=e};var a=t.range,r=t.isUtc,o=t.isOpen,i=u(t.isUtc,a);return n.state={isOpen:o,isUtc:r,rangeString:l.b(a.raw),fromRaw:i.from,toRaw:i.to,initialRange:a.raw,refreshInterval:""},n}return a.c(t,e),t.getDerivedStateFromProps=function(e,t){if(t.initialRange&&t.initialRange.from===e.range.raw.from&&t.initialRange.to===e.range.raw.to)return t;var n=e.range,r=u(e.isUtc,n);return a.a({},t,{fromRaw:r.from,toRaw:r.to,initialRange:n.raw,rangeString:l.b(n.raw)})},t.prototype.move=function(e,t){var n,a,r=this.props,o=r.onChangeTime,i=r.range,l={from:s.a.utc(i.from),to:s.a.utc(i.to)},c=(l.to.valueOf()-l.from.valueOf())/2;-1===e?(n=l.to.valueOf()-c,a=l.from.valueOf()-c):1===e?(n=l.to.valueOf()+c,a=l.from.valueOf()+c):(n=l.to.valueOf(),a=l.from.valueOf());var u={from:this.props.isUtc?s.a.utc(a):s()(a),to:this.props.isUtc?s.a.utc(n):s()(n)};return o&&o(u),u},t.prototype.getTimeOptions=function(){return l.c({},this.state.rangeString)},t.prototype.renderDropdown=function(){var e=this,t=this.state,n=t.fromRaw,a=t.isOpen,r=t.toRaw;if(!a)return null;var i=this.getTimeOptions();return o.a.createElement("div",{ref:this.dropdownRef,className:"gf-timepicker-dropdown"},o.a.createElement("div",{className:"popover-box"},o.a.createElement("div",{className:"popover-box__header"},o.a.createElement("span",{className:"popover-box__title"},"Quick ranges")),o.a.createElement("div",{className:"popover-box__body gf-timepicker-relative-section"},Object.keys(i).map(function(t){var n=i[t];return o.a.createElement("ul",{key:t},n.map(function(t){return o.a.createElement("li",{className:t.active?"active":"",key:t.display},o.a.createElement("a",{onClick:function(){return e.handleClickRelativeOption(t)}},t.display))}))}))),o.a.createElement("div",{className:"popover-box"},o.a.createElement("div",{className:"popover-box__header"},o.a.createElement("span",{className:"popover-box__title"},"Custom range")),o.a.createElement("div",{className:"popover-box__body gf-timepicker-absolute-section"},o.a.createElement("label",{className:"small"},"From:"),o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form max-width-28"},o.a.createElement(c.Input,{type:"text",className:"gf-form-input input-large timepicker-from",value:n,onChange:this.handleChangeFrom}))),o.a.createElement("label",{className:"small"},"To:"),o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form max-width-28"},o.a.createElement(c.Input,{type:"text",className:"gf-form-input input-large timepicker-to",value:r,onChange:this.handleChangeTo}))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"btn gf-form-btn btn-secondary",onClick:this.handleClickApply},"Apply")))))},t.prototype.render=function(){var e=this.state,t=e.isUtc,n=e.rangeString,a=e.refreshInterval;return o.a.createElement("div",{className:"timepicker"},o.a.createElement("div",{className:"navbar-buttons"},o.a.createElement("button",{className:"btn navbar-button navbar-button--tight timepicker-left",onClick:this.handleClickLeft},o.a.createElement("i",{className:"fa fa-chevron-left"})),o.a.createElement("button",{className:"btn navbar-button gf-timepicker-nav-btn",onClick:this.handleClickPicker},o.a.createElement("i",{className:"fa fa-clock-o"}),o.a.createElement("span",{className:"timepicker-rangestring"},n),t?o.a.createElement("span",{className:"gf-timepicker-utc"},"UTC"):null,a?o.a.createElement("span",{className:"text-warning"},"  Refresh every ",a):null),o.a.createElement("button",{className:"btn navbar-button navbar-button--tight timepicker-right",onClick:this.handleClickRight},o.a.createElement("i",{className:"fa fa-chevron-right"}))),this.renderDropdown())},t}(r.PureComponent);t.a=p},1545:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a,r=n(1),o=n(0),i=n.n(o),s=n(12),l=n(3),c=function(){var e=Object(o.useContext)(l.ThemeContext),t=i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fa fa-rocket"}),i.a.createElement(i.a.Fragment,null," ProTip: You can also define data sources through configuration files. "),i.a.createElement("a",{href:"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=explore",target:"_blank",className:"text-link"},"Learn more")),n=i.a.createElement(l.LargeLinkButton,{href:"/datasources/new",icon:"gicon gicon-datasources"},"Add data source"),c=Object(s.css)(a||(a=r.e(["\n    max-width: ",";\n  "],["\n    max-width: ",";\n  "])),e.breakpoints.lg);return i.a.createElement(l.CallToActionCard,{callToActionElement:n,className:c,footer:t,message:"Explore requires at least one data source. Once you have added a data source, you can query it here.",theme:e})}},1546:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),i=n(142),s=n(3),l=n(84),c=n(364),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.label,a=e.transparent;return o.a.createElement("div",{className:"gf-form"},n&&o.a.createElement("label",{className:"gf-form-label "+(a?"gf-form-label--transparent":"")},n),o.a.createElement("div",{className:"toggle-button-group "+(a?"toggle-button-group--transparent":"")},t))},t}(r.PureComponent),p=function(e){var t=e.children,n=e.selected,a=e.className,r=void 0===a?"":a,i=e.value,l=void 0===i?null:i,c=e.tooltip,u=e.onChange,p="btn "+r+" "+(n?"active":""),m=o.a.createElement("button",{className:p,onClick:function(e){e.stopPropagation(),u&&u(l)}},o.a.createElement("span",null,t));return c?o.a.createElement(s.Tooltip,{content:c,placement:"bottom"},m):m},m=n(1533),d=n(13),h=n.n(d);function f(e){var t=e.active,n=e.count,a=e.proportion,r=e.value,i=Math.round(100*a)+"%",s={width:i},l=h()("logs-stats-row",{"logs-stats-row--active":t});return o.a.createElement("div",{className:l},o.a.createElement("div",{className:"logs-stats-row__label"},o.a.createElement("div",{className:"logs-stats-row__value",title:r},r),o.a.createElement("div",{className:"logs-stats-row__count"},n),o.a.createElement("div",{className:"logs-stats-row__percent"},i)),o.a.createElement("div",{className:"logs-stats-row__bar"},o.a.createElement("div",{className:"logs-stats-row__innerbar",style:s})))}var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.rowCount,r=e.stats,i=e.value,s=e.onClickClose,l=r.slice(0,5),c=l.find(function(e){return e.value===i}),u=r.slice(5),p=!c;p&&(c=u.find(function(e){return e.value===i}),u=u.filter(function(e){return e.value!==i}));var m=u.reduce(function(e,t){return e+t.count},0),d=l.reduce(function(e,t){return e+t.count},0)+m,h=m/d;return o.a.createElement("div",{className:"logs-stats"},o.a.createElement("div",{className:"logs-stats__header"},o.a.createElement("span",{className:"logs-stats__title"},t,": ",d," of ",n," rows have that label"),o.a.createElement("span",{className:"logs-stats__close fa fa-remove",onClick:s})),o.a.createElement("div",{className:"logs-stats__body"},l.map(function(e){return o.a.createElement(f,a.a({key:e.value},e,{active:e.value===i}))}),p&&c&&o.a.createElement(f,a.a({key:c.value},c,{active:!0})),m>0&&o.a.createElement(f,{key:"__OTHERS__",count:m,value:"Other",proportion:h})))},t}(r.PureComponent),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={stats:null,showStats:!1},t.onClickClose=function(){t.setState({showStats:!1})},t.onClickLabel=function(){var e=t.props,n=e.onClickLabel,a=e.label,r=e.value;n&&n(a,r)},t.onClickStats=function(){t.setState(function(e){if(e.showStats)return{showStats:!1,stats:null};var n=t.props.getRows();return{showStats:!0,stats:Object(c.e)(n,t.props.label)}})},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.getRows,n=e.label,a=e.plain,r=e.value,i=this.state,s=i.showStats,l=i.stats,c=n+": "+r;return o.a.createElement("span",{className:"logs-label"},o.a.createElement("span",{className:"logs-label__value",title:c},r),!a&&o.a.createElement("span",{title:"Filter for label",onClick:this.onClickLabel,className:"logs-label__icon fa fa-search-plus"}),!a&&t&&o.a.createElement("span",{onClick:this.onClickStats,className:"logs-label__icon fa fa-signal"}),s&&o.a.createElement("span",{className:"logs-label__stats"},o.a.createElement(g,{stats:l,rowCount:t().length,label:n,value:r,onClickClose:this.onClickClose})))},t}(r.PureComponent),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.getRows,n=e.labels,a=e.onClickLabel,r=e.plain;return o.a.createElement("span",{className:"logs-labels"},Object.keys(n).map(function(e){return o.a.createElement(v,{key:e,getRows:t,label:e,value:n[e],plain:r,onClickLabel:a})}))},t}(r.PureComponent),E=n(2),y=n.n(E),w=n(322),x=n.n(w),C=n(120),S=n(724);var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chunks:[],prevValue:""},t}return a.c(t,e),t.getDerivedStateFromProps=function(e,t){return e.value===t.prevValue?null:{chunks:S.a.parse(e.value).spans.map(function(e){return e.css?{style:(t=e.css,t.split(/;\s*/).reduce(function(e,t){var n=t.match(/([^:\s]+)\s*:\s*(.+)/);return n&&n[1]&&n[2]&&(e[n[1].replace(/-(a-z)/g,function(e,t){return t.toUpperCase()})]=n[2]),e},{})),text:e.text}:{text:e.text};var t}),prevValue:e.value}},t.prototype.render=function(){return this.state.chunks.map(function(e,t){return e.style?o.a.createElement("span",{key:t,style:e.style},e.text):e.text})},t}(r.PureComponent),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={fieldCount:0,fieldLabel:null,fieldStats:null,fieldValue:null,parsed:!1,parser:void 0,parsedFieldHighlights:[],showFieldStats:!1},t.onClickClose=function(){t.setState({showFieldStats:!1})},t.onClickHighlight=function(e){var n=t.props.getRows,a=t.state.parser,r=n(),o=a.getLabelFromField(e),i=a.getValueFromField(e),s=a.buildMatcher(o),l=Object(c.d)(r,s),u=l.reduce(function(e,t){return e+t.count},0);t.setState({fieldCount:u,fieldLabel:o,fieldStats:l,fieldValue:i,showFieldStats:!0})},t.onMouseOverMessage=function(){t.mouseMessageTimer=setTimeout(t.parseMessage,500)},t.onMouseOutMessage=function(){clearTimeout(t.mouseMessageTimer),t.setState({parsed:!1})},t.parseMessage=function(){if(!t.state.parsed){var e=t.props.row,n=Object(c.h)(e.entry);if(n){var a=n.getFields(t.props.row.entry);t.setState({parsedFieldHighlights:a,parsed:!0,parser:n})}}},t}return a.c(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.mouseMessageTimer)},t.prototype.render=function(){var e,t=this.props,n=t.getRows,a=t.highlighterExpressions,r=t.onClickLabel,i=t.row,s=t.showDuplicates,l=t.showLabels,c=t.showLocalTime,u=t.showUtc,p=this.state,m=p.fieldCount,d=p.fieldLabel,f=p.fieldStats,v=p.fieldValue,E=p.parsed,w=p.parsedFieldHighlights,S=p.showFieldStats,N=i.entry,T=i.hasAnsi,O=i.raw,I=a&&!y.a.isEqual(a,i.searchWords),L=I?a:i.searchWords,_=L&&L.length>0&&L[0].length>0,j=h()("logs-row__match-highlight",{"logs-row__match-highlight--preview":I});return o.a.createElement("div",{className:"logs-row"},s&&o.a.createElement("div",{className:"logs-row__duplicates"},i.duplicates>0?i.duplicates+1+"x":null),o.a.createElement("div",{className:i.logLevel?"logs-row__level logs-row__level--"+i.logLevel:""}),u&&o.a.createElement("div",{className:"logs-row__time",title:"Local: "+i.timeLocal+" ("+i.timeFromNow+")"},i.timestamp),c&&o.a.createElement("div",{className:"logs-row__localtime",title:i.timestamp+" ("+i.timeFromNow+")"},i.timeLocal),l&&o.a.createElement("div",{className:"logs-row__labels"},o.a.createElement(b,{getRows:n,labels:i.uniqueLabels,onClickLabel:r})),o.a.createElement("div",{className:"logs-row__message",onMouseEnter:this.onMouseOverMessage,onMouseLeave:this.onMouseOutMessage},E&&o.a.createElement(x.a,{autoEscape:!0,highlightTag:(e=this.onClickHighlight,function(t){return o.a.createElement("span",{className:t.className,style:t.style},t.children,o.a.createElement("span",{className:"logs-row__field-highlight--icon fa fa-signal",onClick:function(){return e(t.children)}}))}),textToHighlight:N,searchWords:w,highlightClassName:"logs-row__field-highlight"}),!E&&_&&o.a.createElement(x.a,{textToHighlight:N,searchWords:L,findChunks:C.b,highlightClassName:j}),T&&!E&&!_&&o.a.createElement(k,{value:O}),!T&&!E&&!_&&N,S&&o.a.createElement("div",{className:"logs-row__stats"},o.a.createElement(g,{stats:f,label:d,value:v,onClickClose:this.onClickClose,rowCount:m}))))},t}(r.PureComponent),T={series:{stack:!0,bars:{show:!0,lineWidth:5}},yaxis:{tickDecimals:0}};var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={deferLogs:!0,renderAll:!1,showLabels:!1,showLocalTime:!0,showUtc:!1},t.onChangeDedup=function(e){var n=t.props.onDedupStrategyChange;return t.props.dedupStrategy===e?n(c.b.none):n(e)},t.onChangeLabels=function(e){var n=e.target;t.setState({showLabels:n.checked})},t.onChangeLocalTime=function(e){var n=e.target;t.setState({showLocalTime:n.checked})},t.onChangeUtc=function(e){var n=e.target;t.setState({showUtc:n.checked})},t.onToggleLogLevel=function(e,n){var a=new Set(Array.from(n).map(function(e){return s.LogLevel[e]}));t.props.onToggleLogLevel(a)},t.onClickScan=function(e){e.preventDefault(),t.props.onStartScanning()},t.onClickStopScan=function(e){e.preventDefault(),t.props.onStopScanning()},t}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.state.deferLogs){var t=this.props.data,n=t&&t.rows?t.rows.length:0,a=n<=200;this.deferLogsTimer=setTimeout(function(){return e.setState({deferLogs:!1,renderAll:a})},n)}},t.prototype.componentDidUpdate=function(e,t){var n=this;!t.deferLogs||this.state.deferLogs||this.state.renderAll||(this.renderAllTimer=setTimeout(function(){return n.setState({renderAll:!0})},2e3))},t.prototype.componentWillUnmount=function(){clearTimeout(this.deferLogsTimer),clearTimeout(this.renderAllTimer)},t.prototype.render=function(){var e=this,t=this.props,n=t.data,r=t.exploreId,d=t.highlighterExpressions,h=t.loading,f=void 0!==h&&h,g=t.onClickLabel,v=t.range,E=t.timeZone,y=t.scanning,w=t.scanRange,x=t.width,C=t.dedupedData;if(!n)return null;var S=this.state,k=S.deferLogs,O=S.renderAll,I=S.showLabels,L=S.showLocalTime,_=S.showUtc,j=this.props.dedupStrategy,R=n&&n.rows&&n.rows.length>0,q=R&&C.hasUniqueLabels,D=C.rows.reduce(function(e,t){return e+t.duplicates},0),P=j!==c.b.none&&D>0,M=a.h(n.meta);j!==c.b.none&&M.push({label:"Dedup count",value:D,kind:c.c.Number});var Q=C.rows,A=Q.slice(0,100),U=Q.slice(100),F=w?"Scanning "+i.b(w):"Scanning...",H=function(){return Q},G=n.series.map(function(e){return new l.a(e)}),z={from:v.from.valueOf(),to:v.to.valueOf()};return o.a.createElement("div",{className:"logs-panel"},o.a.createElement("div",{className:"logs-panel-graph"},o.a.createElement(m.a,{data:G,height:100,width:x,range:z,timeZone:E,id:"explore-logs-graph-"+r,onChangeTime:this.props.onChangeTime,onToggleSeries:this.onToggleLogLevel,userOptions:T})),o.a.createElement("div",{className:"logs-panel-options"},o.a.createElement("div",{className:"logs-panel-controls"},o.a.createElement(s.Switch,{label:"Timestamp",checked:_,onChange:this.onChangeUtc,transparent:!0}),o.a.createElement(s.Switch,{label:"Local time",checked:L,onChange:this.onChangeLocalTime,transparent:!0}),o.a.createElement(s.Switch,{label:"Labels",checked:I,onChange:this.onChangeLabels,transparent:!0}),o.a.createElement(u,{label:"Dedup",transparent:!0},Object.keys(c.b).map(function(t,n){return o.a.createElement(p,{key:n,value:t,onChange:e.onChangeDedup,selected:j===t,tooltip:c.a[t]},t)})))),R&&M&&o.a.createElement("div",{className:"logs-panel-meta"},M.map(function(e){return o.a.createElement("div",{className:"logs-panel-meta__item",key:e.label},o.a.createElement("span",{className:"logs-panel-meta__label"},e.label,":"),o.a.createElement("span",{className:"logs-panel-meta__value"},(t=e.value,e.kind===c.c.LabelsMap?o.a.createElement("span",{className:"logs-meta-item__labels"},o.a.createElement(b,{labels:t,plain:!0})):t)));var t})),o.a.createElement("div",{className:"logs-rows"},R&&!k&&A.map(function(e,t){return o.a.createElement(N,{key:t,getRows:H,highlighterExpressions:d,row:e,showDuplicates:P,showLabels:I&&q,showLocalTime:L,showUtc:_,onClickLabel:g})}),R&&!k&&O&&U.map(function(e,t){return o.a.createElement(N,{key:100+t,getRows:H,row:e,showDuplicates:P,showLabels:I&&q,showLocalTime:L,showUtc:_,onClickLabel:g})}),R&&k&&o.a.createElement("span",null,"Rendering ",C.rows.length," rows...")),!f&&!R&&!y&&o.a.createElement("div",{className:"logs-panel-nodata"},"No logs found.",o.a.createElement("a",{className:"link",onClick:this.onClickScan},"Scan for older logs")),y&&o.a.createElement("div",{className:"logs-panel-nodata"},o.a.createElement("span",null,F),o.a.createElement("a",{className:"link",onClick:this.onClickStopScan},"Stop scan")))},t}(r.PureComponent);t.a=O},1547:function(e,t,n){"use strict";var a=n(2),r=n(1527),o=Object(r.a)(a.memoize,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return e+"-"+JSON.stringify(t)},"")}),i=n(364);n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var s=function(e){return{showingGraph:e.showingGraph,showingLogs:e.showingLogs,showingTable:e.showingTable,showingStartPage:e.showingStartPage,dedupStrategy:e.dedupStrategy}},l=o(function(e){return e.logsResult},function(e){return e.hiddenLogLevels},function(e){return e.dedupStrategy},function(e,t,n){if(!e)return null;var a=Object(i.g)(e,new Set(t));return Object(i.f)(a,n)})},1548:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={elapsed:0},t.tick=function(){var e=Date.now()-t.offset;t.setState({elapsed:e})},t}return a.c(t,e),t.prototype.start=function(){this.offset=Date.now(),this.timer=window.setInterval(this.tick,150)},t.prototype.componentWillReceiveProps=function(e){e.time?clearInterval(this.timer):this.props.time&&this.start()},t.prototype.componentDidMount=function(){this.start()},t.prototype.componentWillUnmount=function(){clearInterval(this.timer)},t.prototype.render=function(){var e=this.state.elapsed,t=this.props,n=t.className,a=(t.time||e)/1e3;return o.a.createElement("span",{className:"elapsed-time "+n},a.toFixed(1),"s")},t}(r.PureComponent);var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.transaction,t=e.done?"query-transaction":"query-transaction query-transaction--loading";return o.a.createElement("div",{className:t},o.a.createElement("div",{className:"query-transaction__type"},e.resultType,":"),o.a.createElement("div",{className:"query-transaction__duration"},e.done?(e.latency/1e3).toFixed(1)+"s":o.a.createElement(i,null)))},t}(r.PureComponent),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.transactions;return o.a.createElement("div",{className:"query-transactions"},e.map(function(e,t){return o.a.createElement(s,{key:e.rowIndex+":"+e.resultType,transaction:e})}))},t}(r.PureComponent);t.a=l},1549:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"Wrapper",function(){return d});var a=n(1),r=n(0),o=n.n(r),i=n(37),s=n(23),l=n(89),c=n(1532),u=n(1534),p=n(3),m=n(39),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentWillUnmount=function(){this.props.resetExploreAction()},t.prototype.render=function(){var e=this.props.split;return o.a.createElement("div",{className:"page-scrollbar-wrapper"},o.a.createElement(p.CustomScrollbar,{autoHeightMin:"100%",className:"custom-scrollbar--page"},o.a.createElement("div",{className:"explore-wrapper"},o.a.createElement(c.a,null,o.a.createElement(u.a,{exploreId:l.a.left})),e&&o.a.createElement(c.a,null,o.a.createElement(u.a,{exploreId:l.a.right})))))},t}(r.Component),h={resetExploreAction:m.t};t.default=Object(i.hot)(e)(Object(s.b)(function(e){return{split:e.explore.split}},h)(d))}.call(this,n(73)(e))}}]);
//# sourceMappingURL=explore.2c2b5e170b429688c1b0.js.map