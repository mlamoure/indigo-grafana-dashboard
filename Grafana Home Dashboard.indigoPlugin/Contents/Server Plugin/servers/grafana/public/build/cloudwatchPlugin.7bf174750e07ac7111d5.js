(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{Z209:function(e,t,n){"use strict";n.r(t);var r=n("KHwQ"),a=n.n(r),o=n("txxJ"),i=n("LvDl"),s=n.n(i);var u=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.init=function(){var e=t.target;e.namespace=e.namespace||"",e.metricName=e.metricName||"",e.statistics=e.statistics||["Average"],e.dimensions=e.dimensions||{},e.period=e.period||"",e.region=e.region||"default",e.id=e.id||"",e.expression=e.expression||"",t.regionSegment=r.getSegmentForValue(t.target.region,"select region"),t.namespaceSegment=r.getSegmentForValue(t.target.namespace,"select namespace"),t.metricSegment=r.getSegmentForValue(t.target.metricName,"select metric"),t.dimSegments=s.a.reduce(t.target.dimensions,(function(e,t,n){return e.push(r.newKey(n)),e.push(r.newOperator("=")),e.push(r.newKeyValue(t)),e}),[]),t.statSegments=s.a.map(t.target.statistics,(function(e){return r.getSegmentForValue(e)})),t.ensurePlusButton(t.statSegments),t.ensurePlusButton(t.dimSegments),t.removeDimSegment=r.newSegment({fake:!0,value:"-- remove dimension --"}),t.removeStatSegment=r.newSegment({fake:!0,value:"-- remove stat --"}),s.a.isEmpty(t.target.region)&&(t.target.region="default"),t.onChange||(t.onChange=function(){})},t.getStatSegments=function(){return Promise.resolve(s.a.flatten([a.a.copy(t.removeStatSegment),s.a.map(t.datasource.standardStatistics,(function(e){return r.getSegmentForValue(e)})),r.getSegmentForValue("pNN.NN")]))},t.statSegmentChanged=function(e,n){e.value===t.removeStatSegment.value?t.statSegments.splice(n,1):e.type="value",t.target.statistics=s.a.reduce(t.statSegments,(function(e,t){return t.fake||e.push(t.value),e}),[]),t.ensurePlusButton(t.statSegments),t.onChange()},t.ensurePlusButton=function(e){var t=e.length,n=e[Math.max(t-1,0)];n&&"plus-button"===n.type||e.push(r.newPlusButton())},t.getDimSegments=function(e,n){if("operator"===e.type)return Promise.resolve([]);var r=t.target,o=Promise.resolve([]);if("key"===e.type||"plus-button"===e.type)o=t.datasource.getDimensionKeys(t.target.namespace,t.target.region);else if("value"===e.type){var i=t.dimSegments[n-2].value;delete r.dimensions[i],o=t.datasource.getDimensionValues(r.region,r.namespace,r.metricName,i,r.dimensions)}return o.then(t.transformToSegments(!0)).then((function(n){return"key"===e.type&&n.splice(0,0,a.a.copy(t.removeDimSegment)),n}))},t.dimSegmentChanged=function(e,n){t.dimSegments[n]=e,e.value===t.removeDimSegment.value?t.dimSegments.splice(n,3):"plus-button"===e.type&&(t.dimSegments.push(r.newOperator("=")),t.dimSegments.push(r.newFake("select dimension value","value","query-segment-value")),e.type="key",e.cssClass="query-segment-key"),t.syncDimSegmentsWithModel(),t.ensurePlusButton(t.dimSegments),t.onChange()},t.syncDimSegmentsWithModel=function(){for(var e={},n=t.dimSegments.length,r=0;r<n-2;r+=3){var a=t.dimSegments[r],o=t.dimSegments[r+2];o.fake||(e[a.value]=o.value)}t.target.dimensions=e},t.getRegions=function(){return t.datasource.metricFindQuery("regions()").then((function(e){return e.unshift({text:"default"}),e})).then(t.transformToSegments(!0))},t.getNamespaces=function(){return t.datasource.metricFindQuery("namespaces()").then(t.transformToSegments(!0))},t.getMetrics=function(){return t.datasource.metricFindQuery("metrics("+t.target.namespace+","+t.target.region+")").then(t.transformToSegments(!0))},t.regionChanged=function(){t.target.region=t.regionSegment.value,t.onChange()},t.namespaceChanged=function(){t.target.namespace=t.namespaceSegment.value,t.onChange()},t.metricChanged=function(){t.target.metricName=t.metricSegment.value,t.onChange()},t.transformToSegments=function(e){return function(t){var a=s.a.map(t,(function(e){return r.newSegment({value:e.text,expandable:e.expandable})}));return e&&s.a.each(n.getVariables(),(function(e){a.unshift(r.newSegment({type:"template",value:"$"+e.name,expandable:!0}))})),a}},t.init()};u.$inject=["$scope","templateSrv","uiSegmentSrv","datasourceSrv"],u.$inject=["$scope","templateSrv","uiSegmentSrv","datasourceSrv"],o.c.directive("cloudwatchQueryParameter",(function(){return{templateUrl:"public/app/plugins/datasource/cloudwatch/partials/query.parameter.html",controller:u,restrict:"E",scope:{target:"=",datasource:"=",onChange:"&"}}}));var c=n("Obii"),l=n("q1tI"),m=n.n(l),f=n("kDLi"),p=n("WnbS"),d=n("sGFA");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w,x=f.LegacyForms.Select,k=f.LegacyForms.Input,R=[{label:"Access & secret key",value:"keys"},{label:"Credentials file",value:"credentials"},{label:"ARN",value:"arn"}],O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,b(t).call(this,e))).loadRegionsPromise=null,n.state={regions:[]},n}var n,r,a,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.loadRegionsPromise=Object(d.a)(this.loadRegions()),this.loadRegionsPromise.promise.catch((function(e){e.isCanceled&&console.warn("Cloud Watch ConfigEditor has unmounted, intialization was canceled")}))}},{key:"componentWillUnmount",value:function(){this.loadRegionsPromise&&this.loadRegionsPromise.cancel()}},{key:"loadRegions",value:(o=regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)().loadDatasource(this.props.options.name).then((function(e){return e.getRegions()})).then((function(e){t.setState({regions:e.map((function(e){return{value:e.value,label:e.text}}))})}),(function(e){t.setState({regions:["ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","cn-north-1","cn-northwest-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-gov-east-1","us-gov-west-1","us-iso-east-1","us-isob-east-1","us-west-1","us-west-2"].map((function(e){return{value:e,label:e}}))})}));case 2:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){v(a,n,r,i,s,"next",e)}function s(e){v(a,n,r,i,s,"throw",e)}i(void 0)}))},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var e,t,n=this,r=this.state.regions,a=this.props.options,o=a.secureJsonData||{};return m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",{className:"page-heading"},"CloudWatch Details"),m.a.createElement("div",{className:"gf-form-group"},m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14"},"Auth Provider"),m.a.createElement(x,{className:"width-30",value:R.find((function(e){return e.value===a.jsonData.authType})),options:R,defaultValue:a.jsonData.authType,onChange:function(e){"arn"===a.jsonData.authType&&"arn"!==e.value&&delete n.props.options.jsonData.assumeRoleArn,Object(c.onUpdateDatasourceJsonDataOptionSelect)(n.props,"authType")(e)}}))),"credentials"===a.jsonData.authType&&m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14",tooltip:"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default."},"Credentials Profile Name"),m.a.createElement("div",{className:"width-30"},m.a.createElement(k,{className:"width-30",placeholder:"default",value:a.jsonData.database,onChange:Object(c.onUpdateDatasourceOption)(this.props,"database")})))),"keys"===a.jsonData.authType&&m.a.createElement("div",null,(null===(e=a.secureJsonFields)||void 0===e?void 0:e.accessKey)?m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14"},"Access Key ID"),m.a.createElement(k,{className:"width-25",placeholder:"Configured",disabled:!0})),m.a.createElement("div",{className:"gf-form"},m.a.createElement("div",{className:"max-width-30 gf-form-inline"},m.a.createElement(f.Button,{variant:"secondary",type:"button",onClick:Object(c.onUpdateDatasourceResetOption)(this.props,"accessKey")},"Reset")))):m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14"},"Access Key ID"),m.a.createElement("div",{className:"width-30"},m.a.createElement(k,{className:"width-30",value:o.accessKey||"",onChange:Object(c.onUpdateDatasourceSecureJsonDataOption)(this.props,"accessKey")})))),(null===(t=a.secureJsonFields)||void 0===t?void 0:t.secretKey)?m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14"},"Secret Access Key"),m.a.createElement(k,{className:"width-25",placeholder:"Configured",disabled:!0})),m.a.createElement("div",{className:"gf-form"},m.a.createElement("div",{className:"max-width-30 gf-form-inline"},m.a.createElement(f.Button,{variant:"secondary",type:"button",onClick:Object(c.onUpdateDatasourceResetOption)(this.props,"secretKey")},"Reset")))):m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14"},"Secret Access Key"),m.a.createElement("div",{className:"width-30"},m.a.createElement(k,{className:"width-30",value:o.secretKey||"",onChange:Object(c.onUpdateDatasourceSecureJsonDataOption)(this.props,"secretKey")}))))),"arn"===a.jsonData.authType&&m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14",tooltip:"ARN of Assume Role"},"Assume Role ARN"),m.a.createElement("div",{className:"width-30"},m.a.createElement(k,{className:"width-30",placeholder:"arn:aws:iam:*",value:a.jsonData.assumeRoleArn||"",onChange:Object(c.onUpdateDatasourceJsonDataOption)(this.props,"assumeRoleArn")})))),m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14",tooltip:"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region."},"Default Region"),m.a.createElement(x,{className:"width-30",value:r.find((function(e){return e.value===a.jsonData.defaultRegion})),options:r,defaultValue:a.jsonData.defaultRegion,onChange:Object(c.onUpdateDatasourceJsonDataOptionSelect)(this.props,"defaultRegion")}))),m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f.InlineFormLabel,{className:"width-14",tooltip:"Namespaces of Custom Metrics."},"Custom Metrics"),m.a.createElement(k,{className:"width-30",placeholder:"Namespace1,Namespace2",value:a.jsonData.customMetricsNamespaces||"",onChange:Object(c.onUpdateDatasourceJsonDataOption)(this.props,"customMetricsNamespaces")})))))}}])&&h(n.prototype,r),a&&h(n,a),t}(l.PureComponent),E=n("3SGO"),C=n("UvM7"),j=n("GQ3c"),N=n("iODs"),A=n("PbtU"),I=n("t8hP"),P=function(e){var t=e.region;return m.a.createElement("p",null,"Please visit the ",m.a.createElement("a",{target:"_blank",className:"text-link",href:"https://".concat(t,".console.aws.amazon.com/servicequotas/home?region=").concat(t,"#!/services/monitoring/quotas/L-5E141212")},"AWS Service Quotas console")," to request a quota increase or see our ",m.a.createElement("a",{target:"_blank",className:"text-link",href:"https://grafana.com/docs/features/datasources/cloudwatch/#service-quotas"},"documentation")," to learn more.")},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7e3,n=Object(i.memoize)((function(){return Object(i.debounce)(e,t,{leading:!0})}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify(t)}));return function(){return n.apply(void 0,arguments).apply(void 0,arguments)}};!function(e){e.Scheduled="Scheduled",e.Running="Running",e.Complete="Complete",e.Failed="Failed",e.Cancelled="Cancelled"}(w||(w={}));var q=n("F/XL"),F=n("0/uQ"),T=n("p0ib"),M=n("G5J1"),_=n("6blF"),L=n("psW0"),Q=n("67Y/"),V=n("sLa7"),G=n("vubp"),U=n("xMyE"),B=n("2WpN"),K=n("9Z1F"),W=n("bnqK"),J=n("wZee"),z=n.n(J);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function H(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){H(o,r,a,i,s,"next",e)}function s(e){H(o,r,a,i,s,"throw",e)}i(void 0)}))}}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=ee(t).call(this),(r=!o||"object"!==$(o)&&"function"!=typeof o?te(a):o).cleanText=function(e){return e.replace(/[()]/g,"").trim()},r.request=function(e,t){return r.datasource.awsRequest(e,t)},r.start=function(){return r.startTask||(r.startTask=Promise.resolve().then((function(){return r.started=!0,[]}))),r.startTask},r.fetchFields=function(){var e=Y(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.fetchedFieldsCache&&Date.now()-r.fetchedFieldsCache.time<3e4&&s.a.sortedUniq(r.fetchedFieldsCache.logGroups).join("|")===s.a.sortedUniq(t).join("|"))){e.next=2;break}return e.abrupt("return",r.fetchedFieldsCache.fields);case 2:return e.next=4,Promise.all(t.map((function(e){return r.datasource.getLogGroupFields({logGroupName:e})})));case 4:return n=e.sent,a=Z(new Set(n.reduce((function(e,t){var n;return e.concat(null===(n=t.logGroupFields)||void 0===n?void 0:n.map((function(e){return e.name})))}),[])).values()),r.fetchedFieldsCache={time:Date.now(),logGroups:t,fields:a},e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleKeyword=function(){var e=Y(regeneratorRuntime.mark((function e(t){var n,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getFieldCompletionItems(null!==(n=null==t?void 0:t.logGroupNames)&&void 0!==n?n:[]);case 2:return o=e.sent,i=[{prefixMatch:!0,label:"Functions",items:W.h.concat(W.c,W.e)}],(a=o.suggestions).push.apply(a,i),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleCommand=function(){var e=Y(regeneratorRuntime.mark((function e(t,n,a){var o,i,s,u,c,l,m,f,p,d,g,v,h,y,b,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.content.toLowerCase(),i=oe(n),s=i===t,"sort"!==o){e.next=5;break}return e.abrupt("return",r.handleSortCommand(s,n,a));case 5:if("parse"!==o){e.next=10;break}if(!s){e.next=10;break}return e.next=9,r.getFieldCompletionItems(null!==(u=a.logGroupNames)&&void 0!==u?u:[]);case 9:return e.abrupt("return",e.sent);case 10:if(c=le(t.next,"whitespace")&&!t.next.next,l=c||ae(t)===n,m=le(n,"punctuation",","),f=m||le(i,"punctuation",","),l||f){e.next=16;break}return e.abrupt("return",{suggestions:[]});case 16:if(!["display","fields"].includes(o)){e.next=22;break}return e.next=19,r.getFieldCompletionItems(null!==(p=a.logGroupNames)&&void 0!==p?p:[]);case 19:return g=e.sent,(d=g.suggestions).push.apply(d,Z(r.getFieldAndFilterFunctionCompletionItems().suggestions)),e.abrupt("return",g);case 22:if("stats"!==o){e.next=26;break}return v=r.getStatsAggCompletionItems(),(m||c)&&(null==v||v.suggestions.forEach((function(e){e.skipFilter=!0}))),e.abrupt("return",v);case 26:if("filter"!==o||!s){e.next=33;break}return e.next=29,r.getFieldCompletionItems(null!==(h=a.logGroupNames)&&void 0!==h?h:[]);case 29:return b=e.sent,S=r.getBoolFuncCompletionItems(),(y=b.suggestions).push.apply(y,Z(S.suggestions)),e.abrupt("return",b);case 33:return e.abrupt("return",{suggestions:[]});case 34:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.handleComparison=function(){var e=Y(regeneratorRuntime.mark((function e(t){var n,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getFieldCompletionItems(null!==(n=null==t?void 0:t.logGroupNames)&&void 0!==n?n:[]);case 2:return o=e.sent,i=r.getComparisonCompletionItems(),(a=o.suggestions).push.apply(a,Z(i.suggestions)),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getCommandCompletionItems=function(){return{suggestions:[{prefixMatch:!0,label:"Commands",items:W.g}]}},r.getFieldAndFilterFunctionCompletionItems=function(){return{suggestions:[{prefixMatch:!0,label:"Functions",items:W.d}]}},r.getStatsAggCompletionItems=function(){return{suggestions:[{prefixMatch:!0,label:"Functions",items:W.a}]}},r.getBoolFuncCompletionItems=function(){return{suggestions:[{prefixMatch:!0,label:"Functions",items:W.b}]}},r.getComparisonCompletionItems=function(){return{suggestions:[{prefixMatch:!0,label:"Functions",items:W.f.concat(W.b)}]}},r.getFieldCompletionItems=function(){var e=Y(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetchFields(t);case 2:return n=e.sent,e.abrupt("return",{suggestions:[{label:"Fields",items:n.map((function(e){return{label:e,insertText:e.match(/@?[_a-zA-Z]+[_.0-9a-zA-Z]*/)?void 0:"`".concat(e,"`")}}))}]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.datasource=e,Object.assign(te(r),n),r}var n,r,a,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"getSyntax",value:function(){return W.i}},{key:"isStatsQuery",value:function(e){var t,n=this.getSyntax();return!!(null!==(t=z.a.tokenize(e,n))&&void 0!==t?t:[]).find((function(e){return"string"!=typeof e&&"stats"===e.content.toString().toLowerCase()&&"query-command"===e.type}))}},{key:"provideCompletionItems",value:(i=Y(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.value,(a=null==r?void 0:r.data.get("tokens"))&&a.length){e.next=4;break}return e.abrupt("return",{suggestions:[]});case 4:if(o=a.filter((function(e){var t,n,a,o;return e.offsets.start<=(null===(t=r.selection)||void 0===t?void 0:null===(n=t.start)||void 0===n?void 0:n.offset)&&e.offsets.end>=(null===(a=r.selection)||void 0===a?void 0:null===(o=a.start)||void 0===o?void 0:o.offset)}))[0],i=!o.prev,s=oe(o),!(i||!i&&(null==s?void 0:s.types.includes("command-separator")))){e.next=10;break}return e.abrupt("return",this.getCommandCompletionItems());case 10:if(!ue(o)){e.next=14;break}return e.next=13,this.getFieldCompletionItems(null!==(u=null==n?void 0:n.logGroupNames)&&void 0!==u?u:[]);case 13:return e.abrupt("return",e.sent);case 14:if(!ce("by",o)){e.next=16;break}return e.abrupt("return",this.handleKeyword(n));case 16:if(!(null==s?void 0:s.types.includes("comparison-operator"))){e.next=18;break}return e.abrupt("return",this.handleComparison(n));case 18:if(!(c=ie(o))){e.next=23;break}return e.next=22,this.handleCommand(c,o,n);case 22:return e.abrupt("return",e.sent);case 23:return e.abrupt("return",{suggestions:[]});case 24:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"handleSortCommand",value:(o=Y(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,this.getFieldCompletionItems(null!==(a=r.logGroupNames)&&void 0!==a?a:[]);case 3:return e.abrupt("return",e.sent);case 6:if(!le(oe(n),"field-name")){e.next=8;break}return e.abrupt("return",{suggestions:[{prefixMatch:!0,label:"Sort Order",items:[{label:"asc"},{label:"desc"}]}]});case 8:return e.abrupt("return",{suggestions:[]});case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})}])&&X(n.prototype,r),a&&X(n,a),t}(c.LanguageProvider);function ae(e){for(var t=e;t.next;){if(!t.next.types.includes("whitespace"))return t.next;t=t.next}return null}function oe(e){for(var t=e;t.prev;){if(!le(t.prev,"whitespace"))return t.prev;t=t.prev}return null}function ie(e){for(var t=e;t.prev;)if((t=t.prev).types.includes("query-command")&&(!t.prev||le(oe(t),"command-separator")))return t;return null}var se=["avg","count","count_distinct","earliest","latest","sortsFirst","sortsLast","max","min","pct","stddev","ispresent","fromMillis","toMillis","isempty","isblank","isValidIp","isValidIpV4","isValidIpV6","isIpInSubnet","isIpv4InSubnet","isIpv6InSubnet"].map((function(e){return e.toLowerCase()}));function ue(e){var t=oe(e);if(!t)return!1;var n="("===e.content?e:"("===t.content?t:void 0;if(n){var r=oe(n);if(r)return se.includes(r.content.toLowerCase())&&r.types.includes("function")}return!1}function ce(e,t){var n=me(t,["whitespace","function","punctuation","field-name","number"]);if(le(n,"keyword","by")){var r=me(t,["whitespace"]);if(r===n||le(r,"punctuation",","))return!0}return!1}function le(e,t,n){return!(null==e||!e.types.includes(t))&&(!n||(null==e?void 0:e.content.toLowerCase())===n)}function me(e,t){var n=e.prev;e:for(;n;){var r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;if("string"==typeof u){if(n.types.includes(u)){n=n.prev;continue e}}else if(n.types.includes(u.type)&&n.content.toLowerCase()===u.value){n=n.prev;continue e}}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}break}return n}var fe=n("R37w");function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ve(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function he(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ve(o,r,a,i,s,"next",e)}function s(e){ve(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oe=function(e,t){return N.d.dispatch(Object(E.b)(Object(C.a)("CloudWatch request limit reached in ".concat(t," for data source ").concat(e),"",m.a.createElement(P,{region:t},null))))},Ee=function(e,t){return N.d.dispatch(Object(E.b)(Object(C.a)(e,t)))},Ce=[100,200,500,1e3],je=function(e){function t(e,n,r){var a,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=xe(t).call(this,e),(a=!i||"object"!==pe(i)&&"function"!=typeof i?ke(o):i).templateSrv=n,a.timeSrv=r,a.handleLogQueries=function(e,t){var n=e.filter((function(e){var t;return null===(t=e.logGroupNames)||void 0===t?void 0:t.length}));if(e.length>n.length)return Object(q.a)({data:[],error:{message:"Log group is required"}});if(s.a.isEmpty(n))return Object(q.a)({data:[],state:c.LoadingState.Done});var r=n.map((function(e){return{queryString:e.expression,refId:e.refId,logGroupNames:e.logGroupNames,region:a.replace(a.getActualRegion(e.region),t.scopedVars,!0,"region")}}));return a.makeLogActionRequest("StartQuery",r,t.scopedVars).pipe(Object(L.b)((function(t){return a.logsQuery(t.map((function(t){var n,r,a;return{queryId:t.fields[0].values.get(0),region:null!==(n=null===(r=t.meta)||void 0===r?void 0:null===(a=r.custom)||void 0===a?void 0:a.Region)&&void 0!==n?n:"default",refId:t.refId,statsGroups:e.find((function(e){return e.refId===t.refId})).statsGroups}})))})),Object(Q.a)((function(e){return a.addDataLinksToLogsResponse(e,t)})))},a.handleMetricQueries=function(e,t){var n,r,o=e.filter((function(e){var t;return!!e.region&&!!e.namespace&&!!e.metricName&&!s.a.isEmpty(e.statistics)||(null===(t=e.expression)||void 0===t?void 0:t.length)>0})).map((function(e){if(e.region=a.replace(a.getActualRegion(e.region),t.scopedVars,!0,"region"),e.namespace=a.replace(e.namespace,t.scopedVars,!0,"namespace"),e.metricName=a.replace(e.metricName,t.scopedVars,!0,"metric name"),e.dimensions=a.convertDimensionFormat(e.dimensions,t.scopedVars),e.statistics=e.statistics.map((function(e){return a.replace(e,t.scopedVars,!0,"statistics")})),e.period=String(a.getPeriod(e,t)),e.id=a.templateSrv.replace(e.id,t.scopedVars),e.expression=a.templateSrv.replace(e.expression,t.scopedVars),e.statistics.some((function(e){if(0===e.indexOf("p")){var t=/^p\d{2}(?:\.\d{1,2})?$/.exec(e);return!t||t[0]!==e}return!1})))throw{message:"Invalid extended statistics"};return be({refId:e.refId,intervalMs:t.intervalMs,maxDataPoints:t.maxDataPoints,datasourceId:a.id,type:"timeSeriesQuery"},e)}));if(s.a.isEmpty(o))return Object(q.a)({data:[]});var i={from:null==t?void 0:null===(n=t.range)||void 0===n?void 0:n.from.valueOf().toString(),to:null==t?void 0:null===(r=t.range)||void 0===r?void 0:r.to.valueOf().toString(),queries:o};return Object(F.a)(a.performTimeSeriesQuery(i,t.range))},a.getLogRowContext=function(){var e=he(regeneratorRuntime.mark((function e(t){var n,r,o,i,s,u,c,l,m,f,p,d,g,v,h,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y.length>1&&void 0!==y[1]?y[1]:{},r=n.limit,o=void 0===r?10:r,i=n.direction,s=void 0===i?"BACKWARD":i,u=null,c=null,l=!0,m=!1,f=void 0,e.prev=6,p=t.dataFrame.fields[Symbol.iterator]();case 8:if(l=(d=p.next()).done){e.next=23;break}if("__logstream__grafana_internal__"!==(g=d.value).name){e.next=16;break}if(u=g,null===c){e.next=14;break}return e.abrupt("break",23);case 14:e.next=20;break;case 16:if("__log__grafana_internal__"!==g.name){e.next=20;break}if(c=g,null===u){e.next=20;break}return e.abrupt("break",23);case 20:l=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(6),m=!0,f=e.t0;case 29:e.prev=29,e.prev=30,l||null==p.return||p.return();case 32:if(e.prev=32,!m){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return v={limit:o,startFromHead:"BACKWARD"!==s,logGroupName:Ne(c.values.get(t.rowIndex)),logStreamName:u.values.get(t.rowIndex)},"BACKWARD"===s?v.endTime=t.timeEpochMs:v.startTime=t.timeEpochMs,e.next=41,a.makeLogActionRequest("GetLogEvents",[v]).toPromise();case 41:return h=e.sent,e.abrupt("return",{data:h});case 43:case"end":return e.stop()}}),e,null,[[6,25,29,37],[30,,32,36]])})));return function(t){return e.apply(this,arguments)}}(),a.getTargetsByQueryMode=function(e){var t=[],n=[];return e.forEach((function(e){var r;"Logs"===(null!==(r=e.queryMode)&&void 0!==r?r:"Metrics")?t.push(e):n.push(e)})),{logQueries:t,metricsQueries:n}},a.type="cloudwatch",a.proxyUrl=e.url,a.defaultRegion=e.jsonData.defaultRegion,a.datasourceName=e.name,a.standardStatistics=["Average","Maximum","Minimum","Sum","SampleCount"],a.debouncedAlert=D(Oe,j.AppNotificationTimeout.Error),a.debouncedCustomAlert=D(Ee,j.AppNotificationTimeout.Error),a.logQueries={},a.languageProvider=new re(ke(a)),a}var n,r,o,i,u,l,m,f,p,d;return t.$inject=["instanceSettings","templateSrv","timeSrv"],function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,e),n=t,(r=[{key:"query",value:function(e){var t=(e=a.a.copy(e)).targets.filter((function(e){return""!==e.id||!0!==e.hide})),n=this.getTargetsByQueryMode(t),r=n.logQueries,o=n.metricsQueries,i=[];return r.length>0&&i.push(this.handleLogQueries(r,e)),o.length>0&&i.push(this.handleMetricQueries(o,e)),s.a.isEmpty(i)?Object(q.a)({data:[],state:c.LoadingState.Done}):T.a.apply(void 0,i)}},{key:"logsQuery",value:function(e){var t=this;this.logQueries={},e.forEach((function(e){var n,r;t.logQueries[e.refId]={id:e.queryId,region:e.region,statsQuery:null!==(n=(null===(r=e.statsGroups)||void 0===r?void 0:r.length)>0)&&void 0!==n&&n}}));var n,r,a={};return n=this.makeLogActionRequest("GetQueryResults",e).pipe(Object(V.a)((function(n,r){return n.every((function(e){var t,n;return(null===(t=e.meta)||void 0===t?void 0:null===(n=t.custom)||void 0===n?void 0:n.Status)===w.Complete}))?Object(M.b)():t.makeLogActionRequest("GetQueryResults",e).pipe(Object(Q.a)((function(e){var t=!1,n=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var l,m,f,p=u.value,d=null===(l=p.meta)||void 0===l?void 0:null===(m=l.custom)||void 0===m?void 0:m.Statistics.RecordsMatched;d>(null!==(f=a[p.refId])&&void 0!==f?f:0)&&(t=!0),a[p.refId]=d}}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}if(r>=6&&!t){var g=!0,v=!1,h=void 0;try{for(var y,b=e[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var S=y.value;s.a.set(S,"meta.custom.Status",w.Complete)}}catch(e){v=!0,h=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw h}}}return e})),Object(G.a)(Ce[Math.min(r,Ce.length-1)]))})),Object(U.a)((function(e){e.forEach((function(e,n){var r,a;[w.Complete,w.Cancelled,w.Failed].includes(null===(r=e.meta)||void 0===r?void 0:null===(a=r.custom)||void 0===a?void 0:a.Status)&&t.logQueries.hasOwnProperty(e.refId)&&delete t.logQueries[e.refId]}))})),Object(Q.a)((function(e){return{data:e,key:"test-key",state:e.every((function(e){var t,n;return(null===(t=e.meta)||void 0===t?void 0:null===(n=t.custom)||void 0===n?void 0:n.Status)===w.Complete}))?c.LoadingState.Done:c.LoadingState.Loading}}))),r=function(){return t.stopQueries()},new _.a((function(e){var t=n.subscribe({next:function(t){return e.next(t)},error:function(t){return e.next(t)},complete:function(){return e.complete()}});return function(){t.unsubscribe(),r()}}))}},{key:"addDataLinksToLogsResponse",value:function(e,t){var n=this,r=!0,a=!1,o=void 0;try{for(var i,s=function(){var e,r,a=i.value,o=n.timeSrv.timeRange(),s=o.from.toISOString(),u=o.to.toISOString(),c=t.targets.find((function(e){return e.refId===a.refId})),l={end:u,start:s,timeType:"ABSOLUTE",tz:"UTC",editorString:null!==(e=c.expression)&&void 0!==e?e:"",isLiveTail:!1,source:null!==(r=c.logGroupNames)&&void 0!==r?r:[]},m=Object(fe.a)(l,n.getActualRegion(n.replace(c.region,t.scopedVars,!0,"region"))),f=!0,p=!1,d=void 0;try{for(var g,v=a.fields[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)g.value.config.links=[{url:m,title:"View in CloudWatch console",targetBlank:!0}]}catch(e){p=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(p)throw d}}},u=e.data[Symbol.iterator]();!(r=(i=u.next()).done);r=!0)s()}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return e}},{key:"stopQueries",value:function(){var e=this;Object.keys(this.logQueries).length>0&&this.makeLogActionRequest("StopQuery",Object.values(this.logQueries).map((function(e){return{queryId:e.id,region:e.region}})),void 0,!1).pipe(Object(B.a)((function(){e.logQueries={}})))}},{key:"describeLogGroups",value:(d=he(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeLogActionRequest("DescribeLogGroups",[t]).toPromise();case 2:return o=e.sent,i=null!==(n=null===(r=o[0])||void 0===r?void 0:null===(a=r.fields[0])||void 0===a?void 0:a.values.toArray())&&void 0!==n?n:[],e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getLogGroupFields",value:(p=he(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeLogActionRequest("GetLogGroupFields",[t]).toPromise();case 2:return r=e.sent,a=r[0].fields[0].values.toArray(),o=r[0].fields[1].values.toArray(),i={logGroupFields:null!==(n=a.map((function(e,t){return{name:e,percent:o[t]}})))&&void 0!==n?n:[]},e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getPeriod",value:function(e,t){var n=this.templateSrv.replace(e.period,t.scopedVars);return n&&"auto"!==n.toLowerCase()&&(n=/^\d+$/.test(n)?parseInt(n,10):A.a.interval_to_seconds(n))<1&&(n=1),n||""}},{key:"buildCloudwatchConsoleUrl",value:function(e,t,n,r,a){var o=e.region,i=e.namespace,s=e.metricName,u=e.dimensions,c=e.statistics,l=e.expression,m={view:"timeSeries",stacked:!1,title:r,start:t,end:n,region:o=this.getActualRegion(o)},f=a&&a.length&&a.every((function(e){var t=e.Expression;return/SEARCH().*/.test(t)}));return!f&&l?"":(m=be({},m,f?{metrics:a&&a.length?a.map((function(e){return{expression:e.Expression}})):[{expression:l}]}:{metrics:ge(c.map((function(e){return[i,s].concat(ge(Object.entries(u).reduce((function(e,t){var n=de(t,2),r=n[0],a=n[1];return[].concat(ge(e),[r,a[0]])}),[])),[{stat:e,period:a.length?a[0].Period:60}])})))}),"https://".concat(o,".console.aws.amazon.com/cloudwatch/deeplink.js?region=").concat(o,"#metricsV2:graph=").concat(encodeURIComponent(JSON.stringify(m))))}},{key:"performTimeSeriesQuery",value:function(e,t){var n=this,r=t.from,a=t.to;return this.awsRequest("/api/tsdb/query",e).then((function(t){return t.results?Object.values(e.queries).reduce((function(e,o){var i=e.data,s=e.error,u=t.results[o.refId];if(!u)return{data:i,error:s};var l=n.buildCloudwatchConsoleUrl(o,r.toISOString(),a.toISOString(),o.refId,u.meta.gmdMeta);return{error:s||u.error?{message:u.error}:null,data:[].concat(ge(i),ge(u.series.map((function(e){var t=e.name,n=e.points,r=Object(c.toDataFrame)({target:t,datapoints:n,refId:o.refId,meta:u.meta});if(l){var a=!0,i=!1,s=void 0;try{for(var m,f=r.fields[Symbol.iterator]();!(a=(m=f.next()).done);a=!0)m.value.config.links=[{url:l,title:"View in CloudWatch console",targetBlank:!0}]}catch(e){i=!0,s=e}finally{try{a||null==f.return||f.return()}finally{if(i)throw s}}}return r}))))}}),{data:[],error:null}):{data:[]}})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{error:""}};if(/^Throttling:.*/.test(t.data.message)){var r=Object.keys(t.data.results),a=Object.values(e.queries).reduce((function(e,t){var n=t.refId,a=t.region;return n&&!r.includes(n)||e.includes(a)?e:[].concat(ge(e),[a])}),[]);a.forEach((function(e){return n.debouncedAlert(n.datasourceName,n.getActualRegion(e))}))}throw t.data&&"Metric request error"===t.data.message&&t.data.error&&(t.data.message=t.data.error),t}))}},{key:"transformSuggestDataFromTable",value:function(e){return e.results.metricFindQuery.tables[0].rows.map((function(e){var t=de(e,2),n=t[0],r=t[1];return{text:n,value:r,label:r}}))}},{key:"doMetricQueryRequest",value:function(e,t){var n=this,r=this.timeSrv.timeRange();return this.awsRequest("/api/tsdb/query",{from:r.from.valueOf().toString(),to:r.to.valueOf().toString(),queries:[be({refId:"metricFindQuery",intervalMs:1,maxDataPoints:1,datasourceId:this.id,type:"metricFindQuery",subtype:e},t)]}).then((function(e){return n.transformSuggestDataFromTable(e)}))}},{key:"makeLogActionRequest",value:function(e,t,n){var r=this,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this.timeSrv.timeRange(),i={from:o.from.valueOf().toString(),to:o.to.valueOf().toString(),queries:t.map((function(t){return be({refId:"A",intervalMs:1,maxDataPoints:1,datasourceId:r.id,type:"logAction",subtype:e},t)}))};a&&i.queries.forEach((function(e){e.hasOwnProperty("queryString")&&(e.queryString=r.replace(e.queryString,n,!0)),e.region=r.replace(e.region,n,!0,"region"),e.region=r.getActualRegion(e.region),e.logGroupNames&&(e.logGroupNames=e.logGroupNames.map((function(e){return r.replace(e,n,!0,"log groups")})))}));var s=function(e){return Object(I.toDataQueryResponse)(e).data||[]};return Object(F.a)(this.awsRequest("/api/tsdb/query",i)).pipe(Object(Q.a)((function(e){return s({data:e})})),Object(K.a)((function(e){var t;if(null===(t=e.data)||void 0===t?void 0:t.error)throw e.data.error;throw e})))}},{key:"getRegions",value:function(){return this.doMetricQueryRequest("regions",null).then((function(e){return[{label:"default",value:"default",text:"default"}].concat(ge(e))}))}},{key:"getNamespaces",value:function(){return this.doMetricQueryRequest("namespaces",null)}},{key:"getMetrics",value:(f=he(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",this.doMetricQueryRequest("metrics",{region:this.templateSrv.replace(this.getActualRegion(n)),namespace:this.templateSrv.replace(t)}));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"getDimensionKeys",value:(m=he(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",this.doMetricQueryRequest("dimension_keys",{region:this.templateSrv.replace(this.getActualRegion(n)),namespace:this.templateSrv.replace(t)}));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"getDimensionValues",value:(l=he(regeneratorRuntime.mark((function e(t,n,r,a,o){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,this.doMetricQueryRequest("dimension_values",{region:this.templateSrv.replace(this.getActualRegion(t)),namespace:this.templateSrv.replace(n),metricName:this.templateSrv.replace(r.trim()),dimensionKey:this.templateSrv.replace(a),dimensions:this.convertDimensionFormat(o,{})});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,a){return l.apply(this,arguments)})},{key:"getEbsVolumeIds",value:function(e,t){return this.doMetricQueryRequest("ebs_volume_ids",{region:this.templateSrv.replace(this.getActualRegion(e)),instanceId:this.templateSrv.replace(t)})}},{key:"getEc2InstanceAttribute",value:function(e,t,n){return this.doMetricQueryRequest("ec2_instance_attribute",{region:this.templateSrv.replace(this.getActualRegion(e)),attributeName:this.templateSrv.replace(t),filters:n})}},{key:"getResourceARNs",value:function(e,t,n){return this.doMetricQueryRequest("resource_arns",{region:this.templateSrv.replace(this.getActualRegion(e)),resourceType:this.templateSrv.replace(t),tags:n})}},{key:"metricFindQuery",value:(u=he(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,m,f,p,d,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.match(/^regions\(\)/)){e.next=3;break}return e.abrupt("return",this.getRegions());case 3:if(!t.match(/^namespaces\(\)/)){e.next=6;break}return e.abrupt("return",this.getNamespaces());case 6:if(!(i=t.match(/^metrics\(([^\)]+?)(,\s?([^,]+?))?\)/))){e.next=11;break}return r=i[1],n=i[3],e.abrupt("return",this.getMetrics(r,n));case 11:if(!(s=t.match(/^dimension_keys\(([^\)]+?)(,\s?([^,]+?))?\)/))){e.next=16;break}return r=s[1],n=s[3],e.abrupt("return",this.getDimensionKeys(r,n));case 16:if(!(u=t.match(/^dimension_values\(([^,]+?),\s?([^,]+?),\s?([^,]+?),\s?([^,]+?)(,\s?(.+))?\)/))){e.next=25;break}return n=u[1],r=u[2],a=u[3],c=u[4],o={},u[6]&&(o=JSON.parse(this.templateSrv.replace(u[6]))),e.abrupt("return",this.getDimensionValues(n,r,a,c,o));case 25:if(!(l=t.match(/^ebs_volume_ids\(([^,]+?),\s?([^,]+?)\)/))){e.next=30;break}return n=l[1],m=l[2],e.abrupt("return",this.getEbsVolumeIds(n,m));case 30:if(!(f=t.match(/^ec2_instance_attribute\(([^,]+?),\s?([^,]+?),\s?(.+?)\)/))){e.next=36;break}return n=f[1],p=f[2],o=JSON.parse(this.templateSrv.replace(f[3])),e.abrupt("return",this.getEc2InstanceAttribute(n,p,o));case 36:if(!(d=t.match(/^resource_arns\(([^,]+?),\s?([^,]+?),\s?(.+?)\)/))){e.next=42;break}return n=d[1],g=d[2],v=JSON.parse(this.templateSrv.replace(d[3])),e.abrupt("return",this.getResourceARNs(n,g,v));case 42:if(!t.match(/^statistics\(\)/)){e.next=45;break}return e.abrupt("return",this.standardStatistics.map((function(e){return{value:e,label:e,text:e}})));case 45:return e.abrupt("return",Promise.resolve([]));case 46:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"annotationQuery",value:function(e){var t=this,n=e.annotation,r=n.statistics.map((function(e){return t.templateSrv.replace(e)})),a=n.prefixMatching?"":"300",o=n.period||a;o=parseInt(o,10);var i={prefixMatching:n.prefixMatching,region:this.templateSrv.replace(this.getActualRegion(n.region)),namespace:this.templateSrv.replace(n.namespace),metricName:this.templateSrv.replace(n.metricName),dimensions:this.convertDimensionFormat(n.dimensions,{}),statistics:r,period:o,actionPrefix:n.actionPrefix||"",alarmNamePrefix:n.alarmNamePrefix||""};return this.awsRequest("/api/tsdb/query",{from:e.range.from.valueOf().toString(),to:e.range.to.valueOf().toString(),queries:[be({refId:"annotationQuery",datasourceId:this.id,type:"annotationQuery"},i)]}).then((function(e){return e.results.annotationQuery.tables[0].rows.map((function(e){return{annotation:n,time:Date.parse(e[0]),title:e[1],tags:[e[2]],text:e[3]}}))}))}},{key:"targetContainsTemplate",value:function(e){var t=this;return this.templateSrv.variableExists(e.region)||this.templateSrv.variableExists(e.namespace)||this.templateSrv.variableExists(e.metricName)||s.a.find(e.dimensions,(function(e,n){return t.templateSrv.variableExists(n)||t.templateSrv.variableExists(e)}))}},{key:"testDatasource",value:function(){var e=this.defaultRegion;return this.getDimensionValues(e,"AWS/Billing","EstimatedCharges","ServiceName",{}).then((function(){return{status:"success",message:"Data source is working"}}))}},{key:"awsRequest",value:(i=he(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",url:t,data:n},e.next=3,Object(I.getBackendSrv)().datasourceRequest(r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"getDefaultRegion",value:function(){return this.defaultRegion}},{key:"getActualRegion",value:function(e){return"default"===e||void 0===e||""===e?this.getDefaultRegion():e}},{key:"showContextToggle",value:function(){return!0}},{key:"convertToCloudWatchTime",value:function(e,t){return s.a.isString(e)&&(e=c.dateMath.parse(e,t)),Math.round(e.valueOf()/1e3)}},{key:"convertDimensionFormat",value:function(e,t){var n=this;return Object.entries(e).reduce((function(e,r){var a=de(r,2),o=a[0],i=a[1];if(o=n.replace(o,t,!0,"dimension keys"),Array.isArray(i))return be({},e,Se({},o,i));var s=n.templateSrv.getVariables().find((function(e){return e.name===n.templateSrv.getVariableName(i)}));return s?s.multi?be({},e,Se({},o,n.templateSrv.replace(i,t,"pipe").split("|"))):be({},e,Se({},o,[n.templateSrv.replace(i,t)])):be({},e,Se({},o,[i]))}),{})}},{key:"replace",value:function(e,t,n,r){var a=this;if(n){var o=this.templateSrv.getVariables().find((function(t){return t.name===a.templateSrv.getVariableName(e)}));o&&o.multi&&this.debouncedCustomAlert("CloudWatch templating error","Multi template variables are not supported for ".concat(r||e))}return this.templateSrv.replace(e,t)}},{key:"getQueryDisplayText",value:function(e){var t;return"Logs"===e.queryMode?null!==(t=e.expression)&&void 0!==t?t:"":JSON.stringify(e)}},{key:"variables",get:function(){return this.templateSrv.getVariables().map((function(e){return"$".concat(e.name)}))}}])&&we(n.prototype,r),o&&we(n,o),t}(c.DataSourceApi);function Ne(e){var t=e.lastIndexOf(":");return e.substr(t+1)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s.a.defaultsDeep(this.annotation,{namespace:"",metricName:"",expression:"",dimensions:{},region:"default",id:"",alias:"",statistics:["Average"],matchExact:!0,prefixMatching:!1,actionPrefix:"",alarmNamePrefix:""}),this.onChange=this.onChange.bind(this)}var t,n,r;return t=e,(n=[{key:"onChange",value:function(e){Object.assign(this.annotation,e)}}])&&Ae(t.prototype,n),r&&Ae(t,r),e}();Ie.templateUrl="partials/annotations.editor.html";var Pe,De,qe=n("ftg2"),Fe=n("NIg9"),Te=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Me=(Pe=["",""],De=["",""],Object.freeze(Object.defineProperties(Pe,{raw:{value:Object.freeze(De)}})));function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Le=function(){function e(){for(var t=this,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return _e(this,e),this.tag=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return"function"==typeof e?t.interimTag.bind(t,e):"string"==typeof e?t.transformEndResult(e):(e=e.map(t.transformString.bind(t)),t.transformEndResult(e.reduce(t.processSubstitutions.bind(t,r))))},r.length>0&&Array.isArray(r[0])&&(r=r[0]),this.transformers=r.map((function(e){return"function"==typeof e?e():e})),this.tag}return Te(e,[{key:"interimTag",value:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return this.tag(Me,e.apply(void 0,[t].concat(r)))}},{key:"processSubstitutions",value:function(e,t,n){var r=this.transformSubstitution(e.shift(),t);return"".concat(t,r,n)}},{key:"transformString",value:function(e){return this.transformers.reduce((function(e,t){return t.onString?t.onString(e):e}),e)}},{key:"transformSubstitution",value:function(e,t){return this.transformers.reduce((function(e,n){return n.onSubstitution?n.onSubstitution(e,t):e}),e)}},{key:"transformEndResult",value:function(e){return this.transformers.reduce((function(e,t){return t.onEndResult?t.onEndResult(e):e}),e)}}]),e}(),Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function(t){if(""===e)return t.trim();if("start"===(e=e.toLowerCase())||"left"===e)return t.replace(/^\s*/,"");if("end"===e||"right"===e)return t.replace(/\s*$/,"");throw new Error("Side not supported: "+e)}}};function Ve(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function(t){if("initial"===e){var n=t.match(/^[^\S\n]*(?=\S)/gm),r=n&&Math.min.apply(Math,Ve(n.map((function(e){return e.length}))));if(r){var a=new RegExp("^.{"+r+"}","gm");return t.replace(a,"")}return t}if("all"===e)return t.replace(/^[^\S\n]+/gm,"");throw new Error("Unknown type: "+e)}}},Ue=function(e,t){return{onEndResult:function(n){if(null==e||null==t)throw new Error("replaceResultTransformer requires at least 2 arguments.");return n.replace(e,t)}}},Be=function(e,t){return{onSubstitution:function(n,r){if(null==e||null==t)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==n?n:n.toString().replace(e,t)}}},Ke={separator:"",conjunction:"",serial:!1},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return{onSubstitution:function(t,n){if(Array.isArray(t)){var r=t.length,a=e.separator,o=e.conjunction,i=e.serial,s=n.match(/(\n?[^\S\n]+)$/);if(t=s?t.join(a+s[1]):t.join(a+" "),o&&r>1){var u=t.lastIndexOf(a);t=t.slice(0,u)+(i?a:"")+" "+o+t.slice(u+1)}}return t}}},Je=function(e){return{onSubstitution:function(t,n){if(null==e||"string"!=typeof e)throw new Error("You need to specify a string character to split by.");return"string"==typeof t&&t.includes(e)&&(t=t.split(e)),t}}},ze=function(e){return null!=e&&!Number.isNaN(e)&&"boolean"!=typeof e},$e=function(){return{onSubstitution:function(e){return Array.isArray(e)?e.filter(ze):ze(e)?e:""}}},Ze=(new Le(We({separator:","}),Ge,Qe),new Le(We({separator:",",conjunction:"and"}),Ge,Qe),new Le(We({separator:",",conjunction:"or"}),Ge,Qe),new Le(Je("\n"),$e,We,Ge,Qe),new Le(Je("\n"),We,Ge,Qe,Be(/&/g,"&amp;"),Be(/</g,"&lt;"),Be(/>/g,"&gt;"),Be(/"/g,"&quot;"),Be(/'/g,"&#x27;"),Be(/`/g,"&#x60;")),new Le(Ue(/(?:\n(?:\s*))+/g," "),Qe),new Le(Ue(/(?:\n\s*)/g,""),Qe),new Le(We({separator:","}),Ue(/(?:\s+)/g," "),Qe),new Le(We({separator:",",conjunction:"or"}),Ue(/(?:\s+)/g," "),Qe),new Le(We({separator:",",conjunction:"and"}),Ue(/(?:\s+)/g," "),Qe),new Le(We,Ge,Qe),new Le(We,Ue(/(?:\s+)/g," "),Qe),new Le(Ge,Qe)),He=new Le(Ge("all"),Qe),Ye=n("CIDn"),Xe=n("kDDq");function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(){var e=kt(["\n  margin-top: 5px;\n"]);return it=function(){return e},e}function st(){var e=kt(['fields requestId, latency |\n                           filter logType = "RequestSummary" |\n                           sort latency desc |\n                           limit 10']);return st=function(){return e},e}function ut(){var e=kt(['fields ispresent(resolverArn) as isRes |\n                           filter isRes |\n                           filter logType = "Tracing" |\n                           stats min(duration), max(duration), avg(duration) as avgDur by resolverArn |\n                           sort avgDur desc |\n                           limit 10']);return ut=function(){return e},e}function ct(){var e=kt(['fields requestId, latency |\n                           filter logType = "RequestSummary" |\n                           sort latency desc |\n                           limit 10']);return ct=function(){return e},e}function lt(){var e=kt(['fields ispresent(resolverArn) as isRes |\n                           stats count() as errorCount by resolverArn, logType |\n                           filter isRes and (logType = "RequestMapping" or logType = "ResponseMapping") and fieldInError |\n                           sort errorCount desc |\n                           limit 10']);return lt=function(){return e},e}function mt(){var e=kt(['fields ispresent(resolverArn) as isRes |\n                           stats count() as invocationCount by resolverArn |\n                           filter isRes |\n                           filter logType = "Tracing" |\n                           sort invocationCount desc |\n                           limit 10']);return mt=function(){return e},e}function ft(){var e=kt(['fields resolverArn, duration |\n                           filter logType = "Tracing" |\n                           sort duration desc |\n                           limit 10']);return ft=function(){return e},e}function pt(){var e=kt(['fields ispresent(graphQLAPIId) as isApi |\n                           filter isApi |\n                           filter logType = "RequestSummary" |\n                           stats count() as statusCount by statusCode |\n                           sort statusCount desc']);return pt=function(){return e},e}function dt(){var e=kt(["filter @message like /Exception/ |\n                           stats count(*) as exceptionCount by bin(5m) |\n                           sort exceptionCount desc"]);return dt=function(){return e},e}function gt(){var e=kt(["fields @timestamp, @message |\n                           sort @timestamp desc |\n                           limit 25"]);return gt=function(){return e},e}function vt(){var e=kt(['filter eventName="CreateUser" |\n                           fields awsRegion, requestParameters.userName, responseElements.user.arn']);return vt=function(){return e},e}function ht(){var e=kt(['filter eventSource="ec2.amazonaws.com" |\n                           stats count(*) as eventCount by eventName, awsRegion |\n                           sort eventCount desc']);return ht=function(){return e},e}function yt(){var e=kt(['filter action="REJECT" |\n                           stats count(*) as numRejections by srcAddr |\n                           sort numRejections desc |\n                           limit 20']);return yt=function(){return e},e}function bt(){var e=kt(["stats sum(bytes) as bytesTransferred by srcAddr, dstAddr |\n                           sort bytesTransferred desc |\n                           limit 10"]);return bt=function(){return e},e}function St(){var e=kt(['filter @type = "REPORT" |\n                           fields @requestId, @billedDuration |\n                           sort by @billedDuration desc']);return St=function(){return e},e}function wt(){var e=kt(['\n        filter @type = "REPORT" |\n        stats max(@memorySize / 1024 / 1024) as provisonedMemoryMB,\n              min(@maxMemoryUsed / 1024 / 1024) as smallestMemoryRequestMB,\n              avg(@maxMemoryUsed / 1024 / 1024) as avgMemoryUsedMB,\n              max(@maxMemoryUsed / 1024 / 1024) as maxMemoryUsedMB,\n              provisonedMemoryMB - maxMemoryUsedMB as overProvisionedMB']);return wt=function(){return e},e}function xt(){var e=kt(['filter @type = "REPORT" |\n                           stats avg(@duration), max(@duration), min(@duration) by bin(5m)']);return xt=function(){return e},e}function kt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Rt=[{category:"Lambda",examples:[{title:"View latency statistics for 5-minute intervals",expr:He(xt())},{title:"Determine the amount of overprovisioned memory",expr:Ze(wt())},{title:"Find the most expensive requests",expr:He(St())}]},{category:"VPC Flow Logs",examples:[{title:"Average, min, and max byte transfers by source and destination IP addresses",expr:"stats avg(bytes), min(bytes), max(bytes) by srcAddr, dstAddr"},{title:"IP addresses using UDP transfer protocol",expr:"filter protocol=17 | stats count(*) by srcAddr"},{title:"Top 10 byte transfers by source and destination IP addresses",expr:He(bt())},{title:"Top 20 source IP addresses with highest number of rejected requests",expr:He(yt())}]},{category:"CloudTrail",examples:[{title:"Number of log entries by service, event type, and region",expr:"stats count(*) by eventSource, eventName, awsRegion"},{title:"Number of log entries by region and EC2 event type",expr:He(ht())},{title:"Regions, usernames, and ARNs of newly created IAM users",expr:He(vt())}]},{category:"Common Queries",examples:[{title:"25 most recently added log events",expr:He(gt())},{title:"Number of exceptions logged every 5 minutes",expr:He(dt())},{title:"List of log events that are not exceptions",expr:"fields @message | filter @message not like /Exception/"}]},{category:"Route 53",examples:[{title:"Number of requests received every 10  minutes by edge location",expr:"stats count(*) by queryType, bin(10m)"},{title:"Number of unsuccessful requests by domain",expr:'filter responseCode="SERVFAIL" | stats count(*) by queryName'},{title:"Number of requests received every 10  minutes by edge location",expr:"stats count(*) as numRequests by resolverIp | sort numRequests desc | limit 10"}]},{category:"AWS AppSync",examples:[{title:"Number of unique HTTP status codes",expr:He(pt())},{title:"Top 10 resolvers with maximum latency",expr:He(ft())},{title:"Most frequently invoked resolvers",expr:He(mt())},{title:"Resolvers with most errors in mapping templates",expr:He(lt())},{title:"Field latency statistics",expr:He(ct())},{title:"Resolver latency statistics",expr:He(ut())},{title:"Top 10 requests with maximum latency",expr:He(st())}]}];var Ot=Object(Xe.css)(it()),Et=function(e){function t(){return tt(this,t),rt(this,at(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,e),n=t,(r=[{key:"onClickExample",value:function(e){this.props.onClickExample(e)}},{key:"renderExpression",value:function(e,t){var n=this;return m.a.createElement("div",{className:"cheat-sheet-item__example",key:e,onClick:function(t){return n.onClickExample({refId:"A",expression:e,queryMode:"Logs",region:"default",id:"A"})}},m.a.createElement("pre",null,function(e,t){var n,r=null!==(n=z.a.languages.cloudwatch)&&void 0!==n?n:W.i,a=Object(Ye.c)(z.a.tokenize(e,r)).filter((function(e){return"string"!=typeof e})).map((function(e,n){return m.a.createElement("span",{className:"prism-token token ".concat(e.types.join(" ")," ").concat(e.aliases.join(" ")),key:"".concat(t,"-token-").concat(n)},e.content)}));return m.a.createElement("div",{className:"slate-query-field"},a)}(e,t)))}},{key:"renderLogsCheatSheet",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement("h2",null,"CloudWatch Logs Cheat Sheet"),Rt.map((function(t){return m.a.createElement("div",null,m.a.createElement("div",{className:"cheat-sheet-item__title ".concat(Object(Xe.cx)(Ot))},t.category),t.examples.map((function(t,n){return m.a.createElement("div",{className:"cheat-sheet-item",key:"item-".concat(n)},m.a.createElement("h4",null,t.title),e.renderExpression(t.expr,"item-".concat(n)))})))})))}},{key:"render",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement("h2",null,"CloudWatch Logs Cheat Sheet"),Rt.map((function(t){return m.a.createElement("div",null,m.a.createElement("div",{className:"cheat-sheet-item__title ".concat(Object(Xe.cx)(Ot))},t.category),t.examples.map((function(t,n){return m.a.createElement("div",{className:"cheat-sheet-item",key:"item-".concat(n)},m.a.createElement("h4",null,t.title),e.renderExpression(t.expr,"item-".concat(n)))})))})))}}])&&nt(n.prototype,r),a&&nt(n,a),t}(l.PureComponent);n.d(t,"plugin",(function(){return Ct}));var Ct=new c.DataSourcePlugin(je).setExploreStartPage(Et).setConfigEditor(O).setQueryEditor(Fe.a).setExploreMetricsQueryField(Fe.a).setExploreLogsQueryField(qe.a).setAnnotationQueryCtrl(Ie)},sGFA:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=!1;return{promise:new Promise((function(n,r){e.then((function(e){return t?r({isCanceled:!0}):n(e)})),e.catch((function(e){return r(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}}}}]);
//# sourceMappingURL=cloudwatchPlugin.7bf174750e07ac7111d5.js.map